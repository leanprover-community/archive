[
    {
        "content": "<p>I recently proved the existence and unique of remainder and integer division. I was wondering whether it was possible to get a function for the remainder out of the existence theorem. The current issue is that the existence theorem requires the divisor to be positive, so a naïve approach with Nat.find isn't working. Perhaps the function should take the dividend, the divisor, and a proof that the divisor is positive? However, I have no idea of how to implement this, apart from having a divisor as well as a proof of a property of that divisor reminding me of the BKH interpretation of a proof for existential quantification.</p>\n<p>By the way, my code is probably horribly inefficient. I intentionally tried to prove stuff manually, but I was wondering whether Mathlib already had similar stuff, and whether if I my proofs had redundant steps that could have been avoided by alterations to the strategy. Any feedback on the code itself would be appreciated too, even if it doesn't solve my question.</p>\n<p><a href=\"/user_uploads/3121/HPYkidPwpvuU0nX8m6oujwzB/remainder_exists_unique.lean\">remainder_exists_unique.lean</a></p>",
        "id": 543748171,
        "sender_full_name": "Juho Pitkänen",
        "timestamp": 1759930146
    },
    {
        "content": "<p>you can case on whether the divisor is 0</p>",
        "id": 543748384,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1759930199
    },
    {
        "content": "<p>the syntax is <code>if h : &lt;condition&gt; then f h else g h</code></p>",
        "id": 543748442,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1759930212
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"955285\">Juho Pitkänen</span> <a href=\"#narrow/channel/113489-new-members/topic/How.20to.20get.20a.20function.20from.20this.20existence.20theorem.3F/near/543748171\">said</a>:</p>\n<blockquote>\n<p>horribly inefficient</p>\n</blockquote>\n<p>as for efficiency, there's no point trying to optimise, because the Lean Nat secretly uses C (or whatever library) when doing computation</p>",
        "id": 543748709,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1759930282
    },
    {
        "content": "<p>By efficiency, I was thinking about lines of code and effort required to prove something rather than performance</p>",
        "id": 543748981,
        "sender_full_name": "Juho Pitkänen",
        "timestamp": 1759930347
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"955285\">Juho Pitkänen</span> <a href=\"#narrow/channel/113489-new-members/topic/How.20to.20get.20a.20function.20from.20this.20existence.20theorem.3F/near/543748171\">said</a>:</p>\n<blockquote>\n<p>I was wondering whether Mathlib already had similar stuff</p>\n</blockquote>\n<p>I assure you mathlib has everything you possibly need and want regarding integer division</p>",
        "id": 543749218,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1759930410
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110064\">Kenny Lau</span> <a href=\"#narrow/channel/113489-new-members/topic/How.20to.20get.20a.20function.20from.20this.20existence.20theorem.3F/near/543748442\">wrote</a>:</p>\n<blockquote>\n<p>the syntax is <code>if h : &lt;condition&gt; then f h else g h</code></p>\n</blockquote>\n<p>Is there a way to use the proof the condition holds? I am unsure how I'd actually use this in the context of the file</p>",
        "id": 543749688,
        "sender_full_name": "Juho Pitkänen",
        "timestamp": 1759930523
    },
    {
        "content": "<p>that's the <code>f h</code> part, I used the same letter <code>h</code> to show you that.</p>",
        "id": 543749789,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1759930549
    },
    {
        "content": "<p>I think I maybe understand. I need to review the manuals. Maybe this is covered in _Functional Programming in Lean_?</p>",
        "id": 543750090,
        "sender_full_name": "Juho Pitkänen",
        "timestamp": 1759930621
    },
    {
        "content": "<p>For clarity, this is the statement of existence I proved in the file provided</p>\n<p>∀n m : Nat, m &gt; 0 → ∃q r : Nat, n = q * m + r ∧ r &lt; m</p>",
        "id": 543750497,
        "sender_full_name": "Juho Pitkänen",
        "timestamp": 1759930733
    },
    {
        "content": "<p>I guess if you want to know how to do it with existing library stuff:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"bp\">&gt;</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"n\">hm</span>\n<span class=\"w\">  </span><span class=\"n\">exists</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">%</span><span class=\"w\"> </span><span class=\"n\">m</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">div_add_mod'</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">rfl</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">mod_lt</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">hm</span><span class=\"bp\">⟩</span>\n</code></pre></div>",
        "id": 543789670,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1759940852
    },
    {
        "content": "<p>Thanks, <span class=\"user-mention\" data-user-id=\"873547\">@Robin Arnez</span> . Is uniqueness similarly quick and provided for by mathlib?</p>",
        "id": 543790699,
        "sender_full_name": "Juho Pitkänen",
        "timestamp": 1759941156
    },
    {
        "content": "<p>A bit less quick but still:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"n\">qa</span><span class=\"w\"> </span><span class=\"n\">qb</span><span class=\"w\"> </span><span class=\"n\">ra</span><span class=\"w\"> </span><span class=\"n\">rb</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">qa</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">ra</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">ra</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">qb</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">rb</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">rb</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">qa</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">qb</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">ra</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">rb</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">m</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">helper</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">%</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">    </span><span class=\"n\">rintro</span><span class=\"w\"> </span><span class=\"n\">rfl</span><span class=\"w\"> </span><span class=\"n\">hr</span>\n<span class=\"w\">    </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">mul_add_mod_self_right</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">mod_eq_of_lt</span><span class=\"w\"> </span><span class=\"n\">hr</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">add_comm</span><span class=\"o\">,</span>\n<span class=\"w\">      </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">add_mul_div_right</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">zero_lt_of_lt</span><span class=\"w\"> </span><span class=\"n\">hr</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">div_eq_of_lt</span><span class=\"w\"> </span><span class=\"n\">hr</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">zero_add</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">rfl</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">rfl</span><span class=\"bp\">⟩</span>\n<span class=\"w\">  </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">qa</span><span class=\"w\"> </span><span class=\"n\">qb</span><span class=\"w\"> </span><span class=\"n\">ra</span><span class=\"w\"> </span><span class=\"n\">rb</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">h₁</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">h₂</span><span class=\"bp\">⟩</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">h₃</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">h₄</span><span class=\"bp\">⟩</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">helper</span><span class=\"w\"> </span><span class=\"n\">qa</span><span class=\"w\"> </span><span class=\"n\">ra</span><span class=\"w\"> </span><span class=\"n\">h₁</span><span class=\"w\"> </span><span class=\"n\">h₂</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">helper</span><span class=\"w\"> </span><span class=\"n\">qb</span><span class=\"w\"> </span><span class=\"n\">rb</span><span class=\"w\"> </span><span class=\"n\">h₃</span><span class=\"w\"> </span><span class=\"n\">h₄</span><span class=\"o\">]</span>\n</code></pre></div>",
        "id": 543794066,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1759942192
    },
    {
        "content": "<p>I see, still quite elegant. Taught me a few useful tricks and developed my mental model</p>",
        "id": 543794909,
        "sender_full_name": "Juho Pitkänen",
        "timestamp": 1759942488
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/Init/Data/Nat/Lemmas.html#Nat.div_mod_unique\">Nat.div_mod_unique</a></p>",
        "id": 543795932,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1759942840
    },
    {
        "content": "<p>(as I said above, I assure you mathlib has everything you possibly need and want regarding integer division)</p>",
        "id": 543796020,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1759942865
    },
    {
        "content": "<p>also you seem to use \"integer\" to mean natural numbers? that might be a bit confusing</p>",
        "id": 543796084,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1759942885
    },
    {
        "content": "<p>in any case both statements are true, mathlib has anything you can ever want about Nat or Int division</p>",
        "id": 543796135,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1759942900
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110064\">Kenny Lau</span> <a href=\"#narrow/channel/113489-new-members/topic/How.20to.20get.20a.20function.20from.20this.20existence.20theorem.3F/near/543796084\">said</a>:</p>\n<blockquote>\n<p>also you seem to use \"integer\" to mean natural numbers? that might be a bit confusing</p>\n</blockquote>\n<p>If I’ve said integer in this thread, I’ve meant the natural numbers</p>",
        "id": 543799982,
        "sender_full_name": "Juho Pitkänen",
        "timestamp": 1759944275
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110064\">Kenny Lau</span> <a href=\"#narrow/channel/113489-new-members/topic/How.20to.20get.20a.20function.20from.20this.20existence.20theorem.3F/near/543748442\">said</a>:</p>\n<blockquote>\n<p>the syntax is <code>if h : &lt;condition&gt; then f h else g h</code></p>\n</blockquote>\n<p>I tried the following, and I think the syntax is okay</p>\n<div class=\"codehilite\" data-code-language=\"def\"><pre><span></span><code>   if h : b &gt; 0 then Nat.find (remainder_existence a b h) else a\n</code></pre></div>\n<p>However, I get the error </p>\n<blockquote>\n<p>failed to synthesize<br>\n  DecidablePred fun n ↦ ∃ r, a = n * b + r ∧ r &lt; b</p>\n</blockquote>\n<p>I think I know the reason, that being that Lean is unsure of how to decide this proposition. Seems like this is harder than I thought. Perhaps mathlib uses an inductive definition instead and then just proves properties about it?</p>",
        "id": 543815968,
        "sender_full_name": "Juho Pitkänen",
        "timestamp": 1759950176
    },
    {
        "content": "<p>can you write down a <a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a></p>",
        "id": 543816914,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1759950536
    },
    {
        "content": "<p>I was not expecting this error</p>",
        "id": 543816984,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1759950563
    },
    {
        "content": "<p>and I really don't see where it could be coming from</p>",
        "id": 543817019,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1759950573
    },
    {
        "content": "<p>oh is it on the <code>Nat.find</code></p>",
        "id": 543817051,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1759950592
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> <a href=\"#narrow/channel/113489-new-members/topic/How.20to.20get.20a.20function.20from.20this.20existence.20theorem.3F/near/543817051\">kirjoitti</a>:</p>\n<blockquote>\n<p>oh is it on the <code>Nat.find</code></p>\n</blockquote>\n<p>Indeed</p>",
        "id": 543817086,
        "sender_full_name": "Juho Pitkänen",
        "timestamp": 1759950609
    },
    {
        "content": "<p>then you may have luck swapping the existence statement around, to be <code>∃ r, r &lt; b ∧ a = n * b + r</code> instead of <code>∃ r, a = n * b + r ∧ r &lt; b</code></p>",
        "id": 543817217,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1759950661
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> <a href=\"#narrow/channel/113489-new-members/topic/How.20to.20get.20a.20function.20from.20this.20existence.20theorem.3F/near/543816914\">kirjoitti</a>:</p>\n<blockquote>\n<p>can you write down a <a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a></p>\n</blockquote>\n<p>There's a link to the file I typed this in at the top. I imported Mathlib and proved the theorem <code>remainder_existence : ∀n m : Nat, m &gt; 0 → ∃q r : Nat, n = q * m + r ∧ r &lt; m</code></p>",
        "id": 543817225,
        "sender_full_name": "Juho Pitkänen",
        "timestamp": 1759950665
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"955285\">@Juho Pitkänen</span> indeed, mathlib knows that if the quantifier is bounded then you just need to search finitely many things, but the way to say the quantifier bounded is that it has to go on the front, meaning <code>∃ r, a = n * b + r ∧ r &lt; b</code> won't work but <code>∃ r, r &lt; b ∧ a = n * b + r</code> will</p>",
        "id": 543817716,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1759950844
    },
    {
        "content": "<p>because Lean can't work based on intuition, it works based on very specific rules, and one of those rules is that it only looks at the form of your expression and doesn't try to guess the meaning, so it only knows about the bounded quantifier if you put it at the front</p>",
        "id": 543817897,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1759950920
    },
    {
        "content": "<p>Ah, that makes sense.</p>",
        "id": 543817978,
        "sender_full_name": "Juho Pitkänen",
        "timestamp": 1759950958
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">remex_alt</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"bp\">&gt;</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"bp\">∃</span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"o\">{</span>\n<span class=\"w\">  </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"n\">mpos</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">remex</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">remainder_existence</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"n\">mpos</span>\n<span class=\"w\">  </span><span class=\"n\">cases'</span><span class=\"w\"> </span><span class=\"n\">remex</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"n\">qh</span>\n<span class=\"w\">  </span><span class=\"n\">cases'</span><span class=\"w\"> </span><span class=\"n\">qh</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"n\">remex</span>\n<span class=\"w\">  </span><span class=\"n\">use</span><span class=\"w\"> </span><span class=\"n\">q</span>\n<span class=\"w\">  </span><span class=\"n\">use</span><span class=\"w\"> </span><span class=\"n\">r</span>\n<span class=\"w\">  </span><span class=\"n\">tauto</span>\n<span class=\"o\">}</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">natdiv</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">  </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">&gt;</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">find</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">remex_alt</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">else</span><span class=\"w\"> </span><span class=\"n\">a</span>\n</code></pre></div>\n<p>I got it to work, thanks to y'all's help.</p>",
        "id": 543818931,
        "sender_full_name": "Juho Pitkänen",
        "timestamp": 1759951319
    },
    {
        "content": "<p>btw in lean (3/0, 3%0) is (0, 3)</p>",
        "id": 543819747,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1759951625
    },
    {
        "content": "<p>Ah, interesting</p>",
        "id": 543819830,
        "sender_full_name": "Juho Pitkänen",
        "timestamp": 1759951663
    },
    {
        "content": "<p>Actually, that makes far more sense than how I had defined it.</p>",
        "id": 543819908,
        "sender_full_name": "Juho Pitkänen",
        "timestamp": 1759951687
    },
    {
        "content": "<p>Looking at the way I proved Liu's alternative version of the theorem, it seems rather verbose, which could be a code smell. I initially assumed tauto would just solve it outright but apparently one has to get rid of the quantifiers first. Am I doing something wrong?</p>",
        "id": 543820218,
        "sender_full_name": "Juho Pitkänen",
        "timestamp": 1759951799
    },
    {
        "content": "<p>you mean the one where he swapped the order?</p>",
        "id": 543820357,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1759951852
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">remex_alt</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"bp\">&gt;</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">simpa</span><span class=\"w\"> </span><span class=\"n\">only</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">and_comm</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"kn\">using</span><span class=\"w\"> </span><span class=\"n\">remainder_existence</span>\n</code></pre></div>",
        "id": 543820360,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1759951854
    },
    {
        "content": "<p>does that work</p>",
        "id": 543820383,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1759951864
    },
    {
        "content": "<p>It does! Magical</p>",
        "id": 543820533,
        "sender_full_name": "Juho Pitkänen",
        "timestamp": 1759951918
    },
    {
        "content": "<p>Thanks for the help, both of you</p>",
        "id": 543820648,
        "sender_full_name": "Juho Pitkänen",
        "timestamp": 1759951967
    }
]