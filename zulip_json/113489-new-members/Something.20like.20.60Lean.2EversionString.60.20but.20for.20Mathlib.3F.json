[
    {
        "content": "<p>How can I obtain the version string of Mathlib from within Lean?</p>\n<p>I'm looking for something analogous to:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">#</span><span class=\"n\">eval</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">versionString</span>\n<span class=\"c1\">-- \"4.20.0-rc5\"</span>\n</code></pre></div>\n<p>… but for the version of Mathlib.</p>\n<p>Additionally, is there a way to retrieve the commit hash of the currently running Lean and Mathlib versions from within Lean itself (i.e., without shelling out or relying on external tools)?</p>",
        "id": 518909385,
        "sender_full_name": "Louis Cabarion",
        "timestamp": 1747564057
    },
    {
        "content": "<p>Regarding the commit, <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Lean.githash#doc\">docs#Lean.githash</a></p>",
        "id": 518911282,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1747565469
    },
    {
        "content": "<p>For mathlib the best you can do is invoke git in the directory containing the oleans, but in the extreme case there's no guarantee that git is even installed</p>",
        "id": 518911412,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1747565571
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"310045\">@Eric Wieser</span>. The combination of <code>Lean.versionString</code> and <code>Lean.githash</code> is exactly what I needed for the Lean side.</p>\n<p>Is there any particular reason why the corresponding <code>Mathlib.versionString</code> and <code>Mathlib.githash</code> would be undesirable or problematic to add, or has it simply not been implemented yet?</p>",
        "id": 518911996,
        "sender_full_name": "Louis Cabarion",
        "timestamp": 1747566098
    },
    {
        "content": "<p>Those features exist in lean because it has a release process that involves releasing compiled binaries into which those strings are embedded. Mathlib releases no such compiled binary, and the release process is simply to make a git tag without running any other commands.</p>",
        "id": 518914744,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1747568488
    },
    {
        "content": "<p>Maybe a better answer is \"read the lake manifest (via the lake API) to discover what versions of things you are using\"</p>",
        "id": 518914839,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1747568559
    },
    {
        "content": "<p>Maybe you can read the version from <code>lake-manifest.json</code>?</p>",
        "id": 518947969,
        "sender_full_name": "Jz Pan",
        "timestamp": 1747595204
    }
]