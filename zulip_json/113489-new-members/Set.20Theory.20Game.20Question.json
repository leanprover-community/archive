[
    {
        "content": "<p>To solve Level 6 in the family intersection game, I use the following sequence of commands:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">x</span>\n<span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">h2</span>\n<span class=\"n\">rewrite</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">mem_sInter</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">h2</span>\n<span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h3</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">⋂₀</span><span class=\"w\"> </span><span class=\"n\">F</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">F</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">∪</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">⋂₀</span><span class=\"n\">F</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">U</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">G</span>\n<span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">h1</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">⋂₀</span><span class=\"n\">F</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">U</span><span class=\"o\">)</span>\n<span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h4</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">∪</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">⋂₀</span><span class=\"n\">F</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">U</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">h3</span>\n<span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h5</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">∪</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">⋂₀</span><span class=\"n\">F</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">U</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">∪</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">⋂₀</span><span class=\"n\">F</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">U</span><span class=\"o\">)</span>\n<span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">h2</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">∪</span><span class=\"w\"> </span><span class=\"bp\">⋂₀</span><span class=\"w\"> </span><span class=\"n\">F</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">U</span><span class=\"o\">)</span>\n<span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h6</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">∪</span><span class=\"w\"> </span><span class=\"bp\">⋂₀</span><span class=\"w\"> </span><span class=\"n\">F</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">h5</span><span class=\"w\"> </span><span class=\"n\">h4</span>\n<span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">h6</span>\n</code></pre></div>\n<p>For some reason, I am not able to apply <code>exact h6</code> in the end. Might the reason be that I used casting such as (⋂₀F : Set U) ?</p>",
        "id": 463074946,
        "sender_full_name": "Gridiron Player",
        "timestamp": 1723943736
    },
    {
        "content": "<p>Seems like a lean game maker bug, cc: <span class=\"user-mention\" data-user-id=\"385895\">@Jon Eugster</span> . I was able to input the commands until the last line, which also appears to have been accepted and also produces 0 goals but does not trigger a \"goals accomplished\"</p>",
        "id": 463075591,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1723944316
    },
    {
        "content": "<p>I don't understand what's happening in the step <code>have h4 : A ∪ (⋂₀F : Set U) ∈ G := by apply h3</code>.  Applying <code>h3</code> should leave you with a goal of <code>⋂₀ F ∈ F</code> to complete the justification of <code>h4</code>.  But the game just adds <code>h4</code> to the list of assumptions and returns to the original goal, even though <code>h4</code> has not been justified.  Is there a problem with using <code>have ... := by ...</code> in games?</p>",
        "id": 463186333,
        "sender_full_name": "Dan Velleman",
        "timestamp": 1723993715
    },
    {
        "content": "<p>By the way, <span class=\"user-mention\" data-user-id=\"734274\">@Gridiron Player</span>, this proof strategy doesn't look promising to me.  I don't see any reason to believe that <code>⋂₀ F ∈ F </code> is true, so I don't think <code>h3</code> is going to be useful.</p>\n<p>After <code>intro x</code> and <code>intro h2</code>, the game suggests writing out the meaning of the goal.  If you do that, it gives a further hint giving a different approach to the proof.</p>",
        "id": 463187897,
        "sender_full_name": "Dan Velleman",
        "timestamp": 1723994123
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"453098\">@Dan Velleman</span>  For some reason, I assumed ⋂₀ F ∈ F to always be true. A simple counterexample would be  F = {{1}, {2}} and   ⋂₀ F = {}. {} is not an element of F.<br>\nWeird enough that the game let me do that though.</p>",
        "id": 463195020,
        "sender_full_name": "Gridiron Player",
        "timestamp": 1723996435
    },
    {
        "content": "<p>Yes, this looks like a bug in the game software.</p>",
        "id": 463195411,
        "sender_full_name": "Dan Velleman",
        "timestamp": 1723996539
    },
    {
        "content": "<p>Yes, and thinking about this deeper, the reason I thought ⋂₀ F ∈ F is always true is because I mixed it up with `⋂₀ F \\subset F' Its always the basics :)</p>",
        "id": 463198580,
        "sender_full_name": "Gridiron Player",
        "timestamp": 1723997748
    },
    {
        "content": "<p>Perhaps what you're thinking of is the first level in Family Intersection World:  If <code>A ∈ F</code> then <code>⋂₀ F ⊆ A</code>.</p>",
        "id": 463199959,
        "sender_full_name": "Dan Velleman",
        "timestamp": 1723998363
    },
    {
        "content": "<p>Ah yes this makes sense, the line <code>have h4 : A &cup; (&xcap;₀F : Set U) &isin; G := by apply h3</code> contains an \"unsolved goal error\" as you can see in the screenshot below (or in \"editor mode\"), but we've been filtering out the \"unsolved goal\" errors (in \"typewriter mode\", anyways) so that the user doesn't see it constantly while working on a proof. This will need some tweaking of this filtering logic, so you do get an error when entering the command you entered.</p>\n<p><a href=\"/user_uploads/3121/C5QCKdzOKeX5qDiuKxYl7XLc/Screenshot_20240818_191545.png\">Screenshot_20240818_191545.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/C5QCKdzOKeX5qDiuKxYl7XLc/Screenshot_20240818_191545.png\" title=\"Screenshot_20240818_191545.png\"><img data-original-dimensions=\"1440x1139\" src=\"/user_uploads/thumbnail/3121/C5QCKdzOKeX5qDiuKxYl7XLc/Screenshot_20240818_191545.png/840x560.webp\"></a></div><p>If you replace <code>have h4 : A &cup; (&xcap;₀F : Set U) &isin; G := by apply h3</code> by</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h4</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">&cup;</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">&xcap;₀</span><span class=\"n\">F</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">U</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">&isin;</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">h3</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span><span class=\"w\"> </span><span class=\"c1\">-- goal: &xcap;₀ F &isin; F</span>\n</code></pre></div>\n<p>you can see better that the proof of <code>h4</code> isn't done yet.</p>\n<p>(also note that this is completely fine Lean syntax because <code>:= by &lt;tactic&gt;</code> or <code>:= by &lt;tacticSeq&gt;</code> are both valid, but the game generally mainly features \"stream-of-conciousness\" (aka unstructured) proofs, so <code>:= by</code> isn't supported that well anyways)</p>",
        "id": 463207746,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1724001845
    },
    {
        "content": "<p>I wonder if <code>have h : P := by ...</code> just shouldn't  be allowed in the game.  After all, if you want to give a tactic proof of <code>P</code> you can just do <code>have h : P</code> and then <code>P</code> becomes your immediate goal.  Maybe you could allow <code>have h : P := by &lt;tactic&gt;</code> if the single tactic solves the goal <code>P</code>, but I'm not sure it's really useful, since the user can just as easily do <code>have h : P</code> on one line and then <code>&lt;tactic&gt;</code> on the next line.  And <code>have h : P := by &lt;tacticSeq&gt;</code> really doesn't fit with the way the games work.</p>",
        "id": 463238968,
        "sender_full_name": "Dan Velleman",
        "timestamp": 1724014162
    },
    {
        "content": "<p>Indeed, if it would throw the error (which is filtered out by accident), the user would be asked to fix this line until it's error-free, so it's defacto disallowed. Probably it would be worth to even disallow <code>by</code> all together, you're right about that.</p>",
        "id": 463354032,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1724058940
    }
]