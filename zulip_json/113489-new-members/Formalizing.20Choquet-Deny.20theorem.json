[
    {
        "content": "<p>Hi! After lurking here for a while, I was very recently inspired to grab Mathematics In Lean and work through the basics in order to learn Lean and Mathlib.</p>\n<p>I set myself a modest goal to formalize some basic facts about harmonic functions on discrete groups. I have recorded my partial progress to the <a href=\"https://github.com/petekos-math/HarFunctionsOnGroups\">github</a>. </p>\n<ul>\n<li>My very first attempt is contained in the HarmonicPMF.lean file, it took me a while to realize the awkwardness of working with discrete probability measures. I was only able to formalize the triviality of bounded harmonic functions on finite groups with help from Aristotle, but the proof is rather hard to read and I would like to go and refine it a bit more. </li>\n<li>One of my goals was to actually show that any bounded harmonic function on an abelian group is trivial (wrt to any measure with support generating the group) <span class=\"user-mention\" data-user-id=\"110050\">@Sébastien Gouëzel</span> suggested an alternative and more general <a href=\"https://imar.ro/~dtimotin/idei/choquet-deny5.pdf\">formulation</a> for the topological version of the Choquet-Deny theorem, which seems much more suited for Lean formalization. I got good progress but I still have many sorry's due to having to prove integrability of functions used in the proof.</li>\n<li>In the email correspondence <span class=\"user-mention\" data-user-id=\"110050\">@Sébastien Gouëzel</span> suggested to think about the statement a bit more carefully -- I am not sure we require regularity? Seems we only use Fubini-Tonelli in the proof, as we only interchange the integrals for non-negative functions. We need some kind of non-degeneracy though.</li>\n<li>After I am done with Choquet-Deny, I could try formalizing Poisson boundaries using either the universal property or unique realization of bounded harmonic function using the Poisson representation.</li>\n</ul>\n<p>Any feedback is appreciated!</p>",
        "id": 568361250,
        "sender_full_name": "Peter Kosenko",
        "timestamp": 1768541901
    },
    {
        "content": "<p>I think that the problem with proofs generated by Aristotle is that it tends to use lots of super convoluted syntax and arguments. Understanding proofs generated by Aristotle can be daunting task even for people experience with Lean. Basically, I feel like using Aristotle is a one-way ticket. You should never ever try to read proofs that is has generated.</p>",
        "id": 568361609,
        "sender_full_name": "Jakub Nowak",
        "timestamp": 1768542202
    },
    {
        "content": "<p>Yeah, unfortunately I don't feel like I learned anything from the completed proofs the LLM gave me (it does abuse refine' a lot, which the linter complains about!). I will probably refrain on relying exclusively on Aristotle as I am still learning Lean.</p>",
        "id": 568362343,
        "sender_full_name": "Peter Kosenko",
        "timestamp": 1768542767
    },
    {
        "content": "<p>What you can do is try to get a proof with many assumptions, and then think harder to see if you can remove them (possibly with a different proof) or if they are really necessary. But the first step is definitely to get <em>some</em> proof (but not over finite groups because there sums over finite sets are too different from the natural general setting). Also, I agree that you will learn a lot more by writing by hand your own proofs than by using LLMs -- also LLMs can point you in some proof strategy directions, and give you the names of useful lemmas.</p>",
        "id": 568370661,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1768547910
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"427469\">Peter Kosenko</span> <a href=\"#narrow/channel/113489-new-members/topic/Formalizing.20Choquet-Deny.20theorem/near/568362343\">said</a>:</p>\n<blockquote>\n<p>Yeah, unfortunately I don't feel like I learned anything from the completed proofs the LLM gave me (it does abuse refine' a lot, which the linter complains about!). I will probably refrain on relying exclusively on Aristotle as I am still learning Lean.</p>\n</blockquote>\n<p>The <code>refine'</code> problem, if I understand correctly, is superficial. Just replace them with <code>refine</code> and replace some <code>_</code> with <code>?_</code> as appropriate.</p>",
        "id": 568672565,
        "sender_full_name": "Bbbbbbbbba",
        "timestamp": 1768751236
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"870257\">Jakub Nowak</span> <a href=\"#narrow/channel/113489-new-members/topic/Formalizing.20Choquet-Deny.20theorem/near/568361609\">said</a>:</p>\n<blockquote>\n<p>I think that the problem with proofs generated by Aristotle is that it tends to use lots of super convoluted syntax and arguments. Understanding proofs generated by Aristotle can be daunting task even for people experience with Lean. Basically, I feel like using Aristotle is a one-way ticket. You should never ever try to read proofs that is has generated.</p>\n</blockquote>\n<p>That's interesting, because I find Aristotle proofs pretty editable, although maybe it is that my problem was easy enough that it did not give Aristotle enough space to convolute.</p>",
        "id": 568674634,
        "sender_full_name": "Bbbbbbbbba",
        "timestamp": 1768751465
    },
    {
        "content": "<p>Sometimes Aristotle can do more than necessary, like it loves <code>simp_all +decide [...]</code> and often a simple `simp [...] works</p>",
        "id": 568679853,
        "sender_full_name": "Weiyi Wang",
        "timestamp": 1768756621
    },
    {
        "content": "<p>I didn't try Aristotle myself yet, my experience is only from code I've seen people post. My experience is that Aristotle is like an experienced mathematician that learned Lean yesterday but is very determined to finish the proof.<br>\nIt can come up with good ideas and can brake proof into smaller steps. But it often misses relevant useful lemmas from mathlib and reproves things that are already proven there. It often uses defeq abuse. Instead of rethinking that it should use a different API, it will throw in conversions and defeq abuse everywhere.</p>",
        "id": 568679857,
        "sender_full_name": "Jakub Nowak",
        "timestamp": 1768756625
    },
    {
        "content": "<p>I thought missing relevant useful lemmas is something humans still do after months of using Lean...</p>",
        "id": 568682552,
        "sender_full_name": "Bbbbbbbbba",
        "timestamp": 1768759022
    },
    {
        "content": "<p>Yes and no. When I think I need some argument that I think it should be in mathlib and can't find it, then I ask on zulip. And I either get an asnwer or I add the lemma to mathlib.</p>",
        "id": 568682672,
        "sender_full_name": "Jakub Nowak",
        "timestamp": 1768759134
    },
    {
        "content": "<p>Imagine if Aristotle had an account on zulip <span aria-label=\"joy\" class=\"emoji emoji-1f602\" role=\"img\" title=\"joy\">:joy:</span></p>",
        "id": 568682908,
        "sender_full_name": "Bbbbbbbbba",
        "timestamp": 1768759335
    },
    {
        "content": "<p>I have finished v1 of the proof of the Choquet-Deny theorem, no sorry terms remaining.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">ChoquetDeny</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">AddCommGroup</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">TopologicalSpace</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">]</span>\n<span class=\"o\">[</span><span class=\"n\">SecondCountableTopology</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">MeasurableSpace</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">]</span>\n<span class=\"o\">[</span><span class=\"n\">BorelSpace</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">IsTopologicalAddGroup</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">]</span>\n<span class=\"o\">(</span><span class=\"n\">μ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">MeasureTheory</span><span class=\"bp\">.</span><span class=\"n\">Measure</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">MeasureTheory</span><span class=\"bp\">.</span><span class=\"n\">IsProbabilityMeasure</span><span class=\"w\"> </span><span class=\"n\">μ</span><span class=\"o\">]</span>\n<span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hfmeas</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Measurable</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">hfbnd</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">hfint</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"bp\">∫</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">∂</span><span class=\"n\">μ</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"bp\">∀ᵐ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">∂</span><span class=\"n\">μ</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>I had to require my group to be second countable due to some issues when I applied the Fubini theorem, but due to the way I stated the conclusion, we don't need regularity of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>μ</mi></mrow><annotation encoding=\"application/x-tex\">\\mu</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\">μ</span></span></span></span> at this step. It should be enough to require that the support of the measure generates the group -- we only need a condition like that to show that <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>∫</mo><mi mathvariant=\"normal\">∣</mi><mi>f</mi><msup><mi mathvariant=\"normal\">∣</mi><mn>2</mn></msup><mi>d</mi><mi>μ</mi><mo>=</mo><mn>0</mn><mtext>  </mtext><mo>⟺</mo><mtext>  </mtext><mi>f</mi><mo>=</mo><mn>0</mn><mi>μ</mi><mo>−</mo><mi>a</mi><mi mathvariant=\"normal\">.</mi><mi>e</mi></mrow><annotation encoding=\"application/x-tex\">\\int |f|^2 d\\mu = 0 \\iff f = 0 \\mu-a.e</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.1202em;vertical-align:-0.3061em;\"></span><span class=\"mop op-symbol small-op\" style=\"margin-right:0.19445em;position:relative;top:-0.0006em;\">∫</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">∣</span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mord\"><span class=\"mord\">∣</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\">μ</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6684em;vertical-align:-0.024em;\"></span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">⟺</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8389em;vertical-align:-0.1944em;\"></span><span class=\"mord\">0</span><span class=\"mord mathnormal\">μ</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">a</span><span class=\"mord\">.</span><span class=\"mord mathnormal\">e</span></span></span></span>.</p>",
        "id": 569918290,
        "sender_full_name": "Peter Kosenko",
        "timestamp": 1769307631
    },
    {
        "content": "<p>Next step is to refine the proof and document the lemmas and steps more carefully.</p>",
        "id": 569918305,
        "sender_full_name": "Peter Kosenko",
        "timestamp": 1769307660
    }
]