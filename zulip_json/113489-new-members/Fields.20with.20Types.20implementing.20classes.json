[
    {
        "content": "<p>Hi, why do the following <code>field1</code> and <code>field2</code> have different underlying types?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">structure</span><span class=\"w\"> </span><span class=\"n\">Ty</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">Field1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span>\n<span class=\"w\">  </span><span class=\"n\">Field2</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">foo</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Ty</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">{</span>\n<span class=\"w\">  </span><span class=\"n\">Field1</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Int</span><span class=\"w\"> </span><span class=\"bp\">//</span><span class=\"w\"> </span><span class=\"n\">Works</span><span class=\"w\"> </span><span class=\"n\">fine</span>\n<span class=\"w\">  </span><span class=\"n\">Field2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Int</span><span class=\"w\"> </span><span class=\"bp\">//</span><span class=\"w\"> </span><span class=\"n\">Doesn't</span><span class=\"w\"> </span><span class=\"n\">works</span><span class=\"w\"> </span><span class=\"bp\">&lt;--</span>\n<span class=\"o\">}</span>\n</code></pre></div>\n<p>Ideally I would want the second field to work to be able to make something like:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">structure</span><span class=\"w\"> </span><span class=\"n\">Config</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">Number</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Add</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span>\n<span class=\"w\">  </span><span class=\"c1\">-- Other types with other classes</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">myConfig</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Config</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">{</span>\n<span class=\"w\">  </span><span class=\"n\">Number</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Nat</span>\n<span class=\"w\">  </span><span class=\"c1\">-- Number := String  will not compile</span>\n<span class=\"o\">}</span>\n</code></pre></div>",
        "id": 451006712,
        "sender_full_name": "Luis Enrique Muñoz Martín",
        "timestamp": 1720797435
    },
    {
        "content": "<p><code>Field2 {X : Type} : X</code> means \"For every type <code>X</code>, an element of <code>X</code>\", while <code>Field1 : Type</code> means \"A type\"</p>",
        "id": 451007041,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1720797497
    },
    {
        "content": "<p>In other words, <code>Field2</code> is a function which chooses an element of <em>every type</em>. Such a function does not exist, since empty types (eg <code>Empty</code> or <code>False</code> or <code>Fin 0</code>) exist</p>",
        "id": 451007302,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1720797551
    },
    {
        "content": "<p>I think what you want is rather</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">structure</span><span class=\"w\"> </span><span class=\"n\">Config</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">Number</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span>\n<span class=\"w\">  </span><span class=\"n\">add</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Add</span><span class=\"w\"> </span><span class=\"n\">Number</span>\n</code></pre></div>",
        "id": 451007454,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1720797595
    },
    {
        "content": "<p>Or even <code>[add : Add Number]</code> which will make filing it automatic</p>",
        "id": 451093718,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1720826463
    },
    {
        "content": "<p>Technically speaking if</p>\n<p><code>Field2 {X : Type} : X</code> means \"For every type <code>X</code>, an element of <code>X</code>\"</p>\n<p>then increasing the universe <code>Field2 {X : Type 1} : X</code>, X should be the type I used later to configure it? (<code>Int</code>)</p>\n<p>The compiler doesn't work with it, but both sides looks pretty similar:</p>\n<div class=\"codehilite\" data-code-language=\"Text only\"><pre><span></span><code>has type\n  Type : Type 1\nbut is expected to have type\n  X✝ : Type 1\n</code></pre></div>",
        "id": 451429731,
        "sender_full_name": "Luis Enrique Muñoz Martín",
        "timestamp": 1721028778
    },
    {
        "content": "<p>What do you mean? This?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">structure</span><span class=\"w\"> </span><span class=\"n\">Config</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">Field2</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span>\n</code></pre></div>\n<p>Note that this is still an empty type -</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Config</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">False</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">PEmpty</span><span class=\"bp\">.</span><span class=\"n\">elim</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"bp\">.</span><span class=\"n\">Field2</span>\n</code></pre></div>",
        "id": 451438383,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1721031402
    },
    {
        "content": "<p>Yes, I meant that.</p>\n<p>With empty type, you mean it's impossible to initialize <code>Field2</code> with any existent type, right?</p>",
        "id": 451445598,
        "sender_full_name": "Luis Enrique Muñoz Martín",
        "timestamp": 1721033497
    },
    {
        "content": "<p>I mean that there's no object of type <code>Config</code></p>",
        "id": 451521160,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1721055603
    }
]