[
    {
        "content": "<p>I was messing around with polynomials and I couldn't figure out how to do some simple computations. For example, I couldn't figure out how to show</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">    </span><span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>and I felt like the proof I found for </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">leadingCoeff</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"o\">:</span><span class=\"n\">Polynomial</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">unfold</span><span class=\"w\"> </span><span class=\"n\">leadingCoeff</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">natDegree</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"o\">:</span><span class=\"n\">Polynomial</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">    </span><span class=\"n\">refine</span><span class=\"w\"> </span><span class=\"n\">natDegree_eq_zero</span><span class=\"bp\">.</span><span class=\"n\">mpr</span><span class=\"w\"> </span><span class=\"bp\">?_</span>\n<span class=\"w\">    </span><span class=\"n\">use</span><span class=\"w\"> </span><span class=\"mi\">2</span>\n<span class=\"w\">    </span><span class=\"n\">simp</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"o\">[</span><span class=\"n\">h</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span>\n</code></pre></div>\n<p>should be easier. Is there a simpler way to do this?</p>",
        "id": 472617550,
        "sender_full_name": "Ahmad Alkhalawi",
        "timestamp": 1727243201
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Polynomial</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">leadingCoeff</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Polynomial</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">leadingCoeff_C</span><span class=\"w\"> </span><span class=\"mi\">2</span>\n</code></pre></div>\n<p>seems to work</p>",
        "id": 472618924,
        "sender_full_name": "Moritz Firsching",
        "timestamp": 1727244058
    },
    {
        "content": "<p>Instead of writing <code>(2 : Polynomial ℤ)</code> you could also write <code>Polynomial.C 2</code> (or just <code>C 2</code> since <code>Polynomial</code> is already open)</p>",
        "id": 472619240,
        "sender_full_name": "Moritz Firsching",
        "timestamp": 1727244167
    },
    {
        "content": "<p>the first one can be done with </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">coeff_one</span><span class=\"o\">]</span>\n</code></pre></div>",
        "id": 472619516,
        "sender_full_name": "Moritz Firsching",
        "timestamp": 1727244299
    },
    {
        "content": "<p>We have a tactic for that:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Polynomial</span>\n\n<span class=\"kn\">example</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">compute_degree</span>\n\n<span class=\"kn\">example</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">leadingCoeff</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"o\">:</span><span class=\"n\">Polynomial</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">leadingCoeff</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">compute_degree!</span>\n<span class=\"w\">  </span><span class=\"n\">compute_degree!</span>\n</code></pre></div>",
        "id": 472622084,
        "sender_full_name": "Luigi Massacci",
        "timestamp": 1727245570
    },
    {
        "content": "<p>Technically <code>leadingCoeff</code> is not explicitly in scope, but it seems like it should be</p>",
        "id": 472622352,
        "sender_full_name": "Luigi Massacci",
        "timestamp": 1727245720
    },
    {
        "content": "<p>Let us see what <span class=\"user-mention\" data-user-id=\"321459\">@Damiano Testa</span> thinks of it</p>",
        "id": 472623999,
        "sender_full_name": "Luigi Massacci",
        "timestamp": 1727246558
    },
    {
        "content": "<p>I agree on all counts: <code>leadingCoeff</code> is not in scope for <code>compute_degree</code>.  The related tactic <code>monicity</code> is a simple macro that preprocesses a <code>Monic</code> goal.  Probably there could be an easy win with <code>leadingCoeff</code> goals, but I have not gotten around to it.</p>",
        "id": 472643619,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1727253912
    },
    {
        "content": "<p>I suspect that a more systematic approach would be to have an internal representation of polynomials as lists of coefficients and outsource all such computations on polynomials to analogous computations on lists.</p>",
        "id": 472643727,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1727253954
    },
    {
        "content": "<p>This however has been in the air for many years, but no one has really had the time to go through with it.</p>",
        "id": 472643841,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1727253981
    },
    {
        "content": "<p>There are some promising examples scattered on Zulip, though.</p>",
        "id": 472643885,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1727254007
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"313038\">Moritz Firsching</span> <a href=\"#narrow/stream/113489-new-members/topic/Simple.20polynomial.20computations/near/472618924\">said</a>:</p>\n<blockquote>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Polynomial</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">leadingCoeff</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Polynomial</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">leadingCoeff_C</span><span class=\"w\"> </span><span class=\"mi\">2</span>\n</code></pre></div>\n<p>seems to work</p>\n</blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"466290\">Luigi Massacci</span> <a href=\"#narrow/stream/113489-new-members/topic/Simple.20polynomial.20computations/near/472622084\">said</a>:</p>\n<blockquote>\n<p>We have a tactic for that:</p>\n<p><div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Polynomial</span>\n\n<span class=\"kn\">example</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">compute_degree</span>\n\n<span class=\"kn\">example</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">leadingCoeff</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"o\">:</span><span class=\"n\">Polynomial</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">leadingCoeff</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">compute_degree!</span>\n<span class=\"w\">  </span><span class=\"n\">compute_degree!</span>\n</code></pre></div><br>\n</p>\n</blockquote>\n<p>This works, thanks for the help</p>",
        "id": 472660321,
        "sender_full_name": "Ahmad Alkhalawi",
        "timestamp": 1727259407
    }
]