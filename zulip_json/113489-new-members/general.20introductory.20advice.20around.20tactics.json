[
    {
        "content": "<p>Hello! I am working my way through Analysis I as a way to learn the theorem proving side of Lean and had a couple of general questions. These are not specific to Analysis I -- they're just questions I had (being new to tactics) so I figured I'd put them here.</p>\n<ol>\n<li>If I have a hypotheses ¬A and a goal A, how do I tell Lean this is false? (Encountering this using <code>by_cases</code>.)</li>\n<li>\n<p><del>Is there a nicer way to make a new hypothesis than (for example) constructing <code>x++ = y++</code> via <code>have hxy : x++ = a := hx; symm at hy; rw [hy] at hxy</code> (for <code>hx : x++ = a</code>, <code>hy : y++ a</code>)? Ideally, I'd like to be able to do something like <code>have hxy : x++ = y++ := (rw [(symm hy)] at hx)</code> (fictitious syntax) in a sorta functional manner, but I don't know if this is possible.</del> <br>\n<code>have hxy : x++ = y++ := hx.trans hy.symm</code></p>\n</li>\n<li>\n<p>On a similar tactic, can I get <code>abel</code> or some other simple rewriting tactic to rewrite a goal for me overtly? i.e. I have <code>hx : a + c = b + c + x</code>, and I would like to say like. <code>replace hx := c + a = c + (b + x) by abel</code>.</p>\n</li>\n<li>\n<p><del>Is there a way to see the tactics <code>simp</code> applied to close a goal?</del> <br>\n<code>simp?</code></p>\n</li>\n<li>\n<p>Is <code>apply And.intro</code> or <code>constructor</code> more idiomatic?</p>\n</li>\n<li>\n<p><del>How do I apply a theorem taking arguments to a goal? Specifically, I have <code>⊢ c + a = c + (b + x)</code> as my goal, and I have a theorem <code>add_left_cancel (a b c : Nat) (habc = a + b = a + c) : b = c</code>. I would like to do <code>apply add_left_cancel c a (b + x) &lt;goal&gt;</code>, but this doesn't work.</del><br>\n   forgot about backwards reasoning! normal <code>apply</code> works normally</p>\n</li>\n<li>\n<p>I have a hypothesis <code>h : d ≠ 0</code> and a theorem <code>isPos_iff (n : Nat) : n.IsPos ↔ n ≠ 0</code>. How do I apply <code>isPos_iff</code> to the hypothesis? I think it is that <code>isPos_iff</code> takes an argument that is messing me up. This might be similar to the previous question, but since this is an ↔ I think that I <em>should</em> be able to do it with <code>rewrite</code>.</p>\n</li>\n</ol>\n<p>Thanks for any help!</p>",
        "id": 532159004,
        "sender_full_name": "JJ",
        "timestamp": 1753992469
    },
    {
        "content": "<p>2:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">37</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">51</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">transitivity</span><span class=\"w\"> </span><span class=\"mi\">100</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"k\">show</span><span class=\"w\"> </span><span class=\"mi\">37</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">100</span>\n<span class=\"w\">    </span><span class=\"gr\">sorry</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"k\">show</span><span class=\"w\"> </span><span class=\"mi\">100</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">51</span>\n<span class=\"w\">    </span><span class=\"gr\">sorry</span>\n</code></pre></div>",
        "id": 532159588,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1753992669
    },
    {
        "content": "<p><code>rw [← hy]</code> and <code>rw [hy.symm]</code> are both things you can do</p>",
        "id": 532159809,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1753992748
    },
    {
        "content": "<p>3:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hx</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"k\">show</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">abel_nf</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">hx</span><span class=\"w\"> </span><span class=\"bp\">⊢;</span><span class=\"w\"> </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">hx</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">abel</span>\n</code></pre></div>",
        "id": 532159893,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1753992784
    },
    {
        "content": "<p>4: <code>simp?</code></p>",
        "id": 532159929,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1753992796
    },
    {
        "content": "<p>5:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">refine</span><span class=\"w\"> </span><span class=\"bp\">⟨?_</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">?_⟩</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n</code></pre></div>",
        "id": 532160005,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1753992822
    },
    {
        "content": "<p>You can also <code>have hxy : x++ = y++ := hx.trans hy.symm</code></p>",
        "id": 532160070,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1753992849
    },
    {
        "content": "<p>1:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ha</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hna</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">False</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">absurd</span><span class=\"w\"> </span><span class=\"n\">ha</span><span class=\"w\"> </span><span class=\"n\">hna</span>\n</code></pre></div>",
        "id": 532160143,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1753992874
    },
    {
        "content": "<p>For number 6, what you are doing doesn't seem logically valid</p>",
        "id": 532160229,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1753992904
    },
    {
        "content": "<p>6: what you're asking is not mathematically sound.</p>",
        "id": 532160281,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1753992928
    },
    {
        "content": "<p>but there's <code>rw [add_left_inj]</code> instead</p>",
        "id": 532160314,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1753992943
    },
    {
        "content": "<p>7 : <code>rw [\\l isPos_iff] at h</code></p>",
        "id": 532160392,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1753992973
    },
    {
        "content": "<p>For 6 there's also <code>congr</code></p>",
        "id": 532161425,
        "sender_full_name": "Matthew Jasper",
        "timestamp": 1753993370
    },
    {
        "content": "<p>6: Oh right yes, if I'm applying a theorem to a goal I'm reasoning backwards...</p>",
        "id": 532161971,
        "sender_full_name": "JJ",
        "timestamp": 1753993577
    },
    {
        "content": "<p>Another option for 1:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ha</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hna</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">False</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">hna</span><span class=\"w\"> </span><span class=\"n\">ha</span>\n</code></pre></div>",
        "id": 532166677,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1753995477
    },
    {
        "content": "<p>This works because <code>¬ A</code> is defined to be <code>A → False</code></p>",
        "id": 532166744,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1753995505
    },
    {
        "content": "<p>Okay, working through understanding these. I have run into some <code>rw</code> confusion, though. I have an <code>ih : n + b = 0 → n = 0</code>, an <code>h : n++ + b = 0</code>, and a goal <code>⊢ n++ + b = 0</code> (for <code>(b n : Nat)</code>. I would like to somehow... apply <code>ih</code> to <code>h</code> and obtain <code>n++ = 0</code>. </p>\n<p>But I can't <code>apply</code> <code>ih</code>. I think there's something I don't understand going on there: <code>n : Nat</code> and <code>n++ : Nat</code> so I don't see why I can't apply <code>ih</code>.</p>\n<p>But there's also something <em>else</em> I don't understand going on: I <em>can</em> <code>rw [ih] at h</code> (giving <code>h : 0++ + b = 0</code>) <em>and</em> I can <code>rw [← ih] at h</code> (giving <code>h : n++ + b = n</code>). What is going on here? I thought <code>rewrite</code> only functioned on equalities or biconditionals? And why is it transforming my hypotheses to false statements?</p>",
        "id": 532168116,
        "sender_full_name": "JJ",
        "timestamp": 1753996098
    },
    {
        "content": "<p>Rewrite supports conditional rewrites. It interprets <code>ih</code> as <code>n = 0</code>, and it adds an extra <code>n + b = 0</code> goal.</p>",
        "id": 532168377,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1753996212
    },
    {
        "content": "<p>Hm! Okay, that's a little unexpected. I see the new <code>case hind</code> now though.</p>",
        "id": 532168580,
        "sender_full_name": "JJ",
        "timestamp": 1753996305
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"634325\">JJ</span> <a href=\"#narrow/channel/113489-new-members/topic/general.20introductory.20advice.20around.20tactics/near/532168116\">said</a>:</p>\n<blockquote>\n<p>Okay, working through understanding these. I have run into some <code>rw</code> confusion, though. I have an <code>ih : n + b = 0 → n = 0</code>, an <code>h : n++ + b = 0</code>, and a goal <code>⊢ n++ + b = 0</code> (for <code>(b n : Nat)</code>. I would like to somehow... apply <code>ih</code> to <code>h</code> and obtain <code>n++ = 0</code>. </p>\n</blockquote>\n<p><code>have hnsucc := ih h</code></p>",
        "id": 532169836,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1753996899
    },
    {
        "content": "<p>That doesn't work because <code>ih</code> expects <code>n + b = 0</code>, but <code>h</code> is <code>n++ + b = 0</code>.</p>",
        "id": 532170077,
        "sender_full_name": "JJ",
        "timestamp": 1753997014
    },
    {
        "content": "<p>ok so explain again why you think applying <code>ih</code> to <code>h</code> is something you can do here</p>",
        "id": 532170198,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1753997076
    },
    {
        "content": "<p>Because <code>ih</code> expects something of the form <code>(n : Nat) + (b : Nat) = 0</code> and <code>h</code> is of the form <code>(n++ : Nat) + (b : Nat) = 0</code>.</p>",
        "id": 532170352,
        "sender_full_name": "JJ",
        "timestamp": 1753997137
    },
    {
        "content": "<p>yes they don't match because <code>n++</code> is not the same as <code>n</code></p>",
        "id": 532170458,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1753997194
    },
    {
        "content": "<p>Right. I'm trying to understand why this is.</p>",
        "id": 532170669,
        "sender_full_name": "JJ",
        "timestamp": 1753997274
    },
    {
        "content": "<p>You're trying to understand why <code>n++</code> is not the same as <code>n</code>?</p>",
        "id": 532170869,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1753997336
    },
    {
        "content": "<p>No, I'm trying to understand why <code>ih</code> cannot take in <code>h</code>.</p>",
        "id": 532170951,
        "sender_full_name": "JJ",
        "timestamp": 1753997369
    },
    {
        "content": "<p><code>ih</code> cannot take in <code>h</code> because <code>ih</code> eats a proof of <code>n + b = 0</code> and <code>h</code> is a proof of <code>n++ + b = 0</code> and <code>n + b = 0</code> is not the same as <code>n++ + b = 0</code></p>",
        "id": 532171077,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1753997411
    },
    {
        "content": "<p>Right, but <code>n</code> and <code>b</code> are arbitrary. So I don't get why <code>n++</code> can't be considered <code>n</code> for the purpose of <code>ih</code>.</p>",
        "id": 532171189,
        "sender_full_name": "JJ",
        "timestamp": 1753997453
    },
    {
        "content": "<p>no they're not arbitrary</p>",
        "id": 532171215,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1753997461
    },
    {
        "content": "<p>since you have <code>intro</code>'d them they are fixed now</p>",
        "id": 532171327,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1753997506
    },
    {
        "content": "<p>Hm.</p>",
        "id": 532171378,
        "sender_full_name": "JJ",
        "timestamp": 1753997530
    },
    {
        "content": "<p>if it was arbitrary then <code>ih</code> would look like <code>∀ k l, k + l = 0 → k = 0</code></p>",
        "id": 532171412,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1753997542
    },
    {
        "content": "<p>but no it looks like <code>n + b = 0 → n = 0</code></p>",
        "id": 532171517,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1753997579
    },
    {
        "content": "<p>you have fixed them here</p>",
        "id": 532171527,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1753997584
    },
    {
        "content": "<p>Like my full tactic state is <code>(b n : Nat); (ih : n + b = 0 → n = 0); (h : n++ + b = 0)</code> and I'm trying to derive <code>n++ = 0</code>. I look at this, I think \"hm -- <code>ih</code> tells me that given some arbitrary <code>n</code> and <code>b</code>, if <code>n + b = 0</code> then <code>n = 0</code>.\" I look at this again, I think \"hm -- <code>h</code> tells me that for some <code>n++</code> I have <code>n++ + b = 0</code>\". So then I think I can apply <code>h</code> to <code>ih</code> but I obviously can't and now I'm confused.</p>",
        "id": 532171592,
        "sender_full_name": "JJ",
        "timestamp": 1753997608
    },
    {
        "content": "<p>you are reverting your variables incorrectly</p>",
        "id": 532171696,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1753997647
    },
    {
        "content": "<p>What does that mean?</p>",
        "id": 532171729,
        "sender_full_name": "JJ",
        "timestamp": 1753997660
    },
    {
        "content": "<p>I see this as</p>\n<blockquote>\n<p>I have <code>b</code> and <code>n</code> which are <code>Nat</code><br>\nI have <code>ih</code> which tells me that if I give it a proof of <code>n + b = 0</code> then it will give me a proof of <code>n = 0</code><br>\nI have <code>h</code> which tells me that <code>n++ + b = 0</code><br>\nI need to prove that <code>n++ = 0</code></p>\n</blockquote>",
        "id": 532171948,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1753997745
    },
    {
        "content": "<p>note the lack of arbitrariness here</p>",
        "id": 532171991,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1753997762
    },
    {
        "content": "<p>Mmm, I see.</p>",
        "id": 532172037,
        "sender_full_name": "JJ",
        "timestamp": 1753997783
    },
    {
        "content": "<p>Ah! Right okay cool. I think I just closed it with induction. Which makes sense now, I think I was implicitly failing to consider the n = 0 case?</p>",
        "id": 532172378,
        "sender_full_name": "JJ",
        "timestamp": 1753997919
    },
    {
        "content": "<p>Or rather I guess this was by cases? Hrm. When <code>n = 0</code>, <code>h : 0++ + b = 0</code> is false.</p>",
        "id": 532172811,
        "sender_full_name": "JJ",
        "timestamp": 1753998101
    },
    {
        "content": "<p>When <code>n &gt; 0</code>... grr, I'm not sure what I actually just did. Is there a nice <code>by_cases</code> tactic that I should be using (over induction) for introductory stuff? <code>by_cases</code> itself is annoying, because it only takes in <code>p</code> and has the two cases be <code>p</code> and <code>¬p</code>, and so far I don't actually know how to transform <code>¬a=0</code> into <code>a ≠ 0</code>. (And into <code>a &gt; 0</code>, for that matter.)</p>",
        "id": 532173233,
        "sender_full_name": "JJ",
        "timestamp": 1753998294
    },
    {
        "content": "<p><code>¬a=0</code> is defeq to <code>a ≠ 0</code></p>",
        "id": 532173340,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1753998337
    },
    {
        "content": "<p>that means when you unfold all the definitions you get the same thing</p>",
        "id": 532173424,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1753998369
    },
    {
        "content": "<p>so they're usually interchangeable</p>",
        "id": 532173477,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1753998392
    },
    {
        "content": "<p>making this the same as <code>a &gt; 0</code> is a theorem</p>",
        "id": 532173584,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1753998439
    },
    {
        "content": "<p>Ah, I found an example of what I was having trouble with. Yeah, it was not knowing how to convert <code>¬a = 0</code> to <code>a ≠ 0</code>.</p>",
        "id": 532173986,
        "sender_full_name": "JJ",
        "timestamp": 1753998637
    },
    {
        "content": "<p>So I've got a <code>h : ¬d = 0</code> and an <code>isPos_iff : (n : Nat) : n.isPos ↔ n ≠ 0</code>. I couldn't <code>rewrite [← isPos_iff] at h</code>. But if I put <code>replace h : d ≠ 0 := sorry</code> before, <code>rw [← isPos_iff] at h</code> works fine.</p>",
        "id": 532174050,
        "sender_full_name": "JJ",
        "timestamp": 1753998669
    },
    {
        "content": "<p>It looks now like I can replace that <code>sorry</code> with <code>h</code> itself, but is there a way to avoid <code>replace</code> altogether?</p>",
        "id": 532174174,
        "sender_full_name": "JJ",
        "timestamp": 1753998717
    },
    {
        "content": "<p>rewrite with <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=ne_eq#doc\">docs#ne_eq</a></p>",
        "id": 532175418,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1753999298
    },
    {
        "content": "<p>Did people misread <a href=\"https://github.com/leanprover-community/mathlib4/pull/1\">#1</a> or did JJ miswrite it? It says \"If I have a hypotheses ¬A and a goal A, how do I tell Lean this is false?\"</p>\n<p>If you have a hypothesis <code>¬A</code> and your goal is <code>A</code>, it's likely that something has gone wrong</p>",
        "id": 532182506,
        "sender_full_name": "Matt Diamond",
        "timestamp": 1754002614
    },
    {
        "content": "<p>Ah, sorry. The context is that's within a <code>by_cases</code>.</p>",
        "id": 532182562,
        "sender_full_name": "JJ",
        "timestamp": 1754002638
    },
    {
        "content": "<p>the context doesn't really matter, I'm asking if the goal is <code>A</code> or if the goal is <code>False</code> and you have both <code>A</code> and <code>¬A</code></p>",
        "id": 532182641,
        "sender_full_name": "Matt Diamond",
        "timestamp": 1754002686
    },
    {
        "content": "<p>The goal is <code>A</code>. I basically want to use <code>absurd</code>. Let me see if I can find where I was having trouble doing so.</p>",
        "id": 532182760,
        "sender_full_name": "JJ",
        "timestamp": 1754002740
    },
    {
        "content": "<p>Sorry! I can't find the place I was running into that. I think I rewrote it to not use <code>by_cases</code>.</p>",
        "id": 532188528,
        "sender_full_name": "JJ",
        "timestamp": 1754005577
    },
    {
        "content": "<p>Though speaking of <code>by_cases</code>: I have a lot of <code>revert x; apply induction</code> (this is equivalent to Mathlib induction I think, but is a theorem in the first chapter of this Analysis I text) scattered throughout, including in some places where I only really <em>need</em> <code>by_cases</code>. But in a lot of those <code>induction</code> places <code>simp</code> works where it doesn't in <code>by_cases</code>. Is <code>by_cases</code> the idiomatic cases tactic to use, or is there something better?</p>",
        "id": 532188827,
        "sender_full_name": "JJ",
        "timestamp": 1754005738
    },
    {
        "content": "<p>For doing cases it depends on what I'm casing on</p>",
        "id": 532188918,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1754005788
    },
    {
        "content": "<p>sometimes I use <code>by_cases</code> but if there's a more convenient form I will use <code>obtain</code> with the lemma</p>",
        "id": 532188956,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1754005812
    },
    {
        "content": "<p>like for example <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=eq_or_ne#doc\">docs#eq_or_ne</a>, <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=eq_or_lt_of_le#doc\">docs#eq_or_lt_of_le</a>, <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Set.eq_empty_or_nonempty#doc\">docs#Set.eq_empty_or_nonempty</a></p>",
        "id": 532189010,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1754005847
    },
    {
        "content": "<p>oh yeah, or <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Option.eq_none_or_eq_some#doc\">docs#Option.eq_none_or_eq_some</a> ... doing <code>rcases</code> or <code>obtain</code> with those can be useful if you need more than just a simple <code>P ∨ ¬P</code></p>",
        "id": 532189178,
        "sender_full_name": "Matt Diamond",
        "timestamp": 1754005946
    },
    {
        "content": "<p>or sometimes I will use <code>match</code> if I have a way of solving it for all <code>n &gt; 8</code> for example, and the <code>n ≤ 8</code> is a case bash</p>",
        "id": 532189237,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1754005979
    },
    {
        "content": "<p>Nice thanks! It seems like <code>match</code> is pretty amenable to what I'd been using <code>apply induction</code> for.</p>",
        "id": 532195014,
        "sender_full_name": "JJ",
        "timestamp": 1754008827
    },
    {
        "content": "<p>if you're calling <code>revert</code> before <code>induction</code> you might want to read up on the <code>generalizing</code> option</p>",
        "id": 532195593,
        "sender_full_name": "Matt Diamond",
        "timestamp": 1754009122
    },
    {
        "content": "<p>wow yeah <code>match n with | 0 =&gt; ... | m++ =&gt; ...</code> is <em>really</em> nice</p>",
        "id": 532195662,
        "sender_full_name": "JJ",
        "timestamp": 1754009139
    },
    {
        "content": "<p>I think this'll go away next chapter! This is using an induction theorem on a definition of Nat that is not the standard one</p>",
        "id": 532195779,
        "sender_full_name": "JJ",
        "timestamp": 1754009176
    },
    {
        "content": "<p>Wow... I can just. leave off branches of the <code>match</code> that lead to contradictions. That's very cool</p>",
        "id": 532196628,
        "sender_full_name": "JJ",
        "timestamp": 1754009642
    },
    {
        "content": "<p>wait until you hear about recursively calling the theorem from inside itself</p>",
        "id": 532196962,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1754009824
    },
    {
        "content": "<p>Is there a nice way to clean this proof up? Specifically, I'm wondering </p>\n<ol>\n<li>\n<p><del>when my goal is <code>0 = 0 ∨ m = 0</code> how to tell Lean \"look at the left side\"?</del> <br>\n<code>tauto</code></p>\n</li>\n<li>\n<p><del>if there's a way to combine the two matches into one (just using <code>(n,m)</code> with cases <code>(0,0)</code>, <code>(0,_)</code>, <code>(_,0)</code>, <code>(a++,b++)</code> didn't give me that <code>n</code> or <code>m</code> are zero in the first three cases)</del><br>\n   yes! just <code>n,m</code>. no parentheses around any match pattern.</p>\n</li>\n<li>\n<p>I <code>apply succ_ne at h</code> to get <code>h : False</code> and then follow it by <code>contradiction</code> -- any way to do it shorter?</p>\n</li>\n</ol>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">mul_eq_zero</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">↔</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">∨</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">Iff</span><span class=\"bp\">.</span><span class=\"n\">intro</span>\n<span class=\"w\">  </span><span class=\"bp\">.</span><span class=\"w\"> </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">h</span>\n<span class=\"w\">    </span><span class=\"k\">match</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"k\">with</span>\n<span class=\"w\">    </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">simp?</span><span class=\"w\"> </span><span class=\"c1\">-- goal: ⊢ 0 = 0 ∨ m = 0</span>\n<span class=\"w\">    </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"bp\">++</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">      </span><span class=\"k\">match</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"k\">with</span>\n<span class=\"w\">      </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">simp?</span>\n<span class=\"w\">      </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"bp\">++</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">        </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">succ_mul</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">add_succ</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">h</span>\n<span class=\"w\">        </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">succ_ne</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"c1\">-- after this, h : False</span>\n<span class=\"w\">        </span><span class=\"n\">contradiction</span>\n<span class=\"w\">  </span><span class=\"bp\">.</span><span class=\"w\"> </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">h</span>\n<span class=\"w\">    </span><span class=\"n\">rcases</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"n\">left</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">right</span>\n<span class=\"w\">    </span><span class=\"bp\">.</span><span class=\"w\"> </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">left</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">zero_mul</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"bp\">.</span><span class=\"w\"> </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">right</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">mul_zero</span><span class=\"o\">]</span>\n</code></pre></div>",
        "id": 532210840,
        "sender_full_name": "JJ",
        "timestamp": 1754017308
    },
    {
        "content": "<p>For 2., I think you can do something like</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"k\">match</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"k\">with</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"bp\">++</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"bp\">++</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"bp\">++</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"bp\">++</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n</code></pre></div>",
        "id": 532253085,
        "sender_full_name": "Niels Voss",
        "timestamp": 1754036097
    },
    {
        "content": "<p>Oh! Thanks. For some reason I thought you needed <code>( )</code>. That works nicely.</p>",
        "id": 532253476,
        "sender_full_name": "JJ",
        "timestamp": 1754036222
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">mul_eq_zero</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">↔</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">∨</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">refine</span><span class=\"w\"> </span><span class=\"bp\">⟨?_</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">?_⟩</span>\n<span class=\"w\">  </span><span class=\"bp\">.</span><span class=\"w\"> </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">h</span>\n<span class=\"w\">    </span><span class=\"k\">match</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"k\">with</span>\n<span class=\"w\">    </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">tauto</span>\n<span class=\"w\">    </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"bp\">++</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"bp\">++</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">      </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">succ_mul</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">add_succ</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">h</span>\n<span class=\"w\">      </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">succ_ne</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"c1\">-- after this, h : False</span>\n<span class=\"w\">      </span><span class=\"n\">contradiction</span>\n<span class=\"w\">  </span><span class=\"bp\">.</span><span class=\"w\"> </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">h</span>\n<span class=\"w\">    </span><span class=\"n\">rcases</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"n\">left</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">right</span>\n<span class=\"w\">    </span><span class=\"bp\">.</span><span class=\"w\"> </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">left</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">zero_mul</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"bp\">.</span><span class=\"w\"> </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">right</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">mul_zero</span><span class=\"o\">]</span>\n</code></pre></div>",
        "id": 532253765,
        "sender_full_name": "JJ",
        "timestamp": 1754036321
    },
    {
        "content": "<p>cool :)</p>",
        "id": 532253837,
        "sender_full_name": "JJ",
        "timestamp": 1754036345
    },
    {
        "content": "<p>As for your last question, remember that:</p>\n<ul>\n<li><code>False.elim</code> takes in an element of <code>False</code> and produces anything</li>\n<li><code>exfalso</code> turns the current goal into <code>False</code></li>\n<li><code>apply succ_ne at h</code> basically does <code>replace h := succ_ne h</code></li>\n</ul>\n<p>So technically, you could replace <code>apply succ_ne at h; contradiction</code> with <code>exact (succ_ne h).elim</code>, although it's debatable whether this is actually \"better\"</p>",
        "id": 532254932,
        "sender_full_name": "Niels Voss",
        "timestamp": 1754036696
    },
    {
        "content": "<p>You could also do <code>nomatch succ_ne h</code>. This is because <code>False</code> is an inductive type with no constructor, so when you pattern match on it, you actually don't even have to provide any cases.</p>",
        "id": 532255426,
        "sender_full_name": "Niels Voss",
        "timestamp": 1754036876
    },
    {
        "content": "<blockquote>\n<p>when my goal is <code>0 = 0 ∨ m = 0</code> how to tell Lean \"look at the left side\"?</p>\n</blockquote>\n<p>you listed <code>tauto</code> as the answer (and that will work) but for the more general case of focusing on the left branch of <code>P ∨ Q</code> you can use <code>left</code></p>",
        "id": 532348085,
        "sender_full_name": "Matt Diamond",
        "timestamp": 1754068711
    }
]