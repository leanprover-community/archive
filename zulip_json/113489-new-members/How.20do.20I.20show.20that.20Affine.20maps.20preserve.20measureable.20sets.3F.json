[
    {
        "content": "<p>How should I prove that affine maps send measurable sets to measurable sets? Is this in mathlib, and should it be? I'm specifically interested in functions ℝ × ℝ → ℝ × ℝ .<br>\n<code>measurableEmbedding_addRight</code> reduces this problem to showing that linear maps preserve measurable sets, but I can't find that in mathlib either.</p>",
        "id": 511435070,
        "sender_full_name": "Toby Cathcart Burn",
        "timestamp": 1744297205
    },
    {
        "content": "<p>Maybe <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Continuous.measurable#doc\">docs#Continuous.measurable</a></p>",
        "id": 511435739,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1744297363
    },
    {
        "content": "<p>We have <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=AffineMap.continuous_iff#doc\">docs#AffineMap.continuous_iff</a></p>",
        "id": 511436327,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1744297505
    },
    {
        "content": "<p>Thanks, that looks great.</p>",
        "id": 511436634,
        "sender_full_name": "Toby Cathcart Burn",
        "timestamp": 1744297574
    },
    {
        "content": "<p>Maybe <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=AffineMap.continuous_linear_iff#doc\">docs#AffineMap.continuous_linear_iff</a> would be better</p>",
        "id": 511438721,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1744298121
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Measurable#doc\">docs#Measurable</a> talks about inverse images. Does this mean I need to get hold the inverse map (the cases I care about are invertible)?</p>",
        "id": 511442835,
        "sender_full_name": "Toby Cathcart Burn",
        "timestamp": 1744299088
    },
    {
        "content": "<p>Why would you need the inverse map?</p>",
        "id": 511445553,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1744299748
    },
    {
        "content": "<p>Can you post the statement you want, written out in Lean?</p>",
        "id": 511445620,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1744299767
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">affine_Measurable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"bp\">×</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">→ᵃ</span><span class=\"o\">[</span><span class=\"n\">ℝ</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"bp\">×</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ℝ</span><span class=\"bp\">×</span><span class=\"n\">ℝ</span><span class=\"o\">)}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">MeasurableSet</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">MeasurableSet</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"bp\">''</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">    </span><span class=\"gr\">sorry</span>\n</code></pre></div>",
        "id": 511445734,
        "sender_full_name": "Toby Cathcart Burn",
        "timestamp": 1744299804
    },
    {
        "content": "<p>hmmm</p>",
        "id": 511446530,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1744300016
    },
    {
        "content": "<p>This one is not true. There are measurable subsets of R^2 whose projection on R is not measurable. So taking <code>f (x, y) = (x, 0)</code>, you get a counterexample to your statement. Preimages are much better behaved than direct images in many respects.</p>",
        "id": 511446542,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1744300020
    },
    {
        "content": "<p>I hadn't realized the theorem wasn't true in general, thanks for pointing it out.<br>\nIn this particular case, wouldn't the image of f always have measure 0 (as a subset of R^2)?</p>",
        "id": 511447934,
        "sender_full_name": "Toby Cathcart Burn",
        "timestamp": 1744300328
    },
    {
        "content": "<p>Sure. Here by measurable I mean Borel-measurable, which is the standard meaning in mathlib. It's true that the image is always Lebesgue measurable, but that's a deep theorem.</p>",
        "id": 511449159,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1744300627
    },
    {
        "content": "<p>Thanks for explaining that. I guess I'll show that my affine maps have inverses. How would I find which kind of measure is the default? <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Real.measureSpace#doc\">docs#Real.measureSpace</a> doesn't have the most informative definition.</p>",
        "id": 511451564,
        "sender_full_name": "Toby Cathcart Burn",
        "timestamp": 1744301157
    },
    {
        "content": "<p>I've found <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Real.measurableSpace#doc\">docs#Real.measurableSpace</a>. So <code>MeasurableSet</code> (on R) means Borel measurable, but since <code>volume</code> is defined on all subsets of R, it makes sense to extend it usefully by using the Lebesgue measure.</p>",
        "id": 511453429,
        "sender_full_name": "Toby Cathcart Burn",
        "timestamp": 1744301685
    },
    {
        "content": "<p>In Mathlib measures are always defined for any set as the biggest outer measure which coincides with the measure on measurable sets.</p>",
        "id": 511454002,
        "sender_full_name": "Etienne Marion",
        "timestamp": 1744301875
    }
]