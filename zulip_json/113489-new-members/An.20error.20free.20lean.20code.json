[
    {
        "content": "<p>Can anyone please provide Lean 4 code for a proof that sqrt(10001) is irrational which will run with no error messages in the Lean online editor? Thanks a lot!</p>",
        "id": 563299575,
        "sender_full_name": "Matherian",
        "timestamp": 1765495588
    },
    {
        "content": "<p>This topic was moved here from <a class=\"stream-topic\" data-stream-id=\"270676\" href=\"/#narrow/channel/270676-lean4/topic/An.20error.20free.20lean.20code\">#lean4 &gt; An error free lean code</a> by <span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span>.</p>",
        "id": 563299803,
        "sender_full_name": "Notification Bot",
        "timestamp": 1765495773
    },
    {
        "content": "<p>You can use e.g. <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=irrational_sqrt_intCast_iff_of_nonneg#doc\">docs#irrational_sqrt_intCast_iff_of_nonneg</a> to do this. And it's better to ask questions with Lean code rather than informally -- it's not clear what the type of your numeral is, for example.</p>",
        "id": 563300002,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1765495915
    },
    {
        "content": "<p>Also, please don't double post: there's no need to. I only need to read something once :-)</p>",
        "id": 563300775,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1765496472
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/channel/113489-new-members/topic/An.20error.20free.20lean.20code/near/563300002\">said</a>:</p>\n<blockquote>\n<p>You can use e.g. <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=irrational_sqrt_intCast_iff_of_nonneg#doc\">docs#irrational_sqrt_intCast_iff_of_nonneg</a> to do this. And it's better to ask questions with Lean code rather than informally -- it's not clear what the type of your numeral is, for example.</p>\n</blockquote>\n<p>How to correct: </p>\n<p>'''<br>\nimport Mathlib.Data.Real.Irrational<br>\nimport Mathlib.Tactic</p>\n<p>theorem sqrt_10001_irrational : Irrational (Real.sqrt 10001) := by<br>\n  -- 1. Apply the theorem: sqrt(n) is irrational if n is not a perfect square<br>\n  apply Nat.irrational_sqrt_of_not_isSquare</p>\n<p>-- 2. The goal is now to prove ¬ IsSquare 10001<br>\n  -- We switch the definition of a square to a computable check: (sqrt n)^2 = n<br>\n  rw [Nat.isSquare_iff_sq_sqrt]</p>\n<p>-- 3. Ask Lean to compute the check (100^2 = 10000 ≠ 10001) and close the goal<br>\n  decide<br>\n'''</p>\n<p>Thanks!</p>",
        "id": 563301123,
        "sender_full_name": "Matherian",
        "timestamp": 1765496753
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib/wiki/Code-in-backticks\">#backticks</a>?</p>",
        "id": 563301197,
        "sender_full_name": "Ilmārs Cīrulis",
        "timestamp": 1765496814
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"658873\">Ilmārs Cīrulis</span> <a href=\"#narrow/channel/113489-new-members/topic/An.20error.20free.20lean.20code/near/563301197\">said</a>:</p>\n<blockquote>\n<p><a href=\"https://github.com/leanprover-community/mathlib/wiki/Code-in-backticks\">#backticks</a>?</p>\n</blockquote>\n<p>Do you know to correct the lean code? Thanks.</p>",
        "id": 563302146,
        "sender_full_name": "Matherian",
        "timestamp": 1765497581
    },
    {
        "content": "<p>My try, though I was very lazy and didn't add comments with explanations.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">NumberTheory</span><span class=\"bp\">.</span><span class=\"n\">Real</span><span class=\"bp\">.</span><span class=\"n\">Irrational</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">sqrt_10001_irrational</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Irrational</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Real</span><span class=\"bp\">.</span><span class=\"n\">sqrt</span><span class=\"w\"> </span><span class=\"mi\">10001</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"k\">show</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">10001</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">↑</span><span class=\"o\">(</span><span class=\"mi\">10001</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">norm_cast</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">irrational_sqrt_intCast_iff_of_nonneg</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">norm_num</span><span class=\"o\">)]</span>\n<span class=\"w\">  </span><span class=\"n\">norm_cast</span>\n<span class=\"w\">  </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">h</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">isSquare_iff_exists_sq</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">h</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">aux</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">10001</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">grind</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">sq</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">exists_mul_self</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">aux</span>\n<span class=\"w\">  </span><span class=\"n\">norm_num</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">aux</span>\n</code></pre></div>",
        "id": 563302424,
        "sender_full_name": "Ilmārs Cīrulis",
        "timestamp": 1765497726
    },
    {
        "content": "<p>Yes, I know. :D<br>\nI would suggest not using AI, until your natural brain has learned necessary Lean and Mathlib skills.</p>\n<p>[Edit:] Ask for pointers how to learn all necessary Lean/Mathlib stuff by yourself, and people will help.</p>",
        "id": 563302581,
        "sender_full_name": "Ilmārs Cīrulis",
        "timestamp": 1765497805
    },
    {
        "content": "<p>There is something like this, too: <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/NumberTheory/Real/Irrational.html#instDecidableIrrationalSqrtOfNatReal\">https://leanprover-community.github.io/mathlib4_docs/Mathlib/NumberTheory/Real/Irrational.html#instDecidableIrrationalSqrtOfNatReal</a></p>\n<p>With an example how to use it, but I couldn't get it to work. Maybe this is useful.</p>",
        "id": 563306339,
        "sender_full_name": "Ilmārs Cīrulis",
        "timestamp": 1765499859
    },
    {
        "content": "<p>Today I learned something more.</p>\n<p>This, of course, can be compressed by putting all rewrites under one <code>simp_rw</code>.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Data</span><span class=\"bp\">.</span><span class=\"n\">Real</span><span class=\"bp\">.</span><span class=\"n\">Irrational</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">sqrt_10001_irrational</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Irrational</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Real</span><span class=\"bp\">.</span><span class=\"n\">sqrt</span><span class=\"w\"> </span><span class=\"mi\">10001</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">irrational_sqrt_ofNat_iff</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">isSquare_iff_exists_sq</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">simp_rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">sq</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">eq_comm</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">exists_mul_self</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">norm_num</span>\n</code></pre></div>",
        "id": 563307725,
        "sender_full_name": "Ilmārs Cīrulis",
        "timestamp": 1765500816
    }
]