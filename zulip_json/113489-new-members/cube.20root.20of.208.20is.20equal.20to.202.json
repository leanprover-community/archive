[
    {
        "content": "<p>I'm not sure how to show this simple result, is there a short proof of it?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">c8</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">8</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n</code></pre></div>",
        "id": 535200477,
        "sender_full_name": "Alex Gu",
        "timestamp": 1755636115
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"437569\">@Alex Gu</span> Please remember to put the correct <code>import</code>s for an <a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a>:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">c8</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">8</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">one_div</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Real</span><span class=\"bp\">.</span><span class=\"n\">rpow_inv_eq</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">all_goals</span><span class=\"w\"> </span><span class=\"n\">norm_num</span>\n</code></pre></div>",
        "id": 535200983,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1755636367
    },
    {
        "content": "<p>thanks! and sorry about that :)</p>",
        "id": 535201400,
        "sender_full_name": "Alex Gu",
        "timestamp": 1755636575
    },
    {
        "content": "<p>Here’s how I solved it step by step:</p>\n<ol>\n<li>Type <code>apply?</code>.</li>\n<li>The first suggestion seems to yield easy subgoals:</li>\n</ol>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">Try</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">refine</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Real</span><span class=\"bp\">.</span><span class=\"n\">eq_rpow_inv</span><span class=\"w\"> </span><span class=\"bp\">?_</span><span class=\"w\"> </span><span class=\"bp\">?_</span><span class=\"w\"> </span><span class=\"bp\">?_</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">mp</span><span class=\"w\"> </span><span class=\"bp\">?_</span>\n<span class=\"n\">Remaining</span><span class=\"w\"> </span><span class=\"n\">subgoals</span><span class=\"o\">:</span>\n<span class=\"bp\">⊢</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"mi\">8</span>\n<span class=\"bp\">⊢</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"mi\">2</span>\n<span class=\"bp\">⊢</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"mi\">0</span>\n<span class=\"bp\">⊢</span><span class=\"w\"> </span><span class=\"mi\">8</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">)</span><span class=\"bp\">⁻¹</span>\n</code></pre></div>\n<ol start=\"3\">\n<li>Click the suggested <code>refine</code> line. Now you have <code>refine (Real.eq_rpow_inv ?_ ?_ ?_).mp ?_</code> with four subgoals.</li>\n<li>Since all the subgoals are equalities and inequalities which involve only normalised numerical expressions, <code>norm_num</code> will take care of them. Use <code>norm_num</code> four times and watch each goal get solved.</li>\n<li>Finally, clean up everything:</li>\n</ol>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">c8</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">8</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">refine</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Real</span><span class=\"bp\">.</span><span class=\"n\">eq_rpow_inv</span><span class=\"w\"> </span><span class=\"bp\">?_</span><span class=\"w\"> </span><span class=\"bp\">?_</span><span class=\"w\"> </span><span class=\"bp\">?_</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">mp</span><span class=\"w\"> </span><span class=\"bp\">?_</span><span class=\"w\"> </span><span class=\"bp\">&lt;;&gt;</span><span class=\"w\"> </span><span class=\"n\">norm_num</span>\n</code></pre></div>",
        "id": 535206181,
        "sender_full_name": "Louis Cabarion",
        "timestamp": 1755639135
    },
    {
        "content": "<p>Alternative:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">c8</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">8</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">Real</span><span class=\"bp\">.</span><span class=\"n\">eq_rpow_inv</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">simp</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">simp</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">simp</span><span class=\"o\">))</span><span class=\"bp\">.</span><span class=\"n\">mp</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">norm_num</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 535208905,
        "sender_full_name": "Louis Cabarion",
        "timestamp": 1755640782
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110064\">@Kenny Lau</span> Out of curiosity, could you share a step-by-step account of how you arrived at that proof (assuming you didn’t already know the lemma names by heart)?</p>",
        "id": 535210043,
        "sender_full_name": "Louis Cabarion",
        "timestamp": 1755641439
    },
    {
        "content": "<p>Thanks for the invitation.</p>\n<ol>\n<li>I first tried <code>simp?</code>, and saw that the goal became <code>⊢ 8 ^ 3⁻¹ = 2</code>, so I took the lemma <code>one_div</code> and rewrited using it as the first step.</li>\n<li>Then I see that I want a lemma about something to the power of an inverse, and I know the library spelling for these operations (rpow is special for real power), so I typed <code>rpow_inv</code> and hit Ctrl+Space, which gives me a list of suggestions, and the second one is exactly what I need:</li>\n</ol>\n<p><a href=\"/user_uploads/3121/j66nxcPAc4J6VQTigEreFPju/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/j66nxcPAc4J6VQTigEreFPju/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"1232x172\" src=\"/user_uploads/thumbnail/3121/j66nxcPAc4J6VQTigEreFPju/image.png/840x560.webp\"></a></div><ol start=\"3\">\n<li>Then I see that all the 4 goals generated are within the scope of <code>norm_num</code>, so that's what I did next.</li>\n</ol>",
        "id": 535210391,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1755641679
    },
    {
        "content": "<p>Another way is to realize that if you cube both sides then you can cancel things, then everything's the kind of number that <code>norm_num</code> can handle.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">c8</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">8</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">suffices</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"mi\">8</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">    </span><span class=\"n\">rwa</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Real</span><span class=\"bp\">.</span><span class=\"n\">rpow_left_inj</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"bp\">&lt;;&gt;</span><span class=\"w\"> </span><span class=\"n\">norm_num</span>\n<span class=\"w\">    </span><span class=\"n\">positivity</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">Real</span><span class=\"bp\">.</span><span class=\"n\">rpow_mul</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"bp\">&lt;;&gt;</span><span class=\"w\"> </span><span class=\"n\">norm_num</span>\n</code></pre></div>",
        "id": 535210844,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1755641996
    },
    {
        "content": "<p>I am surprised this isn't a norm_num one-liner. Can we make it happen?</p>",
        "id": 535211387,
        "sender_full_name": "Weiyi Wang",
        "timestamp": 1755642405
    },
    {
        "content": "<p>i think this will complicate things and might require something about computable reals which to my understanding is a bit of a far away goal</p>",
        "id": 535211467,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1755642444
    },
    {
        "content": "<p>Oh right, forgot about noncomputable reals <span aria-label=\"grimacing\" class=\"emoji emoji-1f62c\" role=\"img\" title=\"grimacing\">:grimacing:</span></p>",
        "id": 535211569,
        "sender_full_name": "Weiyi Wang",
        "timestamp": 1755642528
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"873350\">Weiyi Wang</span> <a href=\"#narrow/channel/113489-new-members/topic/cube.20root.20of.208.20is.20equal.20to.202/near/535211387\">said</a>:</p>\n<blockquote>\n<p>I am surprised this isn't a norm_num one-liner. Can we make it happen?</p>\n</blockquote>\n<p>yes</p>",
        "id": 535211608,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1755642567
    },
    {
        "content": "<p>you don't need any computable reals either</p>",
        "id": 535211621,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1755642581
    },
    {
        "content": "<p>but it'll only work when doing a rational power of a rational number where the answer is rational</p>",
        "id": 535211671,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1755642619
    },
    {
        "content": "<p>(where everything is positive)</p>",
        "id": 535211704,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1755642649
    },
    {
        "content": "<p>I guess we could support negative powers too</p>",
        "id": 535211741,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1755642667
    },
    {
        "content": "<p>(edit: where the base is positive)</p>",
        "id": 535211782,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1755642690
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"873350\">@Weiyi Wang</span> The design of <code>norm_num</code> is to be able to normalize numeric expressions, and it chooses to only do it for families of expressions that it can always normalize. That limits it to mostly numeric expressions involving integers and rationals, and not powers with a non-integer exponent. (Here, \"natural\", \"integer\", etc. refer to the numbers inside a given number system, like Real. It doesn't have to be Nat, Int, Rat, etc.)</p>\n<p>I'd suggested adding some root normalization once and Mario pushed back. I might have forgotten the context by now though.</p>",
        "id": 535211784,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1755642692
    },
    {
        "content": "<p>negative bases too</p>",
        "id": 535211791,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1755642701
    },
    {
        "content": "<p>mathlib doesn't have that refactor yet</p>",
        "id": 535211808,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1755642716
    },
    {
        "content": "<p>I do support a refactor to make (-8)^(1/3) = -2, at the cost of the purists</p>",
        "id": 535211853,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1755642747
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"437569\">@Alex Gu</span> A shorter proof:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">c8</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">8</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">Real</span><span class=\"bp\">.</span><span class=\"n\">eq_rpow_inv</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"bp\">&lt;;&gt;</span><span class=\"w\"> </span><span class=\"n\">norm_num</span>\n</code></pre></div>",
        "id": 535211862,
        "sender_full_name": "Louis Cabarion",
        "timestamp": 1755642757
    },
    {
        "content": "<p>Niven's theorem guarantees that when everything is rational there are only like 2 extra cases for negative base</p>",
        "id": 535211865,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1755642762
    },
    {
        "content": "<p>You can make a simproc, it doesn't have to be <code>norm_num</code>.</p>",
        "id": 535211867,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1755642765
    },
    {
        "content": "<p>this feels like it's in-scope for <code>norm_num</code></p>",
        "id": 535211886,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1755642781
    },
    {
        "content": "<p>it could also be a simproc</p>",
        "id": 535211913,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1755642798
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110064\">Kenny Lau</span> <a href=\"#narrow/channel/113489-new-members/topic/cube.20root.20of.208.20is.20equal.20to.202/near/535211853\">said</a>:</p>\n<blockquote>\n<p>I do support a refactor to make (-8)^(1/3) = -2, at the cost of the purists</p>\n</blockquote>\n<p>how will you make it continuous</p>",
        "id": 535211922,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1755642809
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> <a href=\"#narrow/channel/113489-new-members/topic/cube.20root.20of.208.20is.20equal.20to.202/near/535211922\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"110064\">Kenny Lau</span> <a href=\"#narrow/channel/113489-new-members/topic/cube.20root.20of.208.20is.20equal.20to.202/near/535211853\">said</a>:</p>\n<blockquote>\n<p>I do support a refactor to make (-8)^(1/3) = -2, at the cost of the purists</p>\n</blockquote>\n<p>how will you make it continuous</p>\n</blockquote>\n<p>I claim that nobody cares about the function (-8)^x</p>",
        "id": 535211950,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1755642830
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110064\">Kenny Lau</span> <a href=\"#narrow/channel/113489-new-members/topic/cube.20root.20of.208.20is.20equal.20to.202/near/535211808\">said</a>:</p>\n<blockquote>\n<p>mathlib doesn't have that refactor yet</p>\n</blockquote>\n<p>you don't need a refactor to evaluate <code>(-8)^(1/3) = 1</code></p>",
        "id": 535211972,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1755642853
    },
    {
        "content": "<p>?</p>",
        "id": 535211990,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1755642875
    },
    {
        "content": "<p>I think it's true</p>",
        "id": 535211996,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1755642882
    },
    {
        "content": "<p>I found <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Mathlib.Meta.NormNum.evalRPow#doc\">docs#Mathlib.Meta.NormNum.evalRPow</a> but right now it only does <code>Int</code> exponents</p>",
        "id": 535212101,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1755642972
    },
    {
        "content": "<p>Here is the step by step procedure:</p>\n<ol>\n<li>Type <code>rw??</code>.</li>\n<li>Shift-click \"8 ^ (1 / 3) = 2\" in the InfoView.</li>\n<li>Note the rewrite suggestion:</li>\n</ol>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"mi\">8</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">)</span><span class=\"bp\">⁻¹</span>\n<span class=\"bp\">⊢</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"mi\">8</span>\n<span class=\"bp\">⊢</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"mi\">2</span>\n<span class=\"bp\">⊢</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"mi\">0</span>\n</code></pre></div>\n<ol start=\"4\">\n<li>Click on that suggestion and get <code>rw [← Real.eq_rpow_inv ?_ ?_ ?_]</code>.</li>\n<li>Note that we now have four goals easily solved by <code>norm_num</code>.</li>\n<li>Tidy up:</li>\n</ol>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">c8</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">8</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">Real</span><span class=\"bp\">.</span><span class=\"n\">eq_rpow_inv</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"bp\">&lt;;&gt;</span><span class=\"w\"> </span><span class=\"n\">norm_num</span>\n</code></pre></div>",
        "id": 535212141,
        "sender_full_name": "Louis Cabarion",
        "timestamp": 1755643009
    },
    {
        "content": "<p><code>(-8)^(1/3) = exp (y log x) cos (π y) = exp (log (-8) / 3) cos (π/3) =  exp ((log(8) + i π)/3) cos (π/3)</code> and wolfram alpha says its real part is 1/2 <span class=\"user-mention\" data-user-id=\"816344\">@Aaron Liu</span></p>",
        "id": 535212184,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1755643046
    },
    {
        "content": "<p>and this is too deep in the junk value territory for me to care</p>",
        "id": 535212192,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1755643056
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110064\">Kenny Lau</span> <a href=\"#narrow/stream/113489-new-members/topic/cube.20root.20of.208.20is.20equal.20to.202/near/535212184\">said</a>:</p>\n<blockquote>\n<p><code>(-8)^(1/3) = exp (y log x) cos (π y) = exp (log (-8) / 3) cos (π/3) =  exp ((log(8) + i π)/3) cos (π/3)</code> and wolfram alpha says its real part is 1/2 <span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span></p>\n</blockquote>\n<p>Must have been off by one somewhere</p>",
        "id": 535212274,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1755643109
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/26935\">#26935</a> might be of interest WRT the <code>cbrt (-8)</code> question</p>",
        "id": 535220051,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1755649888
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110064\">@Kenny Lau</span>, <code>(-8)^(1/3) = 1</code> I think</p>",
        "id": 535220073,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1755649908
    },
    {
        "content": "<p>so I wasn't off by one after all</p>",
        "id": 535221150,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1755650784
    },
    {
        "content": "<p><a href=\"/user_uploads/3121/tJq8sFYT4SNErh_AKIMOAy3-/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/tJq8sFYT4SNErh_AKIMOAy3-/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"871x152\" src=\"/user_uploads/thumbnail/3121/tJq8sFYT4SNErh_AKIMOAy3-/image.png/840x560.webp\"></a></div>",
        "id": 535221356,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1755650962
    },
    {
        "content": "<p>I see that I have misinterpreted this docstring</p>",
        "id": 535221365,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1755650968
    },
    {
        "content": "<p>I think for clarity the docstring should</p>\n<div class=\"spoiler-block\"><div class=\"spoiler-header\">\n<p>spoiler</p>\n</div><div class=\"spoiler-content\" aria-hidden=\"true\">\n<p>change <code>log x</code> to <code>log |x|</code></p>\n</div></div>",
        "id": 535221398,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1755651003
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110064\">Kenny Lau</span> <a href=\"#narrow/channel/113489-new-members/topic/cube.20root.20of.208.20is.20equal.20to.202/near/535221398\">said</a>:</p>\n<blockquote>\n<p>I think for clarity the docstring should</p>\n<div class=\"spoiler-block\"><div class=\"spoiler-header\">\n<p>spoiler</p>\n</div><div class=\"spoiler-content\" aria-hidden=\"true\">\n<p>change <code>log x</code> to <code>log |x|</code></p>\n<p></div></div><br>\n</p>\n</blockquote>\n<p>Did you read the docstring of <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Real.log#doc\">docs#Real.log</a></p>",
        "id": 535222717,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1755652172
    },
    {
        "content": "<p>yes</p>",
        "id": 535222734,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1755652191
    }
]