[
    {
        "content": "<p>I am working in a context where I frequently need to get an element corresponding to some list index. If I write something like <code>l[i]</code>, then Lean (usually) complains and asks for a proof that the index I am trying to access is valid. </p>\n<p>I don't want to have to write a proof every time I try to access an index, so I was wondering what the idiomatic workaround is. I tried <code>l[i]!</code>; my understanding is that this forces Lean to accept the index but will cause an error if I ever try to run the code (?). </p>\n<p>However, this led to errors later on in the proof: somehow I got both <code>l[i]</code> and <code>l[i]!]</code> in the same expression (with Lean now somehow being able to infer that <code>l[i]</code> is a valid index using the get_elem_tactic, even though it couldn't infer this before), and I don't know how to get Lean to accept them as the same thing (since they are not syntactically equal). </p>\n<p>What is considered the best way to handle this?</p>\n<p>Thanks!</p>",
        "id": 531424191,
        "sender_full_name": "Robert Shlyakhtenko",
        "timestamp": 1753724447
    },
    {
        "content": "<p>The workaround is to prove your index is valid and then <code>have</code> the proof so it's in your context and <code>get_elem_tactic</code> can just use that</p>",
        "id": 531432072,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1753727118
    },
    {
        "content": "<p>can you provide a <a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a>?</p>",
        "id": 531432082,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1753727124
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> <a href=\"#narrow/channel/113489-new-members/topic/getElem.20for.20Lists/near/531432072\">said</a>:</p>\n<blockquote>\n<p>The workaround is to prove your index is valid and then <code>have</code> the proof so it's in your context and <code>get_elem_tactic</code> can just use that</p>\n</blockquote>\n<p>Thank you, that's a good tip! I didn't consider that it would be enough to just have the proof in the context.<br>\nI suppose I would still need to write in the proof explicitly at least once, though, to state the lemma.</p>\n<p>In this case, maybe it's not so bad and I should just prove validity of all the indices instead of being lazy :)</p>",
        "id": 531432839,
        "sender_full_name": "Robert Shlyakhtenko",
        "timestamp": 1753727362
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"932451\">Robert Shlyakhtenko</span> <a href=\"#narrow/channel/113489-new-members/topic/getElem.20for.20Lists/near/531424191\">said</a>:</p>\n<blockquote>\n<p>I don't know how to get Lean to accept them as the same thing (since they are not syntactically equal).</p>\n</blockquote>\n<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/Init/GetElem.html#getElem!_pos\">docs#getElem!_pos</a></p>",
        "id": 531469706,
        "sender_full_name": "Vlad",
        "timestamp": 1753739889
    }
]