[
    {
        "content": "<p>hi, I'm implementing SHA-256 is lean and I've run into problem with this function: <a href=\"https://github.com/happyfellow-one/lush/blob/master/lush/Crypto/SHA.lean#L99\">https://github.com/happyfellow-one/lush/blob/master/lush/Crypto/SHA.lean#L99</a></p>\n<p>I'm getting <code>(deterministic) timeout at `whnf`, maximum number of heartbeats (200000) has been reached</code> and I can't find the source of the error. I've tried replacing the proofs that indexes are valid with <code>(by sorry)</code> but it didn't help.</p>\n<p>Could you help me with debugging this? Thanks!</p>",
        "id": 562913146,
        "sender_full_name": "One Happy Fellow",
        "timestamp": 1765360146
    },
    {
        "content": "<p>Can you make an <a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a>?</p>",
        "id": 562915997,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1765360970
    },
    {
        "content": "<p>This file is self contained if that's what you meant? If you mean that the example is too large I'll try making a smaller one.</p>",
        "id": 562918030,
        "sender_full_name": "One Happy Fellow",
        "timestamp": 1765361642
    },
    {
        "content": "<p>Adding <code>'(by simp[hworkinglen])</code> to every array access operation and replacing trivial with <code>simp[working]</code> suffices in the web editor</p>",
        "id": 562918184,
        "sender_full_name": "Johannes Tantow",
        "timestamp": 1765361691
    },
    {
        "content": "<p>Thank you! Do you have an idea why I get a timeout otherwise? Or if there's a way to avoid annotating all array accesses with the simp proofs?</p>",
        "id": 562920577,
        "sender_full_name": "One Happy Fellow",
        "timestamp": 1765362461
    },
    {
        "content": "<p>Likely because the default tactic for doing Array access proofs gets lost due to the size of the Array literals</p>",
        "id": 562924668,
        "sender_full_name": "Henrik BÃ¶ving",
        "timestamp": 1765363720
    },
    {
        "content": "<p>I managed to solve it by wrapping <code>working[i]</code> in a function which constructed the proof term for array access, thanks all for help! I still have zero intuition about why lean struggled so much in this case though :(</p>",
        "id": 562963167,
        "sender_full_name": "One Happy Fellow",
        "timestamp": 1765375534
    }
]