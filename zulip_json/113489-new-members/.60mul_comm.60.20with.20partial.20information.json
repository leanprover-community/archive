[
    {
        "content": "<p>In Mathematics in Lean Section 2.1, it says </p>\n<blockquote>\n<p>You can also provide <em>partial</em> information. For example, <code>mul_comm a</code> matches any pattern of the form <code>a * ?</code> and rewrites it to <code>? * a</code>.</p>\n</blockquote>\n<p>Then, if I do <code>rw [mul_comm a]</code> for the following<code>\nexample (a b c : ℝ) : a * b *  c = a * c * b := by\n</code>, I am supposed to re-write the goal into <code>b * a * c = c * a * b</code> but why is it only <code>a * b</code> on the LHS gets swapped but not the <code>a * c</code> on the RHS?</p>",
        "id": 485545173,
        "sender_full_name": "KEW",
        "timestamp": 1733114827
    },
    {
        "content": "<p>Because when Lean looks to rewrite <code>rw [mul_comm a ?_]</code> it looks for the <em>first</em> occurrence of a match (in this case <code>a * b</code>) and then rewrites all occurrences of that match. It will not rewrite other possible matches. Your options are to do <code>rw [mul_comm a, mul_comm a]</code> or <code>simp only [mul_comm a]</code>, or <code>repeat rw [mul_comm a]</code> (the syntax on this last one may be wrong, I can't remember).</p>",
        "id": 485555539,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1733122232
    },
    {
        "content": "<p>This behavior is fundamentally a part of the way <code>rw</code> works. It's essentially just doing an invocation of <code>Eq.subst</code> (although it's a bit smart about computing the motive). And replacing <code>a * b</code> with <code>b * a</code> and <em>also</em> replacing <code>a * c</code> with <code>c * a</code> is actually two different invocations.</p>",
        "id": 485555754,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1733122360
    }
]