[
    {
        "content": "<p>Hi, I am facing some problems when working with divisibility with integers. I want to show the following Lemma.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Data</span><span class=\"bp\">.</span><span class=\"n\">Real</span><span class=\"bp\">.</span><span class=\"n\">Basic</span>\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">d</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span>\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">)</span>\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">d</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"bp\">.</span><span class=\"n\">natAbs</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">d</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"bp\">.</span><span class=\"n\">natAbs</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">d</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">y</span><span class=\"bp\">-</span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">natAbs</span>\n</code></pre></div>\n<p>I could try to make a disjunction depending on the sign of x and y, but it doesn’t seem elegant. </p>\n<p>I have tried to convert it to a form of Int.dvd, but have been unsuccesful since I do not know how to cast d to an integer.</p>\n<p>Do you recommend finding a solution that avoids casting? Or do you have reference for casting that would work in this setting?</p>",
        "id": 461035694,
        "sender_full_name": "Thomas Lehéricy",
        "timestamp": 1723487027
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"337939\">Thomas Lehéricy</span> has marked this topic as unresolved.</p>",
        "id": 461035715,
        "sender_full_name": "Notification Bot",
        "timestamp": 1723487034
    },
    {
        "content": "<p>One problem, <code>|</code> is not the same as <code>∣</code>. You get the right symbol with <code>\\dvd</code>. Sorry, afk now.</p>",
        "id": 461927117,
        "sender_full_name": "Ralf Stephan",
        "timestamp": 1723487369
    },
    {
        "content": "<p><code>\\dvd</code> doesn't work in the web editor, <code>\\|</code> does work however</p>",
        "id": 461927737,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1723487491
    },
    {
        "content": "<p>I am using <code>\\|</code> in this code. I have also been using the syntax <code>d \\| x.natAbs</code> elsewhere in my code, without issue. My problem is rather on how to handle integers — Lean4 refuses to accept <code>x \\| y</code> when (x y : ℤ).</p>",
        "id": 461929396,
        "sender_full_name": "Thomas Lehéricy",
        "timestamp": 1723488058
    },
    {
        "content": "<p>I'm sure it doesn't. Show a <a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a> for that?</p>",
        "id": 461933871,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1723489479
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"307953\">Ruben Van de Velde</span> <a href=\"#narrow/stream/113489-new-members/topic/Casting.20elements.20v2/near/461933871\">said</a>:</p>\n<blockquote>\n<p>I'm sure it doesn't. Show a <a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a> for that?</p>\n</blockquote>\n<p>My bad, Lean4 accepts it indeed. The initial question remains though.</p>",
        "id": 461937067,
        "sender_full_name": "Thomas Lehéricy",
        "timestamp": 1723490132
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"644391\">@loogle</span> _ ∣ Int.natAbs _</p>",
        "id": 461956562,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1723496225
    },
    {
        "content": "<p><span aria-label=\"search\" class=\"emoji emoji-1f50d\" role=\"img\" title=\"search\">:search:</span> <a href=\"https://leanprover-community.github.io/mathlib4_docs/Init/Data/Int/DivModLemmas.html#Int.natAbs_dvd_natAbs\">Int.natAbs_dvd_natAbs</a>, <a href=\"https://leanprover-community.github.io/mathlib4_docs/Init/Data/Int/DivModLemmas.html#Int.ofNat_dvd_left\">Int.ofNat_dvd_left</a>, and <a href=\"https://loogle.lean-lang.org/?q=_%20%E2%88%A3%20Int.natAbs%20_\">6 more</a></p>",
        "id": 461956566,
        "sender_full_name": "loogle",
        "timestamp": 1723496226
    },
    {
        "content": "<p>A lemma so useful that we have it with three different names!</p>",
        "id": 461956579,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1723496236
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">d</span><span class=\"w\"> </span><span class=\"bp\">∣</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"bp\">.</span><span class=\"n\">natAbs</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">d</span><span class=\"w\"> </span><span class=\"bp\">∣</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"bp\">.</span><span class=\"n\">natAbs</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">d</span><span class=\"w\"> </span><span class=\"bp\">∣</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">y</span><span class=\"bp\">-</span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">natAbs</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">simp_rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">Int</span><span class=\"bp\">.</span><span class=\"n\">natCast_dvd</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">exact?</span>\n</code></pre></div>",
        "id": 461956720,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1723496311
    },
    {
        "content": "<p>Exactly what I needed, thank you!</p>",
        "id": 461976485,
        "sender_full_name": "Thomas Lehéricy",
        "timestamp": 1723505838
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"337939\">Thomas Lehéricy</span> has marked this topic as resolved.</p>",
        "id": 461976501,
        "sender_full_name": "Notification Bot",
        "timestamp": 1723505843
    }
]