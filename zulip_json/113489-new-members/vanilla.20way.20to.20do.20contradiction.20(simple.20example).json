[
    {
        "content": "<p>After completing MoP's chapter 4 which concludes with contradiction ... I'm trying to create vanilla Lean examples that don't use. the MoP special tactics.</p>\n<p>Here is a simple example  - note the final 2 lines:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">hn</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">    </span><span class=\"k\">calc</span>\n<span class=\"w\">      </span><span class=\"mi\">5</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">h</span><span class=\"o\">]</span>\n<span class=\"w\">      </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">hn</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"c1\">-- contradiction --&lt;-- also works to my surprise</span>\n<span class=\"w\">  </span><span class=\"n\">linarith</span>\n</code></pre></div>\n<p>The goal state just after <code>calc</code> is</p>\n<div class=\"codehilite\" data-code-language=\"Text only\"><pre><span></span><code>n : ℕ\nh : n = 5\nhn : n = 1\ng : 5 = 1\n⊢ False\n</code></pre></div>\n<p>So in MoP we learned that:</p>\n<ul>\n<li>tactic <code>numbers at hip</code> can be used to complete a proof by contradiction by pointing it at a numerically false hypothesis.</li>\n<li>tactic <code>contradiction</code> which can conclude a proof by contradiction if it sees a hypothesis of the form <code>h1: P</code> and another <code>h2: ¬P</code></li>\n</ul>\n<p>In vanilla Lean we don't have <code>numbers</code>. I tried <code>linarith</code> as in the above example, and it seems to work.</p>\n<p>I also tried <code>contradiction</code> and that worked to my surprise because here it identifies a numerically false hypothesis but in MoP it only looks for lexically opposing hypotheses.</p>\n<p><strong>Question 1:</strong> What is the correct way to do contradiction, at least for the above example?</p>\n<p><strong>Question 2:</strong> I'd welcome commentary, history, about whether linearity works but shouldn't be used like this, and whether lean's own contradiction tactic only recently did numerically false hypotheses (motivating the need for MoP to have its own).</p>",
        "id": 486716186,
        "sender_full_name": "rzeta0",
        "timestamp": 1733615858
    },
    {
        "content": "<hr>\n<p>further experimenting shows even the following works:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">hn</span>\n<span class=\"w\">  </span><span class=\"n\">linarith</span>\n</code></pre></div>\n<p>Again, I'm surprised.</p>",
        "id": 486723566,
        "sender_full_name": "rzeta0",
        "timestamp": 1733622837
    },
    {
        "content": "<p><code>linarith</code> handles equalities as well as inequalities</p>",
        "id": 486723710,
        "sender_full_name": "Matt Diamond",
        "timestamp": 1733622958
    },
    {
        "content": "<p>Thanks Matt.</p>\n<p>Back to my original question, I'm trying to get a sense of when one should use <code>contradiction</code> over <code>linarith</code> when both appear to work.</p>",
        "id": 486723909,
        "sender_full_name": "rzeta0",
        "timestamp": 1733623153
    },
    {
        "content": "<p>It makes sense that <code>contradiction</code> works here, because <code>5 = 1</code> is the sort of contradiction it can handle. The reasoning is that <code>5 = 1</code> is the same as <code>Nat.succ 4 = Nat.succ 0</code>, which reduces to <code>4 = 0</code>, and this is the same as <code>Nat.succ 3 = Nat.zero</code>, but <code>Nat.succ</code> of something can't ever be <code>Nat.succ</code>. The keywords are \"injectivity of constructors for inductive types.\"</p>\n<p>There's a whole list of things that <code>contradiction</code> tries.</p>",
        "id": 486724573,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1733623782
    },
    {
        "content": "<p>The docstrings to both <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Lean.MVarId.contradiction#doc\">docs#Lean.MVarId.contradiction</a> and <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Lean.Parser.Tactic.contradiction#doc\">docs#Lean.Parser.Tactic.contradiction</a> give a list of the things that the tactic considers.</p>",
        "id": 486724656,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1733623855
    }
]