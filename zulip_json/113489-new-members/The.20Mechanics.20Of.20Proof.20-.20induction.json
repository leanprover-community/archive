[
    {
        "content": "<p>Paragraph 6 - induction. How can I make those proofs better?</p>\n<div class=\"spoiler-block\"><div class=\"spoiler-header\">\n<p>2 proofs</p>\n</div><div class=\"spoiler-content\" aria-hidden=\"true\">\n<div class=\"codehilite\"><pre><span></span><code>import Mathlib\nimport Lean\n\nexample (n : ℕ) : Even n ∨ Odd n := by\n  induction n\n  case zero =&gt; left ; use 0\n  case succ k ih =&gt;\n    rcases ih with ⟨w, hw⟩ | ⟨w, hw⟩\n    · right ; use w ; linarith\n    · left ; use w + 1 ; linarith\n\n\nexample {a b d : ℤ} (h : a ≡ b [ZMOD d]) (n : ℕ) : a ^ n ≡ b ^ n [ZMOD d] := by\n  induction n with\n  | zero =&gt; rw [pow_zero a, pow_zero b]\n  | succ k ih =&gt;\n    rw [pow_succ, pow_succ]\n    have h1 : a^k * a ≡ a^k * b [ZMOD d] := Int.ModEq.mul_left (a^k) h\n    have h2 : a^k * b ≡ b^k * b [ZMOD d] := Int.ModEq.mul_right b ih\n    exact h1.trans h2\n</code></pre></div>\n</div></div>",
        "id": 483878469,
        "sender_full_name": "Michael Bucko",
        "timestamp": 1732270601
    },
    {
        "content": "<p>These theorems can be found in the Mathlib. But I assume you already know that. <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span> <br>\nThe second looks good, the first I would write differently but your way is good too.</p>\n<p>(I'm beginner too, just in case.)</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Even</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">∨</span><span class=\"w\"> </span><span class=\"n\">Odd</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">even_or_odd</span><span class=\"w\"> </span><span class=\"n\">n</span>\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"n\">d</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">≡</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">ZMOD</span><span class=\"w\"> </span><span class=\"n\">d</span><span class=\"o\">])</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">≡</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">ZMOD</span><span class=\"w\"> </span><span class=\"n\">d</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Int</span><span class=\"bp\">.</span><span class=\"n\">ModEq</span><span class=\"bp\">.</span><span class=\"n\">pow</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">h</span>\n</code></pre></div>",
        "id": 483896699,
        "sender_full_name": "Ilmārs Cīrulis",
        "timestamp": 1732277221
    },
    {
        "content": "<p>Even if a proof from <em>The Mechanics</em> had already been done, it's okay. For me, it's more about learning by doing.</p>\n<p>And since my proofs are still often quite ugly in Lean, many help me make them better.</p>",
        "id": 483897732,
        "sender_full_name": "Michael Bucko",
        "timestamp": 1732277637
    },
    {
        "content": "<p>Still, your point is a good one <span aria-label=\"thank you\" class=\"emoji emoji-1f64f\" role=\"img\" title=\"thank you\">:thank_you:</span> . Eventually, I'll try to reuse as much as possible from what had already been done.</p>",
        "id": 483898135,
        "sender_full_name": "Michael Bucko",
        "timestamp": 1732277788
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Even</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">∨</span><span class=\"w\"> </span><span class=\"n\">Odd</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">induction</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"k\">with</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">zero</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">simp</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">succ</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">ih</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">    </span><span class=\"k\">obtain</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">w</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">hw</span><span class=\"bp\">⟩</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">w</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">hw</span><span class=\"bp\">⟩</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">ih</span><span class=\"w\"> </span><span class=\"bp\">&lt;;&gt;</span><span class=\"w\"> </span><span class=\"n\">subst</span><span class=\"w\"> </span><span class=\"n\">n</span>\n<span class=\"w\">    </span><span class=\"bp\">.</span><span class=\"w\"> </span><span class=\"n\">simp</span>\n<span class=\"w\">    </span><span class=\"bp\">.</span><span class=\"w\"> </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">H</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">w</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">w</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">ring</span>\n<span class=\"w\">      </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">H</span><span class=\"o\">]</span>\n<span class=\"w\">      </span><span class=\"n\">simp</span>\n</code></pre></div>\n<p>That's how I did it, but I used the fact that <code>simp</code> is quite powerful with all the Mathlib imported.</p>\n<p>(Is it possible to merge lines <code>have H: 2 * w + 1 + 1 = 2 * (w + 1)</code> and <code>rw [H]</code> into one somehow?)</p>",
        "id": 483898278,
        "sender_full_name": "Ilmārs Cīrulis",
        "timestamp": 1732277846
    },
    {
        "content": "<p>(Smth like this - <code>change 2 * w + 1  + 1 into 2 * ( w + 1) by ring</code>. Something like this could be done in Coq, but I don't know about Lean...)</p>",
        "id": 483898981,
        "sender_full_name": "Ilmārs Cīrulis",
        "timestamp": 1732278069
    },
    {
        "content": "<p>I need to experiment more with <code>simp</code>.</p>",
        "id": 483899452,
        "sender_full_name": "Michael Bucko",
        "timestamp": 1732278227
    },
    {
        "content": "<p>I think aiming to prove these lemmas in one go is counterproductive. It's often useful to prove other helpful side lemmas. I don't think Mechanics of Proof is against that</p>",
        "id": 483900143,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1732278447
    },
    {
        "content": "<p>So in your Even n or Odd n, a more powerful statement is Even n =&gt; Odd (n + 1), then upgraded to an iff; and Even n =&gt; not Even (n + 1), then upgraded to an iff. Then linking Even n =&gt; not Odd n, then upgrading to an iff. Then using that with <code>(em _).imp_right</code>, which is shorthand for splitting on the cases using <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Or.imp_right#doc\">docs#Or.imp_right</a></p>",
        "id": 483900793,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1732278665
    }
]