[
    {
        "content": "<p>I noticed a broken documentation link in Mathlib.Data.List.BigOperators.Basic in both mathlib 3 and 4. I would like to use the occasion to learn how to contribute. Should I make a single PR to mathlib4 or do I need to make one for mathlib3 as well?</p>",
        "id": 392791961,
        "sender_full_name": "Malvin Gattinger",
        "timestamp": 1695540471
    },
    {
        "content": "<p>There is no need to make one for mathlib3 unless you really want to</p>",
        "id": 392798812,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1695544010
    },
    {
        "content": "<p>Mathlib 3 is effectively frozen</p>",
        "id": 392798841,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1695544034
    },
    {
        "content": "<p>ok, thanks :)</p>",
        "id": 392802612,
        "sender_full_name": "Malvin Gattinger",
        "timestamp": 1695545407
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"422703\">Malvin Gattinger</span> has marked this topic as resolved.</p>",
        "id": 392802779,
        "sender_full_name": "Notification Bot",
        "timestamp": 1695545477
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"422703\">@Malvin Gattinger</span> do you already have push access to non-master branches of mathlib4? If not, that will be required for the PR process.</p>",
        "id": 392809886,
        "sender_full_name": "Anatole Dedecker",
        "timestamp": 1695549118
    },
    {
        "content": "<p>Oh. I don't know and therefore probably don't have it ;) I realise now I should have read <a href=\"https://leanprover-community.github.io/contribute/index.html\">https://leanprover-community.github.io/contribute/index.html</a> before creating <a href=\"https://github.com/leanprover-community/mathlib4/pull/7350\">https://github.com/leanprover-community/mathlib4/pull/7350</a></p>",
        "id": 392810116,
        "sender_full_name": "Malvin Gattinger",
        "timestamp": 1695549219
    },
    {
        "content": "<p>I just sent you an invitation (sorry for the delay). Indeed you have to open the PR again from a mathlib branch so that CI can run.</p>",
        "id": 392847028,
        "sender_full_name": "Anatole Dedecker",
        "timestamp": 1695571358
    },
    {
        "content": "<p>Does it really matter if CI runs given that this is a docs-only PR?</p>",
        "id": 392847195,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1695571431
    },
    {
        "content": "<p>I think \"CI\" in my sentence above includes bors, so unless we bypass it completely it's probably better to open a PR from a branch</p>",
        "id": 392847529,
        "sender_full_name": "Anatole Dedecker",
        "timestamp": 1695571608
    },
    {
        "content": "<p>I'd be highly surprised if bors can't be run on fork PRs. After all, that's the model most non-mathlib projects use.</p>",
        "id": 392847656,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1695571698
    },
    {
        "content": "<p>Yes but I think you have to explicitly enable that, and I think we haven't. But I'm no expert so we can try <span aria-label=\"shrug\" class=\"emoji emoji-1f937\" role=\"img\" title=\"shrug\">:shrug:</span></p>",
        "id": 392847870,
        "sender_full_name": "Anatole Dedecker",
        "timestamp": 1695571872
    },
    {
        "content": "<p>I also think we could just merge right away here. There's little risk we mess up the syntax.</p>",
        "id": 392848001,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1695571967
    },
    {
        "content": "<p>Bors should support it fine</p>",
        "id": 392848054,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1695572023
    },
    {
        "content": "<p>We want to run bors in any case in order to generate a cache right? Or is <code>cache</code> smart enough to work around that for documentation commits?</p>",
        "id": 392848153,
        "sender_full_name": "Anatole Dedecker",
        "timestamp": 1695572106
    },
    {
        "content": "<p>Uh actually I don't know. I'd have expected CI to run anyway, just not through bors first.</p>",
        "id": 392848231,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1695572171
    },
    {
        "content": "<p>Uh, sorry for causing the confusion, and thanks <span class=\"user-mention\" data-user-id=\"268315\">@Anatole Dedecker</span>  for the permissions! As for the suggestions by <span class=\"user-mention\" data-user-id=\"387244\">@Yaël Dillies</span> , do you know for sure that relative links/paths will work? Is there a way to run the HTML generator locally to try it out?</p>",
        "id": 392858072,
        "sender_full_name": "Malvin Gattinger",
        "timestamp": 1695581062
    },
    {
        "content": "<p>Yes, I've made relative paths work before. Or rather I made them work with doc-gen, not doc-gen4.</p>",
        "id": 392858091,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1695581093
    },
    {
        "content": "<p>There exists a doc-gen visualiser, but I'm pretty sure it doesn't support doc-gen4 yet.</p>",
        "id": 392858130,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1695581142
    },
    {
        "content": "<p>Ok, I adopted the suggestions. Should I still move it to a branch in <code>leanprover-community</code> instead of my own fork or do you want to merge it like this? (Would the CI run also provide a preview of the docs?)</p>",
        "id": 392951643,
        "sender_full_name": "Malvin Gattinger",
        "timestamp": 1695632648
    },
    {
        "content": "<p>I'm happy to merge like this.</p>",
        "id": 392958339,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1695634404
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"422703\">Malvin Gattinger</span> has marked this topic as unresolved.</p>",
        "id": 393084879,
        "sender_full_name": "Notification Bot",
        "timestamp": 1695667435
    },
    {
        "content": "<p>I fear the relative paths still don't work. <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Data/List/BigOperators/Basic.html\">https://leanprover-community.github.io/mathlib4_docs/Mathlib/Data/List/BigOperators/Basic.html</a> now has a link with <code>Defs</code> instead of <code>defs</code>, but doc-gen4 seems to turn the <code>./Defs</code> into <code>../../../../././Defs</code> which is <a href=\"https://leanprover-community.github.io/mathlib4_docs/Defs\">https://leanprover-community.github.io/mathlib4_docs/Defs</a> and 404.</p>",
        "id": 393085119,
        "sender_full_name": "Malvin Gattinger",
        "timestamp": 1695667529
    },
    {
        "content": "<p>Arguably this is now a doc-gen problem not a mathlib problem</p>",
        "id": 393088631,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1695668662
    },
    {
        "content": "<p>Ah. Nice occasion to read some code. I guess this is the place that converts module names to HTML links, and it will always add <code>getRoot</code> to make the path absolute? <a href=\"https://github.com/leanprover/doc-gen4/blob/96870507c50b43fc5ad744914f9718307fe7724a/DocGen4/Output/Base.lean#L115\">https://github.com/leanprover/doc-gen4/blob/96870507c50b43fc5ad744914f9718307fe7724a/DocGen4/Output/Base.lean#L115</a></p>",
        "id": 393092187,
        "sender_full_name": "Malvin Gattinger",
        "timestamp": 1695669786
    },
    {
        "content": "<p>Fwiw, just <code>Mathlib/Foo/Bar.lean</code> is now linked automatically</p>",
        "id": 393092566,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1695669922
    },
    {
        "content": "<p>The logic is <a href=\"https://github.com/leanprover/doc-gen4/blob/96870507c50b43fc5ad744914f9718307fe7724a/DocGen4/Output/DocString.lean#L99-L120\">here</a></p>",
        "id": 393105992,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1695674044
    },
    {
        "content": "<p>So this is deliberate but it's not clear it's desirable</p>",
        "id": 393106043,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1695674059
    }
]