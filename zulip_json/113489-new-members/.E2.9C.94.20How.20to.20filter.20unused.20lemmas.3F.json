[
    {
        "content": "<p>Is there an efficient way of filtering in a file the results I proved but are not used? Currently I search the names of the lemmas one by one to see if there is only one apperance, but is there a clever way?</p>",
        "id": 486772532,
        "sender_full_name": "Samuel Yin",
        "timestamp": 1733666699
    },
    {
        "content": "<p>I thought there was a command but I can't find it now</p>",
        "id": 486773438,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1733667452
    },
    {
        "content": "<p>Ah, <code>#show_unused</code></p>",
        "id": 486773562,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1733667573
    },
    {
        "content": "<p><code>Batteries.Tactic.ShowUnused</code></p>",
        "id": 486773707,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1733667687
    },
    {
        "content": "<p>Aha! Thank you!</p>",
        "id": 486776254,
        "sender_full_name": "Samuel Yin",
        "timestamp": 1733669674
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"781091\">Samuel Yin</span> has marked this topic as resolved.</p>",
        "id": 486776282,
        "sender_full_name": "Notification Bot",
        "timestamp": 1733669703
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"781091\">Samuel Yin</span> has marked this topic as unresolved.</p>",
        "id": 486819532,
        "sender_full_name": "Notification Bot",
        "timestamp": 1733706297
    },
    {
        "content": "<p>I'm sorry, but it seems like it has marked all my def, lemma, theorem, etc. as unused?</p>",
        "id": 486819595,
        "sender_full_name": "Samuel Yin",
        "timestamp": 1733706351
    },
    {
        "content": "<p>If you do <code>#show_unused decl1 decl2 ... decln</code>, it shows all declarations that aren't (transitively) used by these n declarations. It's assuming you have some list of \"leaf declarations\" that are self-evidently important.</p>\n<p>It doesn't handle the case of \"what are declarations that aren't used by at least one other declaration\"</p>",
        "id": 486819883,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1733706551
    },
    {
        "content": "<p>I guess that would make sense as the behavior of <code>#show_unused</code> without arguments, since the current version is not very useful since it just marks everything</p>",
        "id": 486820116,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1733706740
    },
    {
        "content": "<p>Oh, so in the case that my ultimate goal is proving a big theorem \"A\", I should type <code>#show_unused A</code></p>",
        "id": 486820967,
        "sender_full_name": "Samuel Yin",
        "timestamp": 1733707449
    },
    {
        "content": "<p>Is it possible that it may have some bug? It marked my lemma A, which is used in lemma B. But lemma B is not marked. When I delete lemma A in lemma B, the proof of lemma B no longer works.</p>",
        "id": 486821197,
        "sender_full_name": "Samuel Yin",
        "timestamp": 1733707642
    },
    {
        "content": "<p>This happens in a very long code so I uploaded it to GitHub: <a href=\"https://github.com/SmwYin/Thue\">https://github.com/SmwYin/Thue</a></p>\n<p><code>#show_unused thue</code> marked my <code>fundx</code>, <code>fundy</code>and <code>fundz</code>, but these are used in <code>computation</code>, which is not marked (and <code>computation</code> is indeed declared in some chain). When I delete the use of one of them in the proof of <code>computation</code>, the proof no longer works</p>",
        "id": 486826361,
        "sender_full_name": "Samuel Yin",
        "timestamp": 1733711595
    },
    {
        "content": "<p>It's because <code>fundy</code> and <code>fundz</code> are dsimp lemmas; these are known to cause problems for dependency analysis because they are a directive for <code>simp</code> to do something different but they don't actually appear in the resulting term</p>",
        "id": 486930715,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1733732381
    },
    {
        "content": "<p>Thank you for your explanation and for writing this useful tactic.</p>\n<p><code>fundx</code> is not <code>@[simp]</code> but it's marked. And it is declared within <code>simp only [ ]</code>. So can I conlcude that as long as a lemma is used as an directive for <code>simp</code>, no matter automatically or manually, then it causes problem to dependency analysis.</p>",
        "id": 486981050,
        "sender_full_name": "Samuel Yin",
        "timestamp": 1733746904
    },
    {
        "content": "<p>this is specifically an issue for theorems proved by <code>rfl</code></p>",
        "id": 486983527,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1733747632
    },
    {
        "content": "<p>for regular simp lemmas, they will be applied as rewrites and hence appear in the result term</p>",
        "id": 486983635,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1733747658
    },
    {
        "content": "<p>for dsimp lemmas simp will just change the result type according to the rewrite and put nothing in the proof term corresponding to this rewrite</p>",
        "id": 486983755,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1733747706
    },
    {
        "content": "<p>Oh this makes sense. My marked lemmas are proved by <code>rfl</code>. Thank you!</p>",
        "id": 486984073,
        "sender_full_name": "Samuel Yin",
        "timestamp": 1733747808
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"781091\">Samuel Yin</span> has marked this topic as resolved.</p>",
        "id": 487311909,
        "sender_full_name": "Notification Bot",
        "timestamp": 1733853769
    }
]