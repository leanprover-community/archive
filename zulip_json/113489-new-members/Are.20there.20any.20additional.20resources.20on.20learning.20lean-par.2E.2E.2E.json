[
    {
        "content": "<p>I'm trying to parse some very basic data (a file with rows of numbers) and I thought that this would be a good time to learn how to use a parsing library in lean. The only one I found was <a href=\"https://github.com/fgdorais/lean4-parser/tree/main\">https://github.com/fgdorais/lean4-parser/tree/main</a> . Problem is... I can't make heads nor tails of how this works or how to use it. I've written combinator parsers before in TypeScript, in the sense of the old \"a parser for things is a function from strings to lists of pairs of things and strings\" sense but this is a whole different beast. Does anyone know of simple examples of how to use this, or where I might start?</p>\n<p>Concrete questions:</p>\n<ul>\n<li>In the <a href=\"https://github.com/fgdorais/lean4-parser/blob/main/examples/JSON.lean\">JSON example</a> all of the parsers have <code>Unit</code> in their type signature. I would expect that the <code>number</code> function would have a number type in its signature. What am I missing?</li>\n<li>In the documentation I can see a <a href=\"https://www.dorais.org/lean4-parser/doc/Parser/Char/Numeric.html#Parser.Char.ASCII.parseNat\">function to parse numbers</a>. However, this doesn't return a <code>Parser</code>, it returns a <code>ParserT</code>. Why? And to use this without additional effects, would I somehow apply it to the identity monad?</li>\n<li>I _mostly_ understand the implementation of <a href=\"https://github.com/fgdorais/lean4-parser/blob/main/examples/Roman.lean\">roman numeral parsing</a> but I could still use help understanding the type signatures and why <code>ParserT</code> is nowhere to be seen.</li>\n</ul>\n<p>I really appreciate any and all help on any part of these.</p>",
        "id": 498617585,
        "sender_full_name": "Joseph Junker",
        "timestamp": 1739121872
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"873696\">Joseph Junker</span> <a href=\"#narrow/channel/113489-new-members/topic/Are.20there.20any.20additional.20resources.20on.20learning.20lean-parser.3F/near/498617585\">said</a>:</p>\n<blockquote>\n<ul>\n<li>In the <a href=\"https://github.com/fgdorais/lean4-parser/blob/main/examples/JSON.lean\">JSON example</a> all of the parsers have <code>Unit</code> in their type signature. I would expect that the <code>number</code> function would have a number type in its signature. What am I missing?</li>\n</ul>\n</blockquote>\n<p>This means that they don't return anything. The file you linked has \"JSON validator\" written at the top. The parser doesn't actually extract any information from the JSON, it just validates that it doesn't have any syntax errors.</p>",
        "id": 498618461,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1739122538
    },
    {
        "content": "<p><span aria-label=\"man facepalming\" class=\"emoji emoji-1f926-200d-2642\" role=\"img\" title=\"man facepalming\">:man_facepalming:</span></p>",
        "id": 498618586,
        "sender_full_name": "Joseph Junker",
        "timestamp": 1739122640
    },
    {
        "content": "<p>yeah that tracks. Thank you!</p>",
        "id": 498618613,
        "sender_full_name": "Joseph Junker",
        "timestamp": 1739122681
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"873696\">Joseph Junker</span> has marked this topic as resolved.</p>",
        "id": 498644902,
        "sender_full_name": "Notification Bot",
        "timestamp": 1739144054
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"119741\">François G. Dorais</span> has marked this topic as unresolved.</p>",
        "id": 499957584,
        "sender_full_name": "Notification Bot",
        "timestamp": 1739660464
    },
    {
        "content": "<p>I'm a bit late to the party, I've been busy.</p>\n<p><span class=\"user-mention silent\" data-user-id=\"873696\">Joseph Junker</span> <a href=\"#narrow/channel/113489-new-members/topic/Are.20there.20any.20additional.20resources.20on.20learning.20lean-par.2E.2E.2E/near/498617585\">said</a>:</p>\n<blockquote>\n<ul>\n<li>In the documentation I can see a <a href=\"https://www.dorais.org/lean4-parser/doc/Parser/Char/Numeric.html#Parser.Char.ASCII.parseNat\">function to parse numbers</a>. However, this doesn't return a <code>Parser</code>, it returns a <code>ParserT</code>. Why? And to use this without additional effects, would I somehow apply it to the identity monad?</li>\n</ul>\n</blockquote>\n<p>I'm (slowly) working on improving documentation. Many significant parts are still missing.</p>\n<p><code>ParserT</code> is a monad transformer, it takes a monad <code>m</code> and adds a parser layer to it.  This is necessary to allow parsing external files, for example, which requires something like <code>IO</code> in an inner layer. However, if <code>m</code> has no side effects then the transformed monad will have no side effects either. In fact, the monad <code>Parser</code> is simply defined as <code>ParserT</code> applied to <code>Id</code>.</p>\n<p>Many users will not need to use <code>Parser</code> or <code>ParserT</code> directly. For example, the specializations <code>SimpleParser</code>/<code>SimpleParserT</code>, <code>BasicParser</code>/<code>BasicParserT</code>, <code>TrivialParser</code>/<code>TrivialParserT</code> provide three different simple mechanisms for error reporting. The <code>Trivial</code> mechanism simply fails on error providing no additional info, use this when the parser cannot fail or is not expected to fail for your application. The <code>Simple</code> mechanism allows adding messages to explain the error. None of these provide tools for error recovery, this would be one reason to work with <code>Parser</code>/<code>ParserT</code> directly.</p>",
        "id": 499958630,
        "sender_full_name": "François G. Dorais",
        "timestamp": 1739661541
    }
]