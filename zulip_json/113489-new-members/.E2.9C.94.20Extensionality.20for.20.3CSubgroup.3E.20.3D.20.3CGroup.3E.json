[
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">GroupTheory</span><span class=\"bp\">.</span><span class=\"n\">SpecificGroups</span><span class=\"bp\">.</span><span class=\"n\">Dihedral</span>\n\n<span class=\"kn\">namespace</span><span class=\"w\"> </span><span class=\"n\">DihedralGroup</span>\n\n<span class=\"c1\">-- The subgroup of rotations</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Rot</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">):</span><span class=\"w\"> </span><span class=\"n\">Subgroup</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">DihedralGroup</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">carrier</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ZMod</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">}</span>\n<span class=\"w\">  </span><span class=\"n\">mul_mem'</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">    </span><span class=\"n\">intros</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"n\">a_is_ri</span><span class=\"w\"> </span><span class=\"n\">b_is_ri</span>\n<span class=\"w\">    </span><span class=\"n\">cases'</span><span class=\"w\"> </span><span class=\"n\">a_is_ri</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"n\">i1</span><span class=\"w\"> </span><span class=\"n\">r_i1_is_a</span>\n<span class=\"w\">    </span><span class=\"n\">cases'</span><span class=\"w\"> </span><span class=\"n\">b_is_ri</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"n\">i2</span><span class=\"w\"> </span><span class=\"n\">r_i1_is_b</span>\n<span class=\"w\">    </span><span class=\"n\">use</span><span class=\"w\"> </span><span class=\"n\">i1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">i2</span>\n<span class=\"w\">    </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"n\">r_i1_is_a</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">←</span><span class=\"n\">r_i1_is_b</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">r_mul_r</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">one_mem'</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">    </span><span class=\"n\">use</span><span class=\"w\"> </span><span class=\"mi\">0</span>\n<span class=\"w\">    </span><span class=\"n\">rfl</span>\n<span class=\"w\">  </span><span class=\"n\">inv_mem'</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">    </span><span class=\"n\">intros</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">x_in_A</span>\n<span class=\"w\">    </span><span class=\"n\">cases'</span><span class=\"w\"> </span><span class=\"n\">x_in_A</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"n\">ri_is_x</span>\n<span class=\"w\">    </span><span class=\"n\">use</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">i</span>\n<span class=\"w\">    </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">ri_is_x</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"n\">rfl</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">t1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Rot</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">normalizer</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">⊤</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">Subgroup</span><span class=\"bp\">.</span><span class=\"n\">ext</span><span class=\"w\"> </span><span class=\"c1\">-- ok</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">t2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Rot</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">normalizer</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">DihedralGroup</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">Subgroup</span><span class=\"bp\">.</span><span class=\"n\">ext</span><span class=\"w\"> </span><span class=\"c1\">-- not ok</span>\n</code></pre></div>\n<p>I want to apply extensionality as a first step to prove <code>t2</code>, but it fails with a unification error.</p>\n<p>Looking a bit a the types, I think what's going on is that the type <code>(Rot n).normalizer = (DihedralGroup n)</code> is comparing a subgroup to a group, which actually doesn't type-check, so it coerces the subgroup to something (a subtype?), but what I actually want is to coerce the group down to a subgroup (like in <code>t1</code>, but without writing <code>⊤</code>)</p>",
        "id": 490263334,
        "sender_full_name": "Li Xuanji",
        "timestamp": 1734753275
    },
    {
        "content": "<p>Why don't you want to write <code>⊤</code>? That's the correct thing to do here. Normalizers only make sense in the lattice of subgroups.</p>",
        "id": 490267357,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1734757096
    },
    {
        "content": "<p>An alternative is to rather prove these are isomorphic? But I do agree with Jireh that the <code>top</code> lemma is more natural</p>",
        "id": 490283428,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1734773553
    },
    {
        "content": "<p>t1 makes sense if I think about it, but the statement of t2 is closer to \"informal\" mathematics. Anyway I will use t1 as my statement and I don't have further questions about that.</p>\n<p>My remaining question is more for curiosity; what is t2 stating, mathematically speaking? And is it a true statement?</p>",
        "id": 490284234,
        "sender_full_name": "Li Xuanji",
        "timestamp": 1734774311
    },
    {
        "content": "<p><code>t2</code> is merely stating an equality of types (sets), not of groups, so it does not express what you want it to say. You could write existence of a group isomorphism instead, but t1 is the idiomatic approach in type theory.</p>",
        "id": 490285072,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1734775099
    },
    {
        "content": "<p>More confusingly, <code>t2</code> is probably independent of lean's axioms.</p>",
        "id": 490285113,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1734775158
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"308587\">Li Xuanji</span> has marked this topic as resolved.</p>",
        "id": 490293583,
        "sender_full_name": "Notification Bot",
        "timestamp": 1734783175
    }
]