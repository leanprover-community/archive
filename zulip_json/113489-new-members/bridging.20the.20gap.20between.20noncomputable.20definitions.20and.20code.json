[
    {
        "content": "<p>ive defined a certain <code>PGame</code>, and ive proved things about it using the grundyValue<br>\nsince my game is short (always terminates) i have a decidable way to compute the value for a board<br>\nid like to use all my previous definitions which use grundyValue now but they remain noncomputable, is there a easy way to reconcile these definitions with my computable grundy value function or am i doomed to write a bunch of boilerplate whenever i use them?</p>",
        "id": 564058989,
        "sender_full_name": "tzlil",
        "timestamp": 1765896345
    },
    {
        "content": "<p>Could you get a little more concrete? Do you have some code examples?</p>",
        "id": 564064628,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1765897620
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"395550\">Henrik Böving</span> <a href=\"#narrow/channel/113489-new-members/topic/bridging.20the.20gap.20between.20noncomputable.20definitions.20and.20code/near/564064628\">said</a>:</p>\n<blockquote>\n<p>Could you get a little more concrete? Do you have some code examples?</p>\n</blockquote>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Move</span><span class=\"bp\">.</span><span class=\"n\">preposition</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Board</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Move</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Board</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">use</span><span class=\"w\"> </span><span class=\"n\">Board</span><span class=\"bp\">.</span><span class=\"n\">flip</span><span class=\"w\"> </span><span class=\"bp\">&lt;|</span><span class=\"w\"> </span><span class=\"n\">Move</span><span class=\"bp\">.</span><span class=\"n\">Apply</span><span class=\"w\"> </span><span class=\"n\">Board</span><span class=\"bp\">.</span><span class=\"n\">Initial</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Move</span><span class=\"bp\">.</span><span class=\"n\">lift</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"o\">)</span>\n\n<span class=\"kn\">noncomputable</span><span class=\"w\"> </span><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Move</span><span class=\"bp\">.</span><span class=\"n\">xorness</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Board</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Move</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nimber</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">grundyValue</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">FlippingGame</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Move</span><span class=\"bp\">.</span><span class=\"n\">preposition</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"o\">))</span>\n</code></pre></div>\n<p>for example this is one of the properties which are technically totally computable i just have to write a bunch of boilerplate to reconcile it with the definition of <code>grundyValue</code> being noncomputable<br>\ni have the actual function capable of computing </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">partial</span><span class=\"w\"> </span><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">grundyFast</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">grundyMemo</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IO</span><span class=\"bp\">.</span><span class=\"n\">Ref</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Std</span><span class=\"bp\">.</span><span class=\"n\">HashMap</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Board</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Board</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IO</span><span class=\"w\"> </span><span class=\"n\">ℕ</span>\n</code></pre></div>\n<p>or alternatively i also have a version of this in ST<br>\nand i could if i wanted prove <code>grundyFast b = grundyValue (FlippingGame b)</code> <br>\nand then presumably write something like <code>Move.xornessComputable ....</code> and prove <code>Move.xornessComputable = Move.xorness</code>, i dont know what would be a good way</p>",
        "id": 564077955,
        "sender_full_name": "tzlil",
        "timestamp": 1765900842
    }
]