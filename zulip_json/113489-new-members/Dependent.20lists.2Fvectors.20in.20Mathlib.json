[
    {
        "content": "<p>Are there any good examples in the Mathlib on how to best deal with dependent lists/vectors with a given 'signature'?</p>\n<p>Essentially, I mean an object of the following type,</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">DepListAsFun</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">)</span><span class=\"w\">  </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">σ</span><span class=\"bp\">.</span><span class=\"n\">length</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"o\">[</span><span class=\"n\">i</span><span class=\"o\">])</span>\n</code></pre></div>\n<p>an object of this type could equivalently be represented by a structure like</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">structure</span><span class=\"w\"> </span><span class=\"n\">DepList</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">toList</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Sigma</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"n\">proj_eq</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">toList</span><span class=\"bp\">.</span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Sigma</span><span class=\"bp\">.</span><span class=\"n\">fst</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">σ</span>\n</code></pre></div>\n<p>or many other different types.</p>\n<p>I am particularly interested in operations like appending, mapping, casting over equality of signature σ, and converting between different avatars, but don't want to reinvent the wheel if possible.</p>\n<p>(My specific context is formalizing tuples of variables in many-sorted first order logic, but I imagine that such objects pop up elsewhere as well.)</p>",
        "id": 542958350,
        "sender_full_name": "Mathias Stout",
        "timestamp": 1759501565
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=List.TProd#doc\">docs#List.TProd</a></p>",
        "id": 542959547,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1759501913
    },
    {
        "content": "<p>is what I've been using</p>",
        "id": 542959587,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1759501923
    },
    {
        "content": "<p>Oh that seems interesting, thanks for directing me to it.<br>\nDo you happen to know if it has been used beyond  Measure theory or if there are further lemmas/definitions converting between different presentations of this kind of object beyond what is listed on the docs page for TProd?</p>",
        "id": 542965687,
        "sender_full_name": "Mathias Stout",
        "timestamp": 1759503742
    },
    {
        "content": "<p>I know it isn't supported very well and people have been telling me to use something else instead</p>",
        "id": 542969364,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1759504883
    },
    {
        "content": "<p>Oh, ok, I see. Thanks!</p>",
        "id": 543006932,
        "sender_full_name": "Mathias Stout",
        "timestamp": 1759517628
    }
]