[
    {
        "content": "<p>I' am confused:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"c1\">-- Prop</span>\n<span class=\"bp\">#</span><span class=\"n\">eval</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"o\">]</span><span class=\"bp\">.</span><span class=\"n\">filter</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"c1\">-- [1, 3]</span>\n</code></pre></div>\n<p>but</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">myle</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">LE</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Bool</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">    </span><span class=\"bp\">λ</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">y</span>\n</code></pre></div>\n<p>is a type mismatch</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">type</span><span class=\"w\"> </span><span class=\"n\">mismatch</span>\n<span class=\"w\">  </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">y</span>\n<span class=\"n\">has</span><span class=\"w\"> </span><span class=\"n\">type</span>\n<span class=\"w\">  </span><span class=\"kt\">Prop</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span>\n<span class=\"n\">but</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">expected</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">type</span>\n<span class=\"w\">  </span><span class=\"n\">Bool</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span>\n</code></pre></div>\n<p>I thought that LE is Decidable and therefore Prop is automatically coerced to Bool if needed??</p>",
        "id": 500184375,
        "sender_full_name": "Burkhardt Renz",
        "timestamp": 1739798332
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"705569\">Burkhardt Renz</span> <a href=\"#narrow/channel/113489-new-members/topic/LE.20Prop.20vs.20Bool/near/500184375\">said</a>:</p>\n<blockquote>\n<p>I thought that LE is Decidable</p>\n</blockquote>\n<p>In general it's not. Your first example only shows it is decidable <em>on <code>Nat</code></em>.</p>",
        "id": 500184968,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1739798458
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">myle</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">LE</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">][</span><span class=\"n\">DecidableLE</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Bool</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"bp\">λ</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">y</span>\n</code></pre></div>",
        "id": 500185282,
        "sender_full_name": "suhr",
        "timestamp": 1739798525
    },
    {
        "content": "<p>Which type class should I use, when I want to compare Nats,  Ints, Strings and so on?</p>\n<p>With </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">myle</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">LE</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">DecidableLE</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Bool</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">    </span><span class=\"bp\">λ</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">y</span>\n</code></pre></div>\n<p>I get</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">invalid</span><span class=\"w\"> </span><span class=\"n\">binder</span><span class=\"w\"> </span><span class=\"n\">annotation</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">type</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"kn\">class</span><span class=\"w\"> </span><span class=\"kn\">instance</span>\n<span class=\"w\">  </span><span class=\"bp\">?</span><span class=\"n\">m</span><span class=\"bp\">.</span><span class=\"m\">5185</span>\n</code></pre></div>",
        "id": 500186590,
        "sender_full_name": "Burkhardt Renz",
        "timestamp": 1739798838
    },
    {
        "content": "<p>Try turning on autoImplicit errors</p>",
        "id": 500186747,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1739798879
    },
    {
        "content": "<p>(<code>set_option autoImplicit false</code>)</p>",
        "id": 500188336,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1739799248
    },
    {
        "content": "<p>I didn't manage to define the function using typeclass LE</p>\n<p>My solution now: </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">myle</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Ord</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Bool</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">    </span><span class=\"bp\">λ</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">Ordering</span><span class=\"bp\">.</span><span class=\"n\">isLE</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">compare</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"n\">true</span><span class=\"w\"> </span><span class=\"k\">else</span><span class=\"w\"> </span><span class=\"n\">false</span>\n</code></pre></div>\n<p>What do you think about that approach?</p>",
        "id": 500198151,
        "sender_full_name": "Burkhardt Renz",
        "timestamp": 1739801446
    },
    {
        "content": "<p>It's <em>fine</em>, but you won't be able to compare <code>Float</code>s.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">#</span><span class=\"n\">synth</span><span class=\"w\"> </span><span class=\"n\">Ord</span><span class=\"w\"> </span><span class=\"n\">Float</span>\n</code></pre></div>",
        "id": 500199163,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1739801681
    },
    {
        "content": "<p>What is your goal?</p>",
        "id": 500199185,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1739801685
    },
    {
        "content": "<p>My goal is a version of Quicksort that works for all reasonable types, not just Int or Nat<br>\nI have a version of Quicksort for Int together with a proof of termination.</p>",
        "id": 500199577,
        "sender_full_name": "Burkhardt Renz",
        "timestamp": 1739801772
    },
    {
        "content": "<p>Then why not just assume <code>DecidableLE</code>?</p>",
        "id": 500200115,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1739801904
    },
    {
        "content": "<p>That's <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=DecidableLE#doc\">docs#DecidableLE</a></p>",
        "id": 500200737,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1739802041
    },
    {
        "content": "<p>You can also try writing <code>decide</code> explicitly</p>",
        "id": 500201361,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1739802176
    },
    {
        "content": "<p>`DecidableLe':</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">myle</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">DecidableLe</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Bool</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"bp\">λ</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">y</span>\n</code></pre></div>\n<p>error:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">invalid</span><span class=\"w\"> </span><span class=\"n\">binder</span><span class=\"w\"> </span><span class=\"n\">annotation</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">type</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"kn\">class</span><span class=\"w\"> </span><span class=\"kn\">instance</span>\n<span class=\"w\">  </span><span class=\"bp\">?</span><span class=\"n\">m</span><span class=\"bp\">.</span><span class=\"m\">6720</span>\n</code></pre></div>",
        "id": 500201893,
        "sender_full_name": "Burkhardt Renz",
        "timestamp": 1739802302
    },
    {
        "content": "<p>Your code from above is working fine for me. Can you try putting <code>set_option autoImplicit false</code> at the top of the file, right after all the imports?</p>\n<p><span class=\"user-mention silent\" data-user-id=\"705569\">Burkhardt Renz</span> <a href=\"#narrow/channel/113489-new-members/topic/LE.20Prop.20vs.20Bool/near/500186590\">said</a>:</p>\n<blockquote>\n<p>With </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">myle</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">LE</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">DecidableLE</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Bool</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">    </span><span class=\"bp\">λ</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">y</span>\n</code></pre></div>\n<p>I get</p>\n<p><div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">invalid</span><span class=\"w\"> </span><span class=\"n\">binder</span><span class=\"w\"> </span><span class=\"n\">annotation</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">type</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"kn\">class</span><span class=\"w\"> </span><span class=\"kn\">instance</span>\n<span class=\"w\">  </span><span class=\"bp\">?</span><span class=\"n\">m</span><span class=\"bp\">.</span><span class=\"m\">5185</span>\n</code></pre></div><br>\n</p>\n</blockquote>",
        "id": 500202440,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1739802427
    },
    {
        "content": "<p>Sorry, <code>DecidableLE</code>  not <code>DecidableLe</code>. You've run into the autoImplicit footgun.</p>",
        "id": 500202855,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1739802514
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/channel/113489-new-members/topic/LE.20Prop.20vs.20Bool/near/500188336\">said</a>:</p>\n<blockquote>\n<p>(<code>set_option autoImplicit false</code>)</p>\n</blockquote>\n<p>Please add this line to your code that we suggested earlier</p>",
        "id": 500203940,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1739802743
    },
    {
        "content": "<p>I tried with </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">set_option</span><span class=\"w\"> </span><span class=\"n\">autoImplicit</span><span class=\"w\"> </span><span class=\"n\">false</span>\n</code></pre></div>\n<p>but I get the same error message </p>\n<p>I use Lean Version 4.15.0</p>\n<p>In Lean 4 Web there is no error message. I try to update Lean.</p>",
        "id": 500205286,
        "sender_full_name": "Burkhardt Renz",
        "timestamp": 1739803021
    },
    {
        "content": "<p>Yes, your lean version is probably the issue</p>",
        "id": 500206318,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1739803261
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"705569\">Burkhardt Renz</span> <a href=\"#narrow/channel/113489-new-members/topic/LE.20Prop.20vs.20Bool/near/500205286\">said</a>:</p>\n<blockquote>\n<p>but I get the same error message</p>\n</blockquote>\n<p>Are you sure? I would expect a different error message</p>",
        "id": 500206412,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1739803283
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"705569\">@Burkhardt Renz</span> can you please post a <a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a> so we are all on the same page?</p>",
        "id": 500208052,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1739803640
    },
    {
        "content": "<p>It looks like <code>DecidableLE</code> was only added 2 months ago. You can use <code>DecidableRel (LE.le : α → α → Prop)</code> instead.</p>",
        "id": 500209089,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1739803881
    },
    {
        "content": "<p>Sorry for the trouble, and thanks for your help</p>\n<p>In the future I will check first on Lean 4 Web!</p>\n<p>I updated Lean to <code>Lake version 5.0.0-93d4ae6 (Lean version 4.17.0-rc1)</code>and th problem is gone. I even don't need the autoImplicit option:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">myle</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">LE</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">DecidableLE</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Bool</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">    </span><span class=\"bp\">λ</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">y</span>\n\n<span class=\"bp\">#</span><span class=\"n\">eval</span><span class=\"w\"> </span><span class=\"n\">myle</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"c1\">-- true</span>\n<span class=\"bp\">#</span><span class=\"n\">eval</span><span class=\"w\"> </span><span class=\"n\">myle</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">a'</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">z'</span><span class=\"w\"> </span><span class=\"c1\">-- true</span>\n<span class=\"bp\">#</span><span class=\"n\">eval</span><span class=\"w\"> </span><span class=\"n\">myle</span><span class=\"w\"> </span><span class=\"s2\">\"aa\"</span><span class=\"w\"> </span><span class=\"s2\">\"aaa\"</span><span class=\"w\"> </span><span class=\"c1\">-- true</span>\n<span class=\"bp\">#</span><span class=\"n\">eval</span><span class=\"w\"> </span><span class=\"n\">myle</span><span class=\"w\"> </span><span class=\"s2\">\"b\"</span><span class=\"w\"> </span><span class=\"s2\">\"aaa\"</span><span class=\"w\"> </span><span class=\"c1\">-- false</span>\n<span class=\"bp\">#</span><span class=\"n\">eval</span><span class=\"w\"> </span><span class=\"n\">myle</span><span class=\"w\"> </span><span class=\"mf\">5.0</span><span class=\"w\"> </span><span class=\"mf\">4.2</span><span class=\"w\"> </span><span class=\"c1\">--.false</span>\n<span class=\"bp\">``</span><span class=\"w\"> </span><span class=\"bp\">`</span>\n</code></pre></div>",
        "id": 500209677,
        "sender_full_name": "Burkhardt Renz",
        "timestamp": 1739804022
    },
    {
        "content": "<p>The autoImplicit option is just to prevent people from getting confusing errors if they make typos :-)</p>",
        "id": 500213511,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1739804884
    }
]