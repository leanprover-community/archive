[
    {
        "content": "<p>What is this and how to fix?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span>\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">∪</span><span class=\"w\"> </span><span class=\"n\">b</span>\n<span class=\"n\">failed</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">synthesize</span>\n<span class=\"w\">  </span><span class=\"n\">Union</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Finset</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span>\n\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">insert</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">({</span><span class=\"n\">a</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Finset</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">))</span>\n<span class=\"n\">failed</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">synthesize</span>\n<span class=\"w\">  </span><span class=\"n\">Insert</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Finset</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Finset</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Finset</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">))</span>\n</code></pre></div>",
        "id": 492237367,
        "sender_full_name": "Iocta",
        "timestamp": 1736221551
    },
    {
        "content": "<p>the instances require <code>DecidableEq</code>, so just use the <code>classical</code> tactic beforehand or add an assumption</p>",
        "id": 492238306,
        "sender_full_name": "Matt Diamond",
        "timestamp": 1736222077
    },
    {
        "content": "<p>or <code>open Classical in</code>, etc.</p>",
        "id": 492238352,
        "sender_full_name": "Matt Diamond",
        "timestamp": 1736222118
    },
    {
        "content": "<p>What's the clue that should tip me off that I need <code>classical</code>?</p>",
        "id": 492239089,
        "sender_full_name": "Iocta",
        "timestamp": 1736222506
    },
    {
        "content": "<p>not sure... honestly I just looked up <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Union#doc\">docs#Union</a> in the mathlib docs, opened the Instances list, saw <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Finset.instUnion#doc\">docs#Finset.instUnion</a>, clicked through, and saw the <code>DecidableEq</code> requirement</p>",
        "id": 492239399,
        "sender_full_name": "Matt Diamond",
        "timestamp": 1736222710
    },
    {
        "content": "<p>it would be cool if the instance search had some way of telling the user \"I <em>almost</em> found an instance but it was missing this one typeclass requirement\"</p>",
        "id": 492239633,
        "sender_full_name": "Matt Diamond",
        "timestamp": 1736222873
    },
    {
        "content": "<p>actually you <em>can</em> do this:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">}</span>\n\n<span class=\"kn\">set_option</span><span class=\"w\"> </span><span class=\"n\">diagnostics</span><span class=\"w\"> </span><span class=\"n\">true</span>\n\n<span class=\"bp\">#</span><span class=\"n\">synth</span><span class=\"w\"> </span><span class=\"n\">Union</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Finset</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>and there's some more info there</p>",
        "id": 492240040,
        "sender_full_name": "Matt Diamond",
        "timestamp": 1736223132
    }
]