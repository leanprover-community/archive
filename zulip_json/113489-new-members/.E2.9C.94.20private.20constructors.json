[
    {
        "content": "<p>Hey,<br>\nis there a way to mark the constructor of a structure as private?<br>\nIn My structure S the private value v is accessible through matching against the default constructor (<a href=\"http://S.mk\">S.mk</a>)</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">structure</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"kn\">private</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">String</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"s2\">\"hello\"</span><span class=\"bp\">⟩</span>\n\n<span class=\"c1\">--other file</span>\n<span class=\"bp\">#</span><span class=\"n\">eval</span><span class=\"w\"> </span><span class=\"k\">match</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">v</span><span class=\"bp\">⟩</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"c1\">-- prints \"hello\"</span>\n</code></pre></div>",
        "id": 465006412,
        "sender_full_name": "Simon Daniel",
        "timestamp": 1724589627
    },
    {
        "content": "<p>I think that <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Lean.Environment#doc\">docs#Lean.Environment</a> has a private <code>mk</code>.  Is this an example of what you are looking for?</p>",
        "id": 465011743,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1724592302
    },
    {
        "content": "<p>yes thank you!<br>\nAre there cases where you want to define<code>mk</code> yourself, except changing visability?</p>",
        "id": 465021285,
        "sender_full_name": "Simon Daniel",
        "timestamp": 1724597513
    },
    {
        "content": "<p>I think that sometimes you would rather reserve <code>mk</code> for a \"custom\" constructor, so you can rename the default one.  Or other times, the default one is good, but calling it <code>mk</code> might be confusing since an alternative convention makes a different name preferable.</p>",
        "id": 465024995,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1724601222
    },
    {
        "content": "<p>I don't think that there is a \"hard\" rule, but rather adhering to other conventions.</p>",
        "id": 465025050,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1724601245
    },
    {
        "content": "<p>In terms of making it private, that usually is an indication that you want users to only interact with it via the later API.  The environment explicitly mentions this for \"security\" concerns, to ensure that the declarations that make it into the environment have been checked by the kernel first.</p>",
        "id": 465025306,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1724601499
    },
    {
        "content": "<p>it was my intent to hide the constructor from the user, sounds like thats what i want.<br>\nThanks for the explenation, sounds reasonable!</p>",
        "id": 465039918,
        "sender_full_name": "Simon Daniel",
        "timestamp": 1724616554
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"684702\">Simon Daniel</span> has marked this topic as resolved.</p>",
        "id": 465039922,
        "sender_full_name": "Notification Bot",
        "timestamp": 1724616558
    }
]