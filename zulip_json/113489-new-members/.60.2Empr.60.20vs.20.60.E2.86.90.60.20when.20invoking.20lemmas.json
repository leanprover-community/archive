[
    {
        "content": "<p>Why do we say</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">succ_le</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">h</span>\n</code></pre></div>\n<p>but not</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">succ_le</span><span class=\"bp\">.</span><span class=\"n\">mpr</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">h</span>\n</code></pre></div>\n<p>?</p>\n<p>To me it seems redundant to have both <code>mp/mpr</code> as well as <code>←</code>.</p>\n<p>Is there a vlid reason I am not seeing?</p>",
        "id": 484082630,
        "sender_full_name": "rzeta0",
        "timestamp": 1732383801
    },
    {
        "content": "<p>the latter doesn't typecheck</p>",
        "id": 484082868,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1732384013
    },
    {
        "content": "<p><code>.mp</code>  and <code>.mpr</code> are only things when your lemma is an equivalence (and then you need to use <code>apply</code>, not ``rw```)</p>",
        "id": 484082874,
        "sender_full_name": "Philippe Duchon",
        "timestamp": 1732384022
    },
    {
        "content": "<p><code>rw</code> takes equalities or iff statements, while <code>Iff.mpr</code> turns an iff statement into an implication</p>",
        "id": 484082898,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1732384043
    },
    {
        "content": "<p>so it would not make sense to use <code>mpr</code> there</p>",
        "id": 484082905,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1732384053
    },
    {
        "content": "<p>I think what you want to say is <code>.symm</code> instead</p>",
        "id": 484082926,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1732384069
    },
    {
        "content": "<p>regarding \"why have <code>mp</code> when you have <code>←</code>\",  not all use of terms goes through <code>rw</code>, and <code>←</code> is rw-specific syntax. <code>.mp</code> is useful when applying lemmas in term mode</p>",
        "id": 484083026,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1732384165
    },
    {
        "content": "<p>So we're saying that :</p>\n<ul>\n<li><code>mp</code> and <code>.mpr</code> are only used with <code>apply</code></li>\n<li><code>←</code> is only used with <code>rw</code></li>\n<li>the <code>rw</code> is simpler in that it only does pattern-matching and lexical replacement</li>\n</ul>\n<p>I still don't see why we can't have just one indicator of direction, with <code>apply</code> and <code>rw</code> doing whatever they need to do with the selected direction.</p>\n<p>I guess my assertion is that <code>mp</code> and <code>mpr</code> and <code>←</code> only select direction. The magic stuff happens inside <code>apply</code> and <code>rw</code> not the direction selectors.</p>\n<p>I understand, if for historical reasons, this clean separation didn't happen.</p>",
        "id": 484084345,
        "sender_full_name": "rzeta0",
        "timestamp": 1732385328
    },
    {
        "content": "<p>I think a better way to say it is:  <code>Nat.succ_le</code> is a proof of <code>n.succ ≤ m ↔ n &lt; m</code>.  <code>Nat.succ_le.mpr</code> is a proof of <code>n &lt; m → n.succ ≤ m</code>.  The first can be used in any situation in which you can use a proof of an iff statement.  The second can be used in any situation in which you can use a proof of an implication.</p>\n<p><code>rw</code> is always applied to either an equation or an iff statement--it is for replacing something with something that is <em>equal</em> to it or <em>equivalent</em> to it, so it has to be applied to an equation or an iff, not an implication.  An implication can be used in a number of ways, one of which is that it can be used with <code>apply</code>.</p>",
        "id": 484085104,
        "sender_full_name": "Dan Velleman",
        "timestamp": 1732386042
    },
    {
        "content": "<p>Don't worry, there's no magic here <span class=\"user-mention\" data-user-id=\"724904\">@rzeta0</span>, and no need to come up with specific rules about <code>mp</code> and <code>mpr</code> and <code>apply</code>, since there are simpler underlying rules.</p>\n<ul>\n<li><code>rw</code> accepts any expression (it could be a theorem) that proves an equality <code>a = b</code> or an iff <code>a &lt;-&gt; b</code>. That expression can be prefixed with <code>←</code>. If it is not prefixed with <code>←</code>, <code>rw</code> converts each <code>a</code> in the goal/hypothesis into <code>b</code>. If it is prefixed with <code>←</code>, then <code>rw</code> converts each <code>b</code> in the goal/hypothesis into <code>a</code>.</li>\n<li><code>apply</code> accepts any expression. When you have a proof <code>h</code> of an equality <code>a = b</code>, then <code>h.mp</code> is shorthand for <code>Eq.mp h</code>, which proves <code>a -&gt; b</code>. You can <code>apply h.mp</code>, which uses this proof of type <code>a -&gt; b</code>, if the goal is <code>b</code> to get a new goal <code>a</code>. Similarly, if <code>h</code> is a proof of <code>a &lt;-&gt; b</code>, then <code>h.mpr</code> is shorthand for <code>Iff.mpr h</code>, which proves <code>b -&gt; a</code>. You can similarly <code>apply h.mpr</code> if the goal is <code>a</code> to get a new goal <code>b</code>.</li>\n</ul>\n<p>It (usually) does not make sense to use <code>mp</code>/<code>mpr</code> with <code>rw</code> because then the expression will no longer proof an equality or an iff. The \"modus ponens\" / \"modus ponens reversed\" forms — both implications — are simply not the sort of thing that <code>rw</code> accepts. It's not just historical reasons, because it's a much more challenging and difficult problem to rewrite using an implication, and I don't think you would find the error messages to be intuitive at all.</p>",
        "id": 484090255,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1732390708
    }
]