[
    {
        "content": "<p>From the docs:</p>\n<blockquote>\n<p><code>Ord α</code> provides a computable total order on <code>α</code>, in terms of the <code>compare : α → α → Ordering</code> function.</p>\n</blockquote>\n<p>Once I have an <code>Ord</code> instance, shouldn't there be some way to use definition to automatically obtain <code>LE</code>, <code>LT</code>, <code>IsTotal (·≤·)</code>,  and <code>IsTotal (·&lt;·)</code>) for the type?</p>",
        "id": 449384701,
        "sender_full_name": "Michal Wallace (tangentstorm)",
        "timestamp": 1720208167
    },
    {
        "content": "<p>I doubt that <code>IsTotal</code> will follow:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"c1\">--  works</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">cmpBool1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Ord</span><span class=\"w\"> </span><span class=\"n\">Bool</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">compare</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">eq</span>\n\n<span class=\"c1\">--  also works</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">cmpBool2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Ord</span><span class=\"w\"> </span><span class=\"n\">Bool</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">compare</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">lt</span>\n</code></pre></div>",
        "id": 449385490,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1720208318
    },
    {
        "content": "<p>I see. So <code>Ord</code> doesn't actually guarantee any proof <code>IsTotal</code>. In that case, how do I prove that a given implementation of <code>LT</code> IsTotal?</p>",
        "id": 449387552,
        "sender_full_name": "Michal Wallace (tangentstorm)",
        "timestamp": 1720209328
    },
    {
        "content": "<p>context: i'm trying to prove a list is sorted after a mergeSort, and it wants proof that the comparison operator IsTotal.</p>",
        "id": 449387865,
        "sender_full_name": "Michal Wallace (tangentstorm)",
        "timestamp": 1720209488
    },
    {
        "content": "<p>Can't you just prove an <code>instance : IsTotal ...</code> for you LE?</p>",
        "id": 449389397,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1720210054
    },
    {
        "content": "<p>I've never worked with them, but from the definitions it looks like a LT should not be IsTotal.</p>",
        "id": 449389533,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1720210090
    },
    {
        "content": "<p>(Of course, LE and LT also come with no proof, but I would expect <code>LT.lt a a</code> to be false.)</p>",
        "id": 449389706,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1720210150
    },
    {
        "content": "<p>Hrm. I proved <code>instance : IsTotal (DSeq d) (·≤·) := ...</code> and now it wants <code>IsTrans</code>, but this seems to be progress.</p>",
        "id": 449391645,
        "sender_full_name": "Michal Wallace (tangentstorm)",
        "timestamp": 1720210867
    },
    {
        "content": "<p>Huh. that was it. </p>\n<p>So for posterity, in my case the proof relied on the fact that I'm wrapping some natural numbers, and the proof looked like this:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">LE</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">DSeq</span><span class=\"w\"> </span><span class=\"n\">d</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">where</span><span class=\"w\"> </span><span class=\"n\">le</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"bp\">.</span><span class=\"n\">val</span><span class=\"bp\">.</span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"bp\">.</span><span class=\"n\">val</span><span class=\"bp\">.</span><span class=\"n\">k</span>\n<span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IsTotal</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">DSeq</span><span class=\"w\"> </span><span class=\"n\">d</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">·≤·</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">IsTotal</span><span class=\"bp\">.</span><span class=\"n\">mk</span>\n<span class=\"w\">  </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span>\n<span class=\"w\">  </span><span class=\"n\">cases</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">cases</span><span class=\"w\"> </span><span class=\"n\">b</span>\n<span class=\"w\">  </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">le_total</span>\n<span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IsTrans</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">DSeq</span><span class=\"w\"> </span><span class=\"n\">d</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">·≤·</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">IsTrans</span><span class=\"bp\">.</span><span class=\"n\">mk</span>\n<span class=\"w\">  </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"n\">c</span>\n<span class=\"w\">  </span><span class=\"n\">cases</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">cases</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">cases</span><span class=\"w\"> </span><span class=\"n\">c</span>\n<span class=\"w\">  </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">le_trans</span>\n</code></pre></div>\n<p>then to prove:<br>\n<code>hsort : List.Sorted (·≤·) seqs</code></p>\n<p>it was suffient to apply <code>seqs := List.mergeSort (·≤·) whatever</code></p>\n<p>and then:</p>\n<p><code>hsort := by apply List.sorted_mergeSort</code></p>",
        "id": 449392427,
        "sender_full_name": "Michal Wallace (tangentstorm)",
        "timestamp": 1720211184
    },
    {
        "content": "<p>Thanks, <span class=\"user-mention\" data-user-id=\"321459\">@Damiano Testa</span> !</p>",
        "id": 449392449,
        "sender_full_name": "Michal Wallace (tangentstorm)",
        "timestamp": 1720211194
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"423842\">Michal Wallace (tangentstorm)</span> has marked this topic as resolved.</p>",
        "id": 449392464,
        "sender_full_name": "Notification Bot",
        "timestamp": 1720211199
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"423842\">Michal Wallace (tangentstorm)</span> has marked this topic as unresolved.</p>",
        "id": 449392607,
        "sender_full_name": "Notification Bot",
        "timestamp": 1720211262
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"423842\">Michal Wallace (tangentstorm)</span> has marked this topic as resolved.</p>",
        "id": 449392623,
        "sender_full_name": "Notification Bot",
        "timestamp": 1720211271
    }
]