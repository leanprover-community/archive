[
    {
        "content": "<p>Who can help me? <br>\nHow to prove that the norm of a matrix power is less than or equal to the power of the matrix normÔºü<br>\nThanks for any guidance!</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">‚Ñï</span><span class=\"o\">}</span>\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">NormedAddCommGroup</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">‚Ñù</span><span class=\"o\">)]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">NormedSpace</span><span class=\"w\"> </span><span class=\"n\">‚Ñù</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">‚Ñù</span><span class=\"o\">)]</span>\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">NormedRing</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Matrix</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">‚Ñù</span><span class=\"o\">)]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">NormedAlgebra</span><span class=\"w\"> </span><span class=\"n\">‚Ñù</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Matrix</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">‚Ñù</span><span class=\"o\">)]</span>\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">NormOneClass</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Matrix</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">‚Ñù</span><span class=\"o\">)]</span>\n\n<span class=\"kn\">example</span><span class=\"w\">  </span><span class=\"o\">{</span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Matrix</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">‚Ñù</span><span class=\"o\">)}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">‚Ñï</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">‚Äñ</span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"bp\">‚Äñ</span><span class=\"w\"> </span><span class=\"bp\">‚â§</span><span class=\"w\"> </span><span class=\"bp\">‚Äñ</span><span class=\"n\">M</span><span class=\"bp\">‚Äñ</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">norm_pow_le</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"c1\">-- why it fails?</span>\n<span class=\"w\">  </span><span class=\"c\">/-</span><span class=\"cm\"> failed to synthesize</span>\n<span class=\"cm\">¬† NormOneClass (Matrix (Fin n) (Fin n) ‚Ñù)</span>\n<span class=\"cm\">¬† -/</span>\n</code></pre></div>",
        "id": 530918159,
        "sender_full_name": "Wenjie Huang",
        "timestamp": 1753520817
    },
    {
        "content": "<p>Which norm do you want?</p>",
        "id": 530919338,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1753521521
    },
    {
        "content": "<p>I want this to hold true for the matrix norm.</p>",
        "id": 530919654,
        "sender_full_name": "Wenjie Huang",
        "timestamp": 1753521707
    },
    {
        "content": "<p>What you've written above says \"let <code>Fin n ‚Üí ‚Ñù</code> have an arbitrary meaning of <code>+</code> that isn't the natural one\".</p>",
        "id": 530919834,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1753521812
    },
    {
        "content": "<p>sorry, I'll delete this condition. I want this for arbitrary matrix norm.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">‚Ñï</span><span class=\"o\">}</span>\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">NormedRing</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Matrix</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">‚Ñù</span><span class=\"o\">)]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">NormedAlgebra</span><span class=\"w\"> </span><span class=\"n\">‚Ñù</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Matrix</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">‚Ñù</span><span class=\"o\">)]</span>\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">NormOneClass</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Matrix</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">‚Ñù</span><span class=\"o\">)]</span>\n\n<span class=\"kn\">example</span><span class=\"w\">  </span><span class=\"o\">{</span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Matrix</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">‚Ñù</span><span class=\"o\">)}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">‚Ñï</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">‚Äñ</span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"bp\">‚Äñ</span><span class=\"w\"> </span><span class=\"bp\">‚â§</span><span class=\"w\"> </span><span class=\"bp\">‚Äñ</span><span class=\"n\">M</span><span class=\"bp\">‚Äñ</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">norm_pow_le</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"c1\">-- why it fails?</span>\n<span class=\"w\">  </span><span class=\"c\">/-</span><span class=\"cm\"> failed to synthesize</span>\n<span class=\"cm\">¬† NormOneClass (Matrix (Fin n) (Fin n) ‚Ñù)</span>\n<span class=\"cm\">¬† -/</span>\n</code></pre></div>",
        "id": 530920130,
        "sender_full_name": "Wenjie Huang",
        "timestamp": 1753521989
    },
    {
        "content": "<p><code>[NormedRing (Matrix (Fin n) (Fin n) ‚Ñù)]</code> says \"let matrices have an arbitrary meaning of <code>*</code> and <code>+</code>\", unfortunately</p>",
        "id": 530921227,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1753522623
    },
    {
        "content": "<p>How can I modify this? I want the matrix to maintain its usual ring structure</p>",
        "id": 530921563,
        "sender_full_name": "Wenjie Huang",
        "timestamp": 1753522820
    },
    {
        "content": "<p>There is currently no existing way to say \"let this existing ring have an arbitrary compatible norm\"</p>",
        "id": 530922773,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1753523526
    },
    {
        "content": "<p>If you're happy to pick a particular matrix norm, then you can make things work</p>",
        "id": 530922815,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1753523555
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Matrix.linftyOpNormedRing#doc\">docs#Matrix.linftyOpNormedRing</a> is one such norm</p>",
        "id": 530923245,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1753523773
    },
    {
        "content": "<p>Thanks for your help.<br>\nI really need a conclusion that holds for any norm, because I want to prove some conclusions about the convergence of matrix sequences. Is there really no way?</p>",
        "id": 530928066,
        "sender_full_name": "Wenjie Huang",
        "timestamp": 1753526540
    },
    {
        "content": "<p>hmm is there a possible argument to be made to unmix norm and ring?</p>",
        "id": 530929493,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1753527379
    },
    {
        "content": "<p>will we ever need to talk about two norms at the same time?</p>",
        "id": 530929531,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1753527409
    },
    {
        "content": "<p>or i guess in this case, two matrix norms (since WithLp wouldnt work on matrix)</p>",
        "id": 530929571,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1753527429
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"941281\">Wenjie Huang</span> <a href=\"#narrow/stream/113489-new-members/topic/Norm.20Problem/near/530928066\">said</a>:</p>\n<blockquote>\n<p>Thanks for your help.<br>\nI really need a conclusion that holds for any norm, because I want to prove some conclusions about the convergence of matrix sequences. Is there really no way?</p>\n</blockquote>\n<p>you can instead prove that in any normed ring, ||x^k|| &lt;= ||x||^k.</p>",
        "id": 530929733,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1753527527
    },
    {
        "content": "<p>it has nothing to do with matrixes</p>",
        "id": 530929758,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1753527536
    },
    {
        "content": "<p>Yes, I also want to separate the matrix ring and the norm, but our proof of the convergence of the matrix sequence requires the properties of both the matrix and the norm. This is a small part of it, which has nothing to do with the specifics of the matrix, but the whole needs</p>",
        "id": 530930875,
        "sender_full_name": "Wenjie Huang",
        "timestamp": 1753528075
    },
    {
        "content": "<p>then why cant you just use the default norm</p>",
        "id": 530931725,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1753528518
    },
    {
        "content": "<p>I want this proof holds universally for any norm, thereby avoiding the need for repeated derivations across different norm specifications.</p>",
        "id": 530932129,
        "sender_full_name": "Wenjie Huang",
        "timestamp": 1753528722
    },
    {
        "content": "<p>but we will only ever have one matrix norm</p>",
        "id": 530932179,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1753528746
    },
    {
        "content": "<p>also, could you tell us what is the actual result you want to prove?</p>",
        "id": 530932245,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1753528775
    },
    {
        "content": "<p>convergence kind of requires completeness</p>",
        "id": 530932277,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1753528793
    },
    {
        "content": "<p>and if you‚Äôre complete, then any norms are equivalent right</p>",
        "id": 530932310,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1753528807
    },
    {
        "content": "<p>I want to prove that the spectral radius of a matrix is less than or equal to any norm of the matrix</p>",
        "id": 530932411,
        "sender_full_name": "Wenjie Huang",
        "timestamp": 1753528855
    },
    {
        "content": "<p>could you be more specific about ‚Äúany norm‚Äù?</p>",
        "id": 530932503,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1753528907
    },
    {
        "content": "<p>What I want to prove is that the matrix norm is compatible with the matrix ring.</p>",
        "id": 530932535,
        "sender_full_name": "Wenjie Huang",
        "timestamp": 1753528924
    },
    {
        "content": "<p>Can't you just arbitrarily scale the norm to be smaller than the spectral radius?</p>",
        "id": 530932541,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1753528927
    },
    {
        "content": "<p>If it really is \"any\" norm</p>",
        "id": 530932731,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1753529023
    },
    {
        "content": "<p>can you define the ‚Äúnorm‚Äùs in your sentence?</p>",
        "id": 530932871,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1753529089
    },
    {
        "content": "<p>can you make a statement in maths without using the word norm?</p>",
        "id": 530932911,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1753529105
    },
    {
        "content": "<p>These is the  proposition I want to prove, <br>\n<a href=\"/user_uploads/3121/r8rHxlnVO3TeH9w9V0u5kF9w/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/r8rHxlnVO3TeH9w9V0u5kF9w/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"829x115\" src=\"/user_uploads/thumbnail/3121/r8rHxlnVO3TeH9w9V0u5kF9w/image.png/840x560.webp\"></a></div>",
        "id": 530933006,
        "sender_full_name": "Wenjie Huang",
        "timestamp": 1753529153
    },
    {
        "content": "<p>That looks like it's referring to some particular norm which was defined earlier</p>",
        "id": 530933071,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1753529199
    },
    {
        "content": "<p>without the word norm</p>",
        "id": 530933082,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1753529208
    },
    {
        "content": "<p><a href=\"/user_uploads/3121/fphFNue0sXNIdRXwL47u4hw_/image.png\">image.png</a><br>\nIt's all definition about norm.</p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/fphFNue0sXNIdRXwL47u4hw_/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"1284x305\" src=\"/user_uploads/thumbnail/3121/fphFNue0sXNIdRXwL47u4hw_/image.png/840x560.webp\"></a></div>",
        "id": 530933352,
        "sender_full_name": "Wenjie Huang",
        "timestamp": 1753529374
    },
    {
        "content": "<p>seems like 2 is the key point</p>",
        "id": 530933651,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1753529518
    },
    {
        "content": "<p>in current mathlib there is no way to talk about an arbitrary compatible norm i‚Äôm afraid</p>",
        "id": 530933749,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1753529566
    },
    {
        "content": "<p>could you explain why we might want different matrix norms?</p>",
        "id": 530933812,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1753529599
    },
    {
        "content": "<p>Oh, so we have to pick a specific norm</p>",
        "id": 530933858,
        "sender_full_name": "Wenjie Huang",
        "timestamp": 1753529618
    },
    {
        "content": "<p>it‚Äôs not impossible to make a new typeclass of compatible norms</p>",
        "id": 530933861,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1753529619
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"308899\">@Yakov Pechersky</span> has done excellent work in the valuation library, (but it‚Äôs not about norm)</p>",
        "id": 530933954,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1753529662
    },
    {
        "content": "<p>I am currently working on the formalization of numerical algebra and have encountered many problems related to norms.</p>",
        "id": 530934023,
        "sender_full_name": "Wenjie Huang",
        "timestamp": 1753529698
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"941281\">@Wenjie Huang</span> if you really feel like this is the right thing to do, i would suggest you to define a new typeclass</p>",
        "id": 530934035,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1753529703
    },
    {
        "content": "<p>or a new structure</p>",
        "id": 530934052,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1753529713
    },
    {
        "content": "<p>i don‚Äôt have a computer right now</p>",
        "id": 530934105,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1753529740
    },
    {
        "content": "<p>OK, I'll try it and thank you for your suggestions</p>",
        "id": 530934114,
        "sender_full_name": "Wenjie Huang",
        "timestamp": 1753529747
    },
    {
        "content": "<p>so the pseudocode looks like</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">structure</span><span class=\"w\"> </span><span class=\"n\">Norm</span><span class=\"bp\">‚Äô</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">k</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">NormedField</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">E</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Module</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"n\">E</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">norm</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">E</span><span class=\"w\"> </span><span class=\"bp\">-&gt;</span><span class=\"w\"> </span><span class=\"n\">R</span>\n<span class=\"w\">  </span><span class=\"n\">axioms</span><span class=\"bp\">‚Ä¶</span>\n</code></pre></div>",
        "id": 530934190,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1753529785
    },
    {
        "content": "<p>refer to how NormedSpace does it, but make it a structure instead of class</p>",
        "id": 530934316,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1753529849
    },
    {
        "content": "<p>Ok , I'll refer to it</p>",
        "id": 530934417,
        "sender_full_name": "Wenjie Huang",
        "timestamp": 1753529900
    },
    {
        "content": "<p>which book is this?</p>",
        "id": 530934677,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1753530030
    },
    {
        "content": "<p>I am trying to formalize many classic theorems in numerical linear algebra, using the textbook</p>",
        "id": 530935031,
        "sender_full_name": "Wenjie Huang",
        "timestamp": 1753530208
    },
    {
        "content": "<p>We already have a similar structure as <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Seminorm#doc\">docs#Seminorm</a></p>",
        "id": 530936595,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1753530968
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=AlgebraNorm#doc\">docs#AlgebraNorm</a> ?</p>",
        "id": 530936674,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1753531014
    },
    {
        "content": "<p>That looks like what you want</p>",
        "id": 530936904,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1753531130
    },
    {
        "content": "<p>OK, I'll try it</p>",
        "id": 530937635,
        "sender_full_name": "Wenjie Huang",
        "timestamp": 1753531468
    },
    {
        "content": "<p>what is the name of the book?</p>",
        "id": 530939605,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1753532549
    },
    {
        "content": "<p>This is a Chinese textbook called Numerical Linear Algebra<br>\n<a href=\"/user_uploads/3121/CQf3aOq1Pw-E2ZQQ8DHJTffJ/image.png\">image.png</a><a href=\"https://img9.doubanio.com/view/subject/l/public/s24944214.jpg\">https://img9.doubanio.com/view/subject/l/public/s24944214.jpg</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/CQf3aOq1Pw-E2ZQQ8DHJTffJ/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"350x500\" src=\"/user_uploads/thumbnail/3121/CQf3aOq1Pw-E2ZQQ8DHJTffJ/image.png/840x560.webp\"></a></div><div class=\"message_inline_image\"><a href=\"https://img9.doubanio.com/view/subject/l/public/s24944214.jpg\"><img src=\"https://uploads.zulipusercontent.net/1b2ac535aa38f7e10a5a573c0089f47ad282c525/68747470733a2f2f696d67392e646f7562616e696f2e636f6d2f766965772f7375626a6563742f6c2f7075626c69632f7332343934343231342e6a7067\"></a></div>",
        "id": 530941441,
        "sender_full_name": "Wenjie Huang",
        "timestamp": 1753533548
    },
    {
        "content": "<p>So is something like this?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">lemma_1</span>\n<span class=\"w\">    </span><span class=\"o\">{</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Fintype</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">DecidableEq</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Matrix</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">‚ÑÇ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">AlgebraNorm</span><span class=\"w\"> </span><span class=\"n\">‚ÑÇ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Matrix</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">‚ÑÇ</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">spectralRadius</span><span class=\"w\"> </span><span class=\"n\">‚ÑÇ</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">toReal</span><span class=\"w\"> </span><span class=\"bp\">‚â§</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n</code></pre></div>",
        "id": 530942667,
        "sender_full_name": "Wenjie Huang",
        "timestamp": 1753534217
    },
    {
        "content": "<p>Why don't we have <code>AlgebraNorm.toNormedAlgebra</code>, simliar to <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=RingNorm.toNormedRing#doc\">docs#RingNorm.toNormedRing</a>.</p>",
        "id": 530945973,
        "sender_full_name": "Yiming Fu",
        "timestamp": 1753535967
    },
    {
        "content": "<p>That looks like a mistake to me</p>",
        "id": 531118281,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1753614507
    },
    {
        "content": "<p>I think we should have that, PR welcome</p>",
        "id": 531118294,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1753614516
    },
    {
        "content": "<p>But as someone mentioned in the other thread, these also need the forgetful inheritance versions that replace the topology, uniformity or bornology.</p>",
        "id": 531210427,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1753649453
    },
    {
        "content": "<p>Or rather, the ones that don't replace it and use an existing instance</p>",
        "id": 531211180,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1753649756
    },
    {
        "content": "<p>indeed, what I mean was: allow the user to replace the default inherited topology with the pre-existing one.</p>",
        "id": 531219007,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1753653013
    },
    {
        "content": "<p>can we have both a canonical instance but also allow for other compatible norms?</p>",
        "id": 531219660,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1753653275
    },
    {
        "content": "<p>this is exactly the kind of issues we ran into in local class field theory</p>",
        "id": 531219718,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1753653302
    },
    {
        "content": "<p>(yes, there are other solutions, but I think I would be happiest with this approach instead)</p>",
        "id": 531219812,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1753653333
    },
    {
        "content": "<p>I'm not sure what you mean. You want a <code>Norm</code> as an <code>instance</code>, but you also want access to other norms? You need type synonyms for the other norms. Or else you need to use something like <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Seminorm#doc\">docs#Seminorm</a> which isn't a class.</p>",
        "id": 531220124,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1753653461
    },
    {
        "content": "<p>i'm talking about adding onto the existing mathlib structure</p>",
        "id": 531220199,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1753653496
    },
    {
        "content": "<p>Adding <em>what</em> onto the existing structure?</p>",
        "id": 531220244,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1753653513
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">axiom</span><span class=\"w\"> </span><span class=\"n\">‚Ñù</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span>\n\n<span class=\"kn\">structure</span><span class=\"w\"> </span><span class=\"n\">Norm</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">toFun</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">‚Ñù</span>\n\n<span class=\"kn\">axiom</span><span class=\"w\"> </span><span class=\"n\">supNorm</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Norm</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">‚Ñù</span><span class=\"o\">)</span>\n\n<span class=\"kn\">noncomputable</span><span class=\"w\"> </span><span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">n</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Inhabited</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Norm</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">‚Ñù</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">default</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">supNorm</span><span class=\"w\"> </span><span class=\"n\">n</span>\n\n<span class=\"kn\">class</span><span class=\"w\"> </span><span class=\"n\">CompleteSpace</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">norm</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Norm</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">default</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">exists_limit_of_cauchy</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">2</span>\n\n<span class=\"kn\">axiom</span><span class=\"w\"> </span><span class=\"n\">L2Norm</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Norm</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">‚Ñù</span><span class=\"o\">)</span>\n\n<span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"n\">complete_supNorm</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">CompleteSpace</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">‚Ñù</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n<span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"n\">complete_L2Norm</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">CompleteSpace</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">‚Ñù</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">L2Norm</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n\n<span class=\"bp\">#</span><span class=\"n\">print</span><span class=\"w\"> </span><span class=\"n\">complete_supNorm</span>\n<span class=\"bp\">#</span><span class=\"n\">print</span><span class=\"w\"> </span><span class=\"n\">complete_L2Norm</span>\n</code></pre></div>",
        "id": 531220909,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1753653770
    },
    {
        "content": "<p>I still don't understand what you want to do by looking at this code.</p>\n<ol>\n<li><code>CompleteSpace</code> is about uniformities, not norms exactly.</li>\n<li>In your example, the uniformities induced by these norms are provably equal</li>\n<li>You can still have type synonyms</li>\n<li>In fact, we <em>do</em> have the type synonym <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=WithLp#doc\">docs#WithLp</a> (or <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=PiLp#doc\">docs#PiLp</a>, or <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=EuclideanSpace#doc\">docs#EuclideanSpace</a>), and <em>moreover</em>, these type synonyms have been constructed with the explicit intent to make the uniformities not just provably equal, but definitionally equal.</li>\n</ol>",
        "id": 531229164,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1753657302
    },
    {
        "content": "<p>So <code>CompleteSpace (EuclideanSpace ùïú n)</code> is either already in Mathlib, or else trivial to prove.</p>",
        "id": 531229261,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1753657345
    },
    {
        "content": "<p>It definitely would be a shame to have to commit to a specific norm; one of the cool/useful/surprising properties of matrix norms is that it almost never matters which one you pick</p>",
        "id": 531281435,
        "sender_full_name": "Robert Maxton",
        "timestamp": 1753682440
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"197836\">@Jireh Loreaux</span> I want to allow other norms on the same type without introducing type synonyms.</p>",
        "id": 531306639,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1753691353
    },
    {
        "content": "<p>But what does it even mean to <em>allow other norms</em>? What do you want to <em>do</em> with them exactly? And why doesn't a type synonym (or a local instance) suffice?</p>",
        "id": 531353020,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1753704795
    },
    {
        "content": "<p>I'm not sure if this would address your desires, but potentially, we could have a predicate on <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Seminorm#doc\">docs#Seminorm</a> called <code>Seminorm.IsCompatible</code> saying that the uniformity induced by a given seminorm is equal to the existing uniformity.</p>",
        "id": 531354778,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1753705257
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"359992\">Robert Maxton</span> <a href=\"#narrow/stream/113489-new-members/topic/Norm.20Problem/near/531281435\">said</a>:</p>\n<blockquote>\n<p>it almost never matters which one you pick</p>\n</blockquote>\n<p>I beg to differ. I would argue that this is only applicable if you all you care about is properties generically true in Banach algebras.</p>",
        "id": 531356101,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1753705614
    },
    {
        "content": "<p>Possible API:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Uniformity</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">PseudoMetricSpace</span><span class=\"bp\">.</span><span class=\"n\">isEquiv</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">PseudoMetricSpace</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">f</span><span class=\"bp\">.</span><span class=\"n\">toUniformSpace</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"bp\">.</span><span class=\"n\">toUniformSpace</span>\n\n<span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">PseudoMetricSpace</span><span class=\"bp\">.</span><span class=\"n\">isEquiv</span><span class=\"bp\">.</span><span class=\"n\">eq_uniformity</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">PseudoMetricSpace</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">}</span>\n<span class=\"w\">      </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"bp\">.</span><span class=\"n\">isEquiv</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">ùì§</span><span class=\"o\">[</span><span class=\"n\">f</span><span class=\"bp\">.</span><span class=\"n\">toUniformSpace</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">ùì§</span><span class=\"o\">[</span><span class=\"n\">g</span><span class=\"bp\">.</span><span class=\"n\">toUniformSpace</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n\n<span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">PseudoMetricSpace</span><span class=\"bp\">.</span><span class=\"n\">isEquiv</span><span class=\"bp\">.</span><span class=\"n\">eq_topology</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">PseudoMetricSpace</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"bp\">.</span><span class=\"n\">isEquiv</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">f</span><span class=\"bp\">.</span><span class=\"n\">toUniformSpace</span><span class=\"bp\">.</span><span class=\"n\">toTopologicalSpace</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"bp\">.</span><span class=\"n\">toUniformSpace</span><span class=\"bp\">.</span><span class=\"n\">toTopologicalSpace</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n\n<span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">PseudoMetricSpace</span><span class=\"bp\">.</span><span class=\"n\">isEquiv</span><span class=\"bp\">.</span><span class=\"n\">of_normedField</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">NormedField</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">NNReal</span><span class=\"o\">}</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">‚àÄ</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"bp\">.</span><span class=\"n\">norm</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">‚â§</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"bp\">.</span><span class=\"n\">norm</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">‚àß</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"bp\">.</span><span class=\"n\">norm</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">‚â§</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"bp\">.</span><span class=\"n\">norm</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">f</span><span class=\"bp\">.</span><span class=\"n\">isEquiv</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"bp\">.</span><span class=\"n\">toPseudoMetricSpace</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n\n<span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">PseudoMetricSpace</span><span class=\"bp\">.</span><span class=\"n\">isEquiv</span><span class=\"bp\">.</span><span class=\"n\">of_normedField_rpow</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">NormedField</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">Œ±</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">NNReal</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hŒ±</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Œ±</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">‚àÄ</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"bp\">.</span><span class=\"n\">norm</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"n\">Œ±</span><span class=\"bp\">.</span><span class=\"n\">toReal</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"bp\">.</span><span class=\"n\">norm</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">f</span><span class=\"bp\">.</span><span class=\"n\">isEquiv</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"bp\">.</span><span class=\"n\">toPseudoMetricSpace</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n</code></pre></div>",
        "id": 531369091,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1753708942
    },
    {
        "content": "<p>A possible application (if I understand correctly): one has an extension <code>L/K</code> of nonarch local fields, and wants to emply <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=spectralNorm_unique_field_norm_ext#doc\">docs#spectralNorm_unique_field_norm_ext</a>. It's not obvious that the preexisting norm instance is such that the hypothesis <code>‚àÄ (x : K), f ((algebraMap K L) x) = ‚Äñx‚Äñ</code> holds true. However, by equivalence of norms over normed fields, there is another norm where that will be true, under some power scaling <code>Œ±</code>. So getting that <code>Œ±</code> allows one to construct the desired topological hom from K to L.</p>",
        "id": 531369912,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1753709163
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110064\">Kenny Lau</span> <a href=\"#narrow/channel/113489-new-members/topic/Norm.20Problem/near/531306639\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"197836\">Jireh Loreaux</span> I want to allow other norms on the same type without introducing type synonyms.</p>\n</blockquote>\n<p>In <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Analysis/Matrix.html\">https://leanprover-community.github.io/mathlib4_docs/Mathlib/Analysis/Matrix.html</a> we have three different norms on Matrix (with no type synonyms)</p>",
        "id": 531407497,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1753718956
    },
    {
        "content": "<p>That file needs some design work; my goal at the time was just to show that we had the machinery to build those instances</p>",
        "id": 531413680,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1753720982
    },
    {
        "content": "<p>At minimum we should scope each collection of instances to make it easier to enable them all at once</p>",
        "id": 531413749,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1753721008
    },
    {
        "content": "<p>Type synonyms are a little annoying because matrix notation like transpose is tied to Matrix.transpose and not a notation class.</p>",
        "id": 531414006,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1753721093
    },
    {
        "content": "<p>Definitely they should be scoped instances.</p>",
        "id": 531421725,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1753723589
    },
    {
        "content": "<p>Indeed, I'm familiar with the pain of type synonyms on <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Matrix#doc\">docs#Matrix</a> (see, for instance, <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=CStarMatrix#doc\">docs#CStarMatrix</a>). <span class=\"user-mention\" data-user-id=\"311453\">@Fr√©d√©ric Dupuis</span> suggested to me privately the possibility of a <code>MatrixLike</code> type class. At the time I dismissed it thinking there wouldn't be sufficient shared API, but perhaps this was stupid.</p>",
        "id": 531421754,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1753723595
    },
    {
        "content": "<p>But as for <span class=\"user-mention\" data-user-id=\"110064\">@Kenny Lau</span> 's problems, I'm <em>still</em> not sure exactly what they are. I want a concrete example of something he wants to do, but is obstructed, or otherwise unjustifiably hindered, because he can't work with multiple norms simultaneously.</p>\n<p>Something that comes to my mind: it's quite inconvenient (without resorting to type synonyms) to say that all norms on a (fixed) finite dimensional space are equivalent. I mean, sure, you can say <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=LinearEquiv.toContinuousLinearEquiv#doc\">docs#LinearEquiv.toContinuousLinearEquiv</a>, but that has not much content when you want <code>E = F</code> but possibly different norms and you consider <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=LinearEquiv.refl#doc\">docs#LinearEquiv.refl</a> .</p>",
        "id": 531423838,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1753724312
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"197836\">@Jireh Loreaux</span> it's what Yakov pointed out. In the setting of local fields, there's an arbitrary norm on K and L (which yes, you can solve with <code>attribute [-instance]</code>, but that also removes the uniform structure etc.), and you can't prove that L is a normed vector space over K because their norms don't exactly agree</p>",
        "id": 531542429,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1753776820
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"197836\">Jireh Loreaux</span> <a href=\"#narrow/channel/113489-new-members/topic/Norm.20Problem/near/531421725\">said</a>:</p>\n<blockquote>\n<p>Definitely they should be scoped instances.</p>\n</blockquote>\n<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/27855\">#27855</a></p>",
        "id": 532387602,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1754087347
    }
]