[
    {
        "content": "<p>The following step in the solution of an exercise in <a href=\"https://leanprover-community.github.io/mathematics_in_lean/\">#mil</a>:</p>\n<p><a href=\"https://github.com/leanprover-community/mathematics_in_lean/blob/91997575e78e38be03267aa26c90de4dfe2210ce/MIL/C10_Topology/solutions/Solutions_S03_Topological_Spaces.lean#L140\">https://github.com/leanprover-community/mathematics_in_lean/blob/91997575e78e38be03267aa26c90de4dfe2210ce/MIL/C10_Topology/solutions/Solutions_S03_Topological_Spaces.lean#L140</a></p>\n<p>invokes the theorem <code>tendsto_nhds_unique</code>, which needs the assumption [T2Space Y]. But at that point, only [T3Space Y] is in the context of the proof state.  How does Lean infer [T2Space Y] from [T3Space Y]?</p>",
        "id": 487169065,
        "sender_full_name": "Ching-Tsun Chou",
        "timestamp": 1733810990
    },
    {
        "content": "<p>You have <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=T3Space.t25Space#doc\">docs#T3Space.t25Space</a> and <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=T25Space.t2Space#doc\">docs#T25Space.t2Space</a>. These are automatically found bu typeclass inference.</p>",
        "id": 487174700,
        "sender_full_name": "Etienne Marion",
        "timestamp": 1733813962
    },
    {
        "content": "<p>Your links don't work for me.  Do you mean the following?</p>\n<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Topology/Separation/Basic.html#T3Space.t25Space\">https://leanprover-community.github.io/mathlib4_docs/Mathlib/Topology/Separation/Basic.html#T3Space.t25Space</a></p>\n<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Topology/Separation/Basic.html#T25Space.t2Space\">https://leanprover-community.github.io/mathlib4_docs/Mathlib/Topology/Separation/Basic.html#T25Space.t2Space</a></p>",
        "id": 487177173,
        "sender_full_name": "Ching-Tsun Chou",
        "timestamp": 1733815135
    },
    {
        "content": "<p>Yes sorry I miswrote the names</p>",
        "id": 487180158,
        "sender_full_name": "Etienne Marion",
        "timestamp": 1733816422
    },
    {
        "content": "<p>Thanks!</p>",
        "id": 487184048,
        "sender_full_name": "Ching-Tsun Chou",
        "timestamp": 1733817952
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110637\">Ching-Tsun Chou</span> has marked this topic as resolved.</p>",
        "id": 487184066,
        "sender_full_name": "Notification Bot",
        "timestamp": 1733817959
    },
    {
        "content": "<p>PS <span class=\"user-mention\" data-user-id=\"110637\">@Ching-Tsun Chou</span> here is how you can find out the answer by asking Lean directly:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">TopologicalSpace</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">T3Space</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">]</span>\n\n<span class=\"bp\">#</span><span class=\"n\">synth</span><span class=\"w\"> </span><span class=\"n\">T2Space</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"c1\">-- T25Space.t2Space</span>\n<span class=\"bp\">#</span><span class=\"n\">synth</span><span class=\"w\"> </span><span class=\"n\">T25Space</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"c1\">-- T3Space.t25Space</span>\n</code></pre></div>\n<p>You can hover on the output of <code>#synth</code> in the infoview to learn more about the proofs of these results e.g. by clicking on them.</p>",
        "id": 487238916,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1733834424
    },
    {
        "content": "<p>Thanks!  The type class mechanism is still rather mysterious to me.  In particular, is there a way to ask Lean to dump the type class hierarchy in effect?</p>",
        "id": 487329441,
        "sender_full_name": "Ching-Tsun Chou",
        "timestamp": 1733860109
    },
    {
        "content": "<p>I'm not sure what such a dump should look like (format-wise). But you can search for \"instance\" in mathlib, and find many edges in the graph.</p>",
        "id": 488044323,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1733906836
    },
    {
        "content": "<p>There's an <code>#instances</code> command to search for all instances that give a particular class. It doesn't tell you whether they're actually applicable.</p>",
        "id": 488191667,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1733952420
    },
    {
        "content": "<p>This turns up 7 instances:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">TopologicalSpace</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">]</span>\n<span class=\"bp\">#</span><span class=\"n\">instances</span><span class=\"w\"> </span><span class=\"n\">T2Space</span><span class=\"w\"> </span><span class=\"n\">X</span>\n<span class=\"c\">/-</span>\n<span class=\"cm\">TotallySeparatedSpace.t2Space.{u_1} {X : Type u_1} [TopologicalSpace X] [TotallySeparatedSpace X] : T2Space X</span>\n<span class=\"cm\">(prio 100) PriestleySpace.toT2Space.{u_1} {α : Type u_1} [TopologicalSpace α] [PartialOrder α] [PriestleySpace α] :</span>\n<span class=\"cm\">  T2Space α</span>\n<span class=\"cm\">(prio 100) TopologicalSpace.t2Space_of_metrizableSpace.{u_2} {X : Type u_2} [TopologicalSpace X]</span>\n<span class=\"cm\">  [TopologicalSpace.MetrizableSpace X] : T2Space X</span>\n<span class=\"cm\">(prio 100) T25Space.t2Space.{u_1} {X : Type u_1} [TopologicalSpace X] [T25Space X] : T2Space X</span>\n<span class=\"cm\">(prio 100) DiscreteTopology.toT2Space.{u_1} {X : Type u_1} [TopologicalSpace X] [DiscreteTopology X] : T2Space X</span>\n<span class=\"cm\">(prio 90) OrderClosedTopology.to_t2Space.{u} {α : Type u} [TopologicalSpace α] [PartialOrder α]</span>\n<span class=\"cm\">  [t : OrderClosedTopology α] : T2Space α</span>\n<span class=\"cm\">(prio 80) instT2SpaceOfR1SpaceOfT0Space.{u_1} {X : Type u_1} [TopologicalSpace X] [R1Space X] [T0Space X] : T2Space X</span>\n<span class=\"cm\">-/</span>\n</code></pre></div>\n<p>You can also do <code>#instances T2Space</code>, which turns up 50 instances. There are a lot of instances about specific expressions rather than generic X.</p>",
        "id": 488191971,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1733952536
    },
    {
        "content": "<p><code>#instances</code> does not work for me at all:</p>\n<blockquote>\n<p>unexpected token '#'; expected command</p>\n</blockquote>\n<p>Is there some module that I need to import?</p>",
        "id": 488198734,
        "sender_full_name": "Ching-Tsun Chou",
        "timestamp": 1733955261
    },
    {
        "content": "<p>Mathlib?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">TopologicalSpace</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">]</span>\n<span class=\"bp\">#</span><span class=\"n\">instances</span><span class=\"w\"> </span><span class=\"n\">T2Space</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"c1\">-- works fine for me</span>\n</code></pre></div>",
        "id": 488198795,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1733955296
    },
    {
        "content": "<p>I have it.  I am in the Lean file that is sec.10.3 of <a href=\"https://leanprover-community.github.io/mathematics_in_lean/\">#mil</a>.</p>",
        "id": 488198908,
        "sender_full_name": "Ching-Tsun Chou",
        "timestamp": 1733955344
    },
    {
        "content": "<p>Maybe your version of mathlib is too old?</p>",
        "id": 488198996,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1733955371
    },
    {
        "content": "<p>I have version 4.13.0.</p>",
        "id": 488199112,
        "sender_full_name": "Ching-Tsun Chou",
        "timestamp": 1733955429
    },
    {
        "content": "<p>Right-clicking on <code>#instances</code> I see that currently it's in <code>Batteries.Tactic.Instances</code> and it's been there for 18 months.</p>",
        "id": 488199116,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1733955434
    },
    {
        "content": "<p>Mathlib doesn't have versions, that's the Lean version, and you don't really \"have\" a Lean version, the version of Lean which you run in a project depends on which project you're running (i.e. I \"have\" about 30 different versions of Lean on this computer). Does <code>#eval Lean.versionString</code> work for you?</p>",
        "id": 488199272,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1733955494
    },
    {
        "content": "<p>It works.  It replies \"4.13.0\".</p>",
        "id": 488199385,
        "sender_full_name": "Ching-Tsun Chou",
        "timestamp": 1733955561
    },
    {
        "content": "<p>Then that is indeed a bit odd. Does <code>import Batteries.Tactic.Instances</code> fix it?</p>",
        "id": 488512805,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1733955592
    },
    {
        "content": "<p>Maybe throw <code>import Batteries.Tactic.Instances</code> at the top of the file</p>",
        "id": 488512865,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1733955603
    },
    {
        "content": "<p>The import fixed it.  Thanks!</p>",
        "id": 488512975,
        "sender_full_name": "Ching-Tsun Chou",
        "timestamp": 1733955649
    },
    {
        "content": "<p>Interesting! So Mathlib must have changed recently to import the Batteries file. I vaguely remembered some discussion about this.</p>",
        "id": 488513508,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1733955918
    },
    {
        "content": "<p>Now people might finally know about <code>#instances</code> after those 18 months :-)</p>",
        "id": 488514081,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1733956173
    },
    {
        "content": "<p>I was going to reply \"when I want to see the instances of <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=T2Space#doc\">docs#T2Space</a> in mathlib, I just click on that link and then unfold the \"Instances\" triangle\". I just tried this though, and there were none :-)</p>",
        "id": 488518779,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1733958559
    },
    {
        "content": "<p>Uh oh.</p>\n<p>Well, maybe doc-gen is smart enough to know that you don't <em>really</em> want to see the instances ;-)</p>",
        "id": 488519983,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1733959204
    },
    {
        "content": "<p>Something to do with doc-gen is broken at the minute (e.g. I can't bump mathlib on FLT and Mario seemed to say it was something to do with doc-gen) so maybe we check again when it's fixed?</p>",
        "id": 488526247,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1733961749
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"395550\">@Henrik Böving</span> </p>\n<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/channel/113489-new-members/topic/.E2.9C.94.20How.20does.20the.20inference.20T3Space.20.3D.3E.20T2Space.20work.3F/near/488518779\">said</a>:</p>\n<blockquote>\n<p>I was going to reply \"when I want to see the instances of <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=T2Space#doc\">docs#T2Space</a> in mathlib, I just click on that link and then unfold the \"Instances\" triangle\". I just tried this though, and there were none :-)</p>\n</blockquote>",
        "id": 488622396,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1734006688
    },
    {
        "content": "<p>Yeah there is an issue on doc-gen about this, prop valued instances changed from definition to theorem</p>",
        "id": 488622567,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1734006730
    },
    {
        "content": "<p>Also btw, I set a trigger word on doc-gen so I always get notified when someone says doc-gen anywhere :P</p>",
        "id": 488622714,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1734006787
    },
    {
        "content": "<p>Oh, neat! Is that a Zulip feature?</p>",
        "id": 488622796,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1734006818
    },
    {
        "content": "<p>Oh I found it. Personal Settings &gt; Alert Words.</p>",
        "id": 488622953,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1734006855
    },
    {
        "content": "<p>fixed</p>",
        "id": 488652133,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1734015439
    }
]