[
    {
        "content": "<p>What’s the recommended way to list all identifiers available (under the current imports)?</p>\n<p>For example, with no imports I’d expect the list to include things like <code>True.intro</code> (constructor), <code>rfl</code> (definition), <code>Nat</code>(inductive type), <code>Eq.trans</code> (theorem), and so on. Once I add <code>import Mathlib</code>, it should also show entries such as <code>npowBinRec.go_spec</code> (a random Mathlib theorem), etc.</p>\n<p>In other words, I want to enumerate everything I can successfully do <code>#check &lt;identifier&gt;</code> on.</p>",
        "id": 513852330,
        "sender_full_name": "Isak Colboubrani",
        "timestamp": 1745409760
    },
    {
        "content": "<p>You can list all \"constants\" pretty easily, by accessing the environment</p>",
        "id": 513857772,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1745411182
    },
    {
        "content": "<p>Here's an example</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Lean</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Lean</span>\n\n<span class=\"n\">run_meta</span><span class=\"w\"> </span><span class=\"k\">do</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">env</span><span class=\"w\"> </span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">getEnv</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">consts</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">env</span><span class=\"bp\">.</span><span class=\"n\">constants</span><span class=\"bp\">.</span><span class=\"n\">toList</span>\n\n<span class=\"w\">  </span><span class=\"c1\">-- to exclude compiler constants like `instMonadOption._cstage1`</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">safeConsts</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">consts</span><span class=\"bp\">.</span><span class=\"n\">filter</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">info</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"bp\">!</span><span class=\"n\">info</span><span class=\"bp\">.</span><span class=\"n\">snd</span><span class=\"bp\">.</span><span class=\"n\">isUnsafe</span>\n\n<span class=\"w\">  </span><span class=\"c1\">-- to exclude private definitions, like `_private.Lean.Meta.Basic.0.Lean.Meta.mkFreshExprMVarImpl`</span>\n<span class=\"w\">  </span><span class=\"c1\">-- auxillary definitions, like `Init.PropLemmas._auxLemma.63`</span>\n<span class=\"w\">  </span><span class=\"c1\">-- and internal definitions, like `Std.DTreeMap.Internal.Impl.get?`</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">safePublicConsts</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">safeConsts</span><span class=\"bp\">.</span><span class=\"n\">filter</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">info</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"bp\">!</span><span class=\"n\">info</span><span class=\"bp\">.</span><span class=\"n\">fst</span><span class=\"bp\">.</span><span class=\"n\">isInternalOrNum</span>\n\n\n<span class=\"w\">  </span><span class=\"n\">logInfo</span><span class=\"w\"> </span><span class=\"n\">m!</span><span class=\"s2\">\"length : {safePublicConsts.length}\"</span>\n<span class=\"w\">  </span><span class=\"n\">logInfo</span><span class=\"w\"> </span><span class=\"bp\">&lt;|</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">safePublicConsts</span><span class=\"bp\">.</span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">MessageData</span><span class=\"bp\">.</span><span class=\"n\">ofConstName</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"bp\">.</span><span class=\"n\">fst</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">take</span><span class=\"w\"> </span><span class=\"mi\">50</span>\n</code></pre></div>",
        "id": 513859402,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1745411624
    },
    {
        "content": "<p>This will not be a full list of all the things you can do <code>#check &lt;identifier&gt;</code> on, because some theorems are created on first use.</p>",
        "id": 513859659,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1745411681
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"816344\">@Aaron Liu</span> Thanks a lot. That is precisely what I was looking for!</p>",
        "id": 513956661,
        "sender_full_name": "Isak Colboubrani",
        "timestamp": 1745439354
    },
    {
        "content": "<p>With <code>import Lean</code> I get a list of 78,748 identifiers, and when adding <code>import Mathlib</code> I'm getting a total of 381,410 identifiers.</p>",
        "id": 513956716,
        "sender_full_name": "Isak Colboubrani",
        "timestamp": 1745439363
    },
    {
        "content": "<p>Importing Mathlib raises the identifier count by 302,662 (381,410 - 78,748). By comparison, the <a href=\"https://leanprover-community.github.io/mathlib_stats.html\">Mathlib statistics page</a> reports a total of 309,920 entries—103,068 definitions and 206,852 theorems. A 2 % discrepancy feels quite reasonable given the applied filtering.</p>",
        "id": 513961361,
        "sender_full_name": "Isak Colboubrani",
        "timestamp": 1745441124
    }
]