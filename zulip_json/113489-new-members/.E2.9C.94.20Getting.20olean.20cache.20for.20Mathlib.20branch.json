[
    {
        "content": "<p>Hi all,<br>\nCurrently, I have a branch of mathlib that I'm building upon in a different project. (That is, the branch of mathlib is the <code>_target</code> of this other project). However, I've currently done it in the super hacky way of copy/pasting the stuff in my mathlib branch into the <code>_target</code> of my other project. Is there a way to get a specific branch of mathlib along with its oleans when I'm not on that branch?<br>\nI'm imaging something like <code>$ leanproject get-cache master/orthonormal_basis</code> but I don't know what the right syntax would be.</p>",
        "id": 272432716,
        "sender_full_name": "Daniel Packer",
        "timestamp": 1645206183
    },
    {
        "content": "<p>You should be able to specify the mathlib commit id you want in the <code>_target</code> in the <code>leanpkg.toml</code>.</p>",
        "id": 272436196,
        "sender_full_name": "Anne Baanen",
        "timestamp": 1645207634
    },
    {
        "content": "<p>Awesome! And then I just run <code>$ leanproject get-mathlib-cache</code>?</p>",
        "id": 272436387,
        "sender_full_name": "Daniel Packer",
        "timestamp": 1645207716
    },
    {
        "content": "<p>So the dependencies should look something like:</p>\n<div class=\"codehilite\" data-code-language=\"TOML\"><pre><span></span><code><span class=\"k\">[dependencies]</span><span class=\"w\"></span>\n<span class=\"n\">mathlib</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"n\">git</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"s\">\"https://github.com/leanprover-community/mathlib\"</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">rev</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"s\">\"d6d2d7e5017f89b0ca8e9fe18e61980efdbd6e0b\"</span><span class=\"p\">}</span><span class=\"w\"></span>\n</code></pre></div>",
        "id": 272436406,
        "sender_full_name": "Anne Baanen",
        "timestamp": 1645207724
    },
    {
        "content": "<p>Yes, I believe leanproject will detect that the dependency version changed and update the <code>_target</code> folder automatically</p>",
        "id": 272436497,
        "sender_full_name": "Anne Baanen",
        "timestamp": 1645207782
    },
    {
        "content": "<p>Thanks a ton!</p>",
        "id": 272437706,
        "sender_full_name": "Daniel Packer",
        "timestamp": 1645208351
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"467358\">Daniel Packer</span> has marked this topic as resolved.</p>",
        "id": 272437712,
        "sender_full_name": "Notification Bot",
        "timestamp": 1645208355
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"467358\">Daniel Packer</span> has marked this topic as unresolved.</p>",
        "id": 272438231,
        "sender_full_name": "Notification Bot",
        "timestamp": 1645208633
    },
    {
        "content": "<p>Okay, I'm now getting this error in terminal when I do <code>$ leanproject get-mathlib-cache</code> :</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"n\">SHA</span> <span class=\"n\">b'3cf9a1287d75b5edeeb9b6abe2c3475df81076a9'</span> <span class=\"n\">could</span> <span class=\"n\">not</span> <span class=\"n\">be</span> <span class=\"n\">resolved</span><span class=\"o\">,</span> <span class=\"n\">git</span> <span class=\"n\">returned</span><span class=\"o\">:</span> <span class=\"n\">b'3cf9a1287d75b5edeeb9b6abe2c3475df81076a9</span> <span class=\"n\">missing'</span>\n</code></pre></div>\n<p>(This commit is that last one that passed all checks)</p>",
        "id": 272438479,
        "sender_full_name": "Daniel Packer",
        "timestamp": 1645208745
    },
    {
        "content": "<p>Yeah I've been getting that one recently! Workaround: delete <code>_target</code> and type <code>leanproject get-m</code> again.</p>",
        "id": 272439515,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1645209193
    },
    {
        "content": "<p>Yay! This worked. Thanks folks!</p>",
        "id": 272441051,
        "sender_full_name": "Daniel Packer",
        "timestamp": 1645209923
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"467358\">Daniel Packer</span> has marked this topic as resolved.</p>",
        "id": 272441064,
        "sender_full_name": "Notification Bot",
        "timestamp": 1645209930
    }
]