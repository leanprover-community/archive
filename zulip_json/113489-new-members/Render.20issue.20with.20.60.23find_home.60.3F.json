[
    {
        "content": "<p>Using this example:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">LinearOrderedField</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span>\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span>\n\n<span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">max_eq_sum_add_abs</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">max</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">abs</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">cases</span><span class=\"w\"> </span><span class=\"n\">le_or_gt</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"bp\">-</span><span class=\"n\">b</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">abs_eq_self</span><span class=\"bp\">.</span><span class=\"n\">mpr</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">show</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">assumption</span><span class=\"o\">)]</span>\n<span class=\"w\">    </span><span class=\"n\">simp_all</span><span class=\"w\"> </span><span class=\"n\">only</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">sub_nonneg</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">max_eq_left</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">one_div</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"n\">ring</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">abs_eq_neg_self</span><span class=\"bp\">.</span><span class=\"n\">mpr</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">show</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">linarith</span><span class=\"o\">)]</span>\n<span class=\"w\">    </span><span class=\"n\">simp_all</span>\n<span class=\"w\">    </span><span class=\"n\">ring_nf</span>\n<span class=\"w\">    </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">max_eq_right_of_lt</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"o\">]</span>\n\n<span class=\"bp\">#</span><span class=\"n\">find_home</span><span class=\"w\"> </span><span class=\"n\">max_eq_sum_add_abs</span>\n</code></pre></div>\n<p>I get </p>\n<blockquote>\n<p>[<br>\nmalformed MsgEmbed: {\"widget\":{\"wi\":{\"props\":{\"modName\":\"TMPTMPTMPTMPPM\"},\"javascriptHash\":\"5562855964290909935\",\"id\":\"GoToModuleLink\"},\"alt\":{\"tag\":[{\"expr\":{\"text\":\"TMPTMPTMPTMPPM\"}},{\"text\":\"\"}]}}}<br>\n]</p>\n</blockquote>\n<p>Is this a bug or am I doing something wrong?</p>",
        "id": 464603598,
        "sender_full_name": "Adomas Baliuka",
        "timestamp": 1724407231
    },
    {
        "content": "<p>That's likely the same as <a href=\"#narrow/stream/113489-new-members/topic/Calc.20mode.20error.20when.20mathlib.20imported\">this topic</a>: widgets are broken on the live version of the editor. It works fine on my test server: <a href=\"https://lean.math.hhu.de/#code=import%20Mathlib%0A%0Avariable%20%28%CE%B1%20%3A%20Type%29%20%5BLinearOrderedField%20%CE%B1%5D%0Avariable%20%28a%20b%20%3A%20%CE%B1%29%0A%0Alemma%20max_eq_sum_add_abs%20%3A%20max%20a%20b%20%3D%201%2F2%20*%20%28a%20%2B%20b%29%20%2B%201%2F2%20*%20abs%20%28a%20-%20b%29%20%3A%3D%20by%0A%20%20cases%20le_or_gt%200%20%28a-b%29%0A%20%20%C2%B7%20rw%20%5Babs_eq_self.mpr%20%28show%200%20%E2%89%A4%20a%20-%20b%20by%20assumption%29%5D%0A%20%20%20%20simp_all%20only%20%5Bsub_nonneg%2C%20max_eq_left%2C%20one_div%5D%0A%20%20%20%20ring%0A%20%20%C2%B7%20rw%20%5Babs_eq_neg_self.mpr%20%28show%20a%20-%20b%20%E2%89%A4%200%20by%20linarith%29%5D%0A%20%20%20%20simp_all%0A%20%20%20%20ring_nf%0A%20%20%20%20simp%20%5Bmax_eq_right_of_lt%2C%20*%5D%0A%0A%23find_home%20max_eq_sum_add_abs%0A\">see here</a></p>\n<p>The new version just needs a fix for Windows to work and then it's ready to be released <span aria-label=\"blush\" class=\"emoji emoji-1f60a\" role=\"img\" title=\"blush\">:blush:</span></p>",
        "id": 464607368,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1724408297
    },
    {
        "content": "<p>I'm on Ubuntu, in case that matters.</p>",
        "id": 464607447,
        "sender_full_name": "Adomas Baliuka",
        "timestamp": 1724408324
    },
    {
        "content": "<p>so hopefully, you should just see a list when clicking <code>#find_home</code> in the second link above?</p>\n<p><a href=\"/user_uploads/3121/7qy-eB74DUrwU9i-60KRhdG_/Screenshot_20240823_121918.png\">Screenshot_20240823_121918.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/7qy-eB74DUrwU9i-60KRhdG_/Screenshot_20240823_121918.png\" title=\"Screenshot_20240823_121918.png\"><img data-original-dimensions=\"562x288\" src=\"/user_uploads/thumbnail/3121/7qy-eB74DUrwU9i-60KRhdG_/Screenshot_20240823_121918.png/840x560.webp\"></a></div>",
        "id": 464607659,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1724408394
    },
    {
        "content": "<p>Yes, that works. Thanks!<br>\n(the suggestion itself is bogus, I guess, but that's not the fault of this printing procedure :D )</p>",
        "id": 464607851,
        "sender_full_name": "Adomas Baliuka",
        "timestamp": 1724408457
    },
    {
        "content": "<p>That is quite an interesting suggestion indeed. Now I feel inspired that <code>#find_home</code> could display it's reasoning (i.e. the graph it takes a least upper bound of or something) in a separate widget</p>",
        "id": 464609140,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1724408821
    }
]