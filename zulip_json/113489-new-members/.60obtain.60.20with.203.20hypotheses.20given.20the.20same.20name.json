[
    {
        "content": "<p>The following is one of Heather Macbeth's examples:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">hn</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">le_or_succ_le</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n<span class=\"w\">  </span><span class=\"k\">obtain</span><span class=\"w\"> </span><span class=\"n\">hn</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">hn</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">hn</span><span class=\"w\">     </span><span class=\"c1\">-- &lt;- line in question</span>\n<span class=\"w\">  </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">ne_of_lt</span>\n<span class=\"w\">  </span><span class=\"k\">calc</span>\n<span class=\"w\">    </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">rel</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">hn</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">numbers</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>This question is about the line </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"k\">obtain</span><span class=\"w\"> </span><span class=\"n\">hn</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">hn</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">hn</span>\n</code></pre></div>\n<p>As a beginner I would have expected this to be of the form <code>obtain h1|h2 := h3</code> where all three hypotheses <code>h1, h2, h3</code> are distinct.</p>\n<p>What is happening in this example? I suspect <code>hn</code> isn't being overwritten. Are they given internally different names, invisible to the user?</p>\n<p>Would it be correct to say this is 'bad practice\" ?</p>",
        "id": 463188267,
        "sender_full_name": "rzeta0",
        "timestamp": 1723994213
    },
    {
        "content": "<p>What happens here is that <code>hn</code> is destructed. The way an « or » statement is destructed is that, to show A or B imply C you have to prove A implies C and B implies C.<br>\nSo Lean creates two goals: one where the hypothesis « A or B » is replaced by A, the other where it is replaced by B. So the line you are talking about says to turn the current goal into two new goals, with the new hypothesis each called hn.<br>\nThis is not a bad practice because each of the hypotheses live in a different environment: the first one disappears and the two new ones are used for different goals.<br>\nDoes that make sense?</p>",
        "id": 463197829,
        "sender_full_name": "Etienne Marion",
        "timestamp": 1723997490
    },
    {
        "content": "<p>Thanks Etienne for clarifying how two goals are created. Let me ask in a different way what I think is wrong.</p>\n<p>If I ask \"what is <code>hn</code>?\" - I don't think I can answer that because there are 3 different <code>hn</code> in the code.  To me this is bad practice. </p>\n<p>But you say this is not bad practice, so I must be misunderstanding something. What am I missing?</p>",
        "id": 463244933,
        "sender_full_name": "rzeta0",
        "timestamp": 1724017674
    },
    {
        "content": "<p>You're missing that we accept this as not being bad practice :-)</p>\n<p>Here's something to think about. When you do <code>rw [thm] at h</code>, your <code>h</code> changes. Is it bad practice that there are two <code>h</code>'s, the one from before and the one after?</p>",
        "id": 463245319,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1724017868
    },
    {
        "content": "<p>When you do <code>obtain hn | hn := hn</code>, you're saying (1) the old <code>hn</code> does not matter anymore and (2) that the <code>hn</code>s in each branch are morally the old <code>hn</code>, but specialized for that particular case.</p>",
        "id": 463245494,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1724017978
    },
    {
        "content": "<p>Reusing a name for a completely new purpose though would just be confusing. If you do <code>induction n</code>, it would be weird to have <code>let n := ...</code> in the <code>zero</code> case.</p>",
        "id": 463245595,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1724018077
    },
    {
        "content": "<p>Yes I think this is bad, but it seems to late to change the recommended style for lean4 ...</p>",
        "id": 463254553,
        "sender_full_name": "rzeta0",
        "timestamp": 1724022611
    },
    {
        "content": "<p>You're free to think that and avoid it in your own projects, but I doubt you've convinced anyone else at this point :)</p>",
        "id": 463341784,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1724055510
    }
]