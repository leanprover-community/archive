[
    {
        "content": "<p>Hi all, I've been messing around with the Natural Number Game and am a bit stumped on <a href=\"https://adam.math.hhu.de/#/g/leanprover-community/nng4/world/LessOrEqual/level/6\">6/11</a>. Though right now I think I may have run into a bug?</p>\n<p>My proof state is as follows:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">cases</span><span class=\"w\"> </span><span class=\"n\">hxy</span>\n<span class=\"n\">cases</span><span class=\"w\"> </span><span class=\"n\">hyx</span>\n<span class=\"n\">cases</span><span class=\"w\"> </span><span class=\"n\">h</span>\n<span class=\"n\">cases</span><span class=\"w\"> </span><span class=\"n\">w</span>\n<span class=\"n\">simp</span>\n<span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">add_succ</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">h_1</span>\n<span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">succ_add</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">h_1</span>\n<span class=\"n\">cases</span><span class=\"w\"> </span><span class=\"n\">a</span>\n<span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">h_1</span>\n<span class=\"n\">cases</span><span class=\"w\"> </span><span class=\"n\">w_1</span>\n<span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">h_1</span>\n<span class=\"n\">cases</span><span class=\"w\"> </span><span class=\"n\">h_1</span>\n<span class=\"n\">induction</span><span class=\"w\"> </span><span class=\"n\">x</span>\n<span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">add_succ</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">succ_add</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">h_1</span>\n<span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">zero_ne_succ</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">h_1</span>\n<span class=\"n\">trivial</span>\n<span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">succ_add</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">h_1</span>\n<span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">succ_inj</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">h_1</span>\n<span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">n_ih</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">h_1</span>\n<span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">succ_add</span><span class=\"o\">]</span>\n<span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">succ_inj</span>\n</code></pre></div>\n<p>At the last <code>rw [succ_add]</code>, my goal is <code>succ n = succ (n + succ 0)</code>. I would think that <code>apply succ_inj</code> would reduce this to <code>n = n + succ 0</code>, which is one of my hypotheses (I know it's false). But instead, it expands it to <code>succ n = succ (n + succ 0)</code>. Which is weird. Am I misunderstanding how applying theorems works or is this a bug?</p>\n<p>Also, I've had a lot of difficulty getting Lean in the Natural Number Game to recognize that <code>x = succ (x + whatever)</code> is false. Does anyone have any tips?</p>\n<p>Thanks!</p>",
        "id": 515579896,
        "sender_full_name": "JJ",
        "timestamp": 1746132670
    },
    {
        "content": "<p>This is a tricky situation. All the thing I would usually use are locked in NNG</p>",
        "id": 515580516,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1746132961
    },
    {
        "content": "<p>Fortunately, <code>simp</code> seems to work</p>",
        "id": 515580805,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1746133079
    },
    {
        "content": "<p>Hold on, <code>succ_inj</code> is going the wrong direction</p>",
        "id": 515580907,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1746133106
    },
    {
        "content": "<p>Yeah, that's what I'm confused about.</p>",
        "id": 515580939,
        "sender_full_name": "JJ",
        "timestamp": 1746133121
    },
    {
        "content": "<p>If you have a hypothesis <code>n = n + succ 0</code>, you should be able to rewrite with it</p>",
        "id": 515580975,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1746133133
    },
    {
        "content": "<p>Maybe better to rewrite right-to-left, though, in this case</p>",
        "id": 515581056,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1746133171
    },
    {
        "content": "<p>Right-to-left?</p>",
        "id": 515581466,
        "sender_full_name": "JJ",
        "timestamp": 1746133332
    },
    {
        "content": "<p><code>rw [← h]</code></p>",
        "id": 515581567,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1746133382
    },
    {
        "content": "<p>This is something I've been a little confused about, actually. <code>succ_inj</code> seems to only work with <code>apply</code>?</p>",
        "id": 515581838,
        "sender_full_name": "JJ",
        "timestamp": 1746133491
    },
    {
        "content": "<p>And <code>apply</code> doesn't seem to support the backwards application ← thing.</p>",
        "id": 515581932,
        "sender_full_name": "JJ",
        "timestamp": 1746133535
    },
    {
        "content": "<p>That's because <code>succ_inj</code> is a one-way theorem</p>",
        "id": 515581992,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1746133558
    },
    {
        "content": "<p>Okay. Do all one-way theorems not work with <code>rw</code>?</p>",
        "id": 515582132,
        "sender_full_name": "JJ",
        "timestamp": 1746133599
    },
    {
        "content": "<p><code>rw</code> only takes theorems that are equalities, or whose conclusions are equalities. It also special-cases iff theorems to treat them like equalities.</p>",
        "id": 515582242,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1746133649
    },
    {
        "content": "<p>How should I rewrite this right-to-left to get it to work? I'm a little confused why the only thing that seems to work is <code>apply succ_inj</code>, which is transforming my <code>succ n = succ (n + succ 0)</code> into <code>succ (succ n) = succ (succ (n + succ 0))</code>.</p>",
        "id": 515582453,
        "sender_full_name": "JJ",
        "timestamp": 1746133733
    },
    {
        "content": "<p>It doesn't seem like it should be doing that from the signature of <code>succ_inj</code>... <code>(a b : ℕ) (h : MyNat.succ a = MyNat.succ b) : a = b</code></p>",
        "id": 515582586,
        "sender_full_name": "JJ",
        "timestamp": 1746133792
    },
    {
        "content": "<p>And <code>apply succ_inj at h_1</code> fails (which does make sense, since <code>h_1 : n = n + succ 0</code>)</p>",
        "id": 515582706,
        "sender_full_name": "JJ",
        "timestamp": 1746133832
    },
    {
        "content": "<p>The theorem <code>succ_inj</code> says if you have <code>succ a = succ b</code> then you can conclude <code>a = b</code>. Your goal is <code>succ n = succ (n + succ 0)</code>. In other words, you want to conclude that <code>succ n = succ (n + succ 0)</code>. This matches the pattern of <code>a = b</code> provided by <code>succ_inj</code>, so <code>apply</code> succeeds, and gives you a new goal asking you to fill in the hypothesis of <code>succ (succ n) = succ (succ (n + succ 0))</code>.</p>",
        "id": 515583131,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1746134034
    },
    {
        "content": "<p>That is, if <code>a = b</code>, it is a trivial property of equality that you can conclude <code>succ a = succ b</code>. It's going the other way around that's harder</p>",
        "id": 515583413,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1746134155
    },
    {
        "content": "<p>Oh, I see. Right, because if you're applying a theorem to a goal you're working backwards.</p>",
        "id": 515583664,
        "sender_full_name": "JJ",
        "timestamp": 1746134275
    },
    {
        "content": "<p>In that case I could use a hint -- how do you show statements of the form <code>n = n + succ x</code> are false?</p>",
        "id": 515584877,
        "sender_full_name": "JJ",
        "timestamp": 1746134803
    },
    {
        "content": "<p>Induction?</p>",
        "id": 515585147,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1746134907
    },
    {
        "content": "<p>Induction does not appear to get me anywhere. I'm not sure why. It's introducing a new <code>w_1</code> variable in the inductive hypothesis which I can't satisfy. Maybe because the exact form is <code>n_1 = succ n_1 + succ a_1</code>?</p>",
        "id": 515586999,
        "sender_full_name": "JJ",
        "timestamp": 1746135744
    },
    {
        "content": "<p>how are you stating the induction? you can click on the induction button to check the correct syntax</p>",
        "id": 515588012,
        "sender_full_name": "ZhiKai Pong",
        "timestamp": 1746136214
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">):</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"bp\">.</span><span class=\"n\">succ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">refine</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"bp\">.</span><span class=\"n\">recOn</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">zero_ne_add_one</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">λ</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"bp\">∘</span><span class=\"w\"> </span><span class=\"bp\">?_</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h2</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"bp\">.</span><span class=\"n\">succ</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"bp\">.</span><span class=\"n\">succ</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"bp\">.</span><span class=\"n\">succ</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"k\">calc</span>\n<span class=\"w\">     </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"bp\">.</span><span class=\"n\">succ</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">congrArg</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">pred</span><span class=\"w\"> </span><span class=\"n\">h2</span>\n<span class=\"w\">     </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"bp\">.</span><span class=\"n\">succ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">succ_add_eq_add_succ</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">k</span>\n</code></pre></div>",
        "id": 515588461,
        "sender_full_name": "suhr",
        "timestamp": 1746136440
    },
    {
        "content": "<p>You can replace <code>Nat.zero_ne_add_one _</code> with <code>Nat.noConfusion</code>.</p>",
        "id": 515588786,
        "sender_full_name": "suhr",
        "timestamp": 1746136597
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"394485\">@suhr</span>  I think he's working  on the natural number game, this is probably too advanced :)</p>",
        "id": 515588909,
        "sender_full_name": "ZhiKai Pong",
        "timestamp": 1746136660
    },
    {
        "content": "<p>I think this still counts as a hint. Induction works just fine in this case.</p>",
        "id": 515589642,
        "sender_full_name": "suhr",
        "timestamp": 1746137002
    },
    {
        "content": "<p>by the way I think this level is also doable without induction</p>",
        "id": 515590372,
        "sender_full_name": "ZhiKai Pong",
        "timestamp": 1746137398
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"890057\">ZhiKai Pong</span> <a href=\"#narrow/channel/113489-new-members/topic/natural.20number.20game.206.2F11/near/515588012\">said</a>:</p>\n<blockquote>\n<p>how are you stating the induction? you can click on the induction button to check the correct syntax</p>\n</blockquote>\n<p>Just <code>induction n_1</code> or <code>induction a_1</code>. I've been having some difficulty because my proof is long enough the goals take ~30 seconds to load, so I think I'm probably going to throw it out and start over.</p>",
        "id": 515591911,
        "sender_full_name": "JJ",
        "timestamp": 1746138193
    },
    {
        "content": "<p>Ah! I had forgotten some features of <code>rw</code>. Yeah, induction is totally unnecessary. Thanks!</p>",
        "id": 515594014,
        "sender_full_name": "JJ",
        "timestamp": 1746139326
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"634325\">JJ</span> has marked this topic as resolved.</p>",
        "id": 515594019,
        "sender_full_name": "Notification Bot",
        "timestamp": 1746139329
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"394485\">suhr</span> <a href=\"#narrow/stream/113489-new-members/topic/.E2.9C.94.20natural.20number.20game.206.2F11/near/515589642\">said</a>:</p>\n<blockquote>\n<p>I think this still counts as a hint. Induction works just fine in this case.</p>\n</blockquote>\n<p><span class=\"user-mention\" data-user-id=\"394485\">@suhr</span> as I have told you before, people working on the natural number game are typically beginners who don't even have lean installed and may not even have seen lean code written in the way it's written in VS Code. The stuff you write to \"help\" beginners playing NNG is, I believe, almost always intimidating and unhelpful. I would ask you to play NNG and understand something about the very limited environment which people have been exposed to before posting code blocks answering people with NNG questions.</p>",
        "id": 515805074,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1746223061
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110038\">@Kevin Buzzard</span> Fair enough, I should restrain from answering NNG questions.</p>",
        "id": 515807667,
        "sender_full_name": "suhr",
        "timestamp": 1746224363
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"634325\">@JJ</span> are all your questions answered now? As you seem to have now understood, your understanding of <code>apply</code> was incorrect and it isn't a bug. <code>apply</code>ing a theorem to a goal does something counterintuitive to many (because humans are taught to argue forwards typically) but logically correct. <code>rw</code> and <code>apply</code> do very different things, which humans are good at conflating because they are both obvious and trivial logical steps. <code>rw</code> only eats <code>X=Y</code> theorems and <code>apply</code> only eats <code>X -&gt; Y</code> theorems, and those are very different things to Lean despite being easily confused by humans. </p>\n<p>For a hypothesis of the form <code>h : n = n + succ x</code> you can use theorems from advanced addition world to make progress, for example <code>add_right_eq_self</code>. You'll have to use the <code>symm</code> tactic first because you need to swap the sides of the equality first.</p>",
        "id": 515882533,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1746270051
    }
]