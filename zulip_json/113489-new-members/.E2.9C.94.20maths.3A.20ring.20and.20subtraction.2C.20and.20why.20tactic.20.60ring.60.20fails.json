[
    {
        "content": "<p>This is a question that arises from my lack of familiarity with mathematical terminology like \"ring\".</p>\n<p>Consider the following simple proof.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"k\">calc</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"bp\">*</span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"bp\">*</span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">ring</span>\n<span class=\"w\">    </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">ring</span>\n</code></pre></div>\n<p>If I change the variable type declaration to <code>{a b : ℕ}</code>, that is, from integers to natural numbers, then the ring tactic fails.</p>\n<p>In my beginner brain, this is because <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mi>a</mi><mo>−</mo><mi>b</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(a-b)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">a</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mclose\">)</span></span></span></span> might not be <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>≥</mo><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">\\geq 0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7719em;vertical-align:-0.136em;\"></span><span class=\"mrel\">≥</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">0</span></span></span></span> and so the expression may not be a natural number.</p>\n<p>I'm trying to understand why a tactic about \"rings', sets defined as having composition rules analogous to addition and multiplication - <strong>but not subtraction</strong>, would fail.</p>\n<p>Is it because a ring has addition, and the inverse of addition is subtraction, so a ring has subtraction by implication?</p>\n<p>Again this doesn't feel right, as I read that not all rings have multiplicative inverses, so why would they have additive inverses?</p>",
        "id": 479089464,
        "sender_full_name": "rzeta0",
        "timestamp": 1729988846
    },
    {
        "content": "<hr>\n<p>Actually I now see form the wikipedia page that rings must have an additive inverse. <a href=\"https://en.wikipedia.org/wiki/Ring_(mathematics)\">https://en.wikipedia.org/wiki/Ring_(mathematics)</a></p>\n<p>So the reason the <code>ring</code> tactic fails is because <code>(a-b)</code> might not be in ℕ, and so the set of natural numbers is \"not closed under subtraction\".</p>\n<p>Is that right?</p>\n<p>Forgive my clumsy wording, I'm not mathematically trained.</p>",
        "id": 479089757,
        "sender_full_name": "rzeta0",
        "timestamp": 1729989209
    },
    {
        "content": "<p>The brief(est) first answer to your question is that rings are essentially the mathematical structure which generalizes the integers (in some mathematical sense you can find a copy of the integers in every single ring you find) -- so it's kind of the perfect sounding tactic for dealing with integer algebra.</p>",
        "id": 479089771,
        "sender_full_name": "Julian Berman",
        "timestamp": 1729989233
    },
    {
        "content": "<p>The natural numbers are indeed not a ring, they're actually not even a group.</p>",
        "id": 479089816,
        "sender_full_name": "Julian Berman",
        "timestamp": 1729989254
    },
    {
        "content": "<p>And the reason they aren't is as you say, because there are no additive inverses -- and a ring must have them for addition, yes. (You can look at Mathlib's definition for a ring, but you actually will have to do some chasing because there are a few layers of structures -- so perhaps wikipedia or a quick introduction to ring video might be more useful.)</p>",
        "id": 479089852,
        "sender_full_name": "Julian Berman",
        "timestamp": 1729989322
    },
    {
        "content": "<blockquote>\n<p>In my beginner brain, this is because (a−b) might not be ≥0 and so the expression may not be a natural number.</p>\n</blockquote>\n<p>(It turns out that Mathlib defines <code>a - b</code> to always \"exist\", even if a and b are natural numbers -- but this is sort of a \"pleasant accidental convenience\" that has more to do with programming than with math, namely it makes it more convenient if the function always returns a value, even if the value returned is junk)</p>",
        "id": 479089949,
        "sender_full_name": "Julian Berman",
        "timestamp": 1729989411
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"724904\">rzeta0</span> has marked this topic as resolved.</p>",
        "id": 479093142,
        "sender_full_name": "Notification Bot",
        "timestamp": 1729993093
    },
    {
        "content": "<p>Also, note that there is such a thing as a <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Semiring#doc\">docs#Semiring</a>, and the natural numbers are a semiring.</p>",
        "id": 479094486,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1729994636
    }
]