[
    {
        "content": "<p>Hi - <br>\nI'm trying to install Lean 4 on a Windows machine. I got the Lean4 extension in VS Code and am following the Setup doc. I got through installing elan and am now trying 'Set Up Lean 4 Project', one using Mathlib.<br>\nDuring the process, I got the following error:</p>\n<p>\"lake +leanprover-community/mathlib4:lean-toolchain update<br>\ninfo: learninglean1: no previous manifest, creating one from scratch<br>\ninfo: leanprover-community/mathlib: cloning <a href=\"https://github.com/leanprover-community/mathlib4\">https://github.com/leanprover-community/mathlib4</a><br>\nerror: .\\.\\.lake\\packages\\mathlib: revision not found 'master'\"</p>\n<p>In fact, I got this the first time I tried the process.  Then I tried to figure out several fixes, ran into various other errors, finally tried to delete/uninstall everything and start from scratch... and I got back to the above error again.  Any ideas?</p>\n<p>Thanks!<br>\nRyan</p>",
        "id": 491395037,
        "sender_full_name": "Ryan O'Donnell",
        "timestamp": 1735644579
    },
    {
        "content": "<p>Very odd, that seems like it should work. Might an antivirus get in the way?</p>",
        "id": 491395126,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1735644633
    },
    {
        "content": "<p>It's on a new laptop with a generic Windows 11 installation. Not sure what to try...</p>",
        "id": 491400388,
        "sender_full_name": "Ryan O'Donnell",
        "timestamp": 1735648809
    },
    {
        "content": "<p>Try disabling your antivirus? Is your internet working fine?</p>",
        "id": 491400743,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1735649153
    },
    {
        "content": "<p>Internet works fine.</p>\n<p>I now tried instead to follow the directions here:<br>\n<a href=\"https://leanprover-community.github.io/install/project.html\">https://leanprover-community.github.io/install/project.html</a></p>\n<p>I did <br>\n  \"lake +leanprover/lean4:nightly-2024-04-24 new tolearnlean math\"<br>\nThat succeeded.<br>\nI went to the new \"tolearnlean\" folder and did<br>\n  \"lake update\"<br>\nThat yielded a new error message:</p>\n<p>\"info: tolearnlean: no previous manifest, creating one from scratch<br>\ninfo: mathlib: cloning <a href=\"https://github.com/leanprover-community/mathlib4.git\">https://github.com/leanprover-community/mathlib4.git</a><br>\nerror: .\\.\\.lake\\packages\\mathlib: could not resolve 'HEAD' to a commit; the repository may be corrupt, so you may need to remove it and try again\"</p>\n<p>I'm not sure I have any antivirus/firewall... To the extent that one exists, I'll try to disable it and rerun from the VS Code interface...</p>\n<p>thanks for your help!<br>\nRyan</p>",
        "id": 491401313,
        "sender_full_name": "Ryan O'Donnell",
        "timestamp": 1735649559
    },
    {
        "content": "<p>@Kevin Thanks for the great talk at CMU last month, by the way.  My PhD student subsequently formalized a small but important group theory lemma from our latest paper.  I just want to try getting involved myself... :)</p>",
        "id": 491401381,
        "sender_full_name": "Ryan O'Donnell",
        "timestamp": 1735649619
    },
    {
        "content": "<p>I tried it from the VS Code interface with antivirus off.  Same \"error: .\\.\\.lake\\packages\\mathlib: revision not found 'master'\"<br>\nAlso tried it from the VS Code interface with firewall off.  Same \"error: .\\.\\.lake\\packages\\mathlib: revision not found 'master'\"<br>\nBoth of these were tried with VS Code being run in Administrator mode.</p>",
        "id": 491403391,
        "sender_full_name": "Ryan O'Donnell",
        "timestamp": 1735651188
    },
    {
        "content": "<p>In case it's relevant, running \"elan show\" produces this:</p>\n<p>\"installed toolchains</p>\n<hr>\n<p>leanprover/lean4:nightly-2024-04-24<br>\nleanprover/lean4:stable (default)<br>\nleanprover/lean4:v4.15.0-rc1</p>\n<p>active toolchain</p>\n<hr>\n<p>leanprover/lean4:stable (default)<br>\nLean (version 4.14.0, x86_64-w64-windows-gnu, commit 410fab728470, Release)\"</p>",
        "id": 491404369,
        "sender_full_name": "Ryan O'Donnell",
        "timestamp": 1735651943
    },
    {
        "content": "<p>I'm in Turkey right now, so I also tried it from a USA VPN.  Didn't change anything. :(</p>",
        "id": 491405559,
        "sender_full_name": "Ryan O'Donnell",
        "timestamp": 1735652884
    },
    {
        "content": "<p>I tried it on another similar Windows machine and it succeeded.<br>\nTherefore it is something to do with my computer's configuration. <br>\n(Yet I only got this machine a week ago, so I haven't had that much chance to get it into a weird state...!)</p>",
        "id": 491482757,
        "sender_full_name": "Ryan O'Donnell",
        "timestamp": 1735720930
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"466600\">@Ryan O'Donnell</span> Did you manage to figure out what caused <code>lake update</code> to fail to clone Mathlib on your machine? Does just <code>git clone https://github.com/leanprover-community/mathlib4.git</code> work?</p>",
        "id": 492302592,
        "sender_full_name": "Marc Huisinga",
        "timestamp": 1736253834
    },
    {
        "content": "<p>Thank you kindly for following up!  My bad for not updating this thread, as I eventually did crack the case.</p>\n<p>The short story is that (as many might have guessed) it had nothing to do with Lean.  </p>\n<p>Rather, I discovered that one basically cannot have git repositories inside a <a href=\"http://Box.com\">Box.com</a> Drive, at least on Windows (as I was trying).  It seems git is very picky about file-ownership-usernames and Box does some weird things with file-ownership-usernames.  </p>\n<p>I eventually restarted everything from scratch outside of a <a href=\"http://Box.com\">Box.com</a> drive and it worked fine.  I am now working on Chapter 3 exercises in Mathematics In Lean :)</p>",
        "id": 492317786,
        "sender_full_name": "Ryan O'Donnell",
        "timestamp": 1736259367
    },
    {
        "content": "<p>Thanks for reporting back, I'm sure this will be very helpful for anyone else running into a similar issue in the future :-)</p>",
        "id": 492319203,
        "sender_full_name": "Marc Huisinga",
        "timestamp": 1736259901
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"466600\">@Ryan O'Donnell</span> I am happy to hear that you are using MIL. Having just used it to teach an undergraduate course last semester, there are some improvements and revisions that I am hoping to make over the next couple of months. The most important piece of information / advice I have for new users is that it has gotten a lot easier to find theorems in the library. In addition to the suggestions in MIL (use tab completion, browse the <a href=\"https://leanprover-community.github.io/mathlib4_docs/\">online docs</a>, use ctrl-click to jump to a definition and look for nearby theorems), these are good to know about:</p>\n<ul>\n<li>The search tactics have gotten faster. Use <code>apply?</code> to ask for suggestions for theorems to apply, <code>rw?</code> for suggestions for equations to rewrite with, and <code>exact?</code> to ask Lean to try to find something that will close the goal immediately.</li>\n<li>Loogle gives multiple options for symbolic search. In VS Code, type <code>ctrl-k ctrl-s</code> and read the instructions.</li>\n<li><a href=\"https://leansearch.net/\">Leansearch</a>, an AI driven natural language search, is helpful. You can enter a vague verbal description of what you are looking for, and its suggestions are often good.</li>\n</ul>\n<p>Also, Github copilot (which you can get free as an academic) is surprisingly good. It often pops up nonsense, but when it does that it is easy to ignore, and often enough it provides something helpful. (Of course, you can disable it if it is too helpful when you do the exercises.)</p>\n<p>As far as automation, <code>simp</code>, <code>ring</code>, <code>norm_num</code>, and <code>linarith</code> are still mainstays, but thanks to Kim Morrison, we now also have <code>omega</code>, which solves some goals in integer linear arithmetic. It can even handle divisibility and mod:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">%</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">∨</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">%</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">∨</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">%</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">omega</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">∣</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">%</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">omega</span>\n</code></pre></div>\n<p>There is other automation, like <code>field_simp</code>, <code>simp_arith</code>, <code>gcongr</code>, and <code>module</code> that is not yet discussed in MIL, but should be. Oh, and the <code>split</code> tactic is good for introducing cases to split <code>if ... then ... else</code> (and <code>match</code>) expressions. I don't remember if that is discussed in MIL yet, but it should be.</p>",
        "id": 492357751,
        "sender_full_name": "Jeremy Avigad",
        "timestamp": 1736272211
    }
]