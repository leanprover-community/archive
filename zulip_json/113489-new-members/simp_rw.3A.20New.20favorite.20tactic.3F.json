[
    {
        "content": "<p>I'm finding myself using <code>simp_rw</code> often instead or <code>rw</code> or <code>simp</code> (<code>only</code>).</p>\n<p>Feels like a perfect tactic:</p>\n<ul>\n<li>More powerful than <code>rw</code> and can reach deeper</li>\n<li>Doesn't introduce magic or hang, each rewrite is chosen explicitly</li>\n<li>Errors if the rewrite doesn't clearly apply</li>\n<li>Don't need to worry about it being non-terminal</li>\n</ul>\n<p>Should it be promoted more? It seems really nice.</p>",
        "id": 534198411,
        "sender_full_name": "Dan Abramov",
        "timestamp": 1755079800
    },
    {
        "content": "<p><code>simp_rw</code> will rewrite all occurrences of the pattern, so you have less control with what gets rewritten</p>",
        "id": 534200062,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1755080475
    },
    {
        "content": "<p>It also won't leave assumptions in the thing you're rewriting by as side goals</p>",
        "id": 534200227,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1755080541
    },
    {
        "content": "<p>I would like to see simp_rw upstreamed. Unfortunately this involves pushing code across the mighty FROwall. There are so many times in iris when I am doing this <code>intro _ ; rw ...; revert</code> pattern.</p>",
        "id": 534222619,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1755089134
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"418569\">Dan Abramov</span> <a href=\"#narrow/channel/113489-new-members/topic/simp_rw.3A.20New.20favorite.20tactic.3F/near/534198411\">said</a>:</p>\n<blockquote>\n<p>I'm finding myself using <code>simp_rw</code> often instead or <code>rw</code> or <code>simp</code> (<code>only</code>).</p>\n<p>Feels like a perfect tactic:</p>\n<ul>\n<li>More powerful than <code>rw</code> and can reach deeper</li>\n<li>Doesn't introduce magic or hang, each rewrite is chosen explicitly</li>\n<li>Errors if the rewrite doesn't clearly apply</li>\n<li>Don't need to worry about it being non-terminal</li>\n</ul>\n<p>Should it be promoted more? It seems really nice.</p>\n</blockquote>\n<p>The FRO is working on a more powerful rewrite tactic that can handle these kinds of situations: <a href=\"https://lean-lang.org/fro/roadmap/1900-1-1-the-lean-fro-year-3-roadmap/#4.-proof-automation\">https://lean-lang.org/fro/roadmap/1900-1-1-the-lean-fro-year-3-roadmap/#4.-proof-automation</a></p>",
        "id": 534222915,
        "sender_full_name": "Henrik BÃ¶ving",
        "timestamp": 1755089239
    },
    {
        "content": "<p>How long will that take? I am working on iris now</p>",
        "id": 534223191,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1755089329
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"418569\">Dan Abramov</span> <a href=\"#narrow/channel/113489-new-members/topic/simp_rw.3A.20New.20favorite.20tactic.3F/near/534198411\">said</a>:</p>\n<blockquote>\n<ul>\n<li>Doesn't introduce magic or hang, each rewrite is chosen explicitly</li>\n</ul>\n</blockquote>\n<p>Are you describing <code>simp_rw</code> with this one? That sounds like <code>rw</code> to me. The <code>simp_rw</code> tactic gives you no way to explicitly choose what you want to rewrite, nor how many times it should iterate its rewriting, and it can get stuck doing infinite loops.</p>\n<p>Similarly, with \"Errors if the rewrite doesn't clearly apply\", you only get a \"no progress\" error. It's no better than <code>rw</code>.</p>\n<p>Maybe you're comparing <code>simp_rw</code> and <code>simp</code>, not <code>simp_rw</code> and <code>rw</code>.</p>\n<p>By the way, <code>conv =&gt; enter [...position string...]; rw [thm]</code> is a good way to rewrite where you want. <span class=\"user-mention\" data-user-id=\"466334\">@Shreyas Srinivas</span> There's no need for <code>intro; rw; revert</code> because of this.</p>",
        "id": 534575830,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1755215008
    },
    {
        "content": "<p>I do sometimes do <code>revert h; rw [eq]; intro h</code></p>",
        "id": 534576140,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1755215241
    },
    {
        "content": "<p>That's very different <span class=\"user-mention\" data-user-id=\"816344\">@Aaron Liu</span>. That's to deal with dependencies among hypotheses; <code>intro</code>/<code>rw</code>/<code>revert</code> on the other hand is to rewrite within the body of a pi/let/lambda.</p>",
        "id": 534577073,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1755215860
    }
]