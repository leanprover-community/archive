[
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"w\"> </span><span class=\"n\">Meta</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">foo</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">decide</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">h</span>\n\n<span class=\"kn\">elab</span><span class=\"w\"> </span><span class=\"s2\">\"test%\"</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">term</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">  </span><span class=\"n\">mkAppM</span><span class=\"w\"> </span><span class=\"ss\">``foo</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"o\">[</span><span class=\"n\">mkNatLit</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">mkNatLit</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">]</span>\n\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">test</span><span class=\"bp\">%</span><span class=\"w\"> </span><span class=\"c1\">-- @foo 2 3 : autoParam (2 ≤ 3) _auto✝ → 2 ≤ 3</span>\n</code></pre></div>\n<p>I would like to generate the expression <code>foo 2 3</code> with <code>h</code> filled in, how do I do that?</p>",
        "id": 544945123,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1760528445
    },
    {
        "content": "<p>Try <code>mkAppOptM</code></p>",
        "id": 544951249,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1760530083
    },
    {
        "content": "<p>it seems to just make a metavariable</p>",
        "id": 544951422,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1760530138
    },
    {
        "content": "<p>i don't think the <code>Opt</code> in the name stands for <code>optParam</code></p>",
        "id": 544951449,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1760530147
    },
    {
        "content": "<p>Found the elab code that usually handles this <a href=\"https://github.com/leanprover/lean4/blob/ed4d453346c223546289d4b2d3bd8d2b4d1cf551/src/Lean/Elab/App.lean#L661-L686\">https://github.com/leanprover/lean4/blob/ed4d453346c223546289d4b2d3bd8d2b4d1cf551/src/Lean/Elab/App.lean#L661-L686</a></p>",
        "id": 544954588,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1760531121
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">elab</span><span class=\"w\"> </span><span class=\"s2\">\"test%\"</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">term</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"k\">do</span>\n<span class=\"w\">  </span><span class=\"n\">return</span><span class=\"w\"> </span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">Elab</span><span class=\"bp\">.</span><span class=\"n\">Term</span><span class=\"bp\">.</span><span class=\"n\">elabTerm</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"bp\">`</span><span class=\"o\">(</span><span class=\"n\">foo</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"n\">none</span>\n</code></pre></div>",
        "id": 544962307,
        "sender_full_name": "Alfredo Moreira-Rosa",
        "timestamp": 1760533264
    },
    {
        "content": "<p>that doesn't work for something more complicated than <code>2</code> and <code>3</code></p>",
        "id": 544964073,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1760533729
    },
    {
        "content": "<p>yes, but the idea is to use elabTerm, building complex terms is easy with other intermediate steps.</p>",
        "id": 544998066,
        "sender_full_name": "Alfredo Moreira-Rosa",
        "timestamp": 1760541878
    },
    {
        "content": "<p>the problem is that you have to reflect expr back into syntax for this to work</p>",
        "id": 544998282,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1760541927
    }
]