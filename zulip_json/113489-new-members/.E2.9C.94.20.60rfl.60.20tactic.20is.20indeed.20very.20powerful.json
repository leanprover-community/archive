[
    {
        "content": "<p>i tried to prove the fact that </p>\n<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mn>19</mn><mo>⋅</mo><mi mathvariant=\"normal\">.</mi><mi mathvariant=\"normal\">.</mi><mi mathvariant=\"normal\">.</mi><mo>⋅</mo><mn>54</mn><mo>=</mo><mn>23</mn><mo>⋅</mo><mi mathvariant=\"normal\">.</mi><mi mathvariant=\"normal\">.</mi><mi mathvariant=\"normal\">.</mi><mo>⋅</mo><mn>57</mn></mrow><annotation encoding=\"application/x-tex\">19 \\cdot ... \\cdot 54 = 23\\cdot ... \\cdot 57</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">19</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">⋅</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.4445em;\"></span><span class=\"mord\">...</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">⋅</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">54</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">23</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">⋅</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.4445em;\"></span><span class=\"mord\">...</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">⋅</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">57</span></span></span></span></span></p>\n<p>and it turns out <code>rfl</code> is capable of proving it (<a href=\"https://live.lean-lang.org/#code=import%20Mathlib.Algebra.BigOperators.Intervals%0A%0Aopen%20Finset%0Aopen%20BigOperators%0A%0Aexample%3A%20%E2%88%8F%20i%20%E2%88%88%20Icc%2019%2054%2C%20i%20%3D%20%E2%88%8F%20i%20%E2%88%88%20Icc%2023%2057%2C%20i%20%3A%3D%20rfl\">Lean 4 Web</a>). But i don't understand how <code>rfl</code> was able to compute these products. I'm still quite new to Lean so don't really understand how it works inside.</p>",
        "id": 449363266,
        "sender_full_name": "lame_lexem",
        "timestamp": 1720200871
    },
    {
        "content": "<p>Zulip tip: if you use a code block like</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Algebra</span><span class=\"bp\">.</span><span class=\"n\">BigOperators</span><span class=\"bp\">.</span><span class=\"n\">Intervals</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Finset</span>\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">BigOperators</span>\n\n<span class=\"kn\">example</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∏</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">Icc</span><span class=\"w\"> </span><span class=\"mi\">19</span><span class=\"w\"> </span><span class=\"mi\">54</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">∏</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">Icc</span><span class=\"w\"> </span><span class=\"mi\">23</span><span class=\"w\"> </span><span class=\"mi\">57</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">rfl</span>\n</code></pre></div>\n<p>then there's a \"View in Lean 4 playground\" link in the upper right corner. (You can see the source code of this message in the triple-vertical-dot menu in the upper right corner, \"View original message\")</p>",
        "id": 449366633,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1720201996
    },
    {
        "content": "<p>The reason this works is a combination of things:</p>\n<ol>\n<li>Lean has optimized routines for basic natural number arithmetic (addition, multiplication, and others). It will automatically apply them in contexts where it's trying to see that two natural numbers are the same, or when it needs to reduce a natural number to a normal form.</li>\n<li>The <code>Finset</code> data type is at its core a concrete <code>List</code> that enumerates the elements of the <code>Finset</code>.</li>\n<li>The product notation is defined to be the algorithm that recursively multiplies all the elements of the underlying <code>List</code>.</li>\n<li>The <code>Finset.Icc</code> function creates the <code>Finset</code> in a reasonably efficient way.</li>\n</ol>\n<p>All together, this allows <code>rfl</code> to trigger Lean to apply the <code>Nat.mul</code> routines to the numbers in the underlying <code>List</code>s created by <code>Finset.Icc</code>.</p>",
        "id": 449367303,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1720202268
    },
    {
        "content": "<p>Whether <code>rfl</code> closes a goal can depend on definition details (because it's about definitional equality).</p>\n<p>So consider the following example inspired by the <a href=\"https://adam.math.hhu.de/#/g/leanprover-community/nng4\">Natural Numbers Game</a>:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">example</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">rfl</span>\n<span class=\"kn\">example</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">rfl</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">rfl</span>\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"gr\">sorry</span><span class=\"w\"> </span><span class=\"c1\">-- rfl doesn't work!</span>\n</code></pre></div>\n<p>It's just down to how addition was defined that <code>n + 0</code> is just <code>n</code> while <code>0 + n</code> would want to perform something like loop <code>(0 + 1) + (n - 1)</code> until <code>n = 0</code>. Of course, that's not possible without a value for <code>n</code>, so you'll need to prove it some other way (induction on n, perhaps). You can easily define addition so that the opposite problem holds.</p>",
        "id": 449370663,
        "sender_full_name": "Mark Fischer",
        "timestamp": 1720203204
    },
    {
        "content": "<p>I sometimes use this example to argue that definitional equality is not a mathematical concept (because it depends on implementation details).</p>",
        "id": 449399350,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1720214059
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"306601\">Kyle Miller</span> <a href=\"#narrow/stream/113489-new-members/topic/.60rfl.60.20tactic.20is.20indeed.20very.20powerful/near/449366633\">said</a>:</p>\n<blockquote>\n<p>Zulip tip: if you use a code block like<br>\n...</p>\n</blockquote>\n<p>thank you for the tip i appreciate it!<br>\nand for the explanation.</p>",
        "id": 449619930,
        "sender_full_name": "lame_lexem",
        "timestamp": 1720340200
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"715832\">lame_lexem</span> has marked this topic as resolved.</p>",
        "id": 449619965,
        "sender_full_name": "Notification Bot",
        "timestamp": 1720340212
    }
]