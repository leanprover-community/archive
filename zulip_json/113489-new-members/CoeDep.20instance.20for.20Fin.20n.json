[
    {
        "content": "<p>Is an instance like this a bad idea?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">CoeDep</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">succ</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">coe</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"bp\">.</span><span class=\"n\">mk</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">omega</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>I wanted it for some code I was writing and managed to generalize it in a way, but I think this might not be good for lean for some reason.</p>",
        "id": 541846750,
        "sender_full_name": "Julia Scheaffer",
        "timestamp": 1759016454
    },
    {
        "content": "<p>we got rid of the global Nat \\to Fin coercion because it was messing with type inference</p>",
        "id": 541846839,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1759016582
    },
    {
        "content": "<p>you could have something go Fin -&gt; Nat -&gt; Fin</p>",
        "id": 541846852,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1759016596
    },
    {
        "content": "<p>Ah, i figured something like that might be the case</p>",
        "id": 541846864,
        "sender_full_name": "Julia Scheaffer",
        "timestamp": 1759016603
    },
    {
        "content": "<p>this seems like it's reintroducing the problem</p>",
        "id": 541846868,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1759016608
    },
    {
        "content": "<p>lol yes probably</p>",
        "id": 541846871,
        "sender_full_name": "Julia Scheaffer",
        "timestamp": 1759016616
    },
    {
        "content": "<p>okay, i will just inline it. It's not like i'm using it that much yet, it just seemed like it would be possible</p>",
        "id": 541846925,
        "sender_full_name": "Julia Scheaffer",
        "timestamp": 1759016694
    },
    {
        "content": "<p>A CoeDep instance would stop it from chaining coercions together, right?</p>",
        "id": 541847039,
        "sender_full_name": "Julia Scheaffer",
        "timestamp": 1759016807
    },
    {
        "content": "<p>oh yeah</p>",
        "id": 541847050,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1759016820
    },
    {
        "content": "<p>but you could have a coercion applied to a bound variable which is then instantiated with another coercion</p>",
        "id": 541847078,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1759016847
    },
    {
        "content": "<p>This project is my first time using coercions, so I dont understand the system very well yet.</p>",
        "id": 541847109,
        "sender_full_name": "Julia Scheaffer",
        "timestamp": 1759016881
    }
]