[
    {
        "content": "<p>I've ended up with git repos for which Mathlib wasn't installed correctly.  So I follow the instructions here:<br>\n<a href=\"https://leanprover-community.github.io/install/project.html#updating-mathlib-in-your-project\">https://leanprover-community.github.io/install/project.html#updating-mathlib-in-your-project</a><br>\nand then everything works.</p>\n<p>But now I have updated files lake-manifest.json, lakefile.lean, and lean-toolchain.  And I don't want to commit them because I think that will mess up the same repo on my other computer.  (Is that incorrect?)</p>\n<p>I add those three filenames to .gitignore and then (this part I really don't understand--it's bizarre) git still thinks they need to be committed.  I'm confused.  This has never happened, and it doesn't seem to have anything to do with Lean.  There's something I'm missing.  Maybe I don't understand .gitignore syntax.  It's never been a problem before.  Surely I'm doing something silly.</p>\n<p>I'm sure there are usual ways that others configure Lean projects to play nicely with git.  What are standard practices?</p>\n<p>(Many languages have a standard default .gitignore file in github that you can pull in when you create a git repo, but Lean doesn't.)</p>",
        "id": 462934385,
        "sender_full_name": "mars0i",
        "timestamp": 1723869995
    },
    {
        "content": "<p>Pretty sure lake new creates a gitignore</p>",
        "id": 462940264,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1723873620
    },
    {
        "content": "<p>You definitely don't want those three files ignored though</p>",
        "id": 462940277,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1723873645
    },
    {
        "content": "<p>The whole point of the \"updating mathlib in your project\" instructions is to update them</p>",
        "id": 462940340,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1723873697
    },
    {
        "content": "<p>Well, maybe not lakefile.lean</p>",
        "id": 462940353,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1723873715
    },
    {
        "content": "<p>Maybe it would help if you showed the diff, or explained what you mean by messing up the repo on your other computer</p>",
        "id": 462940391,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1723873771
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"617444\">mars0i</span> <a href=\"#narrow/stream/113489-new-members/topic/Confused.20about.20proper.20way.20to.20set.20up.20git.20repo/near/462934385\">said</a>:</p>\n<blockquote>\n<p>But now I have updated files lake-manifest.json, lakefile.lean, and lean-toolchain. And I don't want to commit them because I think that will mess up the same repo on my other computer. (Is that incorrect?)</p>\n<p>I add those three filenames to .gitignore and then (this part I really don't understand--it's bizarre) git still thinks they need to be committed.</p>\n</blockquote>\n<p>Putting a file in .gitignore doesn't mean \"Don't look at my changes\" but \"Make as if the files don't exist\". If the files already existed, that makes git thinks you have deleted them.</p>",
        "id": 462950028,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1723880080
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"617444\">mars0i</span> <a href=\"#narrow/stream/113489-new-members/topic/Confused.20about.20proper.20way.20to.20set.20up.20git.20repo/near/462934385\">said</a>:</p>\n<blockquote>\n<p>But now I have updated files lake-manifest.json, lakefile.lean, and lean-toolchain. And I don't want to commit them because I think that will mess up the same repo on my other computer. (Is that incorrect?)</p>\n</blockquote>\n<p>It really shouldn't mess anything up with your other computer. If it does, then you've got bigger problems</p>",
        "id": 462950082,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1723880136
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"387244\">Yaël Dillies</span> <a href=\"#narrow/stream/113489-new-members/topic/Confused.20about.20proper.20way.20to.20set.20up.20git.20repo/near/462950028\">said</a>:</p>\n<blockquote>\n<p>If the files already existed, that makes git thinks you have deleted them.</p>\n</blockquote>\n<p>I don't think this is true?</p>",
        "id": 462958718,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1723886902
    },
    {
        "content": "<p>Thanks everyone for those replies.</p>\n<p><span class=\"user-mention\" data-user-id=\"307953\">@Ruben Van de Velde</span>  <code>lake new foo</code> creates a .gitignore file in foo/ , but it only contains \"/.lake\".  Maybe that's all it should contain.  I'll try committing those three files and see what happens, and report back.</p>\n<p><span class=\"user-mention\" data-user-id=\"387244\">@Yaël Dillies</span>, <span class=\"user-mention\" data-user-id=\"310045\">@Eric Wieser</span>,  yes--I didn't expect the files to disappear.   Sorry about that--I wasn't very clear.  I meant that <code>git status</code> reports</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">Changes</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">staged</span><span class=\"w\"> </span><span class=\"n\">for</span><span class=\"w\"> </span><span class=\"n\">commit</span><span class=\"o\">:</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">use</span><span class=\"w\"> </span><span class=\"s2\">\"git add &lt;file&gt;...\"</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">update</span><span class=\"w\"> </span><span class=\"n\">what</span><span class=\"w\"> </span><span class=\"n\">will</span><span class=\"w\"> </span><span class=\"n\">be</span><span class=\"w\"> </span><span class=\"n\">committed</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">use</span><span class=\"w\"> </span><span class=\"s2\">\"git restore &lt;file&gt;...\"</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">discard</span><span class=\"w\"> </span><span class=\"n\">changes</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">working</span><span class=\"w\"> </span><span class=\"n\">directory</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"n\">modified</span><span class=\"o\">:</span><span class=\"w\">   </span><span class=\"n\">lake</span><span class=\"bp\">-</span><span class=\"n\">manifest</span><span class=\"bp\">.</span><span class=\"n\">json</span>\n<span class=\"w\">    </span><span class=\"n\">modified</span><span class=\"o\">:</span><span class=\"w\">   </span><span class=\"n\">lakefile</span><span class=\"bp\">.</span><span class=\"n\">lean</span>\n<span class=\"w\">    </span><span class=\"n\">modified</span><span class=\"o\">:</span><span class=\"w\">   </span><span class=\"n\">lean</span><span class=\"bp\">-</span><span class=\"n\">toolchain</span>\n</code></pre></div>\n<p>even though .gitignore contains</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">/.</span><span class=\"n\">lake</span>\n<span class=\"n\">lake</span><span class=\"bp\">-</span><span class=\"n\">manifest</span><span class=\"bp\">.</span><span class=\"n\">json</span>\n<span class=\"n\">lakefile</span><span class=\"bp\">.</span><span class=\"n\">lean</span>\n<span class=\"n\">lean</span><span class=\"bp\">-</span><span class=\"n\">toolchain</span>\n<span class=\"bp\">.*.</span><span class=\"n\">swp</span>\n</code></pre></div>\n<p>Afaik, git should not report those files as modified and needing to be committed given that they are listed in .gitignore.</p>\n<p>Anyway, I'll try committing them now and check see what happens when I get on the other computer.  I don't know why mathlib stopped working in this repo.  Before I reinstalled mathlib, the files all compiled except when I had <code>import Mathlib</code> at the top.  Hadn't been long enough for  me to expect bitrot :-) .</p>",
        "id": 463010638,
        "sender_full_name": "mars0i",
        "timestamp": 1723913194
    },
    {
        "content": "<p>lean-toolchain contains</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">leanprover</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"o\">:</span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">11</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">-</span><span class=\"n\">rc2</span>\n</code></pre></div>\n<p>Maybe there could be a problem if the other computer has a different version of lean4 installed?  And then I have to make sure they're using the same version?</p>\n<p>The entries in lake-manifest.json contain a field \"rev\" whose value is a hashcode or something like that.  I wonder whether that depends on details of the installation?  </p>\n<p>Anyway, I'll find out soon.</p>",
        "id": 463011583,
        "sender_full_name": "mars0i",
        "timestamp": 1723913496
    },
    {
        "content": "<p>No, that's not how that works. Lake reads those files to figure out what versions of everything to use</p>",
        "id": 463013656,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1723913908
    },
    {
        "content": "<p>You should certainly not have those files in your gitignore</p>",
        "id": 463054480,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1723932126
    },
    {
        "content": "<p>Syncing the config files via git worked.  <code>import Mathlib</code> caused it to rebuild.  That took about 7 hours--it's a slow machine--but now it's all fine.  Thanks to everyone.</p>",
        "id": 463098054,
        "sender_full_name": "mars0i",
        "timestamp": 1723955774
    },
    {
        "content": "<p>You should not have to wait 7 hours; <code>lake exe cache get</code> should take minutes and save you from a long build</p>",
        "id": 463126302,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1723970190
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"310045\">@Eric Wieser</span>.  I thought I remembered something like that, but didn't recall the details.</p>\n<p>Part of the issue for me is that there are pretty good instructions for setting up Lean and Mathlib, but that doesn't mean that I know what following the instructions accomplishes.  I haven't seen instructions for updating for new versions of either Lean or Mathlib.  So it wasn't obvious that reinstalling mathlib creates new versions of config files, and that once those files are copied to a new instance of a repo, I should run <code>lake exec cache get</code> before using Mathlib.   I'm sure this seems obvious and intuitive once one has used Lean for a while.  I know that explaining to new users everything that installation routines do can be counterproductive.  One point of those routines is to make it so that novices don't have to understand the underlying complexity, which may change over time anyway.</p>",
        "id": 463207540,
        "sender_full_name": "mars0i",
        "timestamp": 1724001748
    },
    {
        "content": "<p>Yes, I guess something missing from the instructions is how to \"recover from\" an update after transferring a repo between machines.</p>",
        "id": 463242940,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1724015971
    },
    {
        "content": "<p>What would be helpful would be a short list of common tasks using <code>lake</code> or other tools.  We have a set of steps to follow in a couple of different scenarios (use someone else's Lean project, start an entirely new project), and there is <code>lake --help</code>, but it's more difficult to know when to do things when you are not following one of the main scenarios.  (e.g. When do I want to do <code>lake update</code>, and what will it do to my project, or to my computer?  When and why do i do <code>lake exe cache get</code>?)</p>",
        "id": 463808059,
        "sender_full_name": "mars0i",
        "timestamp": 1724186358
    },
    {
        "content": "<p>I'd hope you can find some of that at <a href=\"https://github.com/leanprover-community/mathlib4/blob/5d151347c122037259fc129edd18732d0b148f15/README.md\">https://github.com/leanprover-community/mathlib4/blob/5d151347c122037259fc129edd18732d0b148f15/README.md</a> , but improvements to the docs are always welcome</p>",
        "id": 463874654,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1724189602
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"307953\">@Ruben Van de Velde</span> .  I've seen that page--it's linked from other setup pages, and links to them.  But it doesn't fill in what I'm wondering about.  I can't contribute yet--I'm still confused!  I just try plausible things until I stop getting error messages. :-)</p>",
        "id": 463891671,
        "sender_full_name": "mars0i",
        "timestamp": 1724196344
    },
    {
        "content": "<p>In the first post above, I described a puzzling problem whose essence was that I was unable to commit the files that <code>lake</code> had created.</p>\n<p>It turns out that the problem was that I had created my new Lean project inside of a larger project.  That is definitely what I wanted to do.  However,  I didn't know that <code>lake new</code> and <code>lake init</code> set up a new git repo, including a .git directory and its contents.  That means that when I ran git on the larger project, which now contained the subdirectory that <code>lake</code> created, git was unwilling to incorporate the new Lean project.  It saw that the subdirectory had its own .git folder, and wouldn't do anything with the subdirectory.  </p>\n<p>The solution was to delete the .git folder that <code>lake</code> created, as explained here:<br>\n<a href=\"https://stackoverflow.com/questions/56873278/how-to-fix-error-filename-does-not-have-a-commit-checked-out-fatal-adding\">https://stackoverflow.com/questions/56873278/how-to-fix-error-filename-does-not-have-a-commit-checked-out-fatal-adding</a></p>\n<p>(I can't blame Lake for this.  It's just something I'd never encountered.  Seems very weird if you don't know what's going on, but it's easy to fix once you understand the issue.)</p>",
        "id": 463923626,
        "sender_full_name": "mars0i",
        "timestamp": 1724209326
    },
    {
        "content": "<p>I'm working on notes for myself on how to set up a project in this way, and will post here for feedback when my understanding seems stable.</p>",
        "id": 463929017,
        "sender_full_name": "mars0i",
        "timestamp": 1724211732
    },
    {
        "content": "<p>Ah, I see. That's a case we didn't take into account. Do you think it would have helped if <a href=\"https://github.com/leanprover-community/mathlib4/wiki/Using-mathlib4-as-a-dependency\">https://github.com/leanprover-community/mathlib4/wiki/Using-mathlib4-as-a-dependency</a> noted that the <code>lake new</code> command creates a git repo, or is that not where you were looking? Also, I think <code>lake</code> itself should warn in that case, I'll check if there's an issue filed yet</p>",
        "id": 463968124,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1724225296
    },
    {
        "content": "<p>Commented on <a href=\"https://github.com/leanprover/lean4/issues/2758\">https://github.com/leanprover/lean4/issues/2758</a></p>",
        "id": 463969174,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1724225663
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"307953\">@Ruben Van de Velde</span>, thanks for adding the comment in the issue, and for noting the remark about creating a git repo on that page.  I probably looked at that page at some point, but I didn't use the command listed just above and probably didn't notice the mention of initializing a git repo.  Not realizing I'd initialized a git repo caused lots of confusion on my part.  </p>\n<p>I would rather that the fact that a git repo is initialized be something that jumps out at you.  I've got git projects using at least half a dozen languages, and this is the first time that the standard initialization tool also set up a git repo.  It's not necessarily bad, but it's unexpected.  On the other hand, it's not clear to me why <code>lake</code> should initialize a git repo.  Is there some unusual git configuration that Lean needs?</p>\n<p>It's not just embedded projects where this matters.  In general, <code>lake</code> creating a git repository might not be what a user wants, even if they are going to put their project in git.  It <em>is</em> the default behavior at this point, so my feeling is just that it should be very clear that it's the default, and it should be easy to disable it.</p>\n<p>My procedure up until now has been, roughly: </p>\n<ul>\n<li>Start playing around with some code, then decide I ought to put it in a git repo.  </li>\n<li>Create a repo on github.</li>\n<li>Clone the repo on git to my local machine.  </li>\n<li>Maybe use the language's build or initialization tool to set up directories and some config files in the repo.</li>\n<li>Copy some of my source files into the local repo.</li>\n<li><code>git add</code> the files.</li>\n<li>Push to github.</li>\n</ul>\n<p>I don't think I should use that procedure with <code>lake</code>, though.  I need to let <code>lake</code> initialize the git repo.  So either I have to change my procedure, or <code>lake</code> needs to change.  I'm happy to change, but I'm still not sure what to do.  However, it would be better if I could just follow a procedure that works with every non-Lean project.</p>\n<p>More specifically, I don't know enough about git to know what I should do to connect a Lean repo to a github repo.  I did some investigation and tried some ideas that might work, but at this point I'm stuck wondering about the fact that if I create a repo on github, it initializes a .git directory, but lake is also doing that, and I don't know enough to know whether that's a problem.  Maybe the answer is that it's not--either .git directory will work--since I know that I can delete the .git directory in a subsidiary Lean project, as discussed previously.  There's probably a standard procedure for working with github that Lean users are used to, and I just don't know what it is.</p>\n<p>(It's possible that there are lots of other languages where a similar procedure to Lean's is used, and I'm just not used to it.  For all I know it's one of those Microsoft-ish culture vs. unix-ish culture things, and I just happen to have spent more time in the latter.)</p>",
        "id": 464145569,
        "sender_full_name": "mars0i",
        "timestamp": 1724267856
    },
    {
        "content": "<p>Any of these workflows should work fine:</p>\n<ol>\n<li>\n<p>Github first</p>\n<ul>\n<li>Create a repo on github</li>\n<li>Clone that repo</li>\n<li>Run <code>lake init</code> inside that repo</li>\n<li>Push to github</li>\n</ul>\n</li>\n<li>\n<p>Lake first</p>\n<ul>\n<li>Create a repo with <code>lake new</code></li>\n<li>Create an <em>empty</em> repo on github. Don't tick the boxes about licenses / readme / gitignore.</li>\n<li>Push to github</li>\n</ul>\n</li>\n<li>\n<p>git first</p>\n<ul>\n<li>Create a repo with <code>git init</code></li>\n<li>Create an <em>empty</em> repo on github. Don't tick the boxes about licenses / readme / gitignore.</li>\n<li>Run <code>lake init</code> inside that repo</li>\n<li>Push to github</li>\n</ul>\n</li>\n</ol>",
        "id": 464148129,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1724268616
    },
    {
        "content": "<p>Excellent--thanks <span class=\"user-mention\" data-user-id=\"310045\">@Eric Wieser</span> !  That's what I needed.</p>\n<p>Does it seem reasonable to add that information to one of the setup information pages?  I'd be happy to post a PR or edit or whatever's needed, if that would make sense.</p>",
        "id": 464148544,
        "sender_full_name": "mars0i",
        "timestamp": 1724268731
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"617444\">mars0i</span> <a href=\"#narrow/stream/113489-new-members/topic/Confused.20about.20proper.20way.20to.20set.20up.20git.20repo/near/464145569\">said</a>:</p>\n<blockquote>\n<p>It's not necessarily bad, but it's unexpected.  On the other hand, it's not clear to me why <code>lake</code> should initialize a git repo.  Is there some unusual git configuration that Lean needs?</p>\n</blockquote>\n<p>Cargo creates a git repo by default for new projects, but it does provide an additional option <code>--vcs none</code> to disable it. There's obviously a convenience factor that benefits probably a large majority of users, but aside from that I think the benefit is that you get a proper default <code>.gitignore</code> file.</p>",
        "id": 464148656,
        "sender_full_name": "Chris Bailey",
        "timestamp": 1724268772
    },
    {
        "content": "<p>Ah, OK. I've never used Rust.  But it's obviously something that a lot of people use.</p>",
        "id": 464148907,
        "sender_full_name": "mars0i",
        "timestamp": 1724268845
    },
    {
        "content": "<p>I guess that letting <code>lake</code> create the .gitignore avoids having to maintain default .gitignores on github and gitlab and whatever other sites people might use, or local company servers, etc.</p>",
        "id": 464149043,
        "sender_full_name": "mars0i",
        "timestamp": 1724268912
    },
    {
        "content": "<p>I think it just prevents people (again probably the majority of users) from having to spend time figuring out what they should put in a Lean 4 .gitignore to not accidentally commit a bunch of build artifacts or dependency data.</p>",
        "id": 464149825,
        "sender_full_name": "Chris Bailey",
        "timestamp": 1724269202
    },
    {
        "content": "<p>But I agree an extra CLI flag like the <code>--vcs none</code> thing would be a welcome addition.</p>",
        "id": 464149922,
        "sender_full_name": "Chris Bailey",
        "timestamp": 1724269240
    },
    {
        "content": "<p>You can make a RFC on the lean4 repository.</p>",
        "id": 464150049,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1724269295
    },
    {
        "content": "<p>Hi all,<br>\nI'm new to Lean, and I've got a problem with a Github action.<br>\nI created a new project as described here <a href=\"https://leanprover-community.github.io/install/project.html#creating-a-lean-project\">https://leanprover-community.github.io/install/project.html#creating-a-lean-project</a> using <code>lake +leanprover/lean4:stable new my_project math</code>. This guide says that I should create a folder <code>MyProject</code> and put files into that folder, but in fact lake has created the folder <code>my_project</code> instead. OK, I renamed that folder to <code>MyProject</code>, adjusted accordingly the import in <code>my_project.lean</code> and default_target in <code>lakefile.lean</code>, and then everything worked.<br>\nThen I pushed the project to Github. The project includes the file <code>.github/workflows/lean_action_ci.yml</code> created by lake, and its entire content is:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">name</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"w\"> </span><span class=\"n\">Action</span><span class=\"w\"> </span><span class=\"n\">CI</span>\n\n<span class=\"n\">on</span><span class=\"o\">:</span>\n<span class=\"w\">  </span><span class=\"n\">push</span><span class=\"o\">:</span>\n<span class=\"w\">  </span><span class=\"n\">pull_request</span><span class=\"o\">:</span>\n<span class=\"w\">  </span><span class=\"n\">workflow_dispatch</span><span class=\"o\">:</span>\n\n<span class=\"n\">jobs</span><span class=\"o\">:</span>\n<span class=\"w\">  </span><span class=\"n\">build</span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">runs</span><span class=\"bp\">-</span><span class=\"n\">on</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ubuntu</span><span class=\"bp\">-</span><span class=\"n\">latest</span>\n\n<span class=\"w\">    </span><span class=\"n\">steps</span><span class=\"o\">:</span>\n<span class=\"w\">      </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">uses</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">actions</span><span class=\"bp\">/</span><span class=\"n\">checkout</span><span class=\"bp\">@</span><span class=\"n\">v4</span>\n<span class=\"w\">      </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">uses</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">leanprover</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">-</span><span class=\"n\">action</span><span class=\"bp\">@</span><span class=\"n\">v1</span>\n</code></pre></div>\n<p>I guess this causes Github to run some checks. The thing is that the checks fail. The log says:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">Run</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Lake</span><span class=\"w\"> </span><span class=\"n\">Build</span>\n<span class=\"n\">Lake</span><span class=\"w\"> </span><span class=\"n\">Build</span><span class=\"w\"> </span><span class=\"n\">Output</span>\n<span class=\"w\">  </span><span class=\"bp\">✖</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">?/?</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Computing</span><span class=\"w\"> </span><span class=\"n\">build</span><span class=\"w\"> </span><span class=\"n\">jobs</span>\n<span class=\"w\">  </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">no</span><span class=\"w\"> </span><span class=\"n\">such</span><span class=\"w\"> </span><span class=\"n\">file</span><span class=\"w\"> </span><span class=\"n\">or</span><span class=\"w\"> </span><span class=\"n\">directory</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">error</span><span class=\"w\"> </span><span class=\"n\">code</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"n\">file</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">././././</span><span class=\"n\">MyProject</span><span class=\"bp\">.</span><span class=\"n\">lean</span>\n<span class=\"w\">  </span><span class=\"n\">Some</span><span class=\"w\"> </span><span class=\"n\">required</span><span class=\"w\"> </span><span class=\"n\">builds</span><span class=\"w\"> </span><span class=\"n\">logged</span><span class=\"w\"> </span><span class=\"n\">failures</span><span class=\"o\">:</span>\n<span class=\"w\">  </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Computing</span><span class=\"w\"> </span><span class=\"n\">build</span><span class=\"w\"> </span><span class=\"n\">jobs</span>\n<span class=\"w\">  </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">build</span><span class=\"w\"> </span><span class=\"n\">failed</span>\n<span class=\"w\">  </span><span class=\"n\">Error</span><span class=\"o\">:</span><span class=\"w\">  </span><span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"n\">build</span><span class=\"w\"> </span><span class=\"n\">failed</span>\n</code></pre></div>\n<p>Indeed, there is no file <code>MyProject.lean</code> -- there is only <code>my_project.lean</code>.<br>\nWhat should I do to fix this error?</p>",
        "id": 491175574,
        "sender_full_name": "Andrei Zabolotskii",
        "timestamp": 1735478163
    },
    {
        "content": "<p>What do you have in your <code>my_project</code> folder now? Renaming anything sounds suspicious. Specifically, here's what I get from running the command on the page:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">⊙</span><span class=\"w\">  </span><span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"n\">leanprover</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"o\">:</span><span class=\"n\">stable</span><span class=\"w\"> </span><span class=\"n\">new</span><span class=\"w\"> </span><span class=\"n\">my_project</span><span class=\"w\"> </span><span class=\"n\">math</span><span class=\"w\">                                                                                                                                                                                                                                                                                                              </span><span class=\"n\">julian</span><span class=\"bp\">@</span><span class=\"n\">Mac</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">syncing</span><span class=\"w\"> </span><span class=\"n\">channel</span><span class=\"w\"> </span><span class=\"n\">updates</span><span class=\"w\"> </span><span class=\"n\">for</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">stable'</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">latest</span><span class=\"w\"> </span><span class=\"n\">update</span><span class=\"w\"> </span><span class=\"n\">on</span><span class=\"w\"> </span><span class=\"n\">stable</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">lean</span><span class=\"w\"> </span><span class=\"n\">version</span><span class=\"w\"> </span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">14</span><span class=\"bp\">.</span><span class=\"m\">0</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">downloading</span><span class=\"w\"> </span><span class=\"n\">component</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">lean'</span>\n<span class=\"n\">Total</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mf\">227.2</span><span class=\"w\"> </span><span class=\"n\">MiB</span><span class=\"w\"> </span><span class=\"n\">Speed</span><span class=\"o\">:</span><span class=\"w\">  </span><span class=\"mf\">18.4</span><span class=\"w\"> </span><span class=\"n\">MiB</span><span class=\"bp\">/</span><span class=\"n\">s</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">installing</span><span class=\"w\"> </span><span class=\"n\">component</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">lean'</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">downloading</span><span class=\"w\"> </span><span class=\"n\">mathlib</span><span class=\"w\"> </span><span class=\"ss\">`lean</span><span class=\"bp\">-</span><span class=\"n\">toolchain</span><span class=\"bp\">`</span><span class=\"w\"> </span><span class=\"n\">file</span>\n\n<span class=\"bp\">~/</span><span class=\"n\">Desktop</span>\n<span class=\"bp\">⊙</span><span class=\"w\">  </span><span class=\"n\">cd</span><span class=\"w\"> </span><span class=\"n\">my_project</span><span class=\"w\">                                                                                                                                                                                                                                                                                                                                                  </span><span class=\"n\">julian</span><span class=\"bp\">@</span><span class=\"n\">Mac</span>\n\n<span class=\"bp\">~/</span><span class=\"n\">Desktop</span><span class=\"bp\">/</span><span class=\"n\">my_project</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">git</span><span class=\"w\"> </span><span class=\"n\">repository</span><span class=\"w\"> </span><span class=\"n\">on</span><span class=\"w\"> </span><span class=\"n\">main</span>\n<span class=\"bp\">⊙</span><span class=\"w\">  </span><span class=\"n\">ls</span><span class=\"w\">                                                                                                                                                                                                                                                                                                                                                             </span><span class=\"n\">julian</span><span class=\"bp\">@</span><span class=\"n\">Mac</span>\n<span class=\"n\">MyProject</span><span class=\"w\">  </span><span class=\"n\">MyProject</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"w\">  </span><span class=\"n\">README</span><span class=\"bp\">.</span><span class=\"n\">md</span><span class=\"w\">  </span><span class=\"n\">lakefile</span><span class=\"bp\">.</span><span class=\"n\">toml</span><span class=\"w\">  </span><span class=\"n\">lean</span><span class=\"bp\">-</span><span class=\"n\">toolchain</span>\n</code></pre></div>",
        "id": 491178293,
        "sender_full_name": "Julian Berman",
        "timestamp": 1735480612
    },
    {
        "content": "<p>The files list is <code>.gitignore my_project.lean lake-manifest.json lakefile.lean lean-toolchain README.md</code>, and the folders are <code>.github</code>, <code>.lake</code>, and <code>MyProject</code> (which was called <code>my_project</code> before I renamed it). After creating the project I also ran <code>lake update</code>, as per the guide, which added more files, I guess.</p>",
        "id": 491179022,
        "sender_full_name": "Andrei Zabolotskii",
        "timestamp": 1735481191
    },
    {
        "content": "<p>Oh, that's because you didn't follow the instructions</p>",
        "id": 491179266,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1735481419
    },
    {
        "content": "<p>Why did you run <code>lake +leanprover/lean4:stable new my_project math</code> rather than <code>lake +leanprover/lean4:nightly-2024-04-24 new my_project math</code> as instructed?</p>",
        "id": 491179285,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1735481451
    },
    {
        "content": "<p>Cause stable means good, isn't it <span aria-label=\"flushed\" class=\"emoji emoji-1f633\" role=\"img\" title=\"flushed\">:flushed:</span></p>",
        "id": 491179336,
        "sender_full_name": "Andrei Zabolotskii",
        "timestamp": 1735481520
    },
    {
        "content": "<p>Clearly not</p>",
        "id": 491179395,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1735481555
    },
    {
        "content": "<p>:-D</p>",
        "id": 491179403,
        "sender_full_name": "Andrei Zabolotskii",
        "timestamp": 1735481565
    },
    {
        "content": "<p>Anyway, the answer to my question was to rename my_project.lean to MyProject.lean. lake normally creates MyProject.lean, as can be seen from Julian's message, and that's what lake did when I ran it again. Thanks!</p>",
        "id": 491180545,
        "sender_full_name": "Andrei Zabolotskii",
        "timestamp": 1735482548
    }
]