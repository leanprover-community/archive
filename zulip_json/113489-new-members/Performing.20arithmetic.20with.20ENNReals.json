[
    {
        "content": "<p>I am working with the PMF defined in Mathlib.Probability.ProbabilityMassFunction.Basic as:</p>\n<div class=\"codehilite\"><pre><span></span><code>def PMF.{u} (Œ± : Type u) : Type u := { f : Œ± ‚Üí ‚Ñù‚â•0‚àû // HasSum f 1 }\n</code></pre></div>\n\n<p>This involves a function into the extended non-negative reals. Currently, I don't need to work with infinity; every real number I am dealing with is finite.</p>\n<p>A lot of basic arithmetic statements that would be easy to prove seem to require a lot more effort when the objects involved are typed as extended non-negative reals. For instance, this lemma is handled \"by ring:\"</p>\n<div class=\"codehilite\"><pre><span></span><code>lemma test (lmd : Real): 1/2 + 1/2 + lmd - lmd = 1/2 + lmd + (1/2 - lmd) := by ring\n</code></pre></div>\n\n<p>But this statement is not:</p>\n<div class=\"codehilite\"><pre><span></span><code>have h1: (2‚Åª¬π : ENNReal) + 2‚Åª¬π + ‚Üëlmd - ‚Üëlmd = 2‚Åª¬π + ‚Üëlmd + (2‚Åª¬π - ‚Üëlmd) := by sorry\n</code></pre></div>\n\n<p>(In the above statement, lmd is a NNReal less than or equal to 1/2.)</p>\n<p>Is there an easy way to get Lean to deal with the coercions into the extended non-negative reals? After reading <a href=\"https://proofassistants.stackexchange.com/questions/4113/how-to-perform-type-conversion-coercion-in-lean-4\">this</a> stack exchange answer, I tried \"norm_cast\" (together with \"lift\"), but couldn't find a way to get it to work.</p>\n<p>Thanks a lot!</p>",
        "id": 525936290,
        "sender_full_name": "Robert Shlyakhtenko",
        "timestamp": 1750953414
    },
    {
        "content": "<p>That seems like a bad definition</p>",
        "id": 525939158,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1750954389
    },
    {
        "content": "<p>Yes, I feel like I noticed this too recently</p>\n<p><a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Statistical.20distance.20for.20.60PMF.60s.3F/near/525237427\">#Is there code for X? &gt; Statistical distance for &#96;PMF&#96;s? @ üí¨</a></p>",
        "id": 525945018,
        "sender_full_name": "Bolton Bailey",
        "timestamp": 1750956504
    },
    {
        "content": "<p>I feel at the very least, wrt<br>\n<code>FunLike (PMF Œ±) Œ± ‚Ñù‚â•0‚àû</code><br>\nWe could have additionally/instead:<br>\n<code>FunLike (PMF Œ±) Œ± ‚Ñù‚â•0</code></p>",
        "id": 525945516,
        "sender_full_name": "Bolton Bailey",
        "timestamp": 1750956676
    },
    {
        "content": "<p>You can't have two <code>FunLike</code> instances. Finite measures are indeed coerced as functions taking values in <code>NNReal</code> (<a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/MeasureTheory/Measure/FiniteMeasure.html#MeasureTheory.FiniteMeasure.instFunLike\">MeasureTheory.FiniteMeasure.instFunLike</a>). On the same idea there is also <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=MeasureTheory.Measure.real#doc\">docs#MeasureTheory.Measure.real</a>.</p>",
        "id": 525946443,
        "sender_full_name": "Etienne Marion",
        "timestamp": 1750956985
    },
    {
        "content": "<p>How about make a function that takes a <code>f : Œ± ‚Üí ‚Ñù‚â•0</code> along with a proof of <code>HasSum f 1</code> and returns a <code>PMF Œ±</code></p>",
        "id": 525946729,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1750957091
    },
    {
        "content": "<p>This was change awhile back to make manipulating <code>tsum</code>s easier without needing to show convergence and to align <code>PMF.toOuterMeasure</code> with the <code>ENNReal</code> in <code>OuterMeasure.measureOf</code>, but that did make more basic arithmetic difficult in a lot of cases</p>",
        "id": 525968825,
        "sender_full_name": "Devon Tuma",
        "timestamp": 1750966236
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"932451\">Robert Shlyakhtenko</span> <a href=\"#narrow/channel/113489-new-members/topic/Performing.20arithmetic.20with.20ENNReals/near/525936290\">said</a>:</p>\n<blockquote>\n<p>But this statement is not [provable by ring]</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h1</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">‚Åª¬π</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ENNReal</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"bp\">‚Åª¬π</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"bp\">‚Üë</span><span class=\"n\">lmd</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"bp\">‚Üë</span><span class=\"n\">lmd</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"bp\">‚Åª¬π</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"bp\">‚Üë</span><span class=\"n\">lmd</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">‚Åª¬π</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"bp\">‚Üë</span><span class=\"n\">lmd</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>(In the above statement, lmd is a NNReal less than or equal to 1/2.)</p>\n</blockquote>\n<p>This needs <a href=\"https://github.com/leanprover-community/mathlib4/pull/9915\">#9915</a></p>",
        "id": 525969492,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1750966597
    },
    {
        "content": "<p>Maybe <code>field_simp</code> is worth a mention:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">lmd</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">NNReal</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">lmd</span><span class=\"w\"> </span><span class=\"bp\">‚â§</span><span class=\"w\">  </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ENNReal</span><span class=\"o\">))</span><span class=\"w\">  </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">‚Åª¬π</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ENNReal</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"bp\">‚Åª¬π</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"bp\">‚Üë</span><span class=\"n\">lmd</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"bp\">‚Üë</span><span class=\"n\">lmd</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"bp\">‚Åª¬π</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"bp\">‚Üë</span><span class=\"n\">lmd</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">‚Åª¬π</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"bp\">‚Üë</span><span class=\"n\">lmd</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">field_simp</span>\n</code></pre></div>",
        "id": 525971737,
        "sender_full_name": "Peter Hansen",
        "timestamp": 1750967613
    },
    {
        "content": "<p>Thanks a lot for the helpful responses! Too bad that <a href=\"https://github.com/leanprover-community/mathlib4/pull/9915\">#9915</a> has not been merged yet.</p>",
        "id": 526127325,
        "sender_full_name": "Robert Shlyakhtenko",
        "timestamp": 1751045390
    },
    {
        "content": "<p>I hope <a href=\"https://github.com/leanprover-community/mathlib4/pull/9915\">#9915</a> gets merged soon</p>",
        "id": 526127470,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1751045443
    },
    {
        "content": "<p>Is it even ready for review? The draft status and please-adopt / WIP tags suggest otherwise...</p>",
        "id": 526128092,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1751045692
    },
    {
        "content": "<p>I don't know, I worked on it a bit and I got CI succeeding</p>",
        "id": 526128175,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1751045725
    },
    {
        "content": "<p>I've only just skimmed it but it seems reasonably ready for review, so I've removed the WIP and please-adopt tags and removed the draft status as well. In return, do you mind \"taking over\" the PR? I guess you might have to migrate it to a branch on your fork at some point though.</p>",
        "id": 526128891,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1751046098
    },
    {
        "content": "<p>I don't know how to do that</p>",
        "id": 526129390,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1751046339
    },
    {
        "content": "<p>Migrating a branch to a fork? <code>scripts/migrate_to_fork.py</code> can do it for you, but don't worry about too much about it for now. Let's see if someone reviews the PR first.</p>",
        "id": 526131312,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1751047285
    },
    {
        "content": "<p>But I'm not the person who created the PR, I don't know if that will cause problems</p>",
        "id": 526131586,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1751047401
    },
    {
        "content": "<p>If the script doesn‚Äôt work, we can walk you through doing it manually. (Ultimately it‚Äôs just pushing a copy of the branch to your fork and opening a new PR from there)</p>",
        "id": 526131907,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1751047539
    },
    {
        "content": "<p>Sorry if this is a dumb question, but is there a way for me to merge the changes in <a href=\"https://github.com/leanprover-community/mathlib4/pull/9915\">#9915</a> locally onto my computer for the time being?</p>\n<p>Edit: I figured this out, and am now trying to write the proof again...</p>",
        "id": 526138227,
        "sender_full_name": "Robert Shlyakhtenko",
        "timestamp": 1751050458
    },
    {
        "content": "<p>I hadn't noticed that <span class=\"user-mention\" data-user-id=\"816344\">@Aaron Liu</span> got the PR building, I'll try to find time to review it</p>",
        "id": 526222020,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1751136149
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"450939\">Peter Hansen</span> <a href=\"#narrow/channel/113489-new-members/topic/Performing.20arithmetic.20with.20ENNReals/near/525971737\">zei</a>:</p>\n<blockquote>\n<p>Maybe <code>field_simp</code> is worth a mention:</p>\n<p><div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">lmd</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">NNReal</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">lmd</span><span class=\"w\"> </span><span class=\"bp\">‚â§</span><span class=\"w\">  </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ENNReal</span><span class=\"o\">))</span><span class=\"w\">  </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">‚Åª¬π</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ENNReal</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"bp\">‚Åª¬π</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"bp\">‚Üë</span><span class=\"n\">lmd</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"bp\">‚Üë</span><span class=\"n\">lmd</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"bp\">‚Åª¬π</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"bp\">‚Üë</span><span class=\"n\">lmd</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">‚Åª¬π</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"bp\">‚Üë</span><span class=\"n\">lmd</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">field_simp</span>\n</code></pre></div><br>\n</p>\n</blockquote>\n<p><code>field_simp</code> is not that powerful for me. For example, it cannot prove: </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">test_inv_div_mul_div</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">‚Ñï</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">‚Üë</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ENNReal</span><span class=\"o\">))</span><span class=\"bp\">‚Åª¬π</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"bp\">‚Üë</span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ENNReal</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">‚Üë</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ENNReal</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">‚Üë</span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ENNReal</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">‚Üë</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ENNNReal</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 526824506,
        "sender_full_name": "Willem vanhulle",
        "timestamp": 1751468907
    },
    {
        "content": "<p><code>field_simp</code> works great for fields (like the reals) (the clue is in the name) but <code>ENNReal</code> is not a field (so your mileage may vary) (basically it's useful \"sometimes\").</p>",
        "id": 526836558,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1751472392
    },
    {
        "content": "<p>I am trying to build a tactic that can solve most common expressions in ENNReal, but maybe someone else has tried already? I am new to tactics, so I am struggling making the normalization of arithmetic ENNReal expressions unique to enable goal with assumption matching.</p>",
        "id": 526838092,
        "sender_full_name": "Willem vanhulle",
        "timestamp": 1751472882
    },
    {
        "content": "<p>I went to a course on tactic-writing recently and whilst I still would not say that I can write tactics at all, one thing I learnt was the first step, which is to first write the tests, and then write the Lean proofs of the tests which you want the tactic to find; this might involve proving new lemmas along the way (manually, not using the tactic). Once you have this, you're in a position to start thinking about how to write the tactic.</p>",
        "id": 526839549,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1751473391
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/channel/113489-new-members/topic/Performing.20arithmetic.20with.20ENNReals/near/526839549\">zei</a>:</p>\n<blockquote>\n<p>I went to a course on tactic-writing recently and whilst I still would not say that I can write tactics at all, one thing I learnt was the first step, which is to first write the tests, and then write the Lean proofs of the tests which you want the tactic to find; this might involve proving new lemmas along the way (manually, not using the tactic). Once you have this, you're in a position to start thinking about how to write the tactic.</p>\n</blockquote>\n<p>Where do you find this kind of courses? I also wrote a lot of tests, but is hard to write generic tactics that work with many types of expressions.</p>",
        "id": 526871288,
        "sender_full_name": "Willem vanhulle",
        "timestamp": 1751486450
    },
    {
        "content": "<p>Oh it was an in-person thing at my university, we have quite a big Lean group there.</p>",
        "id": 526873122,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1751487416
    },
    {
        "content": "<p>We recorded <span class=\"user-mention\" data-user-id=\"260507\">@Heather Macbeth</span>'s version of this course at the Simons workshop; it'll hopefully make its way to YouTube soon, so others can also learn from her!</p>",
        "id": 526874514,
        "sender_full_name": "Alex Kontorovich",
        "timestamp": 1751488083
    },
    {
        "content": "<p>I implemented a tactic to simplify ENNReal expressions: <a href=\"https://github.com/wvhulle/ennreal-arith\">https://github.com/wvhulle/ennreal-arith</a></p>\n<p>It is probably incredibly messy (my first Lean package).</p>",
        "id": 527283648,
        "sender_full_name": "Willem vanhulle",
        "timestamp": 1751724170
    },
    {
        "content": "<p>I managed to use it successfully for my Monty Hall frequentist solution <a href=\"https://github.com/wvhulle/learn-lean-riddles/blob/main/RiddleProofs/MontyHall/Dilemma.lean\">https://github.com/wvhulle/learn-lean-riddles/blob/main/RiddleProofs/MontyHall/Dilemma.lean</a></p>",
        "id": 527283699,
        "sender_full_name": "Willem vanhulle",
        "timestamp": 1751724215
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"928352\">Willem vanhulle</span> <a href=\"#narrow/channel/113489-new-members/topic/Performing.20arithmetic.20with.20ENNReals/near/527283648\">said</a>:</p>\n<blockquote>\n<p>I implemented a tactic to simplify ENNReal expressions: <a href=\"https://github.com/wvhulle/ennreal-arith\">https://github.com/wvhulle/ennreal-arith</a></p>\n<p>It is probably incredibly messy (my first Lean package).</p>\n</blockquote>\n<p>I am very excited to see further automation towards working with ENNReal; this is sorely needed. I wonder about the next step: what would it take to make this (or something similar) part of mathlib?</p>",
        "id": 527291757,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1751733364
    },
    {
        "content": "<p>I can think of the following being useful:</p>\n<ul>\n<li>overall approach: discuss the high-level strategy first. Your repository doesn't mention how the tactic works; it could be useful to start a discussion about this on zulip (to identify an approach that's robust enough)</li>\n<li>documentation: the tactic implementation is split across half a dozen files, so I'm having a hard time getting an overview. An overview of the separate tactics you're writing, what they do (and do not do) and how one is supposed to use them could help. (To explain your current approach for the previous step, this will also help.)</li>\n<li>implementation. I could imagine splitting implementation into one file (or perhaps several) and the tests elsewhere may help. (I don't have a strong opinion on this yet.)</li>\n</ul>",
        "id": 527291961,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1751733614
    },
    {
        "content": "<p>One quick observation: you seem to be using the field_simp tactic (so, building on simp --- I presume). That tactic is currently being rewritten by <span class=\"user-mention\" data-user-id=\"585783\">@Arend Mellendijk</span>, <span class=\"user-mention\" data-user-id=\"260507\">@Heather Macbeth</span>  and myself (using a different strategy, more similar to the <code>module</code> tactic). I wonder if building a tactic on simp is the most robust approach.</p>",
        "id": 527292032,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1751733710
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"634338\">@Michael Rothgang</span>,  <span class=\"user-mention\" data-user-id=\"110038\">@Kevin Buzzard</span>  I have refactored the <code>ennreal_arith</code> tactic a lot. But now I am kind of stuck with a lot of if then else on the goal shape. Would it be best if I switch to <code>quote4</code> / <code>qq</code> for pattern matching on expressions? I saw it was used in the definition of Mathlib's <code>ring1</code>, but it is a bit difficult for me to understand.</p>\n<p>Here is an example of the code using if then instead of matching <a href=\"https://github.com/wvhulle/ennreal-arith/blob/main/ENNRealArith/ArithmeticCore.lean\">https://github.com/wvhulle/ennreal-arith/blob/main/ENNRealArith/ArithmeticCore.lean</a></p>",
        "id": 528054672,
        "sender_full_name": "Willem vanhulle",
        "timestamp": 1752145253
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/channel/113489-new-members/topic/Performing.20arithmetic.20with.20ENNReals/near/526222020\">said</a>:</p>\n<blockquote>\n<p>I hadn't noticed that <span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> got <a href=\"https://github.com/leanprover-community/mathlib4/pull/9915\">#9915</a> building, I'll try to find time to review it</p>\n</blockquote>\n<p>I've brought this back up to speed with master, so it should build again.</p>",
        "id": 528548232,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1752431531
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"634338\">@Michael Rothgang</span>  Well, I have rewritten all of the tactic logic. Before, I relied too much on LLM output. Now I think I know better how all the tactcs work internally. <a href=\"https://github.com/wvhulle/ennreal-arith\">https://github.com/wvhulle/ennreal-arith</a></p>",
        "id": 528904549,
        "sender_full_name": "Willem vanhulle",
        "timestamp": 1752598711
    }
]