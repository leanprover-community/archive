[
    {
        "content": "<p>Hello, I'm playing around with Galois fields, and was wondering how elements of the GF are represented. In that, looking at the implementation, GF's are defined in the standard way as the splitting field of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>X</mi><msup><mi>p</mi><mi>n</mi></msup></msup><mo>−</mo><mi>X</mi></mrow><annotation encoding=\"application/x-tex\">X^{p^n} - X</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9633em;vertical-align:-0.0833em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.88em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">p</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7385em;\"><span style=\"top:-2.931em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span></span></span></span> (w.r.t <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mi mathvariant=\"double-struck\">Z</mi><mi mathvariant=\"normal\">/</mi><mi>p</mi><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">[</mo><mi>X</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">(\\mathbb{Z}/p)[X]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathbb\">Z</span><span class=\"mord\">/</span><span class=\"mord mathnormal\">p</span><span class=\"mclose\">)</span><span class=\"mopen\">[</span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"mclose\">]</span></span></span></span>). Quickly testing, I get that<code>#check ((7 :ℕ ): GaloisField 7 2)</code> is a valid element in GF(7,2) (as expected), but when I attempt:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ZMod</span><span class=\"w\"> </span><span class=\"mi\">7</span><span class=\"o\">)[</span><span class=\"n\">X</span><span class=\"o\">]):</span><span class=\"w\"> </span><span class=\"n\">GaloisField</span><span class=\"w\"> </span><span class=\"mi\">7</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>Or anything similar involving some element of <code>(ZMod 7)[X]</code>, i get that:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">type</span><span class=\"w\"> </span><span class=\"n\">mismatch</span>\n<span class=\"w\">  </span><span class=\"n\">X</span>\n<span class=\"n\">has</span><span class=\"w\"> </span><span class=\"n\">type</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">ZMod</span><span class=\"w\"> </span><span class=\"mi\">7</span><span class=\"o\">)[</span><span class=\"n\">X</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span>\n<span class=\"n\">but</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">expected</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">type</span>\n<span class=\"w\">  </span><span class=\"n\">GaloisField</span><span class=\"w\"> </span><span class=\"mi\">7</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span>\n</code></pre></div>\n<p>So, it seems that any lifting into the splitting field isn't handled automatically. Is there some explicit function to convert this element of <code>(ZMod p)[X]</code>to an element in the GF?</p>\n<p>Thanks</p>",
        "id": 511847601,
        "sender_full_name": "Riyaz Ahuja",
        "timestamp": 1744494827
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=GaloisField#doc\">docs#GaloisField</a></p>",
        "id": 511847784,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1744495017
    },
    {
        "content": "<p>Does <code>algebraMap</code> work?</p>",
        "id": 511847795,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1744495030
    },
    {
        "content": "<p><code>GaloisField p n</code> is an algebra over <code>ZMod p</code>, but not over <code>(ZMod p)[X]</code></p>",
        "id": 511847899,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1744495106
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Polynomial</span>\n\n<span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fact</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">Prime</span><span class=\"w\"> </span><span class=\"mi\">7</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Fact</span><span class=\"bp\">.</span><span class=\"n\">mk</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">norm_num</span><span class=\"o\">)</span>\n\n<span class=\"sd\">/--</span>\n<span class=\"sd\">error: failed to synthesize</span>\n<span class=\"sd\">  Algebra (ZMod 7)[X] (GaloisField 7 2)</span>\n\n<span class=\"sd\">Additional diagnostic information may be available using the `set_option diagnostics true` command.</span>\n<span class=\"sd\">-/</span>\n<span class=\"bp\">#</span><span class=\"n\">guard_msgs</span><span class=\"w\"> </span><span class=\"k\">in</span>\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">algebraMap</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ZMod</span><span class=\"w\"> </span><span class=\"mi\">7</span><span class=\"o\">)[</span><span class=\"n\">X</span><span class=\"o\">])</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">GaloisField</span><span class=\"w\"> </span><span class=\"mi\">7</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 511848118,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1744495300
    },
    {
        "content": "<p>Mathlib isn't a computer algebra system. It's not even clear to me that these elements are \"represented\". Here's a maths question. Let k be a field with 2^37 elements. What \"is\" an element of k? I don't think this question makes sense. Lean's understanding of finite fields is closer to a mathematician's understanding of them rather than a computer algebra package's understanding. You can factor a polynomial and choose a root at random but I'm not sure that the elements are \"represented\" by anything.</p>",
        "id": 511848185,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1744495334
    },
    {
        "content": "<p>I see, this makes sense for a ITP implementation of finite fields.</p>",
        "id": 511848233,
        "sender_full_name": "Riyaz Ahuja",
        "timestamp": 1744495391
    },
    {
        "content": "<p>I'm working on making an interface for Macaulay2 for lean, and have been working on adding grobner basis support for more types (i.e. whatever macaulay2 is able to support). One such thing was finite fields, as well as quotient rings and the like. </p>\n<p>The idea here was if a lean user needed to, say, calculate ideal membership for some polynomials in some finite field, my tactic could parse that finite field into a galois field, which is then converted to macaulay2 galois fields, and eventually mapped back after the computation. M2 handles GF's using the same implementation of splitting fields as lean, so such a mapping should be pretty straightforward, I imagine?</p>",
        "id": 511848487,
        "sender_full_name": "Riyaz Ahuja",
        "timestamp": 1744495662
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/channel/113489-new-members/topic/Help.20on.20Galois.20Fields/near/511848185\">said</a>:</p>\n<blockquote>\n<p>Mathlib isn't a computer algebra system. It's not even clear to me that these elements are \"represented\". Here's a maths question. Let k be a field with 2^37 elements. What \"is\" an element of k? I don't think this question makes sense. Lean's understanding of finite fields is closer to a mathematician's understanding of them rather than a computer algebra package's understanding. You can factor a polynomial and choose a root at random but I'm not sure that the elements are \"represented\" by anything.</p>\n</blockquote>\n<p>As for this, if we're talking about this specific implementation of GF's, why wouldn't elements of the field be well-defined? I mean, its a quotient at the end of the day, and I would imagine that just as <code>a</code> is an element in the <a href=\"https://macaulay2.com/doc/Macaulay2/share/doc/Macaulay2/Macaulay2Doc/html/___G__F.html\">M2 implementation of GF's</a>, <code>Polynomial.X</code> should be in our implementation as well?</p>",
        "id": 511848832,
        "sender_full_name": "Riyaz Ahuja",
        "timestamp": 1744496026
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> <a href=\"#narrow/channel/113489-new-members/topic/Help.20on.20Galois.20Fields/near/511847899\">said</a>:</p>\n<blockquote>\n<p><code>GaloisField p n</code> is an algebra over <code>ZMod p</code>, but not over <code>(ZMod p)[X]</code></p>\n</blockquote>\n<p>Does this mean that I can only lift elements of <code>ZMod p</code> into the GF?</p>",
        "id": 511849037,
        "sender_full_name": "Riyaz Ahuja",
        "timestamp": 1744496215
    },
    {
        "content": "<p>I guess my real confusion here is what are the elements of <code>GaloisField p n</code>?</p>",
        "id": 511849056,
        "sender_full_name": "Riyaz Ahuja",
        "timestamp": 1744496246
    },
    {
        "content": "<p>They are elements of the splitting field</p>",
        "id": 511849068,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1744496258
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> <a href=\"#narrow/channel/113489-new-members/topic/Help.20on.20Galois.20Fields/near/511849068\">said</a>:</p>\n<blockquote>\n<p>They are elements of the splitting field</p>\n</blockquote>\n<p>And so they are elements of <code>MvPolynomial (SplittingFieldAux f.natDegree f) (ZMod p)</code>? What do those look like?</p>",
        "id": 511849202,
        "sender_full_name": "Riyaz Ahuja",
        "timestamp": 1744496400
    },
    {
        "content": "<p>They look like multivariate polynomials in <code>K</code> with indeterminates indexed by <code>SplittingFieldAux f.natDegree f</code></p>",
        "id": 511849366,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1744496553
    },
    {
        "content": "<p><del>And it looks like <code>SplittingFieldAux n f</code> is just <code>K</code> but with a different algebra instance</del></p>",
        "id": 511849495,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1744496720
    },
    {
        "content": "<p><del>So <code>MvPolynomial (SplittingFieldAux f.natDegree f) (ZMod p)</code> is multivariate polynomials in <code>ZMod p</code> with indeterminates indexed by <code>ZMod p</code></del></p>",
        "id": 511849567,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1744496773
    },
    {
        "content": "<p>and then take a quotient</p>",
        "id": 511849589,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1744496797
    },
    {
        "content": "<p>Shouldn't this just be the same as  some quotient of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mi mathvariant=\"double-struck\">Z</mi><mi mathvariant=\"normal\">/</mi><mi>p</mi><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">[</mo><mi>a</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">(\\mathbb{Z}/p)[a]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathbb\">Z</span><span class=\"mord\">/</span><span class=\"mord mathnormal\">p</span><span class=\"mclose\">)</span><span class=\"mopen\">[</span><span class=\"mord mathnormal\">a</span><span class=\"mclose\">]</span></span></span></span> though?</p>",
        "id": 511850179,
        "sender_full_name": "Riyaz Ahuja",
        "timestamp": 1744497390
    },
    {
        "content": "<p>So actually <code>SplittingFieldAux n f</code> is <code>AdjoinRoot f.removeFactor.removeFactor.....factor</code> and I just misread what the code was doing</p>",
        "id": 511850295,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1744497516
    },
    {
        "content": "<p>whoops</p>",
        "id": 511850319,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1744497549
    },
    {
        "content": "<p>So in the example of GF(3,2), we have our <code>f</code> as:<br>\n<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>x</mi><msup><mn>3</mn><mn>2</mn></msup></msup><mo>−</mo><mi>x</mi><mo>=</mo><mi>x</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo>+</mo><mn>1</mn><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">(</mo><mi>x</mi><mo>+</mo><mn>2</mn><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">(</mo><msup><mi>x</mi><mn>2</mn></msup><mo>+</mo><mn>1</mn><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">(</mo><msup><mi>x</mi><mn>2</mn></msup><mo>+</mo><mi>x</mi><mo>+</mo><mn>2</mn><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">(</mo><msup><mi>x</mi><mn>2</mn></msup><mo>+</mo><mn>2</mn><mi>x</mi><mo>+</mo><mn>2</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">x^{3^2}-x = x(x+1)(x+2)(x^2+1)(x^2+x+2)(x^2+2x+2)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0702em;vertical-align:-0.0833em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9869em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">3</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8913em;\"><span style=\"top:-2.931em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">)</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0641em;vertical-align:-0.25em;\"></span><span class=\"mord\">2</span><span class=\"mclose\">)</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0641em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">)</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6667em;vertical-align:-0.0833em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0641em;vertical-align:-0.25em;\"></span><span class=\"mord\">2</span><span class=\"mclose\">)</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7278em;vertical-align:-0.0833em;\"></span><span class=\"mord\">2</span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">2</span><span class=\"mclose\">)</span></span></span></span></p>\n<p>Then what does <code>SplittingFieldAux f.natDegree f</code> return?</p>",
        "id": 511850595,
        "sender_full_name": "Riyaz Ahuja",
        "timestamp": 1744497811
    },
    {
        "content": "<p>because I think I'm a bit lost on what this function is doing here</p>",
        "id": 511850607,
        "sender_full_name": "Riyaz Ahuja",
        "timestamp": 1744497825
    },
    {
        "content": "<p>and according to the CAS's, the lean representation of GF(3,2) should be something like <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mrow><mo stretchy=\"false\">(</mo><mi mathvariant=\"double-struck\">Z</mi><mi mathvariant=\"normal\">/</mi><mn>3</mn><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">[</mo><mi>x</mi><mo stretchy=\"false\">]</mo></mrow><mrow><msup><mi>x</mi><mn>2</mn></msup><mo>−</mo><mi>x</mi><mo>−</mo><mn>1</mn></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{(\\mathbb Z/3)[x]}{x^2-x-1}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.4133em;vertical-align:-0.4033em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.01em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">x</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7463em;\"><span style=\"top:-2.786em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mbin mtight\">−</span><span class=\"mord mathnormal mtight\">x</span><span class=\"mbin mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.485em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">(</span><span class=\"mord mathbb mtight\">Z</span><span class=\"mord mtight\">/3</span><span class=\"mclose mtight\">)</span><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\">x</span><span class=\"mclose mtight\">]</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4033em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></p>",
        "id": 511850705,
        "sender_full_name": "Riyaz Ahuja",
        "timestamp": 1744497906
    },
    {
        "content": "<p>It uses choice to find an irreducible factor of <code>x^3^2-x</code>, defaulting to <code>Polynomial.X</code> if none exists<br>\nThen it adjoins a root of this factor to the field and divides the factor out to get a new polynomial in the new field</p>",
        "id": 511850949,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1744498106
    },
    {
        "content": "<p>It does this 8 more times recursively with the new polynomial in the new field</p>",
        "id": 511850981,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1744498151
    },
    {
        "content": "<p>Then it returns the resulting field which is <code>ZMod 3</code> with 9 roots adjoined sequentially</p>",
        "id": 511851069,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1744498235
    },
    {
        "content": "<p>Or at least, that's what I am getting from reading the code and I could be wrong</p>",
        "id": 511851090,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1744498256
    },
    {
        "content": "<p>I just opened up Zulip to look for an answer  to this question and this was literally the top topic displayed (without searching). What are the odds...</p>\n<p><span class=\"user-mention silent\" data-user-id=\"642696\">Riyaz Ahuja</span> <a href=\"#narrow/channel/113489-new-members/topic/Help.20on.20Galois.20Fields/near/511847601\">said</a>:</p>\n<blockquote>\n<p>Hello, I'm playing around with Galois fields, and was wondering how elements of the GF are represented. ````</p>\n</blockquote>",
        "id": 511851130,
        "sender_full_name": "Bjørn Kjos-Hanssen",
        "timestamp": 1744498300
    },
    {
        "content": "<p>How would one prove this \"theorem\" (totally not trying to use Lean as a computer algebra system ;))</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">@</span><span class=\"n\">SplittingField</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ZMod</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ZMod</span><span class=\"bp\">.</span><span class=\"n\">instField</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n</code></pre></div>",
        "id": 511851469,
        "sender_full_name": "Bjørn Kjos-Hanssen",
        "timestamp": 1744498628
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"347475\">Bjørn Kjos-Hanssen</span> <a href=\"#narrow/channel/113489-new-members/topic/Help.20on.20Galois.20Fields/near/511851469\">said</a>:</p>\n<blockquote>\n<p>How would one prove this \"theorem\" (totally not trying to use Lean as a computer algebra system ;))</p>\n<p><div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">@</span><span class=\"n\">SplittingField</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ZMod</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ZMod</span><span class=\"bp\">.</span><span class=\"n\">instField</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n</code></pre></div><br>\n</p>\n</blockquote>\n<p>Construct an explicit field with that property and the use <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Polynomial.IsSplittingField.algEquiv#doc\">docs#Polynomial.IsSplittingField.algEquiv</a> to transfer it</p>",
        "id": 511851553,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1744498704
    },
    {
        "content": "<p>It's only four elements, not that bad</p>",
        "id": 511851564,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1744498719
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> <a href=\"#narrow/channel/113489-new-members/topic/Help.20on.20Galois.20Fields/near/511851553\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"347475\">Bjørn Kjos-Hanssen</span> <a href=\"#narrow/channel/113489-new-members/topic/Help.20on.20Galois.20Fields/near/511851469\">said</a>:</p>\n<blockquote>\n<p>How would one prove this \"theorem\" (totally not trying to use Lean as a computer algebra system ;))</p>\n<p><div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">@</span><span class=\"n\">SplittingField</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ZMod</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ZMod</span><span class=\"bp\">.</span><span class=\"n\">instField</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n</code></pre></div><br>\n</p>\n</blockquote>\n<p>Construct an explicit field with that property and the use <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Polynomial.IsSplittingField.algEquiv#doc\">docs#Polynomial.IsSplittingField.algEquiv</a> to transfer it</p>\n</blockquote>\n<p>Wait, can't this same idea be extended to the question of explicitly constructing GF(p,n)? In that, macaulay2 or any other CAS can explicitly construct GF(3,2) as <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mrow><mo stretchy=\"false\">(</mo><mi mathvariant=\"double-struck\">Z</mi><mi mathvariant=\"normal\">/</mi><mn>3</mn><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">[</mo><mi>x</mi><mo stretchy=\"false\">]</mo></mrow><mrow><msup><mi>x</mi><mn>2</mn></msup><mo>−</mo><mi>x</mi><mo>−</mo><mn>1</mn></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{(\\mathbb Z/3)[x]}{x^2-x-1}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.4133em;vertical-align:-0.4033em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.01em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">x</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7463em;\"><span style=\"top:-2.786em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mbin mtight\">−</span><span class=\"mord mathnormal mtight\">x</span><span class=\"mbin mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.485em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">(</span><span class=\"mord mathbb mtight\">Z</span><span class=\"mord mtight\">/3</span><span class=\"mclose mtight\">)</span><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\">x</span><span class=\"mclose mtight\">]</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4033em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span>. Is it feasible to simply show that it is algebraically equivalent, and then i can simplify to considering elements within the explicit CAS-produced construction?</p>",
        "id": 511852021,
        "sender_full_name": "Riyaz Ahuja",
        "timestamp": 1744499152
    },
    {
        "content": "<p>How do you obtain the <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>x</mi><mn>2</mn></msup><mo>−</mo><mi>x</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">x^2-x-1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8974em;vertical-align:-0.0833em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6667em;vertical-align:-0.0833em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">1</span></span></span></span> in <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mrow><mo stretchy=\"false\">(</mo><mi mathvariant=\"double-struck\">Z</mi><mi mathvariant=\"normal\">/</mi><mn>3</mn><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">[</mo><mi>x</mi><mo stretchy=\"false\">]</mo></mrow><mrow><msup><mi>x</mi><mn>2</mn></msup><mo>−</mo><mi>x</mi><mo>−</mo><mn>1</mn></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{(\\mathbb Z/3)[x]}{x^2-x-1}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.4133em;vertical-align:-0.4033em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.01em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">x</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7463em;\"><span style=\"top:-2.786em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mbin mtight\">−</span><span class=\"mord mathnormal mtight\">x</span><span class=\"mbin mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.485em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">(</span><span class=\"mord mathbb mtight\">Z</span><span class=\"mord mtight\">/3</span><span class=\"mclose mtight\">)</span><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\">x</span><span class=\"mclose mtight\">]</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4033em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span>?</p>",
        "id": 511852339,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1744499407
    },
    {
        "content": "<p>just computationally using M2:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">Macaulay2</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">version</span><span class=\"w\"> </span><span class=\"mf\">1.21</span>\n<span class=\"k\">with</span><span class=\"w\"> </span><span class=\"n\">packages</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ConwayPolynomials</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Elimination</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">IntegralClosure</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">InverseSystems</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Isomorphism</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">LLLBases</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">MinimalPrimes</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">OnlineLookup</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">PrimaryDecomposition</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">ReesAlgebra</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Saturation</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">TangentCone</span>\n\n<span class=\"n\">i1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"bp\">=</span><span class=\"n\">GF</span><span class=\"o\">(</span><span class=\"mi\">3</span><span class=\"o\">,</span><span class=\"mi\">2</span><span class=\"o\">)</span>\n\n<span class=\"n\">o1</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">R</span>\n\n<span class=\"n\">o1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">GaloisField</span>\n\n<span class=\"n\">i2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ambient</span><span class=\"w\"> </span><span class=\"n\">R</span>\n\n<span class=\"w\">        </span><span class=\"n\">ZZ</span>\n<span class=\"w\">        </span><span class=\"c1\">--[a]</span>\n<span class=\"w\">         </span><span class=\"mi\">3</span>\n<span class=\"n\">o2</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"c1\">----------</span>\n<span class=\"w\">      </span><span class=\"mi\">2</span>\n<span class=\"w\">     </span><span class=\"n\">a</span><span class=\"w\">  </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n\n<span class=\"n\">o2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">QuotientRing</span>\n</code></pre></div>",
        "id": 511852399,
        "sender_full_name": "Riyaz Ahuja",
        "timestamp": 1744499483
    },
    {
        "content": "<p>this should be the explicit construction of whatever nonconstructive stuff is happening in the lean implementation</p>",
        "id": 511852466,
        "sender_full_name": "Riyaz Ahuja",
        "timestamp": 1744499537
    },
    {
        "content": "<p>I meant algorithmically, what is M2 doing to get to a^2 - a - 1?</p>",
        "id": 511852493,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1744499573
    },
    {
        "content": "<p>I must be doing this in a way too tedious way... here's how I construct multiplication on GF(4).</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"sd\">/-- Thinking of (u,v) as u α + v. -/</span>\n<span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"n\">mymul</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Mul</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">×</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">{</span>\n<span class=\"w\">  </span><span class=\"n\">mul</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"k\">match</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"k\">with</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"mi\">0</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">id</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"k\">match</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"k\">with</span>\n<span class=\"w\">    </span><span class=\"bp\">|</span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"mi\">0</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"bp\">|</span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"mi\">0</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"bp\">|</span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"mi\">1</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"bp\">|</span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"mi\">1</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"k\">match</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"k\">with</span>\n<span class=\"w\">    </span><span class=\"bp\">|</span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"mi\">0</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"bp\">|</span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"mi\">1</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"bp\">|</span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"mi\">1</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"bp\">|</span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"mi\">0</span><span class=\"o\">)</span>\n<span class=\"o\">}</span>\n</code></pre></div>",
        "id": 511852927,
        "sender_full_name": "Bjørn Kjos-Hanssen",
        "timestamp": 1744500010
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> <a href=\"#narrow/channel/113489-new-members/topic/Help.20on.20Galois.20Fields/near/511852493\">said</a>:</p>\n<blockquote>\n<p>I meant algorithmically, what is M2 doing to get to a^2 - a - 1?</p>\n</blockquote>\n<p>it seems that it's enumerating monic polynomials of degree <code>n</code> in <code>(Z/p)[a]</code> and testing for irreducibility. It is known that quotient of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mi mathvariant=\"double-struck\">Z</mi><mi mathvariant=\"normal\">/</mi><mi>p</mi><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">[</mo><mi>x</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">(\\mathbb{Z}/p)[x]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathbb\">Z</span><span class=\"mord\">/</span><span class=\"mord mathnormal\">p</span><span class=\"mclose\">)</span><span class=\"mopen\">[</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">]</span></span></span></span> by a monic irreducible <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi></mrow><annotation encoding=\"application/x-tex\">f</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span></span></span></span> of degree <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">n</span></span></span></span> is a finite field of size <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>p</mi><mi>n</mi></msup></mrow><annotation encoding=\"application/x-tex\">p^n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8588em;vertical-align:-0.1944em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">p</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span></span></span></span></span></span></span></span>. See <a href=\"https://en.wikipedia.org/wiki/Finite_field#Explicit_construction\">wikipedia</a></p>",
        "id": 511853225,
        "sender_full_name": "Riyaz Ahuja",
        "timestamp": 1744500370
    },
    {
        "content": "<p>I guess we could add <a href=\"https://en.wikipedia.org/wiki/Conway_polynomial_(finite_fields)\">Conway polynomials</a> to mathlib</p>",
        "id": 511853937,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1744501164
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"642696\">Riyaz Ahuja</span> <a href=\"#narrow/channel/113489-new-members/topic/Help.20on.20Galois.20Fields/near/511852466\">said</a>:</p>\n<blockquote>\n<p>this should be the explicit construction of whatever nonconstructive stuff is happening in the lean implementation</p>\n</blockquote>\n<p>unfortunately, i don't think this will work in practice as even though the output of M2 is correct, the implementation of <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Polynomial.IsSplittingField.algEquiv#doc\">docs#Polynomial.IsSplittingField.algEquiv</a> relies on (a) a bunch of really annoying to prove facts, and (b) a lot of noncomputable things, so you can't just map elements via the isomorphism (explicitly).</p>",
        "id": 511853946,
        "sender_full_name": "Riyaz Ahuja",
        "timestamp": 1744501184
    },
    {
        "content": "<p>Yeah, then it'd come down to showing algebraic equivalence to <code>GF(p,n)</code> exactly once but then we'd have a nice explicit construction for any finite field work.</p>",
        "id": 511854023,
        "sender_full_name": "Riyaz Ahuja",
        "timestamp": 1744501250
    },
    {
        "content": "<p>where talking about elements actually makes sense</p>",
        "id": 511854028,
        "sender_full_name": "Riyaz Ahuja",
        "timestamp": 1744501260
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"642696\">Riyaz Ahuja</span> <a href=\"#narrow/channel/113489-new-members/topic/Help.20on.20Galois.20Fields/near/511853946\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"642696\">Riyaz Ahuja</span> <a href=\"#narrow/channel/113489-new-members/topic/Help.20on.20Galois.20Fields/near/511852466\">said</a>:</p>\n<blockquote>\n<p>this should be the explicit construction of whatever nonconstructive stuff is happening in the lean implementation</p>\n</blockquote>\n<p>unfortunately, i don't think this will work in practice as even though the output of M2 is correct, the implementation of <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Polynomial.IsSplittingField.algEquiv#doc\">docs#Polynomial.IsSplittingField.algEquiv</a> relies on (a) a bunch of really annoying to prove facts, and (b) a lot of noncomputable things, so you can't just map elements via the isomorphism (explicitly).</p>\n</blockquote>\n<p>There's also no easy way to construct any elements at all except by using <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Polynomial.IsSplittingField.algEquiv#doc\">docs#Polynomial.IsSplittingField.algEquiv</a></p>",
        "id": 511854143,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1744501389
    },
    {
        "content": "<p>So you can just cancel the equiv</p>",
        "id": 511854158,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1744501406
    },
    {
        "content": "<p>Mathlib's abstract implementation of splitting fields is probably noncomputable. What you'd want to do here is to make a computable representation (ideally equal to M2's) and then prove that the types are in bijection and then implement mathlib's finite fields with the concrete computable representation.</p>",
        "id": 511854176,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1744501435
    },
    {
        "content": "<p>I don't think conway polynomials are necessarily required for this either. We can just require monic irreducible in our quotient and instantly get a more general implementation. (The specific matching with M2 is unnecessary imo as they literally enumerate and filter according to some (probably lexicographic) ordering to find their quotient. But as long as its monic irreducible its actually fine.) This does have the annoying issue of making the proof of isomorphism a bit more difficult but it shouldn't be unmanageable. </p>\n<p>It seems to me that the splitting field implementation was designed for a more generalized use, but as finite fields are a very commonly used structure, it probably makes sense to have a constructive version that is a lot easier to directly reason about.</p>",
        "id": 511854766,
        "sender_full_name": "Riyaz Ahuja",
        "timestamp": 1744502057
    },
    {
        "content": "<p>(the fact that it makes my life a lot easier for implementing M2 stuff in lean is just a nice extra benefit <span aria-label=\"grinning face with smiling eyes\" class=\"emoji emoji-1f601\" role=\"img\" title=\"grinning face with smiling eyes\">:grinning_face_with_smiling_eyes:</span> )</p>",
        "id": 511854804,
        "sender_full_name": "Riyaz Ahuja",
        "timestamp": 1744502109
    }
]