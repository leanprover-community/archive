[
    {
        "content": "<p>I've looked at the <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Tactic/WLOG.html\"><code>wlog</code> documentation</a> and I vaguely understand the purpose (exploiting symmetry to avoid repeating an argument twice), and even some of the mechanics (prove it for one side, then prove... that something something with inverted something).</p>\n<p>But the full mechanics elude me (what <em>exactly</em> are we proving in how the two cases relate? what <em>exactly</em> does the inverted context in <code>this</code> give us?)</p>\n<p>I would very much appreciate a brief description of why <code>wlog</code> \"works\" (i.e. what it does logically), or a tiny 5-liner motivating example showing what kind of things it lets us prove (and how to wield <code>this</code> context in a useful way there).</p>\n<p>Thanks!</p>",
        "id": 505078120,
        "sender_full_name": "Dan Abramov",
        "timestamp": 1741772769
    },
    {
        "content": "<p>If it helps to be more concrete, I'm reading through <a href=\"https://github.com/ImperialCollegeLondon/formalising-mathematics-2024/blob/0eb9abdd52bde8f2ebb6fc1d4568d7f8f559c32a/FormalisingMathematics2024/Solutions/Section02reals/Sheet6.lean#L138-L142\">this proof</a> and I don't have <em>any</em> idea of what's going on inside that <code>wlog</code>. So I'm hoping to get enough understanding to follow those lines and nod along. I had no difficulty proving this lemma on my own, but I did not use <code>wlog</code> and it ended up more cumbersome.</p>",
        "id": 505079015,
        "sender_full_name": "Dan Abramov",
        "timestamp": 1741772975
    },
    {
        "content": "<p>Unfortunately, working with <code>wlog</code> is often a pain. The mathematical idea is that if you have a statement about two real numbers <code>a</code> and <code>b</code>, that is symmetric in those variables, you can always assume <code>a ≤ b</code>. The reason is that the same proof will work just exchanging <code>a</code> with <code>b</code> in the case <code>b ≤ a</code>.</p>\n<p>On the other hand <code>wlog</code> asks you to prove that the case when <code>a ≤ b</code> holds implies the case when <code>a ≤ b</code> does not hold. This is similar, but not the same, to the usual reasoning \"let's assume <code>a ≤  b</code> since clearly the same proof will work in the case <code>b ≤ a</code>.</p>",
        "id": 505108125,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1741780372
    },
    {
        "content": "<p>Yea at this point I'm just trying to understand what Lean's <code>wlog</code> actually does (aside from the mathematical wlog it aspires to) and why in some subset of cases it seems to at least partially cover the same need.</p>\n<blockquote>\n<p>On the other hand <code>wlog</code> asks you to prove that the case when <code>a ≤ b</code> holds implies the case when <code>a ≤ b</code> does not hold.</p>\n</blockquote>\n<p>Ok I can follow this one — but what's the deal with <code>this</code> context. What is that implication chain composed of and what is the intuition behind it? And how do I usually use it?</p>",
        "id": 505108710,
        "sender_full_name": "Dan Abramov",
        "timestamp": 1741780541
    },
    {
        "content": "<p>In your example you have two real numbers <code>s r : ℝ</code> such that <code>h : s ≠ t</code>, a sequence <code>a : ℕ → ℝ</code> such that <code>hs : TendsTo a s</code> and <code>hr : TendsTo a r</code>. You have to prove <code>False</code>.</p>\n<p><code>wlog h2 : s &lt; t</code> leaves you with two goals: the second one is what you want (same goal as before, with the new assumption <code>s &lt; t</code>). Let's have a look at the first one. The goal is still <code>False</code>, you have the same hypotheses, but moreover you have that</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">TendsTo</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">TendsTo</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">False</span>\n<span class=\"n\">h2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"n\">t</span>\n</code></pre></div>\n<p><code>h2</code> is clear, it is the negation of <code>s &lt; t</code>. The <code>this</code> assumption is the fact that the theorem is true in the case <code>s &lt; t</code> (note that all the things before <code>→ s &lt; t</code> are the context of your original statement). In practice this first goals means \"suppose you are able to prove the theorem assuming moreover <code>s &lt; t</code> (and let's call <code>this</code> the fact that you can prove the theorem in this case), then prove the theorem in the other case, ie when <code>¬s &lt; t</code>\".</p>",
        "id": 505111123,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1741781111
    },
    {
        "content": "<p>I am afraid that the usual answer to \"how to use <code>wlog</code>?\" is \"don't use <code>wlog</code> if it's not working immediately\"</p>",
        "id": 505112108,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1741781379
    }
]