[
    {
        "content": "<p>The following are two very simple proofs of the same theorem. The only difference is </p>\n<ul>\n<li><code>apply ne_of_lt</code></li>\n<li><code>apply ne_of_lt at h</code></li>\n</ul>\n<p><strong>Question</strong>: Are there any merits to one over the other? Are there risks / bad habits that one leads to over the other?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">ne_of_lt</span>\n<span class=\"w\">  </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">h</span>\n</code></pre></div>\n<p>and</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">ne_of_lt</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">h</span>\n<span class=\"w\">  </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">h</span>\n</code></pre></div>",
        "id": 479354998,
        "sender_full_name": "rzeta0",
        "timestamp": 1730147390
    },
    {
        "content": "<p>Neither are the proof someone would likely write \"in real life\", so it's hard to answer. Assuming the <em>statement</em> is something useful (which is already kind of a bit difficult to answer questions about because it would only be something someone writes in the context of either more generality or some larger proof), then I think most people would write that as <code>example {n : ℕ} (h : n &lt; 5) : n ≠ 5 := h.ne</code>, or they'd use a tactic which solves the whole thing if they didn't know <code>.ne</code> existed, like <code>by linarith</code>, or they'd use whatever <code>by exact?</code> spits out and move on.</p>",
        "id": 479355768,
        "sender_full_name": "Julian Berman",
        "timestamp": 1730147740
    },
    {
        "content": "<p>The tactic themselves aren't actually similar, and it's only because the proof is so simple that they both work. <code>apply</code> uses backwards reasoning — it says \"I want to use this to prove the goal, I'll now prove the required assumptions for it\". On the other hand, <code>apply at</code> uses forward reasoning — \"this hypothesis is an assumption of this, so we can get the conclusion\".</p>",
        "id": 479355913,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1730147798
    },
    {
        "content": "<p>Generally, using Lean I mostly work backwards. There are exceptions (e.g. <code>rw</code>, when you apply a sequence of rewrites <em>in that order</em>, or <code>calc</code> blocks), but these are not the rule. It takes some getting used to, but after a certain point is perfect natural.<br>\nIf you write longer proofs*, one common theme is to state intermediate steps with <code>have</code> (so, using forward reasoning on the high level), but proving these intermediate steps using backward reasoning.</p>",
        "id": 479361261,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1730150184
    },
    {
        "content": "<p>(Side note: standard advice, particularly for mathlib-level material, is to split out all reusable results you can --- so proofs become much shorter than one may think.)</p>",
        "id": 479361317,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1730150215
    },
    {
        "content": "<p>I sadly do write proofs like these... Next thing you tell me, there's a better version of <code>lt_of_lt_of_le</code> too.</p>",
        "id": 479371391,
        "sender_full_name": "Alex Mobius",
        "timestamp": 1730155132
    },
    {
        "content": "<p>Yes of course there is. At least two even <span aria-label=\"grinning\" class=\"emoji emoji-1f600\" role=\"img\" title=\"grinning\">:grinning:</span> : <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=LT.lt.trans_le#doc\">docs#LT.lt.trans_le</a> (for dot notation) and <code>calc</code> blocks (for readability)</p>",
        "id": 479372176,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1730155475
    },
    {
        "content": "<p>I still have no idea on how to use <code>calc</code> for inequalities, TPIL just kinda glossed over that.</p>",
        "id": 479372267,
        "sender_full_name": "Alex Mobius",
        "timestamp": 1730155522
    },
    {
        "content": "<p>Have you read Heather's Mechanic of Proofs?</p>",
        "id": 479372315,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1730155561
    },
    {
        "content": "<p>I have referenced it (: Didn't have the time to do all of the exercises yet. But evidently I should!</p>",
        "id": 479373037,
        "sender_full_name": "Alex Mobius",
        "timestamp": 1730155971
    }
]