[
    {
        "content": "<p>Assuming the root system itself is finite, how can I get a <code>Fintype</code> instance for the Weyl group, so I can sum over it? </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Data</span><span class=\"bp\">.</span><span class=\"n\">Complex</span><span class=\"bp\">.</span><span class=\"n\">Basic</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">LinearAlgebra</span><span class=\"bp\">.</span><span class=\"n\">RootSystem</span><span class=\"bp\">.</span><span class=\"n\">Defs</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">LinearAlgebra</span><span class=\"bp\">.</span><span class=\"n\">RootSystem</span><span class=\"bp\">.</span><span class=\"n\">WeylGroup</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">GroupTheory</span><span class=\"bp\">.</span><span class=\"n\">Perm</span><span class=\"bp\">.</span><span class=\"n\">Sign</span>\n\n<span class=\"kn\">variable</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">Î¹</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"o\">[</span><span class=\"n\">DecidableEq</span><span class=\"w\"> </span><span class=\"n\">Î¹</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"o\">[</span><span class=\"n\">Fintype</span><span class=\"w\"> </span><span class=\"n\">Î¹</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"o\">{</span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">}</span>\n<span class=\"w\">  </span><span class=\"o\">{</span><span class=\"n\">N</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">}</span>\n<span class=\"w\">  </span><span class=\"o\">[</span><span class=\"n\">AddCommGroup</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"o\">[</span><span class=\"n\">Module</span><span class=\"w\"> </span><span class=\"n\">â„‚</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"o\">[</span><span class=\"n\">AddCommGroup</span><span class=\"w\"> </span><span class=\"n\">N</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"o\">[</span><span class=\"n\">Module</span><span class=\"w\"> </span><span class=\"n\">â„‚</span><span class=\"w\"> </span><span class=\"n\">N</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">RootPairing</span><span class=\"w\"> </span><span class=\"n\">Î¹</span><span class=\"w\"> </span><span class=\"n\">â„‚</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"n\">N</span><span class=\"o\">)</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">SphericalFn</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"bp\">â†’</span><span class=\"w\"> </span><span class=\"n\">â„‚</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">  </span><span class=\"bp\">âˆ‘</span><span class=\"w\"> </span><span class=\"n\">w</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"bp\">.</span><span class=\"n\">weylGroup</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n</code></pre></div>",
        "id": 520529580,
        "sender_full_name": "Phillip Harris",
        "timestamp": 1748293259
    },
    {
        "content": "<p>Surely it's a theorem that actually has content</p>",
        "id": 520530150,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1748293528
    },
    {
        "content": "<p>What is the mathematical proof that the Weyl group is finite?</p>",
        "id": 520530285,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1748293582
    },
    {
        "content": "<p>Doesn't it act faithfully on the roots?</p>",
        "id": 520531764,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1748294340
    },
    {
        "content": "<p>So probably the question boils down to whether this is proved, and then getting the fintype instance should be \"straightforward\" modulo the usual decidability issues</p>",
        "id": 520531920,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1748294411
    },
    {
        "content": "<p>yeah, we don't care about decidability</p>",
        "id": 520532222,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1748294577
    },
    {
        "content": "<p>despite what I said in <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Z.5B.281.2Bsqrt.281.2B4k.29.29.2F2.5D/near/520527408\">#Is there code for X? &gt; Z&#91;(1+sqrt(1+4k))/2&#93; @ ðŸ’¬</a></p>",
        "id": 520532301,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1748294629
    },
    {
        "content": "<p>It's defined as a subgroup of <code>RootPairing.Aut</code>. I assumed <code>RootPairing.Aut</code> would have a fintype instance for the same reason <code>Î¹ â‰ƒ Î¹</code> has a fintype instance, but actually <code>RootPairing.Aut</code> is a specialization of <code>RootPairing.Equiv</code> which is a specialization of <code>RootPairing.Hom</code> etc</p>",
        "id": 520533148,
        "sender_full_name": "Phillip Harris",
        "timestamp": 1748295094
    },
    {
        "content": "<p>yes, and the data in <code>RootPairing</code> is very much not finite</p>",
        "id": 520533258,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1748295152
    },
    {
        "content": "<p>Ok I guess this is actually untrue because RootPairing doesn't require that the roots span the modules. RootSystem does. So there could be infinitely many choices for the map between modules in <code>RootPairing.Aut</code>. So I should assume it's a RootSystem. And in that case I still need to prove that the map between index sets determines the other data.</p>",
        "id": 520534070,
        "sender_full_name": "Phillip Harris",
        "timestamp": 1748295617
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"477600\">@Phillip Harris</span> and once you have that, <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Data/Fintype/OfMap.html#Fintype.ofInjective\">https://leanprover-community.github.io/mathlib4_docs/Mathlib/Data/Fintype/OfMap.html#Fintype.ofInjective</a></p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">noncomputable</span><span class=\"w\"> </span><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Fintype</span><span class=\"bp\">.</span><span class=\"n\">ofInjective</span><span class=\"o\">{</span><span class=\"n\">Î±</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u_1</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">Î²</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u_2</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Fintype</span><span class=\"w\"> </span><span class=\"n\">Î²</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Î±</span><span class=\"w\"> </span><span class=\"bp\">â†’</span><span class=\"w\"> </span><span class=\"n\">Î²</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">H</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Function</span><span class=\"bp\">.</span><span class=\"n\">Injective</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"n\">Fintype</span><span class=\"w\"> </span><span class=\"n\">Î±</span>\n</code></pre></div>",
        "id": 520534658,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1748295989
    }
]