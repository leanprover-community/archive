[
    {
        "content": "<p>In &lt;<a href=\"https://github.com/leanprover/lean4/blob/e9e858a4484905a0bfe97c4f05c3924ead02eed8/src/Init/Data/List/Basic.lean#L1302-L1304\">https://github.com/leanprover/lean4/blob/e9e858a4484905a0bfe97c4f05c3924ead02eed8/src/Init/Data/List/Basic.lean#L1302-L1304</a>&gt;</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"sd\">/--</span>\n<span class=\"sd\">`O(|l|)`. Returns true if `p` is true for every element of `l`.</span>\n<span class=\"sd\">* `all p [a, b, c] = p a &amp;&amp; p b &amp;&amp; p c`</span>\n\n<span class=\"sd\">Short-circuits upon encountering the first `false`.</span>\n<span class=\"sd\">-/</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">all</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Bool</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Bool</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"o\">[],</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">true</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"bp\">::</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"bp\">&amp;&amp;</span><span class=\"w\"> </span><span class=\"n\">all</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"n\">p</span>\n</code></pre></div>\n<p>should the third line say instead <code>`all [a, b, c] p = p a &amp;&amp; p b &amp;&amp; p c</code>?<br>\nFrom what I see, the type signature has a list as the first argument.</p>",
        "id": 472256469,
        "sender_full_name": "Kevin Cheung",
        "timestamp": 1727103577
    },
    {
        "content": "<p>The documentation shows the predicate as the first argument, and then the definition shows the list as the first argument. Of course the code has to be right, so the documentation has to be wrong.</p>\n<p>If you look at the lines following your example, they use the dot notation with a list as the base type. I suppose this is only possible with the first argument; this in itself looks like a good reason to have the list as the first argument.</p>",
        "id": 472259384,
        "sender_full_name": "Philippe Duchon",
        "timestamp": 1727104243
    },
    {
        "content": "<p>I agree that the doc-string is incorrect.</p>\n<p>Btw, dot-notation uses the first <del><em>explicit</em></del>[see below] argument of the <em>correct type</em>, not the first argument.  This works:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">second_arg</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Unit</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">l</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">Unit</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">Unit</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">==</span><span class=\"w\"> </span><span class=\"o\">()</span><span class=\"w\"> </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"n\">l</span><span class=\"w\"> </span><span class=\"k\">else</span><span class=\"w\"> </span><span class=\"n\">l</span>\n\n<span class=\"c1\">-- both work</span>\n<span class=\"bp\">#</span><span class=\"n\">eval</span><span class=\"w\"> </span><span class=\"o\">[]</span><span class=\"bp\">.</span><span class=\"n\">second_arg</span><span class=\"w\"> </span><span class=\"o\">()</span>\n<span class=\"bp\">#</span><span class=\"n\">eval</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">second_arg</span><span class=\"w\"> </span><span class=\"o\">()</span><span class=\"w\"> </span><span class=\"o\">[]</span>\n</code></pre></div>",
        "id": 472260696,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1727104547
    },
    {
        "content": "<p>Ah, so if several arguments have different types, dot notation could be used for each of them? (so what I said earlier was wrong, making dot notation usable is not a good reason to pick one order over the other)</p>",
        "id": 472262440,
        "sender_full_name": "Philippe Duchon",
        "timestamp": 1727104968
    },
    {
        "content": "<p>I have not tried a situation where multiple dot-notations would apply: I guess that they would have to be nested...</p>",
        "id": 472262845,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1727105069
    },
    {
        "content": "<p>It looks like dot-notation only works with the \"longest possible\" type:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">New</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">List</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">New</span><span class=\"bp\">.</span><span class=\"n\">two_args</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">l</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">Unit</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">New</span><span class=\"w\"> </span><span class=\"n\">Unit</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">New</span><span class=\"w\"> </span><span class=\"n\">Unit</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">l</span><span class=\"w\"> </span><span class=\"bp\">==</span><span class=\"w\"> </span><span class=\"o\">[]</span><span class=\"w\"> </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"k\">else</span><span class=\"w\"> </span><span class=\"n\">m</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Newnit</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">New</span><span class=\"w\"> </span><span class=\"n\">Unit</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">[]</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">nit</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">Unit</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">[]</span>\n\n<span class=\"c1\">-- works</span>\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">Newnit</span><span class=\"bp\">.</span><span class=\"n\">two_args</span><span class=\"w\"> </span><span class=\"n\">nit</span>\n\n<span class=\"c1\">-- error</span>\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">nit</span><span class=\"bp\">.</span><span class=\"n\">New</span><span class=\"bp\">.</span><span class=\"n\">two_args</span><span class=\"w\"> </span><span class=\"n\">Newnit</span>\n</code></pre></div>\n<p>This is the only example that I tried, so I may well be wrong about this!</p>",
        "id": 472265181,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1727105639
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"321459\">Damiano Testa</span> <a href=\"#narrow/stream/113489-new-members/topic/Typo.20in.20documentation.20for.20List.2Eall.3F/near/472260696\">said</a>:</p>\n<blockquote>\n<p>Btw, dot-notation uses the first <em>explicit</em> argument of the <em>correct type</em></p>\n</blockquote>\n<p>Correction: it's the first argument of the correct type. What you're saying was true in Lean 3.</p>",
        "id": 472271401,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1727107135
    },
    {
        "content": "<p>Multiple interpretations of dot notations can't exist — it's the namespace of the declaration that's used for figuring out which argument is used for dot notation. (Though if you use <code>def</code>s to create type synonyms like what Damiano is doing, then you can sometimes get it to use another argument. You can refer to <code>Lean.Elab.Term.typeMatchesBaseName</code> <span class=\"user-mention\" data-user-id=\"321459\">@Damiano Testa</span>)</p>",
        "id": 472271885,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1727107247
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"306601\">Kyle Miller</span> <a href=\"#narrow/stream/113489-new-members/topic/Typo.20in.20documentation.20for.20List.2Eall.3F/near/472271401\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"321459\">Damiano Testa</span> <a href=\"#narrow/stream/113489-new-members/topic/Typo.20in.20documentation.20for.20List.2Eall.3F/near/472260696\">said</a>:</p>\n<blockquote>\n<p>Btw, dot-notation uses the first <em>explicit</em> argument of the <em>correct type</em></p>\n</blockquote>\n<p>Correction: it's the first argument of the correct type. What you're saying was true in Lean 3.</p>\n</blockquote>\n<p>Ah, I think that I knew about this, but then I decided it was too weird to be true!  <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 472273188,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1727107574
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Lean.Elab.Term.typeMatchesBaseName#doc\">docs#Lean.Elab.Term.typeMatchesBaseName</a> does not seem to exist and I can't find something with a similar name eiter...</p>",
        "id": 472274039,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1727107823
    },
    {
        "content": "<p>It's private — you can find it in <code>Lean/Elab/App.lean</code></p>",
        "id": 472274498,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1727107945
    },
    {
        "content": "<p>Very interesting!  I had never made it to the source of why \"Function\" was special.</p>",
        "id": 472275339,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1727108194
    }
]