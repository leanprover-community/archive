[
    {
        "content": "<p>Hi all, I'm very much a beginner and my apologies if this is the wrong place to ask -- but how can I name the hypotheses introduced by the <code>split</code> tactic? Thanks!</p>",
        "id": 471984331,
        "sender_full_name": "Ranjit Jhala",
        "timestamp": 1726961614
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"756669\">@Ranjit Jhala</span> , it sounds like you might be working through an older tutorial/book based on Lean 3, could you please check? </p>\n<p>The reason why I say that is because lean4 uses <code>constructor</code> instead of <code>split</code>, at least for the beginner material that I have seen, and as mentioned in the lean3 to 4 survival guide:</p>\n<p><a href=\"https://github.com/leanprover-community/mathlib4/wiki/Lean-4-survival-guide-for-Lean-3-users\">https://github.com/leanprover-community/mathlib4/wiki/Lean-4-survival-guide-for-Lean-3-users</a></p>",
        "id": 471985683,
        "sender_full_name": "Derek Rhodes",
        "timestamp": 1726962919
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"317929\">@Derek Rhodes</span>! </p>\n<p>I came across <code>split</code> using the below which seems to be for <code>lean4</code>?</p>\n<p><a href=\"https://leanprover.github.io/theorem_proving_in_lean4/tactics.html#split-tactic\">https://leanprover.github.io/theorem_proving_in_lean4/tactics.html#split-tactic</a></p>\n<p>For some context, I'm trying to do something like:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">length</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">xs</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"k\">match</span><span class=\"w\"> </span><span class=\"n\">xs</span><span class=\"w\"> </span><span class=\"k\">with</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">nil</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"mi\">0</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">cons</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"n\">xs'</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">length</span><span class=\"w\"> </span><span class=\"n\">xs'</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">pos_length</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">xs</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"k\">match</span><span class=\"w\"> </span><span class=\"n\">xs</span><span class=\"w\"> </span><span class=\"k\">with</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">nil</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"mi\">0</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">cons</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">xs'</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"n\">length</span><span class=\"w\"> </span><span class=\"n\">xs'</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"k\">else</span><span class=\"w\"> </span><span class=\"n\">length</span><span class=\"w\"> </span><span class=\"n\">xs'</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">pos_len</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">xs</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">pos_length</span><span class=\"w\"> </span><span class=\"n\">xs</span><span class=\"w\"> </span><span class=\"bp\">&lt;=</span><span class=\"w\"> </span><span class=\"n\">length</span><span class=\"w\"> </span><span class=\"n\">xs</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">intros</span><span class=\"w\"> </span><span class=\"n\">xs</span>\n<span class=\"w\">  </span><span class=\"n\">induction</span><span class=\"w\"> </span><span class=\"n\">xs</span>\n<span class=\"w\">  </span><span class=\"n\">case</span><span class=\"w\"> </span><span class=\"n\">nil</span><span class=\"w\">  </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">pos_length</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">case</span><span class=\"w\"> </span><span class=\"n\">cons</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">xs'</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">    </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">pos_length</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">length</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"n\">split</span>\n<span class=\"w\">    </span><span class=\"bp\">.</span><span class=\"w\"> </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">*</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">add_comm</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"bp\">.</span><span class=\"w\"> </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"o\">[]</span>\n</code></pre></div>\n<p>The above proof works -- as the <code>*</code> does the job of  using the hypothesis to rewriting the <code>x</code> with <code>1</code>. </p>\n<p>Replacing <code>split</code> with <code>constructor</code> does not:  I get</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">tactic</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">constructor'</span><span class=\"w\"> </span><span class=\"n\">failed</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">no</span><span class=\"w\"> </span><span class=\"n\">applicable</span><span class=\"w\"> </span><span class=\"n\">constructor</span><span class=\"w\"> </span><span class=\"n\">found</span>\n</code></pre></div>\n<p>However,  I'm wondering how I can <em>name</em> the hypothesis <code>x=1</code> them if in fact I do need to use it specifically...</p>",
        "id": 471991262,
        "sender_full_name": "Ranjit Jhala",
        "timestamp": 1726968236
    },
    {
        "content": "<p>Yep you can name the hypothesis (in this case <code>h1</code>) within the definition of <code>pos_length</code>, with something like:</p>\n<p><code> cons x xs' =&gt; if h1: x = 1 then length xs' + x else length xs'</code></p>\n<p>then instead of <code>split</code>, we can use <code>split_ifs</code>.  But, I've only used that a couple of times. I'll try to find more info. (maybe <code>split</code> by itself will pick up the hypothesis name?)</p>\n<p>By the way, I'm still a newbie and I think the previous statement I made regarding using <code>constructor</code> instead of <code>split</code> only applies to Mathlib projects, so please disregard that.</p>",
        "id": 471993266,
        "sender_full_name": "Derek Rhodes",
        "timestamp": 1726970136
    },
    {
        "content": "<p>split_ifs has some uses in the Induction chapter of the mechanics of proof:</p>\n<p><a href=\"https://github.com/hrmacbeth/math2001/blob/main/Math2001/06_Induction/06_Division_Algorithm.lean\">https://github.com/hrmacbeth/math2001/blob/main/Math2001/06_Induction/06_Division_Algorithm.lean</a></p>",
        "id": 471993476,
        "sender_full_name": "Derek Rhodes",
        "timestamp": 1726970332
    },
    {
        "content": "<p>by the way, <code>split_ifs</code> requires <code>import Mathlib.Tactic</code></p>",
        "id": 471993946,
        "sender_full_name": "Derek Rhodes",
        "timestamp": 1726970738
    },
    {
        "content": "<p>You can also use <code>rename_i</code> to rename the latest unnamed hypothesis</p>",
        "id": 471994495,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1726971203
    },
    {
        "content": "<p>awesome, thanks Daniel!</p>",
        "id": 471994718,
        "sender_full_name": "Derek Rhodes",
        "timestamp": 1726971402
    },
    {
        "content": "<p>Great, thanks <span class=\"user-mention\" data-user-id=\"690858\">@Daniel Weber</span>  and <span class=\"user-mention\" data-user-id=\"317929\">@Derek Rhodes</span> !!!</p>",
        "id": 471996278,
        "sender_full_name": "Ranjit Jhala",
        "timestamp": 1726972782
    },
    {
        "content": "<p>Hypotheses even</p>",
        "id": 472021991,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1726989570
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 472038558,
        "sender_full_name": "Maciej Pacut",
        "timestamp": 1727003563
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"317929\">@Derek Rhodes</span> <code>split</code> is the core Lean tactic for <code>split_ifs</code>. It can split <code>match</code> expressions too.</p>",
        "id": 472071187,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1727029055
    },
    {
        "content": "<p>good to know, thanks again Kyle.</p>",
        "id": 472077277,
        "sender_full_name": "Derek Rhodes",
        "timestamp": 1727033325
    }
]