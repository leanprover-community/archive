[
    {
        "content": "<p>Hi! I'm new to Lean and am trying to learn the basics. I'm currently trying to prove that 2*n^2 = m^2 where n, m are integers is a contradiction. As an informal proof I would use induction, but I don't see a way to use the induction tactic here. Any suggestions for how to approach this?</p>",
        "id": 500777413,
        "sender_full_name": "Riley Riles",
        "timestamp": 1740015977
    },
    {
        "content": "<p>First thing would be to try to even write the statement of the problem. Do you have an example of how you'd formalize the statement?</p>",
        "id": 500778073,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1740016491
    },
    {
        "content": "<p>First you have to get an idea of what you mean by induction. There are two indices, so there are lots of ways to do induction. You can do strong, two-step, or cauchy induction on the first, second, or both indices at once. What kind of induction do you want?</p>",
        "id": 500778547,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1740016806
    },
    {
        "content": "<p>First you have to choose which of the two first things you want to do first!</p>",
        "id": 500779877,
        "sender_full_name": "Julian Berman",
        "timestamp": 1740017678
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">\\</span><span class=\"k\">forall</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Int</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">\\</span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"o\">)</span>\n\n<span class=\"bp\">```</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">how</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"n\">formalized</span><span class=\"w\"> </span><span class=\"n\">it</span><span class=\"bp\">.</span><span class=\"w\"> </span><span class=\"n\">The</span><span class=\"w\"> </span><span class=\"n\">issue</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">that</span><span class=\"w\"> </span><span class=\"n\">just</span><span class=\"w\"> </span><span class=\"n\">doing</span><span class=\"w\"> </span><span class=\"n\">induction</span><span class=\"w\"> </span><span class=\"n\">on</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">or</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"n\">would</span><span class=\"w\"> </span><span class=\"n\">induct</span><span class=\"w\"> </span><span class=\"n\">on</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">successor</span><span class=\"w\"> </span><span class=\"n\">function</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">which</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">particularly</span><span class=\"w\"> </span><span class=\"n\">helpful</span><span class=\"w\"> </span><span class=\"n\">here</span><span class=\"bp\">.</span><span class=\"w\"> </span><span class=\"n\">What</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"n\">want</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"k\">do</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">induct</span><span class=\"w\"> </span><span class=\"n\">on</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">degree</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">powers</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">two</span><span class=\"w\"> </span><span class=\"n\">that</span><span class=\"w\"> </span><span class=\"n\">divide</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">or</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">but</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"n\">can't</span><span class=\"w\"> </span><span class=\"n\">figure</span><span class=\"w\"> </span><span class=\"n\">out</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">way</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"k\">do</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"n\">without</span><span class=\"w\"> </span><span class=\"n\">having</span><span class=\"w\"> </span><span class=\"n\">an</span><span class=\"w\"> </span><span class=\"kn\">inductive</span><span class=\"w\"> </span><span class=\"n\">constructor</span><span class=\"w\"> </span><span class=\"n\">that</span><span class=\"w\"> </span><span class=\"n\">depends</span><span class=\"w\"> </span><span class=\"n\">on</span><span class=\"w\"> </span><span class=\"n\">prime</span><span class=\"w\"> </span><span class=\"n\">factorization</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">which</span><span class=\"w\"> </span><span class=\"n\">would</span><span class=\"w\"> </span><span class=\"n\">be</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">nightmare</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">implement</span><span class=\"bp\">.</span>\n</code></pre></div>",
        "id": 500787701,
        "sender_full_name": "Riley Riles",
        "timestamp": 1740022806
    },
    {
        "content": "<p>This topic was moved here from <a class=\"stream-topic\" data-stream-id=\"116395\" href=\"/#narrow/channel/116395-maths/topic/Learning.20the.20basics.20of.20Lean\">#maths &gt; Learning the basics of Lean</a> by <span class=\"user-mention silent\" data-user-id=\"311453\">Frédéric Dupuis</span>.</p>",
        "id": 500787888,
        "sender_full_name": "Notification Bot",
        "timestamp": 1740022956
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Nat.binaryRec#doc\">docs#Nat.binaryRec</a> might be helpful.</p>",
        "id": 500791708,
        "sender_full_name": "Chris Wong",
        "timestamp": 1740025608
    },
    {
        "content": "<p>That induction principle works by repeatedly halving the argument.</p>",
        "id": 500792110,
        "sender_full_name": "Chris Wong",
        "timestamp": 1740025869
    },
    {
        "content": "<blockquote>\n<p>\\forall n m : Int, \\not (2*n^2 = m^2)</p>\n</blockquote>\n<p>You might have some trouble trying to formalize this version: What happens if both m and n are zero?</p>",
        "id": 500792197,
        "sender_full_name": "Bolton Bailey",
        "timestamp": 1740025924
    },
    {
        "content": "<p>Okay but it's not true as stated. n = 0, m = 0 is  a solution. So you could reduce your (corrected) statement to one over the positive naturals. Then using your assumption, you could show that m &gt; n, then express m as n + k + 1, removing one free variable. </p>\n<p>That being said, we also have <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Nat.recOnPrimePow#doc\">docs#Nat.recOnPrimePow</a> or you can use the binaryRec, or argue from a parity point of view</p>",
        "id": 500792263,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1740025983
    },
    {
        "content": "<p>Here's a generalized statement of your exercise with some lemmas that could be used to prove it:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">padicValNat</span>\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">padicValNat</span><span class=\"bp\">.</span><span class=\"n\">mul</span>\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">padicValNat</span><span class=\"bp\">.</span><span class=\"n\">prime_pow</span>\n\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">prime_def</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">sq_ne_prime_sq</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">}[</span><span class=\"n\">pp</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fact</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">Prime</span><span class=\"o\">](</span><span class=\"n\">pn</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)(</span><span class=\"n\">pk</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"n\">k</span><span class=\"bp\">*</span><span class=\"n\">k</span><span class=\"o\">)):</span><span class=\"w\"> </span><span class=\"n\">False</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>You don't need induction to prove this.</p>",
        "id": 500815321,
        "sender_full_name": "suhr",
        "timestamp": 1740038488
    },
    {
        "content": "<p>You don't need induction if you use p-adic valuations but in some sense they're defined using induction. In some sense you can't prove anything about the naturals beyond statements like 2+2=4 without induction</p>",
        "id": 500816300,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1740038867
    },
    {
        "content": "<p>True, but that particular proof does not require explicit induction. It is also a rather nice proof, p-adic valuation makes things more elegant.</p>",
        "id": 500817137,
        "sender_full_name": "suhr",
        "timestamp": 1740039150
    },
    {
        "content": "<p>I agree that p-adic valuations make the proof look very elegant. All I'm saying is that they are hiding a huge amount of stuff behind the API. For example <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>v</mi><mi>p</mi></msub><mo stretchy=\"false\">(</mo><mi>a</mi><mi>b</mi><mo stretchy=\"false\">)</mo><mo>=</mo><msub><mi>v</mi><mi>p</mi></msub><mo stretchy=\"false\">(</mo><mi>a</mi><mo stretchy=\"false\">)</mo><mo>+</mo><msub><mi>v</mi><mi>p</mi></msub><mo stretchy=\"false\">(</mo><mi>b</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">v_p(ab)=v_p(a)+v_p(b)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0361em;vertical-align:-0.2861em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">p</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">ab</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0361em;vertical-align:-0.2861em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">p</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">a</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0361em;vertical-align:-0.2861em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">p</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">b</span><span class=\"mclose\">)</span></span></span></span> (necessary for the even/odd part of the argument in the contradiction) is assuming uniqueness of prime factorization which is far deeper than irrationality of sqrt(2).</p>",
        "id": 500826648,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1740042075
    },
    {
        "content": "<p>I think one could prove this using just the Euclid's lemma, which in turn only requires the Bezout's identity. So it does not have to be this big under the API. I agree that it's a boring corollary of much cooler results though.</p>",
        "id": 500832708,
        "sender_full_name": "suhr",
        "timestamp": 1740043939
    },
    {
        "content": "<p>Yes, it only requires all the key ingredients for uniqueness of prime factorization.</p>",
        "id": 500843864,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1740047308
    },
    {
        "content": "<p>Wow, I didn't know p-adic valuations were in Lean! Thanks so much, I'll use this :)</p>",
        "id": 500953810,
        "sender_full_name": "Riley Riles",
        "timestamp": 1740079384
    }
]