[
    {
        "content": "<p>I have set it via <code>lean-toolchain</code>, but it gets overwritten by <code>lake build</code> or <code>lake update</code>.<br>\nWhat would be the right way to fix Lean version for a like project?</p>\n<p>I tried</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"o\">[[</span><span class=\"n\">require</span><span class=\"o\">]]</span>\n<span class=\"n\">name</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"s2\">\"mathlib\"</span>\n<span class=\"n\">scope</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"s2\">\"leanprover-community\"</span>\n<span class=\"n\">rev</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"s2\">\"v4.25.1\"</span>\n</code></pre></div>\n<p>following some answer in Stackoverflow, but it looks very hacky and it did not work.</p>",
        "id": 560045346,
        "sender_full_name": "Youngju Song",
        "timestamp": 1764029643
    },
    {
        "content": "<p>fyi, my full <code>lakefile.toml</code> is:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"s2\">\"lean-my-project\"</span>\n<span class=\"n\">version</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"s2\">\"0.1.0\"</span>\n<span class=\"n\">defaultTargets</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"s2\">\"lean-my-project\"</span><span class=\"o\">]</span>\n\n<span class=\"o\">[[</span><span class=\"n\">lean_lib</span><span class=\"o\">]]</span>\n<span class=\"n\">name</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"s2\">\"LeanMyProject\"</span>\n\n<span class=\"o\">[[</span><span class=\"n\">lean_exe</span><span class=\"o\">]]</span>\n<span class=\"n\">name</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"s2\">\"lean-my-project\"</span>\n<span class=\"n\">root</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"s2\">\"Main\"</span>\n\n<span class=\"o\">[[</span><span class=\"n\">require</span><span class=\"o\">]]</span>\n<span class=\"n\">name</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"s2\">\"mathlib\"</span>\n<span class=\"n\">scope</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"s2\">\"leanprover-community\"</span>\n<span class=\"n\">rev</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"s2\">\"v4.25.1\"</span>\n</code></pre></div>\n<p>and my <code>lean-toolchain</code> is</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">leanprover</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"o\">:</span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">25</span><span class=\"bp\">.</span><span class=\"m\">1</span>\n</code></pre></div>\n<p>and when I type <code>lake build</code> or <code>lake update</code>, it gets overwritten to</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">leanprover</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"o\">:</span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">26</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">-</span><span class=\"n\">rc2</span>\n</code></pre></div>\n<p>Doing <code>rm -rf .lake</code> and starting over again does not help here.</p>",
        "id": 560045541,
        "sender_full_name": "Youngju Song",
        "timestamp": 1764029802
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"748258\">Youngju Song</span> <a href=\"#narrow/channel/113489-new-members/topic/How.20can.20I.20fix.20Lean.20version.20for.20a.20lake.20project.3F/near/560045346\">said</a>:</p>\n<blockquote>\n<p>I have set it via <code>lean-toolchain</code>, but it gets overwritten by <code>lake build</code> or <code>lake update</code>.<br>\nWhat would be the right way to fix Lean version for a like project?</p>\n<p>I tried</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"o\">[[</span><span class=\"n\">require</span><span class=\"o\">]]</span>\n<span class=\"n\">name</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"s2\">\"mathlib\"</span>\n<span class=\"n\">scope</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"s2\">\"leanprover-community\"</span>\n<span class=\"n\">rev</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"s2\">\"v4.25.1\"</span>\n</code></pre></div>\n<p>following some answer in Stackoverflow, but it looks very hacky and it did not work.</p>\n</blockquote>\n<p>This is the right way and should work. I suggest you try this again and tell us what goes wrong</p>",
        "id": 560108203,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1764064080
    },
    {
        "content": "<p>(I find it very impossible that <code>lake build</code> would change the <code>lean-toolchain</code> file)</p>",
        "id": 560108403,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1764064140
    }
]