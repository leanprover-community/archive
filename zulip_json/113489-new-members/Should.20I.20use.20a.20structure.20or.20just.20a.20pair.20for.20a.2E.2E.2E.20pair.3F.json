[
    {
        "content": "<p>I am formalizing filtrators. By definition, a filtrator is a pair of a poset and its subset. Alternatively, define it as a poset with a subposet. Should I use just a pair or create a <code>Filtrator</code> structure?</p>",
        "id": 572620717,
        "sender_full_name": "Victor Porton",
        "timestamp": 1770557172
    },
    {
        "content": "<p>It would probably be more principled to make a structure with 2 fields. That way you can decide the names of the projection function, and give them doc-strings (instead of having <code>Prod.fst</code> and <code>Prod.snd</code>.</p>\n<p>However, depending on what you want to do, it may be better not to use a pair at all. In lean we typically quantify over a type <code>(α : Type u)</code>, and then we would have e.g. a filtrator <code>(f : Filtrator α)</code>, where <code>Filtrator</code> would be a structure in the same style as <code>Subgroup</code>.</p>",
        "id": 572623024,
        "sender_full_name": "Jovan Gerbscheid",
        "timestamp": 1770559232
    },
    {
        "content": "<p>Do you generally consider more than one filtrator on the same poset?</p>",
        "id": 572623042,
        "sender_full_name": "James E Hanson",
        "timestamp": 1770559251
    },
    {
        "content": "<p>With certain kinds of objects, it makes more sense to use classes rather than structures.</p>",
        "id": 572623099,
        "sender_full_name": "James E Hanson",
        "timestamp": 1770559306
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"904624\">James E Hanson</span> <a href=\"#narrow/channel/270676-lean4/topic/Should.20I.20use.20a.20structure.20or.20just.20a.20pair.20for.20a.2E.2E.2E.20pair.3F/near/572623042\">said</a>:</p>\n<blockquote>\n<p>Do you generally consider more than one filtrator on the same poset?</p>\n</blockquote>\n<p>In advanced theory. I think, I won't formalize that part of the theory (at least in the foreseeable future).</p>",
        "id": 572623104,
        "sender_full_name": "Victor Porton",
        "timestamp": 1770559315
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"904624\">James E Hanson</span> <a href=\"#narrow/channel/270676-lean4/topic/Should.20I.20use.20a.20structure.20or.20just.20a.20pair.20for.20a.2E.2E.2E.20pair.3F/near/572623099\">said</a>:</p>\n<blockquote>\n<p>With certain kinds of objects, it makes more sense to use classes rather than structures.</p>\n</blockquote>\n<p>Can you refer to an example?</p>",
        "id": 572623148,
        "sender_full_name": "Victor Porton",
        "timestamp": 1770559357
    },
    {
        "content": "<p>I might be wrong about the definition, but isn't it just this:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">PartialOrder</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 572623317,
        "sender_full_name": "Jovan Gerbscheid",
        "timestamp": 1770559511
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">structure</span><span class=\"w\"> </span><span class=\"n\">Filtrator</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">order</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">PartialOrder</span><span class=\"w\"> </span><span class=\"n\">α</span>\n<span class=\"w\">  </span><span class=\"n\">subset</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">α</span>\n</code></pre></div>",
        "id": 572623384,
        "sender_full_name": "Victor Porton",
        "timestamp": 1770559557
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"411273\">Victor Porton</span> <a href=\"#narrow/channel/270676-lean4/topic/Should.20I.20use.20a.20structure.20or.20just.20a.20pair.20for.20a.2E.2E.2E.20pair.3F/near/572623148\">said</a>:</p>\n<blockquote>\n<p>Can you refer to an example?</p>\n</blockquote>\n<p>Well so this the way Lean handles the common convention of conflating certain objects with their carrier sets.</p>\n<p><code>ℝ</code> is a type, but it has a field instance, which means that if I write <code>(fun x y : ℝ =&gt; x + y)</code>,  Lean is able to infer what the symbol <code>+</code> is supposed to mean.</p>\n<p>If <code>ℝ</code> were defined as a bundled field structure, we'd have to write something like <code>ℝ.type</code> all the time, which would be annoying.</p>",
        "id": 572623420,
        "sender_full_name": "James E Hanson",
        "timestamp": 1770559591
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"479299\">Jovan Gerbscheid</span> <a href=\"#narrow/channel/270676-lean4/topic/Should.20I.20use.20a.20structure.20or.20just.20a.20pair.20for.20a.2E.2E.2E.20pair.3F/near/572623317\">said</a>:</p>\n<blockquote>\n<p>I might be wrong about the definition, but isn't it just this:</p>\n<p><div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">PartialOrder</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span>\n</code></pre></div><br>\n</p>\n</blockquote>\n<p>Which of the two definitions is better?</p>",
        "id": 572623422,
        "sender_full_name": "Victor Porton",
        "timestamp": 1770559591
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"411273\">Victor Porton</span> <a href=\"#narrow/channel/270676-lean4/topic/Should.20I.20use.20a.20structure.20or.20just.20a.20pair.20for.20a.2E.2E.2E.20pair.3F/near/572623384\">said</a>:</p>\n<blockquote>\n<p><div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">structure</span><span class=\"w\"> </span><span class=\"n\">Filtrator</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">order</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">PartialOrder</span><span class=\"w\"> </span><span class=\"n\">α</span>\n<span class=\"w\">  </span><span class=\"n\">subset</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">α</span>\n</code></pre></div><br>\n</p>\n</blockquote>\n<p>With this, you run into issues with type class inference. In order to let lean figure out the <code>PartialOrder</code> instance, you would have to make <code>Filtrator</code> a class. But then you can only have one filtrator on any given type, which is not what you want.</p>\n<p>So, I'd say just use <code>variable (α : Type u) [PartialOrder α] (f : Set α)</code>. I don't really see any disadvantages to this.</p>",
        "id": 572623571,
        "sender_full_name": "Jovan Gerbscheid",
        "timestamp": 1770559736
    },
    {
        "content": "<p>Oh, I was wrong: I forget an important case when I need two filtrators at once.</p>",
        "id": 572623874,
        "sender_full_name": "Victor Porton",
        "timestamp": 1770560025
    },
    {
        "content": "<p>Oh oops, I meant <code>variable {α : Type u} [PartialOrder α] (f : Set α)</code></p>",
        "id": 572623934,
        "sender_full_name": "Jovan Gerbscheid",
        "timestamp": 1770560086
    },
    {
        "content": "<p>(or you can use <code>{α : Type*}</code>)</p>",
        "id": 572623972,
        "sender_full_name": "Jovan Gerbscheid",
        "timestamp": 1770560121
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"479299\">Jovan Gerbscheid</span> <a href=\"#narrow/channel/270676-lean4/topic/Should.20I.20use.20a.20structure.20or.20just.20a.20pair.20for.20a.2E.2E.2E.20pair.3F/near/572623934\">said</a>:</p>\n<blockquote>\n<p>Oh oops, I meant <code>variable {α : Type u} [PartialOrder α] (f : Set α)</code></p>\n</blockquote>\n<p>But as follows from above, variable does not suit. Your offer to use class makes necessary to define a partial order every time when filtrators are used, doesn't it. So, it seems for me inconvenient to use a class.</p>",
        "id": 572624047,
        "sender_full_name": "Victor Porton",
        "timestamp": 1770560175
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"479299\">Jovan Gerbscheid</span> <a href=\"#narrow/channel/270676-lean4/topic/Should.20I.20use.20a.20structure.20or.20just.20a.20pair.20for.20a.2E.2E.2E.20pair.3F/near/572623972\">said</a>:</p>\n<blockquote>\n<p>(or you can use <code>{α : Type*}</code>)</p>\n</blockquote>\n<p>What is <code>Type*</code>?</p>",
        "id": 572624068,
        "sender_full_name": "Victor Porton",
        "timestamp": 1770560196
    },
    {
        "content": "<p><code>Type*</code> is like <code>Type u</code>, but it generates a new/fresh universe level for you. So then you don't need to write the <code>universe u</code> command on top of your file.</p>",
        "id": 572624177,
        "sender_full_name": "Jovan Gerbscheid",
        "timestamp": 1770560311
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"411273\">Victor Porton</span> <a href=\"#narrow/channel/270676-lean4/topic/Should.20I.20use.20a.20structure.20or.20just.20a.20pair.20for.20a.2E.2E.2E.20pair.3F/near/572624047\">said</a>:</p>\n<blockquote>\n<p>But as follows from above, variable does not suit.</p>\n</blockquote>\n<p>What do you mean?</p>",
        "id": 572624188,
        "sender_full_name": "Jovan Gerbscheid",
        "timestamp": 1770560328
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"479299\">Jovan Gerbscheid</span> <a href=\"#narrow/channel/270676-lean4/topic/Should.20I.20use.20a.20structure.20or.20just.20a.20pair.20for.20a.2E.2E.2E.20pair.3F/near/572624188\">said</a>:</p>\n<blockquote>\n<p>What do you mean?</p>\n</blockquote>\n<p>\"Oh, I was wrong: I forget an important case when I need two filtrators at once.\"</p>",
        "id": 572624231,
        "sender_full_name": "Victor Porton",
        "timestamp": 1770560370
    },
    {
        "content": "<p>In that case you should use</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">PartialOrder</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f₁</span><span class=\"w\"> </span><span class=\"n\">f₂</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 572624289,
        "sender_full_name": "Jovan Gerbscheid",
        "timestamp": 1770560416
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"479299\">Jovan Gerbscheid</span> <a href=\"#narrow/channel/270676-lean4/topic/Should.20I.20use.20a.20structure.20or.20just.20a.20pair.20for.20a.2E.2E.2E.20pair.3F/near/572624289\">said</a>:</p>\n<blockquote>\n<p>In that case you should use</p>\n<p><div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">PartialOrder</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f₁</span><span class=\"w\"> </span><span class=\"n\">f₂</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span>\n</code></pre></div><br>\n</p>\n</blockquote>\n<p>I dislike this variant. If may lead into issues, if I notice more than two fitrators in single theorem.</p>",
        "id": 572624365,
        "sender_full_name": "Victor Porton",
        "timestamp": 1770560493
    },
    {
        "content": "<p>Or do you mean that the two filtrators have different underlying types? In that case you can do</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">PartialOrder</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f₁</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">PartialOrder</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f₂</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 572624387,
        "sender_full_name": "Jovan Gerbscheid",
        "timestamp": 1770560515
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"479299\">Jovan Gerbscheid</span> <a href=\"#narrow/channel/270676-lean4/topic/Should.20I.20use.20a.20structure.20or.20just.20a.20pair.20for.20a.2E.2E.2E.20pair.3F/near/572624387\">said</a>:</p>\n<blockquote>\n<p>Or do you mean that the two filtrators have different underlying types? In that case you can do</p>\n</blockquote>\n<p>Ya, different.</p>",
        "id": 572624414,
        "sender_full_name": "Victor Porton",
        "timestamp": 1770560544
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"411273\">Victor Porton</span> <a href=\"#narrow/channel/270676-lean4/topic/Should.20I.20use.20a.20structure.20or.20just.20a.20pair.20for.20a.2E.2E.2E.20pair.3F/near/572623104\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"904624\">James E Hanson</span> <a href=\"#narrow/channel/270676-lean4/topic/Should.20I.20use.20a.20structure.20or.20just.20a.20pair.20for.20a.2E.2E.2E.20pair.3F/near/572623042\">said</a>:</p>\n<blockquote>\n<p>Do you generally consider more than one filtrator on the same poset?</p>\n</blockquote>\n<p>In advanced theory. I think, I won't formalize that part of the theory (at least in the foreseeable future).</p>\n</blockquote>\n<p>But you would also want to be able to support the case of two filtrators on the same poset, if I understand correctly?</p>",
        "id": 572624501,
        "sender_full_name": "Jovan Gerbscheid",
        "timestamp": 1770560676
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"479299\">Jovan Gerbscheid</span> <a href=\"#narrow/channel/270676-lean4/topic/Should.20I.20use.20a.20structure.20or.20just.20a.20pair.20for.20a.2E.2E.2E.20pair.3F/near/572624501\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"411273\">Victor Porton</span> <a href=\"#narrow/channel/270676-lean4/topic/Should.20I.20use.20a.20structure.20or.20just.20a.20pair.20for.20a.2E.2E.2E.20pair.3F/near/572623104\">said</a>:</p>\n<blockquote>\n<p>But you would also want to be able to support the case of two filtrators on the same poset, if I understand correctly?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">Two</span><span class=\"w\"> </span><span class=\"n\">filtrators</span><span class=\"w\"> </span><span class=\"n\">on</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">same</span><span class=\"w\"> </span><span class=\"n\">poset</span><span class=\"w\"> </span><span class=\"n\">seem</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">be</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">actual</span><span class=\"w\"> </span><span class=\"n\">now</span><span class=\"bp\">.</span>\n</code></pre></div>\n</blockquote>\n</blockquote>",
        "id": 572624580,
        "sender_full_name": "Victor Porton",
        "timestamp": 1770560729
    },
    {
        "content": "<p>So if you do not want to support two filtrators on the same poset, then you could do something like this:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">class</span><span class=\"w\"> </span><span class=\"n\">FiltratedOrder</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">extends</span><span class=\"w\"> </span><span class=\"n\">PartialOrder</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">filtrator</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">α</span>\n\n<span class=\"kn\">export</span><span class=\"w\"> </span><span class=\"n\">FiltratedOrder</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">filtrator</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>And then you can use it like this</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">FiltratedOrder</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span>\n\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">filtrator</span><span class=\"w\"> </span><span class=\"n\">α</span>\n</code></pre></div>",
        "id": 572624822,
        "sender_full_name": "Jovan Gerbscheid",
        "timestamp": 1770560972
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"479299\">Jovan Gerbscheid</span> <a href=\"#narrow/channel/270676-lean4/topic/Should.20I.20use.20a.20structure.20or.20just.20a.20pair.20for.20a.2E.2E.2E.20pair.3F/near/572624822\">said</a>:</p>\n<blockquote>\n<p>So if you do not want to support two filtrators on the same poset, then you could do something like this:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">class</span><span class=\"w\"> </span><span class=\"n\">FiltratedOrder</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">extends</span><span class=\"w\"> </span><span class=\"n\">PartialOrder</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">filtrator</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">α</span>\n\n<span class=\"kn\">export</span><span class=\"w\"> </span><span class=\"n\">FiltratedOrder</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">filtrator</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>And then you can use it like this</p>\n<p><div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">FiltratedOrder</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span>\n\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">filtrator</span><span class=\"w\"> </span><span class=\"n\">α</span>\n</code></pre></div><br>\n</p>\n</blockquote>\n<p>After your change, this does not work:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Filtrator</span><span class=\"bp\">.</span><span class=\"n\">suborder</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">F</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Filtrator</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">PartialOrder</span><span class=\"w\"> </span><span class=\"n\">F</span><span class=\"bp\">.</span><span class=\"n\">subset</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"bp\">@</span><span class=\"n\">Subtype</span><span class=\"bp\">.</span><span class=\"n\">partialOrder</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"n\">F</span><span class=\"bp\">.</span><span class=\"n\">order</span><span class=\"w\"> </span><span class=\"n\">F</span><span class=\"bp\">.</span><span class=\"n\">subset</span>\n</code></pre></div>\n<p>How to make this <code>.order</code> work?</p>",
        "id": 572625119,
        "sender_full_name": "Victor Porton",
        "timestamp": 1770561254
    },
    {
        "content": "<p>It would be like this:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">FiltratedOrder</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span>\n\n<span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">PartialOrder</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">filtrator</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">Subtype</span><span class=\"bp\">.</span><span class=\"n\">partialOrder</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">filtrator</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 572625261,
        "sender_full_name": "Jovan Gerbscheid",
        "timestamp": 1770561367
    },
    {
        "content": "<p>Note that when you are dealing with instances, you should never need to give a name to the variable (so don't use <code>[F : Filtrator α]</code>, but let type class search fill it in for you)</p>",
        "id": 572625394,
        "sender_full_name": "Jovan Gerbscheid",
        "timestamp": 1770561463
    },
    {
        "content": "<p>Your code does not verify and I don't know how to make it verify.</p>",
        "id": 572625536,
        "sender_full_name": "Victor Porton",
        "timestamp": 1770561606
    },
    {
        "content": "<p>I need to extract the order from filtrator and don't know how.</p>",
        "id": 572625561,
        "sender_full_name": "Victor Porton",
        "timestamp": 1770561627
    },
    {
        "content": "<p>Sorry, I'll share the complete code:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">class</span><span class=\"w\"> </span><span class=\"n\">FiltratedOrder</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">extends</span><span class=\"w\"> </span><span class=\"n\">PartialOrder</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">filtrator</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">α</span>\n\n<span class=\"kn\">export</span><span class=\"w\"> </span><span class=\"n\">FiltratedOrder</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">filtrator</span><span class=\"o\">)</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">FiltratedOrder</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Filtrator</span><span class=\"bp\">.</span><span class=\"n\">suborder</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">PartialOrder</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">filtrator</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">Subtype</span><span class=\"bp\">.</span><span class=\"n\">partialOrder</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">filtrator</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 572625581,
        "sender_full_name": "Jovan Gerbscheid",
        "timestamp": 1770561643
    },
    {
        "content": "<p>I  don't know at all, what <code>export</code> means.</p>",
        "id": 572625658,
        "sender_full_name": "Victor Porton",
        "timestamp": 1770561725
    },
    {
        "content": "<p><code>export</code> in this case means that you can write <code>filtrator</code> as a shorthand for <code>FiltratedOrder.filtrator</code>.</p>",
        "id": 572625711,
        "sender_full_name": "Jovan Gerbscheid",
        "timestamp": 1770561786
    },
    {
        "content": "<p>And the <code>(α)</code> in <code>filtrator (α) : Set α</code> causes the <code>α</code> argument of <code>filtrator</code> to be explicit, so that you can write <code>filtrator α</code>, and then type class search will fill in the data for you, based on the type <code>α</code>.</p>",
        "id": 572625779,
        "sender_full_name": "Jovan Gerbscheid",
        "timestamp": 1770561868
    },
    {
        "content": "<p>How to use two related structures in one theorem?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">rel_right_flt</span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">}{</span><span class=\"n\">β</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"o\">}[</span><span class=\"n\">PartialOrder</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">][</span><span class=\"n\">Filtrator</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"o\">]{</span><span class=\"n\">Y</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">PartialOrder</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"o\">}</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">PointfreeFuncoid</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">inferInstance</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">PartialOrder</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">Y</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">b</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">f</span><span class=\"bp\">.</span><span class=\"n\">funcoid_rel</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">↔</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">Filtrator</span><span class=\"bp\">.</span><span class=\"n\">up</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"bp\">.</span><span class=\"n\">funcoid_rel</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n</code></pre></div>\n<div class=\"codehilite\" data-code-language=\"plain\"><pre><span></span><code>Application type mismatch: The argument\n  a\nhas type\n  α\nof sort `Type u` but is expected to have type\n  β\nof sort `Type v` in the application\n  f.funcoid_rel aLean 4\n</code></pre></div>\n<p><code>f.funcoid_rel</code> is a relation between elements of posets.</p>",
        "id": 572629471,
        "sender_full_name": "Victor Porton",
        "timestamp": 1770565025
    },
    {
        "content": "<p>what is <code>PointfreeFuncoid</code>?</p>",
        "id": 572629530,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1770565084
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"816344\">@Aaron Liu</span> </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">structure</span><span class=\"w\"> </span><span class=\"n\">PointfreeFuncoid</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">}{</span><span class=\"n\">β</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"o\">}(</span><span class=\"n\">a</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">PartialOrder</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)(</span><span class=\"n\">b</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">PartialOrder</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">    </span><span class=\"n\">fwd</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">β</span>\n<span class=\"w\">    </span><span class=\"n\">bwd</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">α</span>\n<span class=\"w\">    </span><span class=\"n\">rev</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">y</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">@</span><span class=\"n\">meet</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">fwd</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">↔</span><span class=\"w\"> </span><span class=\"bp\">@</span><span class=\"n\">meet</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">bwd</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">x</span>\n</code></pre></div>",
        "id": 572629561,
        "sender_full_name": "Victor Porton",
        "timestamp": 1770565113
    },
    {
        "content": "<p>Two functions between posts that are \"quasi-reverses\" to each other.</p>",
        "id": 572629593,
        "sender_full_name": "Victor Porton",
        "timestamp": 1770565151
    },
    {
        "content": "<p>and what is <code>PointfreeFuncoid.funcoid_rel</code>? (this would be much easier with a <a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a>)</p>",
        "id": 572629643,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1770565184
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> <a href=\"#narrow/channel/270676-lean4/topic/Should.20I.20use.20a.20structure.20or.20just.20a.20pair.20for.20a.2E.2E.2E.20pair.3F/near/572629643\">said</a>:</p>\n<blockquote>\n<p>and what is <code>PointfreeFuncoid.funcoid_rel</code>? (this would be much easier with a <a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a>)</p>\n</blockquote>\n<p>I've found some obvious mistakes in my code, trying now by myself.</p>",
        "id": 572629859,
        "sender_full_name": "Victor Porton",
        "timestamp": 1770565389
    },
    {
        "content": "<p>It seems, my message has been deleted. Probably, that's because I wrote to a wrong channel. So, I think, it is appropriate here:</p>\n<p>How  to check whether a value belongs to a class? The following code does not compile:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">class</span><span class=\"w\"> </span><span class=\"n\">Filtrator</span><span class=\"bp\">.</span><span class=\"n\">filtered</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"kn\">extends</span><span class=\"w\"> </span><span class=\"n\">Filtrator</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">is_filtered</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">up</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">⊆</span><span class=\"w\"> </span><span class=\"n\">up</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">x</span>\n\n<span class=\"sd\">/-- A filtrator is up-determined if every element is the infimum of its core upper set. -/</span>\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">Filtrator</span><span class=\"bp\">.</span><span class=\"n\">up_determined</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Filtrator</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Filtrator</span><span class=\"bp\">.</span><span class=\"n\">filtered</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">↔</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">IsGLB</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Filtrator</span><span class=\"bp\">.</span><span class=\"n\">up</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>Please, help to correct it.</p>",
        "id": 572669290,
        "sender_full_name": "Victor Porton",
        "timestamp": 1770603500
    },
    {
        "content": "<p><a href=\"#narrow/channel/270676-lean4/topic/Should.20I.20use.20a.20structure.20or.20just.20a.20pair.20for.20a.2E.2E.2E.20pair.3F/near/572669290\">A message</a> was moved here from <a class=\"stream-topic\" data-stream-id=\"270676\" href=\"/#narrow/channel/270676-lean4/topic/Package.20version.20from.20git.20tag.3F/with/572634835\">#lean4 &gt; Package version from git tag?</a> by <span class=\"user-mention silent\" data-user-id=\"321696\">Julian Berman</span>.</p>",
        "id": 572669847,
        "sender_full_name": "Notification Bot",
        "timestamp": 1770604028
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"411273\">@Victor Porton</span> your last message seems definitely to not belong in the last 2 places you had it -- I'm not sure it belongs here either or in a new thread, but here seems better than where it was at least.</p>",
        "id": 572669878,
        "sender_full_name": "Julian Berman",
        "timestamp": 1770604060
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"411273\">Victor Porton</span> <a href=\"#narrow/channel/270676-lean4/topic/Should.20I.20use.20a.20structure.20or.20just.20a.20pair.20for.20a.2E.2E.2E.20pair.3F/near/572669290\">said</a>:</p>\n<blockquote>\n<p>How  to check whether a value belongs to a class? The following code does not compile:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">class</span><span class=\"w\"> </span><span class=\"n\">Filtrator</span><span class=\"bp\">.</span><span class=\"n\">filtered</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"kn\">extends</span><span class=\"w\"> </span><span class=\"n\">Filtrator</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">is_filtered</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">up</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">⊆</span><span class=\"w\"> </span><span class=\"n\">up</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">x</span>\n\n<span class=\"sd\">/-- A filtrator is up-determined if every element is the infimum of its core upper set. -/</span>\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">Filtrator</span><span class=\"bp\">.</span><span class=\"n\">up_determined</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Filtrator</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Filtrator</span><span class=\"bp\">.</span><span class=\"n\">filtered</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">↔</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">IsGLB</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Filtrator</span><span class=\"bp\">.</span><span class=\"n\">up</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>Please, help to correct it.</p>\n</blockquote>\n<p>probably I think you want <code>Filtrator.filtered</code> to be a mixin instead of extending <code>Filtrator</code></p>",
        "id": 572669971,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1770604147
    },
    {
        "content": "<p>see for example <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=AddCommMagma#doc\">docs#AddCommMagma</a> is bundled vs <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=IsAddCommutative#doc\">docs#IsAddCommutative</a> is a mixin</p>",
        "id": 572670160,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1770604304
    },
    {
        "content": "<p>This topic was moved here from <a class=\"stream-topic\" data-stream-id=\"270676\" href=\"/#narrow/channel/270676-lean4/topic/Should.20I.20use.20a.20structure.20or.20just.20a.20pair.20for.20a.2E.2E.2E.20pair.3F\">#lean4 &gt; Should I use a structure or just a pair for a... pair?</a> by <span class=\"user-mention silent\" data-user-id=\"634338\">Michael Rothgang</span>.</p>",
        "id": 573922528,
        "sender_full_name": "Notification Bot",
        "timestamp": 1771098732
    }
]