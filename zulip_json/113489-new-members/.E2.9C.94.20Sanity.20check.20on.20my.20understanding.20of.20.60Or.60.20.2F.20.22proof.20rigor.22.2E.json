[
    {
        "content": "<p>Hello all. Hopefully this is in the right place, I'm new to Zulip so please redirect me if necessary.</p>\n<p>I'm also fairly new to Lean4. Currently, I've been working through the proposition exercises at the bottom of the \"textbook\" chapter <a href=\"https://lean-lang.org/theorem_proving_in_lean4/propositions_and_proofs.html\">here</a>.</p>\n<p>Below is a solution I came up with for one of the \"classical\" exercises.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"w\">  </span><span class=\"c1\">-- signature: ((p ∧ q) -&gt; False) -&gt; ((p -&gt; False) ∨ q (-&gt; False))</span>\n<span class=\"w\">  </span><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">∨</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">em_p'</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">∨</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">em</span><span class=\"w\"> </span><span class=\"n\">p</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">em_q'</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"bp\">∨</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">em</span><span class=\"w\"> </span><span class=\"n\">q</span>\n<span class=\"w\">    </span><span class=\"bp\">λ</span><span class=\"w\"> </span><span class=\"n\">pnq'</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"k\">match</span><span class=\"w\"> </span><span class=\"n\">em_p'</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">em_q'</span><span class=\"w\"> </span><span class=\"k\">with</span>\n<span class=\"w\">      </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">Or</span><span class=\"bp\">.</span><span class=\"n\">inl</span><span class=\"w\"> </span><span class=\"n\">p'</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Or</span><span class=\"bp\">.</span><span class=\"n\">inl</span><span class=\"w\"> </span><span class=\"n\">q'</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">Or</span><span class=\"bp\">.</span><span class=\"n\">inl</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">λ</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">pnq'</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">p'</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">q'</span><span class=\"bp\">⟩</span><span class=\"o\">)</span>\n<span class=\"w\">      </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">Or</span><span class=\"bp\">.</span><span class=\"n\">inl</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">Or</span><span class=\"bp\">.</span><span class=\"n\">inr</span><span class=\"w\"> </span><span class=\"n\">nq'</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">Or</span><span class=\"bp\">.</span><span class=\"n\">inr</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">λ</span><span class=\"w\"> </span><span class=\"n\">q'</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">absurd</span><span class=\"w\"> </span><span class=\"n\">q'</span><span class=\"w\"> </span><span class=\"n\">nq'</span><span class=\"o\">)</span>\n<span class=\"w\">      </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">Or</span><span class=\"bp\">.</span><span class=\"n\">inr</span><span class=\"w\"> </span><span class=\"n\">np'</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Or</span><span class=\"bp\">.</span><span class=\"n\">inl</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">Or</span><span class=\"bp\">.</span><span class=\"n\">inl</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">λ</span><span class=\"w\"> </span><span class=\"n\">p'</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">absurd</span><span class=\"w\"> </span><span class=\"n\">p'</span><span class=\"w\"> </span><span class=\"n\">np'</span><span class=\"o\">)</span>\n<span class=\"w\">      </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">Or</span><span class=\"bp\">.</span><span class=\"n\">inr</span><span class=\"w\"> </span><span class=\"n\">np'</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Or</span><span class=\"bp\">.</span><span class=\"n\">inr</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"n\">q</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">Or</span><span class=\"bp\">.</span><span class=\"n\">inl</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">λ</span><span class=\"w\"> </span><span class=\"n\">p'</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">absurd</span><span class=\"w\"> </span><span class=\"n\">p'</span><span class=\"w\"> </span><span class=\"n\">np'</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>My main question is \"How rigorous is the type checker considered (in general)?\"</p>\n<p>More specifically, for the \"case\" where <code>p</code> and <code>q</code> are true (first line under the match), do I need to also provide a proof that <code>Or.inr &lt;fn&gt;</code> holds for it to be considered rigorous? If so, are there any other obvious \"gotchas\" to be aware of that could compromise proof integrity?</p>\n<p>Additionally, how strong are concerns with using <code>absurd</code> incorrectly? I'm mostly thinking from the coding perspective since \"anything holds\" from the statement, and am</p>\n<p>Sorry if this is kind of silly, I'm new to theorem provers and just want to make sure my foundational understanding is correct such that I don't over/under place confidence in the type checker.</p>\n<p>I'm open to any other feedback as well! Thank you in advance!</p>",
        "id": 465801777,
        "sender_full_name": "Jarrin",
        "timestamp": 1724859937
    },
    {
        "content": "<p>The whole point of lean is that if your proof compiles (and doesn't use <code>sorry</code>), it is correct</p>",
        "id": 465802019,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1724860016
    },
    {
        "content": "<p>I guess I just needed that validation for some reason, thanks!</p>",
        "id": 465802345,
        "sender_full_name": "Jarrin",
        "timestamp": 1724860119
    },
    {
        "content": "<p>To prove \"a or b\", it is sufficient to prove one of them, even if they're both correct</p>",
        "id": 465802554,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1724860199
    },
    {
        "content": "<p>And note that in your first case, you have a contradiction with hypothesis <code>pnq'</code>, so this also works:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"w\">      </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">Or</span><span class=\"bp\">.</span><span class=\"n\">inl</span><span class=\"w\"> </span><span class=\"n\">p'</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Or</span><span class=\"bp\">.</span><span class=\"n\">inl</span><span class=\"w\"> </span><span class=\"n\">q'</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">False</span><span class=\"bp\">.</span><span class=\"n\">elim</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">pnq'</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">p'</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">q'</span><span class=\"bp\">⟩</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 465802723,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1724860248
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"749815\">Jarrin</span> has marked this topic as resolved.</p>",
        "id": 465803250,
        "sender_full_name": "Notification Bot",
        "timestamp": 1724860454
    },
    {
        "content": "<p>To expand on the point of \"what are the ways to mess up and 'prove' something wrong\", there are some axioms that trust larger parts of the ecosystem (which can have bugs), e.g., <code>Lean.ofReduceBool</code>. Some tactics use such axioms, e.g. <code>native_decide</code>. This becoming a problem is very rare. If you want to be sure about this point, you can print the axioms that a definition/theorem depends on using <code>#print axioms myDefinitionOrTheorem</code>.</p>\n<p>The most likely way to mess up is to misunderstand the statement of a theorem and think that you proved something different.</p>",
        "id": 466083605,
        "sender_full_name": "Adomas Baliuka",
        "timestamp": 1724955465
    }
]