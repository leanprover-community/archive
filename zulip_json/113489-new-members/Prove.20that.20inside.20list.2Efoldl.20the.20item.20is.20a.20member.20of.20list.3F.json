[
    {
        "content": "<p>How can I prove that if I am folding over a list, that the 2nd param in the fold must be a member of the list we're folding over?</p>\n<p>I'm trying to do something like <code>list.foldl (fun acc item =&gt; ...) init -&gt; item ∈ list</code> but I don't know how to write a proposition about a parameter of a function about the data structure the function should be called on</p>",
        "id": 504874170,
        "sender_full_name": "aron",
        "timestamp": 1741706709
    },
    {
        "content": "<p>Maybe something with <code>List.attach</code></p>",
        "id": 504875912,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1741707065
    },
    {
        "content": "<p>Ah nice, yes that's exactly what I needed!</p>\n<p>Now is there any way to do the same for a <code>Std.HashMap</code>?</p>",
        "id": 504884752,
        "sender_full_name": "aron",
        "timestamp": 1741708635
    },
    {
        "content": "<p>hm actually I might have a go at attempting this myself... hopefully it won't be too complicated</p>",
        "id": 504884938,
        "sender_full_name": "aron",
        "timestamp": 1741708665
    },
    {
        "content": "<p><code>m.toList.attach.foldl</code> ?</p>",
        "id": 504891170,
        "sender_full_name": "Johannes Tantow",
        "timestamp": 1741709813
    },
    {
        "content": "<p>that gets me to <code>k ∈ m.toList</code> not to <code>k ∈ m</code> itself</p>",
        "id": 504969441,
        "sender_full_name": "aron",
        "timestamp": 1741731577
    },
    {
        "content": "<p>I figured it out!</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Std</span><span class=\"bp\">.</span><span class=\"n\">Data</span><span class=\"bp\">.</span><span class=\"n\">HashMap</span>\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Std</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">HashMap</span><span class=\"bp\">.</span><span class=\"n\">attach</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">DecidableEq</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Hashable</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">HashMap</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">key</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"bp\">//</span><span class=\"w\"> </span><span class=\"n\">key</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">map</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">l</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">map</span><span class=\"bp\">.</span><span class=\"n\">keys</span><span class=\"bp\">.</span><span class=\"n\">attach</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">l'</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">key</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"bp\">//</span><span class=\"w\"> </span><span class=\"n\">key</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">map</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">l</span><span class=\"bp\">.</span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">key</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">hkey</span><span class=\"bp\">⟩</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">key</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">HashMap</span><span class=\"bp\">.</span><span class=\"n\">mem_keys</span><span class=\"bp\">.</span><span class=\"n\">mp</span><span class=\"w\"> </span><span class=\"n\">hkey</span><span class=\"bp\">⟩</span>\n<span class=\"w\">  </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">l'</span>\n</code></pre></div>",
        "id": 504982426,
        "sender_full_name": "aron",
        "timestamp": 1741736038
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"814082\">aron</span> <a href=\"#narrow/channel/113489-new-members/topic/Prove.20that.20inside.20list.2Efoldl.20the.20item.20is.20a.20member.20of.20list.3F/near/504969441\">schrieb</a>:</p>\n<blockquote>\n<p>that gets me to <code>k ∈ m.toList</code> not to <code>k ∈ m</code> itself</p>\n</blockquote>\n<p>There shoulld be lemmas simplifying this.</p>",
        "id": 505035490,
        "sender_full_name": "Johannes Tantow",
        "timestamp": 1741758547
    }
]