[
    {
        "content": "<p>Hi, all. I wonder what the following means:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"sd\">/-- A `bigOpBinder` is like an `extBinder` and has the form `x`, `x : ty`, or `x pred`</span>\n<span class=\"sd\">where `pred` is a `binderPred` like `&lt; 2`.</span>\n<span class=\"sd\">Unlike `extBinder`, `x` is a term. -/</span>\n<span class=\"kn\">syntax</span><span class=\"w\"> </span><span class=\"n\">bigOpBinder</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">term</span><span class=\"o\">:</span><span class=\"n\">max</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"s2\">\" : \"</span><span class=\"w\"> </span><span class=\"n\">term</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">&lt;|&gt;</span><span class=\"w\"> </span><span class=\"n\">binderPred</span><span class=\"o\">)</span><span class=\"bp\">?</span>\n</code></pre></div>\n<p>Is it the same as:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">syntax</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">name</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">bigOpBinder</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">term</span><span class=\"o\">:</span><span class=\"n\">max</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"s2\">\" : \"</span><span class=\"w\"> </span><span class=\"n\">term</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">&lt;|&gt;</span><span class=\"w\"> </span><span class=\"n\">binderPred</span><span class=\"o\">)</span><span class=\"bp\">?</span>\n</code></pre></div>\n<p>ChatGPT told me they are different and in the first, \"The <code>bigOpBinder</code> is a distinct syntax category, like a shorthand for the specific structure described.\" </p>\n<p>However, by hovering over the type of <code>bigOpBinder</code>, it seems that ChatGPT is wrong and I'm correct. It's interesting because Claude agrees with ChatGPT.</p>\n<p>I couldn't find relevant reference in the documentation for now.</p>",
        "id": 486954645,
        "sender_full_name": "Xiyu Zhai",
        "timestamp": 1733739175
    },
    {
        "content": "<p>The second one is syntactically invalid, unless I'm missing something (note the red squiggle at the end of the line)</p>",
        "id": 487061178,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1733766773
    },
    {
        "content": "<p>i suspect it's missing <code>: term</code> at the end</p>",
        "id": 487090003,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1733775402
    },
    {
        "content": "<p>That would be incorrect though, since <code>bigOpBinder</code> is not supposed to be a term.</p>",
        "id": 487090087,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1733775438
    },
    {
        "content": "<p>so it <em>is</em> its own syntax category then?</p>",
        "id": 487090375,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1733775545
    },
    {
        "content": "<p>answer : no</p>",
        "id": 487091026,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1733775797
    },
    {
        "content": "<p>No, a syntax category is its own thing. Let's say we did add <code>: term</code> to the second one to make something that's syntactically correct (even though that would logically be incorrect), both would define a new syntax kind, and the second would add that to the <code>term</code> category.</p>",
        "id": 487091082,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1733775815
    },
    {
        "content": "<p>i was under the impression that every defined syntax has to be part of some category... is that wrong then?</p>",
        "id": 487091227,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1733775860
    },
    {
        "content": "<p>Yes</p>",
        "id": 487091243,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1733775868
    },
    {
        "content": "<p>then every syntax is either its own syntaxkind or is part of a syntax category?</p>",
        "id": 487091539,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1733775971
    },
    {
        "content": "<p>No, being part of a syntax category is independent. But as far as I know every <code>syntax</code> does create a parser that wraps its result in a Syntax.node with a unique kind (specified by the LHS of the <code>:=</code> in a syntax abbreviation, or by the <code>(name := ...)</code> in the second form. If the <code>(name := ...)</code> is omitted, then the name is auto-generated.)</p>",
        "id": 487091917,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1733776130
    },
    {
        "content": "<p>If you are using the lower-level parsers (via <code>def</code> rather than this higher-level <code>syntax</code>), then you can create syntax abbreviations that don't insert such a Syntax.node.</p>",
        "id": 487091980,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1733776159
    },
    {
        "content": "<p>Thanks a lot!</p>",
        "id": 488913380,
        "sender_full_name": "Xiyu Zhai",
        "timestamp": 1734120840
    }
]