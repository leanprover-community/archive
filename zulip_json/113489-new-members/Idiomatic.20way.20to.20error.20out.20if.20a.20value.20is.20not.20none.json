[
    {
        "content": "<p>I want to verify that a function returns none in some meta-code, I am currently doing</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">none</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">get</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">env</span><span class=\"bp\">.</span><span class=\"n\">constants</span><span class=\"bp\">.</span><span class=\"n\">find?</span><span class=\"w\"> </span><span class=\"n\">name</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">elabTheorem</span><span class=\"w\"> </span><span class=\"n\">stx</span>\n</code></pre></div>\n<p>which seems better than</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"w\">  </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">get</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">env</span><span class=\"bp\">.</span><span class=\"n\">constants</span><span class=\"bp\">.</span><span class=\"n\">contains</span><span class=\"w\"> </span><span class=\"n\">name</span><span class=\"w\"> </span><span class=\"k\">then</span>\n<span class=\"w\">    </span><span class=\"n\">elabTheorem</span><span class=\"w\"> </span><span class=\"n\">stx</span>\n<span class=\"w\">    </span><span class=\"n\">return</span>\n</code></pre></div>\n<p>but <code>let none :=</code> seems a bit odd to me, is there a more idiomatic way to do this?</p>",
        "id": 499905720,
        "sender_full_name": "Vlad Tsyrklevich",
        "timestamp": 1739618215
    },
    {
        "content": "<p>Maybe <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=guard#doc\">docs#guard</a> with <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Option.isNone#doc\">docs#Option.isNone</a></p>",
        "id": 499930888,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1739639032
    },
    {
        "content": "<p><code>if let some existing := ... then return ...</code> is another option</p>",
        "id": 499931371,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1739639396
    }
]