[
    {
        "content": "<p>Howdy there,</p>\n<p>Still new to Lean and learning, enjoying it.  I'm looking for some practical advice of how people think about debugging problems synthesizing an instance you think should be available.  Are there set_options that help trace what instances are tried / failed, forinstance?  Or is there another way to think about the problem?</p>\n<p>More context: I'm using LSPec to help me generate some property tests for an encoding / decoding library I was building for fun.  LSpec depends on a rather long chain of instances to make <code>Checkable</code> work, and I believe I have that chain fulfilled with SampleExt and Shrinkable instances that I can confirm with <code>synth</code>, but I still can't get <code>Checkable</code> to work.  Looking at the source code and documentation it feels like I'm close, but obviously I'm missing a detail.  Is there any way to get the compiler to help point me in the direction of its inference trace?  Like what instances failed and why?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">#</span><span class=\"n\">synth</span><span class=\"w\"> </span><span class=\"n\">SampleableExt</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Vector</span><span class=\"w\"> </span><span class=\"n\">UInt8</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"c1\">-- works</span>\n<span class=\"bp\">#</span><span class=\"n\">synth</span><span class=\"w\"> </span><span class=\"n\">Shrinkable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Vector</span><span class=\"w\"> </span><span class=\"n\">UInt8</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"c1\">-- works</span>\n<span class=\"bp\">#</span><span class=\"n\">lspec</span><span class=\"w\"> </span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"s2\">\"Composition\"</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"w\"> </span><span class=\"bp\">âˆ€</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Vector</span><span class=\"w\"> </span><span class=\"n\">UInt8</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"bp\">.</span><span class=\"n\">size</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"c1\">-- cannot synth</span>\n</code></pre></div>",
        "id": 501403561,
        "sender_full_name": "Zach Collins",
        "timestamp": 1740339195
    },
    {
        "content": "<p><code>set_option trace.Meta.synthInstance true</code></p>",
        "id": 501406288,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1740341391
    },
    {
        "content": "<p>This worked perfectly, thank you so much!</p>",
        "id": 501406929,
        "sender_full_name": "Zach Collins",
        "timestamp": 1740341934
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"812775\">Zach Collins</span> has marked this topic as resolved.</p>",
        "id": 501406958,
        "sender_full_name": "Notification Bot",
        "timestamp": 1740341960
    }
]