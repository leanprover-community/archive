[
    {
        "content": "<p>I am working through Mathematics in Lean and I still haven’t grasped how “have” works exactly. In particular, there’s the solution to this example in section 3 of chapter 1:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">MIL</span><span class=\"bp\">.</span><span class=\"n\">Common</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Data</span><span class=\"bp\">.</span><span class=\"n\">Real</span><span class=\"bp\">.</span><span class=\"n\">Basic</span>\n<span class=\"kn\">namespace</span><span class=\"w\"> </span><span class=\"n\">C03S03</span>\n\n<span class=\"kn\">section</span>\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">FnLb</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">x</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">FnHasLb</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">FnLb</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">a</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"n\">FnHasLb</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">rintro</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">a</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">ha</span><span class=\"bp\">⟩</span>\n<span class=\"w\">  </span><span class=\"n\">rcases</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">x</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">hx</span><span class=\"bp\">⟩</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">ha</span><span class=\"w\"> </span><span class=\"n\">x</span>\n<span class=\"w\">  </span><span class=\"n\">linarith</span>\n</code></pre></div>\n<p>I don’t know how to unpack what the \"have := ha x\" means. How come “have” is followed by “:=“ and not “:” like it usually is?</p>",
        "id": 554169608,
        "sender_full_name": "Sarah El Boustany",
        "timestamp": 1762456121
    },
    {
        "content": "<p><code>have := ha x</code> is shorthand for <code>have : _ := ha x</code>. In general, the syntax is <code>have name : type := value</code> and means \"Let <code>name</code> be the proof of <code>type</code> as provided by <code>value</code>\"</p>",
        "id": 554169877,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1762456232
    },
    {
        "content": "<p>If you only give <code>value</code>, then Lean can oftentimes recover what <code>type</code> is just from <code>value</code>. This is indeed what's going on in the <code>have name := value</code> syntax</p>",
        "id": 554170159,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1762456303
    },
    {
        "content": "<p>It's <a href=\"#narrow/channel/113489-new-members/topic/the.20quest.20to.20fully.20understand.20lean/near/553428900\">the second time</a> this question comes up btw</p>",
        "id": 554170697,
        "sender_full_name": "Arthur Paulino",
        "timestamp": 1762456442
    },
    {
        "content": "<p>Thank you for the explanation! I'm sorry I missed the original question, I did try searching through the topics but I guess I didn't know exactly what to filter for</p>",
        "id": 554171446,
        "sender_full_name": "Sarah El Boustany",
        "timestamp": 1762456719
    },
    {
        "content": "<p>Oh, I didn't mean you were expected to find the original question, sorry. I'm just saying that <a href=\"https://leanprover-community.github.io/mathematics_in_lean/\">#mil</a> doesn't seem to be self-contained enough yet</p>",
        "id": 554171700,
        "sender_full_name": "Arthur Paulino",
        "timestamp": 1762456799
    },
    {
        "content": "<p>Oh, the tactic <code>have</code> has a comprehensive docstring, which shows up on hover:<br>\n<a href=\"/user_uploads/3121/acs0EWjUvLl7JkTdRGg2B9CM/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/acs0EWjUvLl7JkTdRGg2B9CM/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"918x317\" src=\"/user_uploads/thumbnail/3121/acs0EWjUvLl7JkTdRGg2B9CM/image.png/840x560.webp\"></a></div>",
        "id": 554172570,
        "sender_full_name": "Arthur Paulino",
        "timestamp": 1762457070
    },
    {
        "content": "<p>When I hovered over have I wasn't really sure which case <code>have := ha x</code> fell under. Would it be <code>have pat :=  e</code> then?</p>",
        "id": 554278015,
        "sender_full_name": "Sarah El Boustany",
        "timestamp": 1762508817
    },
    {
        "content": "<p>Hm, that looks like an opportunity to improve the <code>have</code> tactic doc-string!</p>",
        "id": 554278285,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1762508910
    },
    {
        "content": "<p>Looks like the <code>have := e</code> version: you provide a value (and let Lean figure out the type) and the name will be the default <code>this</code>.</p>",
        "id": 554278469,
        "sender_full_name": "Philippe Duchon",
        "timestamp": 1762508968
    },
    {
        "content": "<p>By the way: have you seen the mathlib tactic manual? It has documentation for all mathlib tactics: <a href=\"https://leanprover-community.github.io/mathlib-manual/html-multi/Tactics/#tactics\">https://leanprover-community.github.io/mathlib-manual/html-multi/Tactics/#tactics</a><br>\nIf you want to get an overview of \"what tactic could help me here\", that might be useful.</p>",
        "id": 554279074,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1762509148
    },
    {
        "content": "<p>There is also a cheat sheet, which is a bit more compact: <a href=\"https://leanprover-community.github.io/papers/lean-tactics.pdf\">https://leanprover-community.github.io/papers/lean-tactics.pdf</a></p>",
        "id": 554279125,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1762509160
    },
    {
        "content": "<p>Oh, I hadn't seen that cheatsheet, thank you!</p>",
        "id": 554288612,
        "sender_full_name": "Sarah El Boustany",
        "timestamp": 1762511716
    }
]