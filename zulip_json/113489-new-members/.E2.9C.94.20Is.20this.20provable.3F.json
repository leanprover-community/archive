[
    {
        "content": "<p>Is the following provable? I tried many things but am still stuck. Any help greatly appreciated.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">×</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"m\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n</code></pre></div>",
        "id": 482199333,
        "sender_full_name": "Kevin Cheung",
        "timestamp": 1731511813
    },
    {
        "content": "<p>It's false</p>",
        "id": 482199701,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1731511898
    },
    {
        "content": "<p>Could you help me see how it is false?</p>",
        "id": 482199805,
        "sender_full_name": "Kevin Cheung",
        "timestamp": 1731511922
    },
    {
        "content": "<p>No, this is false. Take eg <code>σ := Bool</code> and <code>x := fun s ↦ (whatever, ! s)</code></p>",
        "id": 482199864,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1731511928
    },
    {
        "content": "<p>Thanks.</p>",
        "id": 482200011,
        "sender_full_name": "Kevin Cheung",
        "timestamp": 1731511965
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">axiom</span><span class=\"w\"> </span><span class=\"n\">ex</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">×</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"m\">2</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">False</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">ex</span><span class=\"w\"> </span><span class=\"n\">Bool</span><span class=\"w\"> </span><span class=\"n\">Bool</span><span class=\"w\"> </span><span class=\"n\">true</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">true</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">!</span><span class=\"n\">s</span><span class=\"o\">))</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">this</span>\n</code></pre></div>",
        "id": 482200035,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1731511969
    },
    {
        "content": "<p>Maybe the real question is why you think this is true. Using set theory jargon, your lemma say the following: take two sets <code>σ</code> and <code>α</code> and an element <code>s ∈ σ</code>. Then, for any function <code>x : σ → (α × σ)</code>, we have that the second component of <code>x s</code> is <code>s</code>.</p>",
        "id": 482200920,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1731512189
    },
    {
        "content": "<p>This is false just because <code>x</code> and <code>s</code> are completely unrelated, so the image of <code>s</code> can be anything.</p>",
        "id": 482201075,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1731512226
    },
    {
        "content": "<p>I just wasn't thinking clearly, confused by the syntax.</p>",
        "id": 482201159,
        "sender_full_name": "Kevin Cheung",
        "timestamp": 1731512249
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"397075\">Kevin Cheung</span> has marked this topic as resolved.</p>",
        "id": 482201303,
        "sender_full_name": "Notification Bot",
        "timestamp": 1731512283
    },
    {
        "content": "<p>This is my point, it is much more likely that something went wrong in the translation from math to Lean process :)</p>",
        "id": 482201383,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1731512299
    },
    {
        "content": "<p>Or from the programming side, this example would say \"values of state monads never change the state\"</p>",
        "id": 482201647,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1731512370
    },
    {
        "content": "<p>Isn't there a theorem saying that the only term of type <code>∀ α, α → α</code> is the identity? The question seems a bit similar to that. (Except that there is no term of type <code>∀ α β, α → β × α</code> because <code>β</code> might be empty.)</p>",
        "id": 482262033,
        "sender_full_name": "Vincent Beffara",
        "timestamp": 1731532286
    },
    {
        "content": "<p>That's true of some type theories, but not Lean's. You're thinking <a href=\"https://people.mpi-sws.org/~dreyer/tor/papers/wadler.pdf\">https://people.mpi-sws.org/~dreyer/tor/papers/wadler.pdf</a>, right?</p>",
        "id": 482262514,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1731532468
    },
    {
        "content": "<p>Yes exactly.</p>",
        "id": 482262634,
        "sender_full_name": "Vincent Beffara",
        "timestamp": 1731532511
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Classical</span>\n<span class=\"kn\">noncomputable</span><span class=\"w\"> </span><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">not_id</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">    </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Bool</span><span class=\"w\"> </span><span class=\"k\">then</span>\n<span class=\"w\">      </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"bp\">▸</span><span class=\"w\"> </span><span class=\"n\">not</span>\n<span class=\"w\">    </span><span class=\"k\">else</span>\n<span class=\"w\">      </span><span class=\"n\">id</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"bp\">@</span><span class=\"n\">id</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">exists</span><span class=\"w\"> </span><span class=\"n\">not_id</span>\n<span class=\"w\">  </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">h</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">congrFun</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">congrFun</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"n\">Bool</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">true</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">not_id</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">this</span>\n</code></pre></div>",
        "id": 482262729,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1731532551
    },
    {
        "content": "<p>Ah indeed, this is \"evil\" but allowed ...</p>",
        "id": 482262957,
        "sender_full_name": "Vincent Beffara",
        "timestamp": 1731532642
    },
    {
        "content": "<p>The joys of the axiom of choice!</p>",
        "id": 482267458,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1731534382
    },
    {
        "content": "<p>Does this come up often enough that we should just put it in CounterExamples?</p>",
        "id": 482269679,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1731535323
    },
    {
        "content": "<p>My reaction to all this was totally the opposite to Vincent's -- I read that paper of Wadler in my early days of trying to learn type theory and my first thought was \"this is completely bananas, that theorem is obviously not true\" (and then I wrote down Kyle's counterexample)</p>",
        "id": 482270147,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1731535508
    },
    {
        "content": "<p>It's true when you can't put types into your term language like Kyle is doing. (\\alpha = Bool)</p>",
        "id": 482272480,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1731536601
    },
    {
        "content": "<p>In other words, when the type gods of Olympus keep aloof from the mortals, nothing evil happens. Things go wrong when they descend to the earth or mortals ascend to Olympus.</p>",
        "id": 482272739,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1731536741
    },
    {
        "content": "<p>And then there is Prop, the underworld of Hades, where all hell breaks loose (type theoretically speaking)</p>",
        "id": 482273017,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1731536870
    },
    {
        "content": "<p>Or in other words, it's true in System F.</p>",
        "id": 482273250,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1731536998
    },
    {
        "content": "<p>My conclusion was that theorems you got for free weren't worth much.</p>",
        "id": 482273685,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1731537175
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/stream/113489-new-members/topic/.E2.9C.94.20Is.20this.20provable.3F/near/482273685\">said</a>:</p>\n<blockquote>\n<p>My conclusion was that theorems you got for free weren't worth much.</p>\n</blockquote>\n<p>I wouldn't say that. When I started Haskell, I found that for a lot of basic functions, I could get what they were doing by just looking at the type signature. Of course this only goes so far. These free theorems are some concrete instantiations of this intuition.</p>",
        "id": 482274320,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1731537492
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"466334\">Shreyas Srinivas</span> <a href=\"#narrow/stream/113489-new-members/topic/.E2.9C.94.20Is.20this.20provable.3F/near/482274320\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/stream/113489-new-members/topic/.E2.9C.94.20Is.20this.20provable.3F/near/482273685\">said</a>:</p>\n<blockquote>\n<p>My conclusion was that theorems you got for free weren't worth much.</p>\n</blockquote>\n<p>I wouldn't say that. When I started Haskell, I found that for a lot of basic functions, I could get what they were doing by just looking at the type signature. Of course this only goes so far. These free theorems are some concrete instantiations of this intuition.</p>\n</blockquote>\n<p>In Haskell, you never know if it does anything at all though? Any type is inhabited in Haskell's type system</p>",
        "id": 482282382,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1731541565
    },
    {
        "content": "<p>Looks like learning Haskell and Lean at the same time leads to mental interference.</p>",
        "id": 482282667,
        "sender_full_name": "Kevin Cheung",
        "timestamp": 1731541732
    },
    {
        "content": "<p>I learned Haskell some years ago and I find that I have to unlearn some stuff when learning Lean.</p>",
        "id": 482282740,
        "sender_full_name": "Kevin Cheung",
        "timestamp": 1731541778
    },
    {
        "content": "<p>Unlearning writing terminating programs definitely is a thing. I remember being very happy with Haskell's type system, but now that I have experienced lean, I hate thinking about the lazy evaluation and the fact that termination doesn't get checked.</p>",
        "id": 482283945,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1731542419
    },
    {
        "content": "<p>It really is whack</p>",
        "id": 482284027,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1731542463
    },
    {
        "content": "<p>One thing going for Haskell is that it is used for building commercial software. I wonder if Lean will eventually get there.</p>",
        "id": 482284616,
        "sender_full_name": "Kevin Cheung",
        "timestamp": 1731542788
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"684366\">Edward van de Meent</span> <a href=\"#narrow/stream/113489-new-members/topic/.E2.9C.94.20Is.20this.20provable.3F/near/482282382\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"466334\">Shreyas Srinivas</span> <a href=\"#narrow/stream/113489-new-members/topic/.E2.9C.94.20Is.20this.20provable.3F/near/482274320\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/stream/113489-new-members/topic/.E2.9C.94.20Is.20this.20provable.3F/near/482273685\">said</a>:</p>\n<blockquote>\n<p>My conclusion was that theorems you got for free weren't worth much.</p>\n</blockquote>\n<p>I wouldn't say that. When I started Haskell, I found that for a lot of basic functions, I could get what they were doing by just looking at the type signature. Of course this only goes so far. These free theorems are some concrete instantiations of this intuition.</p>\n</blockquote>\n<p>In Haskell, you never know if it does anything at all though? Any type is inhabited in Haskell's type system</p>\n</blockquote>\n<p>In the broadest and most general sense yes. But this was when I started learning Haskell, as I mentioned before: When functions were always pure, data structures were always recursive and almost everything was a list or a tree, and IO was just something confusing to ignore.</p>",
        "id": 482289252,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1731545777
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"397075\">Kevin Cheung</span> <a href=\"#narrow/channel/113489-new-members/topic/.E2.9C.94.20Is.20this.20provable.3F/near/482284616\">said</a>:</p>\n<blockquote>\n<p>One thing going for Haskell is that it is used for building commercial software. I wonder if Lean will eventually get there.</p>\n</blockquote>\n<p>It has already been used by AWS!</p>",
        "id": 482306796,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1731557748
    },
    {
        "content": "<p>Does AWS use Lean to build verified software?</p>",
        "id": 482350980,
        "sender_full_name": "Kevin Cheung",
        "timestamp": 1731578309
    },
    {
        "content": "<p>Yes, see <a href=\"https://aws.amazon.com/blogs/opensource/lean-into-verified-software-development/\">https://aws.amazon.com/blogs/opensource/lean-into-verified-software-development/</a> for example.</p>",
        "id": 482352048,
        "sender_full_name": "Markus Himmel",
        "timestamp": 1731578629
    },
    {
        "content": "<p>This is amazing. Thank you.</p>",
        "id": 482352592,
        "sender_full_name": "Kevin Cheung",
        "timestamp": 1731578806
    },
    {
        "content": "<p>There is also a more general overview of other AWS projects in <a href=\"https://www.amazon.science/blog/how-the-lean-language-brings-math-to-coding-and-coding-to-math\">https://www.amazon.science/blog/how-the-lean-language-brings-math-to-coding-and-coding-to-math</a></p>",
        "id": 482355531,
        "sender_full_name": "Marc Huisinga",
        "timestamp": 1731579724
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"112680\">Johan Commelin</span> <a href=\"#narrow/channel/113489-new-members/topic/.E2.9C.94.20Is.20this.20provable.3F/near/482306796\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"397075\">Kevin Cheung</span> <a href=\"#narrow/channel/113489-new-members/topic/.E2.9C.94.20Is.20this.20provable.3F/near/482284616\">said</a>:</p>\n<blockquote>\n<p>One thing going for Haskell is that it is used for building commercial software. I wonder if Lean will eventually get there.</p>\n</blockquote>\n<p>It has already been used by AWS!</p>\n</blockquote>\n<p>Is there any language that hasn't?</p>",
        "id": 482402893,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1731594001
    },
    {
        "content": "<p>Brainfuck?</p>",
        "id": 482403171,
        "sender_full_name": "Luigi Massacci",
        "timestamp": 1731594069
    }
]