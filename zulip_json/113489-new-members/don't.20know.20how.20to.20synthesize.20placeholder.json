[
    {
        "content": "<p>Here is a short code sample that generates the error message in the post's title.   Why does it <br>\ngenerate this message,  and how do I get rid of it?</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">class</span>  <span class=\"n\">ExampleClass</span> <span class=\"o\">(</span><span class=\"n\">M</span><span class=\"o\">:</span><span class=\"kt\">Type</span><span class=\"o\">)</span> <span class=\"o\">:=</span>\n<span class=\"o\">(</span><span class=\"n\">Rel</span><span class=\"o\">:</span> <span class=\"n\">M</span> <span class=\"bp\">→</span>  <span class=\"kt\">Prop</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">p44</span><span class=\"o\">:</span><span class=\"n\">M</span><span class=\"o\">)</span>\n\n<span class=\"kn\">variables</span> <span class=\"o\">(</span><span class=\"n\">M</span><span class=\"o\">:</span><span class=\"kt\">Type</span><span class=\"o\">)</span> <span class=\"o\">[</span><span class=\"n\">ExampleClass</span> <span class=\"n\">M</span><span class=\"o\">]</span> <span class=\"o\">(</span><span class=\"n\">a</span> <span class=\"n\">b</span> <span class=\"n\">x</span> <span class=\"n\">y</span> <span class=\"n\">z</span><span class=\"o\">:</span> <span class=\"n\">M</span><span class=\"o\">)</span>\n<span class=\"kn\">open</span> <span class=\"n\">ExampleClass</span>\n\n<span class=\"kn\">lemma</span> <span class=\"n\">test</span><span class=\"o\">:</span> <span class=\"o\">(</span><span class=\"n\">Rel</span>  <span class=\"n\">p44</span><span class=\"o\">)</span> <span class=\"o\">:=</span>\n  <span class=\"k\">begin</span>\n    <span class=\"n\">sorry</span><span class=\"o\">,</span>\n  <span class=\"kn\">end</span>\n</code></pre></div>",
        "id": 202376090,
        "sender_full_name": "Michael Beeson",
        "timestamp": 1593470106
    },
    {
        "content": "<p>It means Lean has no way to infer <code>M</code>.</p>",
        "id": 202376405,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1593470358
    },
    {
        "content": "<p>One way to fix it is to write <code>lemma test: Rel (p44 : M)</code>.</p>",
        "id": 202376494,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1593470412
    },
    {
        "content": "<p>Yes,  that worked,  and also, if I add p44 to the list of variables of type M  that works too.  <br>\n\"Lean has no way to infer that M is the type of p44\"  or <br>\n\"Lean has no way to infer the type of p44\"  <br>\nThere's really no other possibility in sight... but I see now what Lean needs,  thank you.</p>",
        "id": 202376749,
        "sender_full_name": "Michael Beeson",
        "timestamp": 1593470585
    },
    {
        "content": "<p>What is the meaning of \"placeholder\"  here?   Why doesn't it say \"don't know how to infer the type of a variable\" ?</p>",
        "id": 202376832,
        "sender_full_name": "Michael Beeson",
        "timestamp": 1593470646
    },
    {
        "content": "<p>It's not about Lean. That lemma that you wrote never mention <code>M</code> anywhere!</p>",
        "id": 202377203,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1593470934
    },
    {
        "content": "<p>And if you add <code>p44</code> to your list of variable it simply shadows what you have from <code>ExampleClass</code>.</p>",
        "id": 202377237,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1593470980
    },
    {
        "content": "<p>It doesn't say \"don't know how to infer the type of a variable\" because that's not the issue.</p>",
        "id": 202377350,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1593471068
    },
    {
        "content": "<p>Maybe we could help you more if you could tell more about what you actually want to do. Maybe you minimized so much that it became meaningless.</p>",
        "id": 202377384,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1593471115
    },
    {
        "content": "<p>Rel p44 is just a Prop. It can't see M any more</p>",
        "id": 202377654,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1593471351
    },
    {
        "content": "<p>OK,  then,  I haven't understood what IS the issue.   I still don't know what \"placeholder means\" .  I thought that <br>\n\"open ExampleClass\"  would mean that I could mention p44  and Lean would understand it as the p44 declared in ExampleClass to be of type M.  So the lemma doesn't contain \"M\" literally but it does contain p44,  which is declared in ExampleClass to be of type M.  Something is wrong,  that is fixed by explicitly saying (p44:M) instead of just p44,  but I'm told inferring the type of a variable is not the issue.   Well,  I would like to understand exactly what is going on here....</p>",
        "id": 202381986,
        "sender_full_name": "Michael Beeson",
        "timestamp": 1593475199
    },
    {
        "content": "<p>If there is some information (a type or a term) that you don't want to provide explicitly, you can often write an \"_\" to signify that you want lean to try and work out what should go in place of \"_\" by its own. This is useful as sometimes what should go in the space is long or boring to work out, but clear from context, for example I can do this</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"kn\">example</span> <span class=\"o\">:</span> <span class=\"mi\">1</span> <span class=\"bp\">+</span> <span class=\"mi\">2</span> <span class=\"bp\">=</span> <span class=\"mi\">2</span> <span class=\"bp\">+</span> <span class=\"mi\">1</span> <span class=\"o\">:=</span>\n<span class=\"k\">begin</span>\n  <span class=\"n\">exact</span> <span class=\"n\">add_comm</span> <span class=\"bp\">_</span> <span class=\"bp\">_</span><span class=\"o\">,</span>\n<span class=\"kn\">end</span>\n</code></pre></div>\n\n\n<p>I could have written <code>add_comm 1 2</code> but then I'd have to remember which way around the 1 and 2 should go in <code>add_comm</code>. This underscore is an explicit placeholder,   by using a placeholder instead lean can work out what should go in the underscore for this to work.</p>\n<p>Now in your example you haven't written any underscore explicitly, but there is information which is left implicit, and to lean there are terms which are left as placeholders, so lean has too try and work it out, but cannot, hence it complains that it can't fill in the blank (which is implicitly there).</p>",
        "id": 202383007,
        "sender_full_name": "Alex J. Best",
        "timestamp": 1593476022
    },
    {
        "content": "<p>You could think of it as if you wrote</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"kn\">lemma</span> <span class=\"n\">test</span><span class=\"o\">:</span> <span class=\"o\">((</span><span class=\"n\">Rel</span> <span class=\"o\">:</span> <span class=\"bp\">_</span> <span class=\"bp\">→</span> <span class=\"kt\">Prop</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">p44</span> <span class=\"o\">:</span> <span class=\"bp\">_</span><span class=\"o\">))</span> <span class=\"o\">:=</span>\n  <span class=\"k\">begin</span>\n    <span class=\"n\">sorry</span><span class=\"o\">,</span>\n  <span class=\"kn\">end</span>\n</code></pre></div>\n\n\n<p>those types are the placeholders lean can't fill. In most situations its okay not to write explicitly the type of everything all the time, just not in this situation!</p>",
        "id": 202383213,
        "sender_full_name": "Alex J. Best",
        "timestamp": 1593476186
    },
    {
        "content": "<p>if i am understanding correctly:<br>\n<code>variables</code> are not passed to every function/lemma, only those that reference something of that name.<br>\nso in your definition of <code>test</code>, lean will look at <code>Rel</code> and <code>p44</code>, the type of which reference some type <code>M'</code>. because you're never referencing <code>M</code> anywhere in your lemma, <code>M</code> is not a parameter to <code>test</code>, and lean will not know that you want <code>M</code> for <code>M'</code>, and hence it will yield an error.</p>",
        "id": 202383240,
        "sender_full_name": "Marc Huisinga",
        "timestamp": 1593476227
    },
    {
        "content": "<p>note that even adding <code>M</code> to the parameter list will still yield an error, because lean isn't sure whether <code>M</code> is the <code>M'</code> that you want</p>",
        "id": 202383416,
        "sender_full_name": "Marc Huisinga",
        "timestamp": 1593476404
    },
    {
        "content": "<p>when adding the type annotation, you tell lean that <code>M' = M</code></p>",
        "id": 202383443,
        "sender_full_name": "Marc Huisinga",
        "timestamp": 1593476452
    },
    {
        "content": "<p>i think it says <code>placeholder</code> instead of <code>missing type</code> because <code>placeholder</code> is a more general concept that might also apply to other things like terms.</p>\n<p>patrick's comment about it not being about lean refers to the first step with <code>variables</code> i mentioned: lean can't even take a stab at figuring out that the type is <code>M</code> because <code>M</code> does not appear in the parameter list when it is not mentioned. once you explicitly add it to the parameter list, lean still complains, but this time because it doesn't just nilly-willy want to assume that <code>M' = M</code> :)</p>",
        "id": 202383940,
        "sender_full_name": "Marc Huisinga",
        "timestamp": 1593477012
    },
    {
        "content": "<p>So, the parameter M:Type that is mentioned in the class definition doesn't get passed automatically with the members of the class, in this case Rel and p44. I need to mention M in defining test. When I've successfully defined test, and I want to use it, I have to pass M as the first argument, e.g. test M. Then it's the passed M that will be used as the type of p44. That explains why you have to pass M as an argument to test. Are these statements correct?</p>",
        "id": 202383960,
        "sender_full_name": "Michael Beeson",
        "timestamp": 1593477065
    },
    {
        "content": "<p>Well the parameter M is exactly that a parameter, it could vary if you had</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"kn\">variables</span> <span class=\"o\">(</span><span class=\"n\">M</span><span class=\"o\">:</span><span class=\"kt\">Type</span><span class=\"o\">)</span> <span class=\"o\">[</span><span class=\"n\">ExampleClass</span> <span class=\"n\">M</span><span class=\"o\">]</span> <span class=\"o\">(</span><span class=\"n\">a</span> <span class=\"n\">b</span> <span class=\"n\">x</span> <span class=\"n\">y</span> <span class=\"n\">z</span><span class=\"o\">:</span> <span class=\"n\">M</span><span class=\"o\">)</span>\n<span class=\"kn\">variables</span> <span class=\"o\">(</span><span class=\"n\">N</span><span class=\"o\">:</span><span class=\"kt\">Type</span><span class=\"o\">)</span> <span class=\"o\">[</span><span class=\"n\">ExampleClass</span> <span class=\"n\">N</span><span class=\"o\">]</span>\n<span class=\"kn\">open</span> <span class=\"n\">ExampleClass</span>\n\n<span class=\"kn\">lemma</span> <span class=\"n\">test</span><span class=\"o\">:</span> <span class=\"n\">Rel</span> <span class=\"n\">p44</span> <span class=\"o\">:=</span>\n  <span class=\"k\">begin</span>\n    <span class=\"n\">sorry</span><span class=\"o\">,</span>\n  <span class=\"kn\">end</span>\n</code></pre></div>\n\n\n<p>lean can't tell if you want the <code>Rel</code> and <code>p44</code> from <code>ExampleClass M</code> or from <code>ExampleClass N</code>.</p>",
        "id": 202384498,
        "sender_full_name": "Alex J. Best",
        "timestamp": 1593477560
    },
    {
        "content": "<p>If <code>test</code> was enough to specify <code>M</code> it wouldn't be necessary to tell it: e.g. if you had</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"kn\">lemma</span> <span class=\"n\">test</span><span class=\"o\">:</span> <span class=\"n\">p44</span> <span class=\"bp\">=</span><span class=\"n\">x</span><span class=\"o\">:=</span>\n  <span class=\"k\">begin</span>\n    <span class=\"n\">sorry</span><span class=\"o\">,</span>\n  <span class=\"kn\">end</span>\n</code></pre></div>\n\n\n<p>it works fine as <code>x</code> is of type <code>M</code> so lean knows what <code>p44</code>'s type should be</p>",
        "id": 202384581,
        "sender_full_name": "Alex J. Best",
        "timestamp": 1593477667
    },
    {
        "content": "<p>I've run into a very odd problem... I've got no idea what's causing this</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Order</span><span class=\"bp\">.</span><span class=\"n\">TypeTags</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Data</span><span class=\"bp\">.</span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">Chain</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">DecidableEq</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span>\n\n<span class=\"kn\">namespace</span><span class=\"w\"> </span><span class=\"n\">List</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">ne_nil_of_mem_groupBy</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Bool</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">l</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">l</span><span class=\"bp\">.</span><span class=\"n\">groupBy</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"o\">[]</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">groupBy_append</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Bool</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">l</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hn</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">l</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"o\">[])</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">l</span><span class=\"bp\">.</span><span class=\"n\">Chain'</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ha</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"o\">[],</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">l</span><span class=\"bp\">.</span><span class=\"n\">getLast</span><span class=\"w\"> </span><span class=\"n\">hn</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">m</span><span class=\"bp\">.</span><span class=\"n\">head</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">false</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">l</span><span class=\"w\"> </span><span class=\"bp\">++</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">groupBy</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">l</span><span class=\"w\"> </span><span class=\"bp\">::</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"bp\">.</span><span class=\"n\">groupBy</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">chain'_replicate</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Chain'</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">·</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">replicate</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n\n<span class=\"sd\">/-- Run-length encoding of a list. Returns a list of pairs `(n, a)` representing consecutive groups</span>\n<span class=\"sd\">of `a` of length `n`. -/</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">RunLength</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">l</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ℕ</span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"bp\">×</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"o\">((</span><span class=\"n\">l</span><span class=\"bp\">.</span><span class=\"n\">groupBy</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"bp\">==</span><span class=\"w\"> </span><span class=\"bp\">·</span><span class=\"o\">))</span><span class=\"bp\">.</span><span class=\"n\">attachWith</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"n\">ne_nil_of_mem_groupBy</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"o\">))</span><span class=\"bp\">.</span><span class=\"n\">map</span>\n<span class=\"w\">    </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">⟨</span><span class=\"n\">m</span><span class=\"bp\">.</span><span class=\"m\">1</span><span class=\"bp\">.</span><span class=\"n\">length</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">length_pos_of_ne_nil</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"bp\">.</span><span class=\"m\">2</span><span class=\"bp\">⟩</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"bp\">.</span><span class=\"m\">1</span><span class=\"bp\">.</span><span class=\"n\">head</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"bp\">.</span><span class=\"m\">2</span><span class=\"o\">)</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">runLength_append</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hn</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">l</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ha</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">∉</span><span class=\"w\"> </span><span class=\"n\">l</span><span class=\"bp\">.</span><span class=\"n\">head?</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">replicate</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">++</span><span class=\"w\"> </span><span class=\"n\">l</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">RunLength</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">⟨</span><span class=\"n\">n</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">hn</span><span class=\"bp\">⟩</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">::</span><span class=\"w\"> </span><span class=\"n\">l</span><span class=\"bp\">.</span><span class=\"n\">RunLength</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">suffices</span><span class=\"w\"> </span><span class=\"n\">groupBy</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"bp\">==</span><span class=\"w\"> </span><span class=\"bp\">·</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">replicate</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">++</span><span class=\"w\"> </span><span class=\"n\">l</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">replicate</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">::</span><span class=\"w\"> </span><span class=\"n\">l</span><span class=\"bp\">.</span><span class=\"n\">groupBy</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"bp\">==</span><span class=\"w\"> </span><span class=\"bp\">·</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">    </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">this</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">RunLength</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">attachWith</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">groupBy_append</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">simp_rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">beq_iff_eq</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">chain'_replicate</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">a</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">cases</span><span class=\"w\"> </span><span class=\"n\">l</span><span class=\"w\"> </span><span class=\"k\">with</span>\n<span class=\"w\">    </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">nil</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">simp</span>\n<span class=\"w\">    </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">cons</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"n\">l</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">      </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Option</span><span class=\"bp\">.</span><span class=\"n\">mem_def</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">eq_comm</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">ha</span>\n<span class=\"w\">      </span><span class=\"n\">simpa</span><span class=\"w\"> </span><span class=\"kn\">using</span><span class=\"w\"> </span><span class=\"n\">ha</span>\n\n<span class=\"kn\">end</span><span class=\"w\"> </span><span class=\"n\">List</span>\n</code></pre></div>",
        "id": 472468450,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1727176840
    },
    {
        "content": "<p>Do excuse the long code snippet, I don't really know how to minimize this.</p>",
        "id": 472468522,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1727176870
    },
    {
        "content": "<p>I've usually seen this placeholder error when some theorem accidentally has an unused variable. I don't really see how that's the case here, though.</p>",
        "id": 472468739,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1727176952
    },
    {
        "content": "<p>Probably something to do with the use of <code>==</code> and <a href=\"https://github.com/leanprover/lean4/pull/2038\">lean4#2038</a> (i.e. <code>DecidableEq</code> does not give you a good <code>BEq</code> instance by default)</p>",
        "id": 472470030,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1727177394
    },
    {
        "content": "<p>Hmm, apparently not</p>",
        "id": 472470776,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1727177634
    },
    {
        "content": "<p>actually, i think it might be because there somehow is a metavariable in the proof?<br>\nreplace the <code>suffices</code> with</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">groupBy</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">==</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">replicate</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">++</span><span class=\"w\"> </span><span class=\"n\">l</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">):</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">replicate</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">::</span><span class=\"w\"> </span><span class=\"n\">l</span><span class=\"bp\">.</span><span class=\"n\">groupBy</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">==</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)):=</span><span class=\"w\">  </span><span class=\"k\">by</span>\n\n<span class=\"w\">    </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">groupBy_append</span>\n<span class=\"w\">    </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">simp_rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">beq_iff_eq</span><span class=\"o\">]</span>\n<span class=\"w\">      </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">chain'_replicate</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">a</span>\n<span class=\"w\">    </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">cases</span><span class=\"w\"> </span><span class=\"n\">l</span><span class=\"w\"> </span><span class=\"k\">with</span>\n<span class=\"w\">      </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">nil</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">simp</span>\n<span class=\"w\">      </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">cons</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"n\">l</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">        </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Option</span><span class=\"bp\">.</span><span class=\"n\">mem_def</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">eq_comm</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">ha</span>\n<span class=\"w\">        </span><span class=\"n\">simpa</span><span class=\"w\"> </span><span class=\"kn\">using</span><span class=\"w\"> </span><span class=\"n\">ha</span>\n<span class=\"w\">  </span><span class=\"bp\">```</span>\n</code></pre></div>",
        "id": 472470860,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1727177654
    },
    {
        "content": "<p>to see that there is a metavariable <code>?refine_2</code></p>",
        "id": 472470891,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1727177669
    },
    {
        "content": "<p>actually it looks like multiple metavariables?</p>",
        "id": 472471010,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1727177723
    },
    {
        "content": "<p>adding a line <code>case hn =&gt; sorry</code> after the <code>apply groupBy_append</code> seems to fix things?</p>",
        "id": 472472098,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1727178059
    },
    {
        "content": "<p>somehow the second proof clause seems to be unhygenic?</p>",
        "id": 472472179,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1727178076
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 472472358,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1727178138
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"684366\">Edward van de Meent</span> <a href=\"#narrow/stream/113489-new-members/topic/don't.20know.20how.20to.20synthesize.20placeholder/near/472472098\">said</a>:</p>\n<blockquote>\n<p>adding a line <code>case hn =&gt; sorry</code> after the <code>apply groupBy_append</code> seems to fix things?</p>\n</blockquote>\n<p>That's odd... why wouldn't it just add that to my goals?</p>",
        "id": 472472802,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1727178309
    },
    {
        "content": "<p>it did, but the second case seems to remove it...</p>",
        "id": 472472866,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1727178329
    },
    {
        "content": "<p>i'm guessing that somehow <code>· cases</code> is unhygienic</p>",
        "id": 472472966,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1727178357
    },
    {
        "content": "<p><code>cases'</code> has the same problem.</p>",
        "id": 472473257,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1727178456
    },
    {
        "content": "<p>As does <code>match</code></p>",
        "id": 472473420,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1727178500
    },
    {
        "content": "<p>fwiw, here's a proof for that case:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"w\"> </span><span class=\"n\">case</span><span class=\"w\"> </span><span class=\"n\">hn</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">    </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"n\">only</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">ne_eq</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">replicate_eq_nil</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">hn</span><span class=\"bp\">.</span><span class=\"n\">ne</span><span class=\"bp\">.</span><span class=\"n\">symm</span>\n</code></pre></div>",
        "id": 472473611,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1727178553
    },
    {
        "content": "<p>I don't understand the ordering of the goals produced by <code>apply</code>. The parameter order for groupBy_append is <code>hn</code>, <code>h</code>, <code>ha</code>. Why are the goals ordered as <code>h</code>, <code>ha</code>, <code>hn</code>?</p>",
        "id": 472473925,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1727178639
    },
    {
        "content": "<p>they are added in order, and the list of goals is stack-like?</p>",
        "id": 472474051,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1727178676
    },
    {
        "content": "<p>I had a typo originally, sorry. The order produced by apply is a cyclic permutation of the original ordering, not just the reverse order.</p>",
        "id": 472474207,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1727178720
    },
    {
        "content": "<p><code>ha</code> depends on both <code>h</code> and <code>hn</code>, so I don't fully get why it appears as the middle one</p>",
        "id": 472474423,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1727178775
    },
    {
        "content": "<p>anyhow, i expect this is worth making an issue, as well as maybe asking around in <a class=\"stream\" data-stream-id=\"270676\" href=\"/#narrow/stream/270676-lean4\">#lean4</a> ?</p>",
        "id": 472474810,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1727178895
    },
    {
        "content": "<p>i think the issue is that somehow <code>simpa</code> and <code>simp</code> both fill in the proof of <code>hn</code>, however the <code>·</code> makes it so the term eventually isn't filled in?</p>",
        "id": 472476874,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1727179425
    },
    {
        "content": "<p>nope, removing the <code>·</code> doesn't fix it...</p>",
        "id": 472477512,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1727179591
    },
    {
        "content": "<p>after some experimenting, i'm starting to think that maybe the <code>apply</code> is at fault here...</p>",
        "id": 472479458,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1727180148
    },
    {
        "content": "<p>but i still don't know exactly what's going on here.</p>",
        "id": 472479799,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1727180269
    },
    {
        "content": "<p>It seems that someone is not recovering goals gracefully:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">runLength_append</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hn</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">l</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ha</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">∉</span><span class=\"w\"> </span><span class=\"n\">l</span><span class=\"bp\">.</span><span class=\"n\">head?</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">replicate</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">++</span><span class=\"w\"> </span><span class=\"n\">l</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">RunLength</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">⟨</span><span class=\"n\">n</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">hn</span><span class=\"bp\">⟩</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">::</span><span class=\"w\"> </span><span class=\"n\">l</span><span class=\"bp\">.</span><span class=\"n\">RunLength</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">suffices</span><span class=\"w\"> </span><span class=\"n\">groupBy</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"bp\">==</span><span class=\"w\"> </span><span class=\"bp\">·</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">replicate</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">++</span><span class=\"w\"> </span><span class=\"n\">l</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">replicate</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">::</span><span class=\"w\"> </span><span class=\"n\">l</span><span class=\"bp\">.</span><span class=\"n\">groupBy</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"bp\">==</span><span class=\"w\"> </span><span class=\"bp\">·</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">    </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">this</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">RunLength</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">attachWith</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">groupBy_append</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">simp_rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">beq_iff_eq</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">chain'_replicate</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">a</span>\n<span class=\"w\">  </span><span class=\"n\">recover</span>\n<span class=\"w\">    </span><span class=\"n\">cases</span><span class=\"w\"> </span><span class=\"n\">l</span><span class=\"w\"> </span><span class=\"k\">with</span>\n<span class=\"w\">      </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">nil</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">        </span><span class=\"n\">simp</span>\n<span class=\"w\">      </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">cons</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"n\">l</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">        </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Option</span><span class=\"bp\">.</span><span class=\"n\">mem_def</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">eq_comm</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">ha</span>\n<span class=\"w\">        </span><span class=\"n\">simpa</span><span class=\"w\"> </span><span class=\"kn\">using</span><span class=\"w\"> </span><span class=\"n\">ha</span>\n<span class=\"w\">  </span><span class=\"c1\">-- recovered goal</span>\n<span class=\"w\">  </span><span class=\"n\">intros</span>\n<span class=\"w\">  </span><span class=\"n\">simpa</span><span class=\"w\"> </span><span class=\"kn\">using</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">not_eq_zero_of_lt</span><span class=\"w\"> </span><span class=\"n\">hn</span>\n</code></pre></div>",
        "id": 472483751,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1727181474
    }
]