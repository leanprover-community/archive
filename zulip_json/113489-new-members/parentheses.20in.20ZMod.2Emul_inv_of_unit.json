[
    {
        "content": "<p>I change the parentheses <code>(a : ZMod n)</code> in <code>ZMod.mul_inv_of_unit</code> to curly bracket <code>{a : ZMod n}</code> with nothing happened. Is there any special reason to use parenthese here?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">namespace</span><span class=\"w\"> </span><span class=\"n\">ZMod</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">mul_inv_of_unit'</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ZMod</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IsUnit</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"bp\">⁻¹</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">rcases</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">u</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">rfl</span><span class=\"bp\">⟩</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">inv_coe_unit</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"bp\">.</span><span class=\"n\">mul_inv</span><span class=\"o\">]</span>\n\n<span class=\"kn\">end</span><span class=\"w\"> </span><span class=\"n\">ZMod</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">curly_bracket</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ZMod</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IsUnit</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"bp\">⁻¹</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">ZMod</span><span class=\"bp\">.</span><span class=\"n\">mul_inv_of_unit'</span><span class=\"w\"> </span><span class=\"n\">h</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">parentheses</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ZMod</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IsUnit</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"bp\">⁻¹</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">ZMod</span><span class=\"bp\">.</span><span class=\"n\">mul_inv_of_unit</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"n\">h</span>\n</code></pre></div>",
        "id": 476001610,
        "sender_full_name": "Zhang Qinchuan",
        "timestamp": 1728526890
    },
    {
        "content": "<p>We sometimes require arguments to be passed in even when they could, in theory, be inferred. This happens most often when the argument is something that might be quite complicated to build, as in e.g. <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=PartialOrder.lift#doc\">docs#PartialOrder.lift</a>.</p>",
        "id": 476025501,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1728533363
    },
    {
        "content": "<p>I <em>think</em> in this case it's just an oversight, though</p>",
        "id": 476025524,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1728533369
    },
    {
        "content": "<p>Feel free to open a PR</p>",
        "id": 476025551,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1728533382
    },
    {
        "content": "<p>It depends on the size of the diff. If it is used in many places where <code>h</code> is going to be a new goal, but <code>a</code> is supplied, then you might be fighting a small uphill battle.<br>\nI don't know</p>",
        "id": 476046561,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1728542223
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"459227\">Violeta Hernández</span> <a href=\"#narrow/stream/113489-new-members/topic/parentheses.20in.20ZMod.2Emul_inv_of_unit/near/476025501\">said</a>:</p>\n<blockquote>\n<p>We sometimes require arguments to be passed in even when they could, in theory, be inferred. This happens most often when the argument is something that might be quite complicated to build, as in e.g. <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=PartialOrder.lift#doc\">docs#PartialOrder.lift</a>.</p>\n</blockquote>\n<p>I have seen scary <code>@</code> and <code>_</code> in mathlib. For example  :</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"c1\">-- mathlib4/Mathlib/GroupTheory/Sylow.lean</span>\n<span class=\"c1\">-- fixedPointsMulLeftCosetsEquivQuotient</span>\n<span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">@</span><span class=\"n\">mem_fixedPoints_mul_left_cosets_iff_mem_normalizer</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">‹_›</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">symm</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>So in my mind, it is free to use <code>@</code> when someone wants to pass implicit arguments by hand.</p>",
        "id": 476078797,
        "sender_full_name": "Zhang Qinchuan",
        "timestamp": 1728549867
    },
    {
        "content": "<p>Sure, that's always an option. You can also use <code>(x := _)</code> syntax to pass any named variables automatically.</p>",
        "id": 476078909,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1728549904
    },
    {
        "content": "<p>This is considered somewhat of an antipattern though, and a signal that the argument should have been explicit to begin with</p>",
        "id": 476078949,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1728549920
    }
]