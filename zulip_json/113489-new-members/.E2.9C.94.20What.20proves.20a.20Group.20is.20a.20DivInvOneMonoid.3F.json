[
    {
        "content": "<p>This may be a dumb question but I'm looking at this example</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Group</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">]</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">)</span><span class=\"bp\">⁻¹</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">inv_one</span>\n</code></pre></div>\n<p>And I can't figure out where the actual proof of <code>inv_one</code> is defined. If I click into it, I get to </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"sd\">/-- Typeclass for expressing that `1⁻¹ = 1`. -/</span>\n<span class=\"kd\">@[</span><span class=\"n\">to_additive</span><span class=\"kd\">]</span>\n<span class=\"kn\">class</span><span class=\"w\"> </span><span class=\"n\">InvOneClass</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">extends</span><span class=\"w\"> </span><span class=\"n\">One</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Inv</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"kn\">protected</span><span class=\"w\"> </span><span class=\"n\">inv_one</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">)</span><span class=\"bp\">⁻¹</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n\n<span class=\"sd\">/-- A `DivInvMonoid` where `1⁻¹ = 1`. -/</span>\n<span class=\"kd\">@[</span><span class=\"n\">to_additive</span><span class=\"kd\">]</span>\n<span class=\"kn\">class</span><span class=\"w\"> </span><span class=\"n\">DivInvOneMonoid</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">extends</span><span class=\"w\"> </span><span class=\"n\">DivInvMonoid</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">InvOneClass</span><span class=\"w\"> </span><span class=\"n\">G</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">InvOneClass</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">]</span>\n\n<span class=\"kd\">@[</span><span class=\"n\">to_additive</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">attr</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">simp</span><span class=\"o\">)</span><span class=\"kd\">]</span>\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">inv_one</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">)</span><span class=\"bp\">⁻¹</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">InvOneClass</span><span class=\"bp\">.</span><span class=\"n\">inv_one</span>\n</code></pre></div>\n<p>But that's not the instance. How do I find the instance implementing it?</p>",
        "id": 505546167,
        "sender_full_name": "Dan Abramov",
        "timestamp": 1741909151
    },
    {
        "content": "<p>Or maybe I'm not thinking about instances right...</p>\n<p>Basically my problem is that a <code>Group</code> is just <code>DivInvMonoid G</code> with <code>inv_mul_cancel</code>. And <code>DivInvMonoid</code> is just <code>Monoid G, Inv G, Div G</code> with a few more things.</p>\n<p>So how did we get to <code>InvOneClass</code>?</p>",
        "id": 505546890,
        "sender_full_name": "Dan Abramov",
        "timestamp": 1741909519
    },
    {
        "content": "<p>If I do</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">set_option</span><span class=\"w\"> </span><span class=\"n\">trace</span><span class=\"bp\">.</span><span class=\"n\">Meta</span><span class=\"bp\">.</span><span class=\"n\">synthInstance</span><span class=\"bp\">.</span><span class=\"n\">answer</span><span class=\"w\"> </span><span class=\"n\">true</span>\n</code></pre></div>\n<p>then I get</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"o\">[</span><span class=\"n\">Meta</span><span class=\"bp\">.</span><span class=\"n\">synthInstance</span><span class=\"bp\">.</span><span class=\"n\">answer</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"bp\">✅️</span><span class=\"w\"> </span><span class=\"n\">Group</span><span class=\"w\"> </span><span class=\"n\">G</span>\n\n<span class=\"o\">[</span><span class=\"n\">Meta</span><span class=\"bp\">.</span><span class=\"n\">synthInstance</span><span class=\"bp\">.</span><span class=\"n\">answer</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"bp\">✅️</span><span class=\"w\"> </span><span class=\"n\">DivisionMonoid</span><span class=\"w\"> </span><span class=\"n\">G</span>\n\n<span class=\"o\">[</span><span class=\"n\">Meta</span><span class=\"bp\">.</span><span class=\"n\">synthInstance</span><span class=\"bp\">.</span><span class=\"n\">answer</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"bp\">✅️</span><span class=\"w\"> </span><span class=\"n\">DivInvOneMonoid</span><span class=\"w\"> </span><span class=\"n\">G</span>\n\n<span class=\"o\">[</span><span class=\"n\">Meta</span><span class=\"bp\">.</span><span class=\"n\">synthInstance</span><span class=\"bp\">.</span><span class=\"n\">answer</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"bp\">✅️</span><span class=\"w\"> </span><span class=\"n\">InvOneClass</span><span class=\"w\"> </span><span class=\"n\">G</span>\n</code></pre></div>\n<p>Does this mean that it's due to this coercion serving as a bridge?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kd\">@[</span><span class=\"n\">to_additive</span><span class=\"kd\">]</span>\n<span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">priority</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"mi\">100</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">Group</span><span class=\"bp\">.</span><span class=\"n\">toDivisionMonoid</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">DivisionMonoid</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"o\">{</span><span class=\"w\"> </span><span class=\"n\">inv_inv</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"n\">inv_eq_of_mul</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">inv_mul_cancel</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"n\">mul_inv_rev</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">      </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"n\">inv_eq_of_mul</span><span class=\"w\"> </span><span class=\"bp\">&lt;|</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">mul_assoc</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">mul_inv_cancel_left</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">mul_inv_cancel</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"n\">inv_eq_of_mul</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"n\">inv_eq_of_mul</span><span class=\"w\"> </span><span class=\"o\">}</span>\n</code></pre></div>\n<p>I accidentally found it. Is there a more reliable way of tracing this?</p>",
        "id": 505547100,
        "sender_full_name": "Dan Abramov",
        "timestamp": 1741909633
    },
    {
        "content": "<p>I guess this still doesn't quite tell me where <code>inv_one</code> is implemented.</p>",
        "id": 505547467,
        "sender_full_name": "Dan Abramov",
        "timestamp": 1741909854
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 505547670,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1741909964
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"418569\">Dan Abramov</span> <a href=\"#narrow/channel/113489-new-members/topic/What.20proves.20a.20Group.20is.20a.20DivInvOneMonoid.3F/near/505547100\">said</a>:</p>\n<blockquote>\n<p>Is there a more reliable way of tracing this?</p>\n</blockquote>\n<p>For the question in your title, yes:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">G</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Group</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">]</span>\n<span class=\"bp\">#</span><span class=\"n\">synth</span><span class=\"w\"> </span><span class=\"n\">DivisionMonoid</span><span class=\"w\"> </span><span class=\"n\">G</span>\n</code></pre></div>",
        "id": 505547842,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1741910056
    },
    {
        "content": "<p>Playing the same game with <code>InvOneClass</code> and expanding the expression in the infoview, you find <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=DivisionMonoid.toDivInvOneMonoid#doc\">docs#DivisionMonoid.toDivInvOneMonoid</a></p>",
        "id": 505547986,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1741910148
    },
    {
        "content": "<p>Ahh ok so these do seem to tell the story</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"w\">  </span><span class=\"bp\">#</span><span class=\"n\">synth</span><span class=\"w\"> </span><span class=\"n\">DivisionMonoid</span><span class=\"w\"> </span><span class=\"n\">G</span>\n<span class=\"w\">  </span><span class=\"bp\">#</span><span class=\"n\">synth</span><span class=\"w\"> </span><span class=\"n\">DivInvOneMonoid</span><span class=\"w\"> </span><span class=\"n\">G</span>\n<span class=\"w\">  </span><span class=\"bp\">#</span><span class=\"n\">synth</span><span class=\"w\"> </span><span class=\"n\">InvOneClass</span><span class=\"w\"> </span><span class=\"n\">G</span>\n</code></pre></div>",
        "id": 505548000,
        "sender_full_name": "Dan Abramov",
        "timestamp": 1741910160
    },
    {
        "content": "<p>Eric has pointed out <code>#synth</code> while I was typing this up, but an alternative way to get the info that you found in the trace is to use:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">set_option</span><span class=\"w\"> </span><span class=\"n\">pp</span><span class=\"bp\">.</span><span class=\"n\">all</span><span class=\"w\"> </span><span class=\"n\">true</span><span class=\"w\"> </span><span class=\"k\">in</span>\n<span class=\"bp\">#</span><span class=\"n\">synth</span><span class=\"w\"> </span><span class=\"n\">InvOneClass</span><span class=\"w\"> </span><span class=\"n\">G</span>\n<span class=\"c1\">-- @DivInvOneMonoid.toInvOneClass.{0} G</span>\n<span class=\"c1\">--   (@DivisionMonoid.toDivInvOneMonoid.{0} G</span>\n<span class=\"c1\">--    (@Group.toDivisionMonoid.{0} G inst✝))</span>\n</code></pre></div>\n<p>This is kind of a pain to decode, but if you trace the nested arguments you'll see the chain of inheritances from the <code>[Group G]</code> instance you provided (<code>inst✝</code>) down to <code>InvOneClass</code>.</p>",
        "id": 505548115,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1741910206
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"418569\">Dan Abramov</span> has marked this topic as resolved.</p>",
        "id": 505548211,
        "sender_full_name": "Notification Bot",
        "timestamp": 1741910262
    },
    {
        "content": "<p>OK perfect, thanks!</p>",
        "id": 505548215,
        "sender_full_name": "Dan Abramov",
        "timestamp": 1741910265
    },
    {
        "content": "<p>I feel like it's not really perfect, when I've been in this situation before I feel like I've had to run #synth several times to get to what I actually wanted to know</p>",
        "id": 505557947,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1741915251
    },
    {
        "content": "<p>I would love to see output like Bryan's above, except making use of dot notation, so that you get something like : <code>inst.toDivisionMonoid.toDivInvOneMonoid.toInvOneClass</code>. This would be so much more readable.</p>",
        "id": 505566569,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1741919641
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"306601\">@Kyle Miller</span> is this something which would be easy to accomplish?</p>",
        "id": 505566850,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1741919770
    },
    {
        "content": "<p>I thought I saw recently that there was some suggestion (by you?) to mark certain arguments for use with dot notation. That's the kind of thing that would be really nice to do for instances.</p>",
        "id": 505567017,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1741919867
    },
    {
        "content": "<p>The current pretty printing heuristic is \"if it's a class projection, don't use dot notation\". The reason for this is that you don't want, for example, <code>default</code> to pretty print as <code>instInhabitedNat.default</code>.</p>\n<p>It seems like there should be an exception for parent projects?</p>",
        "id": 505573892,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1741923091
    },
    {
        "content": "<p>This is more of a math tangent but how would I go about deriving <code>(1 : G)⁻¹ = 1</code> straight from the group axioms (ignoring all the helper theorems)?</p>\n<p>The closest I got to is</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">)</span><span class=\"bp\">⁻¹</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"bp\">⁻¹</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"bp\">⁻¹</span><span class=\"o\">)</span><span class=\"bp\">⁻¹</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">    </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">mul_inv_rev</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">inv_inv</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">one_mul</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">inv_inv</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">this</span>\n<span class=\"w\">  </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">this</span>\n</code></pre></div>\n<p>But curious if there's something very direct.</p>",
        "id": 505577326,
        "sender_full_name": "Dan Abramov",
        "timestamp": 1741924729
    },
    {
        "content": "<p>Using just the axioms that appear in <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Group#doc\">docs#Group</a> itself, it follows from <code>mul_one</code> and <code>inv_mul_cancel</code>:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">)</span><span class=\"bp\">⁻¹</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"k\">calc</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">)</span><span class=\"bp\">⁻¹</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">)</span><span class=\"bp\">⁻¹</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">mul_one</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">)</span><span class=\"bp\">⁻¹</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">symm</span>\n<span class=\"w\">    </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">inv_mul_cancel</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n</code></pre></div>",
        "id": 505578107,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1741925041
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"306601\">Kyle Miller</span> <a href=\"#narrow/channel/113489-new-members/topic/.E2.9C.94.20What.20proves.20a.20Group.20is.20a.20DivInvOneMonoid.3F/near/505573892\">said</a>:</p>\n<blockquote>\n<p>It seems like there should be an exception for parent projects?</p>\n</blockquote>\n<p>Sure, that seems reasonable, but it still doesn't solve the problem for non-parent instances. This makes me want to resurrect <code>pp_dot</code> <span aria-label=\"sad\" class=\"emoji emoji-2639\" role=\"img\" title=\"sad\">:sad:</span></p>",
        "id": 505856271,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1742051151
    },
    {
        "content": "<p>Can you give an example of what you mean by non-parent instances?</p>",
        "id": 505856373,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1742051210
    },
    {
        "content": "<p>Like class fields defined using <code>[...]</code>?</p>",
        "id": 505856403,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1742051227
    },
    {
        "content": "<p>I just mean instances that are written manually, not instances that comes from an <code>extends</code> clause.</p>",
        "id": 505860299,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1742054036
    },
    {
        "content": "<p>Is there a rule here? Is the observation that <code>instance</code>s in general should use dot notation by default?</p>",
        "id": 505860382,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1742054081
    },
    {
        "content": "<p>I think anything in the namespace of another typeclass should</p>",
        "id": 505862789,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1742055808
    },
    {
        "content": "<p>I think <em>instances</em> (not <em>anything</em>) in the namespace of another typeclass should use dot notation by default.</p>",
        "id": 505867449,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1742059005
    },
    {
        "content": "<p>Can you give examples here? Why this \"in the namespace of another typeclass\" rule? What's something that's in the same namespace that shouldn't use dot notation?</p>",
        "id": 505867619,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1742059136
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"644391\">@loogle</span> \"AddGroup.\"</p>\n<p>I think anything there which is not an instance shouldn't use dot notation.</p>",
        "id": 505868405,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1742059703
    },
    {
        "content": "<p><span aria-label=\"search\" class=\"emoji emoji-1f50d\" role=\"img\" title=\"search\">:search:</span> <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Algebra/Group/Defs.html#AddGroup.toAddCancelMonoid\">AddGroup.toAddCancelMonoid</a>, <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Algebra/Group/Defs.html#AddGroup.toSubNegMonoid\">AddGroup.toSubNegMonoid</a>, and <a href=\"https://loogle.lean-lang.org/?q=%22AddGroup.%22\">659 more</a></p>",
        "id": 505868408,
        "sender_full_name": "loogle",
        "timestamp": 1742059704
    },
    {
        "content": "<p>I was proposing that declarations with the <code>instance</code> attribute should perhaps use dot notation in general, but Eric suggested a restriction to only in the namespace of another typeclass. What are examples that prove the restriction is necessary?</p>",
        "id": 505868587,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1742059844
    },
    {
        "content": "<p>Or maybe I'm not understanding Eric's counter-proposal.</p>",
        "id": 505868730,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1742059933
    },
    {
        "content": "<p>(I think) the point is just that, if the instance is not in the namespace of another typeclass, how would you know which argument to use with dot notation? And maybe your point is that, this wouldn't trigger dot notation anyway so it doesn't matter.</p>",
        "id": 505868879,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1742060062
    },
    {
        "content": "<p>My only point is I'm confused and I'd appreciate a few concrete examples I could use for testing :-) Both things that should and shouldn't use dot notation.</p>",
        "id": 505869319,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1742060416
    },
    {
        "content": "<p>\"always use dot notation\" for <code>@Foo.toBar instFoo : Bar</code> sounds fine to me too, either with or without the restriction that <code>Bar</code> is a typeclass</p>",
        "id": 505876980,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1742066040
    }
]