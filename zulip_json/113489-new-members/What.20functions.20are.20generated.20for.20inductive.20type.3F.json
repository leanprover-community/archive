[
    {
        "content": "<p>Is there a way to list all the automatically generated functions for an inductive type?</p>\n<p>I know there is <code>.rec</code>, <code>.casesOn</code>, and <code>.recOn</code>. Are there others?</p>",
        "id": 449909497,
        "sender_full_name": "Kevin Cheung",
        "timestamp": 1720453837
    },
    {
        "content": "<p>You could try writing <code>whatsnew in</code> before the definition of the type.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span>\n\n<span class=\"n\">whatsnew</span><span class=\"w\"> </span><span class=\"k\">in</span>\n<span class=\"kn\">inductive</span><span class=\"w\"> </span><span class=\"n\">MyNat</span>\n<span class=\"c\">/-</span>\n<span class=\"cm\">def MyNat._sizeOf_1 : MyNat → ℕ :=</span>\n<span class=\"cm\">fun t ↦ MyNat.rec (fun t ↦ ℕ) t</span>\n\n<span class=\"cm\">protected def MyNat.noConfusion.{u} : {P : Sort u} → {v1 v2 : MyNat} → v1 = v2 → MyNat.noConfusionType P v1 v2 :=</span>\n<span class=\"cm\">fun {P} {v1 v2} h12 ↦</span>\n<span class=\"cm\">  Eq.ndrec (motive := fun a ↦ v1 = a → MyNat.noConfusionType P v1 a)</span>\n<span class=\"cm\">    (fun h11 ↦ MyNat.casesOn (fun {v1} ↦ MyNat.noConfusionType P v1 v1) v1) h12 h12</span>\n\n<span class=\"cm\">protected def MyNat.casesOn.{u} : (motive : MyNat → Sort u) → (t : MyNat) → motive t :=</span>\n<span class=\"cm\">fun motive t ↦ MyNat.rec motive t</span>\n\n<span class=\"cm\">def MyNat._sizeOf_inst : SizeOf MyNat :=</span>\n<span class=\"cm\">{ sizeOf := fun m ↦ m._sizeOf_1 }</span>\n\n<span class=\"cm\">protected def MyNat.noConfusionType.{u} : Sort u → MyNat → MyNat → Sort u :=</span>\n<span class=\"cm\">fun P v1 v2 ↦ MyNat.casesOn (fun v1 ↦ Sort u) v1</span>\n\n<span class=\"cm\">recursor MyNat.rec.{u} : (motive : MyNat → Sort u) → (t : MyNat) → motive t</span>\n\n<span class=\"cm\">inductive MyNat : Type</span>\n<span class=\"cm\">constructors:</span>\n\n<span class=\"cm\">protected def MyNat.recOn.{u} : (motive : MyNat → Sort u) → (t : MyNat) → motive t :=</span>\n<span class=\"cm\">fun motive t ↦ MyNat.rec motive t</span>\n<span class=\"cm\">-/</span>\n</code></pre></div>",
        "id": 449910243,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1720453962
    },
    {
        "content": "<p>I see. But what if the type is already defined?</p>",
        "id": 449910962,
        "sender_full_name": "Kevin Cheung",
        "timestamp": 1720454073
    },
    {
        "content": "<p>As a workaround you can copy/paste the definition in your file (changing the name) and see what <code>whatsnew</code> says. I don't know if there is a better way. (You can of course modify the file where definition is written, but at the beginning it is better to not modify mathlib).</p>",
        "id": 449913206,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1720454415
    },
    {
        "content": "<p>What does autocomplete expose?</p>",
        "id": 449913378,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1720454440
    },
    {
        "content": "<p>Thanks.</p>",
        "id": 449913386,
        "sender_full_name": "Kevin Cheung",
        "timestamp": 1720454441
    },
    {
        "content": "<p><a href=\"/user_uploads/3121/5ZzySB7D6Dpk4qiPJmt-54kY/Screenshot-2024-07-08-at-12.02.09PM.png\">Screenshot-2024-07-08-at-12.02.09PM.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/5ZzySB7D6Dpk4qiPJmt-54kY/Screenshot-2024-07-08-at-12.02.09PM.png\" title=\"Screenshot-2024-07-08-at-12.02.09PM.png\"><img src=\"/user_uploads/3121/5ZzySB7D6Dpk4qiPJmt-54kY/Screenshot-2024-07-08-at-12.02.09PM.png\"></a></div>",
        "id": 449914224,
        "sender_full_name": "Kevin Cheung",
        "timestamp": 1720454558
    },
    {
        "content": "<p>What is <code>toCtorIdx</code>?</p>",
        "id": 449914654,
        "sender_full_name": "Kevin Cheung",
        "timestamp": 1720454635
    },
    {
        "content": "<p>It is generated <a href=\"https://github.com/leanprover/lean4/blob/3b58e0649156610ce3aeed4f7b5c652340c668d4/src/Lean/Meta/Constructions.lean#L59-L81\">here</a> and indexes the constructors via natural numbers</p>\n<p>Eg</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">inductive</span><span class=\"w\"> </span><span class=\"n\">Weekday</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">Mon</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Weekday</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">Tue</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Weekday</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">Wed</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Weekday</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">Thu</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Weekday</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">Fri</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Weekday</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">Sat</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Weekday</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">Sun</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Weekday</span>\n\n<span class=\"k\">#eval</span><span class=\"w\"> </span><span class=\"n\">Weekday.toCtorIdx</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">Mon</span><span class=\"w\"> </span><span class=\"c1\">-- 0</span>\n<span class=\"k\">#eval</span><span class=\"w\"> </span><span class=\"n\">Weekday.toCtorIdx</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">Tue</span><span class=\"w\"> </span><span class=\"c1\">-- 1</span>\n<span class=\"k\">#eval</span><span class=\"w\"> </span><span class=\"n\">Weekday.toCtorIdx</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">Wed</span><span class=\"w\"> </span><span class=\"c1\">-- 2</span>\n<span class=\"k\">#eval</span><span class=\"w\"> </span><span class=\"n\">Weekday.toCtorIdx</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">Thu</span><span class=\"w\"> </span><span class=\"c1\">-- 3</span>\n<span class=\"k\">#eval</span><span class=\"w\"> </span><span class=\"n\">Weekday.toCtorIdx</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">Fri</span><span class=\"w\"> </span><span class=\"c1\">-- 4</span>\n<span class=\"k\">#eval</span><span class=\"w\"> </span><span class=\"n\">Weekday.toCtorIdx</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">Sat</span><span class=\"w\"> </span><span class=\"c1\">-- 5</span>\n<span class=\"k\">#eval</span><span class=\"w\"> </span><span class=\"n\">Weekday.toCtorIdx</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">Sun</span><span class=\"w\"> </span><span class=\"c1\">-- 6</span>\n</code></pre></div>",
        "id": 449934553,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1720459467
    },
    {
        "content": "<p>Thank you.</p>",
        "id": 449934983,
        "sender_full_name": "Kevin Cheung",
        "timestamp": 1720459551
    }
]