[
    {
        "content": "<p>How to modify it?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n<span class=\"kn\">example</span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"o\">:</span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"o\">)(</span><span class=\"n\">h1</span><span class=\"o\">:</span><span class=\"n\">p</span><span class=\"bp\">≥</span><span class=\"mi\">7</span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">prime</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"o\">):</span><span class=\"bp\">∑</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">range</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">i</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"bp\">⁻¹*</span><span class=\"o\">(</span><span class=\"n\">i</span><span class=\"bp\">+</span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"bp\">⁻¹%</span><span class=\"n\">p</span><span class=\"bp\">≡</span><span class=\"mi\">2</span><span class=\"o\">[</span><span class=\"n\">MOD</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n<span class=\"kn\">example</span><span class=\"o\">(</span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"n\">w</span><span class=\"o\">:</span><span class=\"n\">Vector</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"o\">)(</span><span class=\"n\">h1</span><span class=\"o\">:</span><span class=\"n\">u</span><span class=\"bp\">.</span><span class=\"n\">norm</span><span class=\"bp\">=</span><span class=\"mi\">3</span><span class=\"o\">)(</span><span class=\"n\">h2</span><span class=\"o\">:</span><span class=\"n\">v</span><span class=\"bp\">.</span><span class=\"n\">norm</span><span class=\"bp\">=</span><span class=\"mi\">4</span><span class=\"o\">)(</span><span class=\"n\">h3</span><span class=\"o\">:</span><span class=\"n\">w</span><span class=\"bp\">.</span><span class=\"n\">norm</span><span class=\"bp\">=</span><span class=\"mi\">5</span><span class=\"o\">)(</span><span class=\"n\">h4</span><span class=\"o\">:</span><span class=\"n\">u</span><span class=\"bp\">+</span><span class=\"n\">v</span><span class=\"bp\">+</span><span class=\"n\">w</span><span class=\"bp\">=</span><span class=\"mi\">0</span><span class=\"o\">):</span><span class=\"n\">u</span><span class=\"bp\">·</span><span class=\"n\">v</span><span class=\"bp\">+</span><span class=\"n\">v</span><span class=\"bp\">·</span><span class=\"n\">w</span><span class=\"bp\">+</span><span class=\"n\">w</span><span class=\"bp\">·</span><span class=\"n\">u</span><span class=\"bp\">=-</span><span class=\"mi\">25</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n</code></pre></div>",
        "id": 498589162,
        "sender_full_name": "liu",
        "timestamp": 1739098110
    },
    {
        "content": "<p>What's the problem? (I'm on mobile) If there's an error can you post the error?</p>",
        "id": 498589304,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1739098236
    },
    {
        "content": "<p>[<br>\n<a href=\"/user_uploads/3121/5nw0oC8Uf6NJC2eAp0HZysJO/2025-02-09-185118.png\">屏幕截图 2025-02-09 185118.png</a><br>\n<a href=\"/user_uploads/3121/zNq42uOcB8AWQdu5vj9iqOaJ/2025-02-09-185132.png\">屏幕截图 2025-02-09 185132.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/5nw0oC8Uf6NJC2eAp0HZysJO/2025-02-09-185118.png\" title=\"屏幕截图 2025-02-09 185118.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"2560x1600\" src=\"/user_uploads/thumbnail/3121/5nw0oC8Uf6NJC2eAp0HZysJO/2025-02-09-185118.png/840x560.webp\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/3121/zNq42uOcB8AWQdu5vj9iqOaJ/2025-02-09-185132.png\" title=\"屏幕截图 2025-02-09 185132.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"2560x1600\" src=\"/user_uploads/thumbnail/3121/zNq42uOcB8AWQdu5vj9iqOaJ/2025-02-09-185132.png/840x560.webp\"></a></div>",
        "id": 498589429,
        "sender_full_name": "liu",
        "timestamp": 1739098336
    },
    {
        "content": "<p>You probably need <code>open scoped BigOperators</code> or something to make the sum notation work. Just look in mathlib itself to see the syntax. My memory is that <code>in</code> changed to <code>\\in</code> recently</p>",
        "id": 498589625,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1739098522
    },
    {
        "content": "<p>Then what about the second one?</p>",
        "id": 498589848,
        "sender_full_name": "liu",
        "timestamp": 1739098688
    },
    {
        "content": "<p>What's the dot supposed to mean?</p>",
        "id": 498591923,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1739100523
    },
    {
        "content": "<p>This is the operator for the dot product of vectors.</p>",
        "id": 498592044,
        "sender_full_name": "liu",
        "timestamp": 1739100631
    },
    {
        "content": "<p>Not in lean, but neither does <code>Vector</code> mean what you think it does, nor does <code>u.norm</code>. Are you just writing random code hoping that lean makes sense of it?</p>",
        "id": 498592426,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1739100989
    },
    {
        "content": "<p>In any case, for the first line, lean tells you it's looking for a comma. It's the comma after the set you're summing over that's missing</p>",
        "id": 498592451,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1739101023
    },
    {
        "content": "<p>Then how should I write it?</p>",
        "id": 498592740,
        "sender_full_name": "liu",
        "timestamp": 1739101269
    },
    {
        "content": "<p>Where did you get this code from?</p>",
        "id": 498598057,
        "sender_full_name": "Chris Wong",
        "timestamp": 1739105863
    },
    {
        "content": "<p>AI，haha</p>",
        "id": 498598119,
        "sender_full_name": "liu",
        "timestamp": 1739105899
    },
    {
        "content": "<p>I would avoid AI. There is not enough Lean code in the training data for AI to actually understand the language, so it gets many things wrong.</p>",
        "id": 498598148,
        "sender_full_name": "Chris Wong",
        "timestamp": 1739105942
    },
    {
        "content": "<p>I think so.</p>",
        "id": 498598186,
        "sender_full_name": "liu",
        "timestamp": 1739105986
    },
    {
        "content": "<p>You can read Mathematics in Lean to see how linear algebra works: <a href=\"https://leanprover-community.github.io/mathematics_in_lean/C09_Linear_Algebra.html\">https://leanprover-community.github.io/mathematics_in_lean/C09_Linear_Algebra.html</a></p>",
        "id": 498598270,
        "sender_full_name": "Chris Wong",
        "timestamp": 1739106041
    },
    {
        "content": "<p>I didn't see any content about the norm of vectors here.</p>",
        "id": 498598396,
        "sender_full_name": "liu",
        "timestamp": 1739106163
    },
    {
        "content": "<p>What is the mathematical idea you are trying to express?</p>",
        "id": 498599137,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1739106851
    },
    {
        "content": "<p>I'm formalizing this problem description.I don't know how to represent the norm of this vector. I tried using <code>\\||</code>, but it reported an error.</p>",
        "id": 498599541,
        "sender_full_name": "liu",
        "timestamp": 1739107250
    },
    {
        "content": "<p><a href=\"/user_uploads/3121/_jTnHarNCsG4De6BiOPZ8Ht-/2025-02-09-212124.png\">屏幕截图 2025-02-09 212124.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/_jTnHarNCsG4De6BiOPZ8Ht-/2025-02-09-212124.png\" title=\"屏幕截图 2025-02-09 212124.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"2322x422\" src=\"/user_uploads/thumbnail/3121/_jTnHarNCsG4De6BiOPZ8Ht-/2025-02-09-212124.png/840x560.webp\"></a></div>",
        "id": 498599574,
        "sender_full_name": "liu",
        "timestamp": 1739107301
    },
    {
        "content": "<p>Probably the question you need answered first is \"how do I declare a vector\"</p>",
        "id": 498599901,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1739107608
    },
    {
        "content": "<p>I don't know how to declare</p>",
        "id": 498600071,
        "sender_full_name": "liu",
        "timestamp": 1739107782
    },
    {
        "content": "<p>Are there any relevant tutorial links?</p>",
        "id": 498600297,
        "sender_full_name": "liu",
        "timestamp": 1739107941
    },
    {
        "content": "<p>What kind of vector do you want?</p>",
        "id": 498600625,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1739108270
    },
    {
        "content": "<p>For example, vectors in the plane rectangular coordinate system.</p>",
        "id": 498600969,
        "sender_full_name": "liu",
        "timestamp": 1739108574
    },
    {
        "content": "<p>This is my guess at what you want, does this work for you?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"n\">w</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">EuclideanSpace</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hu</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">‖</span><span class=\"n\">u</span><span class=\"bp\">‖</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hv</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">‖</span><span class=\"n\">v</span><span class=\"bp\">‖</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hw</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">‖</span><span class=\"n\">w</span><span class=\"bp\">‖</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">huvw</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">w</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"bp\">⬝ᵥ</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"bp\">⬝ᵥ</span><span class=\"w\"> </span><span class=\"n\">w</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">w</span><span class=\"w\"> </span><span class=\"bp\">⬝ᵥ</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"mi\">25</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n</code></pre></div>",
        "id": 498601502,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1739109048
    },
    {
        "content": "<p>It's really helpful. How did you learn this? The content about \"mathematics in Lean\" in existing materials isn't in - depth enough. For some problems, I often can't find the answers I want. Could you recommend some professional Lean tutorials? I'm in great need of them.</p>",
        "id": 498601819,
        "sender_full_name": "liu",
        "timestamp": 1739109358
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"874257\">liu</span> <a href=\"#narrow/channel/113489-new-members/topic/vector.20and.20MOD/near/498600297\">said</a>:</p>\n<blockquote>\n<p>Are there any relevant tutorial links?</p>\n</blockquote>\n<p>This is covered by <a href=\"https://leanprover-community.github.io/mathematics_in_lean/\">#mil</a> in the Linear Algebra section</p>",
        "id": 498601865,
        "sender_full_name": "Luigi Massacci",
        "timestamp": 1739109371
    },
    {
        "content": "<p>for norms, the part about normed spaces</p>",
        "id": 498601921,
        "sender_full_name": "Luigi Massacci",
        "timestamp": 1739109444
    },
    {
        "content": "<p>That's the same book I linked before...</p>",
        "id": 498602560,
        "sender_full_name": "Chris Wong",
        "timestamp": 1739110004
    },
    {
        "content": "<p>I have another question. I really don't understand why the <code>:=</code> sign causes an error.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n<span class=\"kn\">example</span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"o\">:</span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"o\">)(</span><span class=\"n\">h1</span><span class=\"o\">:</span><span class=\"n\">p</span><span class=\"bp\">≥</span><span class=\"mi\">7</span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">prime</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"o\">):</span><span class=\"bp\">∑</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\">  </span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">range</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">i</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"bp\">⁻¹*</span><span class=\"o\">(</span><span class=\"n\">i</span><span class=\"bp\">+</span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"bp\">⁻¹%</span><span class=\"n\">p</span><span class=\"bp\">≡</span><span class=\"mi\">2</span><span class=\"o\">[</span><span class=\"n\">MOD</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"o\">]:=</span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n</code></pre></div>",
        "id": 498602859,
        "sender_full_name": "liu",
        "timestamp": 1739110272
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"874257\">liu</span> <a href=\"#narrow/channel/113489-new-members/topic/vector.20and.20MOD/near/498601819\">said</a>:</p>\n<blockquote>\n<p>It's really helpful. How did you learn this?</p>\n</blockquote>\n<p>Mostly just looking on <a href=\"https://loogle.lean-lang.org/\">loogle</a> and <a href=\"https://www.moogle.ai/\">moogle</a> to find the things I want, and I have also spent some time reading the <a href=\"https://leanprover-community.github.io/mathlib4_docs/index.html\">mathlib4 docs</a>, and also working through <a href=\"https://github.com/ImperialCollegeLondon/formalising-mathematics-2024\">Formalizing Mathematics</a> was helpful to see a lot of different parts of mathlib.</p>",
        "id": 498603255,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1739110638
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"874257\">liu</span> <a href=\"#narrow/channel/113489-new-members/topic/vector.20and.20MOD/near/498602859\">said</a>:</p>\n<blockquote>\n<p>I have another question. I really don't understand why the <code>:=</code> sign causes an error.</p>\n<p><div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n<span class=\"kn\">example</span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"o\">:</span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"o\">)(</span><span class=\"n\">h1</span><span class=\"o\">:</span><span class=\"n\">p</span><span class=\"bp\">≥</span><span class=\"mi\">7</span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">prime</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"o\">):</span><span class=\"bp\">∑</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\">  </span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">range</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">i</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"bp\">⁻¹*</span><span class=\"o\">(</span><span class=\"n\">i</span><span class=\"bp\">+</span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"bp\">⁻¹%</span><span class=\"n\">p</span><span class=\"bp\">≡</span><span class=\"mi\">2</span><span class=\"o\">[</span><span class=\"n\">MOD</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"o\">]:=</span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n</code></pre></div><br>\n</p>\n</blockquote>\n<p>You problem is that you started the <code>∑</code> notation but didn't separate the thing being summed over from the thing being summed up, so when the parser runs into <code>:=</code> it gives up and throws an error.<br>\nThe correct notation is <code>∑ i ∈ finset, value</code> (note the comma).</p>",
        "id": 498603482,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1739110818
    },
    {
        "content": "<p>But I used the comma, and it still reported an error.</p>",
        "id": 498603747,
        "sender_full_name": "liu",
        "timestamp": 1739111025
    },
    {
        "content": "<p>What was the error?</p>",
        "id": 498603811,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1739111047
    },
    {
        "content": "<p><a href=\"/user_uploads/3121/0qDlrfdmny6iD-XCMm3bGD9N/2025-02-09-222433.png\">屏幕截图 2025-02-09 222433.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/0qDlrfdmny6iD-XCMm3bGD9N/2025-02-09-222433.png\" title=\"屏幕截图 2025-02-09 222433.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"2560x1600\" src=\"/user_uploads/thumbnail/3121/0qDlrfdmny6iD-XCMm3bGD9N/2025-02-09-222433.png/840x560.webp\"></a></div>",
        "id": 498603856,
        "sender_full_name": "liu",
        "timestamp": 1739111095
    },
    {
        "content": "<p>You have a different error now.<br>\n<code>Nat.prime</code> does not exist, you might have been thinking of <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Nat.Prime#doc\">docs#Nat.Prime</a>.<br>\n<code>Finset.range p-1</code> groups as <code>(Finset.range p)-1</code>, if you want <code>Finset.range (p-1)</code> then you need to add parentheses.<br>\nWhen taking the <code>⁻¹</code>, you need to be in a number system that supports it, like <code>ℚ</code> or <code>ℝ</code>. Try adding some type annotations to force this.</p>",
        "id": 498604141,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1739111330
    },
    {
        "content": "<p>With the inverse, they might be thinking of the finite field mod p.</p>",
        "id": 498604179,
        "sender_full_name": "Chris Wong",
        "timestamp": 1739111378
    },
    {
        "content": "<p>In that case, use <code>ZMod</code>.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">7</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hp</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">Prime</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"bp\">∑</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">range</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ZMod</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"o\">)</span><span class=\"bp\">⁻¹</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ZMod</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"o\">)</span><span class=\"bp\">⁻¹</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n</code></pre></div>",
        "id": 498604812,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1739111862
    },
    {
        "content": "<p>Amazing! Where did you look up this information?</p>",
        "id": 498605025,
        "sender_full_name": "liu",
        "timestamp": 1739112033
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"874257\">@liu</span> , please read <a href=\"https://github.com/leanprover-community/mathlib/wiki/Code-in-backticks\">#backticks</a> rather than posting screenshots</p>",
        "id": 498605070,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1739112071
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"310045\">@Eric Wieser</span> I  just want to show the error,so I post screenshots</p>",
        "id": 498605223,
        "sender_full_name": "liu",
        "timestamp": 1739112195
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"874257\">liu</span> <a href=\"#narrow/stream/113489-new-members/topic/vector.20and.20MOD/near/498598119\">said</a>:</p>\n<blockquote>\n<p>AI，haha</p>\n</blockquote>\n<p>If you want to use AI, I recommend doing so only after you've learnt the basics first. Then you can use things like leansearch and moogle which use AI-based search to help you find theorems and functions.</p>",
        "id": 498605235,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1739112211
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"310045\">@Eric Wieser</span> Can you give me the website URL of Moogle?</p>",
        "id": 498605555,
        "sender_full_name": "liu",
        "timestamp": 1739112447
    },
    {
        "content": "<p>Click here <span aria-label=\"point right\" class=\"emoji emoji-1f449\" role=\"img\" title=\"point right\">:point_right:</span> <a href=\"https://www.moogle.ai/\">#moogle</a></p>",
        "id": 498606484,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1739113142
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"874257\">liu</span> <a href=\"#narrow/channel/113489-new-members/topic/vector.20and.20MOD/near/498605223\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> I  just want to show the error,so I post screenshots</p>\n</blockquote>\n<p>It's great to want to show the errors, but it's much better if we can <em>reproduce</em> them. Click here <span aria-label=\"point right\" class=\"emoji emoji-1f449\" role=\"img\" title=\"point right\">:point_right:</span> <a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a> to see what we mean</p>",
        "id": 498606575,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1739113206
    },
    {
        "content": "<p>I've encountered a new problem. How can I formalize this problem description?<br>\n<a href=\"/user_uploads/3121/A1bc5N7CSa4oWDub8s5gF6nP/2025-02-09-233630.png\">屏幕截图 2025-02-09 233630.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/A1bc5N7CSa4oWDub8s5gF6nP/2025-02-09-233630.png\" title=\"屏幕截图 2025-02-09 233630.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"1664x327\" src=\"/user_uploads/thumbnail/3121/A1bc5N7CSa4oWDub8s5gF6nP/2025-02-09-233630.png/840x560.webp\"></a></div>",
        "id": 498609264,
        "sender_full_name": "liu",
        "timestamp": 1739115438
    },
    {
        "content": "<p>Why do I get an error when defining <code>fun2</code>, and why does <code>Set1.ncard</code> also cause an error?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">fun1</span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"o\">:</span><span class=\"n\">ℝ</span><span class=\"o\">):</span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"bp\">|</span><span class=\"n\">x</span><span class=\"bp\">|</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">fun2</span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"o\">:</span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"o\">):</span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"bp\">-</span><span class=\"n\">x</span><span class=\"bp\">*</span><span class=\"n\">x</span><span class=\"bp\">+</span><span class=\"mi\">35</span><span class=\"bp\">/</span><span class=\"mi\">4</span>\n<span class=\"kn\">example</span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"o\">:</span><span class=\"n\">ℤ</span><span class=\"w\"> </span><span class=\"o\">)(</span><span class=\"n\">y</span><span class=\"o\">:</span><span class=\"n\">ℤ</span><span class=\"w\"> </span><span class=\"o\">)(</span><span class=\"n\">Set1</span><span class=\"o\">:</span><span class=\"n\">Finset</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"w\"> </span><span class=\"o\">)(</span><span class=\"n\">h1</span><span class=\"o\">:</span><span class=\"n\">Set1</span><span class=\"bp\">=</span><span class=\"o\">{(</span><span class=\"n\">x</span><span class=\"o\">,</span><span class=\"n\">y</span><span class=\"o\">)</span><span class=\"bp\">|</span><span class=\"n\">y</span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">fun2</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"bp\">≥</span><span class=\"w\">  </span><span class=\"n\">fun1</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">}):</span><span class=\"n\">Set1</span><span class=\"bp\">.</span><span class=\"n\">ncard</span><span class=\"bp\">=</span><span class=\"mi\">29</span><span class=\"o\">:=</span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n</code></pre></div>",
        "id": 498611029,
        "sender_full_name": "liu",
        "timestamp": 1739116735
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">fun1</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"n\">x</span><span class=\"bp\">|</span>\n\n<span class=\"c1\">-- Division on the reals is noncomputable,</span>\n<span class=\"c1\">-- unless you want to start passing around proofs of nonzero (trust me, you don't).</span>\n<span class=\"kn\">noncomputable</span><span class=\"w\"> </span><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">fun2</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">35</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"mi\">4</span>\n<span class=\"c1\">-- def fun2 (x : ℝ) : ℝ := -x * x + (35 / 4 : ℚ)</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Set1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"c1\">-- This parses as `y ≤ (fun2 x ∧ y ≥ fun1 x)` for reasons I cannot explain.</span>\n<span class=\"w\">    </span><span class=\"c1\">-- A more serious issue is that `Set1` is a `Finset ℤ` while `{(x, y) | ...}` is a `Set (_ × _)`,</span>\n<span class=\"w\">    </span><span class=\"c1\">-- and integers are not the same as pairs of something.</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">h1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set1</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">{(</span><span class=\"n\">x</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">fun2</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">≥</span><span class=\"w\"> </span><span class=\"n\">fun1</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">})</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"c1\">-- `Set1` is a `Finset ℤ`, so `Set1.ncard` is looking for `Finset.ncard`, which doesn't exist.</span>\n<span class=\"w\">    </span><span class=\"c1\">-- Try `Set1.card` instead?</span>\n<span class=\"w\">    </span><span class=\"n\">Set1</span><span class=\"bp\">.</span><span class=\"n\">ncard</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">29</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n</code></pre></div>",
        "id": 498612385,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1739117750
    },
    {
        "content": "<p>I don't understang : A more serious issue is that <code>Set1</code> is a <code>Finset ℤ</code> while <code>{(x, y) | ...}</code> is a <code>Set (_ × _)</code>,</p>",
        "id": 498613100,
        "sender_full_name": "liu",
        "timestamp": 1739118347
    },
    {
        "content": "<p>A set of integers can not contain pairs</p>",
        "id": 498613208,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1739118413
    },
    {
        "content": "<p>Perhaps you meant <code>Set1 : Finset (\\Z \\times \\Z)</code></p>",
        "id": 498613288,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1739118479
    },
    {
        "content": "<p>Whether I follow the method in the comments or change 35/4 to 8.75, I still get an error.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">fun1</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"n\">x</span><span class=\"bp\">|</span>\n<span class=\"c1\">-- Division on the reals is noncomputable,</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">fun2</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">35</span><span class=\"bp\">/</span><span class=\"mi\">4</span><span class=\"o\">:</span><span class=\"n\">ℚ</span><span class=\"o\">)</span>\n<span class=\"c1\">-- def fun2 (x : ℝ) : ℝ := -x * x + (35 / 4 : ℚ)</span>\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Set1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ℤ</span><span class=\"bp\">×</span><span class=\"n\">ℤ</span><span class=\"w\"> </span><span class=\"o\">))</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">h1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set1</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">{(</span><span class=\"n\">x</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">fun2</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">≥</span><span class=\"w\"> </span><span class=\"n\">fun1</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">})</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">Set1</span><span class=\"bp\">.</span><span class=\"n\">card</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">29</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n</code></pre></div>",
        "id": 498614323,
        "sender_full_name": "liu",
        "timestamp": 1739119288
    },
    {
        "content": "<p>The elaborator is struggling to add coercions here, you might need to help it a little.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Set1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ℤ</span><span class=\"w\"> </span><span class=\"bp\">×</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">))</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">h1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set1</span><span class=\"bp\">.</span><span class=\"n\">toSet</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">{(</span><span class=\"n\">x</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">fun2</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">≥</span><span class=\"w\"> </span><span class=\"n\">fun1</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">})</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">Set1</span><span class=\"bp\">.</span><span class=\"n\">card</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">29</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n</code></pre></div>",
        "id": 498614978,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1739119798
    },
    {
        "content": "<p>Why are we dealing with <code>Real</code> and <code>Set</code> at all?</p>",
        "id": 498646519,
        "sender_full_name": "Chris Wong",
        "timestamp": 1739145326
    },
    {
        "content": "<p>If we work within <code>Rat</code> and <code>Finset</code>, then the problem can be solved by <code>decide</code>.</p>",
        "id": 498646594,
        "sender_full_name": "Chris Wong",
        "timestamp": 1739145371
    }
]