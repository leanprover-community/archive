[
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">section</span><span class=\"w\"> </span><span class=\"n\">lattice_version</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Î›</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Submodule</span><span class=\"w\"> </span><span class=\"n\">â„¤</span><span class=\"w\"> </span><span class=\"n\">â„‚</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">DiscreteTopology</span><span class=\"w\"> </span><span class=\"n\">Î›</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">IsZLattice</span><span class=\"w\"> </span><span class=\"n\">â„</span><span class=\"w\"> </span><span class=\"n\">Î›</span><span class=\"o\">]</span>\n\n<span class=\"c1\">-- lattice version</span>\n<span class=\"kn\">noncomputable</span><span class=\"w\"> </span><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Weierstrass_ğ“Ÿ_lattice</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">z</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">â„‚</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"bp\">âˆ‘'</span><span class=\"w\"> </span><span class=\"n\">Ï‰</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Î›</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">Ï‰</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"n\">z</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"k\">else</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"o\">(</span><span class=\"n\">z</span><span class=\"bp\">-</span><span class=\"n\">Ï‰</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"n\">Ï‰</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"o\">)</span>\n\n<span class=\"kn\">end</span><span class=\"w\"> </span><span class=\"n\">lattice_version</span>\n\n<span class=\"kn\">section</span><span class=\"w\"> </span><span class=\"n\">non_lattice_version</span>\n\n<span class=\"c1\">-- non-lattice version (my guess is that is the easiest to work with)</span>\n<span class=\"kn\">noncomputable</span><span class=\"w\"> </span><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Weierstrass_ğ“Ÿ_basis</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">z</span><span class=\"w\"> </span><span class=\"n\">Ï‰â‚</span><span class=\"w\"> </span><span class=\"n\">Ï‰â‚‚</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">â„‚</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"bp\">âˆ‘'</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">â„¤</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">âˆ‘'</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">â„¤</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">âˆ§</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"n\">z</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"k\">else</span>\n<span class=\"w\">    </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">Ï‰</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">Ï‰â‚</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">Ï‰â‚‚</span>\n<span class=\"w\">    </span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"o\">(</span><span class=\"n\">z</span><span class=\"bp\">-</span><span class=\"n\">Ï‰</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"n\">Ï‰</span><span class=\"bp\">^</span><span class=\"mi\">2</span>\n\n<span class=\"kn\">end</span><span class=\"w\"> </span><span class=\"n\">non_lattice_version</span>\n\n<span class=\"c1\">-- To prove that this sum converges if z âˆ‰ Î›</span>\n\n\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">z</span><span class=\"w\"> </span><span class=\"n\">Ï‰â‚</span><span class=\"w\"> </span><span class=\"n\">Ï‰â‚‚</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">â„‚</span><span class=\"o\">)</span>\n\n<span class=\"c1\">-- The inner sum always converges</span>\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">Weierstrass_ğ“Ÿ_basis_convergesâ‚</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hz</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">âˆ€</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"n\">d</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">â„¤</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">z</span><span class=\"w\"> </span><span class=\"bp\">â‰ </span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">Ï‰â‚</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">d</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">Ï‰â‚‚</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"c1\">-- assume z not in the lattice:</span>\n<span class=\"w\">  </span><span class=\"bp\">âˆ€</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">â„¤</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">Summable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">â„¤</span><span class=\"w\"> </span><span class=\"bp\">â†¦</span><span class=\"w\"> </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">âˆ§</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"n\">z</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"k\">else</span>\n<span class=\"w\">    </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">Ï‰</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">Ï‰â‚</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">Ï‰â‚‚</span>\n<span class=\"w\">    </span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"o\">(</span><span class=\"n\">z</span><span class=\"bp\">-</span><span class=\"n\">Ï‰</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"n\">Ï‰</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n\n\n\n<span class=\"w\">    </span><span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>Hi guys, I'm trying to prove this with lean4, however I'm kinda confused what to do at first. Since I'm not very sure what the  structure should be with lean. Maybe does anyone could help me or have any examples or resourses? Many thanks !</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code>\n</code></pre></div>",
        "id": 484188091,
        "sender_full_name": "Yujie Wang",
        "timestamp": 1732490369
    },
    {
        "content": "<p><a href=\"/user_uploads/3121/Q_TJSXl5YRsFdFIx-u0TlNlZ/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/Q_TJSXl5YRsFdFIx-u0TlNlZ/image.png\" title=\"image.png\"><img data-original-dimensions=\"1374x1440\" src=\"/user_uploads/thumbnail/3121/Q_TJSXl5YRsFdFIx-u0TlNlZ/image.png/840x560.webp\"></a></div>",
        "id": 484188160,
        "sender_full_name": "Yujie Wang",
        "timestamp": 1732490415
    },
    {
        "content": "<p><a href=\"/user_uploads/3121/fUIqXtAO1jQJ8xLoAXxxMxnr/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/fUIqXtAO1jQJ8xLoAXxxMxnr/image.png\" title=\"image.png\"><img data-original-dimensions=\"1378x1338\" src=\"/user_uploads/thumbnail/3121/fUIqXtAO1jQJ8xLoAXxxMxnr/image.png/840x560.webp\"></a></div>",
        "id": 484188169,
        "sender_full_name": "Yujie Wang",
        "timestamp": 1732490433
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"776918\">@Yujie Wang</span> It looks like your question became part of the code block. Could you please edit your top post to fix the formatting?</p>",
        "id": 484215642,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1732513989
    },
    {
        "content": "<p>Presumably <span class=\"user-mention\" data-user-id=\"389019\">@Chris Birkbeck</span> has some ideas on what the best Lean approach here.</p>",
        "id": 484215746,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1732514071
    },
    {
        "content": "<p>So I think defining it using an <code>if</code> in the sum might get annoying. I would define the infinite sum as an auxilary function and then just add 1/z to get your defn. As for proving the convergence, you should be able to use <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=EisensteinSeries.r#doc\">docs#EisensteinSeries.r</a> to give you the upper bound you need for the M-test. Have a look at the proof of <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=EisensteinSeries.summable_norm_eisSummand#doc\">docs#EisensteinSeries.summable_norm_eisSummand</a></p>",
        "id": 484225896,
        "sender_full_name": "Chris Birkbeck",
        "timestamp": 1732520322
    },
    {
        "content": "<p>Thanks! let me try it</p>",
        "id": 484345124,
        "sender_full_name": "Yujie Wang",
        "timestamp": 1732552316
    }
]