[
    {
        "content": "<p>Looking at the official example, it seems to only work with shared .o files and not .dll<br>\n<a href=\"https://github.com/leanprover/lean4/blob/master/src/lake/examples/ffi/lib/lakefile.lean\">https://github.com/leanprover/lean4/blob/master/src/lake/examples/ffi/lib/lakefile.lean</a><br>\nI haven’t tested to see if it would work statically linked but it’s a shame dynamic linking seems to not be a thing</p>",
        "id": 535962209,
        "sender_full_name": "Srayan Jana",
        "timestamp": 1756104005
    },
    {
        "content": "<p>It should work as expected on all supported platforms, it is run by our CI on all of them. <code>.o</code> object files are what comes before static/shared archives.</p>",
        "id": 535970856,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1756107897
    },
    {
        "content": "<p>Gotcha, I’ll try it out again</p>",
        "id": 535976031,
        "sender_full_name": "Srayan Jana",
        "timestamp": 1756109842
    },
    {
        "content": "<p>Canonical has dynamic linking working on Mac, Windows, and Linux.</p>",
        "id": 536996400,
        "sender_full_name": "Chase Norman",
        "timestamp": 1756661558
    },
    {
        "content": "<p>I got it working fairly painlessly as well for rpylean, though I probably never tested on Windows. <a href=\"https://github.com/Julian/rpylean/blob/main/rpylean/leanffi.py\">https://github.com/Julian/rpylean/blob/main/rpylean/leanffi.py</a></p>",
        "id": 537113650,
        "sender_full_name": "Julian Berman",
        "timestamp": 1756734233
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 537156275,
        "sender_full_name": "Eric Taucher",
        "timestamp": 1756751267
    },
    {
        "content": "<p>I should mention that I eventually got the FFI working on both Linux and Windows, but there has been a lot of complications<br>\n<a href=\"https://github.com/ValorZard/LeanDoomed/tree/main\">https://github.com/ValorZard/LeanDoomed/tree/main</a><br>\nRight now, I can build it from source, but I can't create a distributable executable</p>\n<p>Really the worst part has been interfacing with the C Compiler and trying to figure out the right combinations of build flags to get LLVM and GCC to work properly</p>",
        "id": 537156718,
        "sender_full_name": "Srayan Jana",
        "timestamp": 1756751520
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 537157364,
        "sender_full_name": "Eric Taucher",
        "timestamp": 1756751905
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 537157906,
        "sender_full_name": "Eric Taucher",
        "timestamp": 1756752229
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 537159099,
        "sender_full_name": "Eric Taucher",
        "timestamp": 1756752940
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"366057\">@Eric Taucher</span> if you want, I'd love if you could get the repo I linked to run on your computer. It SHOULD, but idk. I wrote instructions in the README to help you out</p>",
        "id": 537171112,
        "sender_full_name": "Srayan Jana",
        "timestamp": 1756760264
    }
]