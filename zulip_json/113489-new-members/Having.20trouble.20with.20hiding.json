[
    {
        "content": "<p>Lean complains about the following:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Logic</span><span class=\"bp\">.</span><span class=\"n\">Basic</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Classical</span><span class=\"w\"> </span><span class=\"kn\">hiding</span><span class=\"w\"> </span><span class=\"n\">not_imp</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"o\">):</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">↔</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">not_imp</span><span class=\"o\">]</span>\n</code></pre></div>\n<p>The error is in the last line:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">Ambiguous</span><span class=\"w\"> </span><span class=\"n\">term</span>\n<span class=\"w\">  </span><span class=\"n\">not_imp</span>\n<span class=\"n\">Possible</span><span class=\"w\"> </span><span class=\"n\">interpretations</span><span class=\"o\">:</span>\n<span class=\"w\">  </span><span class=\"bp\">_</span><span class=\"n\">root_</span><span class=\"bp\">.</span><span class=\"n\">not_imp</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"o\">(</span><span class=\"bp\">?</span><span class=\"n\">m</span><span class=\"bp\">.</span><span class=\"m\">2</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"bp\">?</span><span class=\"n\">m</span><span class=\"bp\">.</span><span class=\"m\">3</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">↔</span><span class=\"w\"> </span><span class=\"bp\">?</span><span class=\"n\">m</span><span class=\"bp\">.</span><span class=\"m\">2</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"bp\">¬?</span><span class=\"n\">m</span><span class=\"bp\">.</span><span class=\"m\">3</span>\n\n<span class=\"w\">  </span><span class=\"n\">Classical</span><span class=\"bp\">.</span><span class=\"n\">not_imp</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"o\">(</span><span class=\"bp\">?</span><span class=\"n\">m</span><span class=\"bp\">.</span><span class=\"m\">2</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"bp\">?</span><span class=\"n\">m</span><span class=\"bp\">.</span><span class=\"m\">3</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">↔</span><span class=\"w\"> </span><span class=\"bp\">?</span><span class=\"n\">m</span><span class=\"bp\">.</span><span class=\"m\">2</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"bp\">¬?</span><span class=\"n\">m</span><span class=\"bp\">.</span><span class=\"m\">3</span>\n</code></pre></div>\n<p>If I am already hiding <code>Classical.not_imp</code>, why is <code>not_imp</code> still ambiguous? In fact, the following works:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Classical</span><span class=\"w\"> </span><span class=\"kn\">hiding</span><span class=\"w\"> </span><span class=\"n\">not_imp</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"o\">):</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">↔</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">not_imp</span><span class=\"o\">]</span>\n</code></pre></div>\n<p>Is it impossible to hide <code>Classical.not_imp</code>?</p>",
        "id": 571102742,
        "sender_full_name": "Kevin Cheung",
        "timestamp": 1769799442
    },
    {
        "content": "<p>Where is the <code>_root_</code> one defined?</p>",
        "id": 571121130,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1769806098
    },
    {
        "content": "<p>I'm not sure. But I htink it is in <code>Mathlib.Logic.Basic</code>.</p>",
        "id": 571121256,
        "sender_full_name": "Kevin Cheung",
        "timestamp": 1769806147
    },
    {
        "content": "<p>Probably it's worth asking in <a class=\"stream\" data-stream-id=\"270676\" href=\"/#narrow/channel/270676-lean4\">#lean4</a> with the example without mathlib</p>",
        "id": 571121499,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1769806242
    },
    {
        "content": "<p>It's not <code>export</code>ed, is it?</p>",
        "id": 571121545,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1769806260
    },
    {
        "content": "<p>It is exported in Init.Classical but then mathlib defines it again in the root namespace</p>",
        "id": 571122427,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1769806603
    },
    {
        "content": "<p>Weird, <code>#check not_imp</code> just works and finds <code>Classical.not_imp</code></p>",
        "id": 571126213,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1769807913
    },
    {
        "content": "<p>Probably we can just remove <code>_root_.not_imp</code>?</p>",
        "id": 571126246,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1769807929
    },
    {
        "content": "<p>Funnily, the <code>export</code> means you can use <code>not_imp</code> without qualification or <code>open</code>, but not <code>_root_.not_imp</code></p>",
        "id": 571126394,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1769808006
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/34625\">#34625</a></p>",
        "id": 571127427,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1769808502
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"307953\">Ruben Van de Velde</span> <a href=\"#narrow/channel/113489-new-members/topic/Having.20trouble.20with.20hiding/near/571126213\">schrieb</a>:</p>\n<blockquote>\n<p>Weird, <code>#check not_imp</code> just works and finds <code>Classical.not_imp</code></p>\n</blockquote>\n<p>Try <code>#check (not_imp)</code>, <code>#check &lt;identifier&gt;</code> has special behavior</p>",
        "id": 571129204,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1769809241
    },
    {
        "content": "<p>Doesn't seem to change it on my side</p>",
        "id": 571132065,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1769810562
    },
    {
        "content": "<p>Hmm?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Logic</span><span class=\"bp\">.</span><span class=\"n\">Basic</span>\n\n<span class=\"sd\">/-- info: Classical.not_imp {a b : Prop} : ¬(a → b) ↔ a ∧ ¬b -/</span>\n<span class=\"bp\">#</span><span class=\"n\">guard_msgs</span><span class=\"w\"> </span><span class=\"k\">in</span>\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">not_imp</span>\n\n<span class=\"sd\">/--</span>\n<span class=\"sd\">error: Ambiguous term</span>\n<span class=\"sd\">  not_imp</span>\n<span class=\"sd\">Possible interpretations:</span>\n<span class=\"sd\">  _root_.not_imp : ¬(?m.1 → ?m.2) ↔ ?m.1 ∧ ¬?m.2</span>\n<span class=\"sd\">  ⏎</span>\n<span class=\"sd\">  Classical.not_imp : ¬(?m.1 → ?m.2) ↔ ?m.1 ∧ ¬?m.2</span>\n<span class=\"sd\">-/</span>\n<span class=\"bp\">#</span><span class=\"n\">guard_msgs</span><span class=\"w\"> </span><span class=\"k\">in</span>\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">not_imp</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 571132816,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1769810930
    },
    {
        "content": "<p>Huh</p>",
        "id": 571132842,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1769810946
    },
    {
        "content": "<p>Looks like I was trying in one of the three files that don't import <code>Logic.Basic</code></p>",
        "id": 571137979,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1769813681
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"307953\">Ruben Van de Velde</span> <a href=\"#narrow/channel/113489-new-members/topic/Having.20trouble.20with.20hiding/near/571127427\">said</a>:</p>\n<blockquote>\n<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/34625\">#34625</a></p>\n</blockquote>\n<p>Does this PR make the second example (quoted below) fail?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Classical</span><span class=\"w\"> </span><span class=\"kn\">hiding</span><span class=\"w\"> </span><span class=\"n\">not_imp</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"o\">):</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">↔</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">not_imp</span><span class=\"o\">]</span>\n</code></pre></div>",
        "id": 571179166,
        "sender_full_name": "Kevin Cheung",
        "timestamp": 1769850566
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"873547\">Robin Arnez</span> <a href=\"#narrow/channel/113489-new-members/topic/Having.20trouble.20with.20hiding/near/571129204\">said</a>:</p>\n<blockquote>\n<p>Try <code>#check (not_imp)</code>, <code>#check &lt;identifier&gt;</code> has special behavior</p>\n</blockquote>\n<p>Is there documentation on the difference in behaviour?</p>",
        "id": 571179388,
        "sender_full_name": "Kevin Cheung",
        "timestamp": 1769850740
    },
    {
        "content": "<p><a href=\"https://lean-lang.org/doc/reference/latest/find/?domain=Verso.Genre.Manual.section&amp;name=hash-check\">https://lean-lang.org/doc/reference/latest/find/?domain=Verso.Genre.Manual.section&amp;name=hash-check</a></p>",
        "id": 571188187,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1769858387
    }
]