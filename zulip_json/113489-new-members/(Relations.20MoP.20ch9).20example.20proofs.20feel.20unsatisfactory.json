[
    {
        "content": "<p>MoP Chapter 9 is on Relations and begins with some simple examples including:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Reflexive</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"bp\">·</span><span class=\"o\">:</span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">·</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">dsimp</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Reflexive</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">x</span>\n<span class=\"w\">  </span><span class=\"n\">ring</span>\n</code></pre></div>\n<p>The goal state just before <code>ring</code> is </p>\n<div class=\"codehilite\" data-code-language=\"Text only\"><pre><span></span><code>x : ℝ\n⊢ x = x\n</code></pre></div>\n<p>It feels unsatisfactory the property we're trying to prove is not actually proved in this proof, but is done by <code>ring</code>. <strong>Question:</strong> Is this cheating?</p>\n<hr>\n<p>Here is another example:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Symmetric</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"bp\">·</span><span class=\"o\">:</span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">·</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">dsimp</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Symmetric</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"n\">h</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">h</span><span class=\"o\">]</span>\n</code></pre></div>\n<p>Here the goal state just before <code>rw</code> is</p>\n<div class=\"codehilite\" data-code-language=\"Text only\"><pre><span></span><code>x y : ℝ\nh : x = y\n⊢ y = x\n</code></pre></div>\n<p>So here <code>rw</code> is rewriting the <code>x</code> in <code>y=x</code> as <code>y</code> to leave <code>y=y</code> which is (I guess?) true. But I'm not sure we've actually proven that <code>x=y</code> implies <code>y=x</code>.</p>\n<p><strong>Question:</strong> Am I the only one who feels there's something funny going on here? </p>\n<p>The same applies to the remaining two mini examples in MoP 10.1.2</p>",
        "id": 502800822,
        "sender_full_name": "rzeta0",
        "timestamp": 1740873376
    },
    {
        "content": "<p>Using <code>ring</code> in the first example isn't suspicious, though IMHO it's overkill. Consider that it can also be proved like this:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Reflexive</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"bp\">·</span><span class=\"o\">:</span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">·</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">dsimp</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Reflexive</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">x</span>\n<span class=\"w\">  </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">Eq</span><span class=\"bp\">.</span><span class=\"n\">refl</span><span class=\"w\"> </span><span class=\"n\">x</span>\n</code></pre></div>\n<p>All we're doing is constructing a term of the type <code>x = x</code> using the constructor <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Eq.refl#doc\">docs#Eq.refl</a> with a suitable argument (<code>x</code>). Put another way, the Prop <code>x = x</code> can be proved (constructed) whenever you have a term <code>x</code> because that's all the constructor needs... there's no need for an additional fact to help us out.</p>",
        "id": 502803069,
        "sender_full_name": "Matt Diamond",
        "timestamp": 1740875269
    },
    {
        "content": "<p>What you have in the <code>Symmetric</code> example is almost exactly how I would write the proof, and is also almost exactly how it is done in <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Eq.symm#doc\">docs#Eq.symm</a>.</p>",
        "id": 502803261,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1740875436
    },
    {
        "content": "<p>thanks <span class=\"user-mention\" data-user-id=\"380294\">@Matt Diamond</span> </p>\n<p>This is all beyond my capability but I'll give it a go.</p>\n<p>Are we saying that the term <code>x</code> is a proof of Prop <code>x=x</code> because of the <strong>definition</strong> of <code>=</code>, and we're using one of the constructors of the definition of <code>=</code> to resolve the goal.</p>\n<p>Have I got it right?</p>",
        "id": 502805352,
        "sender_full_name": "rzeta0",
        "timestamp": 1740877390
    },
    {
        "content": "<p>to be clear, I'm not saying the term <code>x</code> is a proof of Prop <code>x=x</code>... I'm saying that <code>Eq.refl x</code> is a proof of Prop <code>x=x</code></p>",
        "id": 502805517,
        "sender_full_name": "Matt Diamond",
        "timestamp": 1740877523
    },
    {
        "content": "<p>similar to the way that <code>Nonempty.intro 3</code> is a proof of <code>Nonempty ℕ</code></p>",
        "id": 502805670,
        "sender_full_name": "Matt Diamond",
        "timestamp": 1740877650
    },
    {
        "content": "<p>or in the way that <code>Nat.succ 0</code> is a term of type <code>ℕ</code>... remember that a proof is just a term of a specific Prop, and when you write <code>Nat.succ 0</code> you're just using the <code>Nat.succ</code> constructor to create a term of ℕ, much like you use the <code>Eq.refl</code> constructor to create a term of <code>x = x</code> (for some <code>x</code>)</p>",
        "id": 502805873,
        "sender_full_name": "Matt Diamond",
        "timestamp": 1740877792
    },
    {
        "content": "<p>As some more info, the symbol <code>=</code> is defined in Lean and is not builtin. It's a type like any other which has specific ways of constructing elements for it.</p>\n<p>In Lean, <code>=</code> is notation for the type <code>Eq</code> and you can see its definition <a href=\"https://github.com/leanprover/lean4/blob/93d4ae6635c0c755c9f7368f9b99483d4557b7a6/src/Init/Prelude.lean#L252-L282\">here</a>. So writing <code>x = x</code> is the same as writing <code>Eq x x</code>. </p>\n<p>The way that <code>Eq</code> is defined, there is only one way to create elements of it. For any term <code>a</code> of type <code>α</code>, the constructor <code>Eq.refl a</code> is an element of type <code>Eq a a</code> (aka <code>a = a</code>).</p>",
        "id": 502805965,
        "sender_full_name": "Eric Paul",
        "timestamp": 1740877845
    },
    {
        "content": "<p>Thanks again Matt  and Eric and Aaron - this is helpful.</p>\n<p>And thanks or your patience, I am a bit slow with learning this.</p>",
        "id": 502808386,
        "sender_full_name": "rzeta0",
        "timestamp": 1740880054
    }
]