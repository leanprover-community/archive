[
    {
        "content": "<p>I am working on a proof where I need quite a lot of commutative squares of commutative algebras (or fields, to be more specific). I also need to glue these squares together, or for example say that a certain morphism in the square is already a given one. The most succinct way to write a square in a category seems to be to write</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">CategoryTheory</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Category</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">]</span>\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Square</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>But then Lean complains if I want to do the following:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"n\">Y</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">⟶</span><span class=\"w\"> </span><span class=\"n\">Y</span><span class=\"o\">)</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"bp\">.</span><span class=\"n\">f₁₂</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>I can fix this  by replacing the <code>f</code> by <code>Arrow.mk f</code>, but as soon as I start trying to glue squares together (by using <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/CategoryTheory/Square.html#CategoryTheory.Square.commSq\">CategoryTheory.Square.commSq</a> and <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/CategoryTheory/CommSq.html#CategoryTheory.CommSq.horiz_comp\">CategoryTheory.CommSq.horiz_comp</a>), I start running into issues by morphisms not being definitionally equal. Is there a good way to work with horizontally/vertically composing squares in <code>CategoryTheory.Square</code>, or is it better to just work in the context of <code>CategoryTheory.CommSq</code>?</p>",
        "id": 558986393,
        "sender_full_name": "Dion Leijnse",
        "timestamp": 1763975683
    },
    {
        "content": "<p>The right API for this is <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/CategoryTheory/CommSq.html\">https://leanprover-community.github.io/mathlib4_docs/Mathlib/CategoryTheory/CommSq.html</a> for which the objects and morphisms are parameters to the <code>CommSq</code> structure, rather than fields. See <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/CategoryTheory/Limits/Shapes/Pullback/CommSq.html#CategoryTheory.IsPullback.paste_vert\">https://leanprover-community.github.io/mathlib4_docs/Mathlib/CategoryTheory/Limits/Shapes/Pullback/CommSq.html#CategoryTheory.IsPullback.paste_vert</a> for examples of statements about pasting squares.</p>",
        "id": 559000500,
        "sender_full_name": "Joël Riou",
        "timestamp": 1763979396
    },
    {
        "content": "<p>Thanks!</p>",
        "id": 559004258,
        "sender_full_name": "Dion Leijnse",
        "timestamp": 1763980352
    }
]