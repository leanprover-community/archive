[
    {
        "content": "<p>I tested the following in a fresh file.<br>\nIt seems <code>Repr</code> class is not implemented for <code>Int16</code></p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"c1\">-- instance : Repr Int16 := inferInstance -- this command fails</span>\n</code></pre></div>\n<p>but still the following commands work.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">abc</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Int16</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"mi\">1</span>\n<span class=\"bp\">#</span><span class=\"n\">print</span><span class=\"w\"> </span><span class=\"n\">abc</span>\n<span class=\"bp\">#</span><span class=\"n\">eval</span><span class=\"w\"> </span><span class=\"n\">abc</span>\n<span class=\"bp\">#</span><span class=\"n\">eval</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">IO</span><span class=\"bp\">.</span><span class=\"n\">println</span><span class=\"w\"> </span><span class=\"n\">s!</span><span class=\"s2\">\"{abc}\"</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>These commands rely on <code>Repr</code> class, am I right? I am curious what is happening here.</p>\n<ol start=\"2\">\n<li>I would like to have <code>Repr</code> instance for <code>Int16</code> so that other structures that use <code>Int16</code> can use <code>deriving Repr</code> command. Below is what I tried - does it look right?</li>\n</ol>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Repr</span><span class=\"w\"> </span><span class=\"n\">Int16</span><span class=\"w\"> </span><span class=\"kn\">where</span><span class=\"w\"> </span><span class=\"n\">reprPrec</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">&gt;=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"n\">reprPrec</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"bp\">.</span><span class=\"n\">toUInt16</span><span class=\"w\"> </span><span class=\"k\">else</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"s2\">\"-\"</span><span class=\"w\"> </span><span class=\"bp\">++</span><span class=\"w\"> </span><span class=\"n\">reprPrec</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">-</span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">toUInt16</span><span class=\"w\"> </span><span class=\"bp\">·</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 492592589,
        "sender_full_name": "Youngju Song",
        "timestamp": 1736374741
    },
    {
        "content": "<p><code>#eval</code> falls back to <code>ToString</code> if it can't find <code>ToExpr</code> or <code>Repr</code> instances</p>",
        "id": 492600596,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1736379071
    },
    {
        "content": "<p><code>s!\"{abc}</code> does not use <code>Repr</code>, it uses <code>ToString</code></p>",
        "id": 492600650,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1736379109
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"306601\">@Kyle Miller</span>  Aha, thanks! That makes sense. <br>\nDo you think <code>Repr Int16</code> is intentionally omitted for some reason in Std? If not, would it worth making a PR to add these?</p>",
        "id": 492629514,
        "sender_full_name": "Youngju Song",
        "timestamp": 1736397039
    },
    {
        "content": "<p>I don't think I can comment on that — I imagine it's not intentionally omitted though. (<span class=\"user-mention\" data-user-id=\"110087\">@Kim Morrison</span>?)</p>",
        "id": 492630501,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1736397643
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"748258\">Youngju Song</span> has marked this topic as resolved.</p>",
        "id": 492998192,
        "sender_full_name": "Notification Bot",
        "timestamp": 1736531537
    }
]