[
    {
        "content": "<p>I am interested in proving a few simple things about the floor and ceiling functions.</p>\n<p>In mathlib there is a function/proof that the floor exists called <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Data/Real/Archimedean.html#Real.exists_floor\">Real.exists_floor</a>.</p>\n<p>I have done straightforward task of showing that this floor is unique and now I want to turn this into a function.  What follows is minimal working example.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">exists_unique_floor</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">):</span><span class=\"w\"> </span><span class=\"bp\">∃!</span><span class=\"w\"> </span><span class=\"n\">ub</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ub</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">z</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">z</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">z</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">ub</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">rcases</span><span class=\"w\"> </span><span class=\"n\">Real</span><span class=\"bp\">.</span><span class=\"n\">exists_floor</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">fl</span><span class=\"o\">,</span><span class=\"bp\">⟨</span><span class=\"n\">hfl0</span><span class=\"o\">,</span><span class=\"n\">hfl1</span><span class=\"bp\">⟩⟩</span>\n<span class=\"w\">  </span><span class=\"n\">use</span><span class=\"w\"> </span><span class=\"n\">fl</span>\n<span class=\"w\">  </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">And</span><span class=\"bp\">.</span><span class=\"n\">intro</span>\n<span class=\"w\">  </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">hfl0</span><span class=\"o\">,</span><span class=\"n\">hfl1</span><span class=\"bp\">⟩</span>\n<span class=\"w\">  </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">hy0</span><span class=\"o\">,</span><span class=\"n\">hy1</span><span class=\"bp\">⟩</span>\n<span class=\"w\">  </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">le_antisymm</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hfl1</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"n\">hy0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hy1</span><span class=\"w\"> </span><span class=\"n\">fl</span><span class=\"w\"> </span><span class=\"n\">hfl0</span><span class=\"o\">)</span>\n\n<span class=\"c1\">--noncomputable?</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">myFloor</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n<span class=\"w\">  </span><span class=\"c1\">--choose i using Real.exists_floor x doesn't work</span>\n<span class=\"w\">  </span><span class=\"c1\">--what do I do here?</span>\n</code></pre></div>",
        "id": 494708273,
        "sender_full_name": "Kent Van Vels",
        "timestamp": 1737341924
    },
    {
        "content": "<p>Just to be clear, you want to use your own lemma here and not the existing integer Floor function (i.e. <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Int.floor#doc\">docs#Int.floor</a>) in mathlib, right?</p>",
        "id": 494708647,
        "sender_full_name": "Matt Diamond",
        "timestamp": 1737342205
    },
    {
        "content": "<p>Well... I will use those.  But I didn't know about them.   <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span></p>\n<p>Even so, I still would like to know if it is possible to turn a \"exists_unique\" into a function somehow.</p>",
        "id": 494708903,
        "sender_full_name": "Kent Van Vels",
        "timestamp": 1737342407
    },
    {
        "content": "<p>Sure... you can write <code>(exists_unique_floor x).choose</code> and mark the function as <code>noncomputable</code></p>",
        "id": 494709072,
        "sender_full_name": "Matt Diamond",
        "timestamp": 1737342558
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Exists.choose#doc\">docs#Exists.choose</a> and <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Exists.choose_spec#doc\">docs#Exists.choose_spec</a> are available whenever you want to pick a value from an Exists statement</p>",
        "id": 494709185,
        "sender_full_name": "Matt Diamond",
        "timestamp": 1737342636
    },
    {
        "content": "<p>Ok.  Thank you!  I appreciate it and I appreciate the tip on the existing (ha) functions.</p>",
        "id": 494709219,
        "sender_full_name": "Kent Van Vels",
        "timestamp": 1737342673
    },
    {
        "content": "<p>no problem!</p>",
        "id": 494709428,
        "sender_full_name": "Matt Diamond",
        "timestamp": 1737342781
    }
]