[
    {
        "content": "<p>For the following Lean 4 code using <code>toJson</code> that creates a JSON object, was hoping that the JSON object keys</p>\n<ul>\n<li><code>lhs</code></li>\n<li><code>rhs</code></li>\n</ul>\n<p>would be displayed in the same order as defined in the <code>Expr</code> structure when using <code>#eval </code> <br>\nResult:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"o\">{</span><span class=\"s2\">\"rhs\"</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"s2\">\"b\"</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"s2\">\"lhs\"</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"s2\">\"a\"</span><span class=\"o\">}</span>\n</code></pre></div>\n<p>Desired result:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"o\">{</span><span class=\"s2\">\"lhs\"</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"s2\">\"a\"</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"s2\">\"rhs\"</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"s2\">\"b\"</span><span class=\"w\"> </span><span class=\"o\">}</span>\n</code></pre></div>\n<p>At present more curious as to why/where the code is that decides. <br>\nI am sure the code is in <br>\n<a href=\"https://github.com/leanprover/lean4/blob/master/src/Lean/Data/Json/FromToJson.lean\">https://github.com/leanprover/lean4/blob/master/src/Lean/Data/Json/FromToJson.lean</a><br>\nand specifically<br>\n<a href=\"https://github.com/leanprover/lean4/blob/master/src/Lean/Data/Json/FromToJson.lean#L143-L144\">https://github.com/leanprover/lean4/blob/master/src/Lean/Data/Json/FromToJson.lean#L143-L144</a></p>\n<p>Not currently looking to create code but may in the future  if needed.</p>\n<p>However if someone can show simple example or existing code similar to what is needed would make life easier.</p>\n<p><a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a></p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">Data</span><span class=\"bp\">.</span><span class=\"n\">Json</span><span class=\"w\">    </span><span class=\"c1\">-- ToJson</span>\n\n<span class=\"kn\">structure</span><span class=\"w\"> </span><span class=\"n\">Expr</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">lhs</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">String</span>\n<span class=\"w\">  </span><span class=\"n\">rhs</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">String</span>\n<span class=\"n\">deriving</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">ToJson</span>\n\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"w\"> </span><span class=\"n\">lhs</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"s2\">\"a\"</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">rhs</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"s2\">\"b\"</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Expr</span><span class=\"w\"> </span><span class=\"o\">}</span><span class=\"w\">                                    </span><span class=\"c1\">-- { lhs := \"a\", rhs := \"b\" } : Expr</span>\n\n<span class=\"bp\">#</span><span class=\"n\">eval</span><span class=\"w\"> </span><span class=\"n\">IO</span><span class=\"bp\">.</span><span class=\"n\">println</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">toJson</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"w\"> </span><span class=\"n\">lhs</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"s2\">\"a\"</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">rhs</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"s2\">\"b\"</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Expr</span><span class=\"w\"> </span><span class=\"o\">})</span><span class=\"bp\">.</span><span class=\"n\">pretty</span><span class=\"w\">     </span><span class=\"c1\">-- {\"rhs\": \"b\", \"lhs\": \"a\"}</span>\n</code></pre></div>\n<hr>\n<p>Developing on Windows 11 with VSCode and Lean 4 extension.</p>\n<hr>\n<hr>\n<p>Answering my own question.</p>\n<p>After seeing the use of RBNode, ran that code down which lead to C++ code. At present I do not know if or how to find such code using VSCode from a context menu or command so ran the code down manually the old school way.</p>\n<p>Since many recursive functions will just reverse the items in the list when processing created a larger example structure to test.  </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">Data</span><span class=\"bp\">.</span><span class=\"n\">Json</span><span class=\"w\">    </span><span class=\"c1\">-- ToJson</span>\n\n<span class=\"kn\">structure</span><span class=\"w\"> </span><span class=\"n\">Test_structure_2</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">item_1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">String</span>\n<span class=\"w\">  </span><span class=\"n\">item_2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">String</span>\n<span class=\"w\">  </span><span class=\"n\">item_3</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">String</span>\n<span class=\"w\">  </span><span class=\"n\">item_4</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">String</span>\n<span class=\"w\">  </span><span class=\"n\">item_5</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">String</span>\n<span class=\"w\">  </span><span class=\"n\">item_6</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">String</span>\n<span class=\"n\">deriving</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">ToJson</span>\n\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"w\"> </span><span class=\"n\">item_1</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"s2\">\"a\"</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">item_2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"s2\">\"b\"</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">item_3</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"s2\">\"c\"</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">item_4</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"s2\">\"d\"</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">item_5</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"s2\">\"e\"</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">item_6</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"s2\">\"f\"</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Test_structure_2</span><span class=\"w\"> </span><span class=\"o\">}</span>\n\n<span class=\"c\">/-</span>\n<span class=\"cm\">{ item_1 := \"a\", item_2 := \"b\", item_3 := \"c\", item_4 := \"d\", item_5 := \"e\", item_6 := \"f\" } : Test_structure_2</span>\n<span class=\"cm\">-/</span>\n\n<span class=\"bp\">#</span><span class=\"n\">eval</span><span class=\"w\"> </span><span class=\"n\">IO</span><span class=\"bp\">.</span><span class=\"n\">println</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">toJson</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"w\"> </span><span class=\"n\">item_1</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"s2\">\"a\"</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">item_2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"s2\">\"b\"</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">item_3</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"s2\">\"c\"</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">item_4</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"s2\">\"d\"</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">item_5</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"s2\">\"e\"</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">item_6</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"s2\">\"f\"</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Test_structure_2</span><span class=\"w\"> </span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">pretty</span>\n\n<span class=\"c\">/-</span>\n<span class=\"cm\">{\"item_6\": \"f\",</span>\n<span class=\"cm\"> \"item_5\": \"e\",</span>\n<span class=\"cm\"> \"item_4\": \"d\",</span>\n<span class=\"cm\"> \"item_3\": \"c\",</span>\n<span class=\"cm\"> \"item_2\": \"b\",</span>\n<span class=\"cm\"> \"item_1\": \"a\"}</span>\n<span class=\"cm\">-/</span>\n</code></pre></div>",
        "id": 498126859,
        "sender_full_name": "Eric Taucher",
        "timestamp": 1738850314
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"366057\">Eric Taucher</span> has marked this topic as resolved.</p>",
        "id": 498139062,
        "sender_full_name": "Notification Bot",
        "timestamp": 1738853447
    }
]