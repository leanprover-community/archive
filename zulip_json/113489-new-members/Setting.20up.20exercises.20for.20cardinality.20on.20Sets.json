[
    {
        "content": "<p>Hi all, I'm exploring a template for exercises about cardinality on sets.  My goal has shifted from \"staying as close to the learning material as possible (which like most math resources use set theory)\" over to \"use Mathlib to the extent possible without frying people's brains, my own included\".  To that end, if possible, I think it would be good to use a template.  This was my first stab at it, but I don't like it</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Cardinal</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n\n<span class=\"kn\">noncomputable</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">bijection</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">↑</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">≃</span><span class=\"w\"> </span><span class=\"bp\">↑</span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">card_a_eq_card_b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">mk_congr</span><span class=\"w\"> </span><span class=\"n\">bijection</span>\n</code></pre></div>\n<p>So, after more experimenting, found what seems to be a less noisy approach:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">namespace</span><span class=\"w\"> </span><span class=\"n\">Template</span>\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Function</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">Cardinal</span>\n<span class=\"c1\">-- 3(a) Let A and B be two disjoint, countably infinite sets. Prove that A ∪ B is</span>\n<span class=\"c1\">-- countably infinite.</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">Even</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"o\">}</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">Odd</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">}</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">∪</span><span class=\"w\"> </span><span class=\"n\">B</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">ℵ₀</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Infinite</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">    </span><span class=\"c1\">-- this looks like a promising route.</span>\n<span class=\"w\">    </span><span class=\"gr\">sorry</span>\n<span class=\"w\">  </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">mk_eq_aleph0</span><span class=\"w\"> </span><span class=\"bp\">↑</span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"c1\">-- scary?</span>\n\n<span class=\"kn\">end</span><span class=\"w\"> </span><span class=\"n\">Template</span>\n</code></pre></div>\n<p>Maybe someone has a better idea for how to introduce cardinality to people who are just getting their toes wet with Mathlib?  I'd also like to see any documentation about it.  \"The Mechanics of Proof\" stops short of it. \"Formalizing Math\" doesn't seem to cover it. \"Mathematics in Lean\" mentions it <a href=\"https://leanprover-community.github.io/mathematics_in_lean/C04_Sets_and_Functions.html#the-schroder-bernstein-theorem\">in passing</a>, \"How to Prove it\" doesn't cover it. Did I miss any, are there any other math focused lean4 books?</p>",
        "id": 491906248,
        "sender_full_name": "Derek Rhodes",
        "timestamp": 1736023267
    },
    {
        "content": "<p>How To Prove It With Lean does cover cardinality, but not by using anything in Mathlib.  Rather, it defines everything from scratch.  It includes the following theorems: a countable union of countable sets is countable, the power set of the natural numbers is uncountable, and the Cantor-Schroeder-Bernstein theorem.</p>",
        "id": 491906959,
        "sender_full_name": "Dan Velleman",
        "timestamp": 1736023992
    },
    {
        "content": "<p>I guess I'm really looking for how to do it with the Mathlib structures, for whatever reason it seems like there is a cliff in abstraction at cardinality. I'm have trouble finding a path to Bijection from <code>#C = ℵ₀</code>  Maybe there is a lemma <code>.._iff_..</code> to Bijection specialized for Set.</p>",
        "id": 491907634,
        "sender_full_name": "Derek Rhodes",
        "timestamp": 1736024546
    },
    {
        "content": "<p>I'm not sure if this is an artifact of making a MWE, but in exercise 3(a) you're not allowed to choose your own disjoint countably infinite sets — you're supposed to prove this for <em>arbitrary</em> ones.</p>",
        "id": 491907912,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1736024788
    },
    {
        "content": "<p>Yep :) I was just doing a concrete example to get started</p>",
        "id": 491907947,
        "sender_full_name": "Derek Rhodes",
        "timestamp": 1736024824
    },
    {
        "content": "<p>That's going to potentially be very misleading, since with your choice <code>C</code> is <code>Set.univ</code>. You don't want to accidentally use any specific properties of your choices.</p>",
        "id": 491908051,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1736024920
    },
    {
        "content": "<p>If you want to encode countably infinite using cardinality, here's something to get started with:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hDisj</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">∩</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">∅</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">hA</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">ℵ₀</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hB</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">ℵ₀</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">ℵ₀</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n</code></pre></div>",
        "id": 491908061,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1736024934
    },
    {
        "content": "<p>Thank you, that's helpful, but the hurdle I'm currently facing is cracking the <code>#C = ℵ₀</code> into a Bijection.</p>",
        "id": 491908316,
        "sender_full_name": "Derek Rhodes",
        "timestamp": 1736025168
    },
    {
        "content": "<p>Have you tried setting up an <code>example</code> with the givens and what you want and using <code>exact?</code> ?</p>",
        "id": 491908504,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1736025307
    },
    {
        "content": "<p>yeah, <code>exact?</code>, <code>apply?</code>, which offers a flood of avenues to explore.</p>",
        "id": 491908555,
        "sender_full_name": "Derek Rhodes",
        "timestamp": 1736025359
    },
    {
        "content": "<p>None of them are particularly beginner friendly, with Bijection, which people would be familiar with.</p>",
        "id": 491908633,
        "sender_full_name": "Derek Rhodes",
        "timestamp": 1736025408
    },
    {
        "content": "<p>(It looks like <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Cardinal.eq#doc\">docs#Cardinal.eq</a> is how you're supposed to go from equal cardinalities to equivalent types.)</p>",
        "id": 491908980,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1736025696
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">ℵ₀</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nonempty</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">≃</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">Cardinal</span><span class=\"bp\">.</span><span class=\"n\">mk_nat</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Cardinal</span><span class=\"bp\">.</span><span class=\"n\">eq</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">h</span>\n<span class=\"w\">  </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">h</span>\n</code></pre></div>",
        "id": 491909193,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1736025857
    },
    {
        "content": "<p>That looks really promising, a good place to start hacking. Thank you.</p>",
        "id": 491909375,
        "sender_full_name": "Derek Rhodes",
        "timestamp": 1736025983
    },
    {
        "content": "<p>Quick question that I think pertains to Derek's message prior to this. When I use <code>apply?</code> , I don't typically get suggestions for tactics that I want to use at least for my current level. Is there another command that lets me suggest commands that specifically apply to a certain library such as giving me a display of  theorems in Cardinal for example without consulting the docs in the browser or using something like Lean Copilot? I'm just curious if there was an option in the editor that already exists</p>",
        "id": 491914114,
        "sender_full_name": "Marco Campos",
        "timestamp": 1736029834
    },
    {
        "content": "<p>Note that <code>exact?</code>, <code>apply?</code>, <code>rw?</code> all look for <em>theorems</em> that work with the tactic with the <code>?</code> stripped - they don't look for <em>tactics</em>. <code>hint</code> is an example of a tactic that looks for other <em>tactics</em> to try.</p>",
        "id": 491915558,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1736031279
    },
    {
        "content": "<p>Possibly</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">#</span><span class=\"n\">loogle</span><span class=\"w\"> </span><span class=\"n\">Cardinal</span>\n</code></pre></div>\n<p>is helpful?</p>",
        "id": 491915580,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1736031313
    }
]