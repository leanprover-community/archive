[
    {
        "content": "<p>Hi all, I've hit kind of an oddity. Lean says it's having trouble <code>synthesizing</code> when I use the identifier <code>A'</code> instead of the expression it defines.  Is there something I could add to the <code>def A' := ...</code>, such as a type ascription that would help? </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n<span class=\"kn\">set_option</span><span class=\"w\"> </span><span class=\"n\">autoImplicit</span><span class=\"w\"> </span><span class=\"n\">false</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">F</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">LinearOrderedField</span><span class=\"w\"> </span><span class=\"n\">F</span><span class=\"o\">]</span>\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">F</span><span class=\"o\">)</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">F</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">-</span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n<span class=\"c1\">-- ... no red squiggles       ^^^^^^^^^^^^^^^^^^^^^</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">A'</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"o\">}</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">F</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">-</span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">A'</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n<span class=\"c1\">-- ??? red squiggles          ^^^^^^^^^</span>\n</code></pre></div>\n<p>To be clear, I'm trying to create a label <code>A'</code> for <code>{ -a | a ∈ A }</code>, and then save some typing by using <code>A'</code> instead of  <code>{ -a | a ∈ A }</code>.</p>",
        "id": 485685749,
        "sender_full_name": "Derek Rhodes",
        "timestamp": 1733164410
    },
    {
        "content": "<p>Try hovering over <code>A'</code> to see its type</p>",
        "id": 485686785,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1733164796
    },
    {
        "content": "<p>When you introduce <code>variable</code>s, they add parameters per new definition, but they don't carry over across definitions as if they were local constants.</p>",
        "id": 485686912,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1733164825
    },
    {
        "content": "<p>There's a trick where you can write <code>local notation \"A'\" =&gt; { -a | a ∈ A }</code> to have a new notation <code>A'</code> that represents a more complicated term using <code>variable</code>s</p>",
        "id": 485687240,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1733164942
    },
    {
        "content": "<p>Alright, so the <code>def</code> isn't picking up something like the <code>LinearOrderedField'edness</code> of <code>A</code>. I'll try to see that in the type.</p>",
        "id": 485687285,
        "sender_full_name": "Derek Rhodes",
        "timestamp": 1733164962
    },
    {
        "content": "<p><code>notation</code> it is, thanks Kyle</p>",
        "id": 485687334,
        "sender_full_name": "Derek Rhodes",
        "timestamp": 1733164986
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"317929\">Derek Rhodes</span> has marked this topic as resolved.</p>",
        "id": 485687346,
        "sender_full_name": "Notification Bot",
        "timestamp": 1733164992
    },
    {
        "content": "<p>Notice that the <code>A'</code> definition is a function of <code>F</code> and <code>A</code>, so you have to write <code>A' F A</code> to use it.</p>",
        "id": 485687403,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1733165017
    },
    {
        "content": "<p>Oh! I see now. thanks again :)</p>",
        "id": 485687610,
        "sender_full_name": "Derek Rhodes",
        "timestamp": 1733165097
    },
    {
        "content": "<p>you might be interested in <code>open Pointwise</code>, to use <code>-A</code></p>",
        "id": 485688712,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1733165489
    },
    {
        "content": "<p>I'll check it out, thanks for the idea Edward.</p>",
        "id": 485689034,
        "sender_full_name": "Derek Rhodes",
        "timestamp": 1733165614
    }
]