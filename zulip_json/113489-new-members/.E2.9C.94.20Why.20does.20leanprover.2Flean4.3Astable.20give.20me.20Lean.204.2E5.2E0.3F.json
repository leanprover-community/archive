[
    {
        "content": "<p>One one of my computers, if lean-toolchain contains</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">leanprover</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"o\">:</span><span class=\"n\">stable</span>\n</code></pre></div>\n<p>then <code>lake</code> runs Lean 4.5:</p>\n<blockquote>\n<p>$ lake --version<br>\nLake version 5.0.0-1a3021f (Lean version 4.5.0)</p>\n</blockquote>\n<p>I can get 4.12.0 and 4.13.0 by specifying them explicitly:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">leanprover</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"o\">:</span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">13</span><span class=\"bp\">.</span><span class=\"m\">0</span>\n</code></pre></div>\n<p>I've tried deleting .lake .  Not sure whether that would help.</p>\n<p>Any idea about what might be wrong with my configuration?</p>",
        "id": 481194418,
        "sender_full_name": "mars0i",
        "timestamp": 1731011116
    },
    {
        "content": "<p>lake update</p>",
        "id": 481195390,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1731011517
    },
    {
        "content": "<p>But it is also possible that there was an issue with older toolchains so it might help to run <code>elan update</code> once</p>",
        "id": 481195535,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1731011572
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"466334\">@Shreyas Srinivas</span>.  Forgot to mention I'd already done <code>lake update</code>, and tried again.  <code>elan update</code> was what I needed.</p>",
        "id": 481196073,
        "sender_full_name": "mars0i",
        "timestamp": 1731011781
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"617444\">mars0i</span> has marked this topic as resolved.</p>",
        "id": 481196081,
        "sender_full_name": "Notification Bot",
        "timestamp": 1731011785
    },
    {
        "content": "<p>Putting <code>stable</code> in <code>lean-toolchain</code> makes your project unstable</p>",
        "id": 481218546,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1731023877
    },
    {
        "content": "<p>No. It doesn't</p>",
        "id": 481218612,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1731023901
    },
    {
        "content": "<p>It just pegs your toolchain to the stable toolchain elan installed</p>",
        "id": 481218647,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1731023928
    },
    {
        "content": "<p>This is the default config for new non-math lake projects</p>",
        "id": 481218679,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1731023959
    },
    {
        "content": "<p>That seems fairly unwise considering what toolchain that is changes over time, does it not? (Presumably that's what Eric's quip was.)</p>",
        "id": 481218682,
        "sender_full_name": "Julian Berman",
        "timestamp": 1731023961
    },
    {
        "content": "<p><code>lake new</code>'s default seems like it is \"the toolchain which is stable at the moment\", rather than literally <code>:stable</code>.</p>",
        "id": 481218805,
        "sender_full_name": "Julian Berman",
        "timestamp": 1731024005
    },
    {
        "content": "<p>I mean that's true, but if you are keeping up to date via lake update you have the same issue</p>",
        "id": 481218841,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1731024016
    },
    {
        "content": "<p>lake update behaves differently in non math projects</p>",
        "id": 481218903,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1731024051
    },
    {
        "content": "<p>In math projects, one can pick to update to only stable toolchains by choosing the mathlib dependencyref</p>",
        "id": 481219146,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1731024140
    },
    {
        "content": "<p>For non math projects ,stable is the toolchain that elan has</p>",
        "id": 481219291,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1731024242
    },
    {
        "content": "<p>Unless you run elan update, it stays the same</p>",
        "id": 481219327,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1731024251
    },
    {
        "content": "<p>This discussion is providing very helpful clarification for me.  (I thought I was supposed to avoid elan for the most part, but this seems like a reasonable use.  However, now I think I'll avoid <code>stable</code> though and update version numbers myself.)</p>\n<p>And now I'm confused about updating with mathlib.  Not using it at present, but I will in the future.</p>",
        "id": 481246164,
        "sender_full_name": "mars0i",
        "timestamp": 1731044804
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"466334\">Shreyas Srinivas</span> <a href=\"#narrow/stream/113489-new-members/topic/.E2.9C.94.20Why.20does.20leanprover.2Flean4.3Astable.20give.20me.20Lean.204.2E5.2E0.3F/near/481219291\">said</a>:</p>\n<blockquote>\n<p>For non math projects ,stable is the toolchain that elan has</p>\n</blockquote>\n<p>Great, so can you tell me what version that means on my machine? The whole point in lean-toolchain is to pin the version so that anyone (including future you) can open your project and automatically get a working version without having to manually install the right version of elan/Lean/etc.</p>",
        "id": 481250544,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1731048032
    },
    {
        "content": "<p>That makes sense. I agree that we need to pin the toolchain. I hope we find a different way to allow updates from stable toolchain to stable toolchain for projects with no dependency.</p>",
        "id": 481275080,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1731058495
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 481344795,
        "sender_full_name": "mars0i",
        "timestamp": 1731082258
    }
]