[
    {
        "content": "<p>Hello,</p>\n<p>Sometimes, <code>simp [thm]</code> fails, but <code>rw [thm]</code> succeeds. Other times, when I add a thm to the simp set via <code>@[simp]</code> it fails to rewrite with it with just <code>simp</code>. Sometimes I need to use <code>simp_rw [thm]</code> when neither <code>simp [thm]</code> nor <code>rw [thm]</code> works. Sometimes <code>simp [thm]</code> fails but <code>simp [thm (param:=arg)</code> succeeds.</p>\n<p>I understand that this is a broad question, but why is this?</p>\n<p>I am especially confused with <code>simp</code> fails to use something in the <code>simp</code> set via <code>@[simp]</code>, and when <code>rw [thm]</code> succeeds but <code>simp [thm]</code> fails...</p>\n<p>Thanks!</p>",
        "id": 553490972,
        "sender_full_name": "Rudy Peterson",
        "timestamp": 1762208219
    },
    {
        "content": "<p>If your theorem requires hypotheses, then <code>rw</code> will apply it and generate goals for the side conditions, but <code>simp</code> and <code>simp_rw</code> won't do that.</p>",
        "id": 553491997,
        "sender_full_name": "Etienne Marion",
        "timestamp": 1762208751
    },
    {
        "content": "<p>What if the theorem is of the form:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">thm</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">param_1</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"bp\">...</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">param_n</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"bp\">&lt;-&gt;</span><span class=\"w\"> </span><span class=\"n\">Q</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"bp\">...</span>\n</code></pre></div>",
        "id": 553492104,
        "sender_full_name": "Rudy Peterson",
        "timestamp": 1762208808
    },
    {
        "content": "<p><code>simp</code> will not rewrite arguments that are dependent, but <code>rw</code> will do it</p>",
        "id": 553492878,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1762209225
    },
    {
        "content": "<p>since <code>simp</code> does the rewriting piecewise one at a time and every intermediate step has to typecheck, but <code>rw</code> substitutes all at once and then checks type correctness after, so sometimes <code>rw</code> can be more powerful than <code>simp</code></p>",
        "id": 553493009,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1762209289
    },
    {
        "content": "<p>Sometimes, when I invoke <code>simp [thm]</code>, it will rewrite with <code>thm</code> in one instance, but not for others, and then I need to manually also do <code>simp [thm (param:=arg)]</code></p>",
        "id": 553493829,
        "sender_full_name": "Rudy Peterson",
        "timestamp": 1762209669
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> <a href=\"#narrow/channel/113489-new-members/topic/simp.20fails.20but.20rw.20succeeds/near/553492878\">said</a>:</p>\n<blockquote>\n<p><code>simp</code> will not rewrite arguments that are dependent, but <code>rw</code> will do it</p>\n</blockquote>\n<p>Interesting, thanks that's good to know! <del>I don't think I have run into this issue yet...</del></p>\n<p>Ah I have, but that's not the only place I guess...</p>",
        "id": 553494019,
        "sender_full_name": "Rudy Peterson",
        "timestamp": 1762209757
    }
]