[
    {
        "content": "<p>I ran into the following unexpected-to-me behavior:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">inductive</span><span class=\"w\"> </span><span class=\"n\">Foo</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">Unit</span>\n\n<span class=\"c1\">-- type mismatch: argument Unit has type Foo : Type but expected Type α : Type (α + 1)</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Foo</span><span class=\"bp\">.</span><span class=\"n\">foo</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Option</span><span class=\"w\"> </span><span class=\"n\">Unit</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">()</span>\n</code></pre></div>\n<p>I would have expected <code>Unit</code> to be resolved as the <code>Unit</code> in the prelude, not <code>Foo.Unit</code>. Clearly, there's something up with the <code>Foo.</code> prefix on the <code>def</code> that I didn't know about -- I thought it was just a namespacing sorta thing, but that seems to not be the case. What is up here with the <code>declId</code> and what does my code currently do? I went hunting in the reference, but could not find it documented. </p>\n<p>(It's probably there and I'm just missing it, but it's a bit hard to search for.)</p>",
        "id": 535420838,
        "sender_full_name": "JJ",
        "timestamp": 1755745923
    },
    {
        "content": "<p>It does just do nanespacing, that's why the error happens. Within the deck you are in the Foo namespace so unit resolves as you observe</p>",
        "id": 535435193,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1755756341
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"634325\">@JJ</span> well, arguably there's a \"bad practice\" in the code, which is using capital letter for terms</p>",
        "id": 535444549,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1755761055
    },
    {
        "content": "<p>Ah, but these are types :-D<br>\n(this is part of a dependent typechecker)</p>",
        "id": 535459393,
        "sender_full_name": "JJ",
        "timestamp": 1755766875
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"395550\">Henrik Böving</span> <a href=\"#narrow/stream/113489-new-members/topic/what.20does.20a.20.2E.20in.20a.20def's.20declId.20really.20do.3F/near/535435193\">said</a>:</p>\n<blockquote>\n<p>It does just do nanespacing, that's why the error happens. Within the deck you are in the Foo namespace so unit resolves as you observe</p>\n</blockquote>\n<p>Interesting, huh, weird. So there's an implicit <code>open Foo</code> or something?</p>",
        "id": 535459535,
        "sender_full_name": "JJ",
        "timestamp": 1755766921
    },
    {
        "content": "<p>yeah</p>",
        "id": 535460385,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1755767176
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"634325\">JJ</span> <a href=\"#narrow/channel/113489-new-members/topic/what.20does.20a.20.2E.20in.20a.20def's.20declId.20really.20do.3F/near/535459535\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"395550\">Henrik Böving</span> <a href=\"#narrow/stream/113489-new-members/topic/what.20does.20a.20.2E.20in.20a.20def's.20declId.20really.20do.3F/near/535435193\">said</a>:</p>\n<blockquote>\n<p>It does just do nanespacing, that's why the error happens. Within the deck you are in the Foo namespace so unit resolves as you observe</p>\n</blockquote>\n<p>Interesting, huh, weird. So there's an implicit <code>open Foo</code> or something?</p>\n</blockquote>\n<p>Almost, the syntax</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Foo</span><span class=\"bp\">.</span><span class=\"n\">bar</span><span class=\"w\"> </span><span class=\"bp\">...</span>\n</code></pre></div>\n<p>simply desugars to</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">namespace</span><span class=\"w\"> </span><span class=\"n\">Foo</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">bar</span><span class=\"w\"> </span><span class=\"bp\">...</span>\n\n<span class=\"kn\">end</span><span class=\"w\"> </span><span class=\"n\">Foo</span>\n</code></pre></div>",
        "id": 535474063,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1755772070
    },
    {
        "content": "<p>Hm, okay, I see. I was unaware that <code>namespace T</code> opened the terms of the constructors of <code>T</code>, but that makes sense.</p>",
        "id": 535729968,
        "sender_full_name": "JJ",
        "timestamp": 1755885147
    }
]