[
    {
        "content": "<p>I've learned about simple induction in the MoP course. I really like how its custom <code>simple_induction</code> tactic creates two new goals and an inductive hypothesis.</p>\n<p>But I want to learn to do this in vanilla lean. As has been discussed several times, (1) there seem to be no existing beginner-friendly guides, and (2) the use of an apostrophe for <code>induction'</code> suggests we should be using <code>induction</code> which has different syntax.</p>\n<p>So I started playing around:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"o\">}:</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">induction'</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"n\">hk</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"c1\">-- base case 0 * 0 = 0</span>\n<span class=\"w\">    </span><span class=\"n\">norm_num</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"c1\">-- inductive step 0 * (k + 1) = 0</span>\n<span class=\"w\">    </span><span class=\"n\">norm_num</span>\n</code></pre></div>\n<p>This seems to do what beginner-brained people like me think should happen: </p>\n<ul>\n<li>creates two new goals, the base case and the inductive step</li>\n<li>creates an inductive hypotheses <code>hk : 0 * k = 0</code> as expected</li>\n</ul>\n<p><strong>Question</strong>: what does this proof look like using the <em>official</em> <code>induction</code> tactic? I'd welcome a code snippet and an explanation if possible so I can relate it back to the above conceptual model.</p>\n<p>My apologies, I'm not familiar with the vertical bar <code>|</code> notation and the right arrows <code>=&gt;</code> I've seen in some online resources.</p>",
        "id": 490892087,
        "sender_full_name": "rzeta0",
        "timestamp": 1735228872
    },
    {
        "content": "<p>(You say \"vanilla lean\" but then you're importing Mathlib, so I assume you must not really mean vanilla lean? The answer below continues to assume you're OK using Mathlib).</p>\n<p>Type:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">}:</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">induction</span><span class=\"w\"> </span><span class=\"n\">n</span>\n</code></pre></div>\n<p>and then invoke your editor's code action functionality. In VSCode this is a yellow light bulb that will show up at the bottom line of your proof, and will say \"Generate an explicit pattern match for 'induction'\". Click that, and you get:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">}:</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">induction</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"k\">with</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">zero</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">succ</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>which is saying for the induction principle you're using (the basic default one for natural numbers) the base case is called \"zero\" and the inductive step is called \"succ\" (the names happen to come from the names of the two corresponding constructors of <code>Nat</code>, but if you don't yet know what that is, it's irrelevant, it's just the two steps you are learning).</p>\n<p>Now you can fill in the sorries, changing them to <code>norm_num</code> will give you the exact same proof you have there.</p>",
        "id": 490893105,
        "sender_full_name": "Julian Berman",
        "timestamp": 1735229629
    },
    {
        "content": "<p>Thanks I'll have a play with that.</p>\n<p>(and yes, the distinction between Mathlib and lean is as clear to me as the difference between lemmas and theorems in mathlib!)</p>",
        "id": 490897335,
        "sender_full_name": "rzeta0",
        "timestamp": 1735232707
    },
    {
        "content": "<p>Mathlib is simply a (big, important) library developed by a large group of other people separate -- but with small overlap -- from the ones developing Lean the language, which is what I think \"vanilla lean\" or \"core Lean\" normally would connote. It's the same as most any programming language, there's a standard library and then there's other external libraries, and you either mean to use just what's part of the language itself or else you mean to use some of the third party libraries, here Mathlib.</p>",
        "id": 490900114,
        "sender_full_name": "Julian Berman",
        "timestamp": 1735234644
    },
    {
        "content": "<p>I've had a play and am wondering how to use use new syntax if the sub-proofs require more than one line? </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">}:</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">induction</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"k\">with</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">zero</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">    </span><span class=\"c1\">-- have</span>\n<span class=\"w\">    </span><span class=\"c1\">-- by calc?</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">succ</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">    </span><span class=\"c1\">-- have</span>\n<span class=\"w\">    </span><span class=\"c1\">-- by calc?</span>\n</code></pre></div>\n<p>I can't seem to add a <code>:=</code> or a <code>by calc</code> in those commented sections.</p>\n<p>Also, what do <code>|</code> and  <code>=&gt;</code> actually mean?</p>",
        "id": 490901037,
        "sender_full_name": "rzeta0",
        "timestamp": 1735235407
    },
    {
        "content": "<p>Maybe you're getting the indentation wrong? Doing so definitely can produce strange error messages.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span>\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">}:</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">induction</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"k\">with</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">zero</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">37</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">37</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">rfl</span>\n<span class=\"w\">    </span><span class=\"n\">norm_num</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">succ</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">73</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">73</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">rfl</span>\n<span class=\"w\">    </span><span class=\"n\">norm_num</span>\n</code></pre></div>",
        "id": 490901196,
        "sender_full_name": "Julian Berman",
        "timestamp": 1735235541
    },
    {
        "content": "<p>(Note that when you want to use the inductive hypothesis in the second branch, you should give it a name by writing <code>| succ n ih =&gt;</code> (say) instead of <code>| succ n _ =&gt;</code>.)</p>",
        "id": 490901283,
        "sender_full_name": "Michael Stoll",
        "timestamp": 1735235612
    },
    {
        "content": "<blockquote>\n<p>Also, what do | and =&gt; actually mean?</p>\n</blockquote>\n<p>They're just pieces of syntax of the <code>induction</code> tactic (though of course some other Lean concepts use similar syntax, like the one for defining an inductive type, or a <code>def</code> using the equation compiler, say, neither of which you have likely seen yet). You could perhaps read them as <code>|</code> means \"I'm starting to talk about a new constructor in what I'm matching or inducting on\" and <code>=&gt;</code> is \"here's the body of my proof for this constructor\", just like <code>:=</code> in a theorem, or with a bit of nuance, to <code>\\mapsto</code> in a function.</p>",
        "id": 490901602,
        "sender_full_name": "Julian Berman",
        "timestamp": 1735235835
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"479359\">Michael Stoll</span> <a href=\"#narrow/channel/113489-new-members/topic/induction.20vs.20induction'.20with.20vanilla.20lean4.2Bmathlib/near/490901283\">said</a>:</p>\n<blockquote>\n<p>(Note that when you want to use the inductive hypothesis in the second branch, you should give it a name by writing <code>| succ n ih =&gt;</code> (say) instead of <code>| succ n _ =&gt;</code>.)</p>\n</blockquote>\n<p>I was just about to ask how to access an inductive hypothesis and you explained it!</p>",
        "id": 490901739,
        "sender_full_name": "rzeta0",
        "timestamp": 1735235932
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"724904\">rzeta0</span> <a href=\"#narrow/channel/113489-new-members/topic/induction.20vs.20induction'.20with.20vanilla.20lean4.2Bmathlib/near/490897335\">said</a>:</p>\n<blockquote>\n<p>(and yes, the distinction between Mathlib and lean is as clear to me as the difference between lemmas and theorems in mathlib!)</p>\n</blockquote>\n<p>What do you mean by that?</p>",
        "id": 490903485,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1735237165
    }
]