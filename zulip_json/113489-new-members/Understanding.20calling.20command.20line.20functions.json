[
    {
        "content": "<p>I'm trying to use a command line function and I'm getting a funny error:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">main</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IO</span><span class=\"w\"> </span><span class=\"n\">Unit</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">do</span>\n<span class=\"w\">  </span><span class=\"c1\">-- let test &lt;- IO.FS.readFile \"lakefile.lean\"</span>\n<span class=\"w\">  </span><span class=\"c1\">-- IO.println test</span>\n<span class=\"w\">  </span><span class=\"n\">IO</span><span class=\"bp\">.</span><span class=\"n\">println</span><span class=\"w\"> </span><span class=\"s2\">\"HELLO!\"</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">files</span><span class=\"w\"> </span><span class=\"bp\">&lt;-</span><span class=\"w\"> </span><span class=\"n\">IO</span><span class=\"bp\">.</span><span class=\"n\">Process</span><span class=\"bp\">.</span><span class=\"n\">run</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">cmd</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"s2\">\"ls\"</span><span class=\"o\">}</span>\n<span class=\"w\">  </span><span class=\"n\">IO</span><span class=\"bp\">.</span><span class=\"n\">println</span><span class=\"w\"> </span><span class=\"n\">files</span>\n</code></pre></div>\n<p>And when I run <code>lean .\\Main.lean --run</code> I get:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">HELLO!</span>\n<span class=\"n\">uncaught</span><span class=\"w\"> </span><span class=\"n\">exception</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">no</span><span class=\"w\"> </span><span class=\"n\">such</span><span class=\"w\"> </span><span class=\"n\">file</span><span class=\"w\"> </span><span class=\"n\">or</span><span class=\"w\"> </span><span class=\"n\">directory</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">error</span><span class=\"w\"> </span><span class=\"n\">code</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 459940935,
        "sender_full_name": "Peter Tupoiu",
        "timestamp": 1723408178
    },
    {
        "content": "<p>I was expecting it to just print the results of <code>ls</code>. Looking at <code>IO.lean</code> I expect that means it's unable to detect my current working directory?</p>\n<p>(the <code>IO.FS.readFile</code> works fine, by the way)</p>",
        "id": 459941126,
        "sender_full_name": "Peter Tupoiu",
        "timestamp": 1723408254
    },
    {
        "content": "<p>I don't think that's a standard Windows executable, are you sure it's in your PATH?</p>",
        "id": 460002286,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1723442437
    },
    {
        "content": "<p>And the .exe may be mandatory</p>",
        "id": 460002377,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1723442477
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110024\">Sebastian Ullrich</span> <a href=\"#narrow/stream/113489-new-members/topic/Understanding.20calling.20command.20line.20functions/near/460002286\">said</a>:</p>\n<blockquote>\n<p>I don't think that's a standard Windows executable, are you sure it's in your PATH?</p>\n</blockquote>\n<p>Hi Sebastian,</p>\n<p>I am talking with Nix (not sure of their real name) on the FP discord server about this issue, and apparently there was a fix recently (or at least one to a related issue) in 4.10. The same happened with “dir” and “echo hello” as the commands.</p>\n<p>(edit: Apparently ls is a powershell command)</p>",
        "id": 460003909,
        "sender_full_name": "Peter Tupoiu",
        "timestamp": 1723443058
    },
    {
        "content": "<p><code>dir</code> and <code>echo</code> aren't executables either, on Windows, as standard. They are handled by the interpreter <code>cmd.exe</code> (or by Powershell -- maybe they are provided separately as applets, but I don't know much about that). You could try executing <code>cmd.exe /c \"dir /b\"</code>.</p>",
        "id": 460108102,
        "sender_full_name": "Richard Copley",
        "timestamp": 1723477525
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"400544\">Richard Copley</span> <a href=\"#narrow/stream/113489-new-members/topic/Understanding.20calling.20command.20line.20functions/near/460108102\">said</a>:</p>\n<blockquote>\n<p><code>dir</code> and <code>echo</code> aren't executables either, on Windows, as standard. They are handled by the interpreter <code>cmd.exe</code> (or by Powershell -- maybe they are provided separately as applets, but I don't know much about that). You could try executing <code>cmd.exe /c \"dir /b\"</code>.</p>\n</blockquote>\n<p>Aha - this worked. Little bit arcane, but maybe that is just the price I pay for windows.</p>\n<p>edit:<br>\nFinal code</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">main</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IO</span><span class=\"w\"> </span><span class=\"n\">Unit</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">do</span>\n<span class=\"w\">  </span><span class=\"n\">IO</span><span class=\"bp\">.</span><span class=\"n\">println</span><span class=\"w\"> </span><span class=\"s2\">\"HELLO!\"</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">files</span><span class=\"w\"> </span><span class=\"bp\">&lt;-</span><span class=\"w\"> </span><span class=\"n\">IO</span><span class=\"bp\">.</span><span class=\"n\">Process</span><span class=\"bp\">.</span><span class=\"n\">run</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">cmd</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"s2\">\"powershell.exe /c ls\"</span><span class=\"o\">}</span>\n<span class=\"w\">  </span><span class=\"n\">IO</span><span class=\"bp\">.</span><span class=\"n\">println</span><span class=\"w\"> </span><span class=\"n\">files</span>\n</code></pre></div>",
        "id": 461028239,
        "sender_full_name": "Peter Tupoiu",
        "timestamp": 1723484302
    }
]