[
    {
        "content": "<p>It is surprisingly difficult to find guidance on the internet about creating libraries of lemmas to be used in lean proofs.</p>\n<p><strong>Question:</strong> So I wanted to ask if my summary below is (1) correct, and (2) missing something major?</p>\n<p>Specifically, I am unsure of:</p>\n<ol>\n<li>is it only VSC that recognises the change in makefile.lean and triggers a recompilation?</li>\n<li>does it even trigger a recompilation or does something else happen, eg updating \"header\" files?</li>\n<li>is it true / necessary / good practice to <code>import</code> custom libraries after the official ones?</li>\n</ol>\n<hr>\n<p>There are two key steps.</p>\n<h4>Library</h4>\n<p>In a project’s <code>lakefile.lean</code> file, add a reference to the Lean file which contains your lemmas, as follows:</p>\n<p><code>lean_lib MyLeanLemmas</code></p>\n<p>Replace <code>MyLeanLemmas</code> with the name your chose for your own library.</p>\n<p>If you’re using a Lean enabled editor, the change will be recognised and contents of the library compiled, ready for use.</p>\n<h4>Using A Library</h4>\n<p>To use the lemmas in the <code>MyLeanLemmas</code> library, we simply use <code>import</code> at the top of our lean program.</p>\n<p><code>import Mathlib.Tactic import MyLeanLemmas</code></p>\n<p>Additional libraries should be imported after any official Mathlib libraries.</p>",
        "id": 483372196,
        "sender_full_name": "rzeta0",
        "timestamp": 1732058883
    },
    {
        "content": "<p>If any of the above is incorrect - do let me know.</p>",
        "id": 483557512,
        "sender_full_name": "rzeta0",
        "timestamp": 1732131072
    },
    {
        "content": "<p>I don't understand your first two questions.</p>",
        "id": 483559275,
        "sender_full_name": "Julian Berman",
        "timestamp": 1732131760
    },
    {
        "content": "<p>(I assume <code>makefile</code> is <code>lakefile</code>). Lean / lake / VSCode / any editor all could be said to be usable for compiling or recompiling a Lean project.</p>",
        "id": 483559343,
        "sender_full_name": "Julian Berman",
        "timestamp": 1732131793
    },
    {
        "content": "<p>I don't know whether the style guide says anything about import order, I think it doesn't say anything, but let's see, I think it's <a href=\"https://leanprover-community.github.io/contribute/style.html\">#style</a>.</p>",
        "id": 483559397,
        "sender_full_name": "Julian Berman",
        "timestamp": 1732131823
    },
    {
        "content": "<p>Yeah, seems not from a scan. I'd do it personally probably just because it's common in many languages, and maybe some Lean code already does, but it would seem there's no explicit community guidance from the Mathlib style guide at least.</p>",
        "id": 483559574,
        "sender_full_name": "Julian Berman",
        "timestamp": 1732131890
    },
    {
        "content": "<p>I don't 100% follow the connection between your questions and the stuff below the divider -- I guess you're asking whether the thing you're writing below is good guidance? I'd probably mostly focus on <code>lakefile.toml</code> (rather than <code>lakefile.lean</code>) if you're writing a short beginner something, as that's simpler and it's what someone would get by default from <code>lake new</code> / <code>lake init</code>.</p>",
        "id": 483559867,
        "sender_full_name": "Julian Berman",
        "timestamp": 1732131996
    },
    {
        "content": "<p>Thanks for the link to the style guide - I wasn't aware of it.</p>\n<p>The first two questions are based on my observation that when I create a <code>lean_lib</code> in <code>lakefile.lean</code> the VSC status dialog tells me something is happening which takes a few seconds. It then prompts me to restart Lean. </p>\n<p>Screenshot attached. </p>\n<p>My guess is it is compiling the referenced lean file, and updating some kind of local header file so that references to lemmas can be resolved.</p>\n<p>And part of my question was - is it only VSC that notices this change because it is continuously running lean unlike say editing the <code>lakefile.lean</code> in vi or notepad?</p>\n<p><a href=\"/user_uploads/3121/-948JsvlWDLT90L4s9lOMbEl/Screenshot-2024-11-20-at-21.41.02.png\">Screenshot 2024-11-20 at 21.41.02.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/-948JsvlWDLT90L4s9lOMbEl/Screenshot-2024-11-20-at-21.41.02.png\" title=\"Screenshot 2024-11-20 at 21.41.02.png\"><img data-original-dimensions=\"954x221\" src=\"/user_uploads/thumbnail/3121/-948JsvlWDLT90L4s9lOMbEl/Screenshot-2024-11-20-at-21.41.02.png/840x560.webp\"></a></div>",
        "id": 483577300,
        "sender_full_name": "rzeta0",
        "timestamp": 1732139367
    },
    {
        "content": "<p>also my environment doesn' have <code>lakefile.toml</code> .. is that a new thing?</p>\n<p>my environment appears to be Lean <code>\"v4.12.0\"</code></p>",
        "id": 483577470,
        "sender_full_name": "rzeta0",
        "timestamp": 1732139435
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"724904\">rzeta0</span> <a href=\"#narrow/channel/113489-new-members/topic/is.20this.20a.20correct.20summary.20of.20how.20to.20create.20libraries.20.3F/near/483577470\">said</a>:</p>\n<blockquote>\n<p>also my environment doesn' have <code>lakefile.toml</code> .. is that a new thing?</p>\n<p>my environment appears to be Lean <code>\"v4.12.0\"</code></p>\n</blockquote>\n<p>It was initially written in February so probably it's present in 4.12, but 4.13 is the first version that emits <code>lakefile.toml</code> by default.</p>\n<blockquote>\n<p>And part of my question was - is it only VSC that notices this change because it is continuously running lean unlike say editing the <code>lakefile.lean</code> in vi or notepad?</p>\n</blockquote>\n<p>I would have assumed that that behavior was signalled via the language server in the same way that e.g. the message saying imports are out of date and prompting you to restart does -- but it appears it doesn't  (by which I mean that <code>lean.nvim</code> doesn't appear to notice if I edit a <code>lakefile.toml</code>). I'm sure however it works would be trivial to replicate though, yes, it'll be something having to do with watching the file presumably.</p>",
        "id": 483587267,
        "sender_full_name": "Julian Berman",
        "timestamp": 1732144204
    }
]