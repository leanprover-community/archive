[
    {
        "content": "<p>Why can't lean figure out that this will end? Or why can't I figure out what Lean is doing?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">test</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"bp\">-&gt;</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"bp\">-&gt;</span><span class=\"w\"> </span><span class=\"n\">Nat</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">test</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span>\n\n<span class=\"bp\">#</span><span class=\"n\">eval</span><span class=\"w\"> </span><span class=\"n\">test</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"mi\">2</span>\n</code></pre></div>",
        "id": 474399870,
        "sender_full_name": "Britt Anderson",
        "timestamp": 1727904291
    },
    {
        "content": "<p>Does using <code>x + 1, y + 1</code> instead, work?</p>",
        "id": 474401242,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1727904602
    },
    {
        "content": "<p>The information that x isn't 0 is not available in the last branch. Try using pattern matching on the left (<code>x + 1, y +1 =&gt;</code>)</p>",
        "id": 474401272,
        "sender_full_name": "Joachim Breitner",
        "timestamp": 1727904603
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"321459\">Damiano Testa</span> <a href=\"#narrow/stream/113489-new-members/topic/recursion.20with.20multiple.20inputs/near/474401242\">said</a>:</p>\n<blockquote>\n<p>Does using <code>x + 1, y + 1</code> instead, work?</p>\n</blockquote>\n<p>Yes.</p>",
        "id": 474403538,
        "sender_full_name": "Britt Anderson",
        "timestamp": 1727905041
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"470149\">Joachim Breitner</span> <a href=\"#narrow/stream/113489-new-members/topic/recursion.20with.20multiple.20inputs/near/474401272\">said</a>:</p>\n<blockquote>\n<p>The information that x isn't 0 is not available in the last branch. Try using pattern matching on the left (<code>x + 1, y +1 =&gt;</code>)</p>\n</blockquote>\n<p>So, I cannot (should not) infer that Lean will check the patterns in order?</p>",
        "id": 474403708,
        "sender_full_name": "Britt Anderson",
        "timestamp": 1727905076
    },
    {
        "content": "<p>It does, but it doesn't add that information to the context, as in general that may blow up in size. You could use <code>if h : x = 0</code>â€¦ here</p>",
        "id": 474412758,
        "sender_full_name": "Joachim Breitner",
        "timestamp": 1727908152
    }
]