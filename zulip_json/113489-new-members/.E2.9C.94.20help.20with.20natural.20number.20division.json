[
    {
        "content": "<p>My whole project has come down to moving some parentheses. I have arrived at and gotten stuck at this step numerous times. I'm willing to accept that this statement isn't necessarily true for natural numbers, but there must be something about my case that makes this true in practice or my software wouldn't work. How can I work around this?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">z</span><span class=\"w\"> </span><span class=\"n\">j</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">}</span>\n<span class=\"w\">  </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">/</span><span class=\"n\">z</span><span class=\"o\">)</span><span class=\"bp\">%</span><span class=\"n\">j</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">j</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">/</span><span class=\"o\">(</span><span class=\"n\">z</span><span class=\"bp\">*</span><span class=\"n\">j</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"n\">z</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"k\">calc</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">/</span><span class=\"n\">z</span><span class=\"o\">)</span><span class=\"bp\">%</span><span class=\"n\">j</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">j</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">/</span><span class=\"o\">(</span><span class=\"n\">z</span><span class=\"bp\">*</span><span class=\"n\">j</span><span class=\"o\">))</span>\n<span class=\"w\">    </span><span class=\"bp\">_=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">/</span><span class=\"n\">z</span><span class=\"o\">)</span><span class=\"bp\">%</span><span class=\"n\">j</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">j</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"n\">n</span><span class=\"bp\">/</span><span class=\"n\">z</span><span class=\"o\">)</span><span class=\"bp\">/</span><span class=\"n\">j</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n<span class=\"w\">    </span><span class=\"bp\">_=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"n\">z</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">rw</span><span class=\"o\">[</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">mod_add_div</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">/</span><span class=\"n\">z</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">j</span><span class=\"o\">]</span>\n</code></pre></div>\n<p>Full context:<br>\n<a href=\"https://github.com/tangentstorm/treesiv/blob/c7700efde04c714b8866f584cd34c0ff37a38ce0/Rake.lean#L277\">https://github.com/tangentstorm/treesiv/blob/c7700efde04c714b8866f584cd34c0ff37a38ce0/Rake.lean#L277</a></p>",
        "id": 456320866,
        "sender_full_name": "Michal Wallace (tangentstorm)",
        "timestamp": 1722778814
    },
    {
        "content": "<p>If you are looking for a proof, this works:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"w\">      </span><span class=\"n\">rcases</span><span class=\"w\"> </span><span class=\"n\">j</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">j</span><span class=\"o\">)</span>\n<span class=\"w\">      </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">simp</span>\n<span class=\"w\">      </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">simpa</span><span class=\"w\"> </span><span class=\"kn\">using</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">div_div_eq_div_mul</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">z</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">j</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">))</span><span class=\"bp\">.</span><span class=\"n\">symm</span>\n</code></pre></div>",
        "id": 456321620,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1722779170
    },
    {
        "content": "<p>Honestly, I have not even looked at the statement: I added <code>import Mathlib</code> and ran <code>slim_check</code> to make sure that it was true.  Then I used <code>simp</code> and saw that there was <code>or j = 0</code>.  So I did the case split, used <code>simp</code> on both subgoals, one was done, the other was solved by <code>exact?</code>.</p>",
        "id": 456322232,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1722779443
    },
    {
        "content": "<p>Thanks for the sharing the process, I had no idea about <code>slim_check</code>, very cool!</p>",
        "id": 456326169,
        "sender_full_name": "Rida Hamadani",
        "timestamp": 1722780377
    },
    {
        "content": "<p>Yes, thank you so much, <span class=\"user-mention\" data-user-id=\"321459\">@Damiano Testa</span> ! I think I just didn't really have the strategy of running <code>simp</code> <em>before</em> I did a search, and without that step, every single line was a struggle.</p>",
        "id": 456401861,
        "sender_full_name": "Michal Wallace (tangentstorm)",
        "timestamp": 1722812423
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"423842\">Michal Wallace (tangentstorm)</span> has marked this topic as resolved.</p>",
        "id": 456401875,
        "sender_full_name": "Notification Bot",
        "timestamp": 1722812432
    },
    {
        "content": "<p>This statement reminded me of the so-called division algorithm (sort of the definition of modulo), and with Damiano's <code>Nat.div_div_eq_div_mul</code>, you can put it together in a single <code>rw</code>.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">z</span><span class=\"w\"> </span><span class=\"n\">j</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">/</span><span class=\"n\">z</span><span class=\"o\">)</span><span class=\"bp\">%</span><span class=\"n\">j</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">j</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">/</span><span class=\"o\">(</span><span class=\"n\">z</span><span class=\"bp\">*</span><span class=\"n\">j</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"n\">z</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">div_div_eq_div_mul</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">add_comm</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">div_add_mod</span><span class=\"o\">]</span>\n</code></pre></div>",
        "id": 456402302,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1722812767
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"423842\">Michal Wallace (tangentstorm)</span> <a href=\"#narrow/stream/113489-new-members/topic/.E2.9C.94.20help.20with.20natural.20number.20division/near/456401861\">said</a>:</p>\n<blockquote>\n<p>Yes, thank you so much, <span class=\"user-mention silent\" data-user-id=\"321459\">Damiano Testa</span> ! I think I just didn't really have the strategy of running <code>simp</code> <em>before</em> I did a search, and without that step, every single line was a struggle.</p>\n</blockquote>\n<p>There is the concept of \"<code>simp</code>-normal form\", which is essentially what goals can look like after an application of <code>simp</code>.  A lot of lemmas are designed to make progress <em>beyond</em> what <code>simp</code> can achieve.  This means that <code>simp; exact?</code> has a <em>much higher</em> chance of working that <code>exact?</code>.</p>",
        "id": 456452160,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1722838930
    }
]