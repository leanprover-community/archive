[
    {
        "content": "<p>Here is a small proof I'm hoping will illustrate the use of proof by contradiction.</p>\n<p>I'd welcome general feedback - but do note my aim is not to use advanced tactics and syntax, this is meant to be an educational example for beginners like me.</p>\n<p>My specific concern is about <code>linarith</code> which seems to be clever than expected. Here it seems to be doing 2 things:</p>\n<ul>\n<li>searching the existing hypotheses for any that can help it justify <code>¬ b = 7</code> without being pointed at specific ones</li>\n<li>making the leap from <code>b=6</code> to <code>¬ b = 7</code> - which to me, after weeks of doing lean tutorials, feels like several steps</li>\n</ul>\n<p>My concern is a little vague, but I feel <code>linarith</code> being so clever may allow me to \"prove anything\" if I'm not fully aware of what it is doing behind the scenes.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h1</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">6</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h2</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">7</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">g</span>\n<span class=\"w\">  </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">h1</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">g</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h2x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">7</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">linarith</span>\n<span class=\"w\">  </span><span class=\"n\">contradiction</span>\n</code></pre></div>",
        "id": 489371837,
        "sender_full_name": "rzeta0",
        "timestamp": 1734393904
    },
    {
        "content": "<p>To be clear, your question is how linarith can conclude <code>Not (b = 7)</code> from <code>g : b = 6</code>?</p>\n<p>I don't know the specifics of how linarith works, but I wouldn't be surprised if it was capable of just substituting <code>g</code> into the goal to get <code>6 ≠ 7</code> and then just running the <code>decide</code>. You can print the proof with <code>by? linarith</code> instead of <code>by linarith</code> if I remember correctly</p>",
        "id": 489380423,
        "sender_full_name": "Niels Voss",
        "timestamp": 1734398242
    },
    {
        "content": "<p>Thanks for the suggestion to try <code>by? linarith</code> - sadly it prints a huge amount of information that is not easy to decode.</p>",
        "id": 489383953,
        "sender_full_name": "rzeta0",
        "timestamp": 1734400075
    },
    {
        "content": "<p>And yes - you put the question better than I did - \"what is linarith really doing\"?</p>",
        "id": 489384091,
        "sender_full_name": "rzeta0",
        "timestamp": 1734400133
    },
    {
        "content": "<p>Here is a description of what <code>linarith</code> does: <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Tactic/Linarith/Frontend.html#linarith\">https://leanprover-community.github.io/mathlib4_docs/Mathlib/Tactic/Linarith/Frontend.html#linarith</a></p>\n<p>It does not substitute <code>6</code> for <code>b</code>. Instead, it assumes for the sake of contradiction that <code>b = 7</code>. Then it attempts to prove that <code>b = 6</code>, <code>b = 7</code>, and <code>0 &lt; 1</code> (the first two of which are hypotheses and the third of which is a fact that <code>linarith</code> just knows) together imply that <code>0 &lt; 0</code>, which is the desired contradiction. It does this by taking a suitable linear combination of the three relations <code>b = 6</code>, <code>b = 7</code>, and <code>0 &lt; 1</code>, with coefficients found using an external algorithm.</p>",
        "id": 489391781,
        "sender_full_name": "Mitchell Lee",
        "timestamp": 1734403533
    },
    {
        "content": "<p>Thanks Mitchell - for my beginner brain, I'll take away that linarth primarily tries to prove things by contradiction using the available hypotheses.</p>",
        "id": 489485994,
        "sender_full_name": "rzeta0",
        "timestamp": 1734442317
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"724904\">rzeta0</span> has marked this topic as resolved.</p>",
        "id": 489555196,
        "sender_full_name": "Notification Bot",
        "timestamp": 1734462882
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"724904\">rzeta0</span> <a href=\"#narrow/channel/113489-new-members/topic/.E2.9C.94.20feedback.20on.20small.20proof.20.28linarith.20too.20clever.3F.29/near/489371837\">said</a>:</p>\n<blockquote>\n<p>My concern is a little vague, but I feel <code>linarith</code> being so clever may allow me to \"prove anything\" if I'm not fully aware of what it is doing behind the scenes.</p>\n</blockquote>\n<p>I'm not sure what you mean by \"prove anything\", but you don't need to worry that <code>linarith</code> will prove something that is false.  <code>linarith</code> writes a proof that is verified by Lean just like any other proof, so it is just as reliable as any Lean proof.</p>\n<p>But I understand your concern that you don't know exactly what <code>linarith</code> is doing or when it will work.  There is a dilemma with algebraic reasoning in Lean.  You can try to prove everything from the most basic principles (like commutative, associative, and distributive laws), and there might be some educational benefit to doing a little bit of that, but it gets tiresome pretty quickly and it would be hard to do difficult algebraic proofs that way.  Or, you can use more powerful tactics like <code>linarith</code> and <code>ring</code>, but then it's hard to know exactly what the tactics are doing and when they will work.</p>\n<p>This is why I suggested, a while back, that elementary set theory is a better context for beginners in Lean than algebra.  Elementary set theory can be done entirely with basic, predictable tactics, without the difficulties that arise with algebraic reasoning.</p>",
        "id": 489574410,
        "sender_full_name": "Dan Velleman",
        "timestamp": 1734470631
    },
    {
        "content": "<p>By the way, here's a slightly quicker way to do your original proof:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h1</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">6</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h2</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">7</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">g</span>\n<span class=\"w\">  </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">h1</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">g</span>\n<span class=\"w\">  </span><span class=\"n\">linarith</span>\n</code></pre></div>",
        "id": 489574924,
        "sender_full_name": "Dan Velleman",
        "timestamp": 1734470858
    }
]