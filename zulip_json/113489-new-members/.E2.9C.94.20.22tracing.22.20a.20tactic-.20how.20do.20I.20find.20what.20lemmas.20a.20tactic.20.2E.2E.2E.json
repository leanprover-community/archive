[
    {
        "content": "<p>I've been going back over the earlier educational examples I created, then with very little experience of lean, and now with about 2 months of daily lean.</p>\n<p>Here is a simple proof:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"c1\">-- 05 - Simple Inequality</span>\n\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">≥</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">≥</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"k\">calc</span>\n<span class=\"w\">    </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">h1</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">≥</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">rel</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">h2</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">norm_num</span>\n</code></pre></div>\n<p>This proof uses the fact that <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi><mo>≥</mo><mn>2</mn><mtext>  </mtext><mo>⟹</mo><mtext>  </mtext><msup><mi>a</mi><mn>2</mn></msup><mo>≥</mo><msup><mn>2</mn><mn>2</mn></msup></mrow><annotation encoding=\"application/x-tex\">a \\ge 2 \\implies a^2 \\ge 2^2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7719em;vertical-align:-0.136em;\"></span><span class=\"mord mathnormal\">a</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">≥</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6684em;vertical-align:-0.024em;\"></span><span class=\"mord\">2</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">⟹</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.9501em;vertical-align:-0.136em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">≥</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span>. </p>\n<p>Clearly <code>rel</code> as applied to this specific task must use a lemma that says something like \"for <code>m n i: ℕ, if n ≤ m, then n^i ≤ m^i</code>.</p>\n<p>I previously wrote down that this lemma was <code>Nat.pow_le_pow_left</code> but I can't find how that was established.</p>\n<p>Loogle does find this lemma, but it is prefixed with an <code>abbrev</code> - I don't know what this means. I'm guessing it is an alias to another lemma? I'm hesitant as I'm told the Mathlib core devs dislike duplication.</p>\n<p>A moogle search can't find this lemma. Instead it suggests <code>Nat.pow_le_pow_of_le_left</code> which has the same signature.</p>\n<p><strong>Question:</strong> How do I actually find what a tactic, in context, is actually doing? Including what lemmas it is invoking. Something like <code>#trace on</code>?</p>\n<p>By \"in context\" I mean that tactics will do different things depending on the specifics of the goal state, and I'm interested in tracing what it is doing with the current goal state, rather than reading the lean code definition of all possible things a tactic could do.</p>",
        "id": 487126456,
        "sender_full_name": "rzeta0",
        "timestamp": 1733789359
    },
    {
        "content": "<p>You could try changing <code>by rel...</code> to <code>by? rel...</code> and see if the output is comprehensible. I think this is valid syntax nowadays?</p>",
        "id": 487128308,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1733790240
    },
    {
        "content": "<p>Alternatively you could try <code>by exact?</code> instead of the proof you gave</p>",
        "id": 487128438,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1733790289
    },
    {
        "content": "<p>Thanks - I'll experiment, .. the use of a question mark is new to me.</p>",
        "id": 487128507,
        "sender_full_name": "rzeta0",
        "timestamp": 1733790320
    },
    {
        "content": "<p>So <code>by? rel</code> gives</p>\n<div class=\"codehilite\" data-code-language=\"Text only\"><pre><span></span><code>Try this: pow_le_pow_left' h2 2\n</code></pre></div>\n<p>And <code>by apply?</code> gives a very long list of suggestions.</p>\n<p>So my question is - are these suggestions actual traces of what <code>rel</code> actually does, or are these suggestions, as I suspect, the output of a different heuristic algorithm?</p>",
        "id": 487128949,
        "sender_full_name": "rzeta0",
        "timestamp": 1733790534
    },
    {
        "content": "<hr>\n<p>I'm using the word <strong>trace</strong> as it is the thing in prolog which does actually print out how a goal is resolved.</p>",
        "id": 487129190,
        "sender_full_name": "rzeta0",
        "timestamp": 1733790644
    },
    {
        "content": "<p><code>by apply?</code> and <code>by? apply</code> are very different. The <code>apply?</code> and <code>exact?</code> tactics are specifically for searching for unknown proofs. You could think of them as doing backtracking prolog-like search.</p>\n<p>Writing <code>by? rel</code> causes the proof generated by <code>rel</code> to be printed.</p>",
        "id": 487129376,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1733790727
    },
    {
        "content": "<p><code>by? rel</code> won't be an execution trace, but instead the actual proof object constructed by <code>rel</code>.</p>",
        "id": 487129469,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1733790782
    },
    {
        "content": "<p>Kevin's suggestion of <code>by exact?</code> is to replace your proof and see what it responds with, since when it succeeds it will tell you which lemmas it used. It may or may not have any relation to what the original tactic would have done.</p>",
        "id": 487129649,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1733790873
    },
    {
        "content": "<p>thanks for explaining there is a different between <code>by apply?</code> and <code>by? apply</code></p>",
        "id": 487132742,
        "sender_full_name": "rzeta0",
        "timestamp": 1733792466
    },
    {
        "content": "<p>... and so <code>by? rel</code> tells me that the original statements about which lemmas were used are wrong.</p>\n<p>It tells me a third lemma is actually used <code>theorem pow_le_pow_left'</code></p>",
        "id": 487133322,
        "sender_full_name": "rzeta0",
        "timestamp": 1733792771
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"724904\">rzeta0</span> has marked this topic as resolved.</p>",
        "id": 487206843,
        "sender_full_name": "Notification Bot",
        "timestamp": 1733825086
    }
]