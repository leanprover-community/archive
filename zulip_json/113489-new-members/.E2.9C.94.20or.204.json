[
    {
        "content": "<p>I am working on this proof which uses custom tactics: <a href=\"https://github.com/hrmacbeth/math2001/blob/main/Math2001/02_Proofs_with_Structure/03_Or.lean#L83\">https://github.com/hrmacbeth/math2001/blob/main/Math2001/02_Proofs_with_Structure/03_Or.lean#L83</a></p>\n<p>I got as far as:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">∨</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"k\">obtain</span><span class=\"w\"> </span><span class=\"n\">hx1</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">hx2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">h</span>\n<span class=\"w\">  </span><span class=\"k\">calc</span>\n<span class=\"w\">    </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">x</span>\n<span class=\"w\">      </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">hx1</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">ring</span>\n<span class=\"w\">  </span><span class=\"k\">calc</span>\n<span class=\"w\">    </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">x</span>\n<span class=\"w\">      </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">hx2</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">ring</span>\n</code></pre></div>\n<p>If I could rewrite backwards I could do:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"w\">  </span><span class=\"k\">calc</span>\n<span class=\"w\">    </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">x</span>\n<span class=\"w\">      </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">hx2</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">ring</span>\n<span class=\"w\">    </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">numbers</span>\n<span class=\"w\">    </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">rw</span><span class=\"o\">[</span><span class=\"n\">hx2</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"c1\">-- reverse rewrite hx2 here</span>\n</code></pre></div>\n<p>But how to rewrite backwards was not introduced yet so I am guessing there is another solution.</p>",
        "id": 526114041,
        "sender_full_name": "Răzvan Flavius Panda",
        "timestamp": 1751040198
    },
    {
        "content": "<p>You don't need backward rewrite, right? rw[hx2] will rewrite y on rhs, which still works</p>",
        "id": 526114556,
        "sender_full_name": "Weiyi Wang",
        "timestamp": 1751040371
    },
    {
        "content": "<p>rewriting backwards can be done with <code>rw [← hx2]</code></p>",
        "id": 526114784,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1751040439
    },
    {
        "content": "<p>But indeed there is another solution</p>",
        "id": 526114810,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1751040447
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"873350\">@Weiyi Wang</span> lol, you are right that works. why does it work?</p>",
        "id": 526114826,
        "sender_full_name": "Răzvan Flavius Panda",
        "timestamp": 1751040451
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> <a href=\"#narrow/channel/113489-new-members/topic/or.204/near/526114784\">said</a>:</p>\n<blockquote>\n<p>rewriting backwards can be done with <code>rw [← hx2]</code></p>\n</blockquote>\n<p>I forgot how to type that character, been a while since I did the natural numbers game.</p>",
        "id": 526114964,
        "sender_full_name": "Răzvan Flavius Panda",
        "timestamp": 1751040501
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"374664\">Răzvan Flavius Panda</span> <a href=\"#narrow/channel/113489-new-members/topic/or.204/near/526114826\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"873350\">Weiyi Wang</span> lol, you are right that works. why does it work?</p>\n</blockquote>\n<p>The <code>rw</code> tactic is working on the equation <code>2 * (- 2) + 4 = 2 * y + 4</code>, not just on the lhs, so it is allowed to rewrite on the rhs too</p>",
        "id": 526114985,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1751040504
    },
    {
        "content": "<p>Sorry but I do not really understand why it is allowed to do <code>rw [← hx2]</code></p>",
        "id": 526115256,
        "sender_full_name": "Răzvan Flavius Panda",
        "timestamp": 1751040600
    },
    {
        "content": "<p>I mean, it is going from -2 to y, which is reverse.</p>",
        "id": 526115398,
        "sender_full_name": "Răzvan Flavius Panda",
        "timestamp": 1751040651
    },
    {
        "content": "<p><code>rw [hx2]</code> rewrites <code>2 * (- 2) + 4 = 2 * y + 4</code> into <code>2 * (- 2) + 4 = 2 * (-2) + 4</code> (so the <code>y</code> transformed into <code>-2</code>), and then the goal is closed by reflexivity</p>",
        "id": 526115476,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1751040680
    },
    {
        "content": "<p>so it's doing the rewrite on the goal?</p>",
        "id": 526115611,
        "sender_full_name": "Răzvan Flavius Panda",
        "timestamp": 1751040730
    },
    {
        "content": "<p>Oh, I see, the goal is <code>2 * -2 + 4 = 2 * y + 4</code> as you said.</p>",
        "id": 526115713,
        "sender_full_name": "Răzvan Flavius Panda",
        "timestamp": 1751040777
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"374664\">Răzvan Flavius Panda</span> <a href=\"#narrow/channel/113489-new-members/topic/or.204/near/526115611\">said</a>:</p>\n<blockquote>\n<p>so it's doing the rewrite on the goal?</p>\n</blockquote>\n<p>Yes, that's the whole idea of <code>rw</code>, is that you can replace equals with equals anywhere in the goal. You can also <code>rw [foobar] at h1</code> to do a rewrite at a hypothesis.</p>",
        "id": 526115842,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1751040835
    },
    {
        "content": "<p>Yeah, I recall that from NNG. I just did not know how calc works and that the goal was <code>2 * -2 + 4 = 2 * y + 4</code><br>\nI thought the rewrite is only on <code>2 * -2 + 4</code><br>\nThat is why I was confused of why it was working.</p>",
        "id": 526116026,
        "sender_full_name": "Răzvan Flavius Panda",
        "timestamp": 1751040903
    },
    {
        "content": "<p>Thank you for the clarification</p>",
        "id": 526116076,
        "sender_full_name": "Răzvan Flavius Panda",
        "timestamp": 1751040919
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"374664\">Răzvan Flavius Panda</span> has marked this topic as resolved.</p>",
        "id": 526116106,
        "sender_full_name": "Notification Bot",
        "timestamp": 1751040929
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"374664\">Răzvan Flavius Panda</span> <a href=\"#narrow/channel/113489-new-members/topic/.E2.9C.94.20or.204/near/526114964\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> <a href=\"#narrow/channel/113489-new-members/topic/or.204/near/526114784\">said</a>:</p>\n<blockquote>\n<p>rewriting backwards can be done with <code>rw [← hx2]</code></p>\n</blockquote>\n<p>I forgot how to type that character, been a while since I did the natural numbers game.</p>\n</blockquote>\n<p>One of the default bindings is <code>\\l</code> (for <strong>l</strong>eft arrow)</p>",
        "id": 526116210,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1751040971
    }
]