[
    {
        "content": "<p>How can I elaborate terms in the context of local variables?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Lean</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span>\n\n<span class=\"kn\">local</span><span class=\"w\"> </span><span class=\"kn\">notation</span><span class=\"w\"> </span><span class=\"s2\">\"ι\"</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">n</span>\n\n<span class=\"sd\">/-- error: Unknown constant `n✝` -/</span>\n<span class=\"bp\">#</span><span class=\"n\">guard_msgs</span><span class=\"w\"> </span><span class=\"k\">in</span>\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"w\"> </span><span class=\"n\">Elab</span><span class=\"bp\">.</span><span class=\"n\">Term</span><span class=\"w\"> </span><span class=\"k\">in</span>\n<span class=\"n\">run_elab</span>\n<span class=\"w\">  </span><span class=\"n\">elabTerm</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"bp\">`</span><span class=\"o\">(</span><span class=\"n\">ι</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"n\">none</span>\n</code></pre></div>",
        "id": 564891909,
        "sender_full_name": "Jakub Nowak",
        "timestamp": 1766319875
    },
    {
        "content": "<p>Although, maybe the issue is not with <code>elabTerm</code>, but the fact that the syntax in <code>`(ι)</code> is not parsed in the context of local variables?</p>",
        "id": 564892017,
        "sender_full_name": "Jakub Nowak",
        "timestamp": 1766320030
    },
    {
        "content": "<p>I still don't know how to make this code work though. .-.</p>",
        "id": 564902364,
        "sender_full_name": "Jakub Nowak",
        "timestamp": 1766333867
    },
    {
        "content": "<p>Local variables are a command elaborator concept. You can use <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Lean.Elab.Command.runTermElabM#doc\">docs#Lean.Elab.Command.runTermElabM</a> to elaborate the local variables and get into a context where they exist.</p>",
        "id": 564908781,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1766342225
    }
]