[
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"743246\">jsodd</span> <a href=\"#narrow/stream/113489-new-members/topic/How.20to.20prove.20decidability.20for.20PosDef.3F/near/459670332\">said</a>:</p>\n<blockquote>\n<p>Another question about decidability: why <code>Nonempty \\R</code> also runs into decidability issues? It seems to have nothing to do with computations...</p>\n</blockquote>\n<p>Can you ask that question with a <a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a> ?</p>",
        "id": 459671923,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1723285770
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/stream/113489-new-members/topic/How.20to.20prove.20decidability.20for.20PosDef.3F/near/459671923\">said</a>:</p>\n<blockquote>\n<p>Can you ask that question with a <a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a> ?</p>\n</blockquote>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Data</span><span class=\"bp\">.</span><span class=\"n\">Real</span><span class=\"bp\">.</span><span class=\"n\">Basic</span>\n\n<span class=\"bp\">#</span><span class=\"n\">eval</span><span class=\"w\"> </span><span class=\"n\">Nonempty</span><span class=\"w\"> </span><span class=\"n\">ℝ</span>\n</code></pre></div>",
        "id": 459681590,
        "sender_full_name": "jsodd",
        "timestamp": 1723289638
    },
    {
        "content": "<p>This works:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">set_option</span><span class=\"w\"> </span><span class=\"n\">checkBinderAnnotations</span><span class=\"w\"> </span><span class=\"n\">false</span><span class=\"w\"> </span><span class=\"k\">in</span>\n<span class=\"sd\">/-- Anything that typeclass search can find is decidable -/</span>\n<span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"n\">decidableTypeClassOfInstance</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">P</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">P</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Decidable</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">isTrue</span><span class=\"w\"> </span><span class=\"bp\">‹_›</span>\n</code></pre></div>",
        "id": 459681964,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1723289880
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"306601\">@Kyle Miller</span>  or <span class=\"user-mention\" data-user-id=\"306577\">@Matthew Ballard</span> probably can tell you why that instance is a terrible idea</p>",
        "id": 459683025,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1723290134
    },
    {
        "content": "<p>Alternatively, perhaps <code>#eval</code> should raise an error if you pass it a typeclass, and should say \"use synth instead\"</p>",
        "id": 459683705,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1723290539
    },
    {
        "content": "<p>It wouldn't hurt adding <code>Decidable</code> instances for some of these property classes, one at a time rather than than Eric's blanket instance (I don't know what happens if <code>P</code> is not a class).</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Data</span><span class=\"bp\">.</span><span class=\"n\">Real</span><span class=\"bp\">.</span><span class=\"n\">Basic</span>\n\n<span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Sort</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Nonempty</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Decidable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Nonempty</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">isTrue</span><span class=\"w\"> </span><span class=\"n\">inferInstance</span>\n\n<span class=\"bp\">#</span><span class=\"n\">eval</span><span class=\"w\"> </span><span class=\"n\">Nonempty</span><span class=\"w\"> </span><span class=\"n\">ℝ</span>\n<span class=\"c1\">-- true</span>\n</code></pre></div>",
        "id": 459697962,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1723297016
    }
]