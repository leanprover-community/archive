[
    {
        "content": "<p>Hi, all. I'm confused about the behavior of <code>orelse</code> and <code>first</code> in lean4.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"c1\">-- success</span>\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">&gt;</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"bp\">/</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">field_simp</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">ring</span>\n\n<span class=\"c1\">-- unsolved goals</span>\n<span class=\"c1\">-- x : ℝ</span>\n<span class=\"c1\">-- h : x &gt; 0</span>\n<span class=\"c1\">-- ⊢ 1 + x⁻¹ = x * x⁻¹ + x⁻¹Lean 4</span>\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">&gt;</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"bp\">/</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">ring</span><span class=\"w\"> </span><span class=\"bp\">&lt;;&gt;</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">field_simp</span><span class=\"w\"> </span><span class=\"bp\">;</span><span class=\"n\">ring</span><span class=\"o\">)</span>\n\n<span class=\"c1\">-- unsolved goals</span>\n<span class=\"c1\">-- x : ℝ</span>\n<span class=\"c1\">-- h : x &gt; 0</span>\n<span class=\"c1\">-- ⊢ 1 + x⁻¹ = x * x⁻¹ + x⁻¹Lean 4</span>\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">&gt;</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"bp\">/</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">first</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">ring</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">field_simp</span><span class=\"w\"> </span><span class=\"bp\">;</span><span class=\"n\">ring</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>For example, since the first in the above code succeed, I would expect all followings will succeed too.</p>\n<p>Claude Sonnet seems to agree with me. Please enlight me and Claude.</p>",
        "id": 486654430,
        "sender_full_name": "Xiyu Zhai",
        "timestamp": 1733565254
    },
    {
        "content": "<p>In the second example I'm seeing <code>no goals to be solved</code> on the second <code>ring</code>, because the <code>field_simp</code> solved it.</p>\n<p>In the third, <code>first</code> uses the first tactic that succeeds, where succeeds means \"throws no errors\". You can change <code>ring</code> to <code>(ring; done)</code> to assert that all goals are solved, and then that will fail and the second tactic sequence (<code>field_simp; ring</code>)  will act</p>",
        "id": 486654982,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1733565713
    },
    {
        "content": "<p>wow, excellent!</p>",
        "id": 486655057,
        "sender_full_name": "Xiyu Zhai",
        "timestamp": 1733565764
    },
    {
        "content": "<p>Thanks a lot!!</p>",
        "id": 486655067,
        "sender_full_name": "Xiyu Zhai",
        "timestamp": 1733565776
    },
    {
        "content": "<p>Now I understand that if only one goal is solved, it counts as success.</p>",
        "id": 486655084,
        "sender_full_name": "Xiyu Zhai",
        "timestamp": 1733565793
    }
]