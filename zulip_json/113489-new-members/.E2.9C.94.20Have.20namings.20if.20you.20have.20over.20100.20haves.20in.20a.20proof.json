[
    {
        "content": "<p>I have a particularily nasty construction that has many edge cases. Currently the theorem has about 600 lines of code and about 100 have statements. Sometimes I try to name them sensibly, but after a while statements like these pop up.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">dingus</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">ZMod</span><span class=\"bp\">.</span><span class=\"n\">val_natCast_of_lt</span><span class=\"w\"> </span><span class=\"n\">vcn0</span>\n<span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">vcc</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">ZMod</span><span class=\"bp\">.</span><span class=\"n\">natCast_zmod_val</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">vc</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ZMod</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">))</span>\n<span class=\"n\">rw</span><span class=\"o\">[</span><span class=\"n\">ZMod</span><span class=\"bp\">.</span><span class=\"n\">val_natCast</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">dingus</span>\n<span class=\"n\">rw</span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">dingus</span><span class=\"o\">]</span>\n<span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">dingoos</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ZMod</span><span class=\"bp\">.</span><span class=\"n\">natCast_zmod_eq_zero_iff_dvd</span><span class=\"w\"> </span><span class=\"n\">vc</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">mp</span><span class=\"w\"> </span><span class=\"n\">hl</span>\n</code></pre></div>\n<p>How would you name the theorems? I tried to reduce the statements as much as possible but there is a current skill issue to how concise how far I can reduce the statements without help.</p>",
        "id": 526494348,
        "sender_full_name": "metakuntyyy",
        "timestamp": 1751321895
    },
    {
        "content": "<p>Please don't fixate on the theorem statements, more on the names such as dingus and so on. I could name the hypotheses h1, h2, h3, h4 and so on. Or maybe it's possible to overwrite the hypotheses that I don't need. I found that I can't give it the same name, I have to clear the hypothesis first. This looks ugly since I have to write clear h so that the names don't get out of hand.</p>",
        "id": 526494511,
        "sender_full_name": "metakuntyyy",
        "timestamp": 1751322034
    },
    {
        "content": "<p>Is it really impossible to factor out lemmas? If not, I guess I would look at the type and use mathlib convention (but maybe abbreviated)</p>",
        "id": 526494606,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1751322111
    },
    {
        "content": "<p>so e.g. <code>p_lt_2 : p &lt; 2</code></p>",
        "id": 526494617,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1751322120
    },
    {
        "content": "<p>I tried to do as much as possible, but I don't know what lemmas I need to factor out before I'm done. The final sorry should be done soon, maybe then it will be more concrete what lemmas we can pull out.</p>",
        "id": 526494687,
        "sender_full_name": "metakuntyyy",
        "timestamp": 1751322178
    },
    {
        "content": "<p>if it's temporary then definitely go with the mathlib convention option</p>",
        "id": 526494827,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1751322292
    },
    {
        "content": "<ul>\n<li><code>h</code>, <code>h₁</code>, ... for assumptions</li>\n</ul>\n<p>This one?</p>",
        "id": 526494993,
        "sender_full_name": "metakuntyyy",
        "timestamp": 1751322390
    },
    {
        "content": "<ol>\n<li>Add type annotations to <code>have</code>s</li>\n<li>Translate type annotations into a lemma names</li>\n</ol>",
        "id": 526495232,
        "sender_full_name": "suhr",
        "timestamp": 1751322556
    },
    {
        "content": "<p>I see, and what about transient lemmas, that are just an application, that would be unwieldy, can't really lemmaize this one <code>have dingus := ZMod.val_natCast_of_lt vcn0</code> as it's already a lemma. I've named it vcn0 because v=val n=natcast n=not equal 0=zero, but maybe something else would fit better.</p>\n<p>For extractable lemmas I agree though, we'll yet have to see what can be extracted.</p>",
        "id": 526495614,
        "sender_full_name": "metakuntyyy",
        "timestamp": 1751322759
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"725717\">metakuntyyy</span> <a href=\"#narrow/channel/113489-new-members/topic/Have.20namings.20if.20you.20have.20over.20100.20haves.20in.20a.20proof/near/526494993\">said</a>:</p>\n<blockquote>\n<ul>\n<li><code>h</code>, <code>h₁</code>, ... for assumptions</li>\n</ul>\n<p>This one?</p>\n</blockquote>\n<p>No, the <code>p_lt_2 : p &lt; 2</code> one</p>",
        "id": 526496111,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1751323017
    },
    {
        "content": "<p><code>ZMod.val_natCast_of_lt</code> has type <code>(↑a).val = a</code>. So it's more like <code>a_natcast_val_eq_a</code>, where <code>a</code> should be replaced with the right variable name.</p>\n<p>Or <code>a_ncv_eq_a</code> for short.</p>",
        "id": 526496196,
        "sender_full_name": "suhr",
        "timestamp": 1751323059
    },
    {
        "content": "<p>Ok, I'll try it like that.</p>",
        "id": 526496219,
        "sender_full_name": "metakuntyyy",
        "timestamp": 1751323081
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"725717\">metakuntyyy</span> has marked this topic as resolved.</p>",
        "id": 526496240,
        "sender_full_name": "Notification Bot",
        "timestamp": 1751323093
    }
]