[
    {
        "content": "<p>Is it possible to do induction in the following setting?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">n</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Fintype</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">induction</span><span class=\"w\"> </span><span class=\"n\">n</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>I've tried <code>Fintype.induction_subsingleton_or_nontrivial</code>, but Lean says <code>failed to infer implicit target</code>.</p>",
        "id": 462735556,
        "sender_full_name": "jsodd",
        "timestamp": 1723795155
    },
    {
        "content": "<p>I also tried <code>induction Fintype.card n</code>, but it just splits the goal state into two copies of the same goal...</p>",
        "id": 462739994,
        "sender_full_name": "jsodd",
        "timestamp": 1723796771
    },
    {
        "content": "<p>I've found a solution. It seems to be working as follows:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">n</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Fintype</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">cases</span><span class=\"w\"> </span><span class=\"n\">nonempty_fintype</span><span class=\"w\"> </span><span class=\"n\">n</span>\n<span class=\"w\">  </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"bp\">@</span><span class=\"n\">Fintype</span><span class=\"bp\">.</span><span class=\"n\">induction_subsingleton_or_nontrivial</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">_</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n</code></pre></div>",
        "id": 462747473,
        "sender_full_name": "jsodd",
        "timestamp": 1723799798
    },
    {
        "content": "<p>See <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Fintype.induction_empty_option#doc\">docs#Fintype.induction_empty_option</a></p>",
        "id": 462789928,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1723815524
    },
    {
        "content": "<p>By the way, when you're using an induction principle, you should prefer <code>refine</code> over <code>apply</code>, since that enables special elaborator support to help get it to succeed.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">n</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Fintype</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">cases</span><span class=\"w\"> </span><span class=\"n\">nonempty_fintype</span><span class=\"w\"> </span><span class=\"n\">n</span>\n<span class=\"w\">  </span><span class=\"n\">refine</span><span class=\"w\"> </span><span class=\"n\">Fintype</span><span class=\"bp\">.</span><span class=\"n\">induction_subsingleton_or_nontrivial</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">?_</span><span class=\"w\"> </span><span class=\"bp\">?_</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n</code></pre></div>",
        "id": 462802922,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1723820074
    },
    {
        "content": "<p>(<code>apply</code> doesn't provide an expected type, but <code>refine</code> does)</p>",
        "id": 462802982,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1723820093
    },
    {
        "content": "<p>I still don't understand how to work with simple induction in <code>Fintype</code>. I've tried everything I could find... I would greatly appreciate if someone pointed to some example of where it's used.</p>",
        "id": 462819901,
        "sender_full_name": "jsodd",
        "timestamp": 1723825260
    },
    {
        "content": "<p>When I try the most straightforward <code>induction Fintype.card n with n hn</code>, the goals are different from what one would expect in induction. Why?</p>",
        "id": 462820762,
        "sender_full_name": "jsodd",
        "timestamp": 1723825508
    },
    {
        "content": "<p>P.S. This is, by the way, the only induction I need right now: induction in the number of elements in <code>n</code>.</p>",
        "id": 462820961,
        "sender_full_name": "jsodd",
        "timestamp": 1723825588
    },
    {
        "content": "<p>Often you need to use <code>refine</code> with an explicit induction principle rather than using the <code>induction</code> tactic itself. This is one of those cases. (Though, often you can use <code>induction x using some_induction_principle</code> to be explicit about the induction principle, but I think this might not work for Type. All <code>induction</code> does is, in effect, set up some <code>refine</code> for you and automatically do <code>intro</code> in each goal.)</p>",
        "id": 462821408,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1723825798
    },
    {
        "content": "<blockquote>\n<p>I still don't understand how to work with simple induction in <code>Fintype</code>.</p>\n</blockquote>\n<p>I thought you said earlier that you found a solution. Is that not the case?</p>",
        "id": 462821534,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1723825835
    },
    {
        "content": "<p>If you want to do induction on the cardinality of the type, here's one way to set it up:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Fintype</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">generalize</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fintype</span><span class=\"bp\">.</span><span class=\"n\">card</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">n</span>\n<span class=\"w\">  </span><span class=\"n\">induction</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">generalizing</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"k\">with</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">zero</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">    </span><span class=\"c\">/-</span>\n<span class=\"cm\">    P : Type → Prop</span>\n<span class=\"cm\">    α : Type</span>\n<span class=\"cm\">    inst✝ : Fintype α</span>\n<span class=\"cm\">    h : Fintype.card α = 0</span>\n<span class=\"cm\">    ⊢ P α</span>\n<span class=\"cm\">    -/</span>\n<span class=\"w\">    </span><span class=\"gr\">sorry</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">succ</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">ih</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">    </span><span class=\"c\">/-</span>\n<span class=\"cm\">    P : Type → Prop</span>\n<span class=\"cm\">    n : ℕ</span>\n<span class=\"cm\">    ih : ∀ {α : Type} [inst : Fintype α], Fintype.card α = n → P α</span>\n<span class=\"cm\">    α : Type</span>\n<span class=\"cm\">    inst✝ : Fintype α</span>\n<span class=\"cm\">    h : Fintype.card α = n + 1</span>\n<span class=\"cm\">    ⊢ P α</span>\n<span class=\"cm\">    -/</span>\n<span class=\"w\">    </span><span class=\"gr\">sorry</span>\n</code></pre></div>",
        "id": 462822138,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1723826147
    },
    {
        "content": "<p>The <code>generalize</code> tactic is a bit weird (it's not generalizing anything), but it creates <code>n : Nat</code> and the hypothesis <code>h : Fintype.card α = n</code>.</p>\n<p>I suppose it's equivalent in this context to doing</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"k\">obtain</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">n</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"bp\">⟩</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Fintype</span><span class=\"bp\">.</span><span class=\"n\">card</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">⟨_</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">rfl</span><span class=\"bp\">⟩</span>\n</code></pre></div>",
        "id": 462822274,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1723826195
    },
    {
        "content": "<p>Take a look at <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=HallMarriageTheorem.hall_hard_inductive#doc\">docs#HallMarriageTheorem.hall_hard_inductive</a> for an induction-on-cardinality argument. That one uses <code>induction'</code> and strong induction.</p>",
        "id": 462822720,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1723826384
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"306601\">Kyle Miller</span> <a href=\"#narrow/stream/113489-new-members/topic/Induction.20on.20n.20with.20Fintype.20n/near/462821534\">said</a>:</p>\n<blockquote>\n<blockquote>\n<p>I still don't understand how to work with simple induction in <code>Fintype</code>.</p>\n</blockquote>\n<p>I thought you said earlier that you found a solution. Is that not the case?</p>\n</blockquote>\n<p>Yes... Initially I thought that what I've found is what I need, but after spending more time on the problem I saw that I was wrong.</p>",
        "id": 462822931,
        "sender_full_name": "jsodd",
        "timestamp": 1723826430
    },
    {
        "content": "<p>Thank you very much, I'll try what you suggest!</p>",
        "id": 462822991,
        "sender_full_name": "jsodd",
        "timestamp": 1723826444
    },
    {
        "content": "<p>It looks like <code>induction'</code> has a feature that's not present in <code>induction</code>, which saves needing the <code>generalize</code> boilerplate. The goals here are exactly the same:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Fintype</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">induction'</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fintype</span><span class=\"bp\">.</span><span class=\"n\">card</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"n\">generalizing</span><span class=\"w\"> </span><span class=\"n\">α</span>\n<span class=\"w\">  </span><span class=\"n\">next</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">    </span><span class=\"gr\">sorry</span>\n<span class=\"w\">  </span><span class=\"n\">next</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">ih</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">    </span><span class=\"gr\">sorry</span>\n</code></pre></div>",
        "id": 462823278,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1723826538
    },
    {
        "content": "<p>One last question. Is it possible to start the induction from 1 instead of 0?</p>",
        "id": 462823407,
        "sender_full_name": "jsodd",
        "timestamp": 1723826574
    },
    {
        "content": "<p>As when <code>Fintype.card n = 0</code> is eliminated by the assumptions, and the base is <code>Fintype.card n = 1</code></p>",
        "id": 462823708,
        "sender_full_name": "jsodd",
        "timestamp": 1723826666
    },
    {
        "content": "<p>Yeah, start by doing cases on the cardinality, then do induction.</p>",
        "id": 462823833,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1723826729
    },
    {
        "content": "<p>For example,</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Fintype</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">generalize</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fintype</span><span class=\"bp\">.</span><span class=\"n\">card</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">n</span>\n<span class=\"w\">  </span><span class=\"n\">cases</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"k\">with</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">zero</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">    </span><span class=\"c\">/-</span>\n<span class=\"cm\">    α : Type</span>\n<span class=\"cm\">    inst✝ : Fintype α</span>\n<span class=\"cm\">    P : Type → Prop</span>\n<span class=\"cm\">    h : Fintype.card α = 0</span>\n<span class=\"cm\">    ⊢ P α</span>\n<span class=\"cm\">    -/</span>\n<span class=\"w\">    </span><span class=\"gr\">sorry</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">succ</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">    </span><span class=\"n\">induction</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">generalizing</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"k\">with</span>\n<span class=\"w\">    </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">zero</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">      </span><span class=\"c\">/-</span>\n<span class=\"cm\">      P : Type → Prop</span>\n<span class=\"cm\">      α : Type</span>\n<span class=\"cm\">      inst✝ : Fintype α</span>\n<span class=\"cm\">      h : Fintype.card α = 0 + 1</span>\n<span class=\"cm\">      ⊢ P α</span>\n<span class=\"cm\">      -/</span>\n<span class=\"w\">      </span><span class=\"gr\">sorry</span>\n<span class=\"w\">    </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">succ</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">ih</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">      </span><span class=\"c\">/-</span>\n<span class=\"cm\">      P : Type → Prop</span>\n<span class=\"cm\">      n : ℕ</span>\n<span class=\"cm\">      ih : ∀ {α : Type} [inst : Fintype α], Fintype.card α = n + 1 → P α</span>\n<span class=\"cm\">      α : Type</span>\n<span class=\"cm\">      inst✝ : Fintype α</span>\n<span class=\"cm\">      h : Fintype.card α = n + 1 + 1</span>\n<span class=\"cm\">      ⊢ P α</span>\n<span class=\"cm\">      -/</span>\n<span class=\"w\">      </span><span class=\"gr\">sorry</span>\n</code></pre></div>",
        "id": 462823857,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1723826735
    },
    {
        "content": "<p>Or do strong induction and handle the 0 and 1 cases first inside the induction.</p>",
        "id": 462823884,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1723826756
    },
    {
        "content": "<p>For example</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Fintype</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">induction'</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fintype</span><span class=\"bp\">.</span><span class=\"n\">card</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"kn\">using</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">strong_induction_on</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">ih</span><span class=\"w\"> </span><span class=\"n\">generalizing</span><span class=\"w\"> </span><span class=\"n\">α</span>\n<span class=\"w\">  </span><span class=\"k\">obtain</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">n</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"gr\">sorry</span><span class=\"w\"> </span><span class=\"c1\">-- zero</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"gr\">sorry</span><span class=\"w\"> </span><span class=\"c1\">-- one</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"gr\">sorry</span><span class=\"w\"> </span><span class=\"c1\">-- remaining</span>\n</code></pre></div>",
        "id": 462824145,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1723826878
    },
    {
        "content": "<p>But there is no way to just remove zeroth case without handling it at all?</p>",
        "id": 462824374,
        "sender_full_name": "jsodd",
        "timestamp": 1723826957
    },
    {
        "content": "<p>Logically you have to handle it, since it's possible that the cardinality is 0, right?</p>",
        "id": 462824553,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1723827029
    },
    {
        "content": "<p>Even though it is specifically said in the theorem that it's not? But I understand what you mean</p>",
        "id": 462824630,
        "sender_full_name": "jsodd",
        "timestamp": 1723827056
    },
    {
        "content": "<p>If you have for example a Nonempty hypothesis, then it's an easy one-liner to handle the 0 case.</p>",
        "id": 462824731,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1723827110
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Fintype</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Nonempty</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">induction'</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fintype</span><span class=\"bp\">.</span><span class=\"n\">card</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"kn\">using</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">strong_induction_on</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">ih</span><span class=\"w\"> </span><span class=\"n\">generalizing</span><span class=\"w\"> </span><span class=\"n\">α</span>\n<span class=\"w\">  </span><span class=\"k\">obtain</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">n</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">absurd</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"n\">Fintype</span><span class=\"bp\">.</span><span class=\"n\">card_ne_zero</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"gr\">sorry</span><span class=\"w\"> </span><span class=\"c1\">-- one</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"gr\">sorry</span><span class=\"w\"> </span><span class=\"c1\">-- remaining</span>\n</code></pre></div>",
        "id": 462824845,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1723827150
    },
    {
        "content": "<p>(I'll admit that setting up these basic inductions seems to be less obvious than it should be! I remember it taking awhile to discover these patterns and getting the hang of them.)</p>",
        "id": 462826484,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1723827797
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover/lean4/pull/4246\">lean4#4246</a> tracks making <code>Fintype.induction_empty_option</code> work with <code>induction using</code></p>",
        "id": 462865822,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1723848018
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"743246\">jsodd</span> has marked this topic as resolved.</p>",
        "id": 463223800,
        "sender_full_name": "Notification Bot",
        "timestamp": 1724007989
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"743246\">@jsodd</span> you don't have to resolve topics (and indeed we encourage people not to).</p>",
        "id": 464284952,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1724311867
    }
]