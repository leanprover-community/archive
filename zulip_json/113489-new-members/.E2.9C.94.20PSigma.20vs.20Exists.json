[
    {
        "content": "<p>Hi All. First post here. Kinda nervous. I'm new to Lean and Type Theory. I am working my way through the HOTT book and have encountered the <em>type-theoretic \"axiom\" of choice</em> in Section 1.16. It seems you cannot define ac using <code>Sigma</code> or <code>Exists</code> in Lean. But I have successfully encoded the Prop-valued version of <code>ac</code> in Lean4 using <code>PSigma</code> (see below). My (purely academic and probably impractical) question is, if I state my theorems using <code>PSigma</code> instead of <code>Exists</code>, am I making weaker statements and in what way? </p>\n<p>I suspect this question is answered somewhere in a way I just don't yet understand, so any pointers to the docs would be appreciated. </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">ac</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">A</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"o\">}</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">Σ'</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">Σ'</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"w\"> </span><span class=\"bp\">λ</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">PSigma</span><span class=\"bp\">.</span><span class=\"n\">fst</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"bp\">λ</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">PSigma</span><span class=\"bp\">.</span><span class=\"n\">snd</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"bp\">⟩</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">Σ'</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">le</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">)</span>\n<span class=\"w\">      </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">λ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">PSigma</span><span class=\"bp\">.</span><span class=\"n\">mk</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">le_succ</span><span class=\"o\">)</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">ac</span><span class=\"w\"> </span><span class=\"n\">g</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">le</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"bp\">.</span><span class=\"n\">fst</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"bp\">.</span><span class=\"n\">snd</span><span class=\"w\"> </span><span class=\"n\">x</span>\n</code></pre></div>",
        "id": 486584902,
        "sender_full_name": "Eric K",
        "timestamp": 1733514889
    },
    {
        "content": "<p>on the contrary using <code>PSigma</code> or <code>Sigma</code> makes your statements stronger wrt <code>Exists</code>, but <code>Sigma</code> does not allow for <code>Prop</code> valued arguments while <code>PSigma</code> does. if you're looking at the hott book look at the chapter section called propositional truncation</p>",
        "id": 486585193,
        "sender_full_name": "nrs",
        "timestamp": 1733515017
    },
    {
        "content": "<p><a href=\"https://leanprover.github.io/theorem_proving_in_lean4/\">#tpil</a> chapter 7 also covers the relationship between <code>Sigma</code> and <code>Exists</code></p>",
        "id": 486585903,
        "sender_full_name": "nrs",
        "timestamp": 1733515310
    },
    {
        "content": "<p>if you want to formalize the hott book there is also a formalization of most of the Hott book in Agda on github that is worth looking into (but imo translating Agda is better left to when you're more comfortable with Lean in general. it is just nice to know that resource is there)</p>",
        "id": 486586766,
        "sender_full_name": "nrs",
        "timestamp": 1733515681
    },
    {
        "content": "<p>Thanks. I think my confusion is that Lean seems to use <code>Classical.choice</code> to enable AC for <code>Exists</code>, but AC is already definable in terms of <code>PSigma</code>.</p>\n<p>Also the docs say <code>PSigma</code> is \"usually only used in automation\", so I shouldn't be using it in my theorems?</p>\n<p>Thanks for the Agda link, I'll check that out !  I'm mainly doing this translation to test my understanding of Type Theory as opposed to trying to contribute something new to the world.</p>",
        "id": 486588031,
        "sender_full_name": "Eric K",
        "timestamp": 1733516190
    },
    {
        "content": "<p>what you've written above is not strictly speaking the classical axiom of choice, since <code>g</code> offers a function that picks a value within a sigma type</p>",
        "id": 486588382,
        "sender_full_name": "nrs",
        "timestamp": 1733516331
    },
    {
        "content": "<p>the distinguishing difference between a type-theoretical non-classical choice function and the one posited by the axiom of choice is that the axiom of choice posits the existence of this function (and gives no detail of what it consists of), while you've given a construction of this function edit: it is also worthwhile to give a read to <a href=\"https://leanprover-community.github.io/mathlib4_docs/Init/Prelude.html#Classical.choice\">https://leanprover-community.github.io/mathlib4_docs/Init/Prelude.html#Classical.choice</a> and compare its code with the above</p>",
        "id": 486588513,
        "sender_full_name": "nrs",
        "timestamp": 1733516389
    },
    {
        "content": "<p>Thanks. This helps. I shall go back to studying!</p>",
        "id": 486591786,
        "sender_full_name": "Eric K",
        "timestamp": 1733517906
    },
    {
        "content": "<p>good luck feel free to post more questions</p>",
        "id": 486591927,
        "sender_full_name": "nrs",
        "timestamp": 1733517970
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"763114\">Eric Klavins</span> <a href=\"#narrow/channel/113489-new-members/topic/PSigma.20vs.20Exists/near/486588031\">said</a>:</p>\n<blockquote>\n<p>usually only used in automation</p>\n</blockquote>\n<p>The reason for this is that the universe level of <code>PSigma</code> is a bit annoying, vs using <code>Exists</code> or <code>And</code> or <code>Sigma</code> or <code>Prod</code> or <code>Subtype</code>, based on whatever applies in a particular context. The issue is that <code>max 1 ..</code> in there, which can obstruct universe level unification.</p>\n<p><span class=\"user-mention silent\" data-user-id=\"763114\">Eric Klavins</span> <a href=\"#narrow/channel/113489-new-members/topic/PSigma.20vs.20Exists/near/486588031\">said</a>:</p>\n<blockquote>\n<p>but AC is already definable in terms of <code>PSigma</code>.</p>\n</blockquote>\n<p>The type of <code>PSigma</code> lies in <code>Type _</code> rather than <code>Prop</code>, so the recursor is able to extract the data from <code>PSigma </code> without any need for an axiom. Since <code>Exists</code> is in <code>Prop</code> it doesn't carry any data; the recursor <code>Exists.rec</code> only eliminates into <code>Prop</code> is how that's represented.</p>",
        "id": 486629163,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1733543009
    },
    {
        "content": "<p>Thanks Kyle.  It is quite interesting to see how the library manages these concepts.</p>",
        "id": 486677053,
        "sender_full_name": "Eric K",
        "timestamp": 1733583577
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"763114\">Eric K</span> has marked this topic as resolved.</p>",
        "id": 486713887,
        "sender_full_name": "Notification Bot",
        "timestamp": 1733613772
    }
]