[
    {
        "content": "<p>Is there a way to see a list of instances for a given type class...? Maybe some way in Loogle or the standard library docs? It would be helpful as someone new to the language to see a list of type class instances, as that would make it clear that they have so many different applications.</p>",
        "id": 535907922,
        "sender_full_name": "J. Ryan Stinnett",
        "timestamp": 1756048197
    },
    {
        "content": "<p>Hey <span aria-label=\"wave\" class=\"emoji emoji-1f44b\" role=\"img\" title=\"wave\">:wave:</span> yes there is. Any specific typeclass you would like to know instances of?</p>",
        "id": 535908065,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1756048325
    },
    {
        "content": "<p>Ah great! Not particularly, feel free to use any type class as an example... I am still quite new to the language, so I only really know about the \"foundational\" ones like <code>Monad</code> and such that are mentioned in the FP in Lean book so far.</p>",
        "id": 535908290,
        "sender_full_name": "J. Ryan Stinnett",
        "timestamp": 1756048542
    },
    {
        "content": "<p>If you click on <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Monad#doc\">docs#Monad</a>, you can uncollapse \"Instances\" at the bottow, which contains the info you want</p>",
        "id": 535909335,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1756049617
    },
    {
        "content": "<p>Ah okay, thanks! <span aria-label=\"smile\" class=\"emoji emoji-1f604\" role=\"img\" title=\"smile\">:smile:</span> I guess the related \"Instances For\" list that some other items have in the docs shows all instances of different type classes that might be implemented for that item.</p>",
        "id": 535909893,
        "sender_full_name": "J. Ryan Stinnett",
        "timestamp": 1756050201
    },
    {
        "content": "<p>If you import <code>Batteries.Tactic.Instances</code>, it gives the <code>#instances</code> command, which you can use to print out every instance that could <em>potentially</em> apply, given enough additional instances. For example:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Batteries</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span><span class=\"bp\">.</span><span class=\"n\">Instances</span><span class=\"w\"> </span><span class=\"c1\">-- optional, implied by Mathlib</span>\n\n<span class=\"bp\">#</span><span class=\"n\">instances</span><span class=\"w\"> </span><span class=\"n\">Monad</span><span class=\"w\"> </span><span class=\"n\">Option</span>\n<span class=\"c\">/-</span>\n<span class=\"cm\">4 instances:</span>\n\n<span class=\"cm\">instMonadOption.{u_1} : Monad Option</span>\n<span class=\"cm\">AlternativeMonad.toMonad.{u_1, u_2} {m : Type u_1 → Type u_2} [self : AlternativeMonad m] : Monad m</span>\n<span class=\"cm\">Std.Internal.IO.Async.MonadAsync.toMonad (t : Type → Type) {m : Type → Type}</span>\n<span class=\"cm\">  [self : Std.Internal.IO.Async.MonadAsync t m] : Monad m</span>\n<span class=\"cm\">Std.Internal.IO.Async.MonadAwait.toMonad (t : Type → Type) {m : Type → Type}</span>\n<span class=\"cm\">  [self : Std.Internal.IO.Async.MonadAwait t m] : Monad m</span>\n<span class=\"cm\">-/</span>\n</code></pre></div>\n<p>(The last two are probably irrelevant!)</p>\n<p>If you do <code>#instances Monad</code>, it's the same as <code>#instances Monad _</code>, and that shows all instances, like in <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Monad#doc\">docs#Monad</a>.</p>\n<p>The <code>#synth</code> command can also be useful. It tries to actually synthesize an instance, but if it fails to fully synthesize an instance it fails to report anything. (It'd be neat if it would try diagnosing why not. Maybe one day!)</p>\n<p>The difference between <code>#instances</code> and <code>#synth</code> is that <code>#instances</code> is \"one-step\" of <code>#synth</code>. It reports all the instances that instance synthesis would use of for the given instance.</p>",
        "id": 535910435,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1756050908
    },
    {
        "content": "<p>The <code>#instances</code> command is sort of a convenience, since the information is all available if you enable the right trace class and know where to look:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">set_option</span><span class=\"w\"> </span><span class=\"n\">trace</span><span class=\"bp\">.</span><span class=\"n\">Meta</span><span class=\"bp\">.</span><span class=\"n\">synthInstance</span><span class=\"w\"> </span><span class=\"n\">true</span>\n\n<span class=\"bp\">#</span><span class=\"n\">synth</span><span class=\"w\"> </span><span class=\"n\">Monad</span><span class=\"w\"> </span><span class=\"n\">Option</span>\n<span class=\"c\">/-</span>\n<span class=\"cm\">[Meta.synthInstance] ✅️ Monad Option ▼</span>\n<span class=\"cm\">  [] new goal Monad Option ▼</span>\n<span class=\"cm\">    [instances] #[Std.Internal.IO.Async.MonadAwait.toMonad, Std.Internal.IO.Async.MonadAsync.toMonad, @AlternativeMonad.toMonad, instMonadOption]</span>\n<span class=\"cm\">  [] ✅️ apply instMonadOption to Monad Option ▶</span>\n<span class=\"cm\">  [] result instMonadOption</span>\n<span class=\"cm\">-/</span>\n</code></pre></div>\n<p>Instead of <code>#instances Monad</code>, you have to write <code>#synth Monad _</code>.</p>",
        "id": 535910679,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1756051206
    },
    {
        "content": "<p>Ah okay, thanks for those additional tips! <span aria-label=\"smile\" class=\"emoji emoji-1f604\" role=\"img\" title=\"smile\">:smile:</span> I wonder what other helpful commands similar to <code>#instances</code> are out there...</p>",
        "id": 535911100,
        "sender_full_name": "J. Ryan Stinnett",
        "timestamp": 1756051715
    }
]