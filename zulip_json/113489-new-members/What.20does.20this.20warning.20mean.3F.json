[
    {
        "content": "<p>What does the following warning mean?</p>\n<blockquote>\n<p>'simp [h_k, Nat.segment', Nat.count_succ, -mem_range]' is a flexible tactic modifying '⊢'…<br>\nNote: This linter can be disabled with <code>set_option linter.flexible false</code></p>\n</blockquote>",
        "id": 544456292,
        "sender_full_name": "Ching-Tsun Chou",
        "timestamp": 1760331533
    },
    {
        "content": "<p>This means that you used simp on the goal before using a tactic like rw or exact</p>",
        "id": 544457971,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1760332425
    },
    {
        "content": "<p>You can squeeze the simp with <code>simp?</code> if you really have to use it in a non-terminal way (ie not closing a goal)</p>",
        "id": 544461857,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1760334741
    },
    {
        "content": "<p>should we have better docstring here?</p>",
        "id": 544462545,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1760335100
    },
    {
        "content": "<p>What's wrong with using <code>simp</code> before <code>rw</code> or <code>exact</code>?</p>\n<p>Anyway, following Kevin's suggestion, I used <code>simp?</code> to produce a <code>simp only</code> that removed the warning:<br>\n<a href=\"https://github.com/ctchou/cslib/commit/61661be3ddc4273232017fa27fdd2012d350582a\">https://github.com/ctchou/cslib/commit/61661be3ddc4273232017fa27fdd2012d350582a</a><br>\nAs you can see, it seems that not every offending <code>simp</code> is before <code>rw</code> or <code>exact</code>.</p>",
        "id": 544465455,
        "sender_full_name": "Ching-Tsun Chou",
        "timestamp": 1760336317
    },
    {
        "content": "<p>The warning means that you used a flexible tactic (e.g. simp) before a rigid tactic (e.g. lots of tactics, including rw and exact). The reason it's there is for maintainability issues -- people sometimes add or remove lemmas from the simp set in mathlib and proofs with a simp in the middle that break because of this are a pain to fix (because it's hard to tell what the simp call used to be doing without getting a second version of the repo up and running with the older version of mathlib when it worked).</p>",
        "id": 544467039,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1760336977
    },
    {
        "content": "<p>But this checking doesn't seem to be turned on by default in a project using mathlib.  In my own project using mathlib, I had never seen this warning.  Now I'm working on something in cslib and I see its lakefile.toml contains:</p>\n<div class=\"codehilite\" data-code-language=\"TOML\"><pre><span></span><code><span class=\"k\">[leanOptions]</span>\n<span class=\"n\">weak</span><span class=\"p\">.</span><span class=\"n\">linter</span><span class=\"p\">.</span><span class=\"n\">mathlibStandardSet</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"kc\">true</span>\n<span class=\"n\">weak</span><span class=\"p\">.</span><span class=\"n\">linter</span><span class=\"p\">.</span><span class=\"n\">flexible</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"kc\">true</span>\n</code></pre></div>\n<p>Shouldn't this checking be turned on by default, if it is a good idea?</p>",
        "id": 544468404,
        "sender_full_name": "Ching-Tsun Chou",
        "timestamp": 1760337551
    },
    {
        "content": "<p>I understand we're working on it, at least for mathlib</p>",
        "id": 544535995,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1760357663
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/28962\">https://github.com/leanprover-community/mathlib4/pull/28962</a><br>\n<a href=\"https://github.com/leanprover-community/mathlib4/pull/30092\">https://github.com/leanprover-community/mathlib4/pull/30092</a></p>",
        "id": 544722529,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1760441188
    }
]