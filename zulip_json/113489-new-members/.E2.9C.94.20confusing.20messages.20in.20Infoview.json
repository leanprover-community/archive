[
    {
        "content": "<p>Hi,</p>\n<p>I'm getting weird messages in Infoview.  </p>\n<p>The following works fine:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span>\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">aleb</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">)</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">aleb</span>\n</code></pre></div>\n<p>But with</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span>\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">aleb</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">)</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">test</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">aleb</span>\n</code></pre></div>\n<p>Infoview tells me <code>unknown identifier 'aleb'</code> at line 4.</p>\n<p>Even more confusingly, with</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span>\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">aleb</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">)</span>\n\n<span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">test</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">aleb</span>\n</code></pre></div>\n<p>I get <code>unexpected identifier; expected command</code> at line 4.</p>\n<p>and</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span>\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">aleb</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">)</span>\n\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">aleb</span>\n\n<span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">test</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">aleb</span>\n</code></pre></div>\n<p>yields</p>\n<div class=\"codehilite\" data-code-language=\"Text only\"><pre><span></span><code>function expected at\n  aleb\nterm has type\n  a ≤ b\n</code></pre></div>\n<p>at line 4...</p>\n<p>Any idea why I get these different behaviors?</p>",
        "id": 481155244,
        "sender_full_name": "Yannick Seurin",
        "timestamp": 1730996449
    },
    {
        "content": "<ul>\n<li><code>example</code> is like <code>def</code>, not like <code>theorem</code>, when it comes to the meaning of variables</li>\n<li>with <code>theorem</code>, only variables mentioned in the type are in scope, this is a recent change, see the first paragraph of <a href=\"https://github.com/leanprover/lean4/releases/tag/v4.11.0\">https://github.com/leanprover/lean4/releases/tag/v4.11.0</a></li>\n<li><code>lemma</code> is a mathlib-only command; try <code>import Mathlib</code> and it should behave like <code>theorem</code></li>\n</ul>",
        "id": 481157565,
        "sender_full_name": "Joachim Breitner",
        "timestamp": 1730997140
    },
    {
        "content": "<p>The issue with theorem is that by default, the only variables available in the proof are those mentioned in the statement of the theorem (which is not the case of <code>abel</code>). To solve this you can write <code>include abel</code> above to automatically include it.<br>\nFor the last error, it is because the <code>#check</code> command is not available, <code>import Mathlib</code> at the top solves it.</p>",
        "id": 481157673,
        "sender_full_name": "Etienne Marion",
        "timestamp": 1730997177
    },
    {
        "content": "<p>Thanks a lot for your perfectly concomitant answers! This was driving me mad, I was pretty convinced <code>example</code>, <code>theorem</code>, and <code>lemma</code> behaved the same way...<br>\n(<span class=\"user-mention\" data-user-id=\"703970\">@Etienne Marion</span> I guess you mean the <code>lemma</code> command is not available, <code>#check</code> works fine without Mathlib.)</p>",
        "id": 481199153,
        "sender_full_name": "Yannick Seurin",
        "timestamp": 1731013146
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"756493\">Yannick Seurin</span> has marked this topic as resolved.</p>",
        "id": 481199183,
        "sender_full_name": "Notification Bot",
        "timestamp": 1731013162
    }
]