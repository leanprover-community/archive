[
    {
        "content": "<p>Hi everyone</p>\n<p>I want to construct a list from <code>n : Nat</code> using <code>List.range n</code> and return<br>\na List of type <code>List (Fin n)</code>.<br>\nI am getting stuck on proving that a given i of the list is in the range.<br>\nIn particular, how to prove that <code>i ∈ List.range n</code> when using map on the range?</p>\n<p>I have the theorem:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">mem_range_right</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">range</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span><span class=\"o\">[</span><span class=\"bp\">*</span><span class=\"o\">]</span>\n</code></pre></div>\n<p>and thus the structure:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">range_fin'</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">range</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">range</span><span class=\"w\"> </span><span class=\"n\">n</span>\n<span class=\"w\">  </span><span class=\"n\">range</span><span class=\"bp\">.</span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"o\">(</span>\n<span class=\"w\">    </span><span class=\"bp\">λ</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">      </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">range</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n<span class=\"w\">      </span><span class=\"bp\">⟨</span><span class=\"n\">i</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">mem_range_right</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"bp\">⟩</span>\n<span class=\"w\">  </span><span class=\"o\">)</span>\n</code></pre></div>\n<p>Does anyone know how to prove that <code>i ∈ range</code> in the above code?<br>\nIt should be trivial ;D</p>",
        "id": 487283141,
        "sender_full_name": "Curious Joe",
        "timestamp": 1733845656
    },
    {
        "content": "<p>do you know about <a href=\"https://leanprover-community.github.io/mathlib4_docs/Init/Data/List/FinRange.html#List.finRange\">List.finRange</a>?</p>",
        "id": 487283654,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1733845752
    },
    {
        "content": "<p>(since that seems to be your end goal)</p>",
        "id": 487284029,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1733845810
    },
    {
        "content": "<p>oh wow; no I didn't; can't believe neither <a href=\"http://moogle.ai\">moogle.ai</a> nor ChatGPT told me about that one!! :D</p>\n<p>but thanks a lot, that is literally the end goal I wanted :)</p>",
        "id": 487284188,
        "sender_full_name": "Curious Joe",
        "timestamp": 1733845841
    },
    {
        "content": "<p>if you're doing this as an exercise, you might be interested in <a href=\"https://leanprover-community.github.io/mathlib4_docs/Init/Data/List/Attach.html#List.attach\">List.attach</a></p>",
        "id": 487284375,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1733845872
    },
    {
        "content": "<p>thanks a lot! I did indeed not want to use mathlib; this worked for me:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">range_fin</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">range</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">range</span><span class=\"w\"> </span><span class=\"n\">n</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">out</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">range</span><span class=\"bp\">.</span><span class=\"n\">attach</span><span class=\"bp\">.</span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"o\">(</span>\n<span class=\"w\">    </span><span class=\"bp\">λ</span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">i</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">mem_range_right</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"bp\">.</span><span class=\"n\">property</span><span class=\"bp\">⟩</span>\n<span class=\"w\">  </span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"n\">out</span>\n</code></pre></div>",
        "id": 487286586,
        "sender_full_name": "Curious Joe",
        "timestamp": 1733846393
    },
    {
        "content": "<p>(neither of those are defined in mathlib)</p>",
        "id": 487288642,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1733846898
    },
    {
        "content": "<p>okay sorry; my LSP showed me when searching for List.finRange and I don't have mathlib so I thought it was there.<br>\nIt is in the <a href=\"https://leanprover-community.github.io/mathlib4_docs/Init/Data/List/FinRange.html#List.finRange\">docs</a>, though?</p>",
        "id": 487289515,
        "sender_full_name": "Curious Joe",
        "timestamp": 1733847134
    },
    {
        "content": "<p>it is, but the docgen also docs all things used by mathlib, so upstream things. at the top of the page, you can see that it is defined in <code>Init.Data.List.FinRange</code>, however, which is not <code>Mathlib.Foo</code></p>",
        "id": 487291128,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1733847553
    },
    {
        "content": "<p>Ah yes, thanks for teaching me, it pays well to be part of the community here at Zulip :=)</p>",
        "id": 487294242,
        "sender_full_name": "Curious Joe",
        "timestamp": 1733848374
    }
]