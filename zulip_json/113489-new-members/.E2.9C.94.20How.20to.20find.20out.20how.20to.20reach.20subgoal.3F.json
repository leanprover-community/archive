[
    {
        "content": "<p>Recently I've started using <code>apply? using</code> to find relevant lemmas. E.g.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℚ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h'</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">linarith</span>\n<span class=\"w\">  </span><span class=\"c1\">-- apply? using h'</span>\n<span class=\"w\">  </span><span class=\"n\">refine</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">le_div_iff₀</span><span class=\"w\"> </span><span class=\"n\">h'</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">mpr</span><span class=\"w\"> </span><span class=\"bp\">?_</span>\n\n<span class=\"w\">  </span><span class=\"n\">linarith</span>\n</code></pre></div>\n<p>Here, I knew I will have to use assumption <code>a &gt; 0</code> to simplify the expression. Hovewer, is it possible to ask lean engine to find how to reach some goal? In this case, I would want to ask how modify the goal to reach <code>0 ≤ (a - 1)</code>. Or in other words, I would want to split the goal into two cases <code>0 ≤ (a - 1)</code> and <code>0 ≤ (a - 1) → 0 ≤ (a - 1) / a</code>. If I could do that, than I think I can try to use <code>exact?</code> or <code>simp?</code> in second goal to try and find the proof.</p>",
        "id": 526133206,
        "sender_full_name": "Jakub Nowak",
        "timestamp": 1751048123
    },
    {
        "content": "<p>I guess <code>have h : 0 ≤ (a - 1) := by sorry</code> and now you have two tactic sequences</p>",
        "id": 526133508,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1751048246
    },
    {
        "content": "<p>Is there a tactic like <code>have</code> but with the order of the two subgoals swapped?</p>",
        "id": 526133861,
        "sender_full_name": "Jakub Nowak",
        "timestamp": 1751048407
    },
    {
        "content": "<p><code>suffices h : 0 ≤ (a - 1) := by sorry</code></p>",
        "id": 526134071,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1751048517
    },
    {
        "content": "<p>Thanks! That will be useful. Although, in this case it seems like lean isn't really helpful on finding the proof <code>0 ≤ a - 1 → 0 ≤ (a - 1) / a</code>. I guess that's because applying <code>le_div_iff₀</code> modifies the goal to <code>0 * a ≤ a - 1</code>, not <code>0 ≤ a - 1</code>.</p>",
        "id": 526134613,
        "sender_full_name": "Jakub Nowak",
        "timestamp": 1751048764
    },
    {
        "content": "<p>I'm guessing it's a theorem called <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=div_nonneg#doc\">docs#div_nonneg</a></p>",
        "id": 526134874,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1751048867
    },
    {
        "content": "<p>Yeah, I could use that one indeed. Although <code>exact?</code> wasn't able to find it. But using <code>apply?</code> was quite natural here, at least for me. What what I would do in the pen-and-paper proof, I would multiply both sides by <code>a</code> by using the fact that <code>a &gt; 0</code>.</p>",
        "id": 526135599,
        "sender_full_name": "Jakub Nowak",
        "timestamp": 1751049192
    },
    {
        "content": "<p>I would also skip over the fact that <code>0 * a = 0</code>, but lean wasn't able to skip that step.</p>",
        "id": 526135746,
        "sender_full_name": "Jakub Nowak",
        "timestamp": 1751049269
    },
    {
        "content": "<p><code>positivity</code> is a nice tactic here:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℚ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">linarith</span>\n<span class=\"w\">  </span><span class=\"n\">positivity</span>\n</code></pre></div>",
        "id": 526139322,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1751051054
    },
    {
        "content": "<p>Since when have we had <code>apply? using</code></p>",
        "id": 526143614,
        "sender_full_name": "Luigi Massacci",
        "timestamp": 1751053469
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"870257\">MrQubo</span> has marked this topic as resolved.</p>",
        "id": 526158538,
        "sender_full_name": "Notification Bot",
        "timestamp": 1751063377
    }
]