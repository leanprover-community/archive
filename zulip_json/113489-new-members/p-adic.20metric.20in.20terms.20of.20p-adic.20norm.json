[
    {
        "content": "<p>Hello everyone. I'm kind of new to lean and I wanted to ask following question:</p>\n<p>I'm working on some small theorems to gain familiarity with analysis and p-adic numbers in Lean 4.<br>\nI want to prove the dummy lemma stating p^k tends to zero in the p-adic metric.<br>\nI wrote the following code:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Nat</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Fact</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">Prime</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"o\">)]</span>\n\n<span class=\"kn\">noncomputable</span><span class=\"w\"> </span><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Padic</span><span class=\"bp\">.</span><span class=\"n\">prime_powers</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℚ_</span><span class=\"o\">[</span><span class=\"n\">p</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℚ_</span><span class=\"o\">[</span><span class=\"n\">p</span><span class=\"o\">])</span><span class=\"bp\">^</span><span class=\"n\">k</span>\n\n<span class=\"kn\">noncomputable</span><span class=\"w\"> </span><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">log_base</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">Real</span><span class=\"bp\">.</span><span class=\"n\">log</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"n\">Real</span><span class=\"bp\">.</span><span class=\"n\">log</span><span class=\"w\"> </span><span class=\"n\">b</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">Padic</span><span class=\"bp\">.</span><span class=\"n\">prime_powers_tends_to_zero</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">Filter</span><span class=\"bp\">.</span><span class=\"n\">Tendsto</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Padic</span><span class=\"bp\">.</span><span class=\"n\">prime_powers</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">Filter</span><span class=\"bp\">.</span><span class=\"n\">atTop</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">nhds</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℚ_</span><span class=\"o\">[</span><span class=\"n\">p</span><span class=\"o\">]))</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Metric</span><span class=\"bp\">.</span><span class=\"n\">tendsto_atTop</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">unfold</span><span class=\"w\"> </span><span class=\"n\">Padic</span><span class=\"bp\">.</span><span class=\"n\">prime_powers</span>\n<span class=\"w\">  </span><span class=\"n\">intros</span><span class=\"w\"> </span><span class=\"n\">ε</span><span class=\"w\"> </span><span class=\"n\">hε</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">N</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">floor</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">log_base</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"n\">ε</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"n\">use</span><span class=\"w\"> </span><span class=\"n\">N</span>\n<span class=\"w\">  </span><span class=\"n\">intros</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">hn</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>But somehow I cannot find a Theorem that works for me rewriting following goal</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">Dist</span><span class=\"bp\">.</span><span class=\"n\">dist</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">↑</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"n\">ε</span>\n</code></pre></div>\n<p>into its equivalent form involving the norm for metric spaces induced by a norm.</p>\n<p>How can I do this?</p>\n<p>Thanks in advance for your help!</p>",
        "id": 473086424,
        "sender_full_name": "Giulio Caflisch",
        "timestamp": 1727436731
    },
    {
        "content": "<p>Well, <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=dist_eq_norm#doc\">docs#dist_eq_norm</a> works, so you can do <code>rw [dist_eq_norm]</code> to do one more step.</p>",
        "id": 473087596,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1727437147
    },
    {
        "content": "<p>Thanks a lot, I don't know how I missed it</p>",
        "id": 473093311,
        "sender_full_name": "Giulio Caflisch",
        "timestamp": 1727439156
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"761363\">@Giulio Caflisch</span> Do you know about <code>rw?</code>. It is a tactic that searches for useful rewrite lemmas. Near the top of its list of answers is</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">@_</span><span class=\"n\">root_</span><span class=\"bp\">.</span><span class=\"n\">dist_zero_right</span><span class=\"o\">]</span>\n</code></pre></div>",
        "id": 473123286,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1727447014
    },
    {
        "content": "<p>I know about rw? and simp?. I asked about the more general conversion from distance to norm of difference since I need it in another theorem where the distance is not with respect to 0 and there rw? did not answer anything useful at all.</p>",
        "id": 473131980,
        "sender_full_name": "Giulio Caflisch",
        "timestamp": 1727449549
    },
    {
        "content": "<p>Oh, that's unfortunate.</p>",
        "id": 473168832,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1727458183
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"644391\">@loogle</span>  Dist.dist ?x ?y &lt; ?ε ↔ ‖?x - ?y‖ &lt; ?ε</p>",
        "id": 473169349,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1727458367
    },
    {
        "content": "<p><span aria-label=\"shrug\" class=\"emoji emoji-1f937\" role=\"img\" title=\"shrug\">:shrug:</span> nothing found</p>",
        "id": 473169351,
        "sender_full_name": "loogle",
        "timestamp": 1727458368
    },
    {
        "content": "<p>Hmmmz... That's sad</p>",
        "id": 473169386,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1727458379
    },
    {
        "content": "<p>Ooh, I'm being silly</p>",
        "id": 473169446,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1727458404
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"644391\">@loogle</span>  Dist.dist ?x ?y = ‖?x - ?y‖</p>",
        "id": 473169507,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1727458423
    },
    {
        "content": "<p><span aria-label=\"search\" class=\"emoji emoji-1f50d\" role=\"img\" title=\"search\">:search:</span> <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Analysis/Normed/Group/Basic.html#dist_eq_norm\">dist_eq_norm</a>, <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Analysis/Normed/Group/Basic.html#dist_eq_norm_sub\">dist_eq_norm_sub</a>, and <a href=\"https://loogle.lean-lang.org/?q=Dist.dist%20%3Fx%20%3Fy%20%3D%20%E2%80%96%3Fx%20-%20%3Fy%E2%80%96\">27 more</a></p>",
        "id": 473169510,
        "sender_full_name": "loogle",
        "timestamp": 1727458424
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"761363\">@Giulio Caflisch</span> Voila: loogle is your friend</p>",
        "id": 473169545,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1727458437
    }
]