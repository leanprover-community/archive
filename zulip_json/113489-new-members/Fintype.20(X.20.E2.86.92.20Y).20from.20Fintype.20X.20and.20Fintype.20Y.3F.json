[
    {
        "content": "<p>It does not seem possible to infer Fintype (X → Y) from Fintype X and Fintype Y but I'm struggling to see why and what extra assumptions I would need...</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"n\">Y</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Fintype</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Fintype</span><span class=\"w\"> </span><span class=\"n\">Y</span><span class=\"o\">]</span>\n\n<span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fintype</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">×</span><span class=\"w\"> </span><span class=\"n\">Y</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">inferInstance</span><span class=\"w\"> </span><span class=\"c1\">-- works</span>\n\n<span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fintype</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Bool</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">inferInstance</span><span class=\"w\"> </span><span class=\"c1\">-- works</span>\n\n<span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fintype</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Y</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">inferInstance</span><span class=\"w\"> </span><span class=\"c1\">-- failed to synthesize Fintype (X → Y)</span>\n</code></pre></div>",
        "id": 544526795,
        "sender_full_name": "Yannick Seurin",
        "timestamp": 1760355206
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"756493\">@Yannick Seurin</span> you're looking for <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Data/Fintype/Pi.html#Pi.instFintype\">Pi.instFintype</a>, and you need <code>X</code> to be discrete</p>",
        "id": 544527028,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1760355282
    },
    {
        "content": "<p>but actually i don't see why you would need that...</p>",
        "id": 544527160,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1760355329
    },
    {
        "content": "<p>I'd like to define the uniform distribution on the space of functions from <code>X</code> to <code>Y</code> using <code>PMF.uniformOfFintype</code></p>",
        "id": 544527941,
        "sender_full_name": "Yannick Seurin",
        "timestamp": 1760355563
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"756493\">@Yannick Seurin</span> well, do you care about making things computable, and why?</p>",
        "id": 544528056,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1760355597
    },
    {
        "content": "<p>because classically you can just assume that every type is discrete</p>",
        "id": 544528159,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1760355619
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110064\">Kenny Lau</span> <a href=\"#narrow/channel/113489-new-members/topic/Fintype.20.28X.20.E2.86.92.20Y.29.20from.20Fintype.20X.20and.20Fintype.20Y.3F/near/544527160\">said</a>:</p>\n<blockquote>\n<p>but actually i don't see why you would need that...</p>\n</blockquote>\n<p>actually I think I see it now, let's say you have X = {a1, a2} and Y = {b1, b2}, now you want to build 4 functions X -&gt; Y, so let's say the first function sends a1 to b1 and a2 to b2... oh wait, how do you decide if the given input is a1 or a2?</p>",
        "id": 544528366,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1760355685
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"756493\">@Yannick Seurin</span> but all this detail is unnecessary, we've decided long ago in mathlib that we don't care about computability, we would just classically assume everything is decidable and move on with our lives</p>",
        "id": 544528515,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1760355728
    },
    {
        "content": "<p>Hm, no I don't care about computability. Does that mean I can work with <code>[Finite X]</code> and <code>[Finite Y]</code>?</p>",
        "id": 544528551,
        "sender_full_name": "Yannick Seurin",
        "timestamp": 1760355738
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"756493\">@Yannick Seurin</span> if your goal is to do mathematics you may prefer to use <code>Finite</code> instead of <code>Fintype</code></p>",
        "id": 544528555,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1760355739
    },
    {
        "content": "<p>and Nat.card instead of Fintype.card</p>",
        "id": 544528691,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1760355778
    },
    {
        "content": "<p>and put <code>have := Classical.propDecidable</code> everywhere</p>",
        "id": 544528749,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1760355797
    },
    {
        "content": "<p>I see thanks! (I'm still a bit confused about using <code>Finset</code> vs. <code>Finite</code>)</p>",
        "id": 544528802,
        "sender_full_name": "Yannick Seurin",
        "timestamp": 1760355814
    },
    {
        "content": "<p>Finset X is the type of finite sets on X</p>",
        "id": 544528836,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1760355827
    },
    {
        "content": "<p>Finite X is the prop saying that X is a finite type</p>",
        "id": 544528866,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1760355835
    },
    {
        "content": "<p>so e.g. <code>{5, 7, 10} : Finset Nat</code></p>",
        "id": 544528959,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1760355858
    },
    {
        "content": "<p>and there's nothing in <code>Finite Nat</code> because that's not a true statement</p>",
        "id": 544528984,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1760355866
    },
    {
        "content": "<p>Sorry, I meant \"I'm still a bit confused about using <code>Fintype</code> vs. <code>Finite</code>\"</p>",
        "id": 544529048,
        "sender_full_name": "Yannick Seurin",
        "timestamp": 1760355886
    },
    {
        "content": "<p>some functions in the library require Fintype because they were set up differently</p>",
        "id": 544529121,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1760355912
    },
    {
        "content": "<p>but we're slowly getting rid of them and replacing them all with Finite</p>",
        "id": 544529170,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1760355924
    },
    {
        "content": "<p>but if you do need to use one then you can either 1. assume Fintype anyway, or 2. make that instance classically using FIntype.ofFinite</p>",
        "id": 544529259,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1760355947
    },
    {
        "content": "<p>I'll go with <code>Finite</code> then! Thanks!</p>",
        "id": 544529571,
        "sender_full_name": "Yannick Seurin",
        "timestamp": 1760356034
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110064\">Kenny Lau</span> <a href=\"#narrow/channel/113489-new-members/topic/Fintype.20.28X.20.E2.86.92.20Y.29.20from.20Fintype.20X.20and.20Fintype.20Y.3F/near/544527160\">said</a>:</p>\n<blockquote>\n<p>but actually i don't see why you would need that...</p>\n</blockquote>\n<p>why not</p>",
        "id": 544534636,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1760357299
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110064\">Kenny Lau</span> <a href=\"#narrow/channel/113489-new-members/topic/Fintype.20.28X.20.E2.86.92.20Y.29.20from.20Fintype.20X.20and.20Fintype.20Y.3F/near/544529170\">said</a>:</p>\n<blockquote>\n<p>but we're slowly getting rid of them and replacing them all with Finite</p>\n</blockquote>\n<p>I would hope not</p>",
        "id": 544534816,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1760357349
    },
    {
        "content": "<p>It's still nice to be able to prove things by exhaustive checking sometimes!</p>",
        "id": 544881496,
        "sender_full_name": "Robert Maxton",
        "timestamp": 1760507544
    }
]