[
    {
        "content": "<p>What's the difference between these two ways of receiving a type class instance:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">double1</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Add</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"bp\">.</span><span class=\"n\">add</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">x</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">double2</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Add</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Add</span><span class=\"bp\">.</span><span class=\"n\">add</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">x</span>\n</code></pre></div>\n<p>Both seem to work the same?</p>",
        "id": 500063537,
        "sender_full_name": "Rado Kirov",
        "timestamp": 1739755674
    },
    {
        "content": "<p>They work the same.</p>\n<p>The second is more idiomatic, while the first lets you write <code>double (i := myInstance)</code> with named arguments.</p>",
        "id": 500063652,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1739755741
    },
    {
        "content": "<p>Got it. Is this a good place to give feedback for theorem_proving_in_lean4. The second one came out of nowhere in <a href=\"https://leanprover.github.io/theorem_proving_in_lean4/type_classes.html#numerals\">https://leanprover.github.io/theorem_proving_in_lean4/type_classes.html#numerals</a> and threw me off.</p>",
        "id": 500063851,
        "sender_full_name": "Rado Kirov",
        "timestamp": 1739755884
    },
    {
        "content": "<p>Also it seems that the examples there work with <code>nat_lit 1</code> replaced with <code>1</code>, so maybe Lean has improved since it was written.</p>",
        "id": 500063929,
        "sender_full_name": "Rado Kirov",
        "timestamp": 1739755936
    },
    {
        "content": "<p>Yeah, Lean improved and <code>nat_lit</code> doesn't seem to be needed very often anymore.</p>",
        "id": 500064129,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1739756108
    },
    {
        "content": "<p>It seems worth filing an issue: <a href=\"https://github.com/leanprover/theorem_proving_in_lean4/issues\">https://github.com/leanprover/theorem_proving_in_lean4/issues</a></p>\n<p>It should have a word about how <code>[Add a]</code> is like <code>[inst : Add a]</code> where <code>inst</code> is a fresh name.</p>\n<p>The idea here is that instance implicits tend to always be passed around using instance implicit arguments, so you very rarely will refer to them directly. The syntax makes it easy to not have to provide a name.</p>",
        "id": 500064493,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1739756369
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"306601\">Kyle Miller</span> <a href=\"#narrow/stream/113489-new-members/topic/Type.20Classes.20syntax.20question/near/500064129\">said</a>:</p>\n<blockquote>\n<p>Yeah, Lean improved and <code>nat_lit</code> doesn't seem to be needed very often anymore.</p>\n</blockquote>\n<p>Isn't it supposed to be there on principle?</p>",
        "id": 500065288,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1739756886
    },
    {
        "content": "<p>The distinction is meaningful, but specifically in <a href=\"https://leanprover.github.io/theorem_proving_in_lean4/type_classes.html#numerals\">https://leanprover.github.io/theorem_proving_in_lean4/type_classes.html#numerals</a></p>\n<p>at the end, when it says</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">The</span><span class=\"w\"> </span><span class=\"n\">second</span><span class=\"w\"> </span><span class=\"n\">argument</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">often</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"n\">as</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"n\">above</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">or</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">raw</span><span class=\"w\"> </span><span class=\"n\">natural</span><span class=\"w\"> </span><span class=\"n\">number</span><span class=\"bp\">.</span>\n</code></pre></div>\n<p>I get the code to compile without <code>nat_num</code></p>",
        "id": 500065871,
        "sender_full_name": "Rado Kirov",
        "timestamp": 1739757321
    },
    {
        "content": "<p>I am sure there are still some other places where <code>nat_num</code> is needed.</p>",
        "id": 500066181,
        "sender_full_name": "Rado Kirov",
        "timestamp": 1739757593
    }
]