[
    {
        "content": "<p>Following a good but long discussion in another thread, I've written up a blog to briefly explain <strong>just enough</strong> (for beginners) about:</p>\n<ul>\n<li>universe, types and terms</li>\n<li>the initially odd idea that proofs are elements of propositions</li>\n<li>explaining how using hypotheses in proofs is actually using proofs of propositions</li>\n</ul>\n<p>I'd welcome feedback / corrections: <a href=\"https://leanfirststeps.blogspot.com/2024/10/appendix-taxonomy.html\">https://leanfirststeps.blogspot.com/2024/10/appendix-taxonomy.html</a></p>\n<p><a href=\"/user_uploads/3121/opWdiwwxyXhNPGP2s2QSoq2I/app_taxonomy.png\">app_taxonomy.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/opWdiwwxyXhNPGP2s2QSoq2I/app_taxonomy.png\" title=\"app_taxonomy.png\"><img data-original-dimensions=\"2364x1182\" src=\"/user_uploads/thumbnail/3121/opWdiwwxyXhNPGP2s2QSoq2I/app_taxonomy.png/840x560.webp\"></a></div>",
        "id": 478347368,
        "sender_full_name": "rzeta0",
        "timestamp": 1729623047
    },
    {
        "content": "<p><code>13 = 2*6+1</code> is a proposition, not a proof. <code>rfl</code> is an example of a proof.</p>",
        "id": 478347942,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1729623291
    },
    {
        "content": "<p>Maybe this clarifies:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">Eq</span><span class=\"w\"> </span><span class=\"mi\">13</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"mi\">6</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"c1\">-- 13 = 2 * 6 + 1 : Prop</span>\n</code></pre></div>",
        "id": 478348174,
        "sender_full_name": "Arthur Paulino",
        "timestamp": 1729623390
    },
    {
        "content": "<p>If you perform a \"go to definition\" on <code>=</code>, it should take you to <code>Notation.lean</code> from core, highlighting the following line:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">macro_rules</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">`</span><span class=\"o\">(</span><span class=\"bp\">$</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"n\">y</span><span class=\"o\">)</span><span class=\"w\">  </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"bp\">`</span><span class=\"o\">(</span><span class=\"n\">binrel</span><span class=\"bp\">%</span><span class=\"w\"> </span><span class=\"n\">Eq</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"n\">y</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>That is, <code>a = b</code> is syntax sugar for <code>Eq a b</code></p>\n<p>For further investigation, it might be worth checking the definition of <code>Eq</code>. The docstring is quite rich</p>",
        "id": 478348638,
        "sender_full_name": "Arthur Paulino",
        "timestamp": 1729623590
    },
    {
        "content": "<p>And this is a very raw example:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Eq</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Eq</span><span class=\"bp\">.</span><span class=\"n\">refl</span><span class=\"w\"> </span><span class=\"mi\">3</span>\n</code></pre></div>",
        "id": 478350596,
        "sender_full_name": "Arthur Paulino",
        "timestamp": 1729624231
    },
    {
        "content": "<p>I think this has made realise I don't actually know what a proof is, despite having written  many of them in lean exercises!</p>\n<p>Consider <code>Odd 13</code>. This is a proposition, I think we can agree on this.</p>\n<p>The following is a lean proof if this proposition:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Odd</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">13</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">)</span><span class=\"w\">  </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">use</span><span class=\"w\"> </span><span class=\"mi\">6</span>\n<span class=\"w\">  </span><span class=\"n\">norm_num</span>\n</code></pre></div>\n<p>So my understanding that <code>example</code> is the proof of the proposition <code>Odd (13:ℤ)</code>, but <code>example</code> is a special case where the name of the proof is discarded and cannot be referred to later. </p>\n<p>In any case,  the code after <code>:=</code> is equivalent to the proof, so the proof is all the code <code>use 6; norm_num</code>.</p>\n<hr>\n<p>Here is another example:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IsSquare</span><span class=\"w\"> </span><span class=\"mi\">9</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">use</span><span class=\"w\"> </span><span class=\"mi\">3</span>\n</code></pre></div>\n<p>Here the proposition is <code>IsSquare 9</code>, and the proof is <code>use 3</code>. Is that a better simpler example of a proof?</p>\n<hr>\n<p>So is it the case that many proofs are actually tactics?</p>\n<p>I guess the core question I'm asking is \"<strong>what are examples of proofs?</strong>\" - and I realise this is an odd question to ask given I've been writing dozens of lean proofs as I do the Mechanics of Proof course.</p>",
        "id": 478363379,
        "sender_full_name": "rzeta0",
        "timestamp": 1729629345
    },
    {
        "content": "<blockquote>\n<p>So is it the case that many proofs are actually tactics?</p>\n</blockquote>\n<p>No, tactics construct the term that is the \"proof term\". No, <code>example</code> is not the proof of the proposition. Instead, <code>example : T := term</code> is the command that tells Lean \"I am about to provide a term of type T, please check that for me, and don't worry about remembering this fact\"</p>",
        "id": 478363731,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1729629502
    },
    {
        "content": "<p>The entire expression</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">use</span><span class=\"w\"> </span><span class=\"mi\">6</span>\n<span class=\"w\">  </span><span class=\"n\">norm_num</span>\n</code></pre></div>\n<p>evaluates to a proof.</p>\n<p>You can use <code>by?</code> to see what proof it evaluates to. Don't expect to understand it! It's like trying to read assembly code from compiler output.</p>",
        "id": 478363763,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1729629515
    },
    {
        "content": "<p>and it just so happens that one can construct a term using tactics because the <code>by</code> keyword means \"I am about to give you a term through constructing it using tactics\".</p>\n<p>You might be familiar with <code>exact</code>. That is a keyword that says \"I am about to give you a tactic that provides precisely the term to follow\".</p>",
        "id": 478363963,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1729629608
    },
    {
        "content": "<p>Note the dual nature between <code>by</code> and <code>exact</code></p>",
        "id": 478363995,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1729629621
    },
    {
        "content": "<p>You can wonder philosophically about whether <code>by use 6; norm_num</code> <em>is</em> the proof itself, but in any case, that (or what it evaluates to) is the proof, whose type is <code>Odd (13: ℤ)</code>.</p>",
        "id": 478364001,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1729629627
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"724904\">rzeta0</span> <a href=\"#narrow/channel/113489-new-members/topic/Taxonomy/near/478363379\">said</a>:</p>\n<blockquote>\n<p>\"<strong>what are examples of proofs?</strong>\"</p>\n</blockquote>\n<p>Arthur has already given you an example of <code>Eq.refl 3</code> as a proof.</p>",
        "id": 478364097,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1729629682
    },
    {
        "content": "<p>if you want to write it without tactics:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Odd</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">13</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"bp\">⟨</span><span class=\"mi\">6</span><span class=\"o\">,</span><span class=\"n\">rfl</span><span class=\"bp\">⟩</span>\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IsSquare</span><span class=\"w\"> </span><span class=\"mi\">9</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"bp\">⟨</span><span class=\"mi\">3</span><span class=\"o\">,</span><span class=\"n\">rfl</span><span class=\"bp\">⟩</span>\n</code></pre></div>\n<p>(<del>still cheating a bit</del> <code>rfl</code> is <em>in this case</em> not a tactic afaik, <del>but in spirit it is</del>)</p>",
        "id": 478364125,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1729629691
    },
    {
        "content": "<p>What do you mean? <code>rfl</code>-the-term is a theorem: <a href=\"https://github.com/leanprover/lean4/blob/master/src/Init/Prelude.lean#L294\">https://github.com/leanprover/lean4/blob/master/src/Init/Prelude.lean#L294</a></p>",
        "id": 478364292,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1729629763
    },
    {
        "content": "<p>huh... i didn't know that...</p>",
        "id": 478364410,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1729629818
    },
    {
        "content": "<p>(You can \"go to definition\" to be sure :-))</p>",
        "id": 478364554,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1729629872
    },
    {
        "content": "<p>You might say there's some magic to <code>rfl</code> though because the elaborator fills in the <code>a</code> argument from the expected type, though that's not magic specific to <code>rfl</code>.</p>",
        "id": 478364655,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1729629929
    },
    {
        "content": "<p>i was under the impression that there was more magic to it, i guess...</p>",
        "id": 478364701,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1729629958
    },
    {
        "content": "<p>I think to be most explicit, one would use <code>Exists.intro</code> explicitly</p>",
        "id": 478365005,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1729630086
    },
    {
        "content": "<p>Honestly, I find proof terms that involve <code>rfl</code> to be the hardest to parse.  I would probably start by looking at a \"chaining\" proof, something like <code>a &lt; b -&gt; b &lt; c -&gt; a &lt; c</code>.</p>",
        "id": 478365256,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1729630211
    },
    {
        "content": "<p>Yeah, <code>rfl</code> can be a bit subtle. Anyway, <code>@Exists.intro Nat (fun r : Nat =&gt; 9 = r * r) 3 (@Eq.refl Nat 9 : 9 = 3 * 3)</code> is a proof of <code>IsSquare 9</code>, written out in detail.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IsSquare</span><span class=\"w\"> </span><span class=\"mi\">9</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"bp\">@</span><span class=\"n\">Exists</span><span class=\"bp\">.</span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"mi\">9</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">@</span><span class=\"n\">Eq</span><span class=\"bp\">.</span><span class=\"n\">refl</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"mi\">9</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">9</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 478365483,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1729630326
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"724904\">@rzeta0</span> (if I may interject, the book \"theorem proving in lean\" starts off without tactics and immediately gets down to the nitty gritty about what proofs are and then later shows how tactics fit in starting in <a href=\"https://leanprover.github.io/theorem_proving_in_lean4/tactics.html\">chapter 5</a>)</p>",
        "id": 478365562,
        "sender_full_name": "Derek Rhodes",
        "timestamp": 1729630364
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"306601\">Kyle Miller</span> <a href=\"#narrow/channel/113489-new-members/topic/Taxonomy/near/478363763\">said</a>:</p>\n<blockquote>\n<p>The entire expression</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">use</span><span class=\"w\"> </span><span class=\"mi\">6</span>\n<span class=\"w\">  </span><span class=\"n\">norm_num</span>\n</code></pre></div>\n<p>evaluates to a proof.</p>\n</blockquote>\n<p>This is helpful.</p>\n<p>I don't know what <code>rfl</code> or <code>refl</code>is so will have to appreciate those later on my journey.</p>",
        "id": 478368279,
        "sender_full_name": "rzeta0",
        "timestamp": 1729631707
    },
    {
        "content": "<p>Why wait? Here: <code>Eq.refl a</code> is the proof that <code>a = a</code></p>",
        "id": 478369801,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1729632476
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"724904\">@rzeta0</span> I can provide the explanation I believe I would need if I were trying to understand this a while ago.</p>\n<p>It would be simpler if I could just say that a proof is a term of a type, but it sounds strange when I say that <code>3</code> is a proof of <code>Nat</code>. So a more conservative approach is to say that a proof is a term of a type when this type inhabits <code>Prop</code>. It may still be debatable, but definitely workable. So let's take it from there.</p>\n<p>The community has absorbed the terminology \"term mode\" and \"tactic mode\" to differentiate whether you're using the tactic <strong>DSL</strong> or not.</p>\n<p>For example, when I say <code>example : Eq 3 3 := Eq.refl 3</code>, I'm literally calling the (only) constructor of the <code>Eq</code> type. In a way, it's similar to <code>example : Nat := Nat.zero</code>, but the <code>Nat</code> type is not parametric.</p>\n<p>If you choose to \"enter tactic mode\" by starting your proof with <code>by</code>, it will tell Lean to spin a specific elaboration process, which is ultimately meant to produce a term of the type you're intending to inhabit. Or in other words, the type you're trying to come up with a term for.</p>\n<p>This is not common, but take a look nevertheless because it may be strangely insightful:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">three</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"mi\">3</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">three'</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"mi\">3</span>\n</code></pre></div>",
        "id": 478370177,
        "sender_full_name": "Arthur Paulino",
        "timestamp": 1729632645
    },
    {
        "content": "<p>It may be the case that the way Lean 4 code is generally written is a bit overpowered when we're trying to get to a very detailed understanding of how things work.</p>\n<p>One path is to just go with it, start your proof with <code>by</code>, live in tactic mode and get your goals closed. This is <em>definitely</em> a valid path for math students whose job is to actually learn and practice mathematics. But once you write that <code>by</code>, you're summoning a very powerful system. And at that point it's harder to point your finger at what is what.</p>",
        "id": 478371121,
        "sender_full_name": "Arthur Paulino",
        "timestamp": 1729633144
    },
    {
        "content": "<p>Two last questions on this.</p>\n<p><strong>Question 1</strong></p>\n<p>Consider <code>h: Odd 13</code>. </p>\n<p>I was told in the other thread that <code>h</code> is a proof.  So why is <code>h</code> a proof but <code>example</code> not?</p>\n<p><strong>Question 2</strong></p>\n<p>What's the difference between \"is a proof\" and \"evaluates to a proof\" ?</p>",
        "id": 478372712,
        "sender_full_name": "rzeta0",
        "timestamp": 1729633995
    },
    {
        "content": "<hr>\n<p><span class=\"user-mention\" data-user-id=\"451983\">@Arthur Paulino</span> - thanks for trying hard to help. Sadly I'm still a beginner and so I didn't fully understand your examples. Maybe I will in a few weeks/months time.</p>\n<p>In particular I wanted to understand your <code>three</code> and <code>three'</code> examples but I am not seeing the key lesson. Is the idea that <code>by exact</code> will eventual return something that is equivalent to <code>3</code> ?</p>",
        "id": 478373241,
        "sender_full_name": "rzeta0",
        "timestamp": 1729634284
    },
    {
        "content": "<p>So, if you have</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IsSquare</span><span class=\"w\"> </span><span class=\"mi\">9</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"bp\">@</span><span class=\"n\">Exists</span><span class=\"bp\">.</span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"mi\">9</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">@</span><span class=\"n\">Eq</span><span class=\"bp\">.</span><span class=\"n\">refl</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"mi\">9</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">9</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>then probably one would not say that the example is a proof, but <code>@Exists.intro Nat (fun r : Nat =&gt; 9 = r * r) 3 (@Eq.refl Nat 9 : 9 = 3 * 3)</code> is.</p>\n<p>Say you are in the middle of a proof, and you need this fact, you can write</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">H</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IsSquare</span><span class=\"w\"> </span><span class=\"mi\">9</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">...</span><span class=\"w\"> </span><span class=\"n\">proof</span><span class=\"w\"> </span><span class=\"bp\">...</span><span class=\"o\">]</span>\n</code></pre></div>\n<p>At this point, if you have a hypothesis <code>h : IsSquare 9</code>, you could write in particular</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">H</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IsSquare</span><span class=\"w\"> </span><span class=\"mi\">9</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">h</span>\n</code></pre></div>\n<p>or you could reuse the proof of the example:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">H</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IsSquare</span><span class=\"w\"> </span><span class=\"mi\">9</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">@</span><span class=\"n\">Exists</span><span class=\"bp\">.</span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"mi\">9</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">@</span><span class=\"n\">Eq</span><span class=\"bp\">.</span><span class=\"n\">refl</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"mi\">9</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">9</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>but you could not write</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">H</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IsSquare</span><span class=\"w\"> </span><span class=\"mi\">9</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"bp\">...</span>\n</code></pre></div>",
        "id": 478373329,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1729634337
    },
    {
        "content": "<p>Does any of that make sense?</p>",
        "id": 478373406,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1729634388
    },
    {
        "content": "<p>To the question you asked me, yes. That's the idea. <code>by exact 3</code> is taking a slightly longer path but it gets <em>elaborated</em> to 3 in the end.</p>",
        "id": 478374188,
        "sender_full_name": "Arthur Paulino",
        "timestamp": 1729634796
    },
    {
        "content": "<p>Re <code>three</code> and <code>three'</code> - at a basic level, lean deals in <em>terms</em> of <em>types</em>. <code>3</code> is a <em>term</em> of <em>type</em> <code>Nat</code>. Tactics - that is, everything after <code>by</code>- are simply a way to build terms. In particular, the <code>exact</code> tactic just creates the term that you write after <code>exact</code>.</p>\n<p>Maybe this can help:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span>\n<span class=\"bp\">#</span><span class=\"n\">print</span><span class=\"w\"> </span><span class=\"n\">g</span>\n<span class=\"c1\">-- def g : Nat → Nat :=</span>\n<span class=\"c1\">-- fun x =&gt; f (f x)</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">g'</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">f</span>\n<span class=\"w\">  </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">f</span>\n<span class=\"w\">  </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">x</span>\n<span class=\"bp\">#</span><span class=\"n\">print</span><span class=\"w\"> </span><span class=\"n\">g'</span>\n<span class=\"c1\">-- def g' : Nat → Nat :=</span>\n<span class=\"c1\">-- fun x =&gt; f (f x)</span>\n</code></pre></div>\n<p>This shows two ways of defining a function - the first (<code>g</code>) just has a term after the <code>:=</code>; the second (<code>g'</code>) has a sequence of tactics which build up the function step by step - but in the end the two functions are exactly the same, as the <code>#print</code> command shows</p>",
        "id": 478374372,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1729634880
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"307953\">@Ruben Van de Velde</span> so in</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">H</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IsSquare</span><span class=\"w\"> </span><span class=\"mi\">9</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">h</span>\n</code></pre></div>\n<p><code>h</code> is a proof. Not just because it looks and acts like one, but also because it is a term of the type proposition <code>IsSquare 9</code>.</p>\n<p>Am i correct up to this point.</p>\n<p>If yes, then let's compare:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IsSquare</span><span class=\"w\"> </span><span class=\"mi\">9</span>\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IsSquare</span><span class=\"w\"> </span><span class=\"mi\">9</span>\n<span class=\"n\">my_lemma</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IsSquare</span><span class=\"w\"> </span><span class=\"mi\">9</span>\n</code></pre></div>\n<p>Why is <code>h</code> not like <code>my_lemma</code> ?</p>",
        "id": 478374552,
        "sender_full_name": "rzeta0",
        "timestamp": 1729634963
    },
    {
        "content": "<p>Oh, that's an interesting confusion. \"example\" is more like \"def\" or \"theorem\". It's syntax for a different purpose</p>",
        "id": 478374964,
        "sender_full_name": "Arthur Paulino",
        "timestamp": 1729635203
    },
    {
        "content": "<p>Well, each of those are a snippet of lean code. It might help to write them out:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IsSquare</span><span class=\"w\"> </span><span class=\"mi\">9</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">True</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"c1\">-----------^ this is the term</span>\n<span class=\"w\">  </span><span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">h</span>\n<span class=\"w\">  </span><span class=\"n\">trivial</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IsSquare</span><span class=\"w\"> </span><span class=\"mi\">9</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"mi\">3</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">rfl</span><span class=\"bp\">⟩</span>\n<span class=\"c1\">------------------------^^^^^^^^ this is the term</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">isSquare_nine</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IsSquare</span><span class=\"w\"> </span><span class=\"mi\">9</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"mi\">3</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">rfl</span><span class=\"bp\">⟩</span>\n<span class=\"c1\">--------------------------------------^^^^^^^^ this is the term</span>\n<span class=\"c1\">--------^^^^^^^^^^^^^ and now this is also a term of the same type:</span>\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">isSquare_nine</span>\n</code></pre></div>",
        "id": 478374991,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1729635217
    },
    {
        "content": "<p>Mario explained <code>example</code> <a href=\"#narrow/channel/113489-new-members/topic/terminology.20.3A.20statement.20vs.20proposition/near/478183886\">here</a> for what it's worth.</p>",
        "id": 478375329,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1729635388
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"307953\">@Ruben Van de Velde</span> thank you, your examples have helped a lot.</p>\n<p>Thanks also <span class=\"user-mention\" data-user-id=\"306601\">@Kyle Miller</span> a re-reading of Mario's replies helped.</p>",
        "id": 478376205,
        "sender_full_name": "rzeta0",
        "timestamp": 1729635847
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IsSquare</span><span class=\"w\"> </span><span class=\"mi\">9</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"mi\">3</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">rfl</span><span class=\"bp\">⟩</span>\n<span class=\"c1\">------------------------^^^^^^^^ this is the term</span>\n<span class=\"c1\">-------^ the margin of the syntax is too small to store the proof</span>\n</code></pre></div>",
        "id": 478376365,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1729635958
    },
    {
        "content": "<p>I've updated the blog to reflect the feedback here.</p>\n<p>The only thing niggling at the back of my mind is the distinction between:</p>\n<ul>\n<li><code>h</code> and <code>by use 6; norm_num</code> <strong>are</strong> proofs of <code>Odd 13</code></li>\n<li><code>h</code> and <code>by use 6; norm_num</code> <strong>evaluate to</strong> proofs of <code>Odd 13</code></li>\n</ul>\n<p>Is this a bigger issue than I think it is? Should I be making a distinction?</p>",
        "id": 478435053,
        "sender_full_name": "rzeta0",
        "timestamp": 1729670635
    },
    {
        "content": "<p>If we go by what I said above:</p>\n<blockquote>\n<p>So a more conservative approach is to say that a proof is a term of a type when this type inhabits <code>Prop</code>.</p>\n</blockquote>\n<p>Then I would say that <code>h</code> is a proof and <code>by use 6; norm_num</code> evaluates to a proof.</p>\n<p>Note that elaboration is not context-free so something you write with the tactics DSL may or may not prove a theorem.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">forty_two</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"mi\">42</span>\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">forty_two</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">42</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"c1\">-- simp made no progress</span>\n\n<span class=\"kd\">@[</span><span class=\"n\">simp</span><span class=\"kd\">]</span><span class=\"w\"> </span><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">forty_two'</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"mi\">42</span>\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">foo</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">forty_two'</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">42</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"c1\">-- success</span>\n<span class=\"bp\">#</span><span class=\"n\">print</span><span class=\"w\"> </span><span class=\"n\">foo</span><span class=\"w\"> </span><span class=\"c1\">-- theorem foo : forty_two' = 42 := of_eq_true (eq_self 42)</span>\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">forty_two</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">42</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">of_eq_true</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">eq_self</span><span class=\"w\"> </span><span class=\"mi\">42</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"c1\">-- success</span>\n</code></pre></div>\n<p>We can't just say that <code>by simp</code> is a proof of <code>forty_two = 42</code>. But when I tagged the definition of <code>forty_two'</code> with <code>@[simp]</code>, it was added to the search space of the <code>simp</code> tactic, allowing it to produce a proof of <code>forty_two' = 42</code> for me.</p>\n<p>And notably, the same proof worked for <code>forty_two = 42</code>.</p>",
        "id": 478438204,
        "sender_full_name": "Arthur Paulino",
        "timestamp": 1729671714
    },
    {
        "content": "<p>But look, the term \"proof\" can be highly conflating, as it would be annoying and unnecessarily pedantic to fight the natural use of the word.</p>\n<p>If a professor tells the students to write a proof of a theorem and they use the tactics DSL, everyone will be happy and that's totally fine. Although you can argue that Lean 4 was probably the one putting the pieces together and creating the proof term.</p>",
        "id": 478439730,
        "sender_full_name": "Arthur Paulino",
        "timestamp": 1729672165
    },
    {
        "content": "<p>If you can't make peace with imprecision, then you can just use the verb \"prove the following theorem(s)\" and the students will join forces with Lean 4 to produce the proof(s)</p>",
        "id": 478441580,
        "sender_full_name": "Arthur Paulino",
        "timestamp": 1729672726
    }
]