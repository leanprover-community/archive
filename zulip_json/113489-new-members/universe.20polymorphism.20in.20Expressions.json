[
    {
        "content": "<p>I was trying to write a command with the functionality suggested in <a class=\"stream-topic\" data-stream-id=\"287929\" href=\"/#narrow/channel/287929-mathlib4/topic/All.20instances.20satisfied.20by.20a.20type\">#mathlib4 &gt; All instances satisfied by a type</a> , while keeping the metaprogramming book by the hand, when i realised that i can't find how/if the environment knows that a certain declaration has universe polymorphism... does the <code>ConstantInfo</code> somehow contain this information?</p>",
        "id": 492494019,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1736339310
    },
    {
        "content": "<p>I think if <a href=\"https://leanprover-community.github.io/mathlib4_docs/Lean/Declaration.html#Lean.ConstantInfo.numLevelParams\"><code>ConstantInfo.numLevelParams</code></a> is <code>0</code>, you shouldn't have any universe level parameters, so no universe polymorphism.</p>",
        "id": 492494937,
        "sender_full_name": "Marcus Rossel",
        "timestamp": 1736339660
    },
    {
        "content": "<p>aha!</p>",
        "id": 492495104,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1736339733
    },
    {
        "content": "<p>another relevant bit is <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Lean.Level.param#doc\">docs#Lean.Level.param</a>, i think</p>",
        "id": 492495337,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1736339816
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"684366\">Edward van de Meent</span> <a href=\"#narrow/channel/113489-new-members/topic/universe.20polymorphism.20in.20Expressions/near/492495337\">said</a>:</p>\n<blockquote>\n<p>another relevant bit is <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Lean.Level.param#doc\">docs#Lean.Level.param</a>, i think</p>\n</blockquote>\n<p>Yeah, I guess that depends on whether you're looking at declarations or <code>Expr</code>s. If you're looking at <code>Expr</code>s, you also need to consider <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Lean.Level.mvar#doc\">docs#Lean.Level.mvar</a> for polymorphism.</p>",
        "id": 492499398,
        "sender_full_name": "Marcus Rossel",
        "timestamp": 1736341198
    },
    {
        "content": "<p>i'd hope there are no level mvars in <code>Environment.constants</code>, tho</p>",
        "id": 492499570,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1736341243
    },
    {
        "content": "<p>or mvars at all</p>",
        "id": 492499630,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1736341265
    },
    {
        "content": "<p>since they're the ones that should have been checked by the kernel</p>",
        "id": 492499896,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1736341328
    },
    {
        "content": "<p>Based on <a href=\"#narrow/channel/113488-general/topic/Universe.20Vars/near/484812518\">this explanation</a> of how elaboration of universe levels works, I believe that's correct.</p>",
        "id": 492500924,
        "sender_full_name": "Marcus Rossel",
        "timestamp": 1736341629
    }
]