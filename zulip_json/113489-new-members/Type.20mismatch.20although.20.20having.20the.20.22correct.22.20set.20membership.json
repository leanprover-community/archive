[
    {
        "content": "<p>In the following example Lean complains that <code>x</code> should be of type <code>I</code>. Why is that? And how would you deal with this? I know that we can switch the membership sign <code>∈</code>  to a type judgement sign <code>:</code> to get a dependent function type, but first I don't understand why do we get an error already in the theorem statement - what's the problem exactly and secondly, this is not exactly my real problem - in the real proof I'm working on I have to assume the set membership information to show that some condition holds in order to use a certain theorem from mathlib. </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hc</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Convex</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x₀</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">uIcc</span><span class=\"w\"> </span><span class=\"n\">x₀</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">⊆</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n</code></pre></div>",
        "id": 564896182,
        "sender_full_name": "Michael Novak",
        "timestamp": 1766325898
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 564896520,
        "sender_full_name": "Weiyi Wang",
        "timestamp": 1766326413
    },
    {
        "content": "<p>Because <code>x₀</code> is now of type <code>↥S</code>, not of type <code>ℝ</code>, <code>Set.uIcc x₀ _</code> is inferred as of type <code>Set ↥S</code> (not <code>Set  ℝ</code>), so it wants <code>_ := x</code> of type <code>↥S</code> as well, which is wrong. You can write <code>Set.uIcc x₀.val x</code> where <code>x₀.val</code> is of type <code>ℝ</code>, so the whole thing is inferred as of type <code>Set  ℝ</code>. We want to avoid using <code>Set</code> as a type because of this trouble.</p>",
        "id": 564896656,
        "sender_full_name": "Weiyi Wang",
        "timestamp": 1766326613
    },
    {
        "content": "<p>You can write</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hc</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Convex</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x₀</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">h1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">x₀</span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">uIcc</span><span class=\"w\"> </span><span class=\"n\">x₀</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">⊆</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>(This is also more symmetrical than your original statement)</p>",
        "id": 564896737,
        "sender_full_name": "Weiyi Wang",
        "timestamp": 1766326748
    },
    {
        "content": "<p>Thank you very much!  So would you say that in  general when writing a theorem in which I want to have an assumption of a variable <code>x</code> which should be in some subset <code>s  :  Set α </code>, where <code>α</code> is some type, instead of making the assumption <code>(x : s)</code> I should  make two assumptions : <code>(x : α)  (x ∈ s)</code> ?</p>",
        "id": 564896881,
        "sender_full_name": "Michael Novak",
        "timestamp": 1766326926
    },
    {
        "content": "<p>Yep, that's usually the best way to write it</p>",
        "id": 564897018,
        "sender_full_name": "Weiyi Wang",
        "timestamp": 1766327120
    }
]