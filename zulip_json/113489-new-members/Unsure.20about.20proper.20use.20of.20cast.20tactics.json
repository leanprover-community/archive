[
    {
        "content": "<p>I'm not sure I'm properly using the tactics that deal with casting. The following example looks like it should be simpler that what I'm doing, since I had to apply twice the casting. Any ideas about what I'm doing inefficiently?  (There might also be a lemma with this fact, but I couldn't find it with the combination <code>apply?</code> + loogle + leansearch.)</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kd\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hx</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hy</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hn</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"bp\">⁻¹</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span>\n<span class=\"w\">  </span><span class=\"n\">exact_mod_cast</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Real.rpow_inv_le_iff_of_pos</span><span class=\"w\"> </span><span class=\"n\">hx</span><span class=\"w\"> </span><span class=\"n\">hy</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"kd\">by</span><span class=\"w\"> </span><span class=\"n\">norm_cast</span><span class=\"o\">))</span><span class=\"bp\">.</span><span class=\"n\">mp</span><span class=\"w\"> </span><span class=\"n\">h</span>\n</code></pre></div>",
        "id": 494239462,
        "sender_full_name": "Walter Moreira",
        "timestamp": 1737064366
    },
    {
        "content": "<p>There's <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Real.rpow_inv_natCast_pow#doc\">docs#Real.rpow_inv_natCast_pow</a> that you can use with <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=le_of_pow_le_pow_left%27#doc\">docs#le_of_pow_le_pow_left'</a>, which avoids done casts, but I don't think that this proof is inefficient</p>",
        "id": 494276758,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1737084840
    },
    {
        "content": "<p>Thank you! At some point I used some combination of the theorems you mention, but I wasn't getting as short of a proof. After your comment, I'm kind of happy with this proof.</p>\n<p>This lemma about moving the <strong>natural</strong> exponent across the inequality seems useful, and I couldn't find anything closer than the purely real version, with the search tools. Could it be a potential addition to Mathlib? (maybe somewhere in <code>Mathlib.Analysis.SpecialFunctions.Pow.Real</code>?)</p>",
        "id": 494278509,
        "sender_full_name": "Walter Moreira",
        "timestamp": 1737086082
    }
]