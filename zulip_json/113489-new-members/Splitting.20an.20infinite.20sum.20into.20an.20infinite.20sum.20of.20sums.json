[
    {
        "content": "<p>Does Mathlib have theorems to split an infinite sum into an infinite sum of (possibly infinite) sums?</p>\n<p>The only thing I have found is <code>summable_partition</code>, which is only for sums of nonnegative reals, is written as an equivalence, and says nothing about the value of the sum. What I was looking for was a theorem where global summability is an assumption, letting me replace the <code>tsum</code> with the <code>tsum</code> of  <code>tsum</code>s.</p>",
        "id": 530104424,
        "sender_full_name": "Philippe Duchon",
        "timestamp": 1753176702
    },
    {
        "content": "<p><del>sounds like the dominated convergence theorem</del></p>",
        "id": 530106634,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1753177485
    },
    {
        "content": "<p>I think that's <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Topology/Algebra/InfiniteSum/Constructions.html#Summable.tsum_prod_uncurry\">Summable.tsum_prod_uncurry</a>:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">∑'</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"w\"> </span><span class=\"bp\">×</span><span class=\"w\"> </span><span class=\"n\">γ</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">Function</span><span class=\"bp\">.</span><span class=\"n\">uncurry</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">∑'</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">γ</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"n\">c</span>\n</code></pre></div>",
        "id": 530106935,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1753177579
    },
    {
        "content": "<p>This requires a product, which will be uneasy to setup if some of the sub-sums have only a finite range (which happens to be true in the use case I have in mind).</p>\n<p>This could become a new goal for my learn-by-doing formalisation project (which keeps changing every few weeks), but I'm really unfamiliar with the level of generality that Mathlib uses for topology.</p>",
        "id": 530113303,
        "sender_full_name": "Philippe Duchon",
        "timestamp": 1753179700
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"726077\">@Philippe Duchon</span> part of the art of asking a good question is asking a good question <span aria-label=\"upside down\" class=\"emoji emoji-1f643\" role=\"img\" title=\"upside down\">:upside_down:</span> </p>\n<p>In this case instead of the independent \"product\", you want a dependent \"sigma type\", and in that case it is <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Topology/Algebra/InfiniteSum/Constructions.html#Summable.tsum_sigma\">Summable.tsum_sigma</a>:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">∑'</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">×</span><span class=\"w\"> </span><span class=\"n\">γ</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">∑'</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">γ</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">b</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"bp\">⟩</span>\n</code></pre></div>",
        "id": 530113672,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1753179847
    },
    {
        "content": "<p>Thanks! I went through the more obvious files of the library, but failed to check this one.</p>\n<p>Looks like what I was looking for was <code>HasSum.prod_fiberwise</code> - or at least it should be close enough.</p>",
        "id": 530114779,
        "sender_full_name": "Philippe Duchon",
        "timestamp": 1753180322
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"726077\">@Philippe Duchon</span> there's a better way than looking into 100 files, if you know you want \"tsum\" over a \"sigma\" type, then you just write <a href=\"https://loogle.lean-lang.org/?q=tsum%2C+\" title=\"sigma\">tsum, \"sigma\" in Loogle</a>, and bob's your uncle</p>",
        "id": 530116076,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1753180865
    },
    {
        "content": "<p>That's a good idea, but I wasn't aware that what I wanted was to mix <code>tsum</code>  and <code>sigma</code> types. I was thinking of \"partition\", but that did not find me much of interest.</p>\n<p>This is, more generally, one of the difficulties I have with getting into Mathlib: if there are documents that explain, field by field, how the library is organized and how one should look for things in it, I have not found them so far. MIL does a great job of explaining parts of what I have in mind, but for very specific topics. So I do spend a lot of time browsing through files that look like they could contain what I want, but that is not very efficient. As a result, I tend to ask a lot of questions that turn out to be silly when you know where to look...</p>",
        "id": 530117713,
        "sender_full_name": "Philippe Duchon",
        "timestamp": 1753181427
    },
    {
        "content": "<p>Asking lots of questions is fine. In the Imperial course we try and prove basic results in many areas to introduce students to each area but it's still not enough if you're going deeper into one area</p>",
        "id": 531083078,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1753600172
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"726077\">Philippe Duchon</span> <a href=\"#narrow/channel/113489-new-members/topic/Splitting.20an.20infinite.20sum.20into.20an.20infinite.20sum.20of.20sums/near/530117713\">said</a>:</p>\n<blockquote>\n<p>if there are documents that explain, field by field, how the library is organized and how one should look for things in it</p>\n</blockquote>\n<p>that sounds like a task for LLM (AI)</p>",
        "id": 531083305,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1753600272
    },
    {
        "content": "<p>It very much doesn't</p>",
        "id": 531087409,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1753602016
    },
    {
        "content": "<p>MIL aims to do some of this</p>",
        "id": 531089368,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1753602875
    }
]