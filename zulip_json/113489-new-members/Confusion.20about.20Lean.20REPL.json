[
    {
        "content": "<p>I'm new to Lean REPL. I use v4.15.0 to have a try.<br>\nWhen I input <code>{ \"cmd\" : \"import Mathlib\\ntheorem add_even (x y : ℤ) (hx : Even x) (hy : Even y) : Even (x + y) := by sorry\" }</code> , I got this:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"o\">{</span><span class=\"s2\">\"messages\"</span><span class=\"o\">:</span>\n<span class=\"w\"> </span><span class=\"o\">[{</span><span class=\"s2\">\"severity\"</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"s2\">\"error\"</span><span class=\"o\">,</span>\n<span class=\"w\">   </span><span class=\"s2\">\"pos\"</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"s2\">\"line\"</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"s2\">\"column\"</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">64</span><span class=\"o\">},</span>\n<span class=\"w\">   </span><span class=\"s2\">\"endPos\"</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"s2\">\"line\"</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"s2\">\"column\"</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">66</span><span class=\"o\">},</span>\n<span class=\"w\">   </span><span class=\"s2\">\"data\"</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"s2\">\"unexpected token '+'; expected ')', ',' or ':'\"</span><span class=\"o\">}],</span>\n<span class=\"w\"> </span><span class=\"s2\">\"env\"</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">}</span>\n</code></pre></div>\n<p>Could anyone tell me what's wrong? Is there a syntex error? <span aria-label=\"pleading face\" class=\"emoji emoji-1f97a\" role=\"img\" title=\"pleading face\">:pleading_face:</span></p>",
        "id": 537989572,
        "sender_full_name": "Haoyang Shi",
        "timestamp": 1757151045
    },
    {
        "content": "<p>I don't think you can put the import there</p>",
        "id": 537990185,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1757151695
    },
    {
        "content": "<p>So what shall I do? <span aria-label=\"speechless\" class=\"emoji emoji-1f636\" role=\"img\" title=\"speechless\">:speechless:</span></p>",
        "id": 537990343,
        "sender_full_name": "Haoyang Shi",
        "timestamp": 1757151869
    },
    {
        "content": "<p>Help <span aria-label=\"confounded\" class=\"emoji emoji-1f616\" role=\"img\" title=\"confounded\">:confounded:</span></p>",
        "id": 538000009,
        "sender_full_name": "Haoyang Shi",
        "timestamp": 1757162513
    },
    {
        "content": "<p>That error message is very misleading. I think the Lean REPL is actually complaining because the Mathlib import failed probably. You need to run the REPL in the root directory of a Lean project that has Mathlib as a dependency: <a href=\"https://github.com/leanprover-community/repl?tab=readme-ov-file#using-the-repl-from-another-project\">https://github.com/leanprover-community/repl?tab=readme-ov-file#using-the-repl-from-another-project</a> Otherwise, I also get that same error.</p>",
        "id": 538034222,
        "sender_full_name": "Anthony Wang",
        "timestamp": 1757195665
    },
    {
        "content": "<p>Thanks a million! <span aria-label=\"folded hands\" class=\"emoji emoji-1f64f\" role=\"img\" title=\"folded hands\">:folded_hands:</span><br>\nNow I found that it could run, but in a very very low speed. A simple statement may take nearly 3 minutes. Is that normal or just because of my poor computer configuration (M1 8GB)? I can hardly run my experiment in that speed. How can I solve it? <span aria-label=\"face in clouds\" class=\"emoji emoji-1f636-200d-1f32b\" role=\"img\" title=\"face in clouds\">:face_in_clouds:</span></p>",
        "id": 538044827,
        "sender_full_name": "Haoyang Shi",
        "timestamp": 1757210811
    },
    {
        "content": "<p>For me, running <code>lake build Mathlib</code> first reduced the wait time from several minutes to only a few seconds.</p>\n<p>But I would recommend using Lean in VSCode instead of the REPL unless you have a very specific reason why you need the REPL.</p>",
        "id": 538045129,
        "sender_full_name": "Anthony Wang",
        "timestamp": 1757211291
    },
    {
        "content": "<p>I presume you are using the REPL because you want to programmatically interact with Lean? In this case, you could probably reuse the environment (recall that each REPL call gives you an environment id), so that you only have to import Mathlib once</p>",
        "id": 538065781,
        "sender_full_name": "Niels Voss",
        "timestamp": 1757237352
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"910779\">Anthony Wang</span> <a href=\"#narrow/channel/113489-new-members/topic/Confusion.20about.20Lean.20REPL/near/538045129\">发言道</a>：</p>\n<blockquote>\n<p>For me, running <code>lake build Mathlib</code> first reduced the wait time from several minutes to only a few seconds.</p>\n<p>But I would recommend using Lean in VSCode instead of the REPL unless you have a very specific reason why you need the REPL.</p>\n</blockquote>\n<p>Thank you so much. Well I have to use REPL as I want to interact with Lean programmatically. I think  the major reason why it's so slow is the poor RAM configuration. <span aria-label=\"melting face\" class=\"emoji emoji-1fae0\" role=\"img\" title=\"melting face\">:melting_face:</span></p>",
        "id": 538114038,
        "sender_full_name": "Haoyang Shi",
        "timestamp": 1757290529
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"521331\">Niels Voss</span> <a href=\"#narrow/channel/113489-new-members/topic/Confusion.20about.20Lean.20REPL/near/538065781\">发言道</a>：</p>\n<blockquote>\n<p>I presume you are using the REPL because you want to programmatically interact with Lean? In this case, you could probably reuse the environment (recall that each REPL call gives you an environment id), so that you only have to import Mathlib once</p>\n</blockquote>\n<p>Yeah you are so right! It's really helpful! <span aria-label=\"face holding back tears\" class=\"emoji emoji-1f979\" role=\"img\" title=\"face holding back tears\">:face_holding_back_tears:</span></p>",
        "id": 538114175,
        "sender_full_name": "Haoyang Shi",
        "timestamp": 1757290679
    }
]