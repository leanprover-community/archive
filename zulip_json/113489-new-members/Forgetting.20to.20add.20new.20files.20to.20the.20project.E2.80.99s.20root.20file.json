[
    {
        "content": "<p>Whenever I add a new file, <code>NewFile.lean</code>, to the project <code>ProjectName</code> using VS Code’s “New File…” command, I also need to remember to manually add <code>import ProjectName.NewFile</code> in the root file <code>ProjectName.lean</code> to have <code>NewFile.lean</code> built by <code>lake build</code>.</p>\n<p>This generally works, but it’s easy to forget that second manual step. When that happens, <code>NewFile.lean</code> may appear to work fine in VS Code, yet remain omitted from the <code>lake build</code>.</p>\n<p>As a result, <code>lake build</code> won’t flag issues such as the presence of <code>sorry</code> in <code>NewFile.lean</code>, which can falsely suggest that the project is in better shape than it really is.</p>\n<p>Am I the only one who sometimes forgets to add new files to the project’s root file?</p>\n<p>Is there an effective way to prevent this issue? Something like <code>import ProjectName.*</code> isn’t currently possible?</p>",
        "id": 506841768,
        "sender_full_name": "Isak Colboubrani",
        "timestamp": 1742424423
    },
    {
        "content": "<p>You can skip the top level file entirely and tell lake to build all subfiles</p>",
        "id": 506841999,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1742424533
    },
    {
        "content": "<p>The syntax for doing so depends on if you have a lean or toml lakefile</p>",
        "id": 506842062,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1742424573
    },
    {
        "content": "<p>That's great news!</p>\n<p>I'm using the standard <code>lakefile.toml</code> provided by <code>lake new project-name math</code>.</p>",
        "id": 506842410,
        "sender_full_name": "Isak Colboubrani",
        "timestamp": 1742424727
    },
    {
        "content": "<p>I believe the syntax is <code>globs = [\"MyProject.+\"]</code> in the <code>lean_lib</code> target, but I don't remember how to find the docs</p>",
        "id": 506843606,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1742425250
    },
    {
        "content": "<p>I found this: <a href=\"https://github.com/leanprover/lean4/blob/master/src/lake/README.md#defining-build-targets\">https://github.com/leanprover/lean4/blob/master/src/lake/README.md#defining-build-targets</a></p>",
        "id": 506844139,
        "sender_full_name": "Isak Colboubrani",
        "timestamp": 1742425500
    },
    {
        "content": "<blockquote>\n<ul>\n<li><code>globs</code>: An <code>Array</code> of module <code>Glob</code>(s) to build for the library. The term <code>glob</code> comes from <a href=\"https://en.wikipedia.org/wiki/Glob_(programming)\">file globs</a> (e.g., <code>foo/*</code>) on Unix. A submodule glob builds every Lean source file within the module's directory (i.e., <code>Glob.submodules `Foo</code> is essentially equivalent to a theoretical <code>import Foo.*</code>). Local imports of glob'ed files (i.e., fellow modules of the workspace) are also recursively built. Defaults to a <code>Glob.one</code> of each of the library's  <code>roots</code>.</li>\n</ul>\n</blockquote>",
        "id": 506844225,
        "sender_full_name": "Isak Colboubrani",
        "timestamp": 1742425550
    },
    {
        "content": "<p>That's the .lean docs, the .toml ones might not yet exist</p>",
        "id": 506844709,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1742425802
    },
    {
        "content": "<p>The FLT toml looks like <a href=\"https://github.com/ImperialCollegeLondon/FLT/blob/main/lakefile.toml\">https://github.com/ImperialCollegeLondon/FLT/blob/main/lakefile.toml</a> and that builds everything in FLT whether or not it's in that crazy FLT.lean file (which I autogenerate with <code>lake exe mk_all</code> BTW)</p>",
        "id": 506846845,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1742426935
    }
]