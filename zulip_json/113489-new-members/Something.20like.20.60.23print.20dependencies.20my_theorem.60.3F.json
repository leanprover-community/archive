[
    {
        "content": "<p>You can inspect the <em>axioms</em> on which a theorem depends by writing <code>#print axioms my_theorem</code>:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n<span class=\"bp\">#</span><span class=\"n\">print</span><span class=\"w\"> </span><span class=\"n\">axioms</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">mul_assoc</span>\n<span class=\"bp\">'</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">mul_assoc'</span><span class=\"w\"> </span><span class=\"n\">depends</span><span class=\"w\"> </span><span class=\"n\">on</span><span class=\"w\"> </span><span class=\"n\">axioms</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">propext</span><span class=\"o\">]</span>\n</code></pre></div>\n<p>Is there any similar command that lists the <em>named theorems</em> a given theorem uses?</p>\n<p>At present, I use the following manual procedure which works but is rather time‑consuming.</p>\n<p>For instance, with <code>Nat.mul_assoc</code>:</p>\n<p><code>#print Nat.mul_assoc</code> shows that it uses the theorem <code>Nat.left_distrib</code>.</p>\n<p><code>#print Nat.left_distrib</code> shows that it uses the theorems <code>Nat.add_left_comm</code>, <code>Nat.zero_mul</code> and <code>Nat.succ_mul</code>.</p>\n<p>You can repeat this until you reach the most fundamental lemmas.</p>\n<p>Ideally, I'd like to be able to write:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n<span class=\"bp\">#</span><span class=\"n\">print</span><span class=\"w\"> </span><span class=\"n\">dependencies</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">mul_assoc</span>\n<span class=\"c1\">-- or `#print_dependencies Nat.mul_assoc`</span>\n<span class=\"bp\">'</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">mul_assoc'</span><span class=\"w\"> </span><span class=\"n\">depends</span><span class=\"w\"> </span><span class=\"n\">on</span><span class=\"w\"> </span><span class=\"n\">theorems</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">left_distrib</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">add_left_comm</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">zero_mul</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">succ_mul</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">…</span><span class=\"o\">]</span>\n</code></pre></div>\n<p>And—with a verbose flag—get a full dependency tree:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n<span class=\"bp\">#</span><span class=\"n\">print</span><span class=\"w\"> </span><span class=\"n\">verbose_dependencies</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">mul_assoc</span>\n<span class=\"bp\">'</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">mul_assoc'</span><span class=\"w\"> </span><span class=\"n\">depends</span><span class=\"w\"> </span><span class=\"n\">on</span><span class=\"w\"> </span><span class=\"n\">theorems</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">left_distrib</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">add_left_comm</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">zero_mul</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">succ_mul</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">…</span><span class=\"o\">]</span>\n\n<span class=\"n\">Dependency</span><span class=\"w\"> </span><span class=\"n\">tree</span><span class=\"o\">:</span>\n<span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">mul_assoc</span>\n<span class=\"w\">  </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">left_distrib</span>\n<span class=\"w\">   </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">add_left_comm</span>\n<span class=\"w\">      </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">add_assoc</span>\n<span class=\"w\">      </span><span class=\"bp\">…</span><span class=\"w\"> </span><span class=\"n\">etc</span><span class=\"w\"> </span><span class=\"bp\">…</span>\n<span class=\"w\">  </span><span class=\"bp\">…</span><span class=\"w\"> </span><span class=\"n\">etc</span><span class=\"bp\">…</span>\n<span class=\"w\">  </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">zero_mul</span>\n<span class=\"w\">    </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">mul_succ</span>\n</code></pre></div>\n<p>One might even render it using fancy Unicode box‑drawing characters (bonus points!):</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">mul_assoc</span>\n<span class=\"bp\">├─</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">left_distrib</span>\n<span class=\"bp\">├─</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">add_left_comm</span>\n<span class=\"bp\">│</span><span class=\"w\">   </span><span class=\"bp\">└─</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">add_assoc</span>\n<span class=\"bp\">└─</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">zero_mul</span>\n<span class=\"w\">    </span><span class=\"bp\">└─</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">mul_succ</span>\n</code></pre></div>",
        "id": 513674631,
        "sender_full_name": "Isak Colboubrani",
        "timestamp": 1745345621
    },
    {
        "content": "<p>If not, sounds like a nice metaprogramming exercise :-)</p>",
        "id": 513682724,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1745348156
    },
    {
        "content": "<p>The list of transitive dependencies can become quite large (as expected maybe). For example, if my approach is correct, <code>Nat.fold_succ</code> depends (directly or indirectly) on 431 named theorems.</p>\n<div class=\"codehilite\" data-code-language=\"Text only\"><pre><span></span><code>Direct theorem dependencies of Nat.fold_succ:\n* Nat.fold.proof_3\n* Nat.fold.proof_4\n* eq_self\n* of_eq_true\n\nTransitive theorem dependencies of Nat.fold_succ:\n* And.comm\n* And.symm\n* Bool.and_eq_true\n* Bool.decide_and\n* Bool.false_and\n…\n* of_eq_true\n* or_true\n* trivial\n* true_and\n* true_or\n</code></pre></div>\n<p>For <code>Nat.mul_assoc</code>:</p>\n<div class=\"codehilite\" data-code-language=\"Text only\"><pre><span></span><code>Direct theorem dependencies of Nat.mul_assoc:\n* Eq.trans\n* Nat.left_distrib\n* congr\n* congrArg\n* eq_self\n* of_eq_true\n\nTransitive theorem dependencies of Nat.mul_assoc:\n* Eq.symm\n* Eq.trans\n* Nat.add_assoc\n* Nat.add_comm\n* Nat.add_left_comm\n* Nat.add_right_comm\n* Nat.add_succ\n* Nat.left_distrib\n* Nat.mul_succ\n* Nat.succ_add\n* Nat.succ_mul\n* Nat.zero_add\n* Nat.zero_mul\n* congr\n* congrArg\n* eq_self\n* eq_true\n* of_eq_true\n* trivial\n</code></pre></div>\n<p>Does the output look correct?</p>",
        "id": 513805945,
        "sender_full_name": "Isak Colboubrani",
        "timestamp": 1745396341
    },
    {
        "content": "<p><code>Nat.mul_assoc</code> has six direct theorem dependencies:</p>\n<div class=\"codehilite\" data-code-language=\"Text only\"><pre><span></span><code>Direct theorem dependencies of Nat.mul_assoc:\n* Eq.trans\n* Nat.left_distrib\n* congr\n* congrArg\n* eq_self\n* of_eq_true\n</code></pre></div>\n<p>It would be helpful to highlight which of the theorems that are \"basic building blocks\" in the sense that they do not refer to any other named theorem. In this case, <code>Eq.trans</code>, <code>congr</code> and <code>congrArg</code> would qualify.</p>\n<p>What would be an appropriate term for these? Primitive theorems?</p>\n<p>For example:</p>\n<div class=\"codehilite\" data-code-language=\"Text only\"><pre><span></span><code>Direct theorem dependencies of Nat.mul_assoc:\n* Eq.trans (primitive)\n* Nat.left_distrib\n* congr (primitive)\n* congrArg (primitive)\n* eq_self\n* of_eq_true\n</code></pre></div>",
        "id": 513810235,
        "sender_full_name": "Isak Colboubrani",
        "timestamp": 1745397636
    },
    {
        "content": "<p>Perhaps in practice, one can distinguish two flavours of \"primitive theorems\":</p>\n<ul>\n<li>Core Lean primitives – e.g. <code>Eq.trans</code>, <code>congr</code>, <code>congrArg</code>, etc., typically defined in <code>Prelude.lean</code>.</li>\n<li>Domain-specific primitives – results like <code>Nat.zero_add</code> or <code>Nat.succ_add</code> whose proofs invoke no named theorems beyond those core Lean primitives.</li>\n</ul>\n<p>What would be appropriate terms for these two classes of \"primitive theorems\"?</p>",
        "id": 513812755,
        "sender_full_name": "Isak Colboubrani",
        "timestamp": 1745398326
    }
]