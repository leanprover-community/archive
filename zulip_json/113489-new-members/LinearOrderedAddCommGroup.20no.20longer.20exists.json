[
    {
        "content": "<p>I am trying to update some old code (written for v4.3.0) to work with v4.26.0. The code has <code>[LinearOrderedAddCommGroup G]</code>.  Lean complains that it is invalid binder annotation.</p>\n<p>Looking inside <code>Mathlib/Algebra/Order/Group/Defs.lean</code> I see </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"c1\">-- `LinearOrderedCommGroup` and `LinearOrderedAddCommGroup` no longer exist, but we still use the namespaces.</span>\n</code></pre></div>\n<p>I'm not sure what that means.  In any case, what should I replace <code>[LinearOrderedAddCommGroup G]</code> with?</p>",
        "id": 569784271,
        "sender_full_name": "Kevin Cheung",
        "timestamp": 1769194268
    },
    {
        "content": "<p><code>[AddCommGroup G] [LinearOrder G]</code>?</p>",
        "id": 569784723,
        "sender_full_name": "Bbbbbbbbba",
        "timestamp": 1769194460
    },
    {
        "content": "<p>Probably [IsOrderedAddMonoid G] [Group G] [LinearOrder G] (we need a compatibility of order and multiplication)</p>",
        "id": 569786021,
        "sender_full_name": "Stepan Nesterov",
        "timestamp": 1769194938
    },
    {
        "content": "<p>IsOrderedAddMonoid needs to come at the end</p>",
        "id": 569786186,
        "sender_full_name": "Junyan Xu",
        "timestamp": 1769194993
    },
    {
        "content": "<p>Did we go through a deprecation cycle here?</p>",
        "id": 569786456,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1769195101
    },
    {
        "content": "<p>Looks like the following works:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"w\"> </span><span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">IneqExtra</span><span class=\"bp\">.</span><span class=\"n\">neg_le_sub_self_of_nonneg</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">G</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">LinearOrder</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">AddCommGroup</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">IsOrderedAddMonoid</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"bp\">-</span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">sub_eq_add_neg</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">le_add_of_nonneg_left</span><span class=\"w\"> </span><span class=\"n\">h</span>\n</code></pre></div>\n<p>Originally, it was</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">IneqExtra</span><span class=\"bp\">.</span><span class=\"n\">neg_le_sub_self_of_nonneg</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">LinearOrderedAddCommGroup</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"bp\">-</span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">sub_eq_add_neg</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">le_add_of_nonneg_left</span><span class=\"w\"> </span><span class=\"n\">h</span>\n</code></pre></div>",
        "id": 569786508,
        "sender_full_name": "Kevin Cheung",
        "timestamp": 1769195124
    },
    {
        "content": "<p>Not sure if the modification is the correct one.</p>",
        "id": 569786599,
        "sender_full_name": "Kevin Cheung",
        "timestamp": 1769195170
    },
    {
        "content": "<p>deprecated 2025-04-10, removed 2025-10-21<br>\n<a href=\"https://github.com/leanprover-community/mathlib4/pull/30759/files#diff-1ea79e1c68d33cde0e0d03b5cd88acada0fe81a37be3c91e0dbdf5734e81b824L81-L83\">https://github.com/leanprover-community/mathlib4/pull/30759/files#diff-1ea79e1c68d33cde0e0d03b5cd88acada0fe81a37be3c91e0dbdf5734e81b824L81-L83</a><br>\nLean v4.3.0 was 2023-11-16 ...</p>",
        "id": 569789246,
        "sender_full_name": "Junyan Xu",
        "timestamp": 1769196397
    },
    {
        "content": "<p>Thank you!</p>",
        "id": 569789577,
        "sender_full_name": "Kevin Cheung",
        "timestamp": 1769196532
    }
]