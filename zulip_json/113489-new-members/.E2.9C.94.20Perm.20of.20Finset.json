[
    {
        "content": "<p>Hi, I'm currently stuck with trying to do the following definition:</p>\n<p>\"Let P be a permutation of [n]\"</p>\n<p>My first instinct was to first define what [n] = [1,2,3,4,5...] is. This already gets me in some trouble:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">my_list_n</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"k\">match</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"k\">with</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">zero</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"o\">[]</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">succ</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">my_list_n</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">++</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">succ</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">]</span>\n</code></pre></div>\n<p>So far at least this worked, so next was doing some permutations out of this. So I looked up <code>Mathlib.Data.List.Permutation</code>.  But then realized this was not exaclty what I wanted.</p>\n<p>For the mathematics I'm doing what I want is not really a list of the first n naturals, but a Finset. But I dont know how declare such Finsets, and I can't understand where to look in the Finset docs.</p>\n<p>Formalizing really makes you think about the details! <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span></p>",
        "id": 497098564,
        "sender_full_name": "Nicolau Oliver",
        "timestamp": 1738362049
    },
    {
        "content": "<p>Try <code>Equiv.Perm (Fin n)</code>? <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Fin#doc\">docs#Fin</a> represents [n] = [0,1,...,n-1] and <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Equiv.Perm#doc\">docs#Equiv.Perm</a> is the type of permutations.</p>",
        "id": 497099135,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1738362317
    },
    {
        "content": "<p>Lean has a few ways of representing permutations... one option is <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Equiv.Perm#doc\">docs#Equiv.Perm</a>, which represents it as the type of automorphisms. In that context, you could write <code>Equiv.Perm (Fin 5)</code> to get the type of permutations of 5 elements, for example.</p>",
        "id": 497099136,
        "sender_full_name": "Matt Diamond",
        "timestamp": 1738362318
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 497099197,
        "sender_full_name": "Matt Diamond",
        "timestamp": 1738362352
    },
    {
        "content": "<p>Wow, super fast answer <span class=\"user-mention\" data-user-id=\"816344\">@Aaron Liu</span> . Fin n looks exactly like what I was looking for!</p>",
        "id": 497099802,
        "sender_full_name": "Nicolau Oliver",
        "timestamp": 1738362655
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"660886\">Nicolau Oliver</span> has marked this topic as resolved.</p>",
        "id": 497100060,
        "sender_full_name": "Notification Bot",
        "timestamp": 1738362779
    },
    {
        "content": "<p>Just to post the progress, here are my current tests exploring the type Equiv.Perm (Fin Nat).</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Logic</span><span class=\"bp\">.</span><span class=\"n\">Equiv</span><span class=\"bp\">.</span><span class=\"n\">Defs</span>\n\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">GroupTheory</span><span class=\"bp\">.</span><span class=\"n\">Perm</span><span class=\"bp\">.</span><span class=\"n\">Cycle</span><span class=\"bp\">.</span><span class=\"n\">Concrete</span>\n\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">GroupTheory</span><span class=\"bp\">.</span><span class=\"n\">Abelianization</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">test_perm</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Equiv</span><span class=\"bp\">.</span><span class=\"n\">Perm</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">⟨!</span><span class=\"o\">[</span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"mi\">2</span><span class=\"o\">,</span><span class=\"mi\">3</span><span class=\"o\">,</span><span class=\"mi\">4</span><span class=\"o\">],</span><span class=\"w\"> </span><span class=\"bp\">!</span><span class=\"o\">[</span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"mi\">2</span><span class=\"o\">,</span><span class=\"mi\">3</span><span class=\"o\">,</span><span class=\"mi\">4</span><span class=\"o\">],</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">decide</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">decide</span><span class=\"bp\">⟩</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">test_perm12</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Equiv</span><span class=\"bp\">.</span><span class=\"n\">Perm</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Equiv</span><span class=\"bp\">.</span><span class=\"n\">swap</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"mi\">2</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">test_list</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Equiv</span><span class=\"bp\">.</span><span class=\"n\">Perm</span><span class=\"bp\">.</span><span class=\"n\">toList</span><span class=\"w\"> </span><span class=\"n\">test_perm</span>\n\n<span class=\"bp\">#</span><span class=\"n\">eval</span><span class=\"w\"> </span><span class=\"n\">test_list</span>\n</code></pre></div>\n<p>My next goal is to get a bit more familiar with swaps, with the aim of formalizing the definition of this object:</p>\n<p><a href=\"/user_uploads/3121/QTyTPcUBlkOebZJOwZGPPIV1/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/QTyTPcUBlkOebZJOwZGPPIV1/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"1979x306\" src=\"/user_uploads/thumbnail/3121/QTyTPcUBlkOebZJOwZGPPIV1/image.png/840x560.webp\"></a></div><p>Where P_i are are permutations of a set of indices S, that I take to be [n] to simplify.</p>\n<p>Once I formalize the definition, a basic lemma I would like to prove as a starter is that N = binomial(n,2). From thereon, more complicated stuff.</p>",
        "id": 497207219,
        "sender_full_name": "Nicolau Oliver",
        "timestamp": 1738451871
    },
    {
        "content": "<p>It's often simpler to work with an arbitrary finite type (<a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Finite#doc\">docs#Finite</a>) than a concrete type like <code>Fin n</code>. It keeps you from getting stuck on details about the type. Though, if you find <code>Fin n</code> fine, it doesn't stop you from doing anything.</p>\n<p>For defining permutations, <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=List.formPerm#doc\">docs#List.formPerm</a> looks like it could be useful. There's also <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Equiv.swap#doc\">docs#Equiv.swap</a></p>\n<p>Something like <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Sym2.card#doc\">docs#Sym2.card</a> could be helpful for the binomial coefficient, if somehow there's some type equivalent to <code>Sym2 (Fin n)</code> that counts what you're counting.</p>",
        "id": 497208230,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1738453016
    }
]