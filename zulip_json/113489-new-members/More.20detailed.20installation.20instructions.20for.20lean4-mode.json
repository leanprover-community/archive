[
    {
        "content": "<p>Hi all,</p>\n<p>the <a href=\"https://github.com/leanprover-community/lean4-mode\">installation instructions</a> in git repository of lean-mode are too brief - they suppose that readers using an old Emacs28 without the new GPG key for ELPA know <a href=\"https://mail.gnu.org/archive/html/help-gnu-emacs/2024-05/msg00248.html\">how to fetch the new key themselves</a>, and that they are willing to restart Emacs several times fixing errors, following the recipes given in error messages...</p>\n<p>I'm giving a kind-of-workshop for beginners - in Portuguese, using Emacs, and as beginner-friendly as possible - and after seeing their problems I prepared these more detailed installation instructions, and tested them with several versions of Emacs in an empty home directory with <code>export HOME=/tmp/fake-home-dir</code>:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">;;</span><span class=\"w\"> </span><span class=\"n\">Check</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">version</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">your</span><span class=\"w\"> </span><span class=\"n\">Emacs</span><span class=\"o\">:</span>\n<span class=\"bp\">;;</span><span class=\"w\">   </span><span class=\"o\">(</span><span class=\"n\">emacs</span><span class=\"bp\">-</span><span class=\"n\">version</span><span class=\"o\">)</span>\n<span class=\"bp\">;;</span>\n<span class=\"bp\">;;</span><span class=\"w\"> </span><span class=\"n\">If</span><span class=\"w\"> </span><span class=\"n\">you're</span><span class=\"w\"> </span><span class=\"n\">on</span><span class=\"w\"> </span><span class=\"n\">emacs</span><span class=\"w\"> </span><span class=\"mf\">29.1</span><span class=\"w\"> </span><span class=\"n\">or</span><span class=\"w\"> </span><span class=\"n\">newer</span><span class=\"w\"> </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">sexp</span><span class=\"w\"> </span><span class=\"k\">with</span>\n<span class=\"bp\">;;</span><span class=\"w\"> </span><span class=\"ss\">`package</span><span class=\"bp\">-</span><span class=\"n\">vc</span><span class=\"bp\">-</span><span class=\"n\">install'</span><span class=\"w\"> </span><span class=\"n\">below</span><span class=\"w\"> </span><span class=\"n\">should</span><span class=\"w\"> </span><span class=\"n\">work</span><span class=\"o\">:</span>\n<span class=\"bp\">;;</span>\n<span class=\"o\">(</span><span class=\"n\">package</span><span class=\"bp\">-</span><span class=\"n\">vc</span><span class=\"bp\">-</span><span class=\"n\">install</span><span class=\"w\"> </span><span class=\"s2\">\"https://github.com/leanprover-community/lean4-mode\"</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>Otherwise, run this:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">rm</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">Rfv</span><span class=\"w\">  </span><span class=\"bp\">~/.</span><span class=\"n\">emacs</span><span class=\"bp\">.</span><span class=\"n\">d</span><span class=\"bp\">/</span><span class=\"n\">elpa</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"bp\">-</span><span class=\"n\">mode</span>\n<span class=\"n\">mkdir</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">~/.</span><span class=\"n\">emacs</span><span class=\"bp\">.</span><span class=\"n\">d</span><span class=\"bp\">/</span><span class=\"n\">elpa</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"bp\">-</span><span class=\"n\">mode</span>\n<span class=\"n\">cd</span><span class=\"w\">       </span><span class=\"bp\">~/.</span><span class=\"n\">emacs</span><span class=\"bp\">.</span><span class=\"n\">d</span><span class=\"bp\">/</span><span class=\"n\">elpa</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"bp\">-</span><span class=\"n\">mode</span>\n<span class=\"n\">git</span><span class=\"w\"> </span><span class=\"n\">clone</span><span class=\"w\"> </span><span class=\"n\">https</span><span class=\"o\">:</span><span class=\"bp\">//</span><span class=\"n\">github</span><span class=\"bp\">.</span><span class=\"n\">com</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"bp\">-</span><span class=\"n\">community</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"bp\">-</span><span class=\"n\">mode</span><span class=\"w\"> </span><span class=\"bp\">.</span>\n</code></pre></div>\n<p>and run the sexp below, and add it to your ~/.emacs (obs: I'm not showing here my tricks for making this step easier for total beginners):</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"o\">(</span><span class=\"n\">add</span><span class=\"bp\">-</span><span class=\"n\">to</span><span class=\"bp\">-</span><span class=\"n\">list</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">load</span><span class=\"bp\">-</span><span class=\"n\">path</span><span class=\"w\"> </span><span class=\"s2\">\"~/.emacs.d/elpa/lean4-mode\"</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>After that, run this big progn:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"o\">(</span><span class=\"n\">progn</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">add</span><span class=\"bp\">-</span><span class=\"n\">to</span><span class=\"bp\">-</span><span class=\"n\">list</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">package</span><span class=\"bp\">-</span><span class=\"n\">archives</span>\n<span class=\"w\">    </span><span class=\"bp\">'</span><span class=\"o\">(</span><span class=\"s2\">\"melpa\"</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"w\"> </span><span class=\"s2\">\"https://melpa.org/packages/\"</span><span class=\"o\">))</span>\n<span class=\"w\">  </span><span class=\"bp\">;;</span>\n<span class=\"w\">  </span><span class=\"bp\">;;</span><span class=\"w\"> </span><span class=\"n\">See</span><span class=\"o\">:</span>\n<span class=\"w\">  </span><span class=\"bp\">;;</span><span class=\"w\"> </span><span class=\"n\">https</span><span class=\"o\">:</span><span class=\"bp\">//</span><span class=\"n\">mail</span><span class=\"bp\">.</span><span class=\"n\">gnu</span><span class=\"bp\">.</span><span class=\"n\">org</span><span class=\"bp\">/</span><span class=\"n\">archive</span><span class=\"bp\">/</span><span class=\"n\">html</span><span class=\"bp\">/</span><span class=\"n\">help</span><span class=\"bp\">-</span><span class=\"n\">gnu</span><span class=\"bp\">-</span><span class=\"n\">emacs</span><span class=\"bp\">/</span><span class=\"mi\">2024</span><span class=\"bp\">-</span><span class=\"mi\">05</span><span class=\"bp\">/</span><span class=\"n\">msg00248</span><span class=\"bp\">.</span><span class=\"n\">html</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">package</span><span class=\"bp\">-</span><span class=\"n\">initialize</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">setq</span><span class=\"w\"> </span><span class=\"n\">package</span><span class=\"bp\">-</span><span class=\"n\">check</span><span class=\"bp\">-</span><span class=\"n\">signature</span><span class=\"w\"> </span><span class=\"n\">nil</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">package</span><span class=\"bp\">-</span><span class=\"n\">refresh</span><span class=\"bp\">-</span><span class=\"n\">contents</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">package</span><span class=\"bp\">-</span><span class=\"n\">install</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">gnu</span><span class=\"bp\">-</span><span class=\"n\">elpa</span><span class=\"bp\">-</span><span class=\"n\">keyring</span><span class=\"bp\">-</span><span class=\"n\">update</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">setq</span><span class=\"w\"> </span><span class=\"n\">package</span><span class=\"bp\">-</span><span class=\"n\">check</span><span class=\"bp\">-</span><span class=\"n\">signature</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"bp\">;;</span>\n<span class=\"w\">  </span><span class=\"bp\">;;</span><span class=\"w\"> </span><span class=\"n\">See</span><span class=\"o\">:</span>\n<span class=\"w\">  </span><span class=\"bp\">;;</span><span class=\"w\"> </span><span class=\"n\">https</span><span class=\"o\">:</span><span class=\"bp\">//</span><span class=\"n\">emacs</span><span class=\"bp\">.</span><span class=\"n\">stackexchange</span><span class=\"bp\">.</span><span class=\"n\">com</span><span class=\"bp\">/</span><span class=\"n\">questions</span><span class=\"bp\">/</span><span class=\"mi\">80871</span><span class=\"bp\">/</span><span class=\"n\">how</span><span class=\"bp\">-</span><span class=\"n\">to</span><span class=\"bp\">-</span><span class=\"n\">provide</span><span class=\"bp\">-</span><span class=\"n\">updated</span><span class=\"bp\">-</span><span class=\"n\">seq</span><span class=\"bp\">-</span><span class=\"n\">package</span><span class=\"bp\">-</span><span class=\"n\">to</span><span class=\"bp\">-</span><span class=\"n\">magit</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">setq</span><span class=\"w\"> </span><span class=\"n\">package</span><span class=\"bp\">-</span><span class=\"n\">install</span><span class=\"bp\">-</span><span class=\"n\">upgrade</span><span class=\"bp\">-</span><span class=\"n\">built</span><span class=\"bp\">-</span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">package</span><span class=\"bp\">-</span><span class=\"n\">install</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">compat</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">package</span><span class=\"bp\">-</span><span class=\"n\">install</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">seq</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">progn</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">unload</span><span class=\"bp\">-</span><span class=\"n\">feature</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">seq</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">require</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">seq</span><span class=\"o\">))</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">package</span><span class=\"bp\">-</span><span class=\"n\">install</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">magit</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"bp\">;;</span>\n<span class=\"w\">  </span><span class=\"bp\">;;</span><span class=\"w\"> </span><span class=\"n\">Missing</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">instructions</span><span class=\"w\"> </span><span class=\"n\">for</span><span class=\"w\"> </span><span class=\"n\">lean4</span><span class=\"bp\">-</span><span class=\"n\">mode</span><span class=\"o\">:</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">package</span><span class=\"bp\">-</span><span class=\"n\">install</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">company</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"bp\">;;</span>\n<span class=\"w\">  </span><span class=\"bp\">;;</span><span class=\"w\"> </span><span class=\"n\">From</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">instructions</span><span class=\"w\"> </span><span class=\"n\">for</span><span class=\"w\"> </span><span class=\"n\">lean4</span><span class=\"bp\">-</span><span class=\"n\">mode</span><span class=\"o\">:</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">package</span><span class=\"bp\">-</span><span class=\"n\">install</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">dash</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">package</span><span class=\"bp\">-</span><span class=\"n\">install</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">flycheck</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">package</span><span class=\"bp\">-</span><span class=\"n\">install</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">lsp</span><span class=\"bp\">-</span><span class=\"n\">mode</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">package</span><span class=\"bp\">-</span><span class=\"n\">install</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">magit</span><span class=\"bp\">-</span><span class=\"kn\">section</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"o\">)</span>\n</code></pre></div>\n<p>and try:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"o\">(</span><span class=\"n\">require</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">lean4</span><span class=\"bp\">-</span><span class=\"n\">mode</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>If that <code>require</code> returns <code>lean4-mode</code>, that's a good sign.</p>",
        "id": 455255262,
        "sender_full_name": "Eduardo Ochs",
        "timestamp": 1722389501
    },
    {
        "content": "<p>The main page of the workshop is <a href=\"http://anggtwu.net/2024-lean4-oficina-0.html\">here</a>, but I would like to finish the material for the three lessons/meetings and debug it more thorough before announcing that link in more places...</p>",
        "id": 455255725,
        "sender_full_name": "Eduardo Ochs",
        "timestamp": 1722389824
    },
    {
        "content": "<p>Btw, how do I add an <img alt=\":emacs:\" class=\"emoji\" src=\"https://avatars.zulip.com/3121/emoji/images/749cf72d.png\" title=\"emacs\"> icon/emoji (<code>:emacs:</code>) after my name in my profile?</p>",
        "id": 455255921,
        "sender_full_name": "Eduardo Ochs",
        "timestamp": 1722389952
    },
    {
        "content": "<p>Please submit a PR to the repo!</p>",
        "id": 455283371,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1722401556
    },
    {
        "content": "<p>I'm using NixOS and know nothing about issues with the new GPG key for ELPA.</p>",
        "id": 455283616,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1722401647
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"214703\">Yury G. Kudryashov</span> <a href=\"#narrow/stream/113489-new-members/topic/More.20detailed.20installation.20instructions.20for.20lean4-mode/near/455283371\">said</a>:</p>\n<blockquote>\n<p>Please submit a PR to the repo!</p>\n</blockquote>\n<p>Done: <a href=\"https://github.com/leanprover-community/lean4-mode/issues/75\">https://github.com/leanprover-community/lean4-mode/issues/75</a></p>",
        "id": 455288550,
        "sender_full_name": "Eduardo Ochs",
        "timestamp": 1722404406
    },
    {
        "content": "<p>Sorry, my code above had an error - its <code>(setq package-check-signature t)</code> should be <code>(setq package-check-signature 'allow-unsigned)</code>. The most up-to-date version of the progn can be found here:</p>\n<p><a href=\"http://anggtwu.net/eev-intros/find-lean4-intro.html#6\">http://anggtwu.net/eev-intros/find-lean4-intro.html#6</a></p>",
        "id": 456277163,
        "sender_full_name": "Eduardo Ochs",
        "timestamp": 1722752250
    }
]