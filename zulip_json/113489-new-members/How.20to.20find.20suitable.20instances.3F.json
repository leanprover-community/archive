[
    {
        "content": "<p>Hi! I'm just starting with Mathlib, and I'm a bit confused about using instances. For example I want to have topology on a product of unit intervals</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Topology</span><span class=\"bp\">.</span><span class=\"n\">UnitInterval</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Topology</span><span class=\"bp\">.</span><span class=\"n\">Constructions</span><span class=\"bp\">.</span><span class=\"n\">SumProd</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">unitSquare</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">unitInterval</span><span class=\"w\"> </span><span class=\"bp\">×</span><span class=\"w\"> </span><span class=\"n\">unitInterval</span>\n\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">instTopologicalSpaceProd</span>\n<span class=\"c1\">-- instTopologicalSpaceProd.{u, v} {X : Type u} {Y : Type v} [t₁ : TopologicalSpace X] [t₂ : TopologicalSpace Y] : TopologicalSpace (X × Y)</span>\n\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">IsOpen</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">univ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">unitInterval</span><span class=\"o\">)</span>\n<span class=\"c1\">-- checks</span>\n\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">IsOpen</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">univ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">unitSquare</span><span class=\"o\">)</span>\n<span class=\"c1\">-- failed to synthesize TopologicalSpace unitSquare</span>\n</code></pre></div>\n<p>Why does it fail to synthesize? I'd expect that having <code>instTopologicalSpaceProd</code>, Lean would find the suitable instance automatically. If not, then how should it be done?</p>",
        "id": 537763602,
        "sender_full_name": "Michał Pacholski",
        "timestamp": 1757024157
    },
    {
        "content": "<p>Make it an <code>abbrev</code></p>",
        "id": 537764039,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1757024395
    },
    {
        "content": "<p>Note that</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">IsOpen</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">univ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">unitInterval</span><span class=\"w\"> </span><span class=\"bp\">×</span><span class=\"w\"> </span><span class=\"n\">unitInterval</span><span class=\"o\">))</span>\n</code></pre></div>\n<p>works.</p>\n<p><code>abbrev</code> makes it so that lean sees past the definition when searching for instances.</p>",
        "id": 537765127,
        "sender_full_name": "Jakub Nowak",
        "timestamp": 1757025050
    }
]