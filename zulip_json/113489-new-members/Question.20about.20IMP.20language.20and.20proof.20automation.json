[
    {
        "content": "<p>I started to learn by working on the simple training language IMP from <a href=\"http://concrete-semantics.org/index.html\">Concrete Semantics</a> book.</p>\n<blockquote>\n<p>Experimenting with this concept, we see that Isabelle manages to prove many simple equivalences automatically. One example is the unfolding of while loops: Lemma 7.3. WHILE b DO c ∼ IF b THEN c;; WHILE b  DO c ELSE SKIP</p>\n</blockquote>\n<p>I have put my current work in Lean <a href=\"https://raw.githubusercontent.com/LessnessRandomness/Semantics/refs/heads/master/Semantics/Book-Concrete-Semantics/IMP.lean\">here</a> on Github. As one can see, the proof of the lemma 7.3 is simple, but not automatic.</p>\n<p>Is there anything I can do to make the proof as easy as in Isabelle, where it is, I suppose, something like an one-liner?</p>",
        "id": 507554118,
        "sender_full_name": "Ilmārs Cīrulis",
        "timestamp": 1742727772
    },
    {
        "content": "<p>You can do this one fully automatically by configuring <a href=\"https://github.com/leanprover-community/aesop\">aesop</a> to work with your inductive type I'd say. If you're not willing to do that this is pretty much as good as it gets with core means for now.</p>",
        "id": 507556297,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1742729367
    },
    {
        "content": "<p>Thank you!</p>",
        "id": 507556395,
        "sender_full_name": "Ilmārs Cīrulis",
        "timestamp": 1742729427
    },
    {
        "content": "<p>Ok, now another question...<br>\nI can't prove lemma 7.4 or lemma 7.5. (see at <a href=\"https://raw.githubusercontent.com/LessnessRandomness/Semantics/refs/heads/master/Semantics/Book-Concrete-Semantics/IMP.lean\">the same place</a>)</p>\n<p>I want to use <code>induction H</code> (in the proof of lemma 7.4, for example), but it is not working.</p>\n<p>This is the error message:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">index</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">target's</span><span class=\"w\"> </span><span class=\"n\">type</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">consider</span><span class=\"w\"> </span><span class=\"kn\">using</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"ss\">`cases</span><span class=\"bp\">`</span><span class=\"w\"> </span><span class=\"n\">tactic</span><span class=\"w\"> </span><span class=\"n\">instead</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"n\">Com</span><span class=\"bp\">.</span><span class=\"n\">While</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"n\">c1</span>\n</code></pre></div>",
        "id": 507577334,
        "sender_full_name": "Ilmārs Cīrulis",
        "timestamp": 1742745196
    },
    {
        "content": "<p>I've tried anything I could imagine but without success.<br>\nSend help... <span aria-label=\"sob\" class=\"emoji emoji-1f62d\" role=\"img\" title=\"sob\">:sob:</span></p>",
        "id": 507591845,
        "sender_full_name": "Ilmārs Cīrulis",
        "timestamp": 1742755145
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">L_7_5</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">b</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">BExp</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">c1</span><span class=\"w\"> </span><span class=\"n\">c2</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Com</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Hc</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">equivalent_commands</span><span class=\"w\"> </span><span class=\"n\">c1</span><span class=\"w\"> </span><span class=\"n\">c2</span><span class=\"o\">):</span>\n<span class=\"w\">    </span><span class=\"n\">equivalent_commands</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Com</span><span class=\"bp\">.</span><span class=\"n\">While</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"n\">c1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Com</span><span class=\"bp\">.</span><span class=\"n\">While</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"n\">c2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">intros</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">constructor</span><span class=\"w\"> </span><span class=\"bp\">&lt;;&gt;</span><span class=\"w\"> </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">H</span>\n<span class=\"w\">  </span><span class=\"bp\">.</span><span class=\"w\"> </span><span class=\"n\">generalize</span><span class=\"w\"> </span><span class=\"n\">hfoo</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Com</span><span class=\"bp\">.</span><span class=\"n\">While</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"n\">c1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">foo</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">H</span>\n<span class=\"w\">    </span><span class=\"n\">induction</span><span class=\"w\"> </span><span class=\"n\">H</span><span class=\"w\"> </span><span class=\"bp\">&lt;;&gt;</span><span class=\"w\"> </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">hfoo</span>\n<span class=\"w\">    </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n<span class=\"w\">    </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n<span class=\"w\">  </span><span class=\"bp\">.</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>Can be used to get aroudn that limitation of <code>induction</code>, alternatively you can recursively refer to your theorem without induction if you want</p>",
        "id": 507594166,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1742756634
    },
    {
        "content": "<p>Thank you, it really helps! :)</p>",
        "id": 507595531,
        "sender_full_name": "Ilmārs Cīrulis",
        "timestamp": 1742757391
    },
    {
        "content": "<p>Maybe someone can help with the proof of <code>L_7_9</code> <a href=\"https://raw.githubusercontent.com/LessnessRandomness/Semantics/refs/heads/master/Semantics/Book-Concrete-Semantics/IMP.lean\">here</a>?</p>\n<p>The last step with both WhileTrue is causing me problems, it seems. I tried to look at Isabella theory at <a href=\"https://isabelle.in.tum.de/dist/library/HOL/HOL-IMP/Big_Step.html\">https://isabelle.in.tum.de/dist/library/HOL/HOL-IMP/Big_Step.html</a> , but it didn't help yet.</p>",
        "id": 507731149,
        "sender_full_name": "Ilmārs Cīrulis",
        "timestamp": 1742816086
    },
    {
        "content": "<p>Wohoo, I did it :)</p>",
        "id": 507757635,
        "sender_full_name": "Ilmārs Cīrulis",
        "timestamp": 1742821818
    }
]