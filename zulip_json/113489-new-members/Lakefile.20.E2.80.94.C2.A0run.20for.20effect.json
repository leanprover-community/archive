[
    {
        "content": "<p>I have a piece of syntax in <code>Main.lean</code> that I defined for an effect (it writes a file) and I'd like <code>lake build</code> to run that file and produce that effect. </p>\n<p>This doesn't work: it errors because there's no main</p>\n<div class=\"codehilite\" data-code-language=\"TOML\"><pre><span></span><code><span class=\"n\">name</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"s2\">\"leanvite\"</span>\n<span class=\"n\">defaultTargets</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"s2\">\"Main\"</span><span class=\"p\">]</span>\n\n<span class=\"k\">[[lean_exe]]</span>\n<span class=\"n\">name</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"s2\">\"Main\"</span>\n<span class=\"n\">root</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"s2\">\"Main\"</span>\n</code></pre></div>\n<p>This doesn't work: the file isn't run for its effect at all:</p>\n<div class=\"codehilite\" data-code-language=\"TOML\"><pre><span></span><code><span class=\"n\">name</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"s2\">\"leanvite\"</span>\n<span class=\"n\">defaultTargets</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"s2\">\"Main\"</span><span class=\"p\">]</span>\n\n<span class=\"k\">[[lean_lib]]</span>\n<span class=\"n\">name</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"s2\">\"Main\"</span>\n<span class=\"n\">root</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"s2\">\"Main\"</span>\n</code></pre></div>\n<p>is there a way to get the thing I'm looking for here?</p>",
        "id": 529713953,
        "sender_full_name": "Rob Simmons",
        "timestamp": 1753047177
    },
    {
        "content": "<p>You need to define a custom target; you could look at doc-gen4 for some quite complex examples of this</p>",
        "id": 529714941,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1753048540
    },
    {
        "content": "<p>Hmm, ok!</p>",
        "id": 529715118,
        "sender_full_name": "Rob Simmons",
        "timestamp": 1753048770
    }
]