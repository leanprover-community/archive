[
    {
        "content": "<p>Hello, I have this small lemma I'm trying to prove, where if I know:</p>\n<ol>\n<li>an element <code>e</code> is in a list with some List functions applied to it, and</li>\n<li>I know <code>e</code> is not the head of the list,<br>\nthen it must be in the tail of the list with the functions applied to the list.</li>\n</ol>\n<p>This sounds straightforward, it's just \"pruning\" the head out of the list, but I'm struggling with showing this in Lean. Does anyone know how to \"prune\" head out of <code>he_in_l</code> in the MWE below?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">in_tail_not_head</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">e</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"n\">head</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">l_tail</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">he_in_l</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">e</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">take</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">indexesOf</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">head</span><span class=\"w\"> </span><span class=\"bp\">::</span><span class=\"w\"> </span><span class=\"n\">l_tail</span><span class=\"o\">))</span><span class=\"bp\">.</span><span class=\"n\">head!</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">head</span><span class=\"w\"> </span><span class=\"bp\">::</span><span class=\"w\"> </span><span class=\"n\">l_tail</span><span class=\"o\">))</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">he_is_head</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"n\">e</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">head</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">e</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">take</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">indexesOf</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"n\">l_tail</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">head!</span><span class=\"w\"> </span><span class=\"n\">l_tail</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n</code></pre></div>",
        "id": 526704633,
        "sender_full_name": "An Qi Zhang",
        "timestamp": 1751419268
    },
    {
        "content": "<p>What's your mathematical argument?</p>",
        "id": 526705016,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1751419590
    },
    {
        "content": "<p>Also is there a reason you're writing <code>(indexesOf ...).head!</code> instead of just <code>idxOf</code>?</p>",
        "id": 526705225,
        "sender_full_name": "Matt Diamond",
        "timestamp": 1751419732
    },
    {
        "content": "<p>the lemma that a member of a list is either the head or a member of the tail is <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=List.mem_cons#doc\">docs#List.mem_cons</a></p>\n<p>(<strong>Edit:</strong> I see that your problem is more about membership under a mapping, not just separating head and tail)</p>",
        "id": 526706680,
        "sender_full_name": "Matt Diamond",
        "timestamp": 1751420981
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=List.idxOf_cons#doc\">docs#List.idxOf_cons</a> and <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=List.take_cons#doc\">docs#List.take_cons</a> should be useful</p>",
        "id": 526707490,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1751421670
    },
    {
        "content": "<p>also <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=beq_iff_eq#doc\">docs#beq_iff_eq</a></p>",
        "id": 526707556,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1751421711
    },
    {
        "content": "<p>Thanks! I figured out how to close the goal with those theorems. I also simplified <code>(indexesOf ...).head!</code> to <code>idxOf</code>, thanks for bringing that up!</p>\n<p>My original mathematical argument was that functions <code>take</code> and <code>idxOf</code> map to a subset of elements <code>sub</code>, and <code>e</code> is a member of <code>sub</code>. If <code>e</code> isn't <code>head</code>, then <code>e</code> is one of the other elements.</p>\n<p>Working through the problem in Lean highlighted one other fact to prove the lemma: <code>e</code> also can't be the head of the list, otherwise <code>sub</code> would be empty.</p>",
        "id": 527042395,
        "sender_full_name": "An Qi Zhang",
        "timestamp": 1751562622
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"515324\">An Qi Zhang</span> has marked this topic as resolved.</p>",
        "id": 527042415,
        "sender_full_name": "Notification Bot",
        "timestamp": 1751562629
    }
]