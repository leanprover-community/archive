[
    {
        "content": "<p>Is it possible to prove following? Maybe I should use something else, not Real.rpow? Some function for integer roots, maybe?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n<span class=\"kn\">example</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Real</span><span class=\"bp\">.</span><span class=\"n\">rpow</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">125</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n</code></pre></div>",
        "id": 487111694,
        "sender_full_name": "Ilmārs Cīrulis",
        "timestamp": 1733782919
    },
    {
        "content": "<p>It is not true, with the definition in Mathlib AFAICT it equals <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>5</mn><mi>cos</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><mi>π</mi><mi mathvariant=\"normal\">/</mi><mn>3</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">5 \\cos (\\pi/3)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">5</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mop\">cos</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">π</span><span class=\"mord\">/3</span><span class=\"mclose\">)</span></span></span></span> (see <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Real.rpow_def_of_neg#doc\">docs#Real.rpow_def_of_neg</a>)</p>",
        "id": 487116889,
        "sender_full_name": "Vincent Beffara",
        "timestamp": 1733785050
    },
    {
        "content": "<p>Yes, now I get it.</p>\n<p>So, if I want to calculate cubic root of negative number like in school, I need to define a function for it myself. Like this, probably.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">noncomputable</span><span class=\"w\"> </span><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">cubic_root</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">):</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">x</span>\n<span class=\"w\">  </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"n\">Real</span><span class=\"bp\">.</span><span class=\"n\">rpow</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"k\">else</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Real</span><span class=\"bp\">.</span><span class=\"n\">rpow</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 487118742,
        "sender_full_name": "Ilmārs Cīrulis",
        "timestamp": 1733785824
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"658873\">Lessness</span> has marked this topic as resolved.</p>",
        "id": 487118750,
        "sender_full_name": "Notification Bot",
        "timestamp": 1733785829
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"698751\">Roozbeh Yousefzadeh</span> has marked this topic as unresolved.</p>",
        "id": 516577936,
        "sender_full_name": "Notification Bot",
        "timestamp": 1746593100
    },
    {
        "content": "<p>If possible, I would appreciate some clarification on this. Is it likely that this definition can be changed or refined in the future? <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Real.rpow_def_of_neg#doc\">https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Real.rpow_def_of_neg#doc</a></p>",
        "id": 516578144,
        "sender_full_name": "Roozbeh Mohit",
        "timestamp": 1746593241
    },
    {
        "content": "<p>It is very unlikely that roots of negative real numbers in the specific case where the exponent is rational with odd denominator will be changed. Any such change would break compatibility with real roots of negative complex numbers and would make taking roots of negative real numbers discontinuous everywhere in the second argument. Real roots of negative real numbers are poorly-behaved in general and I would suggest that you just avoid them.</p>",
        "id": 516582564,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1746595807
    },
    {
        "content": "<p>If you want to avoid the <code>if</code> then just take the root of the absolute value (whose definition we all agree on) and multiply the answer by the sign of the number.</p>",
        "id": 516582718,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1746595917
    },
    {
        "content": "<p>Thank you. This makes sense. <br>\nOne issue that arises from this definition is that if we have x ^ (1/3) is positive, we can't prove that x itself is positive. x can be negative while x ^ (1/3) is positive. Is my understanding correct?</p>",
        "id": 516582929,
        "sender_full_name": "Roozbeh Mohit",
        "timestamp": 1746596037
    },
    {
        "content": "<p>No. I'm suggesting you multiply by the sign of x at the end..</p>",
        "id": 516583049,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1746596095
    },
    {
        "content": "<p>Oh but with Lean's definition yes you're correct. (-1)^(1/3)=1/2, there are a couple of proofs of this on this zulip</p>",
        "id": 516583219,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1746596208
    },
    {
        "content": "<p>I understand now. Would it make sense to define your suggestion as a specific function in mathlib? Some function separate from rpow</p>",
        "id": 516583569,
        "sender_full_name": "Roozbeh Mohit",
        "timestamp": 1746596487
    },
    {
        "content": "<p>Maybe one can define a <code>Real.qpow : \\R -&gt; \\Q -&gt; \\R</code></p>",
        "id": 516588288,
        "sender_full_name": "Jz Pan",
        "timestamp": 1746599110
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"698751\">Roozbeh Yousefzadeh</span> has marked this topic as resolved.</p>",
        "id": 516622033,
        "sender_full_name": "Notification Bot",
        "timestamp": 1746609970
    }
]