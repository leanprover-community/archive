[
    {
        "content": "<p>I've noticed that as my proof has grown lean has become slower and slower. I seem to also be running into nonsensical bug/errors like <code>(kernel) deep recursion detected</code>.</p>\n<p><del>What tips/tricks do you have in terms of structuring a proof that makes the IDE not slow down as much? Is it having fewer <code>have</code> lemmas in scope? Sectioning things off into top-level <code>lemma</code>s? I'm using the vim plugin, maybe the vscode version is more optimized?</del></p>\n<p>Any tips for diagnosing / fixing the <code>(kernel) deep recursion error</code> would be appreciated.</p>",
        "id": 479709847,
        "sender_full_name": "Philogy",
        "timestamp": 1730302439
    },
    {
        "content": "<p>Also I'm encountering frequent crashes of the LSP. My file isn't that large ~300 lines so I assume I must be doing something wrong since other people seem to proving enormous things with it.</p>",
        "id": 479713079,
        "sender_full_name": "Philogy",
        "timestamp": 1730303328
    },
    {
        "content": "<p>My proof for anyone who's curious: <a href=\"https://gist.github.com/Philogy/127f5d0e6753b6c7ed304123deb0fc04\">https://gist.github.com/Philogy/127f5d0e6753b6c7ed304123deb0fc04</a></p>",
        "id": 479714481,
        "sender_full_name": "Philogy",
        "timestamp": 1730303700
    },
    {
        "content": "<p>I would hazard a guess that the gigantic numbers in the first couple lines are the source of your sorrows. Are you using compiler based tactics? Switching to those where possible might help, if you are carrying out a lot of computations</p>",
        "id": 479730109,
        "sender_full_name": "Luigi Massacci",
        "timestamp": 1730308569
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"466290\">Luigi Massacci</span> <a href=\"#narrow/channel/113489-new-members/topic/Tips.20for.20limiting.20slow.20down.20when.20editing.20larger.20proofs.2E/near/479730109\">said</a>:</p>\n<blockquote>\n<p>I would hazard a guess that the gigantic numbers in the first couple lines are the source of your sorrows. Are you using compiler based tactics? Switching to those where possible might help, if you are carrying out a lot of computations</p>\n</blockquote>\n<p>Wdym by \"compiler based tactics\"?</p>\n<p>I do some very limited computation with the numbers  but it shouldn't cause any recursion, for instance computing <code>Nat.xgcd (2^256) (2^256-1)</code> which yields <code>(1, -1)</code> is simplified out at the beginning. It's only later when using the lemma on <a href=\"https://gist.github.com/Philogy/127f5d0e6753b6c7ed304123deb0fc04#file-basic-lean-L226\">L226</a> does it trigger the deep recursion detected. Commenting that line out specifically resolves the <code>deep recursion detected</code>.</p>",
        "id": 479732129,
        "sender_full_name": "Philogy",
        "timestamp": 1730309282
    },
    {
        "content": "<p>Splitting as much as you can to lemmas is a good idea, both for modularity and for faster elaboration.<br>\nAdditionally, it might be good to define <code>m0</code> and <code>m1</code> using <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Tactic/IrreducibleDef.html\"><code>irreducible_def</code></a>, as that prevents the kernel from reducing them, and proving what facts you need about them outside of the theorem, only substituting them there when you must. You can also try doing that for the other constants you have in the proof</p>",
        "id": 480051462,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1730467656
    }
]