[
    {
        "content": "<p>Lean allows a surprisingly wide range of characters in constant names (or identifiers in general).</p>\n<p>Obviously whitespace—such as the space character (<code>' '</code>), tab (<code>'\\t'</code>), and newline (<code>'\\n'</code>)—is banned, and the same goes for the ASCII control characters, but I'm sure there are other exclusions within the ASCII subset of Unicode.</p>\n<p>What is the complete list of \"printable\"/non-control ASCII characters <em>not</em> permitted anywhere in an identifier/constant name?</p>",
        "id": 513964350,
        "sender_full_name": "Isak Colboubrani",
        "timestamp": 1745442219
    },
    {
        "content": "<p>Also, do the segments of an identifier wrapped in «…» receive any special parsing treatment? Some examples in the Lean code:</p>\n<ul>\n<li><code>«term_&lt;||&gt;_»</code></li>\n<li><code>Std.Sat.AIG.«term⟦_,_,_⟧»</code></li>\n<li><code>List.«term_&lt;:+:_»</code></li>\n</ul>\n<p>In other words, are those «…» quotes syntactically significant, or is it just a naming convention?</p>",
        "id": 513967687,
        "sender_full_name": "Isak Colboubrani",
        "timestamp": 1745443679
    },
    {
        "content": "<p><code>foo.«bar»</code> is identical to <code>foo.bar</code></p>",
        "id": 513968974,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1745444289
    },
    {
        "content": "<p>But the former works when <code>bar</code> contains non-standard characters</p>",
        "id": 513968988,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1745444301
    },
    {
        "content": "<p>Thanks! After some testing it seems like at least <code> \"#$%&amp;()*+,-/:;&lt;=&gt;@[\\]^`{|}~%</code> are printable ASCII characters that are guaranteed to not be present in an identifier name except for when they are within «…» quotes (where anything goes). Perhaps that is the complete list.</p>",
        "id": 513970438,
        "sender_full_name": "Isak Colboubrani",
        "timestamp": 1745445107
    },
    {
        "content": "<p>Here’s a valid theorem name that pushes the «…» quoting to its limit and confuses the Zulip code formatter:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"bp\">«</span><span class=\"w\"> </span><span class=\"s2\">\"#$%&amp;()*+,-/:;&lt;=&gt;@[</span><span class=\"err\">\\</span><span class=\"s2\">]^`{|}~%» : True := trivial</span>\n<span class=\"s2\">#check « \"</span><span class=\"bp\">#$%&amp;</span><span class=\"o\">()</span><span class=\"bp\">*+</span><span class=\"o\">,</span><span class=\"bp\">-/</span><span class=\"o\">:</span><span class=\"bp\">;&lt;=&gt;</span><span class=\"kd\">@[</span><span class=\"bp\">\\</span><span class=\"kd\">]</span><span class=\"bp\">^`</span><span class=\"o\">{</span><span class=\"bp\">|</span><span class=\"o\">}</span><span class=\"bp\">~%»</span>\n</code></pre></div>",
        "id": 513971051,
        "sender_full_name": "Isak Colboubrani",
        "timestamp": 1745445471
    },
    {
        "content": "<p><code>?</code>, <code>!</code> and <code>'</code> are also valid without using «…».</p>\n<p>Fun fact: it was possible to use <code>«&lt;script&gt;...&lt;/script&gt;»</code> to inject javascript to doc page some time ago.</p>",
        "id": 514026388,
        "sender_full_name": "Jz Pan",
        "timestamp": 1745477661
    },
    {
        "content": "<p>That's a nice point <span class=\"user-mention\" data-user-id=\"366779\">@Jz Pan</span>, and the HTML-injection was clever! With the available options the most horrible looking yet valid ASCII-only theorem name should look something like this:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"bp\">_'!?.«</span><span class=\"w\"> </span><span class=\"s2\">\"#$%&amp;()*+,-/:;&lt;=&gt;@[</span><span class=\"err\">\\</span><span class=\"s2\">]^`{|}~%»._'!? : True := trivial</span>\n<span class=\"s2\">#check _'!?.« \"</span><span class=\"bp\">#$%&amp;</span><span class=\"o\">()</span><span class=\"bp\">*+</span><span class=\"o\">,</span><span class=\"bp\">-/</span><span class=\"o\">:</span><span class=\"bp\">;&lt;=&gt;</span><span class=\"kd\">@[</span><span class=\"bp\">\\</span><span class=\"kd\">]</span><span class=\"bp\">^`</span><span class=\"o\">{</span><span class=\"bp\">|</span><span class=\"o\">}</span><span class=\"bp\">~%»._'!?</span>\n</code></pre></div>",
        "id": 514163487,
        "sender_full_name": "Isak Colboubrani",
        "timestamp": 1745509992
    }
]