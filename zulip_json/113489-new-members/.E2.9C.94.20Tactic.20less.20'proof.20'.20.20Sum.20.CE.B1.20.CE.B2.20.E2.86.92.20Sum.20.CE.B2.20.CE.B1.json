[
    {
        "content": "<p>Following TPIL, i am trying to do the equivalent of </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">swap_sum</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Sum</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Sum</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\">  </span><span class=\"c1\">--disjunction</span>\n<span class=\"w\">  </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">p</span>\n<span class=\"w\">  </span><span class=\"n\">cases</span><span class=\"w\"> </span><span class=\"n\">p</span>\n<span class=\"w\">  </span><span class=\"bp\">.</span><span class=\"w\"> </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">Sum</span><span class=\"bp\">.</span><span class=\"n\">inr</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">assumption</span>\n<span class=\"w\">  </span><span class=\"bp\">.</span><span class=\"w\"> </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">Sum</span><span class=\"bp\">.</span><span class=\"n\">inl</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">assumption</span>\n</code></pre></div>\n<p>Using tactics its not too bad, and not using tactics but proving the Equivalent for Or is not too bad. But i am trying to do the Sum version without tactics. It has been more difficult than i thought , so far i have this:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">swap_sum_tctless</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Sum</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Sum</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"o\">:</span><span class=\"n\">Sum</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">:(</span><span class=\"n\">h</span><span class=\"bp\">.</span><span class=\"n\">getLeft?</span><span class=\"bp\">.</span><span class=\"n\">isSome</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">true</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">then</span>\n<span class=\"w\">   </span><span class=\"n\">Sum</span><span class=\"bp\">.</span><span class=\"n\">inr</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"bp\">.</span><span class=\"n\">getLeft?</span><span class=\"bp\">.</span><span class=\"n\">get</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"k\">else</span>\n<span class=\"w\">   </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">:(</span><span class=\"n\">h</span><span class=\"bp\">.</span><span class=\"n\">getRight?</span><span class=\"bp\">.</span><span class=\"n\">isSome</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">true</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">then</span>\n<span class=\"w\">    </span><span class=\"n\">Sum</span><span class=\"bp\">.</span><span class=\"n\">inl</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"bp\">.</span><span class=\"n\">getRight?</span><span class=\"bp\">.</span><span class=\"n\">get</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">y</span><span class=\"o\">))</span>\n</code></pre></div>\n<p>Is this close? I think i need something that says these are the only two cases for the input.. but i have not been able to figure it out.</p>",
        "id": 485186739,
        "sender_full_name": "Abraham Solomon",
        "timestamp": 1732935740
    },
    {
        "content": "<p>No, using <code>if</code> is rather painful. It's better to use <code>match</code> for pattern matching here.</p>",
        "id": 485186914,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1732935935
    },
    {
        "content": "<p>You could alternatively use <code>Sum.elim</code> (<a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Sum.elim#doc\">docs#Sum.elim</a>), which defines a function on <code>α ⊕ β</code> by giving separate definitions on <code>α</code> and <code>β</code>.</p>",
        "id": 485190768,
        "sender_full_name": "Mitchell Lee",
        "timestamp": 1732939358
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"695266\">Mitchell Lee</span> <a href=\"#narrow/channel/113489-new-members/topic/Tactic.20less.20'proof.20'.20.20Sum.20.CE.B1.20.CE.B2.20.E2.86.92.20Sum.20.CE.B2.20.CE.B1/near/485190768\">said</a>:</p>\n<blockquote>\n<p>You could alternatively use <code>Sum.elim</code> (<a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Sum.elim#doc\">docs#Sum.elim</a>), which defines a function on <code>α ⊕ β</code> by giving separate definitions on <code>α</code> and <code>β</code>.</p>\n</blockquote>\n<p>Thanks! Yea i looked for that, but kept getting </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">invalid</span><span class=\"w\"> </span><span class=\"n\">field</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">elim'</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">environment</span><span class=\"w\"> </span><span class=\"n\">does</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">contain</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">Sum</span><span class=\"bp\">.</span><span class=\"n\">elim'</span>\n<span class=\"w\">  </span><span class=\"n\">h</span>\n<span class=\"n\">has</span><span class=\"w\"> </span><span class=\"n\">type</span>\n<span class=\"w\">  </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">⊕</span><span class=\"w\"> </span><span class=\"n\">β</span>\n</code></pre></div>",
        "id": 485191590,
        "sender_full_name": "Abraham Solomon",
        "timestamp": 1732940196
    },
    {
        "content": "<p>What's the code you're using that is giving you that error message?</p>",
        "id": 485192277,
        "sender_full_name": "Mitchell Lee",
        "timestamp": 1732940821
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"695266\">Mitchell Lee</span> <a href=\"#narrow/channel/113489-new-members/topic/Tactic.20less.20'proof.20'.20.20Sum.20.CE.B1.20.CE.B2.20.E2.86.92.20Sum.20.CE.B2.20.CE.B1/near/485192277\">said</a>:</p>\n<blockquote>\n<p>What's the code you're using that is giving you that error message?</p>\n</blockquote>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">swap_sum_tctless</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Sum</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Sum</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"o\">:</span><span class=\"n\">Sum</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"bp\">.</span><span class=\"n\">elim</span>\n</code></pre></div>\n<p>and if i try:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">Sum</span><span class=\"bp\">.</span><span class=\"n\">elim</span>\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">Sum</span>\n</code></pre></div>\n<p>Does it work for you? Is there some import i am missing?</p>",
        "id": 485192472,
        "sender_full_name": "Abraham Solomon",
        "timestamp": 1732940955
    },
    {
        "content": "<p>It works on Lean 4 Web (<a href=\"https://live.lean-lang.org/\">https://live.lean-lang.org/</a>) even without mathlib, but unfortunately I do not know what needs to be imported in order to make it work.</p>",
        "id": 485192880,
        "sender_full_name": "Mitchell Lee",
        "timestamp": 1732941332
    },
    {
        "content": "<p>Perhaps you could try using <code>Sum.casesOn</code> instead.</p>",
        "id": 485193265,
        "sender_full_name": "Mitchell Lee",
        "timestamp": 1732941746
    },
    {
        "content": "<p>Using pattern matching as Kyle Miller suggests more closely matches what TPIL tends to do.</p>",
        "id": 485193318,
        "sender_full_name": "Mitchell Lee",
        "timestamp": 1732941834
    },
    {
        "content": "<blockquote>\n<p>Perhaps you could try using <code>Sum.casesOn</code> instead.</p>\n</blockquote>\n<p>Thanks, at least this one works for me!</p>",
        "id": 485193374,
        "sender_full_name": "Abraham Solomon",
        "timestamp": 1732941863
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"776452\">Abraham Solomon</span> has marked this topic as resolved.</p>",
        "id": 485212967,
        "sender_full_name": "Notification Bot",
        "timestamp": 1732960517
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"776452\">Abraham Solomon</span> <a href=\"#narrow/channel/113489-new-members/topic/.E2.9C.94.20Tactic.20less.20'proof.20'.20.20Sum.20.CE.B1.20.CE.B2.20.E2.86.92.20Sum.20.CE.B2.20.CE.B1/near/485192472\">said</a>:</p>\n<blockquote>\n<p>Is there some import i am missing?</p>\n</blockquote>\n<p>What does <code>#eval Lean.versionString</code> give?</p>",
        "id": 485215471,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1732962523
    }
]