[
    {
        "content": "<p>Hi everybody!</p>\n<p>I recently learnt Lean and started with a simple theorem <code>theorem existence_theorem: ∃ x y : ℝ, (irrational x) ∧ (irrational y) ∧ ¬(irrational (x^y))</code>.</p>\n<p><a href=\"https://leanprover-community.github.io/lean-web-editor/#code=import%20data.real.irrational%0Aimport%20data.rat.sqrt%0Aimport%20analysis.special_functions.pow.real%0A%0Aopen%20real%0A%0Alemma%20simple_lemma%3A%20%28%28sqrt%202%29%5E%28sqrt%202%29%29%5E%28sqrt%202%29%20%3D%202%20%3A%3D%0Abegin%0A%20%20rw%20%3C-rpow_mul%2C%0A%20%20rw%20%3C-pow_two%2C%0A%20%20simp%2C%0A%20%20simp%20%5Bsqrt_nonneg%5D%2C%0Aend%0A%0A%23print%20simple_lemma%0A%0Atheorem%20existence_theorem%3A%0A%20%20%E2%88%83%20x%20y%20%3A%20%E2%84%9D%2C%20%28irrational%20x%29%20%E2%88%A7%20%28irrational%20y%29%20%E2%88%A7%20%C2%AC%28irrational%20%28x%5Ey%29%29%20%3A%3D%0Abegin%0A%20%20--%20Technicality%3A%20we%20need%20to%20prove%20that%202%20%28as%20a%20real%29%20is%20not%20irrational%0A%20%20have%20not_irrat_2%20%3A%20%C2%AC%28irrational%202%29%2C%0A%20%20%7B%0A%20%20%20%20convert%20rat.not_irrational%202%2C%0A%20%20%20%20norm_cast%2C%0A%20%20%7D%2C%0A%20%20by_cases%20h%20%3A%20irrational%20%28%28sqrt%202%29%5E%28sqrt%202%29%29%2C%0A%20%20--%20h%20%3A%20irrational%20%28sqrt%202%20%5E%20sqrt%202%29%0A%20%20%7B%0A%20%20%20%20existsi%20%5B%28sqrt%202%29%5E%28sqrt%202%29%2C%20sqrt%202%5D%2C%0A%20%20%20%20simp%20%5Bh%2C%20simple_lemma%2C%20irrational_sqrt_two%2C%20not_irrat_2%5D%2C%0A%20%20%7D%2C%0A%20%20--%20h%20%3A%20%C2%ACirrational%20%28sqrt%202%20%5E%20sqrt%202%29%0A%20%20%7B%0A%20%20%20%20existsi%20%5Bsqrt%202%2C%20sqrt%202%5D%2C%0A%20%20%20%20simp%20%5Bh%2C%20irrational_sqrt_two%5D%2C%0A%20%20%7D%2C%0Aend%0A%0A%23print%20existence_theorem\">Here</a> it is implemented in Lean 3.</p>\n<p>Now I'm trying to convert it to Lean 4 and I'm stuck with the simple lemma <code>((sqrt 2)^(sqrt 2))^(sqrt 2) = 2</code> (see <a href=\"https://live.lean-lang.org/#code=import%20Mathlib.Data.Real.Irrational%0Aimport%20Mathlib.Analysis.SpecialFunctions.Pow.Real%0A%0Aopen%20Real%0A%0Alemma%20simple_lemma%3A%20((sqrt%202)%5E(sqrt%202))%5E(sqrt%202)%20%3D%202%20%3A%3D%20by%0A%20%20rw%20%5B%3C-rpow_mul%5D%0A%20%20rw%20%5B%3C-pow_two%5D%0A%20%20rw%20%5Bsq_sqrt%5D%0A%20%20simp%0A%20%20rw%20%5Bsq_sqrt%5D%0A%20%20%0A%23print%20simple_lemma%0A%0Atheorem%20existence_theorem%3A%0A%20%20%E2%88%83%20x%20y%20%3A%20%E2%84%9D%2C%20(Irrational%20x)%20%E2%88%A7%20(Irrational%20y)%20%E2%88%A7%20%C2%AC(Irrational%20(x%5Ey))%20%3A%3D%20by%0A%20%20by_cases%20h%20%3A%20Irrational%20((sqrt%202)%5E(sqrt%202))%0A%20%20--%20h%20%3A%20Irrational%20(sqrt%202%20%5E%20sqrt%202)%0A%20%20%7B%0A%20%20%20%20existsi%20(sqrt%202)%5E(sqrt%202)%2C%20sqrt%202%0A%20%20%20%20simp%20%5Bh%2C%20simple_lemma%2C%20irrational_sqrt_two%5D%0A%20%20%20%20exact%20Rat.not_irrational%202%0A%20%20%7D%0A%20%20--%20h%20%3A%20%C2%ACIrrational%20(sqrt%202%20%5E%20sqrt%202)%0A%20%20%7B%0A%20%20%20%20existsi%20sqrt%202%2C%20sqrt%202%0A%20%20%20%20simp%20%5Bh%2C%20irrational_sqrt_two%5D%0A%20%20%7D%0A%0A%23print%20existence_theorem%0A\">there</a>), whereas I would expect this lemma to be trivial.</p>\n<p>It looks like I have to prove <code>0 ≤ 2</code> which I expected <code>simp</code> would solve but it doesn't.</p>\n<p>Questions:</p>\n<ul>\n<li>Why can't I proceed just like in Lean 3?</li>\n<li>How would you write it?</li>\n</ul>\n<p>Thanks</p>",
        "id": 401487466,
        "sender_full_name": "ElCondor",
        "timestamp": 1699686285
    },
    {
        "content": "<p><code>norm_num</code> is the tactic whose job it is to prove equalities and inequalities between numerals. <code>simp</code> is a tactic which rewrites equalities. <code>simp</code> doesn't mean \"prove anything simple\"</p>",
        "id": 401487997,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1699686870
    },
    {
        "content": "<p>Thanks Kevin, I was able to solve it (see <a href=\"https://live.lean-lang.org/#code=import%20Mathlib.Data.Real.Irrational%0Aimport%20Mathlib.Analysis.SpecialFunctions.Pow.Real%0A%0Aopen%20Real%0A%0Alemma%20simple_lemma%3A%20((sqrt%202)%5E(sqrt%202))%5E(sqrt%202)%20%3D%202%20%3A%3D%20by%0A%20%20rw%20%5B%3C-rpow_mul%5D%0A%20%20norm_num%0A%20%20exact%20Real.sqrt_nonneg%202%0A%0A%23print%20simple_lemma%0A%0Atheorem%20existence_theorem%3A%0A%20%20%E2%88%83%20x%20y%20%3A%20%E2%84%9D%2C%20(Irrational%20x)%20%E2%88%A7%20(Irrational%20y)%20%E2%88%A7%20%C2%AC(Irrational%20(x%5Ey))%20%3A%3D%20by%0A%20%20by_cases%20h%20%3A%20Irrational%20((sqrt%202)%5E(sqrt%202))%0A%20%20--%20h%20%3A%20Irrational%20(sqrt%202%20%5E%20sqrt%202)%0A%20%20%7B%0A%20%20%20%20existsi%20(sqrt%202)%5E(sqrt%202)%2C%20sqrt%202%0A%20%20%20%20simp%20%5Bh%2C%20simple_lemma%2C%20irrational_sqrt_two%5D%0A%20%20%20%20exact%20Rat.not_irrational%202%0A%20%20%7D%0A%20%20--%20h%20%3A%20%C2%ACIrrational%20(sqrt%202%20%5E%20sqrt%202)%0A%20%20%7B%0A%20%20%20%20existsi%20sqrt%202%2C%20sqrt%202%0A%20%20%20%20simp%20%5Bh%2C%20irrational_sqrt_two%5D%0A%20%20%7D%0A%0A%23print%20existence_theorem%0A\">here</a>).</p>\n<p>I know it's WIP, but it's a bit hard to find the right tactic in the doc right now (I looked at <a href=\"https://lean-lang.org/theorem_proving_in_lean4/tactics.html?search=norm_num\">https://lean-lang.org/theorem_proving_in_lean4/tactics.html?search=norm_num</a>)</p>",
        "id": 401488294,
        "sender_full_name": "ElCondor",
        "timestamp": 1699687222
    },
    {
        "content": "<p>Yeah I don't know the solution to \"look up which tactic is the right one for this goal\". In the end I just learnt what all the big tactics did.</p>",
        "id": 401488662,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1699687680
    }
]