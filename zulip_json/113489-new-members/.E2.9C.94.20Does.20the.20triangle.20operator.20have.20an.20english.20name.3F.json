[
    {
        "content": "<p>Does the triangle operator in the following proof have a name?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">}</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hAB</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hBC</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">hAB</span><span class=\"w\"> </span><span class=\"bp\">▸</span><span class=\"w\"> </span><span class=\"n\">hBC</span>\n</code></pre></div>\n<p>I would like to understand it better and don't know how to look it up.</p>",
        "id": 496903214,
        "sender_full_name": "Kent Van Vels",
        "timestamp": 1738288421
    },
    {
        "content": "<p>According to <a href=\"https://leanprover.github.io/theorem_proving_in_lean4/quantifiers_and_equality.html#equality\">TPIL</a>, <code>hAB ▸ hBC</code> is shorthand for <code>Eq.subst hAB hBC</code></p>",
        "id": 496903404,
        "sender_full_name": "Niels Voss",
        "timestamp": 1738288535
    },
    {
        "content": "<p>Thank you.  I appreciate it.</p>",
        "id": 496903488,
        "sender_full_name": "Kent Van Vels",
        "timestamp": 1738288566
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"519925\">Kent Van Vels</span> has marked this topic as resolved.</p>",
        "id": 496903501,
        "sender_full_name": "Notification Bot",
        "timestamp": 1738288575
    },
    {
        "content": "<p>This one gets elaborated as <code>Eq.rec hBC hAB.symm</code>, and I've seen this become <code>Eq.ndrec</code> too.</p>",
        "id": 496903521,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1738288593
    },
    {
        "content": "<p>Oh, I just found that TPIL says \"The macro <code>h ▸ e</code> uses more effective heuristics for computing this implicit parameter, and often succeeds in situations where applying <code>Eq.subst</code> fails.\", which I didn't realize was the case</p>",
        "id": 496903681,
        "sender_full_name": "Niels Voss",
        "timestamp": 1738288685
    },
    {
        "content": "<p>In lemmas I've mostly seen it referred to as \"rec\" (see <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=eq_rec_constant#doc\">docs#eq_rec_constant</a>, <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=heq_of_eqRec_eq#doc\">docs#heq_of_eqRec_eq</a>, etc.)</p>",
        "id": 496903778,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1738288757
    },
    {
        "content": "<p>Ok, I think I have enough to go on for a while.  <span class=\"user-mention\" data-user-id=\"816344\">@Aaron Liu</span>  and <span class=\"user-mention\" data-user-id=\"521331\">@Niels Voss</span> , I appreciate it.</p>",
        "id": 496903813,
        "sender_full_name": "Kent Van Vels",
        "timestamp": 1738288782
    },
    {
        "content": "<p>The syntax <code>h ▸ e</code> is basically short for</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">first</span>\n<span class=\"w\">    </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">first</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">h</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">&lt;-</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"o\">]</span>\n<span class=\"w\">      </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">e</span>\n<span class=\"w\">    </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">e'</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">e</span>\n<span class=\"w\">      </span><span class=\"n\">first</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">h</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">e'</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">&lt;-</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">e'</span>\n<span class=\"w\">      </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">e'</span>\n</code></pre></div>\n<p>(See the implementation of <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Lean.Elab.Term.elabSubst#doc\">docs#Lean.Elab.Term.elabSubst</a> for the gritty details.)</p>",
        "id": 496905527,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1738289652
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"521331\">Niels Voss</span> <a href=\"#narrow/channel/113489-new-members/topic/.E2.9C.94.20Does.20the.20triangle.20operator.20have.20an.20english.20name.3F/near/496903404\">said</a>:</p>\n<blockquote>\n<p>According to <a href=\"https://leanprover.github.io/theorem_proving_in_lean4/quantifiers_and_equality.html#equality\">TPIL</a>, <code>hAB ▸ hBC</code> is shorthand for <code>Eq.subst hAB hBC</code></p>\n</blockquote>\n<p>Note that TPIL isn't saying that it's shorthand for that exactly. It's claiming that it uses <code>Eq.subst</code> and <code>Eq.symm</code> somehow to change the type. (It's wrong though since it uses <code>Eq.rec</code> directly actually, but I think in Lean 3 it used <code>eq.subst</code>.) The first argument to <code>Eq.subst</code> could be something more complicated than <code>hAB</code>, in case <code>hAB</code> is rewriting some subterm.</p>",
        "id": 496905969,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1738289995
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"306601\">Kyle Miller</span> <a href=\"#narrow/channel/113489-new-members/topic/.E2.9C.94.20Does.20the.20triangle.20operator.20have.20an.20english.20name.3F/near/496905527\">said</a>:</p>\n<blockquote>\n<p>(See the implementation of <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Lean.Elab.Term.elabSubst#doc\">docs#Lean.Elab.Term.elabSubst</a> for the gritty details.)</p>\n</blockquote>\n<p>Wow, there are so many error messages and I've seen all of them.</p>",
        "id": 496906227,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1738290176
    },
    {
        "content": "<p>In lean 3 I was fond of calling it the \"stupid triangle\" because it was very fickle and the <code>rw</code> tactic was far superior. However this is one of the parts of lean that really upped its game in lean 4 (it succeeds more often and is very unfussed about which direction it's rewriting) and I dropped the moniker pretty quickly. I usually just refer to it now as \"term mode rewriting\"</p>",
        "id": 496938551,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1738305973
    }
]