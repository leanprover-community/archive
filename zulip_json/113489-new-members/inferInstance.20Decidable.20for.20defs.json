[
    {
        "content": "<p>The Lean4 <a href=\"https://lean-lang.org/theorem_proving_in_lean4/type_classes.html\">type classes</a> documentation says, \"Sometimes Lean can't find an instance because the class is buried under a definition\".  So, I have:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">p1</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">b</span><span class=\"o\">:</span><span class=\"n\">Bool</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">true</span>\n<span class=\"c1\">-- doesn't work: deriving Decidable</span>\n\n<span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">b</span><span class=\"o\">:</span><span class=\"n\">Bool</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Decidable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p1</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">inferInstanceAs</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Decidable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">true</span><span class=\"o\">))</span>\n</code></pre></div>\n<p>Is this the preferred method for showing decidability of <code>p1</code>?  I'm curious if there is a tactic based approach where I could tell Lean to \"unfold the definition of <code>p1</code>\" rather than explicitly provide the body of <code>p1</code>.</p>\n<p>-mark</p>",
        "id": 500776541,
        "sender_full_name": "Mark Aagaard",
        "timestamp": 1740015401
    },
    {
        "content": "<p>Yes, the spelling you're asking for is <code>by unfold p1; infer_instance</code></p>",
        "id": 500777653,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1740016160
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"310045\">@Eric Wieser</span> - thanks!<br>\n-mark</p>",
        "id": 500778217,
        "sender_full_name": "Mark Aagaard",
        "timestamp": 1740016592
    }
]