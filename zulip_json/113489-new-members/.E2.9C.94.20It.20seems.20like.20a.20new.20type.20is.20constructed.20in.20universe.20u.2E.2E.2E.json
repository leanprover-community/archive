[
    {
        "content": "<p>For this minimal code:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Lean</span>\n\n<span class=\"kn\">inductive</span><span class=\"w\"> </span><span class=\"n\">Types</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">listVal</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">el</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">Types</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">funVal</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">el</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Funn</span><span class=\"w\"> </span><span class=\"o\">)</span>\n\n\n<span class=\"kn\">inductive</span><span class=\"w\"> </span><span class=\"n\">Funn</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">listVal</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">el</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">Types</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">funVal</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">funfun</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">argus</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">Types</span><span class=\"o\">)</span>\n\n<span class=\"kn\">mutual</span>\n\n<span class=\"w\">  </span><span class=\"n\">partial</span><span class=\"w\"> </span><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">reprTypes</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Types</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">prec</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">Format</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">    </span><span class=\"k\">match</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"k\">with</span>\n<span class=\"w\">    </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">Types</span><span class=\"bp\">.</span><span class=\"n\">funVal</span><span class=\"w\"> </span><span class=\"n\">el</span><span class=\"w\">  </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">reprFun</span><span class=\"w\"> </span><span class=\"n\">el</span><span class=\"w\"> </span><span class=\"n\">prec</span>\n<span class=\"w\">    </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">Types</span><span class=\"bp\">.</span><span class=\"n\">listVal</span><span class=\"w\"> </span><span class=\"n\">el</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">reprListTypes</span><span class=\"w\"> </span><span class=\"n\">el</span><span class=\"w\"> </span><span class=\"n\">prec</span>\n\n<span class=\"w\">  </span><span class=\"c1\">-- Helper function to handle the Repr of List Types</span>\n<span class=\"w\">  </span><span class=\"n\">partial</span><span class=\"w\"> </span><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">reprListTypes</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">lst</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">Types</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">prec</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">Format</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">    </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">content</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">Format</span><span class=\"bp\">.</span><span class=\"n\">joinSep</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">lst</span><span class=\"bp\">.</span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">e</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">reprTypes</span><span class=\"w\"> </span><span class=\"n\">e</span><span class=\"w\"> </span><span class=\"n\">prec</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"s2\">\", \"</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">Format</span><span class=\"bp\">.</span><span class=\"n\">bracket</span><span class=\"w\"> </span><span class=\"s2\">\"(\"</span><span class=\"w\"> </span><span class=\"s2\">\")\"</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">content</span><span class=\"bp\">.</span><span class=\"n\">pretty</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span>\n\n<span class=\"w\">  </span><span class=\"n\">partial</span><span class=\"w\"> </span><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">reprFun</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Funn</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">prec</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">Format</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">    </span><span class=\"k\">match</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"k\">with</span>\n<span class=\"w\">    </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">Funn</span><span class=\"bp\">.</span><span class=\"n\">listVal</span><span class=\"w\"> </span><span class=\"n\">lv</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">reprListTypes</span><span class=\"w\"> </span><span class=\"n\">lv</span><span class=\"w\"> </span><span class=\"n\">prec</span>\n<span class=\"w\">    </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">Funn</span><span class=\"bp\">.</span><span class=\"n\">funVal</span><span class=\"w\"> </span><span class=\"n\">fv</span><span class=\"w\"> </span><span class=\"n\">args</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">reprPrec</span><span class=\"w\"> </span><span class=\"n\">fv</span><span class=\"w\"> </span><span class=\"n\">prec</span><span class=\"w\"> </span><span class=\"bp\">++</span><span class=\"w\"> </span><span class=\"n\">reprListTypes</span><span class=\"w\"> </span><span class=\"n\">args</span><span class=\"w\"> </span><span class=\"n\">prec</span>\n\n<span class=\"kn\">end</span>\n</code></pre></div>\n<p>i got:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">application</span><span class=\"w\"> </span><span class=\"n\">type</span><span class=\"w\"> </span><span class=\"n\">mismatch</span>\n<span class=\"w\">  </span><span class=\"n\">reprFun</span><span class=\"w\"> </span><span class=\"n\">el</span>\n<span class=\"n\">argument</span>\n<span class=\"w\">  </span><span class=\"n\">el</span>\n<span class=\"n\">has</span><span class=\"w\"> </span><span class=\"n\">type</span>\n<span class=\"w\">  </span><span class=\"n\">Funn</span><span class=\"bp\">‚úù</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Sort</span><span class=\"w\"> </span><span class=\"bp\">?</span><span class=\"n\">u</span><span class=\"bp\">.</span><span class=\"m\">1338</span>\n<span class=\"n\">but</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">expected</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">type</span>\n<span class=\"w\">  </span><span class=\"n\">Funn</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"bp\">?</span><span class=\"n\">u</span><span class=\"bp\">.</span><span class=\"m\">1325</span>\n</code></pre></div>\n<p>It seems like a new type Funn is created without being called for. Then the type that I defined cannot be found?</p>",
        "id": 459924639,
        "sender_full_name": "Christian Tzurcanu",
        "timestamp": 1723400306
    },
    {
        "content": "<p>You're defining Types referring to a yet undefined Funn in your funVal constructor. I think you're getting bit by autoimplicits. Do you want to have a mutual inductive definition?</p>",
        "id": 459925185,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1723400577
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"308899\">Yakov Pechersky</span> <a href=\"#narrow/stream/113489-new-members/topic/It.20seems.20like.20a.20new.20type.20is.20constructed.20in.20universe.20u.2E.2E.2E/near/459925185\">said</a>:</p>\n<blockquote>\n<p>You're defining Types referring to a yet undefined Funn in your funVal constructor. I think you're getting bit by autoimplicits. Do you want to have a mutual inductive definition?</p>\n</blockquote>\n<p>probably. but I tried that too and I could not get it.</p>",
        "id": 459925265,
        "sender_full_name": "Christian Tzurcanu",
        "timestamp": 1723400619
    },
    {
        "content": "<p>i'm willing to work with whatever Lean can let me. But if it is too little.. i used 2 AIs to get out of this problem for 2 days: I don't see a way out yet... so I'm here to lose somebody else's time too..</p>",
        "id": 459925623,
        "sender_full_name": "Christian Tzurcanu",
        "timestamp": 1723400782
    },
    {
        "content": "<p>pff.. i have reset the server and now it works with \"mutual\"</p>",
        "id": 459925877,
        "sender_full_name": "Christian Tzurcanu",
        "timestamp": 1723400924
    },
    {
        "content": "<p>and this is a major problem: do i have to reset the server every time i try to fix a bug?</p>",
        "id": 459925951,
        "sender_full_name": "Christian Tzurcanu",
        "timestamp": 1723400983
    },
    {
        "content": "<p>it is the second time i posted here because of this problem. and i did not learn my lesson to restart before posting.. :|</p>",
        "id": 459926148,
        "sender_full_name": "Christian Tzurcanu",
        "timestamp": 1723401030
    },
    {
        "content": "<p>thank you <span class=\"user-mention\" data-user-id=\"308899\">@Yakov Pechersky</span></p>",
        "id": 459926183,
        "sender_full_name": "Christian Tzurcanu",
        "timestamp": 1723401051
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"735031\">Christian Tzurcanu</span> has marked this topic as resolved.</p>",
        "id": 460076708,
        "sender_full_name": "Notification Bot",
        "timestamp": 1723467127
    }
]