[
    {
        "content": "<p>I'm working on a PR (by request) that moves a few files into an existing folder in mathlib. I've moved all the files to where they belong on my local branch and run <code>lake exe mk_all</code>. The file list in <code>Mathlib.lean</code> looks correct.</p>\n<p>But when I try to run <code>lake build</code> I get an immediate error </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">no</span><span class=\"w\"> </span><span class=\"n\">such</span><span class=\"w\"> </span><span class=\"n\">file</span><span class=\"w\"> </span><span class=\"n\">or</span><span class=\"w\"> </span><span class=\"n\">directory</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">error</span><span class=\"w\"> </span><span class=\"n\">code</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"n\">file</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">././././</span><span class=\"n\">Mathlib</span><span class=\"bp\">/</span><span class=\"n\">AlgebraicTopology</span><span class=\"bp\">/</span><span class=\"n\">SimplicialSet</span><span class=\"bp\">.</span><span class=\"n\">lean</span>\n</code></pre></div>\n<p>This is one of the files that was moved so indeed it is not there anymore.</p>\n<p>I suspect there is some import of this file I missed updating. But the error doesn't tell me which file is generating the error. Can I search somehow for which files import a specific file? Or is there some way to query this error message to see where it came from?</p>",
        "id": 476153412,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1728571849
    },
    {
        "content": "<p>Did you run <code>lake exe mk_all</code>?</p>",
        "id": 476153549,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1728571887
    },
    {
        "content": "<p>I suspect you didn't, in which case <code>Mathlib.lean</code> will still contain a line with <code>import Mathlib.AlgebraicTopology.SimplicialSet</code></p>",
        "id": 476153670,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1728571922
    },
    {
        "content": "<p>In general, you can grep (= Ctrl + F throughout a project) for <code>import Mathlib.AlgebraicTopology.SimplicialSet</code> to see where it is imported</p>",
        "id": 476153799,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1728571956
    },
    {
        "content": "<p>I had run <code>lake exe mk_all</code></p>",
        "id": 476154767,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1728572248
    },
    {
        "content": "<p>I figured out the issue though: I had manually updated the imports of some files but then not rebuilt all the files (by clicking the button in the infoview in vscode). After I did that <code>lake build</code> works.</p>",
        "id": 476154972,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1728572299
    },
    {
        "content": "<p>I don't know if this is the issue, but <code>lake exe mk_all</code> modifies only the \"import-all\" files (typically, <code>Mathlib.lean</code> and <code>Mathlib/Tactic.lean</code>).  If you moved files around, then it should generate the correct \"import all\" files, but it will not modify the individual <code>import XX</code> statements within any other file.</p>",
        "id": 476210774,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1728589223
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"246635\">Emily Riehl</span> <a href=\"#narrow/stream/113489-new-members/topic/moving.20files.20in.20mathlib/near/476154972\">said</a>:</p>\n<blockquote>\n<p>I figured out the issue though: I had manually updated the imports of some files but then not rebuilt all the files (by clicking the button in the infoview in vscode). After I did that <code>lake build</code> works.</p>\n</blockquote>\n<p>That... shouldn't happen. What you rebuild from the infoview has no incidence on what <code>lake build</code> does (someone tell me if I'm wrong)</p>",
        "id": 476211186,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1728589356
    }
]