[
    {
        "content": "<p>Hi! In the following code:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">structure</span><span class=\"w\"> </span><span class=\"n\">Foo</span>\n\n<span class=\"kn\">class</span><span class=\"w\"> </span><span class=\"n\">Bar</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">    </span><span class=\"n\">bar</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">String</span>\n\n<span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Bar</span><span class=\"w\"> </span><span class=\"n\">Foo</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">   </span><span class=\"n\">bar</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"s2\">\"bar\"</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">callBar</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Foo</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Bar</span><span class=\"bp\">.</span><span class=\"n\">bar</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\">  </span><span class=\"c1\">--Compiles</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">callBar'</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Foo</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"bp\">.</span><span class=\"n\">bar</span><span class=\"w\"> </span><span class=\"c1\">-- does not compile</span>\n</code></pre></div>\n<p>Why the dot notation doesn't work in this context? Am I missing something or exists a workaround? thanks</p>",
        "id": 453804118,
        "sender_full_name": "Luis Enrique Muñoz Martín",
        "timestamp": 1721858243
    },
    {
        "content": "<p>Were you meaning to create two separate threads in Zulip, or are these meant to be the same question essentially?</p>",
        "id": 453806841,
        "sender_full_name": "Julian Berman",
        "timestamp": 1721859330
    },
    {
        "content": "<p>The other one being <a class=\"stream-topic\" data-stream-id=\"113489\" href=\"/#narrow/stream/113489-new-members/topic/Why.20Lean.20don.27t.20allow.20to.20call.20this.20instance.20method.3F\">#new members &gt; Why Lean don't allow to call this instance method?</a></p>",
        "id": 453806859,
        "sender_full_name": "Julian Berman",
        "timestamp": 1721859346
    },
    {
        "content": "<p>Also just to be sure -- what's your background, or more specifically, is it in some non-functional-programming programming language?</p>",
        "id": 453806951,
        "sender_full_name": "Julian Berman",
        "timestamp": 1721859372
    },
    {
        "content": "<p>In particular, \"class\" and \"instance\" in Lean mean term#class and term#instance -- which is quite different from what that means in OOP languages.</p>",
        "id": 453807008,
        "sender_full_name": "Julian Berman",
        "timestamp": 1721859405
    },
    {
        "content": "<p>Oh. Did we lose the glossary linkifier. I guess so.</p>",
        "id": 453807039,
        "sender_full_name": "Julian Berman",
        "timestamp": 1721859419
    },
    {
        "content": "<p>The proximal reason it doesn't work is that <code>f.bar</code> needs to know to look for <code>Bar.bar</code> and then know to feed <code>f</code> as the <code>α</code> argument. I think there's an RFC that outlines an idea for how to do this, but I couldn't find it.</p>\n<p>Instead of OOP \"class\", you should think of these as being generic functions — they're global functions that dispatch on the types of the arguments.</p>\n<p>Lots of times, you'll see the <code>export</code> command in conjunction with a <code>class</code> to make one of the functions available outside the class's namespace. For example, the <code>toString</code> function has been exported in this way from the <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=ToString#doc\">docs#ToString</a> class. Here's how it looks for <code>bar</code>:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">class</span><span class=\"w\"> </span><span class=\"n\">Bar</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">    </span><span class=\"n\">bar</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">String</span>\n\n<span class=\"kn\">export</span><span class=\"w\"> </span><span class=\"n\">Bar</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">bar</span><span class=\"o\">)</span>\n\n<span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Bar</span><span class=\"w\"> </span><span class=\"n\">Foo</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">   </span><span class=\"n\">bar</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"s2\">\"bar\"</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">callBar</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Foo</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">bar</span><span class=\"w\"> </span><span class=\"n\">f</span>\n</code></pre></div>",
        "id": 453814498,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1721863725
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"321696\">@Julian Berman</span> , yeah, I wanted to create two different threads because although the example is the same, the question,  was pointing different aspects.</p>\n<p>My background comes from Rust and a bit of Haskell, although I probably made a mess defining the question above <span aria-label=\"pray\" class=\"emoji emoji-1f64f\" role=\"img\" title=\"pray\">:pray:</span>  </p>\n<p>Basically, my mind is trying to figure out how I can do in Lean4 the things I was able to do in Rust. i.e. I'm still dealing with how Rust's Associated Types can be represented in Lean4 correctly, and similar things. That's why most questions I've been doing recently are more related to types than functional programming itself.</p>\n<p>My main target is to evaluate how interesting it would be to use Lean4 for smart contracts because it seems like this language has all features required for it.</p>",
        "id": 453924206,
        "sender_full_name": "Luis Enrique Muñoz Martín",
        "timestamp": 1721907356
    }
]