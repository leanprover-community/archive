[
    {
        "content": "<p>I was working on an ASCII rogue like, but I got frustrated because I wanted to use raw terminal mode so I could read inputs without waiting for a newline. However, I couldn't figure out how to set it up. Any ideas?</p>",
        "id": 538565640,
        "sender_full_name": "Srayan Jana",
        "timestamp": 1757478629
    },
    {
        "content": "<p>Example of what I'm talking about (kinda) <a href=\"https://www.erlang.org/doc/apps/stdlib/terminal_interface.html\">https://www.erlang.org/doc/apps/stdlib/terminal_interface.html</a></p>",
        "id": 538565775,
        "sender_full_name": "Srayan Jana",
        "timestamp": 1757478682
    },
    {
        "content": "<p>This works for me, on Linux:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">main</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IO</span><span class=\"w\"> </span><span class=\"n\">Unit</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">do</span>\n<span class=\"w\">  </span><span class=\"c1\">-- Read input immediately without waiting for newline</span>\n<span class=\"w\">  </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">IO</span><span class=\"bp\">.</span><span class=\"n\">Process</span><span class=\"bp\">.</span><span class=\"n\">run</span><span class=\"w\"> </span><span class=\"o\">{</span>\n<span class=\"w\">    </span><span class=\"n\">cmd</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"s2\">\"stty\"</span>\n<span class=\"w\">    </span><span class=\"n\">args</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"o\">[</span><span class=\"s2\">\"-F\"</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"s2\">\"/dev/tty\"</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"s2\">\"cbreak\"</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"s2\">\"min\"</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"s2\">\"1\"</span><span class=\"o\">],</span>\n<span class=\"w\">  </span><span class=\"o\">}</span>\n<span class=\"w\">  </span><span class=\"c1\">-- Hide user input</span>\n<span class=\"w\">  </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">IO</span><span class=\"bp\">.</span><span class=\"n\">Process</span><span class=\"bp\">.</span><span class=\"n\">run</span><span class=\"w\"> </span><span class=\"o\">{</span>\n<span class=\"w\">    </span><span class=\"n\">cmd</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"s2\">\"stty\"</span>\n<span class=\"w\">    </span><span class=\"n\">args</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"o\">[</span><span class=\"s2\">\"-F\"</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"s2\">\"/dev/tty\"</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"s2\">\"-echo\"</span><span class=\"o\">],</span>\n<span class=\"w\">  </span><span class=\"o\">}</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">stdin</span><span class=\"w\"> </span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">IO</span><span class=\"bp\">.</span><span class=\"n\">getStdin</span>\n<span class=\"w\">  </span><span class=\"n\">while</span><span class=\"w\"> </span><span class=\"n\">true</span><span class=\"w\"> </span><span class=\"k\">do</span>\n<span class=\"w\">    </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">stdin</span><span class=\"bp\">.</span><span class=\"n\">read</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n<span class=\"w\">    </span><span class=\"k\">match</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"bp\">.</span><span class=\"n\">fromUTF8?</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"k\">with</span>\n<span class=\"w\">    </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">some</span><span class=\"w\"> </span><span class=\"n\">str</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">IO</span><span class=\"bp\">.</span><span class=\"n\">println</span><span class=\"w\"> </span><span class=\"n\">s!</span><span class=\"s2\">\"Hello {str}\"</span>\n<span class=\"w\">    </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">none</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">return</span>\n</code></pre></div>",
        "id": 538569957,
        "sender_full_name": "Anthony Wang",
        "timestamp": 1757482008
    },
    {
        "content": "<p>It's also possible to do this using ANSI escape sequences as suggested in <a class=\"stream-topic\" data-stream-id=\"113489\" href=\"/#narrow/channel/113489-new-members/topic/How.20to.20clear.20terminal.20in.20Lean.3F/with/538565450\">#new members &gt; How to clear terminal in Lean?</a> but I think the method above is slightly more readable.</p>",
        "id": 538570026,
        "sender_full_name": "Anthony Wang",
        "timestamp": 1757482062
    },
    {
        "content": "<p>Would be nice to figure out how to do this on Windows, but this is a good start!</p>",
        "id": 538685877,
        "sender_full_name": "Srayan Jana",
        "timestamp": 1757519179
    },
    {
        "content": "<p>You could try running it in WSL 2, which should work without any changes to the code above.</p>",
        "id": 538686933,
        "sender_full_name": "Anthony Wang",
        "timestamp": 1757519416
    }
]