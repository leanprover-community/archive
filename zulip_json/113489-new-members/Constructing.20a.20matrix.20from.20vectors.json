[
    {
        "content": "<p>How can I construct a matrix whose columns or rows are given by some vectors?<br>\nFor example if I have two vectors in the plane <code>u, v : Fin 2 → ℝ</code> how can I construct a 2x2 matrix whose columns or rows are the vectors <code>u, v</code>?</p>",
        "id": 574323244,
        "sender_full_name": "Michael Novak",
        "timestamp": 1771343101
    },
    {
        "content": "<p>You can use <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Data/Matrix/ColumnRowPartitioned.html#Matrix.fromCols\">Matrix.fromCols</a> and friends.</p>",
        "id": 574324470,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1771343404
    },
    {
        "content": "<p>As usual it depends on <em>exactly</em> you have the vectors, so maybe we need a <a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a>.</p>",
        "id": 574324892,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1771343506
    },
    {
        "content": "<p>Well the minimal working example is pretty much:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">u</span><span class=\"w\">  </span><span class=\"n\">v</span><span class=\"w\">  </span><span class=\"o\">:</span><span class=\"w\">  </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>And then when I tried to do <code>Matrix.fromCol u v</code> it didn't really work</p>",
        "id": 574326087,
        "sender_full_name": "Michael Novak",
        "timestamp": 1771343824
    },
    {
        "content": "<p>Do you want a <code>Matrix (Fin 2) (Fin 2) ℝ</code>?</p>",
        "id": 574326386,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1771343909
    },
    {
        "content": "<p>Could you explain the difference between a <code>Matrix (Fin 2) (Fin 2) ℝ</code> and <code>Matrix 2 2 ℝ</code>? I have to admit I don't really fully understand how matrices work in lean.</p>",
        "id": 574326923,
        "sender_full_name": "Michael Novak",
        "timestamp": 1771344055
    },
    {
        "content": "<p>Have you tried to write <code>Matrix 2 2 ℝ</code> in Lean?</p>",
        "id": 574327219,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1771344131
    },
    {
        "content": "<p>No. It's my first time working with matrices.</p>",
        "id": 574327340,
        "sender_full_name": "Michael Novak",
        "timestamp": 1771344167
    },
    {
        "content": "<p>Matrices are indexed by <em>types</em>, so <code>Matrix 2 2 ℝ</code> doesn't make sense. If you want what mathematically we call a \"2x2 matrix\" this is <code>Matrix (Fin 2) (Fin 2) ℝ</code></p>",
        "id": 574327785,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1771344286
    },
    {
        "content": "<p>It's a good idea to have a look through the library, at the beginning it can be a little painful, but one only has to get used to it.</p>",
        "id": 574328629,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1771344486
    },
    {
        "content": "<p>O.k, I thought about it a bit and  I understand now. For some reason it didn't make sense to me that matrices are indexed by types, but actually it totally makes sense, just very different from what I am used to.</p>",
        "id": 574328783,
        "sender_full_name": "Michael Novak",
        "timestamp": 1771344528
    },
    {
        "content": "<p>In your specific case you can do something like</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">foo</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Matrix</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"n\">j</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">j</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"k\">else</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"n\">i</span>\n</code></pre></div>",
        "id": 574328924,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1771344564
    },
    {
        "content": "<p>Using <code>Matrix.fromCol</code> should also be doable, somewhere we must have the equivalence between vectors and matrices over <code>Unit</code>.</p>",
        "id": 574329116,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1771344605
    },
    {
        "content": "<p>O.k, thank you very much!</p>",
        "id": 574329354,
        "sender_full_name": "Michael Novak",
        "timestamp": 1771344664
    }
]