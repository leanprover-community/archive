[
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/22957\">#22957</a> defines <code>Matrix.row</code> and <code>Matrix.col</code> as functions that extract rows/columns from matrices while replacing the previous uses of these terms, following from discussion here : <a class=\"stream-topic\" data-stream-id=\"287929\" href=\"/#narrow/channel/287929-mathlib4/topic/Spelling.20of.20linear.20independence.20of.20rows.2C.20columns.2E/with/505394622\">#mathlib4 &gt; Spelling of linear independence of rows, columns.</a> From the PR description: </p>\n<p>For <code>A : Matrix m n R</code> and <code>i : m</code>, <code>j : n</code>, we define <code>A.row i</code> to refer to the <code>i</code>th row of <code>A</code> as a vector in <code>n -&gt; R</code>, and <code>A.col j</code> to refer to the <code>j</code>th column of <code>A</code> as a vector in <code>m -&gt; R</code>. <code>A.row</code> and <code>A.col</code> are defeq to <code>A</code> and <code>A.transpose</code> respectively, but are helpful to refer to these objects explicitly, avoiding noisy eta-expansions and the simplifier manipulating transposes, such as in expressions like <code>Injective A.col</code>.</p>\n<p>This requires renaming the current <code>Matrix.row</code> and <code>Matrix.col</code>, which build matrices with constant rows and columns; arguably these names weren't ideal. They have been changed to <code>Matrix.rowConst</code> and <code>Matrix.colConst</code>, and their API lemmas are renamed in accordance.</p>\n<p>Because we are using the old name, we can't deprecate these terms directly, but we add deprecations for some lemmas about <code>Matrix.row</code>/<code>.col</code> outside the basic <code>RowCol</code> file. We also add notes in both the new and old definitions alerting the user to the change. In particular, a downstream user puzzled that <code>.row</code> suddenly fails to typecheck after updating will be pointed to <code>.rowConst</code> by looking at the docstring of the changed <code>.row</code>.</p>\n<p>We also change some spellings to use the new notation (eg <code>Set.range (fun i =&gt; A.transpose i)</code> -&gt; <code>Set.range A.col</code>).</p>",
        "id": 505849458,
        "sender_full_name": "Peter Nelson",
        "timestamp": 1742046264
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 505857000,
        "sender_full_name": "Peter Nelson",
        "timestamp": 1742051649
    },
    {
        "content": "<p>The current version gives both <code>Matrix.row</code> and <code>Matrix.col</code> as <code>def</code>s rather than <code>abbrev</code>s. This means that<code>simp</code> can do reasonable things like <code>A.col j i</code> -&gt; <code>A i j</code>, but also means that in places, the definitions force the user to be more careful about the distinction between a function <code>f : m -&gt; n -&gt; R</code> and the matrix <code>Matrix.of f</code>, and some existing proofs which conflate these two things break. In practice, they are fixed by adding an explicit <code>col_def</code>-type rewrite or two : see the changes in <code>Mathlib/LinearAlgebra/Matrix/Determinant/Basic.lean</code>, for example. If <code>.row</code> and <code>.col</code> are <code>abbrev</code>s, then existing proofs like this don't need any changes. </p>\n<p>This is a 'lawful/chaotic' tradeoff - I think I prefer it with the <code>def</code>s, but I figured I should point it out.</p>",
        "id": 505976476,
        "sender_full_name": "Peter Nelson",
        "timestamp": 1742145461
    },
    {
        "content": "<p>I think it might be worth a poll in <a class=\"stream\" data-stream-id=\"287929\" href=\"/#narrow/channel/287929-mathlib4\">#mathlib4</a> to bikeshed the rowConst and colConst names</p>",
        "id": 506020556,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1742174713
    },
    {
        "content": "<p>(I think a lot of people will not see the discussion here, then be surprised at the rename)</p>",
        "id": 506020600,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1742174738
    },
    {
        "content": "<p>Not as surprised as I was when I saw what <code>Matrix.row</code> currently does!</p>",
        "id": 506086938,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1742202735
    },
    {
        "content": "<p>I like the change!</p>",
        "id": 506089571,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1742203367
    },
    {
        "content": "<p>However, the entries starting with <code>-</code> in the declarations diff are declarations that have not been deprecated and maybe they should be.</p>",
        "id": 506089573,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1742203368
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/channel/144837-PR-reviews/topic/.2322957.20row.20and.20column.20functions.20of.20matrices/near/506020556\">said</a>:</p>\n<blockquote>\n<p>I think it might be worth a poll in <a class=\"stream\" data-stream-id=\"287929\" href=\"/#narrow/channel/287929-mathlib4\">#mathlib4</a> to bikeshed the rowConst and colConst names</p>\n</blockquote>\n<p><a href=\"#narrow/channel/287929-mathlib4/topic/.60Matrix.2Erow.60.20and.20.60Matrix.2Ecol.60.20renaming\">#mathlib4 &gt; &#96;Matrix.row&#96; and &#96;Matrix.col&#96; renaming</a></p>",
        "id": 506113131,
        "sender_full_name": "Peter Nelson",
        "timestamp": 1742208726
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/22957\">#22957</a>, which defines <code>Matrix.row</code> and <code>Matrix.col</code>, is now ready for review again.</p>",
        "id": 510726340,
        "sender_full_name": "Peter Nelson",
        "timestamp": 1744046074
    },
    {
        "content": "<p>I've addressed comments, so I think this should be good to go now.</p>",
        "id": 511228727,
        "sender_full_name": "Peter Nelson",
        "timestamp": 1744219519
    }
]