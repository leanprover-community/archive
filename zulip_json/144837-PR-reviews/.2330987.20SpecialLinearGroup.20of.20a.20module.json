[
    {
        "content": "<p>PR <a href=\"https://github.com/leanprover-community/mathlib4/pull/30987\">#30987</a> defines the special linear group of a module, in analogy with <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Matrix.SpecialLinearGroup#doc\">docs#Matrix.SpecialLinearGroup</a>. Meanwhile, I had to generalize a few things here and there.</p>",
        "id": 547491488,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1761657520
    },
    {
        "content": "<p>As observed by <span class=\"user-mention\" data-user-id=\"412682\">@Moritz Doll</span> there are several inconsistencies in the way mathlib has defined some of the classical groups and their “abstract” counterparts. They can be subtypes of one another, groups subtypes of monoids, submonoids, involve linear maps or linear equivalences, etc.</p>",
        "id": 547491919,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1761657643
    },
    {
        "content": "<p>In my PR, I chose to define <code>LinearMap.SpecialLinearGroup</code> as a subtype of <code>LinearEquiv</code>, which leads to a group instance without further hypotheses. (Maybe <code>LinearEquiv.SpecialLinearGroup</code> would be a more faithful name.) But that leads to complications to relate it to <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Matrix.SpecialLinearGroup#doc\">docs#Matrix.SpecialLinearGroup</a> which is a subtype of <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Matrix#doc\">docs#Matrix</a>.</p>",
        "id": 547492382,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1761657774
    },
    {
        "content": "<p><del>There is one issue though: I provided <code>LinearMap.equivOfDetUnit</code> (that defines a linear equivalence if the determinant is a unit) and redefined <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=LinearMap.equivOfDetNeZero#doc\">docs#LinearMap.equivOfDetNeZero</a> to use it. However,  this leads to definitional equality problems here and there, and one of them that I cannot solve (… yet?) is the definition of <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Mathlib.Meta.Positivity.evalIntegral#doc\">docs#Mathlib.Meta.Positivity.evalIntegral</a> (by <span class=\"user-mention\" data-user-id=\"412682\">@Moritz Doll</span> ).</del> (I reverted that change, leaving this question to another PR.)</p>",
        "id": 547493025,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1761657936
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"130609\">Antoine Chambert-Loir</span> <a href=\"#narrow/channel/144837-PR-reviews/topic/.2330987.20SpecialLinearGroup.20of.20a.20module/near/547491919\">said</a>:</p>\n<blockquote>\n<p>As observed by <span class=\"user-mention silent\" data-user-id=\"412682\">Moritz Doll</span> there are several inconsistencies in the way mathlib has defined some of the classical groups and their “abstract” counterparts. They can be subtypes of one another, groups subtypes of monoids, submonoids, involve linear maps or linear equivalences, etc.</p>\n</blockquote>\n<p>I think I would like to have some consensus on which design is the most useful (and if that is different for different subgroups, then we should have that documented). <span class=\"user-mention\" data-user-id=\"310045\">@Eric Wieser</span> I assume you have some thoughts on this.</p>",
        "id": 547613159,
        "sender_full_name": "Moritz Doll",
        "timestamp": 1761700943
    },
    {
        "content": "<p>I had raised the question there: <a class=\"stream-topic\" data-stream-id=\"287929\" href=\"/#narrow/channel/287929-mathlib4/topic/General.20linear.20group.20.28and.20special.20linear.20group.29/with/547688623\">#mathlib4 &gt; General linear group (and special linear group)</a></p>",
        "id": 547699567,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1761739995
    },
    {
        "content": "<p>Thank you. I am sorry that I saw that in your PR, we should have noticed and fixed this a long time ago.</p>",
        "id": 547704656,
        "sender_full_name": "Moritz Doll",
        "timestamp": 1761741420
    },
    {
        "content": "<p>I haven't read all of the discussions in the PR, but did we come to a conclusion with this? cc <span class=\"user-mention\" data-user-id=\"130384\">@Riccardo Brasca</span></p>",
        "id": 556779805,
        "sender_full_name": "Moritz Doll",
        "timestamp": 1763371429
    },
    {
        "content": "<p>The PR has been merged, but as pointed out there are already inconsistencies in mathlib. Currently the special linear group follows the same convention for matrices and linear maps, that seem reasonable.</p>",
        "id": 556822580,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1763384135
    },
    {
        "content": "<p>Well, after having PRed much more stuff, I am starting thinking that <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=SpecialLonearGroup#doc\">docs#SpecialLonearGroup</a> should be a subgroup of (some version of) <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=GeneralLinearGroup#doc\">docs#GeneralLinearGroup</a>.</p>",
        "id": 568202702,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1768481671
    }
]