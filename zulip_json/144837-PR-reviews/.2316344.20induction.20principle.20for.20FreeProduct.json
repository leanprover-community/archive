[
    {
        "content": "<p>Would like to request a PR review for both <a href=\"https://github.com/leanprover-community/mathlib4/pull/16344\">#16344</a> and its dependency <a href=\"https://github.com/leanprover-community/mathlib4/pull/15686\">#15686</a>.</p>",
        "id": 466423411,
        "sender_full_name": "Robert Maxton",
        "timestamp": 1725070628
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110038\">@Kevin Buzzard</span>  <span class=\"user-mention\" data-user-id=\"387244\">@Yaël Dillies</span> Ack, I think whatever alerts Github sends when your PR gets reviewed got lost in the deluge of Mathlib updates. I need to turn that off, it's mostly luck that I thought to check manually just now.  Will start replying today!</p>",
        "id": 479777612,
        "sender_full_name": "Robert Maxton",
        "timestamp": 1730329817
    },
    {
        "content": "<p>Okay, so, I've been dealing with technical difficulties with my laptop for several weeks now, and now am dealing with technical difficulties with git itself ^.^;</p>",
        "id": 488538694,
        "sender_full_name": "Robert Maxton",
        "timestamp": 1733970233
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"387244\">@Yaël Dillies</span>  suggested that I split my PR into two, one <code>feat</code> for adding <code>rel'</code>, one <code>refactor</code> for the rest of the changes. However, the other changes -- specifically the entire <code>asPowers</code> section -- actually depend on the existence of <code>rel'</code>, so I would need to be careful about the ordering of the resulting PRs, and at any rate the original commits weren't split up that finely, so I'd have to try and do some surgery to split up the changes.</p>",
        "id": 488539101,
        "sender_full_name": "Robert Maxton",
        "timestamp": 1733970534
    },
    {
        "content": "<p>On top of which, I've taken so long to respond that there's another PR that now prevents fast-forward merging: <a href=\"https://github.com/leanprover-community/mathlib4/pull/19795/\">https://github.com/leanprover-community/mathlib4/pull/19795/</a></p>",
        "id": 488539152,
        "sender_full_name": "Robert Maxton",
        "timestamp": 1733970587
    },
    {
        "content": "<p>I'm honestly not very familiar with git; what's the best way to proceed from here? I already tried cherry-picking that PR commit, but it references some other linter that had been added in the meantime, so that didn't really work. I'm thinking about either trying to rebase my local branch on to <code>master</code>, then continue from there; or else just delete the remote branch entirely and redo the PR from the beginning with a fresh copy of mathlib.</p>",
        "id": 488539329,
        "sender_full_name": "Robert Maxton",
        "timestamp": 1733970692
    },
    {
        "content": "<p>rebasing is usually not worth the trouble in mathlib</p>",
        "id": 488541491,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1733972218
    },
    {
        "content": "<blockquote>\n<p>that now prevents fast-forward merging:</p>\n</blockquote>\n<p>I don't think there is any reason to worry about fast-forward vs not. Presumably what you mean is \"has merge conflicts\"?</p>\n<p>Working out how to use the vscode merge view can be helpful here, though I don't find it particularly intuitive.</p>",
        "id": 488541721,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1733972384
    },
    {
        "content": "<p>If the merge conflicts are vast, sometimes a good option is to merge incrementally; so for instance, if you know that <a href=\"https://github.com/leanprover-community/mathlib4/pull/19795\">#19795</a> caused most of your conflicts, merge the commit that landed just before it first. You can find that commit by taking the one that bors pushed from the PR page, then writing a <code>^</code> after it in the <code>git merge</code> command</p>",
        "id": 488541785,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1733972407
    },
    {
        "content": "<p>has merge conflicts and can't just be automatically resolved, yes.</p>",
        "id": 488541879,
        "sender_full_name": "Robert Maxton",
        "timestamp": 1733972472
    },
    {
        "content": "<p>Mm, alright, let's see...</p>",
        "id": 488541889,
        "sender_full_name": "Robert Maxton",
        "timestamp": 1733972479
    },
    {
        "content": "<p>Sometimes vscode can automatically resolve things that git can't</p>",
        "id": 488542054,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1733972591
    },
    {
        "content": "<p>And sometimes the \"accept combination\" button on the hunks in the vscode merge view just works (though not always)</p>",
        "id": 488542065,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1733972603
    },
    {
        "content": "<p>yeah, that was what I tried for directly resolving <a href=\"https://github.com/leanprover-community/mathlib4/pull/19795\">#19795</a></p>",
        "id": 488542081,
        "sender_full_name": "Robert Maxton",
        "timestamp": 1733972620
    },
    {
        "content": "<p>and it sort of worked, but as noted somewhere in that commit it references a new file that I don't have</p>",
        "id": 488542149,
        "sender_full_name": "Robert Maxton",
        "timestamp": 1733972649
    },
    {
        "content": "<p>so I guess I could try and merge the previous commit first instead of just cherry-picking <a href=\"https://github.com/leanprover-community/mathlib4/pull/19795\">#19795</a></p>",
        "id": 488542173,
        "sender_full_name": "Robert Maxton",
        "timestamp": 1733972667
    },
    {
        "content": "<p>That said, how does that differ from a rebase?</p>",
        "id": 488542176,
        "sender_full_name": "Robert Maxton",
        "timestamp": 1733972680
    },
    {
        "content": "<p>...  I guess because it's applying the commit chain 'after' my PR, rather than 'before'?</p>",
        "id": 488542310,
        "sender_full_name": "Robert Maxton",
        "timestamp": 1733972769
    },
    {
        "content": "<p>Surprised that that's simpler, though</p>",
        "id": 488542320,
        "sender_full_name": "Robert Maxton",
        "timestamp": 1733972774
    },
    {
        "content": "<p>Rebases mean you have to solve conflicts for each rebased commit in turn, which if you have a messy history that changes the same thing lots of times (maybe in response to reviewer feedback) is not what you want to do at all.</p>",
        "id": 488547279,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1733976341
    },
    {
        "content": "<p>You certainly should not ever be cherry-picking merged PRs into open PRs</p>",
        "id": 488547376,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1733976399
    },
    {
        "content": "<p>That just creates two copies of the same commit that git will usually decide are conflicting</p>",
        "id": 488547423,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1733976438
    }
]