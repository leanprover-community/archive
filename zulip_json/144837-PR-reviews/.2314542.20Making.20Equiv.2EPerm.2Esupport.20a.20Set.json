[
    {
        "content": "<p>This PR redefines <code>Equiv.Perm.support</code> to be a Set and makes a number of other resulting changes.</p>\n<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/14542\">#14542</a></p>\n<p>I'm not sure about this one. I've managed to get it passing CI but it was pretty messy, because to be frank this whole area seems like it's got some pretty messy and occasionally fragile legacy proofs in. But there's simply no need to define <code>Equiv.Perm.support</code> as a <code>Finset</code> in the way that we do and it does mean a bunch of other stuf unnecessaily needs Decidability and finiteness hypotheses down the line when they strictly aren't needed. I've similarly changed the definition of <code>IsSwap</code> because, again, it was a source of unncessary hypotheses.</p>\n<p>There's probably still work to do here even if this does pass, because as excisions go this one was messy and frankly I think the whole area could do with a gentle refactor with aggressive tendencies at some point. Nevertheless I think this probably is an improvement on balance.</p>",
        "id": 450488647,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1720625617
    },
    {
        "content": "<p>Without looking at the PR (because I'm on my phone and god knows how you're supposed to read a github diff on your phone), are you dropping <code>Equiv.Perm.support</code> as a finset entirely? Certainly, we want the support as a finset sometimes, so it would be better to first rename <code>Equiv.Perm.support</code> to <code>Equiv.Perm.supportFinset</code>, then define <code>Equiv.Perm.support</code> as a set and switch to using it instead of <code>supportFinset</code> in parts of the API</p>",
        "id": 450539568,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1720638651
    },
    {
        "content": "<p>(landscape view)</p>",
        "id": 450562744,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1720644868
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"387244\">Yaël Dillies</span> <a href=\"#narrow/stream/144837-PR-reviews/topic/.2314542.20Making.20Equiv.2EPerm.2Esupport.20a.20Set/near/450539568\">said</a>:</p>\n<blockquote>\n<p>Without looking at the PR (because I'm on my phone and god knows how you're supposed to read a github diff on your phone), are you dropping <code>Equiv.Perm.support</code> as a finset entirely? Certainly, we want the support as a finset sometimes, so it would be better to first rename <code>Equiv.Perm.support</code> to <code>Equiv.Perm.supportFinset</code>, then define <code>Equiv.Perm.support</code> as a set and switch to using it instead of <code>supportFinset</code> in parts of the API</p>\n</blockquote>\n<p>I currently have a lemma which basically converts it into a finset (the one it is currently defined as) under the right conditions.</p>",
        "id": 450578089,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1720650151
    },
    {
        "content": "<p>I also defined \"supportCard\", which is defined whenever there is a Finite instance for the set, and this of course is equal to the card of its conversion to a finset under the necessary conditions.</p>",
        "id": 450578338,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1720650222
    },
    {
        "content": "<p>Your approach also sounds sensible - but basically what I found is that we pretty much only need to think of it as a finset when we need to specifically talk about its cardinality, so that seemed the better thing to define.</p>",
        "id": 450578623,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1720650285
    }
]