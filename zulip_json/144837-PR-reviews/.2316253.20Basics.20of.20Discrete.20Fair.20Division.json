[
    {
        "content": "<p>This PR introduces the concepts of discrete fair division into Mathlib. It is currently still a WIP. While I am proficient in these definitions myself, I offer the <a href=\"https://arxiv.org/abs/2208.08782\">linked survey</a> as reference. I am formalising a subset of the contents of the survey in this PR. For now I am focussing on properties of valuation functions and envy-based fairness notions. I will end this PR with the round robin algorithm and proof of existence of EF1 allocations.</p>",
        "id": 466097389,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1724959827
    },
    {
        "content": "<p>This PR is still a WIP</p>",
        "id": 466097412,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1724959833
    },
    {
        "content": "<p>CC : <span class=\"user-mention\" data-user-id=\"310045\">@Eric Wieser</span></p>",
        "id": 466097429,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1724959839
    },
    {
        "content": "<p>If the PR is WIP, please tag it so!</p>",
        "id": 466097934,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1724960041
    },
    {
        "content": "<p>Yeah I thought I already did that. But apparently I didn't</p>",
        "id": 466098024,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1724960070
    },
    {
        "content": "<p>Added it now</p>",
        "id": 466098054,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1724960089
    },
    {
        "content": "<p>I have a number of questions about moving allocations to this OrdHom stuff. Currently I can easily manipulate allocations using the set operations that every researcher working in this area is familiar with and takes for granted</p>",
        "id": 466098183,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1724960155
    },
    {
        "content": "<p>I don't know if I can continue doing the same once I change these definitions. Therefore I think I should first work on these theorems before figuring out how to work with the OrdHom and BotHom classes</p>",
        "id": 466098834,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1724960390
    },
    {
        "content": "<p>I don't think using the homs prevents you using set notation</p>",
        "id": 466099536,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1724960587
    },
    {
        "content": "<p>Either way, my high level comment is \"don't have a type for all the valuations bundled together, have a type for the valuations of a single agent and pass around a family of such valuations\"</p>",
        "id": 466099650,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1724960624
    },
    {
        "content": "<p>Currently a valuation is a function that takes an agent and a finset of goods. In your suggestion, (I looked up <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=OrderHom#doc\">docs#OrderHom</a> ) I would be assigning a valuation of an agent for a single good.</p>",
        "id": 466103732,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1724961832
    },
    {
        "content": "<p>This doesn't work well with the theory</p>",
        "id": 466103749,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1724961837
    },
    {
        "content": "<p>Valuations don't have to be additive</p>",
        "id": 466103815,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1724961848
    },
    {
        "content": "<p>Maybe<code>OrderHom (Finset Goods) NNReal</code></p>",
        "id": 466103994,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1724961904
    },
    {
        "content": "<p>Yes sorry, that's what I meant</p>",
        "id": 466107737,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1724963407
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/stream/144837-PR-reviews/topic/.2316253.20Basics.20of.20Discrete.20Fair.20Division/near/466099650\">said</a>:</p>\n<blockquote>\n<p>Either way, my high level comment is \"don't have a type for all the valuations bundled together, have a type for the valuations of a single agent and pass around a family of such valuations\"</p>\n</blockquote>\n<p>What I meant by this is</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">structure</span><span class=\"w\"> </span><span class=\"n\">Val</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Goods</span><span class=\"w\">  </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">val</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"w\"> </span><span class=\"n\">Goods</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℝ</span>\n<span class=\"w\">  </span><span class=\"n\">empty</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">val</span><span class=\"w\"> </span><span class=\"bp\">∅</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span>\n<span class=\"w\">  </span><span class=\"n\">pos</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"w\"> </span><span class=\"n\">Goods</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">val</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">≥</span><span class=\"w\"> </span><span class=\"mi\">0</span>\n<span class=\"w\">  </span><span class=\"n\">mono</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"w\"> </span><span class=\"n\">Goods</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">⊆</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">val</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">val</span><span class=\"w\"> </span><span class=\"n\">t</span>\n</code></pre></div>\n<p>and then use <code>Agents → Val Goods</code> instead of <code>@Val Agents Goods _</code>.</p>\n<p>We can bikeshed about replacing <code>Val</code> with <code>OrderBotHom</code> later</p>",
        "id": 466107987,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1724963493
    },
    {
        "content": "<p>That actually makes sense for technical reasons down the line.</p>",
        "id": 466117344,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1724967805
    }
]