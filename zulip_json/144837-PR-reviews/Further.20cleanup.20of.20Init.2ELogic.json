[
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/16691\">#16691</a> moves <code>ExistsUnique</code> and <code>Xor'</code> out of <code>Init.Logic</code>.</p>\n<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/16692\">#16692</a> deprecates <code>if_congr</code>, <code>dif_ctx_congr</code> and <code>if_ctx_congr</code>, lemmas that were still used in mathlib at the time of the first deprecation.</p>",
        "id": 469266176,
        "sender_full_name": "Jeremy Tan",
        "timestamp": 1726024776
    },
    {
        "content": "<p>I don't understand the motivation of <a href=\"https://github.com/leanprover-community/mathlib4/pull/16692\">#16692</a>. Why do you want to do that?</p>",
        "id": 469268776,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1726025653
    },
    {
        "content": "<p>Johan <img alt=\":merge:\" class=\"emoji\" src=\"https://avatars.zulip.com/3121/emoji/images/37577b95.png\" title=\"merge\">'d <a href=\"https://github.com/leanprover-community/mathlib4/pull/16691\">#16691</a></p>",
        "id": 469268812,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1726025676
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110087\">Kim Morrison</span> <a href=\"#narrow/stream/144837-PR-reviews/topic/Further.20cleanup.20of.20Init.2ELogic/near/469268776\">said</a>:</p>\n<blockquote>\n<p>I don't understand the motivation of <a href=\"https://github.com/leanprover-community/mathlib4/pull/16692\">#16692</a>. Why do you want to do that?</p>\n</blockquote>\n<p>Those three lemmas are only used a few times and can all be replaced out by <em>core</em> tactics</p>",
        "id": 469268948,
        "sender_full_name": "Jeremy Tan",
        "timestamp": 1726025734
    },
    {
        "content": "<p>I conjecture there are &gt; 1000 lemmas with that property</p>",
        "id": 469268997,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1726025759
    },
    {
        "content": "<p>If the diff is negative, then that seems like a fine argument. But proofs are getting longer in your diff.</p>",
        "id": 469269108,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1726025806
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Init/Logic.html#if_congr\"><code>if_congr</code></a> seems highly reasonable to me, I can imagine using it in place of having to call <code>split_ifs</code></p>",
        "id": 469269978,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1726026110
    },
    {
        "content": "<p>I could agree with getting rid of <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Init/Logic.html#if_ctx_congr\"><code>if_ctx_congr</code></a> on account of how specific it is, iff there's a clear improvement in removing it from existing proofs</p>",
        "id": 469270165,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1726026206
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"112680\">Johan Commelin</span> <a href=\"#narrow/stream/144837-PR-reviews/topic/Further.20cleanup.20of.20Init.2ELogic/near/469269108\">said</a>:</p>\n<blockquote>\n<p>If the diff is negative, then that seems like a fine argument. But proofs are getting longer in your diff.</p>\n</blockquote>\n<p>I pushed a better idea. Deprecate only <code>dif_ctx_congr</code> and move the other two lemmas to <code>Logic.Basic</code> too</p>",
        "id": 469274492,
        "sender_full_name": "Jeremy Tan",
        "timestamp": 1726027704
    },
    {
        "content": "<p>Thanks, <img alt=\":merge:\" class=\"emoji\" src=\"https://avatars.zulip.com/3121/emoji/images/37577b95.png\" title=\"merge\">'d.</p>",
        "id": 469281585,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1726030414
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110087\">@Kim Morrison</span> it was rejected by the awaiting-CI label, can you merge again?</p>",
        "id": 469283676,
        "sender_full_name": "Jeremy Tan",
        "timestamp": 1726031317
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/16698\">#16698</a> deprecates everything in <code>Init.Algebra.Classes</code> except one class – <code>IsSymmOp</code>, which generalises <code>IsSymm</code> and <code>Std.Commutative</code> </p>\n<p>In <code>Init.Logic</code> though there are \"very unbundled\" versions of order typeclasses that seem like duplicates – <code>Symmetric</code> for <code>IsSymm</code>, <code>Reflexive</code> for <code>IsRefl</code>, etc. What do I do with them?</p>",
        "id": 469480467,
        "sender_full_name": "Jeremy Tan",
        "timestamp": 1726079182
    },
    {
        "content": "<p>And where could I move <code>IsSymmOp</code> to? (It still has some uses as a typeclass in mathlib.)</p>",
        "id": 469481040,
        "sender_full_name": "Jeremy Tan",
        "timestamp": 1726079437
    },
    {
        "content": "<p>Let's just move <code>IsSymmOp</code> to <code>Mathlib.Logic.IsSymmOp</code> (a new file).</p>",
        "id": 469540007,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1726109607
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"598052\">@Jeremy Tan</span>  If <code>Symmetric</code> is really a duplicate of <code>IsSymm</code>, then let's deprecate it.</p>",
        "id": 469558817,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1726119073
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/16721\">#16721</a> deprecates 14 <code>Init.Logic</code> lemmas that are essentially duplicates</p>",
        "id": 469585992,
        "sender_full_name": "Jeremy Tan",
        "timestamp": 1726127260
    },
    {
        "content": "<p>My next planned PR will put <code>IsSymmOp</code>, <code>IsLeftCommutative</code> and <code>IsRightCommutative</code> in one new file, thereby completely deprecating <code>Init.Algebra.Classes</code></p>",
        "id": 469599804,
        "sender_full_name": "Jeremy Tan",
        "timestamp": 1726130209
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"598052\">Jeremy Tan</span> <a href=\"#narrow/stream/144837-PR-reviews/topic/Further.20cleanup.20of.20Init.2ELogic/near/469585992\">said</a>:</p>\n<blockquote>\n<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/16721\">#16721</a> deprecates 14 <code>Init.Logic</code> lemmas that are essentially duplicates</p>\n</blockquote>\n<p>Nice!<br>\nI assume you generated most of the diff using search-replace? Or maybe <code>sed</code>?<br>\nCan you please indicate the 14 replacements in the PR commit message?</p>",
        "id": 469609484,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1726132250
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"112680\">Johan Commelin</span> <a href=\"#narrow/stream/144837-PR-reviews/topic/Further.20cleanup.20of.20Init.2ELogic/near/469609484\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"598052\">Jeremy Tan</span> <a href=\"#narrow/stream/144837-PR-reviews/topic/Further.20cleanup.20of.20Init.2ELogic/near/469585992\">said</a>:</p>\n<blockquote>\n<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/16721\">#16721</a> deprecates 14 <code>Init.Logic</code> lemmas that are essentially duplicates</p>\n</blockquote>\n<p>Nice!<br>\nI assume you generated most of the diff using search-replace? Or maybe <code>sed</code>?<br>\nCan you please indicate the 14 replacements in the PR commit message?</p>\n</blockquote>\n<p>Search-replace, yes. I have indicated the 14 in the PR desc</p>",
        "id": 469613613,
        "sender_full_name": "Jeremy Tan",
        "timestamp": 1726133143
    },
    {
        "content": "<p>Hmm, do the old lemmas still exist? It's hard to find them in the diff.</p>",
        "id": 469616962,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1726133957
    },
    {
        "content": "<p>Aaah, I found them!</p>",
        "id": 469617196,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1726134012
    },
    {
        "content": "<p>In the future, please add the <code>@[deprecated]</code> in a separate commit. That makes reviewing a bit easier.</p>",
        "id": 469617893,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1726134169
    },
    {
        "content": "<p><img alt=\":merge:\" class=\"emoji\" src=\"https://avatars.zulip.com/3121/emoji/images/37577b95.png\" title=\"merge\"></p>",
        "id": 469617933,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1726134177
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/16749\">#16749</a> deprecates un-namespaced <code>Commutative, Associative</code> in <code>Init.Logic</code> in favour of the <code>Std</code>-namespaced counterparts</p>",
        "id": 469830937,
        "sender_full_name": "Jeremy Tan",
        "timestamp": 1726197455
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/16751\">#16751</a> upgrades <code>(Left|Right)Commutative</code> into typeclasses, in preparation for the move of them and <code>IsSymmOp</code> (collectively called the <em>heteroclasses</em>) in <a href=\"https://github.com/leanprover-community/mathlib4/pull/16748\">#16748</a></p>",
        "id": 469883765,
        "sender_full_name": "Jeremy Tan",
        "timestamp": 1726213706
    },
    {
        "content": "<p>What would be a better name than <code>Logic.Heteroclasses</code> for the new file containing <code>IsSymmOp</code>, <code>LeftCommutative</code> and <code>RightCommutative</code>?</p>",
        "id": 469896401,
        "sender_full_name": "Jeremy Tan",
        "timestamp": 1726216548
    },
    {
        "content": "<p>(in <a href=\"https://github.com/leanprover-community/mathlib4/tree/tidy-logic\">branch#tidy-logic</a> I am going to do a bunch of smaller deprecations of unused or almost-unused declarations, move out the definition <code>EmptyRelation</code>, and conform <code>IsSymmOp</code> to the new typeclasses of <a href=\"https://github.com/leanprover-community/mathlib4/pull/16751\">#16751</a>, i.e. make its <code>α</code> and<code>β</code> implicit rather than the current explicit)</p>",
        "id": 469896908,
        "sender_full_name": "Jeremy Tan",
        "timestamp": 1726216641
    },
    {
        "content": "<p>What about <code>Logic.OpClass</code>/<code>Logic.RelClass</code>?</p>",
        "id": 469905824,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1726218797
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"598052\">Jeremy Tan</span> <a href=\"#narrow/stream/144837-PR-reviews/topic/Further.20cleanup.20of.20Init.2ELogic/near/469896908\">said</a>:</p>\n<blockquote>\n<p>(in <a href=\"https://github.com/leanprover-community/mathlib4/tree/tidy-logic\">branch#tidy-logic</a> I am going to do a bunch of smaller deprecations of unused or almost-unused declarations, move out the definition <code>EmptyRelation</code>, and conform <code>IsSymmOp</code> to the new typeclasses of <a href=\"https://github.com/leanprover-community/mathlib4/pull/16751\">#16751</a>, i.e. make its <code>α</code> and<code>β</code> implicit rather than the current explicit)</p>\n</blockquote>\n<p>This is now <a href=\"https://github.com/leanprover-community/mathlib4/pull/16757\">#16757</a></p>",
        "id": 469907791,
        "sender_full_name": "Jeremy Tan",
        "timestamp": 1726219149
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"387244\">Yaël Dillies</span> <a href=\"#narrow/stream/144837-PR-reviews/topic/Further.20cleanup.20of.20Init.2ELogic/near/469905824\">said</a>:</p>\n<blockquote>\n<p>What about <code>Logic.OpClass</code>/<code>Logic.RelClass</code>?</p>\n</blockquote>\n<p>I will go with <code>Logic.OpClass</code></p>",
        "id": 469943292,
        "sender_full_name": "Jeremy Tan",
        "timestamp": 1726227773
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover/lean4/pull/5329\">lean4#5329</a> upstreams the <code>@[refl]</code> attribute on <code>Iff.refl</code></p>",
        "id": 469943374,
        "sender_full_name": "Jeremy Tan",
        "timestamp": 1726227802
    },
    {
        "content": "<p>…and the core PR is merged. Still got the two mathlib ones</p>",
        "id": 469970594,
        "sender_full_name": "Jeremy Tan",
        "timestamp": 1726234992
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"598052\">Jeremy Tan</span> <a href=\"#narrow/stream/144837-PR-reviews/topic/Further.20cleanup.20of.20Init.2ELogic/near/469943374\">said</a>:</p>\n<blockquote>\n<p><a href=\"https://github.com/leanprover/lean4/pull/5329\">lean4#5329</a> upstreams the <code>@[refl]</code> attribute on <code>Iff.refl</code></p>\n</blockquote>\n<p>Whoa, that's something I never knew I was missing</p>",
        "id": 470123982,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1726302160
    },
    {
        "content": "<p>(There was an alternate mechanism, which this attribute replaces.)</p>",
        "id": 470135417,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1726306165
    },
    {
        "content": "<p>I can see the end right now. <a href=\"https://github.com/leanprover-community/mathlib4/pull/16748\">#16748</a> does the move to <code>Logic.OpClass</code> as described above, and in <strong>one final <code>Mathlib.Init</code> cleanup PR</strong> I will move the six undeprecated relation definitions and the <code>trans</code> attributes to <code>Order.Defs</code> and <code>Logic.Basic</code> respectively</p>",
        "id": 470153668,
        "sender_full_name": "Jeremy Tan",
        "timestamp": 1726312928
    },
    {
        "content": "<p>And then there will be none – <code>Mathlib.Init</code> will be entirely deprecated</p>",
        "id": 470153891,
        "sender_full_name": "Jeremy Tan",
        "timestamp": 1726313042
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"598052\">Jeremy Tan</span> <a href=\"#narrow/stream/144837-PR-reviews/topic/Further.20cleanup.20of.20Init.2ELogic/near/470153668\">said</a>:</p>\n<blockquote>\n<p>and in <strong>one final <code>Mathlib.Init</code> cleanup PR</strong> I will move the six undeprecated relation definitions and the <code>trans</code> attributes to <code>Order.Defs</code> and <code>Logic.Basic</code> respectively</p>\n</blockquote>\n<p>This PR is <a href=\"https://github.com/leanprover-community/mathlib4/pull/16796\">#16796</a></p>",
        "id": 470166015,
        "sender_full_name": "Jeremy Tan",
        "timestamp": 1726318195
    },
    {
        "content": "<p>also <a href=\"https://github.com/leanprover-community/mathlib4/pull/16748\">#16748</a> is ready for review</p>",
        "id": 470166809,
        "sender_full_name": "Jeremy Tan",
        "timestamp": 1726318676
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/16796\">#16796</a> – the last one – now passes CI.</p>\n<p>I have taken this opportunity to also remove the <code>[refl]</code> attribute on <code>Iff.refl</code>, since that has been upstreamed. Only one line elsewhere needs to be changed in current mathlib for this attribute removal</p>",
        "id": 470326396,
        "sender_full_name": "Jeremy Tan",
        "timestamp": 1726401188
    }
]