[
    {
        "content": "<p>This <a href=\"https://github.com/leanprover-community/mathlib4/pull/29092\">PR</a> adds the ε-δ definition of absolutely continuous functions on a closed interval in ℝ and proves Fundamental Theorem of Calculus and integration by parts for absolutely continuous functions.</p>\n<p>This is a basic result in measure theory which hasn't been implemented yet. An intermediate result we needed and proved is that <code>f'</code> is integrable on <code>[a, b]</code> for any monotone function <code>f</code>.</p>",
        "id": 536721775,
        "sender_full_name": "Yizheng Zhu",
        "timestamp": 1756446319
    },
    {
        "content": "<p>This is +1,589; if anyone has suggestions for what would be a good split point, I'm sure that would be welcome.</p>",
        "id": 536749137,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1756459073
    },
    {
        "content": "<p>The Lebesgue differentiation theorem seems like a self-contained file (250 lines): this would already be a useful first part.</p>",
        "id": 536751849,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1756460052
    },
    {
        "content": "<p>I've also left two quick comments with ideas how to write this more compactly --- presumably, this will make the file a bit shorter.</p>",
        "id": 536752483,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1756460315
    },
    {
        "content": "<p>Skimming the code, you appear to be making lots of explicit manipulations with epsilons and deltas. Do you know about filters? They can be a way to write the same core argument more elegantly. (Let me try and find a zulip thread with an example.)</p>",
        "id": 536752588,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1756460354
    },
    {
        "content": "<p>Ah, here it was: <a class=\"stream-topic\" data-stream-id=\"287929\" href=\"/#narrow/channel/287929-mathlib4/topic/Shrinking.20epsilon.20in.20analysis.20proofs/with/407982311\">#mathlib4 &gt; Shrinking epsilon in analysis proofs</a></p>",
        "id": 536752710,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1756460405
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"634338\">Michael Rothgang</span> <a href=\"#narrow/stream/144837-PR-reviews/topic/.2329092.20absolutely.20continuous.20functions/near/536751849\">said</a>:</p>\n<blockquote>\n<p>The Lebesgue differentiation theorem seems like a self-contained file (250 lines): this would already be a useful first part.</p>\n</blockquote>\n<p>Thanks for the review. The Lebesgue differentiation theorem can easily be separated. For the remaining, a natural line of break is between the basic properties of AC and more advanced ones like a.e. differentiable.</p>\n<p>I will review the code and make it more compact.</p>",
        "id": 536762502,
        "sender_full_name": "Yizheng Zhu",
        "timestamp": 1756464420
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"634338\">Michael Rothgang</span> <a href=\"#narrow/channel/144837-PR-reviews/topic/.2329092.20absolutely.20continuous.20functions/near/536752588\">said</a>:</p>\n<blockquote>\n<p>Skimming the code, you appear to be making lots of explicit manipulations with epsilons and deltas. Do you know about filters? They can be a way to write the same core argument more elegantly. (Let me try and find a zulip thread with an example.)</p>\n</blockquote>\n<p>If you translate the ε-δ definition of absolutely continuous into filters, you get a filter on <code>∪ n, ℝ²ⁿ</code> induced by the function</p>\n<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>x</mi><mo>↦</mo><munder><mo>∑</mo><mrow><mi>i</mi><mo>&lt;</mo><mi>n</mi></mrow></munder><mi mathvariant=\"normal\">∣</mi><msub><mi>x</mi><mrow><mn>2</mn><mi>i</mi></mrow></msub><mo>−</mo><msub><mi>x</mi><mrow><mn>2</mn><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub><mi mathvariant=\"normal\">∣</mi></mrow><annotation encoding=\"application/x-tex\">x \\mapsto \\sum_{i &lt; n} | x_{2 i} - x_{2 i + 1}|</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.522em;vertical-align:-0.011em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">↦</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.355em;vertical-align:-1.305em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.05em;\"><span style=\"top:-1.8723em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mrel mtight\">&lt;</span><span class=\"mord mathnormal mtight\">n</span></span></span></span><span style=\"top:-3.05em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.305em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">∣</span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span><span class=\"mord mathnormal mtight\">i</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span><span class=\"mord mathnormal mtight\">i</span><span class=\"mbin mtight\">+</span><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2083em;\"><span></span></span></span></span></span></span><span class=\"mord\">∣</span></span></span></span></span></p>\n<p>This does make the proofs of simple properties more elegant, such as closure under addition and multiplication.  On the flip side, the two key lemmas in FTC <em>have to</em> resort to ε-δ:</p>\n<ul>\n<li>If f' = 0 a.e. and f is AC then f is constant</li>\n<li>If f is integrable, then <code>∫ t in a..x, f t</code> is AC</li>\n</ul>\n<p>The Lebesgue differentiation theorem is separate from AC. Its proof can be polished with the filter approach.</p>",
        "id": 536885608,
        "sender_full_name": "Yizheng Zhu",
        "timestamp": 1756526258
    },
    {
        "content": "<p>You can transition between filters and the epsilon-delta definition: the zulip thread linked above explains why.</p>",
        "id": 536894691,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1756535974
    },
    {
        "content": "<p>I nearly forgot that the closed intervals of length at most delta have to be disjoint. So the space of the filter must be monotone sequences of length 2n. It is possible, though not pretty.</p>",
        "id": 536906004,
        "sender_full_name": "Yizheng Zhu",
        "timestamp": 1756550847
    },
    {
        "content": "<p>This has been split into </p>\n<ul>\n<li><a href=\"https://github.com/leanprover-community/mathlib4/pull/29503\">#29503</a> Lebesgue differentiation theorem</li>\n<li><a href=\"https://github.com/leanprover-community/mathlib4/pull/29504\">#29504</a> absolutely continuous functions</li>\n<li><a href=\"https://github.com/leanprover-community/mathlib4/pull/29507\">#29507</a> derivative of an AC function is integrable </li>\n<li><a href=\"https://github.com/leanprover-community/mathlib4/pull/29508\">#29508</a> FTC and integration by parts</li>\n</ul>",
        "id": 538682913,
        "sender_full_name": "Yizheng Zhu",
        "timestamp": 1757518386
    },
    {
        "content": "<p>I reviewed the first PR solely from the perspective of making it shorter.</p>",
        "id": 538728032,
        "sender_full_name": "Vlad Tsyrklevich",
        "timestamp": 1757533706
    }
]