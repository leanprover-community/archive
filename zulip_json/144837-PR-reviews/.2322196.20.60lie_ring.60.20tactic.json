[
    {
        "content": "<p>In this PR, we implement a new tactic that reduces expressions in a <code>LieRing</code> to a normal form and checks whether they are equal, and a command which reduces the expression and displays the normal form. </p>\n<p>The implementation of this tactic imitates the <code>ring</code> tactic, using the <code>Qq</code> package to implement a specific reduction algorithm, following the theory of Hall sets and Lyndon words. A reference for the algorithm can be found at, for example, <a href=\"https://personal.math.ubc.ca/~cass/research/pdf/Free.pdf\">here</a>.</p>\n<p>We also implemented <code>CanonAtomM</code> which does almost the same thing as <code>AtomM</code> with the same APIs (though the number of parameters of the state has some difference). We did this because we noticed that in the docstring part of <code>AtomM</code>, it is recommended to use <code>CanonM</code> instead, but they have different APIs, so we decided to build something on top of that which has the same API and functionality so that future usage could be easier.</p>\n<p>Would anyone want to review these code? Or should I separate <code>CanonAtomM</code> to another PR?</p>",
        "id": 503670712,
        "sender_full_name": "Wang Jingting",
        "timestamp": 1741223654
    },
    {
        "content": "<p>You should definitely separate CanonAtomM into its own PR, especially if your design makes it easy to (temporarily) swap back to AtomM</p>",
        "id": 503670985,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1741223807
    },
    {
        "content": "<p>Sure! <code>CanonAtomM</code> is just like 40~ lines of code, so I'm thinking that it's probably going to be easier to review.</p>",
        "id": 503671177,
        "sender_full_name": "Wang Jingting",
        "timestamp": 1741223925
    },
    {
        "content": "<p>My worry would be <code>lie_ring</code> and <code>ring</code> behaving inconsistently; either we should switch <code>ring</code> to <code>CanonAtomM</code> then merge a <code>lie_ring</code> that uses it, or we should merge a <code>lie_ring</code> that uses <code>AtomM</code>, then switch both at once.</p>",
        "id": 503671228,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1741223976
    },
    {
        "content": "<p><code>CanonAtomM</code> is at <a href=\"https://github.com/leanprover-community/mathlib4/pull/22614\">#22614</a> now. (It's actually 65 lines of code)</p>",
        "id": 503671750,
        "sender_full_name": "Wang Jingting",
        "timestamp": 1741224301
    },
    {
        "content": "<p>Well, I could probably try to do the refactor of <code>ring</code> and see if anything explodes? (and do this approach actually make tactics run faster)</p>",
        "id": 503671901,
        "sender_full_name": "Wang Jingting",
        "timestamp": 1741224376
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/channel/144837-PR-reviews/topic/.2322196.20.60lie_ring.60.20tactic.20and.20.60CanonAtomM.60/near/503671228\">said</a>:</p>\n<blockquote>\n<p>My worry would be <code>lie_ring</code> and <code>ring</code> behaving inconsistently; either we should switch <code>ring</code> to <code>CanonAtomM</code> then merge a <code>lie_ring</code> that uses it, or we should merge a <code>lie_ring</code> that uses <code>AtomM</code>, then switch both at once.</p>\n</blockquote>\n<p>We started using <code>AtomM</code> imitating <code>ring</code>, so there's always an available <code>AtomM</code> version of <code>lie_ring</code>. (by reverting several commits)</p>",
        "id": 503671984,
        "sender_full_name": "Wang Jingting",
        "timestamp": 1741224434
    },
    {
        "content": "<p>My recommendation would be to revert those commits, especially if doing so is easy; it should be straighforward to reapply them later, and that means we can get <code>lie_ring</code> in mathlib before deciding on CanonM</p>",
        "id": 503678128,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1741228136
    },
    {
        "content": "<p>The commits are reverted now.</p>",
        "id": 503682265,
        "sender_full_name": "Wang Jingting",
        "timestamp": 1741230638
    },
    {
        "content": "<p>I cannot review this PR but I am very grateful for all the work on it. I left one minor suggestion on GH.</p>",
        "id": 503749339,
        "sender_full_name": "Oliver Nash",
        "timestamp": 1741254996
    },
    {
        "content": "<p>Can someone with meta code skills have a look? As far as I can understand the tactic seems to work reasonably well.</p>",
        "id": 515198164,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1745983923
    },
    {
        "content": "<p>I know <span class=\"user-mention\" data-user-id=\"585783\">@Arend Mellendijk</span> has been staring at ring internals a lot recently. Does that qualify you to get volunteered? (Jokes aside: meta reviewers are a serious bottleneck; if you can say something helpful, a lot of people be rather happy for that.)</p>",
        "id": 515221387,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1745995928
    }
]