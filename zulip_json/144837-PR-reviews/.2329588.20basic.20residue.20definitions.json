[
    {
        "content": "<p>I've opened a PR adding basic residue theory to mathlib <a href=\"https://github.com/leanprover-community/mathlib4/pull/29588\">#29588</a><br>\nThis introduces basic residue implementation, defining residues at isolated singularities via circle integrals and establishing key lemmas.</p>\n<p>New definitions:</p>\n<p>- <code>HasIsolatedSingularityAt f c</code> - <code>f</code> is holomorphic in a punctured neighborhood of <code>c</code><br>\n  - <code>residue f c hf</code> - the residue of <code>f</code> at <code>c</code>, computed as <code>(2œÄi)‚Åª¬π</code> times a circle integral</p>\n<p>Main theorems:</p>\n<p>- <code>residue_eq_two_pi_I_inv_smul_circleIntegral</code> - radius independence<br>\n  - <code>residue_of_holomorphic</code> - holomorphic functions have zero residue<br>\n  - <code>residue_simple_pole</code> - residue formula for simple poles <code>f(z) = (z-c)‚Åª¬π * g(z)</code><br>\nThe implementation builds on existing circle integral infrastructure in <code>CauchyIntegral.lean</code>, requiring no new dependencies. <br>\nLooking for reviewers - particularly those familiar with complex analysis or the circle integral API. The mathematics is standard but I'd appreciate feedback on the mathlib implementation.</p>",
        "id": 539054446,
        "sender_full_name": "Roman Kvasnytskyi",
        "timestamp": 1757680668
    },
    {
        "content": "<p>Nice! These were useful in <a class=\"stream\" data-stream-id=\"423402\" href=\"/#narrow/channel/423402-PrimeNumberTheorem.2B\">#PrimeNumberTheorem+</a>  and I think it would be cool to eventually see the square integrals there connected to this (EDIT: apparently the rectangle integrals are already in mathlib CauchyIntegral.lean).</p>\n<p>Do people have thoughts on using filters here? e.g. something like</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Topology</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">HasIsolatedSingularityAt</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">‚ÑÇ</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">‚ÑÇ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">‚ÑÇ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"bp\">‚àÄ·∂†</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">ùìù</span><span class=\"o\">[</span><span class=\"bp\">‚â†</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">DifferentiableAt</span><span class=\"w\"> </span><span class=\"n\">‚ÑÇ</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">x</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">HasRemovableSingularityAt</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">‚ÑÇ</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">‚ÑÇ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">‚ÑÇ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">HasIsolatedSingularityAt</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">‚àß</span><span class=\"w\"> </span><span class=\"bp\">‚àÉ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">‚ÑÇ</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">‚ÑÇ</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">DifferentiableAt</span><span class=\"w\"> </span><span class=\"n\">‚ÑÇ</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">‚àß</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"bp\">=·∂†</span><span class=\"o\">[</span><span class=\"n\">ùìù</span><span class=\"o\">[</span><span class=\"bp\">‚â†</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">g</span>\n</code></pre></div>",
        "id": 539185110,
        "sender_full_name": "Lawrence Wu (llllvvuu)",
        "timestamp": 1757724379
    },
    {
        "content": "<p>Mathlib has taught me \"filter seems to be better than everything else\" <span aria-label=\"joy\" class=\"emoji emoji-1f602\" role=\"img\" title=\"joy\">:joy:</span> I don't know which is better in practice</p>",
        "id": 539187924,
        "sender_full_name": "Weiyi Wang",
        "timestamp": 1757726363
    },
    {
        "content": "<p>I will of course advocate for filters</p>",
        "id": 539188128,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1757726504
    },
    {
        "content": "<p>there's a reason we use them</p>",
        "id": 539188225,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1757726577
    },
    {
        "content": "<p>OK, then I also left the comment on the PR</p>",
        "id": 539190240,
        "sender_full_name": "Lawrence Wu (llllvvuu)",
        "timestamp": 1757728058
    },
    {
        "content": "<p>Thanks for those suggestions, it looks way cleaner with filter. I will update PR</p>",
        "id": 539270722,
        "sender_full_name": "Roman Kvasnytskyi",
        "timestamp": 1757769318
    },
    {
        "content": "<p>But I am not sure if it‚Äôs somehow better in practice than original definition, can someone clarify why exactly this is better apart from being shorter and more concise(it‚Äôs ok if that‚Äôs only reason, I like your version much more from aesthetic perspective)</p>",
        "id": 539270807,
        "sender_full_name": "Roman Kvasnytskyi",
        "timestamp": 1757769397
    },
    {
        "content": "<p>You can take advantage of the complete distributive lattice structure on filters</p>",
        "id": 539272220,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1757770740
    },
    {
        "content": "<p>and you can map and comap them</p>",
        "id": 539272246,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1757770767
    },
    {
        "content": "<p>Okay, understood, thanks for clarifying that</p>",
        "id": 539275121,
        "sender_full_name": "Roman Kvasnytskyi",
        "timestamp": 1757773387
    },
    {
        "content": "<p>Proofs often turn out easier / shorter using the tools for filters</p>",
        "id": 539280732,
        "sender_full_name": "Lawrence Wu (llllvvuu)",
        "timestamp": 1757778811
    },
    {
        "content": "<p>same reason we use sets instead of predicates</p>",
        "id": 539284428,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1757782292
    },
    {
        "content": "<p>Thank you for comments, I guess it will take me few days to apply them and make definitions more general and \"mathlib-native\"</p>",
        "id": 539437280,
        "sender_full_name": "Roman Kvasnytskyi",
        "timestamp": 1757881776
    }
]