[
    {
        "content": "<p>Hello, I have finished proving basic things about profinite group and Infinite Galois Theory and now trying to contribute to Mathlib, so probably the next ten or so  PRs of mine would be on this. But I am new contributer, may I get some advise about the PR <a href=\"https://github.com/leanprover-community/mathlib4/pull/16648\">#16648</a>(now still a draft PR)?</p>",
        "id": 468954017,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1725933047
    },
    {
        "content": "<p>So here are some of my questions: <br>\n1 : What is the right place for putting the definitions of the profinite groups? I currently put it in Mathlib.Topology.Algebra.Group and created a new folder called Profinite. <br>\n2 : How to resolve conflict of the file Mathlib.lean? I run lake exe mk_all then met this problem.</p>",
        "id": 468954339,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1725933215
    },
    {
        "content": "<p>Someone else seems to have added a file in exactly the same place in Mathlib.lean . Hopefully I fixed the conflict.</p>",
        "id": 468969227,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1725938847
    },
    {
        "content": "<p>Thank you, so is there any suggestions about the place?</p>",
        "id": 468971069,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1725939399
    },
    {
        "content": "<p>Yeah that looks like a fine place for it. Thanks!</p>",
        "id": 468974133,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1725940246
    },
    {
        "content": "<p>Did you show that in a profinite group the open and normal subgroups form a neighbourhood basis of the identity?</p>",
        "id": 469003934,
        "sender_full_name": "Christian Merten",
        "timestamp": 1725952115
    },
    {
        "content": "<p>Thanks! I left a few comments</p>",
        "id": 469016938,
        "sender_full_name": "Dagur Asgeirsson",
        "timestamp": 1725954664
    },
    {
        "content": "<p>This property (open and normal subgroups form a neighbourhood basis of the identity) needs a little bit long proof and works for all compact T2 topological group so would be two of the ten PRs I mentioned</p>",
        "id": 469073998,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1725970666
    },
    {
        "content": "<p>I have a few more questions about my further PRs : <br>\n1 : What is the suitable palce for adding theorems about compact T2 topological groups? Topology/Algebra/Group/Compact?<br>\n2 : What is the suitable place for Infinite Galois Theory? In the same folder as galois.lean?<br>\nThank you</p>",
        "id": 469104576,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1725977538
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"749361\">Nailin Guan</span> <a href=\"#narrow/stream/144837-PR-reviews/topic/.2316648.20feat.28Topology.2FGroup.2FProfinite.29Define.20Profinite.20Groups/near/469073998\">said</a>:</p>\n<blockquote>\n<p>This property (open and normal subgroups form a neighbourhood basis of the identity) needs a little bit long proof and works for all compact T2 topological group so would be two of the ten PRs I mentioned</p>\n</blockquote>\n<p>sorry there is a mistake in math : Open subgroup forms neighborhood basis in compact T2 topological group, open normal subgroup forming neighborhood basis indeed need profinite.</p>",
        "id": 469144268,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1725985065
    },
    {
        "content": "<p><a href=\"/user_uploads/3121/pMYpovqu2qxcWrWrg3p6vWC0/图片.png\">图片.png</a><br>\nhow to fix this?...</p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/pMYpovqu2qxcWrWrg3p6vWC0/图片.png\" title=\"图片.png\"><img data-original-dimensions=\"2121x390\" src=\"/user_uploads/thumbnail/3121/pMYpovqu2qxcWrWrg3p6vWC0/图片.png/840x560.webp\"></a></div>",
        "id": 469378688,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1726056256
    },
    {
        "content": "<p>Write <code>Index</code> rather than <code>index</code> in the import (and don't ask questions in unrelated threads)</p>",
        "id": 469380089,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1726056515
    },
    {
        "content": "<p>Is there a reason you're doing everything categorically? I would have expected the definition of a profinite group to just be <code>[Group G] [TopologicalSpace G] [TopologicalGroup G] [CompactSpace G] [TotallyDisconnectedSpace G]</code> with everything proved in terms of that.</p>",
        "id": 469422326,
        "sender_full_name": "Thomas Browning",
        "timestamp": 1726065707
    },
    {
        "content": "<p>FWIW, I don't think that the use of the language of category theory should require justification even when it's not strictly necessary.</p>",
        "id": 469448470,
        "sender_full_name": "Dagur Asgeirsson",
        "timestamp": 1726070437
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"253861\">Thomas Browning</span> <a href=\"#narrow/stream/144837-PR-reviews/topic/.2316648.20feat.28Topology.2FGroup.2FProfinite.29Define.20Profinite.20Groups/near/469422326\">said</a>:</p>\n<blockquote>\n<p>Is there a reason you're doing everything categorically? I would have expected the definition of a profinite group to just be <code>[Group G] [TopologicalSpace G] [TopologicalGroup G] [CompactSpace G] [TotallyDisconnectedSpace G]</code> with everything proved in terms of that.</p>\n</blockquote>\n<p>We just study and copy how profinite space is written. I think it is also partly because we need to work on limits of finite groups, the language of category would bring convenience.</p>",
        "id": 469465464,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1726074012
    },
    {
        "content": "<p>I guess I'm more worried with using the language of category theory in downstream PRs. For example, consider the theorem that an open subgroup of a profinite group is of finite index. Here's a categorical phrasing:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">FiniteIndex_of_open_subgroup</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ProfiniteGrp</span><span class=\"o\">}</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">H</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Subgroup</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hH</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IsOpen</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">H</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">FiniteIndex</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n</code></pre></div>\n<p>(from here: <a href=\"https://github.com/mbkybky/InfiniteGaloisTheory/blob/d003069cf79816b685270c1790eae748f6e39ef0/InfiniteGaloisTheory/ProFinite/Basic.lean#L69C1-L72C44\">https://github.com/mbkybky/InfiniteGaloisTheory/blob/d003069cf79816b685270c1790eae748f6e39ef0/InfiniteGaloisTheory/ProFinite/Basic.lean#L69C1-L72C44</a>)</p>\n<p>My concern is that this theorem cannot be applied to <code>H : Subgroup (ℤ_[p])</code> and instead can only be applied to <code>H : Subgroup (of (ℤ_[p]))</code>. So the theorem would be strictly more general if phrased in terms of <code>[Group G] [TopologicalSpace G] [TopologicalGroup G] [CompactSpace G] [TotallyDisconnectedSpace G]</code>.</p>",
        "id": 469483741,
        "sender_full_name": "Thomas Browning",
        "timestamp": 1726080570
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"519559\">Dagur Asgeirsson</span> <a href=\"#narrow/stream/144837-PR-reviews/topic/.2316648.20feat.28Topology.2FGroup.2FProfinite.29Define.20Profinite.20Groups/near/469448470\">said</a>:</p>\n<blockquote>\n<p>FWIW, I don't think that the use of the language of category theory should require justification even when it's not strictly necessary.</p>\n</blockquote>\n<p>I think it does require justification when it goes against the general design of Mathlib. We've got a very established typeclass system, and bundling hypotheses into a new structure instead of creating an extension or simply using both typeclasses simultaneously, goes against it.</p>",
        "id": 469504230,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1726087612
    },
    {
        "content": "<p>This PR is just defining the category of profinite groups. Doing this does not need justification, is what I meant. Regarding <span class=\"user-mention\" data-user-id=\"253861\">@Thomas Browning</span>'s example, I agree that this is something that shouldn't be phrased categorically, but I don't see any example like this in the PR in question</p>",
        "id": 469555875,
        "sender_full_name": "Dagur Asgeirsson",
        "timestamp": 1726117714
    },
    {
        "content": "<p>This PR is just defining the category of profinite groups. Doing this does not need justification, is what I meant. Regarding <span class=\"user-mention\" data-user-id=\"253861\">@Thomas Browning</span>'s example, I agree that this is something that shouldn't be phrased categorically, but I don't see any example like this in the PR in question</p>",
        "id": 469555876,
        "sender_full_name": "Dagur Asgeirsson",
        "timestamp": 1726117716
    },
    {
        "content": "<p>Yes, I agree. I don't have a problem with the category theory in this first PR. Sorry for the confusion.</p>",
        "id": 469560413,
        "sender_full_name": "Thomas Browning",
        "timestamp": 1726119655
    },
    {
        "content": "<p>Oh, if the goal is explicitly to define a category and not a typeclass, then that's fine</p>",
        "id": 469588991,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1726127883
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"253861\">Thomas Browning</span> <a href=\"#narrow/stream/144837-PR-reviews/topic/.2316648.20feat.28Topology.2FGroup.2FProfinite.29Define.20Profinite.20Groups/near/469560413\">said</a>:</p>\n<blockquote>\n<p>Yes, I agree. I don't have a problem with the category theory in this first PR. Sorry for the confusion.</p>\n</blockquote>\n<p>But actually I am trying to merge the whole repo of InfiniteGaloisTheory into Mathlib, so is this reconstruction important? What would need to change if define profinite as what you mentioned?</p>",
        "id": 469677256,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1726147914
    },
    {
        "content": "<p>The <code>to_additive</code> tag does not work here :</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">@[</span><span class=\"n\">to_additive</span><span class=\"kd\">]</span>\n<span class=\"kd\">structure</span><span class=\"w\"> </span><span class=\"n\">ProfiniteGrp</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">where</span>\n<span class=\"w\">  </span><span class=\"n\">toProfinite</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Profinite</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">u</span><span class=\"o\">}</span>\n<span class=\"w\">  </span><span class=\"o\">[</span><span class=\"n\">isGroup</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Group</span><span class=\"w\"> </span><span class=\"n\">toProfinite</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"o\">[</span><span class=\"n\">isTopologicalGroup</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">TopologicalGroup</span><span class=\"w\"> </span><span class=\"n\">toProfinite</span><span class=\"o\">]</span>\n</code></pre></div>\n<p>Is this expected behaviour? The error message is </p>\n<div class=\"codehilite\" data-code-language=\"Text only\"><pre><span></span><code>Expected ProfiniteAddGrp to have a value.\n</code></pre></div>\n<p>Do we need a definition of <code>ProfiniteAddGrp</code> anyway?</p>",
        "id": 469687180,
        "sender_full_name": "Jujian Zhang",
        "timestamp": 1726150224
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"252627\">Jujian Zhang</span> <a href=\"#narrow/stream/144837-PR-reviews/topic/.2316648.20feat.28Topology.2FGroup.2FProfinite.29Define.20Profinite.20Groups/near/469687180\">said</a>:</p>\n<blockquote>\n<p>The <code>to_additive</code> tag does not work here :</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">@[</span><span class=\"n\">to_additive</span><span class=\"kd\">]</span>\n<span class=\"kd\">structure</span><span class=\"w\"> </span><span class=\"n\">ProfiniteGrp</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">where</span>\n<span class=\"w\">  </span><span class=\"n\">toProfinite</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Profinite</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">u</span><span class=\"o\">}</span>\n<span class=\"w\">  </span><span class=\"o\">[</span><span class=\"n\">isGroup</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Group</span><span class=\"w\"> </span><span class=\"n\">toProfinite</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"o\">[</span><span class=\"n\">isTopologicalGroup</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">TopologicalGroup</span><span class=\"w\"> </span><span class=\"n\">toProfinite</span><span class=\"o\">]</span>\n</code></pre></div>\n<p>Is this expected behaviour? The error message is </p>\n<div class=\"codehilite\" data-code-language=\"Text only\"><pre><span></span><code>Expected ProfiniteAddGrp to have a value.\n</code></pre></div>\n<p>Do we need a definition of <code>ProfiniteAddGrp</code> anyway?</p>\n</blockquote>\n<p>ProfiniteAddGrp and FiniteAddGrp is added.</p>",
        "id": 469881677,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1726213215
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kn\">attribute</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"kd\">instance</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">group</span><span class=\"w\"> </span><span class=\"n\">topologicalGroup</span><span class=\"w\"> </span><span class=\"n\">ProfiniteAddGrp.addGroup</span><span class=\"w\"> </span><span class=\"n\">ProfiniteAddGrp.topologicalAddGroup</span>\n</code></pre></div>\n<p>how to attribute instance like this but not laying them out all with the additive ones? I currently declare them explicitly like this</p>",
        "id": 469908720,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1726219369
    },
    {
        "content": "<p>I think this PR is ready to merge now, may I ask for  maintainers to review and merge it?</p>",
        "id": 470135439,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1726306172
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"300245\">@Filippo A. E. Nuccio</span> I gave you a <code>bors d+</code> on this PR, in case you want to have another look.</p>",
        "id": 470669407,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1726504966
    },
    {
        "content": "<p>Having a look right now.</p>",
        "id": 470669544,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1726505001
    }
]