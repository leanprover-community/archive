[
    {
        "content": "<p>(Previous discussion at <a class=\"stream-topic\" data-stream-id=\"217875\" href=\"/#narrow/channel/217875-Is-there-code-for-X.3F/topic/Measure.20on.20affine.20space/with/571320966\">#Is there code for X? &gt; Measure on affine space</a> . I'd like to just move the entire thread here for context but I don't have permission to do so)</p>\n<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/34697\">#34697</a><br>\nThis is my first PR to enable us stating and using areas and volumes in Euclidean geometry problems. It doesn't contain heavy theorems and just set up the initial definition. I'd like to make sure we agree on the definition and the notation.</p>",
        "id": 571819812,
        "sender_full_name": "Weiyi Wang",
        "timestamp": 1770182730
    },
    {
        "content": "<p>After this, I'll create more PRs towards calculating the volume of simplex. A preview of the statement to formalize is at <a href=\"https://github.com/leanprover-community/mathlib4/pull/34826\">#34826</a></p>",
        "id": 571819910,
        "sender_full_name": "Weiyi Wang",
        "timestamp": 1770182793
    },
    {
        "content": "<p>Thanks for the review. Just to record them here, I have another two open<br>\n<a href=\"https://github.com/leanprover-community/mathlib4/pull/34858\">#34858</a> Some lemmas for simplex<br>\n<a href=\"https://github.com/leanprover-community/mathlib4/pull/34859\">#34859</a> Measure preserving between <code>WithLp 2 (U √ó V)</code> and <code>U √ó V</code>. While the statement is correct, I am not sure this is the best proof, so this is also a request for golf</p>",
        "id": 572058452,
        "sender_full_name": "Weiyi Wang",
        "timestamp": 1770266528
    },
    {
        "content": "<p>Help wanted: I'd like to state <code>IsClosed (s.closedInterior)</code> for <code>s : Simplex k P n</code>. What should be the right generality here? <br>\nMy current guess is that it should use the same set of type classes as <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=AffineSubspace.closed_of_finiteDimensional#doc\">docs#AffineSubspace.closed_of_finiteDimensional</a> (plus an order on the field k), but looking at its proof, I noticed it seems to be not needing the metric on the P, so it is already over-specialized?</p>",
        "id": 572279095,
        "sender_full_name": "Weiyi Wang",
        "timestamp": 1770341794
    },
    {
        "content": "<p>The version I currently got type-checked is </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">Affine</span><span class=\"bp\">.</span><span class=\"n\">Simplex</span><span class=\"bp\">.</span><span class=\"n\">isClosed_closedInterior</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">V</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span>\n<span class=\"w\">    </span><span class=\"o\">[</span><span class=\"n\">AddCommGroup</span><span class=\"w\"> </span><span class=\"n\">V</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">TopologicalSpace</span><span class=\"w\"> </span><span class=\"n\">V</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">IsTopologicalAddGroup</span><span class=\"w\"> </span><span class=\"n\">V</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">T2Space</span><span class=\"w\"> </span><span class=\"n\">V</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"o\">[</span><span class=\"n\">Module</span><span class=\"w\"> </span><span class=\"n\">‚Ñù</span><span class=\"w\"> </span><span class=\"n\">V</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">ContinuousSMul</span><span class=\"w\"> </span><span class=\"n\">‚Ñù</span><span class=\"w\"> </span><span class=\"n\">V</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"o\">[</span><span class=\"n\">AddTorsor</span><span class=\"w\"> </span><span class=\"n\">V</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">TopologicalSpace</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">IsTopologicalAddTorsor</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"o\">{</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">‚Ñï</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Simplex</span><span class=\"w\"> </span><span class=\"n\">‚Ñù</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">IsClosed</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"bp\">.</span><span class=\"n\">closedInterior</span>\n</code></pre></div>\n<p>which I guess is weakest possible on V and P. Should I bother generalizing from ‚Ñù? The current proof that uses ‚Ñù is <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Set.Finite.isClosed_convexHull#doc\">docs#Set.Finite.isClosed_convexHull</a></p>",
        "id": 572283803,
        "sender_full_name": "Weiyi Wang",
        "timestamp": 1770345432
    },
    {
        "content": "<p>I think that a better approach is to generalize the definition fo the volume on a Euclidean space so that it works on an <code>AddTorsor</code> over a <code>EuclideanSpace</code>.</p>",
        "id": 572284375,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1770345819
    },
    {
        "content": "<p>E.g., take the <code>map</code> of the map on the underlying space under <code>v =&gt; v +_v p</code>, where <code>p</code> is <code>Classical.choice</code>.</p>",
        "id": 572284423,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1770345870
    },
    {
        "content": "<p>If we want to avoid diamonds, then this instance should replace the current one, otherwise they will conflict.</p>",
        "id": 572284489,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1770345921
    },
    {
        "content": "<p>Is that an advice to the overall topic, where you suggest this instead of using Hausdorff measure? <br>\nThe problem is I'd like to talk about d-dimensional volume in an n-dimensional space, where n is not equal to d, and it can even be a curve, so you can't necessarily embed the object in a Euclidean space with the same dimension</p>",
        "id": 572284677,
        "sender_full_name": "Weiyi Wang",
        "timestamp": 1770346062
    },
    {
        "content": "<p>Now I see the issue, thanks for the explanation. I need to think about it before replying.</p>",
        "id": 572285521,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1770346724
    },
    {
        "content": "<p>Yeah I actually asked myself the same question yesterday and got that conclusion. The current definition does match the volume in Euclidean space when the object is \"flat\" and measured in its own span, so nothing has been lost!</p>",
        "id": 572285820,
        "sender_full_name": "Weiyi Wang",
        "timestamp": 1770346962
    },
    {
        "content": "<p>Can't you embed the set into its span, then do what Yury suggests?</p>",
        "id": 572304837,
        "sender_full_name": "Ya√´l Dillies",
        "timestamp": 1770361055
    },
    {
        "content": "<p>A unit circle has a 1-dimensional length of 2pi, but doesn't fit into any 1-dimentional affine subspace.</p>",
        "id": 572352200,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1770377109
    },
    {
        "content": "<p>Posted another small intermediate PR <a href=\"https://github.com/leanprover-community/mathlib4/pull/35039\">#35039</a>. Also pinging for another review for PRs above</p>",
        "id": 572868989,
        "sender_full_name": "Weiyi Wang",
        "timestamp": 1770665353
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"310045\">@Eric Wieser</span> , got a chance to do another review for <a href=\"https://github.com/leanprover-community/mathlib4/pull/34697\">#34697</a> after I addressed the comments?</p>",
        "id": 573322817,
        "sender_full_name": "Weiyi Wang",
        "timestamp": 1770824985
    },
    {
        "content": "<p>Also pinging for <a href=\"https://github.com/leanprover-community/mathlib4/pull/34858\">#34858</a> that has been in the maintainer-merge queue for a few days. I have some follow up codes to this so I'd like to have this moving <span aria-label=\"pleading face\" class=\"emoji emoji-1f97a\" role=\"img\" title=\"pleading face\">:pleading_face:</span></p>",
        "id": 573615069,
        "sender_full_name": "Weiyi Wang",
        "timestamp": 1770929476
    },
    {
        "content": "<p>Thanks for the review. I have opened another two small ones. Here is the current status</p>\n<ul>\n<li>Measure theory<ul>\n<li><a href=\"https://github.com/leanprover-community/mathlib4/pull/34697\">#34697</a> - definition of the measure (+165)</li>\n<li><a href=\"https://github.com/leanprover-community/mathlib4/pull/34859\">#34859</a> - Measure preservation for product L2 space (+58)</li>\n</ul>\n</li>\n<li>Affine geometry<ul>\n<li><a href=\"https://github.com/leanprover-community/mathlib4/pull/35039\">#35039</a> - lemma about affineCombination and lineMap (+25)</li>\n<li>(new) <a href=\"https://github.com/leanprover-community/mathlib4/pull/35358\">#35358</a> - closedInterior is closed (+38)</li>\n<li>(new) <a href=\"https://github.com/leanprover-community/mathlib4/pull/35365\">#35365</a> - closedInterior = open interior + surface (+50)</li>\n</ul>\n</li>\n</ul>",
        "id": 573991688,
        "sender_full_name": "Weiyi Wang",
        "timestamp": 1771175238
    },
    {
        "content": "<p>btw, the previous question I had still needs help, which is currently opened as <a href=\"https://github.com/leanprover-community/mathlib4/pull/35358\">#35358</a></p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">Affine</span><span class=\"bp\">.</span><span class=\"n\">Simplex</span><span class=\"bp\">.</span><span class=\"n\">isClosed_closedInterior</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">V</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span>\n<span class=\"w\">    </span><span class=\"o\">[</span><span class=\"n\">AddCommGroup</span><span class=\"w\"> </span><span class=\"n\">V</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">TopologicalSpace</span><span class=\"w\"> </span><span class=\"n\">V</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">IsTopologicalAddGroup</span><span class=\"w\"> </span><span class=\"n\">V</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">T2Space</span><span class=\"w\"> </span><span class=\"n\">V</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"o\">[</span><span class=\"n\">Module</span><span class=\"w\"> </span><span class=\"n\">‚Ñù</span><span class=\"w\"> </span><span class=\"n\">V</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">ContinuousSMul</span><span class=\"w\"> </span><span class=\"n\">‚Ñù</span><span class=\"w\"> </span><span class=\"n\">V</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"o\">[</span><span class=\"n\">AddTorsor</span><span class=\"w\"> </span><span class=\"n\">V</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">TopologicalSpace</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">IsTopologicalAddTorsor</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"o\">{</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">‚Ñï</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Simplex</span><span class=\"w\"> </span><span class=\"n\">‚Ñù</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">IsClosed</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"bp\">.</span><span class=\"n\">closedInterior</span>\n</code></pre></div>\n<p>What should be the right generality of for the underlying ring/field? (where ‚Ñù is at). <span class=\"user-mention\" data-user-id=\"266253\">@Joseph Myers</span> suggested <code>OrderClosedTopology</code>, which does work for <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=isClosed_stdSimplex#doc\">docs#isClosed_stdSimplex</a>, but I am having difficulty constructing the homeomophism under the general setting. <del>I also suspect that I need certain completeness hypothesis (example: treating <code>V = ‚Ñù</code> as a ‚Ñö-vector space, the interior of a <code>Simplex ‚Ñö V 1</code>isn't closed)</del></p>",
        "id": 574131153,
        "sender_full_name": "Weiyi Wang",
        "timestamp": 1771254643
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"873350\">Weiyi Wang</span> <a href=\"#narrow/channel/144837-PR-reviews/topic/.2334697.20the.20Euclidean.20volume.20measure/near/574131153\">said</a>:</p>\n<blockquote>\n<p><del>I also suspect that I need certain completeness hypothesis (example: treating <code>V = ‚Ñù</code> as a ‚Ñö-vector space, the interior of a <code>Simplex ‚Ñö V 1</code>isn't closed)</del></p>\n</blockquote>\n<p>I think if you have some completeness then the stdSimplex will be compact and its image by a continuous function will be closed</p>",
        "id": 574140347,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1771257366
    },
    {
        "content": "<p>That sounds a good idea. Admittedly I didn't think about compactness beyond <a href=\"https://github.com/leanprover-community/mathlib4/blob/3bbc5c706c3a2ef00ded08af13c3f36be6e58a65/Mathlib/Analysis/Convex/StdSimplex.lean#L182-L183\">what is written in the existing code</a> (in metric space compact = closed &amp; bounded). Let me see if I can get compactness in a more general setting</p>",
        "id": 574141825,
        "sender_full_name": "Weiyi Wang",
        "timestamp": 1771257854
    },
    {
        "content": "<p>Here is the new version I have got</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">isClosed_closedInterior</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">ùïú</span><span class=\"w\"> </span><span class=\"n\">V</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span>\n<span class=\"w\">    </span><span class=\"o\">[</span><span class=\"n\">Field</span><span class=\"w\"> </span><span class=\"n\">ùïú</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">LinearOrder</span><span class=\"w\"> </span><span class=\"n\">ùïú</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">IsStrictOrderedRing</span><span class=\"w\"> </span><span class=\"n\">ùïú</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">TopologicalSpace</span><span class=\"w\"> </span><span class=\"n\">ùïú</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"o\">[</span><span class=\"n\">OrderClosedTopology</span><span class=\"w\"> </span><span class=\"n\">ùïú</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">CompactIccSpace</span><span class=\"w\"> </span><span class=\"n\">ùïú</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">ContinuousAdd</span><span class=\"w\"> </span><span class=\"n\">ùïú</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"o\">[</span><span class=\"n\">AddCommGroup</span><span class=\"w\"> </span><span class=\"n\">V</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">TopologicalSpace</span><span class=\"w\"> </span><span class=\"n\">V</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">IsTopologicalAddGroup</span><span class=\"w\"> </span><span class=\"n\">V</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"o\">[</span><span class=\"n\">T2Space</span><span class=\"w\"> </span><span class=\"n\">V</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Module</span><span class=\"w\"> </span><span class=\"n\">ùïú</span><span class=\"w\"> </span><span class=\"n\">V</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">ContinuousSMul</span><span class=\"w\"> </span><span class=\"n\">ùïú</span><span class=\"w\"> </span><span class=\"n\">V</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">AddTorsor</span><span class=\"w\"> </span><span class=\"n\">V</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"o\">[</span><span class=\"n\">TopologicalSpace</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">IsTopologicalAddTorsor</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">‚Ñï</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Simplex</span><span class=\"w\"> </span><span class=\"n\">ùïú</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">IsClosed</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"bp\">.</span><span class=\"n\">closedInterior</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"c1\">-- also IsCompact with the same conditions</span>\n</code></pre></div>\n<p>The <code>[CompactIccSpace ùïú]</code> is to get a compact <code>Icc 0 1</code>. Is this good enough?</p>",
        "id": 574172157,
        "sender_full_name": "Weiyi Wang",
        "timestamp": 1771269984
    },
    {
        "content": "<p>Pinging as the measure theory part hasn't been active for two weeks</p>\n<ul>\n<li><a href=\"https://github.com/leanprover-community/mathlib4/pull/34697\">#34697</a> - definition of the measure (+165)</li>\n<li><a href=\"https://github.com/leanprover-community/mathlib4/pull/34859\">#34859</a> - Measure preservation for product L2 space (+58)</li>\n</ul>\n<p><span class=\"user-mention\" data-user-id=\"266253\">@Joseph Myers</span> I remember you said you'd like someone else familiar with measure theory to review <a href=\"https://github.com/leanprover-community/mathlib4/pull/34697\">#34697</a>. Maybe you want to unassign yourself from it so the bot can pick someone else?</p>",
        "id": 575095491,
        "sender_full_name": "Weiyi Wang",
        "timestamp": 1771688508
    },
    {
        "content": "<p>Continue on the affine geometry side with small PRs</p>\n<ul>\n<li>\n<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/35837\">#35837</a> iff lemma about the inverse of a homothety (+8)<br>\nas a reminder the following somewhat short one is still open</p>\n</li>\n<li>\n<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/35365\">#35365</a> - closedInterior = open interior + surface (+50)</p>\n</li>\n</ul>",
        "id": 576165919,
        "sender_full_name": "Weiyi Wang",
        "timestamp": 1772160126
    }
]