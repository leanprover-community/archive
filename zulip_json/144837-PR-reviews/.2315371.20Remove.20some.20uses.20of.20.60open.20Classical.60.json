[
    {
        "content": "<p>I'd be happy to get some comments on <a href=\"https://github.com/leanprover-community/mathlib4/pull/15371\">#15371</a>, to see if people think it's worth it to replace <code>open Classical</code> by <code>classical</code> or <code>open Classical in</code>.</p>",
        "id": 455407073,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1722440063
    },
    {
        "content": "<p>Followup in <a href=\"https://github.com/leanprover-community/mathlib4/pull/15413\">#15413</a></p>",
        "id": 455740463,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1722541214
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/15417\">#15417</a> removes the remaining uses of unadorned <code>open Classical</code></p>",
        "id": 455754019,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1722545059
    },
    {
        "content": "<p>(I have pushed fixes to the build failures in <a href=\"https://github.com/leanprover-community/mathlib4/pull/15413\">#15413</a> to my PR; feel free to cherry-pick.)</p>",
        "id": 455754298,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1722545209
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/15417\">#15417</a> is now independent of part 2, and ready for review</p>",
        "id": 455943478,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1722607882
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/15454\">#15454</a> proposes a linter against this: when <a href=\"https://github.com/leanprover-community/mathlib4/pull/15413\">#15413</a> and <a href=\"https://github.com/leanprover-community/mathlib4/pull/15417\">#15417</a> have landed and you'd like to find all remaining occurrences, you can just merge master and run the linter :-)</p>",
        "id": 456125735,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1722675271
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/15480\">#15480</a> and <a href=\"https://github.com/leanprover-community/mathlib4/pull/15481\">#15481</a> are two more PRs fixing these (in <code>NumberTheory</code> and <code>Topology</code>, respectively).</p>",
        "id": 456292766,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1722763825
    },
    {
        "content": "<p>According to the linter, there are about 200-250 files more files with <code>open Classical</code>. Help fixing these is most welcome!</p>",
        "id": 456292790,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1722763850
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/15490\">#15490</a> proposes including this statistic in the tech debt metrics. (An updated count finds 373 <em>occurrences</em>, some in the same file.)</p>",
        "id": 456331135,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1722781514
    },
    {
        "content": "<p>Thanks for doing this! I think</p>\n<blockquote>\n<p>chore(NumberTheory): replace remaining occurrences of open Classical <a href=\"https://github.com/leanprover-community/mathlib4/pull/15480\">#15480</a></p>\n</blockquote>\n<p>is the only remaining PR that is open, right?</p>",
        "id": 460088084,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1723471039
    },
    {
        "content": "<p>There are a few more now, just search for \"open\" or \"Classical\".<br>\n(Update: <a href=\"https://github.com/leanprover-community/mathlib4/pull/15669\">#15669</a> and <a href=\"https://github.com/leanprover-community/mathlib4/pull/15671\">#15671</a> are the only other ones; both have just a minor review comment.)</p>",
        "id": 460089524,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1723471473
    },
    {
        "content": "<p>Help with further files is welcome :-)</p>",
        "id": 460089730,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1723471547
    },
    {
        "content": "<p>Both PRs mentioned above are ready for review again.</p>",
        "id": 461033722,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1723486253
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/15835\">#15835</a>, <a href=\"https://github.com/leanprover-community/mathlib4/pull/15836\">#15836</a> and <a href=\"https://github.com/leanprover-community/mathlib4/pull/15837\">#15837</a> are three more PRs removing bare <code>open Classical</code></p>",
        "id": 462741363,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1723797332
    },
    {
        "content": "<p>I'm actually not sure if all the explicit mentions of <code>classical</code> in the proof scripts is an improvement.</p>",
        "id": 462743592,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1723798311
    },
    {
        "content": "<p>Which PR are you referring to? Are you concerned with the general aim of these PRs, or the way these are fixed? (I'm happy to change the latter.)</p>",
        "id": 462746026,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1723799343
    },
    {
        "content": "<p>I think having to start proofs with <code>classical</code> is a regression over \"1 line at the top of the file says we don't care about choice\".</p>",
        "id": 462752062,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1723801312
    },
    {
        "content": "<p>I'm curious about the justification for this too. Isn't Mathlib by and large dependent on choice and excluded middle?</p>",
        "id": 462756511,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1723803139
    },
    {
        "content": "<p>I can't possibly imagine the definitions we're explicitly tagging with <code>Classical</code> are the only ones that depend on it</p>",
        "id": 462756560,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1723803169
    },
    {
        "content": "<p>This was discussed a bit <a href=\"#narrow/stream/144837-PR-reviews/topic/.2315371.20Remove.20some.20uses.20of.20.60open.20Classical.6\">here</a> and in <a href=\"https://github.com/leanprover-community/mathlib4/pull/15371\">#15371</a>. As I understand it, the aim is to ensure theorem statements don't depend on classicality assumptions when they would better be stated using suitable decidability assumptions.</p>\n<p>I was also under the impression that using <code>classical</code> in proofs is fine...</p>",
        "id": 462761388,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1723805349
    },
    {
        "content": "<p>Meta point: can somebody move these messages to the thread above? I can't do that, as it's in a different channel.</p>",
        "id": 462761423,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1723805369
    },
    {
        "content": "<p>8 messages were moved here from <a class=\"stream-topic\" data-stream-id=\"287929\" href=\"/#narrow/stream/287929-mathlib4/topic/Technical.20Debt.20Counters\">#mathlib4 &gt; Technical Debt Counters</a> by <span class=\"user-mention silent\" data-user-id=\"112680\">Johan Commelin</span>.</p>",
        "id": 462765391,
        "sender_full_name": "Notification Bot",
        "timestamp": 1723806976
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"634338\">Michael Rothgang</span> <a href=\"#narrow/stream/144837-PR-reviews/topic/.2315371.20Remove.20some.20uses.20of.20.60open.20Classical.60/near/462761388\">said</a>:</p>\n<blockquote>\n<p>This was discussed a bit <a href=\"#narrow/stream/144837-PR-reviews/topic/.2315371.20Remove.20some.20uses.20of.20.60open.20Classical.6\">here</a> and in <a href=\"https://github.com/leanprover-community/mathlib4/pull/15371\">#15371</a>. As I understand it, the aim is to ensure theorem statements don't depend on classicality assumptions when they would better be stated using suitable decidability assumptions.</p>\n<p>I was also under the impression that using <code>classical</code> in proofs is fine...</p>\n</blockquote>\n<p>I agree with this. But there is a tension with the extra cognitive load that <code>classical</code> gives. Of course it is only <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>ε</mi><mo>&gt;</mo><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">\\varepsilon &gt; 0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5782em;vertical-align:-0.0391em;\"></span><span class=\"mord mathnormal\">ε</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">&gt;</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">0</span></span></span></span>. But I still think it's a tiny load and \"1000 papercuts...\" etc...</p>",
        "id": 462765560,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1723807076
    },
    {
        "content": "<p>There was a proposal at one point to make <code>by</code> imply <code>classical</code></p>",
        "id": 462772589,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1723809835
    },
    {
        "content": "<p>A switch that authorizes classical in proofs but not in statements would probably function like most people expect.</p>",
        "id": 463050298,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1723929787
    }
]