[
    {
        "content": "<p>In this PR I'd like to rewrite results for artinian rings in terms of <code>MaximalSpectrum</code> and <code>PrimeSpectrum</code> instead of using ideal sets <code>{I | I.IsMaxaimal}</code> or <code>{I | I.IsPrime}</code>. It builds properly but I have an impression that it could be improved even more. Of course if the approach is ok, I'd document new definitions.</p>\n<p>Any thoughts and comments are highly appreciated!</p>\n<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/20828\">#20828</a></p>",
        "id": 494517257,
        "sender_full_name": "Michał Staromiejski",
        "timestamp": 1737205350
    },
    {
        "content": "<p>I personally prefer if <code>Defs.lean</code> contain only definitions and nothing else.</p>",
        "id": 494517593,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1737205627
    },
    {
        "content": "<p>Especially when there is also a <code>Basic.lean</code>.</p>",
        "id": 494517607,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1737205641
    },
    {
        "content": "<p>One thought that I have is that instead of moving very simple facts from <code>Mathlib.RingTheory.Spectrum.Prime.Basic</code> to <code>Mathlib.RingTheory.Spectrum.Prime.Defs</code> maybe it is better to split <code>Basic.lean</code> into <code>Basic.lean</code> (with really basic facts) and the rest move to <code>Lemmas.lean</code>? (Analogously for <code>Mathlib.RingTheory.Spectrum.Maximal</code>).</p>",
        "id": 494517614,
        "sender_full_name": "Michał Staromiejski",
        "timestamp": 1737205649
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"439483\">@Andrew Yang</span> I was reading your mind ;) What do you think about my suggestion?</p>",
        "id": 494517700,
        "sender_full_name": "Michał Staromiejski",
        "timestamp": 1737205686
    },
    {
        "content": "<p>I don't think <code>Lemmas</code> is a good name though. IMO there should only be one generically-named file in each folder. Maybe just move each \"advanced\" section out of <code>Basic</code> into its own file with a more descriptive name if this is necessary to reduce imports?</p>\n<p>OTOH if the import of <code>Basic</code> isn't that heavy I think it's fine if we leave it as is.</p>",
        "id": 494518071,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1737206026
    },
    {
        "content": "<p>In both cases it seems quite heavy, I'll split it to better named files then.</p>",
        "id": 494518213,
        "sender_full_name": "Michał Staromiejski",
        "timestamp": 1737206122
    },
    {
        "content": "<p>I've split off localization results from <code>Mathlib.RingTheory.Spectrum.Maximal.Basic</code> to <code>Mathlib.RingTheory.Spectrum.Maximal.Localization</code> (changes pushed) and I'm about to start splitting <code>Mathlib.RingTheory.Spectrum.Prime.Basic</code>. This one is heavier tho. My idea is to extract:</p>\n<ol>\n<li>zero locus and vanishing ideal results into <code>ZeroLocus</code></li>\n<li>maybe <code>specComap</code> results could also go to a separate file?</li>\n</ol>",
        "id": 494525546,
        "sender_full_name": "Michał Staromiejski",
        "timestamp": 1737211681
    },
    {
        "content": "<p>I think the heavy import comes from integrality or surjectivity(quotients) or tensor products or localizations etc?<br>\nI would prefer if zero loci and functoriality and basic results concerning them still live in basic.lean</p>",
        "id": 494526609,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1737212546
    },
    {
        "content": "<p>Is there a tool to check transitive imports?<br>\nBTW, I think basic properties are just basic; zero loci etc. is already added feature... Why do you think it should stay in <code>Basic</code>?</p>",
        "id": 494526874,
        "sender_full_name": "Michał Staromiejski",
        "timestamp": 1737212794
    },
    {
        "content": "<p>To me, the structure of zero loci and vanishing sets are a part of the definition of the prime spectrum and <a href=\"https://stacks.math.columbia.edu/tag/00DZ\">stacks#00DZ</a> seem to agree.</p>",
        "id": 494527069,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1737212963
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"759408\">Michał Staromiejski</span> <a href=\"#narrow/channel/144837-PR-reviews/topic/.2320828.20.60MaximalSpectrum.20R.60.20instead.20of.20.60.7BI.20.7C.20I.2EIsMaximal.7D.60/near/494526874\">said</a>:</p>\n<blockquote>\n<p>Is there a tool to check transitive imports?</p>\n</blockquote>\n<p>You might want to use <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Tactic/Linter/MinImports.html#Mathlib.Linter.ImportState.minImports\">minImports</a> to figure out which decls require the heaviest imports (I haven't personally tested it). To figure out how many files the current file imports transitively without pushing changes to a PR, use <code>#trans_imports \"Mathlib.\"</code>.</p>",
        "id": 494527756,
        "sender_full_name": "Junyan Xu",
        "timestamp": 1737213585
    },
    {
        "content": "<p>Ok, I see. With split, it would still belong to <code>Spectrum.Prime</code> tho with a benefit of less heavy imports where only things like iso with <code>{I // I.IsPrime}</code> are needed. That's why I was thinking to move super basic results to <code>Defs</code>.</p>",
        "id": 494527896,
        "sender_full_name": "Michał Staromiejski",
        "timestamp": 1737213674
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"224323\">Junyan Xu</span> <a href=\"#narrow/channel/144837-PR-reviews/topic/.2320828.20.60MaximalSpectrum.20R.60.20instead.20of.20.60.7BI.20.7C.20I.2EIsMaximal.7D.60/near/494527756\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"759408\">Michał Staromiejski</span> <a href=\"#narrow/channel/144837-PR-reviews/topic/.2320828.20.60MaximalSpectrum.20R.60.20instead.20of.20.60.7BI.20.7C.20I.2EIsMaximal.7D.60/near/494526874\">said</a>:</p>\n<blockquote>\n<p>Is there a tool to check transitive imports?</p>\n</blockquote>\n<p>You might want to use <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Tactic/Linter/MinImports.html#Mathlib.Linter.ImportState.minImports\">minImports</a> to figure out which decls require the heaviest imports (I haven't personally tested it). To figure out how many files the current file imports transitively without pushing changes to a PR, use <code>#trans_imports \"Mathlib.\"</code>.</p>\n</blockquote>\n<p>Since a few days, elaboration of lean files has become more asynchronous.  This means that <code>minImports</code> does not work as well (at least the linter, I have not investigated the <code>#min_imports</code> command).</p>\n<p>To get the linter working, you should add</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">set_option</span><span class=\"w\"> </span><span class=\"n\">Elab</span><span class=\"bp\">.</span><span class=\"n\">async</span><span class=\"w\"> </span><span class=\"n\">false</span>\n<span class=\"kn\">set_option</span><span class=\"w\"> </span><span class=\"n\">linter</span><span class=\"bp\">.</span><span class=\"n\">minImports</span><span class=\"w\"> </span><span class=\"n\">true</span>\n</code></pre></div>\n<p>at the top of the file.</p>\n<p>If you notice any issues with this workaround, please comment them on <a href=\"https://github.com/leanprover-community/mathlib4/pull/20755\">#20755</a>!</p>",
        "id": 494528324,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1737214036
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"439483\">@Andrew Yang</span> importing <code>Mathlib.RingTheory.Spectrum.Prime.Basic</code> in <code>Mathlib.RingTheory.Artinian.Module</code> results in the error</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">Declaration</span><span class=\"w\"> </span><span class=\"bp\">@</span><span class=\"n\">IsLocalization</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">allowed</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">be</span><span class=\"w\"> </span><span class=\"n\">imported</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"n\">file</span><span class=\"bp\">.</span>\n<span class=\"n\">It</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">defined</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">RingTheory</span><span class=\"bp\">.</span><span class=\"n\">Localization</span><span class=\"bp\">.</span><span class=\"n\">Defs</span><span class=\"o\">,</span>\n<span class=\"w\">  </span><span class=\"n\">which</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">imported</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">RingTheory</span><span class=\"bp\">.</span><span class=\"n\">Localization</span><span class=\"bp\">.</span><span class=\"n\">Ideal</span><span class=\"o\">,</span>\n<span class=\"w\">  </span><span class=\"n\">which</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">imported</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">RingTheory</span><span class=\"bp\">.</span><span class=\"n\">Spectrum</span><span class=\"bp\">.</span><span class=\"n\">Prime</span><span class=\"bp\">.</span><span class=\"n\">Basic</span><span class=\"o\">,</span>\n<span class=\"w\">  </span><span class=\"n\">which</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">imported</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"n\">file</span><span class=\"bp\">.</span>\n\n<span class=\"n\">These</span><span class=\"w\"> </span><span class=\"n\">invariants</span><span class=\"w\"> </span><span class=\"n\">are</span><span class=\"w\"> </span><span class=\"n\">maintained</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"ss\">`assert_not_exists</span><span class=\"bp\">`</span><span class=\"w\"> </span><span class=\"n\">statements</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">and</span><span class=\"w\"> </span><span class=\"n\">exist</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">order</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">ensure</span><span class=\"w\"> </span><span class=\"n\">that</span><span class=\"w\"> </span><span class=\"s2\">\"complicated\"</span><span class=\"w\"> </span><span class=\"n\">parts</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">library</span><span class=\"w\"> </span><span class=\"n\">are</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">accidentally</span><span class=\"w\"> </span><span class=\"n\">introduced</span><span class=\"w\"> </span><span class=\"n\">as</span><span class=\"w\"> </span><span class=\"n\">dependencies</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"s2\">\"simple\"</span><span class=\"w\"> </span><span class=\"n\">parts</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">library</span><span class=\"bp\">.</span>\n</code></pre></div>\n<p>I don't think we want to remove the assertion just to allow for equivalence <code>PrimeSpectrum R ≃ {I : Ideal R // I.IsPrime}</code> or this type of really basic results... I can see two simple solutions:</p>\n<ol>\n<li>Those very basic facts about the definition go to <code>Defs.lean</code> (as it was in my first commit) or</li>\n<li>They stay in <code>Basic.lean</code> and the more specialized results, requiring localization or other things, go to other files.</li>\n</ol>\n<p>I think there will be more places where we want to use <code>PrimeSpectrum R</code> instead of <code>{I : Ideal R // I.IsPrime}</code> and I guess we don't want those more specialized results to be pulled there either... I think option 1 is quite ok, a lot of other <code>Defs.lean</code> files contain more that just definitions.</p>\n<p>Any other solutions? Thoughts?</p>",
        "id": 494549776,
        "sender_full_name": "Michał Staromiejski",
        "timestamp": 1737230540
    },
    {
        "content": "<p>Do we need localization for basic results concerning zero loci?</p>",
        "id": 494549947,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1737230708
    },
    {
        "content": "<p>Even if not, I guess it could be pulled in by some imports that are needed for it.</p>",
        "id": 494550228,
        "sender_full_name": "Michał Staromiejski",
        "timestamp": 1737230953
    },
    {
        "content": "<p>Ok, it's needed only for two results for <code>specComap</code>.</p>",
        "id": 494550339,
        "sender_full_name": "Michał Staromiejski",
        "timestamp": 1737231053
    },
    {
        "content": "<p>So maybe I'll extract <code>specComap</code> results to <code>Comap.lean</code>?</p>",
        "id": 494550768,
        "sender_full_name": "Michał Staromiejski",
        "timestamp": 1737231419
    },
    {
        "content": "<p>Tried to move only the two localization/specComap results to <code>Topology.lean</code>, was almost happy until I changed import <code>Mathlib.RingTheory.Spectrum.Prime.Defs</code> to <code>Mathlib.RingTheory.Spectrum.Prime.Basic</code> to get cyclic imports in <code>Mathlib.RingTheory.Nilpotent.Lemmas</code> <span aria-label=\"face with spiral eyes\" class=\"emoji emoji-1f635-200d-1f4ab\" role=\"img\" title=\"face with spiral eyes\">:face_with_spiral_eyes:</span> <br>\nI think this fact is nice to have (and I use it in one of the proofs):</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">nilradical_eq_iInf</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">CommSemiring</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">nilradical</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">iInf</span><span class=\"w\"> </span><span class=\"n\">PrimeSpectrum</span><span class=\"bp\">.</span><span class=\"n\">asIdeal</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">PrimeSpectrum</span><span class=\"bp\">.</span><span class=\"n\">asIdeal_range_eq</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"bp\">▸</span><span class=\"w\"> </span><span class=\"n\">nilradical_eq_sInf</span><span class=\"w\"> </span><span class=\"n\">R</span>\n</code></pre></div>\n<p>and I put it to <code>Mathlib.RingTheory.Nilpotent.Lemmas</code> next to <code>nilradical_eq_sInf</code>. Of course I can move it to <code>Mathlib.RingTheory.Spectrum.Prime.Basic</code> but I don't think it's a good place for it...</p>\n<p>Suggestions?</p>",
        "id": 494553080,
        "sender_full_name": "Michał Staromiejski",
        "timestamp": 1737233283
    },
    {
        "content": "<p>IMO it being in <code>Spectrum.Prime.Basic</code> is reasonable. It mentions PrimeSpectrum anyway and It is morally just the specialization of <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=PrimeSpectrum.vanishingIdeal_zeroLocus_eq_radical#doc\">docs#PrimeSpectrum.vanishingIdeal_zeroLocus_eq_radical</a> to the empty set.</p>",
        "id": 494557026,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1737236182
    },
    {
        "content": "<p>Alright, should I place it somewhere nearby? Is the name ok?</p>",
        "id": 494564323,
        "sender_full_name": "Michał Staromiejski",
        "timestamp": 1737237767
    },
    {
        "content": "<p>I personally would state it the otherway around and call it <code>PrimeSpectrum.iInf_asIdeal</code>, but your name is totally sensible as well and i'm also happy if you kept it as is.</p>",
        "id": 494569216,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1737238833
    },
    {
        "content": "<p>Pushed the changes and got <code>large-import</code> label <span aria-label=\"face with peeking eye\" class=\"emoji emoji-1fae3\" role=\"img\" title=\"face with peeking eye\">:face_with_peeking_eye:</span> If that's ok I'd be fine but I fear that we should strive to minimize imports otherwise more problems for example with class search can kick us later...</p>",
        "id": 494570040,
        "sender_full_name": "Michał Staromiejski",
        "timestamp": 1737239001
    },
    {
        "content": "<p>I think the issue comes from </p>\n<ol>\n<li><code>Mathlib/RingTheory/Nilpotent/Lemmas.lean</code> should be split and it shouldn't import matrices and quotients (not in this PR)</li>\n<li>Noetherian results could be moved into <code>Spectrum/Prime/Noetherian</code> to further reduce some imports.</li>\n</ol>",
        "id": 494571803,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1737239372
    },
    {
        "content": "<p>The label is only a reminder to the reviewers that they should check if the change in imports makes sense, not something you need to act on by default</p>",
        "id": 494572813,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1737239665
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"307953\">@Ruben Van de Velde</span> Good to know. I just feel bad seeing this ;)<br>\n<span class=\"user-mention\" data-user-id=\"439483\">@Andrew Yang</span> Do you think I should do 2. in this PR? I could do 2 follow-up PRs with both suggestions.</p>",
        "id": 494573605,
        "sender_full_name": "Michał Staromiejski",
        "timestamp": 1737239846
    },
    {
        "content": "<p>I feel like 2 might be easy enough to do in this PR but it's also fine to do it separately.</p>",
        "id": 494573793,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1737239900
    },
    {
        "content": "<p>And yeah, looks like there's a nice split point at line 80 of <code>Mathlib/RingTheory/Nilpotent/Lemmas.lean</code>. Do we have a preferred import direction between RingTheory and LinearAlgebra?</p>",
        "id": 494575768,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1737240347
    },
    {
        "content": "<p>I doubt we'll ever get a clean split there. :-( It would be nice if we could consider <code>LinearAlgebra</code> as more basic, but I don't think that's how we've set things up at present.</p>",
        "id": 494581092,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1737243152
    },
    {
        "content": "<p>After moving noetherian results to Spectrum/Prime/Noetherian I needed to adjust imports in other files and now I got this error:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">././././</span><span class=\"n\">Mathlib</span><span class=\"bp\">/</span><span class=\"n\">Algebra</span><span class=\"bp\">/</span><span class=\"n\">Module</span><span class=\"bp\">/</span><span class=\"n\">PID</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mi\">52</span><span class=\"o\">:</span><span class=\"mi\">18</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Declaration</span><span class=\"w\"> </span><span class=\"n\">TopologicalSpace</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">allowed</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">be</span><span class=\"w\"> </span><span class=\"n\">imported</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"n\">file</span><span class=\"bp\">.</span>\n<span class=\"n\">It</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">defined</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Topology</span><span class=\"bp\">.</span><span class=\"n\">Defs</span><span class=\"bp\">.</span><span class=\"n\">Basic</span><span class=\"o\">,</span>\n<span class=\"w\">  </span><span class=\"n\">which</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">imported</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Topology</span><span class=\"bp\">.</span><span class=\"n\">Defs</span><span class=\"bp\">.</span><span class=\"n\">Filter</span><span class=\"o\">,</span>\n<span class=\"w\">  </span><span class=\"n\">which</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">imported</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Topology</span><span class=\"bp\">.</span><span class=\"n\">Basic</span><span class=\"o\">,</span>\n<span class=\"w\">  </span><span class=\"n\">which</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">imported</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Topology</span><span class=\"bp\">.</span><span class=\"n\">Defs</span><span class=\"bp\">.</span><span class=\"n\">Induced</span><span class=\"o\">,</span>\n<span class=\"w\">  </span><span class=\"n\">which</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">imported</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Topology</span><span class=\"bp\">.</span><span class=\"n\">Order</span><span class=\"o\">,</span>\n<span class=\"w\">  </span><span class=\"n\">which</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">imported</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Topology</span><span class=\"bp\">.</span><span class=\"n\">Maps</span><span class=\"bp\">.</span><span class=\"n\">Basic</span><span class=\"o\">,</span>\n<span class=\"w\">  </span><span class=\"n\">which</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">imported</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Topology</span><span class=\"bp\">.</span><span class=\"n\">Constructions</span><span class=\"o\">,</span>\n<span class=\"w\">  </span><span class=\"n\">which</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">imported</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Topology</span><span class=\"bp\">.</span><span class=\"n\">ContinuousOn</span><span class=\"o\">,</span>\n<span class=\"w\">  </span><span class=\"n\">which</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">imported</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Topology</span><span class=\"bp\">.</span><span class=\"n\">Bases</span><span class=\"o\">,</span>\n<span class=\"w\">  </span><span class=\"n\">which</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">imported</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Topology</span><span class=\"bp\">.</span><span class=\"n\">Compactness</span><span class=\"bp\">.</span><span class=\"n\">Compact</span><span class=\"o\">,</span>\n<span class=\"w\">  </span><span class=\"n\">which</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">imported</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Topology</span><span class=\"bp\">.</span><span class=\"n\">Compactness</span><span class=\"bp\">.</span><span class=\"n\">LocallyCompact</span><span class=\"o\">,</span>\n<span class=\"w\">  </span><span class=\"n\">which</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">imported</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Topology</span><span class=\"bp\">.</span><span class=\"n\">Separation</span><span class=\"bp\">.</span><span class=\"n\">Basic</span><span class=\"o\">,</span>\n<span class=\"w\">  </span><span class=\"n\">which</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">imported</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Topology</span><span class=\"bp\">.</span><span class=\"n\">Separation</span><span class=\"bp\">.</span><span class=\"n\">Hausdorff</span><span class=\"o\">,</span>\n<span class=\"w\">  </span><span class=\"n\">which</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">imported</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Topology</span><span class=\"bp\">.</span><span class=\"n\">Algebra</span><span class=\"bp\">.</span><span class=\"n\">Support</span><span class=\"o\">,</span>\n<span class=\"w\">  </span><span class=\"n\">which</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">imported</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Topology</span><span class=\"bp\">.</span><span class=\"n\">Homeomorph</span><span class=\"o\">,</span>\n<span class=\"w\">  </span><span class=\"n\">which</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">imported</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Topology</span><span class=\"bp\">.</span><span class=\"n\">ContinuousMap</span><span class=\"bp\">.</span><span class=\"n\">Basic</span><span class=\"o\">,</span>\n<span class=\"w\">  </span><span class=\"n\">which</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">imported</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Topology</span><span class=\"bp\">.</span><span class=\"n\">Sets</span><span class=\"bp\">.</span><span class=\"n\">Opens</span><span class=\"o\">,</span>\n<span class=\"w\">  </span><span class=\"n\">which</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">imported</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Topology</span><span class=\"bp\">.</span><span class=\"n\">Sets</span><span class=\"bp\">.</span><span class=\"n\">Closeds</span><span class=\"o\">,</span>\n<span class=\"w\">  </span><span class=\"n\">which</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">imported</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Topology</span><span class=\"bp\">.</span><span class=\"n\">KrullDimension</span><span class=\"o\">,</span>\n<span class=\"w\">  </span><span class=\"n\">which</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">imported</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">RingTheory</span><span class=\"bp\">.</span><span class=\"n\">Spectrum</span><span class=\"bp\">.</span><span class=\"n\">Prime</span><span class=\"bp\">.</span><span class=\"n\">Topology</span><span class=\"o\">,</span>\n<span class=\"w\">  </span><span class=\"n\">which</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">imported</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">RingTheory</span><span class=\"bp\">.</span><span class=\"n\">Spectrum</span><span class=\"bp\">.</span><span class=\"n\">Prime</span><span class=\"bp\">.</span><span class=\"n\">Noetherian</span><span class=\"o\">,</span>\n<span class=\"w\">  </span><span class=\"n\">which</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">imported</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">RingTheory</span><span class=\"bp\">.</span><span class=\"n\">DedekindDomain</span><span class=\"bp\">.</span><span class=\"n\">Ideal</span><span class=\"o\">,</span>\n<span class=\"w\">  </span><span class=\"n\">which</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">imported</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Algebra</span><span class=\"bp\">.</span><span class=\"n\">Module</span><span class=\"bp\">.</span><span class=\"n\">DedekindDomain</span><span class=\"o\">,</span>\n<span class=\"w\">  </span><span class=\"n\">which</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">imported</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"n\">file</span><span class=\"bp\">.</span>\n</code></pre></div>\n<p>So I'm guessing the 2 noetherian results were in <code>Mathlib.RingTheory.Spectrum.Prime.Basic</code> for that reason?</p>",
        "id": 494623059,
        "sender_full_name": "Michał Staromiejski",
        "timestamp": 1737278064
    },
    {
        "content": "<p>Hmm, hard to say, this may have resulted from a mistake in adjusting imports in other files.</p>",
        "id": 494626373,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1737280740
    },
    {
        "content": "<p>Only those 2 results were used in <code>Mathlib.RingTheory.DedekindDomain.Ideal</code> and they don't require topology. Importing <code>Mathlib.RingTheory.Spectrum.Prime.Noetherian</code>instead of <code>Mathlib.RingTheory.Spectrum.Prime.Basic</code> pulls topology in, as <code>Mathlib.RingTheory.Spectrum.Prime.Noetherian</code> contains topological results.</p>",
        "id": 494626616,
        "sender_full_name": "Michał Staromiejski",
        "timestamp": 1737280929
    },
    {
        "content": "<p>Anyway, I reverted the change, I think it would trigger too much to be part of this PR.</p>",
        "id": 494626668,
        "sender_full_name": "Michał Staromiejski",
        "timestamp": 1737280984
    },
    {
        "content": "<p>This PR is on the big side to easily evaluate, btw. Please consider if there's anything you could split out</p>",
        "id": 494641219,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1737292843
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"307953\">@Ruben Van de Velde</span>  If we want to have only type definition in <code>Defs.lean</code> and super basic facts about the type in <code>Basic.lean</code> along with extra stuff than it's minimal work package already to make it happen. Otherwise much smaller is first commit in the PR that adds super simple facts (no extra imports required) to <code>Defs.lean</code>.</p>\n<p>Maybe in general we should allow for facts in <code>Defs.lean</code> that do not require extra imports and are more utilities than real mathematical results? I can't really imagine that someone wants to import <code>Defs.lean</code> <strong>only</strong> with definitions and then add simple utils... What I mean is that <code>Defs.lean</code> should be importable outside, not only by <code>Basic.lean</code> in the same directory, right?</p>",
        "id": 494642542,
        "sender_full_name": "Michał Staromiejski",
        "timestamp": 1737293894
    },
    {
        "content": "<p>What might be a good split of the PR is to delay new contents into a new PR and only move existing results in this one.</p>",
        "id": 494643114,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1737294398
    },
    {
        "content": "<p>It's quite a work to be done and the result would be another big PR with some shuffling that could be hard to justify (main reason for this shuffling is to be able to import <code>Mathlib.RingTheory.Spectrum.Prime.Basic</code> in <code>Mathlib.RingTheory.Artinian.Module</code>). And without driving changes, it's harder to check if everything got moved as required. Having driving changes included makes more sense IMO.</p>",
        "id": 494644369,
        "sender_full_name": "Michał Staromiejski",
        "timestamp": 1737295559
    },
    {
        "content": "<p>Yes I totally agree with you. What we usually do to indicate these driving change is to open a PR containing all the changes depending (via the syntax in the PR comment) on the PR that does the boring shuffling.</p>",
        "id": 494645046,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1737296114
    },
    {
        "content": "<p>Ok, I'll try to split.</p>",
        "id": 494646993,
        "sender_full_name": "Michał Staromiejski",
        "timestamp": 1737297508
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/20845\">#20845</a> - split off import-heavy results from <code>Spectrum/*/Basic.lean</code></p>",
        "id": 494650730,
        "sender_full_name": "Michał Staromiejski",
        "timestamp": 1737300230
    },
    {
        "content": "<p>Hi, it seems that I accidentally made <a href=\"https://github.com/leanprover-community/mathlib4/pull/20828\">#20828</a> closed by pushing the branch when it was still pointing at master and by pushing again with a commit, it does not reopen the PR... is it something to be generally fixed?</p>\n<p>Should I open new PR?</p>",
        "id": 494818223,
        "sender_full_name": "Michał Staromiejski",
        "timestamp": 1737381678
    },
    {
        "content": "<p>There's a \"reopen pull request\" button at the bottom of the page. Does that work?</p>",
        "id": 494818478,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1737381738
    },
    {
        "content": "<p>Indeed, didn't go that deep <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span></p>",
        "id": 494819373,
        "sender_full_name": "Michał Staromiejski",
        "timestamp": 1737381967
    },
    {
        "content": "<p>The PR <a href=\"https://github.com/leanprover-community/mathlib4/pull/20828\">#20828</a> is reopened and ready for a review if anyone has time <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 495115888,
        "sender_full_name": "Michał Staromiejski",
        "timestamp": 1737482736
    }
]