[
    {
        "content": "<p>This PR provides a few basic lemmas about <code>RingQuot.mkRingHom</code> and <code>RingQuot.mkAlgHom</code>. These lemmas are about when are two elements mapped to the same one under these two maps, and they correspond to the lemma <code>Quot.eq</code>.</p>\n<p>We wrote this PR because these lemmas are used in <a href=\"https://github.com/leanprover-community/mathlib4/pull/22279\">#22279</a>. In <a href=\"https://github.com/leanprover-community/mathlib4/pull/22279\">#22279</a>, we are working on <code>Homogeneous Relation</code>, which are certain types of relations that when taking <code>RingQuot</code> with respect to it, we can obtain a <code>GradedRing</code> structure on the quotient ring. And to prove that, we used induction on the explicitly defined <code>RingQuot.Rel</code> and <code>Relation.EqvGen</code> proved that a homogeneous relation is still homogeneous after these actions. Then, in order to use the property to deduce the <code>GradedRing</code> structure on the quotient ring, we have to make use of these lemmas.</p>",
        "id": 505818608,
        "sender_full_name": "Wang Jingting",
        "timestamp": 1742021931
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"240862\">@Oliver Nash</span> left a comment about we can try to use the universal property, but I think it would be difficult to use the universal property in the setting where we're explicitly working with elements.</p>",
        "id": 505818738,
        "sender_full_name": "Wang Jingting",
        "timestamp": 1742022056
    },
    {
        "content": "<p>I wonder if, for the graded ring structure on a quotient ring, we should be working with <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=RingCon.Quotient#doc\">docs#RingCon.Quotient</a> instead of <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=RingQuot#doc\">docs#RingQuot</a></p>",
        "id": 505841742,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1742040386
    },
    {
        "content": "<p>The latter is really just a performance hack that wraps the former</p>",
        "id": 505841751,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1742040395
    },
    {
        "content": "<p>(I've created <a href=\"https://github.com/leanprover-community/mathlib4/pull/22951\">#22951</a> and <a href=\"https://github.com/leanprover-community/mathlib4/pull/22954\">#22954</a> as a step towards trying to make that clearer)</p>",
        "id": 505841773,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1742040413
    },
    {
        "content": "<p>Well, I have no objection towards this version since taking quotient by a <code>RingCon</code> is a better thing to do. But it appears to me that many things in mathlib has already been developed in the form of <code>RingQuot</code>?</p>",
        "id": 505842458,
        "sender_full_name": "Wang Jingting",
        "timestamp": 1742040876
    },
    {
        "content": "<p>And we actually defined a homogeneous relation to be </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">class</span><span class=\"w\"> </span><span class=\"n\">IsHomogeneousRelation</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">œÉ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">SetLike</span><span class=\"w\"> </span><span class=\"n\">œÉ</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">AddSubmonoidClass</span><span class=\"w\"> </span><span class=\"n\">œÉ</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ùíú</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Œπ</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">œÉ</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"o\">[</span><span class=\"n\">GradedRing</span><span class=\"w\"> </span><span class=\"n\">ùíú</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">is_homogeneous'</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">‚àÄ</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"o\">},</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span>\n<span class=\"w\">  </span><span class=\"bp\">‚àÄ</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Œπ</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Relation</span><span class=\"bp\">.</span><span class=\"n\">EqvGen</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"n\">GradedRing</span><span class=\"bp\">.</span><span class=\"n\">proj</span><span class=\"w\"> </span><span class=\"n\">ùíú</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"n\">GradedRing</span><span class=\"bp\">.</span><span class=\"n\">proj</span><span class=\"w\"> </span><span class=\"n\">ùíú</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>So working with relations actually helped to simplify things a little bit here? (e.g. If I'm trying to verify that the symmetric algebra has a graded ring structure, then this definition will be easy to use)</p>",
        "id": 505842647,
        "sender_full_name": "Wang Jingting",
        "timestamp": 1742041017
    },
    {
        "content": "<p>But if your idea is to do the complete refactoring, then I strongly supports the idea! (<code>RingQuot</code> is just sort of difficult to deal with)</p>",
        "id": 505842779,
        "sender_full_name": "Wang Jingting",
        "timestamp": 1742041131
    },
    {
        "content": "<p>I would guess that you want to replace <code>r</code> with a <code>RingCon</code> there, if you're assuming <code>GradedRing</code> anyway</p>",
        "id": 505842799,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1742041144
    },
    {
        "content": "<p>I just left some remarks on <a href=\"https://github.com/leanprover-community/mathlib4/pull/22355\">#22355</a> and <a href=\"https://github.com/leanprover-community/mathlib4/pull/22279\">#22279</a> before I saw this thread.</p>",
        "id": 505844340,
        "sender_full_name": "Oliver Nash",
        "timestamp": 1742042318
    },
    {
        "content": "<p>Thanks for the comments! I'll take a look at them and see if I can make use of them to make the proof easier.</p>",
        "id": 505844709,
        "sender_full_name": "Wang Jingting",
        "timestamp": 1742042615
    },
    {
        "content": "<p>If the plan is to use <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=RingCon#doc\">docs#RingCon</a> then they will be a bit less relevant (though not entirely).</p>",
        "id": 505844855,
        "sender_full_name": "Oliver Nash",
        "timestamp": 1742042713
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"240862\">@Oliver Nash</span> I'm not very convinced about the <code>GradedAlgebra.algHom</code> approach, since I think that requires explicitly constructing the inverse map. But in the case here, we chose to go from <code>DirectSum.IsInternal</code> because the inverse map would involve many <code>Classical.choose</code> flying around.</p>",
        "id": 505844970,
        "sender_full_name": "Wang Jingting",
        "timestamp": 1742042797
    },
    {
        "content": "<p>If you use <code>DirectSum.Decomposition</code> instead of <code>IsInternal</code>  then you already have an inverse map available</p>",
        "id": 505845002,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1742042829
    },
    {
        "content": "<p>I'm not sure if I understand you correctly, but I'm thinking that you probably cannot go from <code>RingQuot r</code> to <code>R</code> and the same applies to graded pieces?</p>",
        "id": 505845167,
        "sender_full_name": "Wang Jingting",
        "timestamp": 1742042965
    },
    {
        "content": "<p>Well I don't claim <code>GradedAlgebra.ofAlgHom</code> definitely the way to go but I do note that each of the 5 <code>sorry</code>s I left are all <code>Prop</code>s.</p>",
        "id": 505845198,
        "sender_full_name": "Oliver Nash",
        "timestamp": 1742043001
    },
    {
        "content": "<p>Thanks! I see how this is working now! We can lift an algebra homomorphism out of <code>RingQuot</code> by verifying that all the relations have been satisfied.</p>",
        "id": 505845299,
        "sender_full_name": "Wang Jingting",
        "timestamp": 1742043070
    },
    {
        "content": "<p>Right: this is exactly the universal property I've been banging on about.</p>",
        "id": 505845327,
        "sender_full_name": "Oliver Nash",
        "timestamp": 1742043097
    },
    {
        "content": "<p>Sorry for the previous misunderstanding. I'll try to work on this when I'm available and let you know when it's done. Thanks!</p>",
        "id": 505845404,
        "sender_full_name": "Wang Jingting",
        "timestamp": 1742043147
    },
    {
        "content": "<p>Absolutely no apologies necessary! Feel free to raise more questions if you feel we still haven't got the design right.</p>",
        "id": 505845563,
        "sender_full_name": "Oliver Nash",
        "timestamp": 1742043275
    },
    {
        "content": "<p>Out of curiosity, is the plan to use this to construct the induced grading on a quotient (by an ideal)?</p>",
        "id": 513159582,
        "sender_full_name": "Paul Lezeau",
        "timestamp": 1745060619
    },
    {
        "content": "<p>Well, it was used to construct the induced grading on a <code>RingQuot</code> by a homogeneous relation. But now we go with what <span class=\"user-mention\" data-user-id=\"240862\">@Oliver Nash</span> suggested, and these lemmas are not used by the current proof.</p>",
        "id": 513785110,
        "sender_full_name": "Wang Jingting",
        "timestamp": 1745389156
    }
]