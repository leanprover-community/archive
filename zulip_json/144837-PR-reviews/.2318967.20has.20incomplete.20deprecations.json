[
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"387244\">@Yaël Dillies</span>, <span class=\"user-mention\" data-user-id=\"307953\">@Ruben Van de Velde</span>, <span class=\"user-mention\" data-user-id=\"112680\">@Johan Commelin</span>, other reviewers:</p>\n<p>heads up that <a href=\"https://github.com/leanprover-community/mathlib4/pull/18967\">#18967</a> has many deprecations that do not include the recommended replacement, but easily could have. (And I promptly ran into this on <code>nightly-testing</code>.)</p>",
        "id": 482485539,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1731619503
    },
    {
        "content": "<p>Gah</p>",
        "id": 482486089,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1731619728
    },
    {
        "content": "<p>I'm going to have to insist on smaller batches if I have to check them all :/</p>",
        "id": 482486702,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1731619975
    },
    {
        "content": "<p>Can we get better automation instead of working harder?</p>",
        "id": 482495906,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1731624167
    },
    {
        "content": "<ol>\n<li>Here the declaration diff showed no declaration was lost</li>\n<li>It's really hard to keep a list of deprecations in sync with the rest of the PR. What I have settled on is a trailing commit that I call \"deprecated aliases\" which I discard and regenerate every time the PR changes</li>\n</ol>",
        "id": 482496259,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1731624361
    },
    {
        "content": "<p>Oh wait no I see. I thought it was a case of deprecations not being added for additivised version, but instead it's just me having done a bad job at completing the deprecations</p>",
        "id": 482496504,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1731624476
    },
    {
        "content": "<p>I'm not sure what happened exactly, but reading through the diff now I recall being in the middle of this deprecation task and it feels like I have been interrupted midway</p>",
        "id": 482496687,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1731624543
    },
    {
        "content": "<p>I will file a PR completing the deprecations tomorrow</p>",
        "id": 482496824,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1731624605
    },
    {
        "content": "<p>As is probably clear to everyone, generating deprecations automatically is quite tricky, even with simultaneous access to both environments before and after the change, since it is not usually just a matter of a rename, but there are also often some signature changes in the deprecation-pairs.</p>",
        "id": 482498425,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1731625486
    },
    {
        "content": "<p>Certainly, more type-awareness for deprecations would improve the tooling, but it would still be hard and would likely require a full build, plus something.</p>",
        "id": 482498542,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1731625550
    },
    {
        "content": "<p>Could the @[deprecated] attribute be noisy if it is missing the replacement or the <code>since</code> field, to make sure this is caught by CI?</p>",
        "id": 482543713,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1731653784
    },
    {
        "content": "<p>There is already a linter to ensure a since field.</p>",
        "id": 482547389,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1731655713
    },
    {
        "content": "<p>But isn't this thread about something else?</p>",
        "id": 482547573,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1731655807
    },
    {
        "content": "<p>Yes, it is something else, and that something else is the first clause of Sébastien's \"or\"</p>",
        "id": 482589815,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1731669644
    },
    {
        "content": "<p>I've opened <a href=\"https://github.com/leanprover-community/mathlib4/pull/19081\">#19081</a>. It will take a while to get it green because I had forgotten to deprecate one lemma</p>",
        "id": 482592876,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1731670741
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"387244\">Yaël Dillies</span> <a href=\"#narrow/stream/144837-PR-reviews/topic/.2318967.20has.20incomplete.20deprecations/near/482589815\">said</a>:</p>\n<blockquote>\n<p>Yes, it is something else, and that something else is the first clause of Sébastien's \"or\"</p>\n</blockquote>\n<p>Ah. I had wondered...I'm not sure if that's feasible/there  should be a way to opt out.</p>",
        "id": 482603661,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1731674231
    },
    {
        "content": "<p>I think \"there must be either a replacement or an explanation string\" would be reasonable. (And a positive change.)</p>",
        "id": 482685416,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1731700485
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110087\">@Kim Morrison</span>, <a href=\"https://github.com/leanprover-community/mathlib4/pull/19081\">#19081</a> is ready</p>",
        "id": 482971772,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1731922568
    }
]