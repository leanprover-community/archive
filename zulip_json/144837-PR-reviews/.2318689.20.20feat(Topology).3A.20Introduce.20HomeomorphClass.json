[
    {
        "content": "<p>Hello, in this PR I introduced <code>HomeomorphClass</code>, there is a problem here:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">HomeomorphClass</span><span class=\"w\"> </span><span class=\"n\">F</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">CoeTC</span><span class=\"w\"> </span><span class=\"n\">F</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">≃ₜ</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"bp\">⟨</span><span class=\"n\">HomeomorphClass</span><span class=\"bp\">.</span><span class=\"n\">toHomeomorph</span><span class=\"bp\">⟩</span>\n</code></pre></div>\n<p>I was suggested that <code>CoeTC</code> is not prefered, so what is the best coercion for this one?<br>\nMore generally, what is the best coercions from morphism classes to morphisms?</p>",
        "id": 481089269,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1730975595
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"238446\">@Anne Baanen</span> do you happen to know the correct suggestion here (and in general?)</p>",
        "id": 481155300,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1730996467
    },
    {
        "content": "<p>When you declare an instance, please use <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=CoeOut#doc\">docs#CoeOut</a> instead of <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=CoeTC#doc\">docs#CoeTC</a>. That should be the full fix :)</p>",
        "id": 481155455,
        "sender_full_name": "Anne Baanen",
        "timestamp": 1730996513
    },
    {
        "content": "<p>So we should make this change globally in Mathlib?</p>",
        "id": 481155593,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1730996549
    },
    {
        "content": "<p>(for morphism classes)</p>",
        "id": 481155642,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1730996563
    },
    {
        "content": "<p><del>Ah sorry, I got the direction of \"out\" confused. In this case I believe a normal <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Coe#doc\">docs#Coe</a> actually should work: the <code>F</code> will be marked as <code>semiOutParam</code>.</del></p>",
        "id": 481155827,
        "sender_full_name": "Anne Baanen",
        "timestamp": 1730996630
    },
    {
        "content": "<p>Nevermind. I am a silly goose who should test the suggestions I make. <code>Coe</code> will complain rightfully, <code>CoeOut</code> will work.</p>",
        "id": 481156308,
        "sender_full_name": "Anne Baanen",
        "timestamp": 1730996774
    },
    {
        "content": "<p>Given that currently there are serious performance issues with the <code>FunLike</code> hierarchy, I suspect that globally changing to <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=CoeOut#doc\">docs#CoeOut</a> would cause many timeouts. Using auxiliary typeclasses such as <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=CoeTC#doc\">docs#CoeTC</a> which will not be chained is a better choice for performance. If there are performance issues with <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=CoeOut#doc\">docs#CoeOut</a> and need to avoid using auxiliary type classes directly, maybe we can try <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=CoeHead#doc\">docs#CoeHead</a>.</p>",
        "id": 481312583,
        "sender_full_name": "Yuyang Zhao",
        "timestamp": 1731071717
    }
]