[
    {
        "content": "<p>In this PR, we proved the following <code>proof_wanted</code> in <code>Mathlib.RingTheory.KrullDimension.Basic</code>: For a commutative ring <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>R</mi></mrow><annotation encoding=\"application/x-tex\">R</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span></span></span></span>,<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>d</mi><mi>i</mi><mi>m</mi><mi>R</mi><mo stretchy=\"false\">[</mo><mi>X</mi><mo stretchy=\"false\">]</mo><mo>≤</mo><mn>2</mn><mo>∗</mo><mi>d</mi><mi>i</mi><mi>m</mi><mi>R</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">dim R[X] \\le 2 * dim R + 1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\">im</span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span><span class=\"mopen\">[</span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"mclose\">]</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">2</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">∗</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7778em;vertical-align:-0.0833em;\"></span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\">im</span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">1</span></span></span></span>.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">proof_wanted</span><span class=\"w\"> </span><span class=\"n\">Polynomial</span><span class=\"bp\">.</span><span class=\"n\">ringKrullDim_le</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">ringKrullDim</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Polynomial</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ringKrullDim</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n</code></pre></div>\n<p>The proof is now finished and contains no sorrys, but I'm really hoping to get some suggestions on where to move the preliminary lemmas (since some will introduce new imports to existing files and I'm not sure if it's appropriate to do so) and whether we should split the existing lemmas into smaller pieces. </p>\n<p>We also proved that there's an <code>OrderIso</code> between fiber of a ring homomorphism and the prime spectrum of taking tensor by the residue field, but that construction is longer than I'd expected, so I'm wondering if I should split it into smaller useful lemmas. Thanks in advance!</p>",
        "id": 520656864,
        "sender_full_name": "Wang Jingting",
        "timestamp": 1748349084
    },
    {
        "content": "<p>Congratulations! I'm sure that Mathlib's <code>Counterexamples</code> folder would also love an example of a nonzero ring where <code>dim R[X] != 1 + dim R</code>! For many years I assumed that this was true.</p>",
        "id": 520690324,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1748358081
    },
    {
        "content": "<p>I wonder, is this inequality sharp? I.e., for every <code>n</code> is there a commutative ring <code>R</code> with <code>dim R = n</code> and <code>dim R[X] = 2 * n + 1</code>?</p>",
        "id": 520691773,
        "sender_full_name": "Thomas Browning",
        "timestamp": 1748358438
    },
    {
        "content": "<p>I recall seeing somewhere on mathoverflow that for any <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi><mo>&lt;</mo><mi>m</mi><mo>≤</mo><mn>2</mn><mi>n</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">n &lt; m \\le 2n + 1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5782em;vertical-align:-0.0391em;\"></span><span class=\"mord mathnormal\">n</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7719em;vertical-align:-0.136em;\"></span><span class=\"mord mathnormal\">m</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7278em;vertical-align:-0.0833em;\"></span><span class=\"mord\">2</span><span class=\"mord mathnormal\">n</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">1</span></span></span></span> you can find a ring such that <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>dim</mi><mo>⁡</mo><mi>R</mi><mo>=</mo><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">\\dim R = n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mop\">dim</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">n</span></span></span></span> and <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>dim</mi><mo>⁡</mo><mi>R</mi><mo stretchy=\"false\">[</mo><mi>X</mi><mo stretchy=\"false\">]</mo><mo>=</mo><mi>m</mi></mrow><annotation encoding=\"application/x-tex\">\\dim R[X] = m</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mop\">dim</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span><span class=\"mopen\">[</span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"mclose\">]</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">m</span></span></span></span>.</p>",
        "id": 520692041,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1748358505
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110038\">@Kevin Buzzard</span> <span class=\"user-mention\" data-user-id=\"253861\">@Thomas Browning</span> <span class=\"user-mention\" data-user-id=\"439483\">@Andrew Yang</span> <br>\n<a href=\"/user_uploads/3121/RdsOnteWMsKU2Ry1dV3zcMCo/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/RdsOnteWMsKU2Ry1dV3zcMCo/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"1224x805\" src=\"/user_uploads/thumbnail/3121/RdsOnteWMsKU2Ry1dV3zcMCo/image.png/840x560.webp\"></a></div><p>I did some googling and was led to <a href=\"https://mathoverflow.net/a/130790\">this MO answer</a> which linked me to <a href=\"https://www.jstor.org/stable/2373549\">this paper</a> which essentially contains the result above, which is a very explicit classification of the \"dimension sequences\" (i.e. dim R, dim R[X], dim R[X1,X2], ...) that are possible.</p>\n<p>I tried to look for examples mentioned in the paper but couldn't find any. I just saw that the existence results requires some field with large transcendence degree (so I think C/Q will work as an intermediate step)</p>",
        "id": 520693066,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1748358790
    },
    {
        "content": "<p>Yeah I'm not sure we should go this far :-) But just showing that adding one polynomial element can bump up dimension by more than 1 is already surprising, because this is geometrically counterintuitive (the fibres of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi><mi>p</mi><mi>e</mi><mi>c</mi><mo stretchy=\"false\">(</mo><mi>R</mi><mo stretchy=\"false\">[</mo><mi>X</mi><mo stretchy=\"false\">]</mo><mo stretchy=\"false\">)</mo><mo>→</mo><mi>S</mi><mi>p</mi><mi>e</mi><mi>c</mi><mo stretchy=\"false\">(</mo><mi>R</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">Spec(R[X])\\to Spec(R)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">Sp</span><span class=\"mord mathnormal\">ec</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span><span class=\"mopen\">[</span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"mclose\">])</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">Sp</span><span class=\"mord mathnormal\">ec</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span><span class=\"mclose\">)</span></span></span></span> are 1-dimensional so the dimension should have gone up by 1).</p>",
        "id": 520704889,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1748362045
    },
    {
        "content": "<p>Well, for the sharpness of this bound, <a href=\"https://math.stackexchange.com/questions/1267419/examples-of-rings-whose-polynomial-rings-have-large-dimension\">someone on MSE</a> quoted <a href=\"https://projecteuclid.org/euclid.pjm/1103044693\">this paper of Seidenberg</a> to show that for a fixed dimension dim R = d, the dimension of R[X] can take every value between d + 1 and 2d + 1.<br>\nAnd also in the MSE link above, there's a concrete construction of dim R = 1 and dim R[X] = 3.<br>\nI agree that it's a good idea to add this to the counterexample file, but sadly I'd have to go through my final exams first.</p>",
        "id": 520779444,
        "sender_full_name": "Wang Jingting",
        "timestamp": 1748392630
    },
    {
        "content": "<p>Yes don't let computer games derail your exams!</p>",
        "id": 520804630,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1748408877
    },
    {
        "content": "<p>It seems that there's some strange check errors in this PR about the checks. Bors reported a dependency loop in the PR, but it compiled fine locally. I tried rerunning the checks but the failure is still present. </p>\n<p>Does anyone know what I should do in this situation?</p>",
        "id": 522268857,
        "sender_full_name": "Wang Jingting",
        "timestamp": 1749015554
    },
    {
        "content": "<p>Weird. I don't know what is going on. Could you please merge master?</p>",
        "id": 522269840,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1749016143
    },
    {
        "content": "<p>OK, I now see the cycle locally, it seems to be because of some upstream commit introduced a new import that forms a cycle with the imports we have. I'll try to resolve it.</p>",
        "id": 522276471,
        "sender_full_name": "Wang Jingting",
        "timestamp": 1749019172
    },
    {
        "content": "<p>It's fixed now.</p>",
        "id": 522307579,
        "sender_full_name": "Wang Jingting",
        "timestamp": 1749028638
    },
    {
        "content": "<p>Thanks. <img alt=\":bors:\" class=\"emoji\" src=\"https://avatars.zulip.com/3121/emoji/images/dce2c3bb.png\" title=\"bors\"></p>",
        "id": 522337337,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1749037802
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/channel/144837-PR-reviews/topic/.2325201.20Upper.20bound.20of.20dimension.20of.20polynomial.20ring/near/520690324\">said</a>:</p>\n<blockquote>\n<p>Congratulations! I'm sure that Mathlib's <code>Counterexamples</code> folder would also love an example of a nonzero ring where <code>dim R[X] != 1 + dim R</code>! For many years I assumed that this was true.</p>\n</blockquote>\n<p>We have an example of <code>dim R = 1</code> but <code>dim R[X] = 3</code>in <a href=\"https://github.com/leanprover-community/mathlib4/pull/29497\">#29497</a> now!</p>",
        "id": 538600364,
        "sender_full_name": "Wang Jingting",
        "timestamp": 1757494949
    }
]