[
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/34083\">#34083</a> (easy)<br>\nAdd <code>Pi.mulSingle_eq_mulIndicator</code> and <code>Pi.single_eq_indicator</code> (via <code>@[to_additive]</code>), showing that on non-dependent functions:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">Pi</span><span class=\"bp\">.</span><span class=\"n\">mulSingle</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">mulIndicator</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">i</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span>\n<span class=\"n\">Pi</span><span class=\"bp\">.</span><span class=\"n\">single</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">indicator</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">i</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>This is the direct <code>Pi</code> analog of <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Data/Finsupp/Single.html#Finsupp.single_eq_set_indicator\"><code>Finsupp.single_eq_set_indicator</code></a>, without involving Finsupp.</p>",
        "id": 568613839,
        "sender_full_name": "Fengyang Wang",
        "timestamp": 1768681822
    },
    {
        "content": "<p>Quick question how do I change the topic label of a PR?</p>",
        "id": 568617971,
        "sender_full_name": "Fengyang Wang",
        "timestamp": 1768686238
    },
    {
        "content": "<p>I think I would have swapped the left and right hand sides, not sure if anyone else has thoughts</p>",
        "id": 568620500,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1768689123
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"307953\">Ruben Van de Velde</span> <a href=\"#narrow/channel/144837-PR-reviews/topic/Add.20Pi.2EmulSingle_eq_mulIndicator/near/568620500\">said</a>:</p>\n<blockquote>\n<p>I think I would have swapped the left and right hand sides, not sure if anyone else has thoughts</p>\n</blockquote>\n<p>Yah it makes sense to state a lemma like X_eq_Y where X is more type-native.</p>",
        "id": 568622014,
        "sender_full_name": "Fengyang Wang",
        "timestamp": 1768691062
    },
    {
        "content": "<p>Yeah, I think this should be called <code>mulIndicator_singleton</code> or <code>mulIndicator_singleton_eq_mulSingle</code> or similar</p>",
        "id": 568622185,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1768691315
    },
    {
        "content": "<p>And we should deprecate and flip the Finsupp lemma to be consistent</p>",
        "id": 568622197,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1768691328
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"214703\">@Yury G. Kudryashov</span>  committed and updated PR title/description</p>",
        "id": 568632409,
        "sender_full_name": "Fengyang Wang",
        "timestamp": 1768706509
    },
    {
        "content": "<p>Should we generalize it to <code>Set.indicator {i} f = Pi.single i (f i)</code>? Should we make it a <code>simp</code> lemma?</p>",
        "id": 568634957,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1768710346
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"214703\">Yury G. Kudryashov</span> <a href=\"#narrow/channel/144837-PR-reviews/topic/Add.20Pi.2EmulSingle_eq_mulIndicator/near/568634957\">said</a>:</p>\n<blockquote>\n<p>Should we generalize it to <code>Set.indicator {i} f = Pi.single i (f i)</code>? Should we make it a <code>simp</code> lemma?</p>\n</blockquote>\n<p>Good idea. Updated</p>\n<p>Also can make another PR (<a href=\"https://github.com/leanprover-community/mathlib4/pull/34095\">#34095</a>) about generalizing this in <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Data/Finsupp/Indicator.html#Finsupp.single_eq_indicator\">Mathlib.Data.Finsupp.Indicator</a></p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">single_eq_set_indicator'</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"bp\">⇑</span><span class=\"o\">(</span><span class=\"n\">single</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">indicator</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">a</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"n\">f</span>\n</code></pre></div>\n<p>Ok I'll actually replace this theorem with the more general version as all its use cases are in the same file that declares it</p>",
        "id": 568636472,
        "sender_full_name": "Fengyang Wang",
        "timestamp": 1768711736
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"214703\">@Yury G. Kudryashov</span>  Can't mark it with <code>simp</code>, it triggers error due to over simplification in <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/MeasureTheory/Measure/Haar/Unique.html\">Mathlib.MeasureTheory.Measure.Haar.Unique</a> line 486-487</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">convert</span><span class=\"w\"> </span><span class=\"n\">NNReal</span><span class=\"bp\">.</span><span class=\"n\">tendsto_coe</span><span class=\"bp\">.</span><span class=\"m\">2</span><span class=\"w\"> </span><span class=\"n\">T</span>\n<span class=\"n\">simp</span>\n<span class=\"bp\">^^^</span>\n</code></pre></div>",
        "id": 568638592,
        "sender_full_name": "Fengyang Wang",
        "timestamp": 1768713894
    },
    {
        "content": "<p>This usually means that we miss a <code>simp</code> lemma elsewhere. I'm looking into this.</p>",
        "id": 568639915,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1768715541
    },
    {
        "content": "<p>Fixed</p>",
        "id": 568641669,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1768717981
    },
    {
        "content": "<p>Sent to the merge queue</p>",
        "id": 568644817,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1768721337
    }
]