[
    {
        "content": "<p>Two PRs proving results on maximal acyclic subgraphs (cf <a href=\"#narrow/channel/252551-graph-theory/topic/Every.20connected.20graph.20has.20a.20spanning.20tree/with/558635405\">discussion here</a>):</p>\n<ul>\n<li><a href=\"https://github.com/leanprover-community/mathlib4/pull/32041\">#32041</a> proves that every acyclic subgraph <code>H ≤ G</code> can be extended to a maximal acyclic subgraph of <code>G</code>, using that the directed supremum of acyclic graphs is acyclic.</li>\n<li><a href=\"https://github.com/leanprover-community/mathlib4/pull/32043\">#32043</a> characterises maximal acyclic subgraphs <code>F</code> of <code>G</code> as those for which <code>F.Reachable = G.Reachable</code>.</li>\n</ul>\n<p>This is my first (hopefully!) contribution, so I am very grateful for any feedback.</p>\n<p>I notice that the results of <a href=\"https://github.com/leanprover-community/mathlib4/pull/32043\">#32043</a> overlap with <span class=\"user-mention\" data-user-id=\"933054\">@Snir Broshi</span> 's results in <a href=\"https://github.com/leanprover-community/mathlib4/pull/30640\">#30640</a>, which proves the forward direction for subgraphs of the complete graph. I have no intention of scooping anyone, please let me know if it would be more appropriate for me to close my version. (In particular, my helping lemma <code>IsAcyclic.add_edge_acyclic</code> is proved in a better form in his PR, so at very least that ought to be incorporated.)</p>\n<p>With these two PRs, it is straightforward to add the result that any graph contains a spanning forest, where we take that to mean a forest with the same reachability relation. Also, the converse of my characterisation of maximal acyclic subgraphs makes it relatively straightforward to define graphic matroids. If that's interesting I have it in an external repo.</p>",
        "id": 559005049,
        "sender_full_name": "Thomas Waring",
        "timestamp": 1763980545
    },
    {
        "content": "<p>Hello <span aria-label=\"wave\" class=\"emoji emoji-1f44b\" role=\"img\" title=\"wave\">:wave:</span><br>\nCommented on the linked thread, it looks like we're working on very similar things :)<br>\nVery cool theorems, I think proving <code>G.IsTree ↔ Nonempty V ∧ Maximal IsAcyclic G</code> as a special case of your <code>maximal_acyclic_iff_reachable_eq</code> is a good idea, we need to save the best parts of both PRs.<br>\nThough I do think working with <code>reachabilitySet</code> (<a href=\"https://github.com/leanprover-community/mathlib4/pull/30570\">#30570</a>) is the best, which isn't merged yet unfortunately.</p>",
        "id": 559128805,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1764010933
    },
    {
        "content": "<p>A PR that uses <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=SimpleGraph.Connected.exists_isTree_le#doc\">docs#SimpleGraph.Connected.exists_isTree_le</a> was merged <a href=\"https://github.com/leanprover-community/mathlib4/pull/29309\">#29309</a>, I wonder if after you remove the <code>Finite</code> assumption we can remove it from the new statements as well (<a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=SimpleGraph.Connected.exists_connected_induce_compl_singleton_of_finite_nontrivial#doc\">docs#SimpleGraph.Connected.exists_connected_induce_compl_singleton_of_finite_nontrivial</a> and <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=SimpleGraph.Connected.exists_preconnected_induce_compl_singleton_of_finite#doc\">docs#SimpleGraph.Connected.exists_preconnected_induce_compl_singleton_of_finite</a>).</p>",
        "id": 560289965,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1764125274
    },
    {
        "content": "<p>No that is impossible: consider the standard Cayley graph of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">Z</mi></mrow><annotation encoding=\"application/x-tex\">\\Z</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6889em;\"></span><span class=\"mord mathbb\">Z</span></span></span></span>, no vertex can be removed without disconnecting the graph</p>",
        "id": 560309112,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1764135945
    },
    {
        "content": "<p>Updates:</p>\n<ul>\n<li><a href=\"https://github.com/leanprover-community/mathlib4/pull/32043\">#32043</a> is open, characterising maximal acyclic subgraphs by their reachability relation.</li>\n<li>Since <a href=\"https://github.com/leanprover-community/mathlib4/pull/32041\">#32041</a> was merged, I opened <a href=\"https://github.com/leanprover-community/mathlib4/pull/33118\">#33118</a> which shows that every graph has a spanning forest (tree).<br>\nCC <span class=\"user-mention\" data-user-id=\"240862\">@Oliver Nash</span> who reviewed the zorn-y PR, and <span class=\"user-mention\" data-user-id=\"246273\">@Bhavik Mehta</span> who was looking at some similar results — if either of you are interested &amp; have capacity :-)</li>\n</ul>",
        "id": 564812221,
        "sender_full_name": "Thomas Waring",
        "timestamp": 1766218709
    },
    {
        "content": "<p>Nice! Do you happen to know which lemmas from <a href=\"https://github.com/leanprover-community/mathlib4/pull/30640\">#30640</a> are already covered by your PRs?</p>",
        "id": 564812599,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1766219208
    },
    {
        "content": "<p>Yep, I have in <a href=\"https://github.com/leanprover-community/mathlib4/pull/32043\">#32043</a></p>\n<ul>\n<li>your <code>IsAcyclic.isAcyclic_sup_fromEdgeSet_of_not_reachable</code> is my <code>IsAcyclic.add_edge_acyclic</code> (possibly your name is better), and</li>\n<li>your <code>isTree_iff_maximal_isAcyclic</code> is my <code>maximal_isAcyclic_iff_isTree</code>, derived as a special case of</li>\n</ul>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">Connected</span><span class=\"bp\">.</span><span class=\"n\">maximal_le_isAcyclic_iff_isTree</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">T</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">SimpleGraph</span><span class=\"w\"> </span><span class=\"n\">V</span><span class=\"o\">}</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">hG</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"bp\">.</span><span class=\"n\">Connected</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hT</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">T</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">  </span><span class=\"n\">Maximal</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">H</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">H</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">IsAcyclic</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">T</span><span class=\"w\"> </span><span class=\"bp\">↔</span><span class=\"w\"> </span><span class=\"n\">T</span><span class=\"bp\">.</span><span class=\"n\">IsTree</span>\n</code></pre></div>\n<p>which in turn follows easily from my main result</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">maximal_isAcyclic_iff_reachable_eq</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">F</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">SimpleGraph</span><span class=\"w\"> </span><span class=\"n\">V</span><span class=\"o\">}</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">hF</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">F</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">F</span><span class=\"bp\">.</span><span class=\"n\">IsAcyclic</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">  </span><span class=\"n\">Maximal</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">H</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">H</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">IsAcyclic</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">F</span><span class=\"w\"> </span><span class=\"bp\">↔</span><span class=\"w\"> </span><span class=\"n\">F</span><span class=\"bp\">.</span><span class=\"n\">Reachable</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"bp\">.</span><span class=\"n\">Reachable</span>\n</code></pre></div>",
        "id": 564813173,
        "sender_full_name": "Thomas Waring",
        "timestamp": 1766219906
    },
    {
        "content": "<p>&amp; finally <a href=\"https://github.com/leanprover-community/mathlib4/pull/33118\">#33118</a> is ready for review, showing the promised results that every graph (resp connected graph) has a spanning forest (resp tree) — thanks to <span class=\"user-mention\" data-user-id=\"240862\">@Oliver Nash</span> for fixing the CI issue with the previous pr :))</p>",
        "id": 566125970,
        "sender_full_name": "Thomas Waring",
        "timestamp": 1767418786
    },
    {
        "content": "<p>gentle bump for <a href=\"https://github.com/leanprover-community/mathlib4/pull/33118\">#33118</a> if anyone has capacity to review (<span class=\"user-mention\" data-user-id=\"240862\">@Oliver Nash</span> or <span class=\"user-mention\" data-user-id=\"246273\">@Bhavik Mehta</span> who was assigned by the algorithm)</p>",
        "id": 573788580,
        "sender_full_name": "Thomas Waring",
        "timestamp": 1771001936
    },
    {
        "content": "<p>thanks for the ping, will try to look at this today!</p>",
        "id": 573789766,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1771002266
    },
    {
        "content": "<p>I’m afraid I’m traveling without a laptop so I can’t review but I will do so next week if this is still pending.</p>",
        "id": 573801852,
        "sender_full_name": "Oliver Nash",
        "timestamp": 1771006030
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"240862\">Oliver Nash</span> <a href=\"#narrow/channel/144837-PR-reviews/topic/Results.20on.20maximal.20acyclic.20subgraphs/near/573801852\">said</a>:</p>\n<blockquote>\n<p>I’m afraid I’m traveling without a laptop so I can’t review but I will do so next week if this is still pending.</p>\n</blockquote>\n<p>No problem all sorted — enjoy your break :-)</p>",
        "id": 573880972,
        "sender_full_name": "Thomas Waring",
        "timestamp": 1771061401
    }
]