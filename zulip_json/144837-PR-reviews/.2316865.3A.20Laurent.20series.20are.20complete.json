[
    {
        "content": "<p>Another PR towards the proof that <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>K</mi><mo stretchy=\"false\">(</mo><mo stretchy=\"false\">(</mo><mi>X</mi><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">K((X))</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">K</span><span class=\"mopen\">((</span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"mclose\">))</span></span></span></span> is the <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>X</mi></mrow><annotation encoding=\"application/x-tex\">X</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span></span></span></span>-adic completion of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>K</mi><mo stretchy=\"false\">(</mo><mi>X</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">K(X)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">K</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"mclose\">)</span></span></span></span>: this one proves they are complete (the next one, density of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>K</mi><mo stretchy=\"false\">(</mo><mi>X</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">K(X)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">K</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"mclose\">)</span></span></span></span> and the final the isomorphism between completion and <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>K</mi><mi>X</mi><mo stretchy=\"false\">(</mo><mo stretchy=\"false\">(</mo><mi>X</mi><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">KX((X))</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">K</span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"mopen\">((</span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"mclose\">))</span></span></span></span> with consequences on power series). I also ping <span class=\"user-mention\" data-user-id=\"110031\">@Patrick Massot</span> who had comments on the lemmas concerning discrete uniformities.</p>",
        "id": 471426046,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1726732437
    },
    {
        "content": "<p>How will this interact with the case of multivariate power series?</p>",
        "id": 471537739,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1726768641
    },
    {
        "content": "<p>Well, it depends on what you call \"interact\" in this setting. The topology here is defined via the rank-one valuation attached to the prime ideal <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mi>X</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(X)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"mclose\">)</span></span></span></span>, but for multivariate ones it will be rather different, no? In the finitely many variable case it will still be attached to a maximal ideal, but that will not be a height one prime and for the time being almost nothing is in mathlib aobut <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"fraktur\">m</mi></mrow><annotation encoding=\"application/x-tex\">\\mathfrak{m}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4753em;\"></span><span class=\"mord mathfrak\">m</span></span></span></span>-adic completions beyond the case of height one primes.</p>",
        "id": 471538559,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1726768898
    },
    {
        "content": "<p>But perhaps you had something else in mind...</p>",
        "id": 471538720,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1726768931
    },
    {
        "content": "<p>And BTW: how would you define multivariate Laurent series? As Hahn series with index group  <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi mathvariant=\"double-struck\">Z</mi><mi>n</mi></msup></mrow><annotation encoding=\"application/x-tex\">\\mathbb{Z}^n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6889em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">Z</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span></span></span></span></span></span></span></span>?</p>",
        "id": 471539463,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1726769201
    },
    {
        "content": "<p>For multivariate power series, there is the product topology of the topologies on the coefficients defined in <a href=\"https://github.com/leanprover-community/mathlib4/pull/14866\">#14866</a>, which is complete if the topology on coefficients is complete. <br>\nWhen the coefficients have the discrete topology, gives the topology defined by the ideal generated by indeterminates, as shown in <a href=\"https://github.com/leanprover-community/mathlib4/pull/15007\">#15007</a>.  <br>\nFor me, the ring of Laurent series is just the localization of the ring of multivariate power series by the multiplicative set generated by indeterminates. (It is not a field when there are more than 2 variables.) Maria Ines and I haven't defined the natural topology on that beast (I don't think we need it) — it is the inductive topology of product topologies when you control the support. And it would be complete if the coefficients are complete.</p>",
        "id": 471684103,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1726826769
    },
    {
        "content": "<p>I see! . Our work relies heavily on <span class=\"user-mention\" data-user-id=\"406490\">@María Inés de Frutos Fernández</span> 's work on the valuation attached to a height-one prime, and all you tell me is well beyond this setting. I would say that for the time being there is not too much connection, and I honestly do not know how to bridge the gap soon. Do you think this is problematic?</p>",
        "id": 471687231,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1726827654
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"130609\">@Antoine Chambert-Loir</span> , do you have comments on this PR or do you think it is OK to proceed?</p>",
        "id": 472219247,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1727095326
    },
    {
        "content": "<p>Thanks for pinging me again, I added some comments. I hope that won't be too much work. That mustn't be.</p>",
        "id": 472247072,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1727101432
    },
    {
        "content": "<p>Thanks! Do not worry for the work, good comments are always welcome <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 472249934,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1727102075
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"112680\">@Johan Commelin</span> It seems that <span class=\"user-mention\" data-user-id=\"130609\">@Antoine Chambert-Loir</span> agreed with all changes in this PR, so I think you can have another look.</p>",
        "id": 474024243,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1727785591
    },
    {
        "content": "<p>Thanks for the ping. I had some trivial comments. Please ping me again. This is almost ready to be merged.</p>",
        "id": 474038923,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1727789471
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"112680\">@Johan Commelin</span>  I have addressed all your comments. During the discussions with Antoine, I came up with (and formalized) an example of a uniformity on <code>ℕ</code> that induces the discrete topology but with respect to which there is a Cauchy filter that is not eventually constant (aka not contained in a principal one). I was thinking about adding this to the Counterexample folder. Do you think it's appropriate? It is a counterexample to the \"hope\" that having the discrete topology is enough for the equivalence \"Cauchy iff eventually constant\"; but I have never opened a PR to \"Counterexamples\" and I do not know what the policy is.</p>",
        "id": 474058519,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1727794653
    },
    {
        "content": "<p>Sounds good to me. Feel free to add ample docstrings and motivation (and counter-motivation??  <span aria-label=\"rofl\" class=\"emoji emoji-1f923\" role=\"img\" title=\"rofl\">:rofl:</span>)</p>",
        "id": 474058841,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1727794734
    },
    {
        "content": "<p>OK, I'll try.</p>",
        "id": 474058909,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1727794752
    },
    {
        "content": "<p>To me, this looks like a great example of a counterexample.</p>",
        "id": 474066204,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1727796700
    },
    {
        "content": "<p>Is there a way to see how the doc will deploy on a file in a PR? Or is the doc only built after a file is merged into <code>master</code>?</p>",
        "id": 474113951,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1727811619
    },
    {
        "content": "<p>I think that <a href=\"https://observablehq.com/@bryangingechen/github-lean-doc-preview?collection=@bryangingechen/lean\">Bryan's Observable notebook</a> is the usual reply and the standard caveat is that it may not work as intended.</p>",
        "id": 474119661,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1727813737
    },
    {
        "content": "<p>Everyone who used it, though, seems to have found that it was great!</p>",
        "id": 474119687,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1727813750
    },
    {
        "content": "<p>Oh, thanks! I was not aware, I will certainly give it a try (tomorrow... <span aria-label=\"meal\" class=\"emoji emoji-1f37d\" role=\"img\" title=\"meal\">:meal:</span> )</p>",
        "id": 474119842,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1727813808
    },
    {
        "content": "<p>OK, opened <a href=\"https://github.com/leanprover-community/mathlib4/pull/17417\">#17417</a> with the counterexample. I take this opportunity to ask whether we do not want to reorganize a bit the <code>Counterexample</code> folder, so that the files are organized according to their field (we could have the same folder structure as in mathlib). <span class=\"user-mention\" data-user-id=\"112680\">@Johan Commelin</span> I hope that the doc is good. Let me also ping <span class=\"user-mention\" data-user-id=\"321459\">@Damiano Testa</span> who showed some interest.</p>",
        "id": 474836680,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1728052430
    },
    {
        "content": "<p>The PR is ready.</p>",
        "id": 475096980,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1728218003
    },
    {
        "content": "<p>Thanks! The doc looks good to me, but I would put an empty line after the subheadings.</p>\n<p>Also, Anatole raised a good question</p>",
        "id": 475318858,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1728313547
    },
    {
        "content": "<p>Added an empty line and addressed <span class=\"user-mention\" data-user-id=\"268315\">@Anatole Dedecker</span> 's question <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 475533646,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1728384865
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"112680\">@Johan Commelin</span> <span class=\"user-mention\" data-user-id=\"268315\">@Anatole Dedecker</span> OK, I have integrated Anatole's example in <a href=\"https://github.com/leanprover-community/mathlib4/pull/17417\">#17417</a> if you want to have a look to this counterexample again.</p>",
        "id": 488063499,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1733912821
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"300245\">@Filippo A. E. Nuccio</span> So I take it that the PR should no longer be <code>awaiting-author</code>?</p>",
        "id": 488083934,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1733919529
    },
    {
        "content": "<p>Maybe I missed it, but did you formalize</p>\n<blockquote>\n<p>So it would feel more instructive to read a lemma saying \"any non-closed but discrete subset of a uniform space is a counter example\"</p>\n</blockquote>\n<p>as <span class=\"user-mention silent\" data-user-id=\"268315\">Anatole Dedecker</span> suggested <a href=\"https://github.com/leanprover-community/mathlib4/pull/17417#issuecomment-2400756222\">here</a>?</p>",
        "id": 488084499,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1733919685
    },
    {
        "content": "<p>No, honestly I did not, I was more focusing on a concrete counterexample (to my taste, it is instructive to prove abstract results and to see very explicit counterexamples).</p>",
        "id": 488114080,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1733927955
    },
    {
        "content": "<p>And I have removed the <code>awaiting-author</code>, sorry for forgetting this.</p>",
        "id": 488114168,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1733927983
    },
    {
        "content": "<p>If Anatole or someone else wants to add to it the general lemma, why not (but it would be a good mathlib lemma, I believe, rather than for the <code>counterexamples</code> folder)</p>",
        "id": 488114335,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1733928026
    },
    {
        "content": "<p>Got it. Will borsify now.</p>",
        "id": 488557901,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1733983127
    }
]