[
    {
        "content": "<p>I have a big work in progress towards Riemannian manifolds in <a href=\"https://github.com/leanprover-community/mathlib4/pull/25347\">#25347</a>. It will need quite a long string of PRs to get there. I will list the currently opened PRs here as a subtle hint :-) Currently, there are two kind of prerequisites, the ones on differential geometry, and another bunch towards a good change of variables formula in dimension 1 for monotone maps (to be able to talk about path length and reparameterize the paths nicely).</p>",
        "id": 524656474,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1750236067
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/25383\">#25383</a> (+273/-29): continuity statements for the bundle of continuous linear maps</p>",
        "id": 524656579,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1750236105
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/25768\">#25768</a> (+33/-2): derivative of continuous affine maps</p>",
        "id": 524656654,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1750236133
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/25771\">#25771</a> (+32/-12): drop an assumption in congruence lemma for manifold derivatives</p>",
        "id": 524656713,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1750236159
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/25824\">#25824</a> (+164/-63): require that the range of a real or complex model with corners is convex</p>",
        "id": 524656809,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1750236191
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/25865\">#25865</a> (+420/-138, but completely mechanical and boring): add <code>fun_</code> variants for Fréchet derivative of addition and like</p>",
        "id": 524656924,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1750236234
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/26066\">#26066</a> (+70/-3): missing API for measure theory</p>",
        "id": 524657017,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1750236263
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/26068\">#26068</a> (+135/-3): the derivative of a monotone function is nonnegative</p>",
        "id": 524657095,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1750236288
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/26069\">#26069</a> (+114/-66): split the file <code>MeasureTheory.Function.Jacobian</code></p>",
        "id": 524657190,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1750236321
    },
    {
        "content": "<p>(And yes, I'm aware that's a long list!)</p>",
        "id": 524657273,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1750236348
    },
    {
        "content": "<p>I'm only seeing this 12 hours later and it looks like a very short list now :-)</p>",
        "id": 524780927,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1750279413
    },
    {
        "content": "<p>I'm assuming we'll get some more PRs tomorrow/soon :-)</p>",
        "id": 524781067,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1750279487
    },
    {
        "content": "<p>The reviewers have been incredibly efficient on the list of PRs above, thanks a lot of that. Let's add a few more PRs to the list, and see if things go as smoothly :-)</p>",
        "id": 524823196,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1750315190
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/26112\">#26112</a> (+173/-19): applying a smooth hom bundle section to a smooth section gives a smooth section</p>",
        "id": 524823271,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1750315222
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/26113\">#26113</a> (+340/-55): more API for monotone functions wrt topology</p>",
        "id": 524823338,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1750315256
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/26121\">#26121</a> (+36/-13): more uses of <code>simps</code> in fiber bundles and vector bundles</p>",
        "id": 524823381,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1750315287
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110050\">@Sébastien Gouëzel</span> can I ask, is your use of convexity in relation to invariance of domain and the inverse function theorem?</p>",
        "id": 524965915,
        "sender_full_name": "Jeremy Ravenel",
        "timestamp": 1750382614
    },
    {
        "content": "<p>The answer is no. The issue is that, even for a nice path-connected subset of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi mathvariant=\"double-struck\">R</mi><mn>2</mn></msup></mrow><annotation encoding=\"application/x-tex\">\\R^2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">R</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span> (say equal to the closure of its interior), the topology defined by the geodesic distance may be different from the topology defined by the original distance, if the set is not convex.</p>",
        "id": 524981253,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1750398387
    },
    {
        "content": "<p>Jeremy, this is all about <em>differential</em> topology, not topological manifolds, so the invariance of domain has nothing to do here. Invariance of domain is crucial to ensure that topological manifolds have a (locally) unique dimension. But the analogous claim for differentiable manifolds trivially reduces to linear algebra because the differential of a diffeomorphism is a linear isomorphism.</p>",
        "id": 524991525,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1750404949
    },
    {
        "content": "<p>Next PRs:</p>",
        "id": 525009530,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1750412503
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/26198\">#26198</a> (+323/-2): change of variables formula in integrals for monotone functions.<br>\nThis one should also be useful to <span class=\"user-mention\" data-user-id=\"214703\">@Yury G. Kudryashov</span>  for reparameterization of path integrals after <a href=\"https://github.com/leanprover-community/mathlib4/pull/24754\">#24754</a></p>",
        "id": 525009823,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1750412635
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/26197\">#26197</a> (+244/-2): continuous Riemannian bundles<br>\nThis one doesn't build currently, because the <code>simpNF</code> linter complains that it reaches a timeout in an unrelated lemma <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=ContinuousLinearMap.norm_smulRightL#doc\">docs#ContinuousLinearMap.norm_smulRightL</a>. Probably this means that I've made instance search slightly more costly, and that it's passed the threshold. I tried to improve things by making the instances I add with a very small priority, and to make several definitions reducible as in the <code>reducible non-instances</code> library note. To no avail. I don't know how to debug what is going on: if I create a new file importing all of mathlib and copy inside it the content of <code>ContinuousLinearMap.norm_smulRightL</code>, then everything is quick (no timeouts).</p>\n<p>There is an easy but bad fix which is to just <code>nolint simpNF</code> this lemma, but it's probably not a good idea performancewise, because it means something fishy is going on somewhere. If anyone has an idea to improve the situation, I'm all ears. Otherwise, I'll go with my bad fix.</p>",
        "id": 525010865,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1750413063
    },
    {
        "content": "<p>I've checked the timings, and they vary very little between before and after the PR. So in fact I think nolinting the lemma is the right thing to do. I've done it in the PR, which is now ready for review.</p>",
        "id": 525037017,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1750423754
    },
    {
        "content": "<p>Let me link a few more recent PRs, for easier finding:</p>",
        "id": 525699660,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1750853836
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/26356\">#26356</a> (+180/-173): refactor: move stuff on addition of <code>iInf</code> and <code>iSup</code> in <code>ENNReal</code> to a common place</p>",
        "id": 525699741,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1750853866
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/26362\">#26362</a> (+60/-15) preliminary refactoring; weaken assumption to <code>NullMeasurableSet</code> in some results on change of variables in integrals</p>",
        "id": 525699850,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1750853904
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/26361\">#26361</a> (+23) the function <code>smoothTransition</code> is monotone</p>",
        "id": 525699922,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1750853928
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/26355\">#26355</a> (+690/-290) add <code>fun_</code> versions of many lemmas about one-dimensional derivatives</p>",
        "id": 525700178,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1750854006
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"634338\">Michael Rothgang</span> <a href=\"#narrow/channel/144837-PR-reviews/topic/Riemannian.20manifolds/near/525700178\">said</a>:</p>\n<blockquote>\n<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/26355\">#26355</a> (+679/-288) add <code>fun_</code> versions of many lemmas about one-dimensional derivatives</p>\n</blockquote>\n<p><del>currently doesn't pass CI yet; I maintainer merge'd an old version: taking a look now</del> Everything builds and tests fine; ought to lint.<br>\nRe-reviewed everything, still looks good.</p>",
        "id": 525700236,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1750854029
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/26411\">#26411</a> (+44/-0): add <code>iInf</code> results on <code>ENNReal</code>, matching existing <code>iSup</code> ones</p>",
        "id": 525908637,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1750945508
    },
    {
        "content": "<p>May I just say a big thank you for this massive undertaking. Been looking forward to this for a long time!</p>",
        "id": 526000194,
        "sender_full_name": "Winston Yin (尹維晨)",
        "timestamp": 1750987794
    },
    {
        "content": "<p>Here is a new list of PRs, to keep the reviewers busy :-)</p>",
        "id": 526249864,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1751178310
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/26500\">#26500</a> (+206/-2): more properties of the manifold structure on <code>Icc</code></p>",
        "id": 526249890,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1751178352
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/26501\">#26501</a> (+65/-7): more API on manifolds</p>",
        "id": 526249920,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1751178385
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/26502\">#26502</a> (+49/-10): monotonicity of <code>lineMap</code></p>",
        "id": 526249940,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1751178419
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/26503\">#26503</a> (+77/-0): constructor for emetric space with a preexisting topology</p>",
        "id": 526249983,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1751178452
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/26504\">#26504</a> (+34/-3): the image of an interval under a continuous monotone map is an interval</p>",
        "id": 526250000,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1751178484
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/26505\">#26505</a> (+244/-1): in a continuous Riemannian bundle, the trivialization at a point is locally bounded in norm</p>",
        "id": 526250025,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1751178518
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/26506\">#26506</a> (+201/-0): smooth Riemannian bundles</p>",
        "id": 526250054,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1751178558
    },
    {
        "content": "<p>Again I'm really aware that this is a long list. The good news is that the final target in the list, <a href=\"https://github.com/leanprover-community/mathlib4/pull/25347\">#25347</a>, builds fully and contains the theorem I wanted to prove (the distance coming from a Riemannian metric is indeed a distance, and it defines the same topology as the original one). This proves that the API is working fine to prove nontrivial results, so all that is left is to integrate all this into mathlib.</p>",
        "id": 526250172,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1751178696
    },
    {
        "content": "<p>No worries; I'm glad Patrick and I have some work to do again :-)</p>",
        "id": 526251666,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1751180879
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110050\">@Sébastien Gouëzel</span> could you clarify the current status of this effort? Do you intend to cut <a href=\"https://github.com/leanprover-community/mathlib4/pull/25347\">#25347</a> into more pieces? Or are you now expecting a review? Note it still has the WIP label.</p>",
        "id": 527267454,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1751707759
    },
    {
        "content": "<p>I'm still cutting it into pieces, hence the WIP. The next one is <a href=\"https://github.com/leanprover-community/mathlib4/pull/26778\">#26778</a>.</p>",
        "id": 527267492,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1751707809
    },
    {
        "content": "<p>And many thanks for all the reviews, this is getting merged to mathlib at a really impressive pace!</p>",
        "id": 527267520,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1751707854
    },
    {
        "content": "<p>It really really help that Michael and I are both in Orsay with time and the explicit goal of doing differential geometry.</p>",
        "id": 527267999,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1751708579
    },
    {
        "content": "<p>This allows us to stay focused on this area and not forget the big picture while moving from one PR to the next, and presumably it’s the same for you as an author.</p>",
        "id": 527268025,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1751708631
    },
    {
        "content": "<p>In an ideal world this would be the situation for every big push to a specific area of Mathlib.</p>",
        "id": 527268047,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1751708659
    },
    {
        "content": "<p>Being able to talk to another reviewer while reviewing is really helpful.</p>",
        "id": 527268204,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1751708839
    },
    {
        "content": "<p>I very much agree: the past weeks are quite possibly my most productive ones this year.</p>",
        "id": 527292164,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1751733871
    },
    {
        "content": "<p>I wonder if organising a \"mathlib differential geometry workshop\", where people come together for e.g. a week with the explicit goal of making progress would help. (Though being in Orsay for several weeks really helps; one week might possibly be too short.)<br>\nOr should we have differential geometry parties, to meet virtually and e.g. review a stack of PRs, or discuss difficult issues? (Lower barrier to entry, can be repeated more often, but same-room-ness is harder to approximate online.)</p>",
        "id": 527292291,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1751734006
    },
    {
        "content": "<p>I think topical workshops are great! We've had several in the algebraic geometry corner of maths, and they were very productive.</p>",
        "id": 527320934,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1751775048
    },
    {
        "content": "<p>We had a very productive algebraic geometry workshop at AIM in California, you could try for a differential geometry one. I didn't really want to go to California so we had it online. The cohomology workshop in Banff was in person though.</p>",
        "id": 527328097,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1751784905
    },
    {
        "content": "<p>I would love a differential geometry workshop. Also I have my metric and connections (the usual Levi-Civita and what I call the Mercator connection) ready to try out via Christoffel symbols (for the metric) and connection coefficients (for the connections) :-)</p>",
        "id": 527333127,
        "sender_full_name": "Dominic Steinitz",
        "timestamp": 1751791295
    },
    {
        "content": "<p>I think that one thing which made the algebraic geometry workshop so interesting was that as well as lean experts in algebraic geometry there were also people like Ravi Vakil who knew less about lean but had very clear ideas about what theories should be developed and in what order. So if you go for it I would definitely sell it as being appropriate for differential geometers even if they know no lean and then just make sure internally that the lean diff geom experts can all make it</p>",
        "id": 527345394,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1751806433
    },
    {
        "content": "<p>The final PR integrating Riemannian manifolds in Mathlib is ready for review, at <a href=\"https://github.com/leanprover-community/mathlib4/pull/25347\">#25347</a>. It's a little bit long because it mixes a part on definitions, and a part proving a non-trivial theorem (the topology coming from the distance associated to a Riemannian metric coincides with the initial topology). I could split it in two, but I think that proving a nontrivial theorem shows that the design just works. Tell me if you want me to split it!</p>\n<p>And many thanks to the reviewers who have already looked at a lot of PRs for this project!</p>",
        "id": 529352849,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1752784952
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110050\">@Sébastien Gouëzel</span> could you move that branch to your fork?</p>",
        "id": 529443659,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1752838118
    },
    {
        "content": "<p>Sure. <a href=\"https://github.com/leanprover-community/mathlib4/pull/27250\">#27250</a>.</p>",
        "id": 529447554,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1752839942
    },
    {
        "content": "<p>Ok, now both versions have comments…</p>",
        "id": 529523154,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1752870717
    }
]