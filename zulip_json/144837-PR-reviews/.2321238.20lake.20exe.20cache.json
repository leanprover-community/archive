[
    {
        "content": "<p>Would somebody have time to look at <a href=\"https://github.com/leanprover-community/mathlib4/pull/21822\">#21822</a>? The PR got its last review about a month ago by Eric, but it would be very much appreciated if it could be looked at and tested again :)</p>\n<p>This PR extends the arguments to <code>lake exe cache</code> so that both of theses are valid inputs:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"n\">exe</span><span class=\"w\"> </span><span class=\"n\">cache</span><span class=\"w\"> </span><span class=\"n\">get</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Analysis</span><span class=\"bp\">.</span><span class=\"n\">Convolution</span>\n<span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"n\">exe</span><span class=\"w\"> </span><span class=\"n\">cache</span><span class=\"w\"> </span><span class=\"n\">get</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">/</span><span class=\"n\">Analysis</span><span class=\"bp\">/</span><span class=\"n\">Convolution</span><span class=\"bp\">.</span><span class=\"n\">lean</span>\n</code></pre></div>\n<p>currently only the latter works.</p>\n<p>This PR is part of a series tracked in <a href=\"https://github.com/leanprover-community/mathlib4/pull/21238\">#21238</a> which aims at allowing <code>lake exe cache get MyProject.File1</code> which would only download the relevant part of mathlib for downstream projects.</p>",
        "id": 508706543,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1743154130
    },
    {
        "content": "<p>Last time I tried to review this, my impression was I need to understand and page in all of the core cache logic. If need be, I can try again, towards the end of next week. (I have another long review planned for next week, which is waiting even longer.) If nothing happened by then, feel free to ping me then.</p>",
        "id": 508730219,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1743161199
    },
    {
        "content": "<p>Sorry for dropping the ball on this chain of PRs!</p>",
        "id": 508734346,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1743162503
    },
    {
        "content": "<p>I would love <code>lake build Mathlib/Analysis/Convolution.lean</code>. Is this on the roadmap? I always get all cache even when debugging but sometimes when debugging with a dirty mathlib I just want to build one file and tab completion would be nice.</p>",
        "id": 508859258,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1743203375
    },
    {
        "content": "<p>Well, that's not on the Jon's roadmap for <code>mathlib4/Cache</code> on account of the command not starting with <code>lake exe cache</code>!</p>",
        "id": 508861933,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1743205129
    },
    {
        "content": "<p>Well let me register my interest in there being a future version of this for <code>lake build</code> :-)</p>",
        "id": 508863073,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1743205922
    },
    {
        "content": "<p>That's tracked at <a href=\"https://github.com/leanprover/lean4/pull/2756\">lean4#2756</a></p>",
        "id": 508864537,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1743206995
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110038\">@Kevin Buzzard</span> For now, I use the following wrapper as a workaround:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">#!/</span><span class=\"n\">usr</span><span class=\"bp\">/</span><span class=\"n\">bin</span><span class=\"bp\">/</span><span class=\"n\">env</span><span class=\"w\"> </span><span class=\"n\">bash</span>\n\n<span class=\"n\">set</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">euo</span><span class=\"w\"> </span><span class=\"n\">pipefail</span>\n\n<span class=\"bp\">#</span><span class=\"w\"> </span><span class=\"n\">Replace</span><span class=\"w\"> </span><span class=\"n\">every</span><span class=\"w\"> </span><span class=\"bp\">'/'</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"bp\">'.'</span>\n<span class=\"n\">modified_args</span><span class=\"bp\">=</span><span class=\"s2\">\"${@//</span><span class=\"err\">\\</span><span class=\"s2\">//.}\"</span>\n\n<span class=\"bp\">#</span><span class=\"w\"> </span><span class=\"n\">Remove</span><span class=\"w\"> </span><span class=\"n\">every</span><span class=\"w\"> </span><span class=\"bp\">'.</span><span class=\"n\">lean'</span><span class=\"w\"> </span><span class=\"n\">suffix</span>\n<span class=\"n\">modified_args</span><span class=\"bp\">=</span><span class=\"s2\">\"${modified_args//.lean/}\"</span>\n\n<span class=\"bp\">#</span><span class=\"w\"> </span><span class=\"n\">Call</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">lake'</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">modified</span><span class=\"w\"> </span><span class=\"n\">arguments</span>\n<span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"n\">modified_args</span>\n</code></pre></div>",
        "id": 509117235,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1743405193
    },
    {
        "content": "<p>Save this somewhere in your <code>$PATH</code> as <code>fake</code>, and then you can call</p>\n<div class=\"codehilite\" data-code-language=\"Bash Session\"><pre><span></span><code><span class=\"gp\">$ </span>fake<span class=\"w\"> </span>build<span class=\"w\"> </span>Mathlib/Analysis/Convolution.lean\n</code></pre></div>",
        "id": 509117337,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1743405235
    },
    {
        "content": "<p>Hopefully this will be fixed in the near future in <code>lake</code> itself.</p>",
        "id": 509117421,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1743405256
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"315577\">@Mac Malone</span> is focussing more on <code>lake</code> this quarter (although I think mostly on replacing <code>lake exe cache</code> with a built-in version), but may be able to say something about the timeline for this one, now that the new quarter is starting.</p>",
        "id": 509150421,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1743414509
    },
    {
        "content": "<p>Thanks everybody! And, <span class=\"user-mention\" data-user-id=\"310045\">@Eric Wieser</span>, I have zero expectations that you'd be the person to review every PR just because you did the first few! I've very much appreciated your effort and I know you have a lot of other things you're doing  <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span> </p>\n<p>I've now added review comments to <a href=\"https://github.com/leanprover-community/mathlib4/pull/21834\">#21834</a> too, which is the next PR and which only refactors code without changing any external behaviour of <code>cache</code>. I'm happy to hear if these review comments by myself are actually something that's useful for a reviewer or not.</p>",
        "id": 509652875,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1743588240
    }
]