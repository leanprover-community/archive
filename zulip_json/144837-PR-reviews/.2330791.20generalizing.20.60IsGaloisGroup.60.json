[
    {
        "content": "<p>PR <a href=\"https://github.com/leanprover-community/mathlib4/pull/30791\">#30791</a> generalizes <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=IsGaloisGroup#doc\">docs#IsGaloisGroup</a> from fields to rings (with <code>IsGaloisGroup G A B</code> implying <code>IsGaloisGroup G Frac(A) Frac(B)</code>, and the converse holding at least for AKLB steups in algebraic number theory).</p>\n<p>The motivation is that there are many results in number theory where you only care about a Galois group acting on the rings of integers, so theorems become more clunky to state if you have to introduce the fields into the picture. For instance, the theorem <code>card_inertia_eq_ramificationIdxIn</code> in PR <a href=\"https://github.com/leanprover-community/mathlib4/pull/30675\">#30675</a> currently assumes <code>IsGaloisGroup G K L</code> even though <code>K</code> and <code>L</code> don't feature in the statement of the theorem.</p>\n<p>So it seems like this generalization costs nothing and will be an improvement to ANT in mathlib, but the issue is one of naming. <span class=\"user-mention\" data-user-id=\"130384\">@Riccardo Brasca</span> pointed out that the terminology \"Galois group\" is usually reserved for fields, and in fact we just had a whole discussion about restricting the <code>Gal(L/K)</code> notation to fields (<a class=\"stream-topic\" data-stream-id=\"287929\" href=\"/#narrow/channel/287929-mathlib4/topic/Notation.20for.20Galois.20group/with/545377348\">#mathlib4 &gt; Notation for Galois group</a> ). Worse, if someone says \"Galois group of a ring extension\" in a non-ANT context, they probably mean the √©tale fundamental group.</p>\n<p>So what to do?</p>",
        "id": 546560359,
        "sender_full_name": "Thomas Browning",
        "timestamp": 1761171895
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"253861\">Thomas Browning</span> <a href=\"#narrow/channel/144837-PR-reviews/topic/.2330791.20generalizing.20.60IsGaloisGroup.60/near/546560359\">said</a>:</p>\n<blockquote>\n<p>they probably mean the √©tale fundamental group.</p>\n<p>So what to do?</p>\n</blockquote>\n<p>maybe for this case require schemes?</p>",
        "id": 546560728,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761172094
    },
    {
        "content": "<p>I think this is a totally valid concern but on the other hand we absolutely do need this typeclass to work for rings. I personally think this slightly misleading name is worth the tradeoff as long as there are warnings in the module docstring and the hover info, but I am happy to hear if other people have better suggestion for the names.</p>",
        "id": 546563849,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1761174062
    },
    {
        "content": "<p>Note that I am not strongly against this (maybe a warning in the doc suffices), but the point is that for me the sentence \"G is the Galois group of A/B\" is rather unambiguous (even if uncommon), and it doesn't mean what is in the PR.</p>",
        "id": 546599270,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1761201033
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"130384\">@Riccardo Brasca</span> mathematicians tend to identify things implicitly, they will say let G be the galois group of number fields L/K, and then in the next sentence say consider a prime ùîì of L, and consider the fixed point of ùîì under G</p>",
        "id": 546601536,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761202103
    },
    {
        "content": "<p>Well, I've taken a stab at writing a docstring to clarify the situation.</p>",
        "id": 546602616,
        "sender_full_name": "Thomas Browning",
        "timestamp": 1761202612
    },
    {
        "content": "<p>Yes, of course normal mathematical language is a bit imprecise, but here it seems worst to me. Anyway I can live with the warning in the docstring</p>",
        "id": 546626689,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1761210309
    },
    {
        "content": "<p>Does the converse of <code>IsGaloisGroup.toIsFractionRing</code> hold (adding whatever assumption is needed to make this question meaningful)?</p>",
        "id": 546627997,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1761210675
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"130384\">Riccardo Brasca</span> <a href=\"#narrow/channel/144837-PR-reviews/topic/.2330791.20generalizing.20.60IsGaloisGroup.60/near/546626689\">said</a>:</p>\n<blockquote>\n<p>Yes, of course normal mathematical language is a bit imprecise, but here it seems worst to me.</p>\n</blockquote>\n<p>I'm not targetting the impreciseness, I'm saying that they are implicitly using it for rings, which is exactly what this PR enables.</p>",
        "id": 546632954,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761212082
    },
    {
        "content": "<p>No, that's not what number theorist are doing. They mean that the Galois group of the <em>fields extension</em> acts also on the  ring of integers, not that it is the Galois group of the rings extension.</p>",
        "id": 546633551,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1761212251
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"130384\">Riccardo Brasca</span> <a href=\"#narrow/channel/144837-PR-reviews/topic/.2330791.20generalizing.20.60IsGaloisGroup.60/near/546627997\">said</a>:</p>\n<blockquote>\n<p>Does the converse of <code>IsGaloisGroup.toIsFractionRing</code> hold</p>\n</blockquote>\n<p>it's not the full statement yet, but Atiyah-Macdonald has:<br>\n<a href=\"/user_uploads/3121/lgdK_rr-Dii-mirtGqOVWTHk/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/lgdK_rr-Dii-mirtGqOVWTHk/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"1072x152\" src=\"/user_uploads/thumbnail/3121/lgdK_rr-Dii-mirtGqOVWTHk/image.png/840x560.webp\"></a></div>",
        "id": 546633622,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761212269
    },
    {
        "content": "<p>presumably any automorphism B -&gt; B can be extended to a map L -&gt; L</p>",
        "id": 546633754,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761212302
    },
    {
        "content": "<p>and if it fixes A then the extension fixes K</p>",
        "id": 546633807,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761212313
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"130384\">Riccardo Brasca</span> <a href=\"#narrow/channel/144837-PR-reviews/topic/.2330791.20generalizing.20.60IsGaloisGroup.60/near/546633551\">said</a>:</p>\n<blockquote>\n<p>No, that's not what number theorist are doing. They mean that the Galois group of the <em>fields extension</em> acts also on the ring of integers, not that it is the Galois group of the rings extension.</p>\n</blockquote>\n<p>I see, that's a good point</p>",
        "id": 546633920,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761212344
    },
    {
        "content": "<p>So what is the advantage of writing <code>IsGaloisGrup G A B</code> instead of <code>IsGaloisGroup G K L</code> (where <code>K</code> and <code>L</code> are the fields of fractions)?</p>",
        "id": 546635185,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1761212703
    },
    {
        "content": "<p>presumably they actually present as <code>A K L B</code> (i.e. using predicate <code>IsFractionRing</code> instead of the chosen <code>FractionRing</code>) and so it will be a dangerous non-decreasing instance to have anything with A and B being inferred from K and L</p>",
        "id": 546635849,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761212919
    },
    {
        "content": "<p>Can we not have a <code>IsFractionGaloisGroup G A B</code> which is an <code>abbrev</code> for <code>IsGaloisGroup G (FractionRing A) (FractionRing B)</code>?</p>",
        "id": 546635960,
        "sender_full_name": "Christian Merten",
        "timestamp": 1761212959
    },
    {
        "content": "<p>if it is mathematically true (let's assume) that G is actually the galois group of B/A, would it then make sense to write <code>IsGaloisGroup G A B</code> everywhere?</p>",
        "id": 546636321,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761213052
    },
    {
        "content": "<p>as in, if we have the right theorems in place to say that it's equivalent to G=Gal(L/K)</p>",
        "id": 546636394,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761213077
    },
    {
        "content": "<p>as in, is it really pointless to ever consider the automorphism group of rings?</p>",
        "id": 546636438,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761213096
    },
    {
        "content": "<p>It's of course not pointless, but the situation is much more subtle than for fields (actually it's similar non Galois field extensions). What Grothendieck realizes is that the Galois group should be thought as the automorphisms group of a locally trivially map, a covering, and in the case of fields this can be restated using automorphisms, but with rings it is more complicated. What I mean is that there is a perfect generalization of the statement of <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/FieldTheory/Galois/IsGaloisGroup.html#IsGaloisGroup.isGalois\">IsGaloisGroup.isGalois</a> (the terminology is √©tale rather than Galois, but no doubt it is the \"standard\" generalization to rings\"), and it would be false.</p>",
        "id": 546637373,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1761213397
    },
    {
        "content": "<p>Btw, this generalization is <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=CategoryTheory.PreGaloisCategory.IsFundamentalGroup#doc\">docs#CategoryTheory.PreGaloisCategory.IsFundamentalGroup</a> (this is the absolute version though)</p>",
        "id": 546637437,
        "sender_full_name": "Christian Merten",
        "timestamp": 1761213423
    },
    {
        "content": "<p>But again, if there is consensus that the benefits outweigh the damage then no problem.</p>",
        "id": 546637510,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1761213449
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"130384\">Riccardo Brasca</span> <a href=\"#narrow/channel/144837-PR-reviews/topic/.2330791.20generalizing.20.60IsGaloisGroup.60/near/546635185\">said</a>:</p>\n<blockquote>\n<p>So what is the advantage of writing <code>IsGaloisGroup G A B</code> instead of <code>IsGaloisGroup G K L</code> (where <code>K</code> and <code>L</code> are the fields of fractions)?</p>\n</blockquote>\n<p>The advantage is that you can simplify statements like docs#<a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/NumberTheory/RamificationInertia/Galois.html#Ideal.ncard_primesOver_mul_ramificationIdxIn_mul_inertiaDegIn\">this one</a> which introduces <code>K</code> and <code>L</code> solely to impose a condition on <code>G</code>, even though at the end of the day you only care about the action of <code>G</code> on <code>B/A</code>.</p>",
        "id": 546737648,
        "sender_full_name": "Thomas Browning",
        "timestamp": 1761241449
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"130384\">Riccardo Brasca</span> <a href=\"#narrow/channel/144837-PR-reviews/topic/.2330791.20generalizing.20.60IsGaloisGroup.60/near/546633551\">said</a>:</p>\n<blockquote>\n<p>No, that's not what number theorist are doing. They mean that the Galois group of the <em>fields extension</em> acts also on the  ring of integers, not that it is the Galois group of the rings extension.</p>\n</blockquote>\n<p>Regarding the relation between <code>IsGaloisGroup G A B</code> and <code>IsGaloisGroup G K L</code>, I would regard <code>IsGaloisGroup G A B</code> as saying exactly this, that the Galois group of the field extension also acts on the rings.</p>",
        "id": 546738125,
        "sender_full_name": "Thomas Browning",
        "timestamp": 1761241628
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"253861\">@Thomas Browning</span> but the point is that the definition is more than just action, because \"IsGaloisGroup\" is saying additionally that those are the <em>only</em> automorphisms that exist</p>",
        "id": 546738257,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761241694
    },
    {
        "content": "<p>I mean writing <code>IsGaloisGroup G (FractionRing A) (FractionRing B)</code>, without introducing any spurious <code>K</code> and <code>L</code> (maybe using a notation or something to make the spelling shorter). This is clearly a condition on <code>A</code> and <code>B</code>, but we don't need to introduce the notion of being the Galois group of a ring extension.</p>",
        "id": 546738258,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1761241694
    },
    {
        "content": "<p>It's like saying \"is generically Galois with group <code>G</code>\".</p>",
        "id": 546738290,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1761241708
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110064\">Kenny Lau</span> <a href=\"#narrow/channel/144837-PR-reviews/topic/.2330791.20generalizing.20.60IsGaloisGroup.60/near/546738257\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"253861\">Thomas Browning</span> but the point is that the definition is more than just action, because \"IsGaloisGroup\" is saying that those are the <em>only</em> automorphisms that exist</p>\n</blockquote>\n<p>But that shouldn't be automatic because every automorphism of <code>B/A</code> induces an automorphism of <code>Frac(B)/Frac(A)</code>?</p>",
        "id": 546738354,
        "sender_full_name": "Thomas Browning",
        "timestamp": 1761241735
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"130384\">Riccardo Brasca</span> <a href=\"#narrow/channel/144837-PR-reviews/topic/.2330791.20generalizing.20.60IsGaloisGroup.60/near/546738258\">said</a>:</p>\n<blockquote>\n<p>I mean writing <code>IsGaloisGroup G (FractionRing A) (FractionRing B)</code>, without introducing any spurious <code>K</code> and <code>L</code> (maybe using a notation or something to make the spelling shorter). This is clearly a condition on <code>A</code> and <code>B</code>, but we don't need to introduce the notion of being the Galois group of a ring extension.</p>\n</blockquote>\n<p>The advantage of introducing the Galois group of a ring extension is that it gives the action of <code>G</code> on <code>B</code> for free, whereas otherwise you would need to impose it by reintroducing the fields of fractions again (so that <code>B</code> can be the integral closure of <code>A</code> in <code>L</code>).</p>",
        "id": 546738554,
        "sender_full_name": "Thomas Browning",
        "timestamp": 1761241808
    },
    {
        "content": "<p>The point is that <code>IsGaloisGroup G A B</code> isn't just saying that <code>G = Gal(L/K)</code> but that this action also respects the rings, which is what you want in practice.</p>",
        "id": 546738698,
        "sender_full_name": "Thomas Browning",
        "timestamp": 1761241865
    },
    {
        "content": "<p>Ah, the fact that the action respects <code>K</code> (or <code>A</code>) is in <code>IsGaloisGroup</code>, not in the typeclass assumptions</p>",
        "id": 546739127,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1761242040
    },
    {
        "content": "<p>Ah sorry, I guess you're suggesting starting with an action of <code>G</code> on <code>B/A</code>, letting it induce an action of <code>G</code> on <code>Frac(B)/Frac(A)</code>, and assuming that that action is the Galois action?</p>",
        "id": 546739138,
        "sender_full_name": "Thomas Browning",
        "timestamp": 1761242043
    },
    {
        "content": "<p>This is slightly strange, isn't it? I mean, I would say something like \"A group G of K-linear automorphisms is the Galois group if blah blah\", why currently is \"A group G of automorphisms is the Galois group if it acts K-linearly and blah blah\"</p>",
        "id": 546739338,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1761242118
    },
    {
        "content": "<p>but I admit I don't know the details of the implementation, so I may be totally wrong</p>",
        "id": 546739392,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1761242140
    },
    {
        "content": "<p>Well, you want to group to be an abstract group (rather than a subgroup of <code>L \\equiv[K] L</code>), so that you can define an action and then prove <code>IsGaloisGroup (Units (Zmod n)) Q (cyclotomic n)</code> (or the like).</p>",
        "id": 546739699,
        "sender_full_name": "Thomas Browning",
        "timestamp": 1761242255
    },
    {
        "content": "<p>Sure, but there must be some typeclass way of saying that</p>",
        "id": 546739944,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1761242338
    },
    {
        "content": "<p>I think it's just <code>[MulSemiringAction G L]</code> and <code>[SMulCommClass G K L]</code>?</p>",
        "id": 546740016,
        "sender_full_name": "Thomas Browning",
        "timestamp": 1761242363
    },
    {
        "content": "<p>Maybe, but anyway we have representation theory, so there is surely a way of saying that</p>",
        "id": 546740310,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1761242455
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Representation#doc\">docs#Representation</a> is just <code>(G ‚Üí* V ‚Üí‚Çó[k] V)</code></p>",
        "id": 546740441,
        "sender_full_name": "Thomas Browning",
        "timestamp": 1761242493
    },
    {
        "content": "<p>imposing a homomorphism rather than an action</p>",
        "id": 546740501,
        "sender_full_name": "Thomas Browning",
        "timestamp": 1761242510
    },
    {
        "content": "<p>looking at <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/RepresentationTheory/Basic.html#Representation.ofDistribMulAction\">Representation.ofDistribMulAction</a> it seems <code>[DistribMulAction G L] [SMulCommClass G K L]</code></p>",
        "id": 546740527,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1761242515
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"253861\">Thomas Browning</span> <a href=\"#narrow/channel/144837-PR-reviews/topic/.2330791.20generalizing.20.60IsGaloisGroup.60/near/546740501\">said</a>:</p>\n<blockquote>\n<p>imposing a homomorphism rather than an action</p>\n</blockquote>\n<p>Aren't the two exactly the same thing?</p>",
        "id": 546740693,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1761242559
    },
    {
        "content": "<p>Yes, but in practice it's nicer to have typeclass to keep track of the actions rather than carrying them around as explicit named homomorphism (except in representation theory where it's common to give a name (e.g., \"rho\") to each representation.</p>",
        "id": 546741042,
        "sender_full_name": "Thomas Browning",
        "timestamp": 1761242647
    },
    {
        "content": "<p>anyway, it doesn't matter, the point is that currently saying <code>IsGaloisGroup</code> tells you something on how <code>G</code> acts on the base field, and I didn't realize this</p>",
        "id": 546741139,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1761242675
    },
    {
        "content": "<p>I am really confused about this discussion. Are we concluding that the approach of using <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Algebra.IsInvariant#doc\">docs#Algebra.IsInvariant</a> is fundamentally wrong because this is not how number theorists think of things?</p>",
        "id": 546742101,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1761242933
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"253861\">Thomas Browning</span> <a href=\"#narrow/channel/144837-PR-reviews/topic/.2330791.20generalizing.20.60IsGaloisGroup.60/near/546739138\">said</a>:</p>\n<blockquote>\n<p>Ah sorry, I guess you're suggesting starting with an action of <code>G</code> on <code>B/A</code>, letting it induce an action of <code>G</code> on <code>Frac(B)/Frac(A)</code>, and assuming that that action is the Galois action?</p>\n</blockquote>\n<p>Just mulling over this possibility a bit more: You would start by assuming <code>[MulSemiringAction G B]</code> which induces <code>[MulSemiringAction G Frac(B)]</code>, and then you could impose <code>IsGaloisGroup G Frac(A) Frac(B)</code> which gives you almost everything that you want except for <code>A = B \\cap Frac(A)</code> which I don't know how to impose except with <code>Algbera.IsInvariant G A B</code>, and at that point you're basically just writing <code>IsGaloisGroup G A B</code>?</p>",
        "id": 546742710,
        "sender_full_name": "Thomas Browning",
        "timestamp": 1761243194
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"439483\">Andrew Yang</span> <a href=\"#narrow/channel/144837-PR-reviews/topic/.2330791.20generalizing.20.60IsGaloisGroup.60/near/546742101\">said</a>:</p>\n<blockquote>\n<p>I am really confused about this discussion. Are we concluding that the approach of using <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Algebra.IsInvariant#doc\">docs#Algebra.IsInvariant</a> is fundamentally wrong because this is not how number theorists think of things?</p>\n</blockquote>\n<p>I think it's a slightly different axiomatization, but it gets you to basically the same place? But with the added flexibility of only working with the rings if that's all you care about.</p>",
        "id": 546746215,
        "sender_full_name": "Thomas Browning",
        "timestamp": 1761244522
    },
    {
        "content": "<p>So I'm not sure where this discussion ended up. Is it enough to clarify/warn about these issues in the docstring?</p>",
        "id": 547040007,
        "sender_full_name": "Thomas Browning",
        "timestamp": 1761381106
    },
    {
        "content": "<p>Also, just to tie a bow on the question of \"what does <code>IsGaloisGroup G A B</code> actually entail?\", if <code>A</code> is integrally closed, then <code>IsGaloisGroup G A B</code> is equivalent to <code>IsGaloisGroup G K L</code> and <code>B/A</code> being an integral extension with <code>B</code> stable under the action of <code>G</code>. This is proved in the followup PR <a href=\"https://github.com/leanprover-community/mathlib4/pull/30792\">#30792</a>.</p>",
        "id": 547108363,
        "sender_full_name": "Thomas Browning",
        "timestamp": 1761461420
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110064\">Kenny Lau</span> <a href=\"#narrow/channel/144837-PR-reviews/topic/.2330791.20generalizing.20.60IsGaloisGroup.60/near/546633622\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"130384\">Riccardo Brasca</span> <a href=\"#narrow/channel/144837-PR-reviews/topic/.2330791.20generalizing.20.60IsGaloisGroup.60/near/546627997\">said</a>:</p>\n<blockquote>\n<p>Does the converse of <code>IsGaloisGroup.toIsFractionRing</code> hold</p>\n</blockquote>\n<p>it's not the full statement yet, but Atiyah-Macdonald has:<br>\n<a href=\"/user_uploads/3121/lgdK_rr-Dii-mirtGqOVWTHk/image.png\">image.png</a></p>\n</blockquote>\n<p>So that more-or-less resolves this question.</p>",
        "id": 547108482,
        "sender_full_name": "Thomas Browning",
        "timestamp": 1761461531
    },
    {
        "content": "<p>I am not a big fan of this terminology, essentially for the reason that sooner or later, mathlib will have the theory of √©tale covers from Grothendieck's SGA 1, and then one will have <code>IsGaloisGroup G A B</code> while <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">Spec</mi><mo>‚Å°</mo><mo stretchy=\"false\">(</mo><mi>B</mi><mo stretchy=\"false\">)</mo><mo>‚Üí</mo><mi mathvariant=\"normal\">Spec</mi><mo>‚Å°</mo><mo stretchy=\"false\">(</mo><mi>A</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\operatorname{Spec}(B)\\to\\operatorname{Spec}(A)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mop\"><span class=\"mord mathrm\">Spec</span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.05017em;\">B</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">‚Üí</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mop\"><span class=\"mord mathrm\">Spec</span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">A</span><span class=\"mclose\">)</span></span></span></span> is not necessary  a Galois principal cover with group <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>G</mi></mrow><annotation encoding=\"application/x-tex\">G</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\">G</span></span></span></span> in the sense of [SGA 1, Exp. V, D√©finition 2.8]</p>",
        "id": 547392414,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1761611458
    },
    {
        "content": "<p>Borceux, in his recent <a href=\"https://link.springer.com/book/10.1007/978-3-031-58460-2\">book</a> says that <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>œÉ</mi><mspace></mspace><mspace width=\"0.1111em\"/><mo lspace=\"0em\" rspace=\"0.17em\"></mo><mtext>‚Äâ‚Å£</mtext><mo lspace=\"0em\" rspace=\"0em\">:</mo><mspace width=\"0.3333em\"/><mi>A</mi><mo>‚Üí</mo><mi>B</mi></mrow><annotation encoding=\"application/x-tex\">\\sigma\\colon A\\to B</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">œÉ</span><span class=\"mspace nobreak\"></span><span class=\"mspace\" style=\"margin-right:0.1111em;\"></span><span class=\"mpunct\"></span><span class=\"mspace\" style=\"margin-right:-0.1667em;\"></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mrel\">:</span></span><span class=\"mspace\" style=\"margin-right:0.3333em;\"></span><span class=\"mord mathnormal\">A</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">‚Üí</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05017em;\">B</span></span></span></span> is Galois extension of rings by the following two conditions:</p>\n<ul>\n<li>The morphism <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>œÉ</mi><mi>A</mi><mo>‚Üí</mo><mi>B</mi></mrow><annotation encoding=\"application/x-tex\">\\sigma A \\to B</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">œÉ</span><span class=\"mord mathnormal\">A</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">‚Üí</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05017em;\">B</span></span></span></span> is pure (it is injective and stays so after any tensor product by an <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>A</mi></mrow><annotation encoding=\"application/x-tex\">A</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\">A</span></span></span></span>-module)</li>\n<li>A second condition that says that <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>B</mi></mrow><annotation encoding=\"application/x-tex\">B</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05017em;\">B</span></span></span></span> is ‚Äúsplit‚Äù by <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>œÉ</mi></mrow><annotation encoding=\"application/x-tex\">\\sigma</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">œÉ</span></span></span></span>, or that <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>B</mi><msub><mo>‚äó</mo><mi>A</mi></msub><mi>B</mi></mrow><annotation encoding=\"application/x-tex\">B\\otimes_A B</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05017em;\">B</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\"><span class=\"mbin\">‚äó</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">A</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05017em;\">B</span></span></span></span> is a split <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>B</mi></mrow><annotation encoding=\"application/x-tex\">B</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05017em;\">B</span></span></span></span>-algebra. (In simple cases, that will mean that it is isomorphic to <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>B</mi><mi>n</mi></msup></mrow><annotation encoding=\"application/x-tex\">B^n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05017em;\">B</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span></span></span></span></span></span></span></span> for some <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">n</span></span></span></span>, but his definition accomodates the profinite situation.)</li>\n</ul>",
        "id": 547393221,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1761612176
    },
    {
        "content": "<p>This was my point in the above discussion, but it was pointed out that having the notion for rings is really useful, and I don't see another reasonable name. So the notion is okay but the name is bad, and this seemed a reasonable tradeoff to me.</p>",
        "id": 547394711,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1761613456
    },
    {
        "content": "<p>I fear some confusion will appear one day or another, when none of the protagonists of this story will be there to explain why they suggested that terminology.</p>",
        "id": 547435948,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1761640933
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"130609\">Antoine Chambert-Loir</span> <a href=\"#narrow/channel/144837-PR-reviews/topic/.2330791.20generalizing.20.60IsGaloisGroup.60/near/547393221\">said</a>:</p>\n<blockquote>\n<p>Borceux, in his recent <a href=\"https://link.springer.com/book/10.1007/978-3-031-58460-2\">book</a> says that <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>œÉ</mi><mspace></mspace><mspace width=\"0.1111em\"/><mo lspace=\"0em\" rspace=\"0.17em\"></mo><mtext>‚Äâ‚Å£</mtext><mo lspace=\"0em\" rspace=\"0em\">:</mo><mspace width=\"0.3333em\"/><mi>A</mi><mo>‚Üí</mo><mi>B</mi></mrow><annotation encoding=\"application/x-tex\">\\sigma\\colon A\\to B</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">œÉ</span><span class=\"mspace nobreak\"></span><span class=\"mspace\" style=\"margin-right:0.1111em;\"></span><span class=\"mpunct\"></span><span class=\"mspace\" style=\"margin-right:-0.1667em;\"></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mrel\">:</span></span><span class=\"mspace\" style=\"margin-right:0.3333em;\"></span><span class=\"mord mathnormal\">A</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">‚Üí</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05017em;\">B</span></span></span></span> is Galois extension of rings by the following two conditions:</p>\n</blockquote>\n<p>and what is the galois group in that picture?</p>",
        "id": 547436763,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761641235
    },
    {
        "content": "<p>It can be defined from this, actually as a suitable groupoid (9.4).</p>",
        "id": 547438481,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1761641815
    },
    {
        "content": "<p>does it coincide with AlgEquiv A B B?</p>",
        "id": 547438937,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761641953
    },
    {
        "content": "<p>It probably doesn't ‚Äî¬†and shouldn't in general, for example if Spec(A) is not connected.</p>",
        "id": 547450754,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1761645574
    },
    {
        "content": "<p>That's the other reason for which I'm not so happy with this terminology. It is (likely) only compatible with the intuition when <code>A</code> and <code>B</code> are integrally closed integral domains.</p>",
        "id": 547451511,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1761645801
    },
    {
        "content": "<p>On the other hand, let it be clear that (at least with a reasonable description of the possible issues in the Lean file), the consequences of a possible confusion are moderate, since this won't interfere with a lot of other Lean files.</p>",
        "id": 547454512,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1761646751
    },
    {
        "content": "<p>A possible solution is to use, one day, the word <em>√©tale</em> (for example in <code>√©tale_fund_group</code> or whatever) to mean the other version. It's unfortunate that there is a clash with standard mathematical terminology, but if we want to say \"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">Z</mi><mi mathvariant=\"normal\">/</mi><mn>2</mn></mrow><annotation encoding=\"application/x-tex\">\\mathbb{Z}/2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathbb\">Z</span><span class=\"mord\">/2</span></span></span></span> is the xxxx group of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">Z</mi><mo stretchy=\"false\">[</mo><mi>i</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">\\mathbb{Z}[i]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathbb\">Z</span><span class=\"mopen\">[</span><span class=\"mord mathnormal\">i</span><span class=\"mclose\">]</span></span></span></span> over <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">Z</mi></mrow><annotation encoding=\"application/x-tex\">\\mathbb{Z}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6889em;\"></span><span class=\"mord mathbb\">Z</span></span></span></span>\" we need a name, we cannot keep writing all the conditions.</p>",
        "id": 547469395,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1761651157
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"130609\">Antoine Chambert-Loir</span> <a href=\"#narrow/channel/144837-PR-reviews/topic/.2330791.20generalizing.20.60IsGaloisGroup.60/near/547454512\">said</a>:</p>\n<blockquote>\n<p>On the other hand, let it be clear that (at least with a reasonable description of the possible issues in the Lean file), the consequences of a possible confusion are moderate, since this won't interfere with a lot of other Lean files.</p>\n</blockquote>\n<p>Good point. I'll open a PR fleshing out the docstring later today.</p>",
        "id": 547510404,
        "sender_full_name": "Thomas Browning",
        "timestamp": 1761662062
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/31029\">#31029</a></p>",
        "id": 547573311,
        "sender_full_name": "Thomas Browning",
        "timestamp": 1761679649
    },
    {
        "content": "<p>Another situation I'm running into right now with local class field theory is that if L/K is a finite Galois extension of nonarch local fields then it's super nice to have the same group acting on L and O_L (and then O_L^x etc), but the integral extension isn't etale if L/K is ramified</p>",
        "id": 554207223,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1762471510
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/channel/144837-PR-reviews/topic/.2330791.20generalizing.20.60IsGaloisGroup.60/near/554207223\">said</a>:</p>\n<blockquote>\n<p>Another situation I'm running into right now with local class field theory is that if L/K is a finite Galois extension of nonarch local fields then it's super nice to have the same group acting on L and O_L (and then O_L^x etc), but the integral extension isn't etale if L/K is ramified</p>\n</blockquote>\n<p>Well, the good news is that the refactor is done now, so you can write <code>IsGaloisGroup G O_K O_L</code> and deduce <code>IsGaloisGroup G K L</code> from it.</p>",
        "id": 554372749,
        "sender_full_name": "Thomas Browning",
        "timestamp": 1762535093
    },
    {
        "content": "<p>Oh nice! In the class field theory repo I used the isomorphism to Gal(L/K) and then the iso between that and Gal(B/A) coming from some AKLB file</p>",
        "id": 554584788,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1762715185
    }
]