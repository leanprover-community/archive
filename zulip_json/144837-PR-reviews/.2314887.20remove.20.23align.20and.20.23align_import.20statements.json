[
    {
        "content": "<p>After some internal discussion amongst the maintainers, it's now time to remove <code>#align</code> from mathlib.</p>\n<p>I've attempted to do so at <a href=\"https://github.com/leanprover-community/mathlib4/pull/14887\">#14887</a>. This touches &gt;3500 files in Mathlib, so obviously will rot instantly. It is all done by a brief script described in the PR, so if we identify problems in the current PR we need to work out how to script a solution, and then regenerate the PR from <code>master</code>.</p>\n<p>Obviously it is a giant PR to try to review. I've done some spot checks, but obviously not read everything. :-) If someone others could do spot checks and report if there's anything egregious that we can't clean up later, that would be great.</p>",
        "id": 452478062,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1721360307
    },
    {
        "content": "<p>Oops, it's already rotted. :-)</p>",
        "id": 452478192,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1721360346
    },
    {
        "content": "<p>I commented this on the PR as well: it all looks good to me!</p>",
        "id": 452487663,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1721365338
    },
    {
        "content": "<p>After a randomized check LGTM.</p>",
        "id": 452509980,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1721375352
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/14901\">#14901</a> should make CI green for <a href=\"https://github.com/leanprover-community/mathlib4/pull/14887\">#14887</a></p>",
        "id": 452537621,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1721383686
    },
    {
        "content": "<p>Delegated</p>",
        "id": 452538329,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1721383850
    },
    {
        "content": "<p>Merged into master. We should regenerate via the script.</p>",
        "id": 452545645,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1721386259
    },
    {
        "content": "<p>Note that I posted an amendment to the script</p>",
        "id": 452545804,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1721386325
    },
    {
        "content": "<p>I would do it (including Johan's addition) but I have the <code>sed</code> vs <code>gsed</code> tension on my machine. Any other volunteers?</p>",
        "id": 452546109,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1721386473
    },
    {
        "content": "<p>I can do it</p>",
        "id": 452546196,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1721386514
    },
    {
        "content": "<p>Or at least try</p>",
        "id": 452546223,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1721386524
    },
    {
        "content": "<p>Is there reasonable niche of the library to run it on that a human can look at and is fairly robust?</p>",
        "id": 452546333,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1721386567
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/14903\">#14903</a></p>",
        "id": 452546881,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1721386812
    },
    {
        "content": "<p>Hmm, it is already red</p>",
        "id": 452546898,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1721386816
    },
    {
        "content": "<p>Certainly the script needs <code>lake exe mk_all</code> at the end.</p>",
        "id": 452546990,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1721386852
    },
    {
        "content": "<p>Just done it</p>",
        "id": 452547208,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1721386934
    },
    {
        "content": "<p>And I guess <code>shake</code> will complain.</p>",
        "id": 452547210,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1721386934
    },
    {
        "content": "<p>We have 1 bors queue running, and one PR waiting in a queue. Shall w <code>bors d-</code> the PR that is waiting?</p>",
        "id": 452547348,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1721386988
    },
    {
        "content": "<p>And then have a bors-freeze until this PR is in?</p>",
        "id": 452547389,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1721387003
    },
    {
        "content": "<p>Probably.</p>",
        "id": 452547429,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1721387022
    },
    {
        "content": "<p>You can just <code>bors merge p=1000</code>, right?</p>",
        "id": 452547445,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1721387027
    },
    {
        "content": "<p>Depends on the time to spot check again</p>",
        "id": 452547475,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1721387040
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"387244\">Yaël Dillies</span> <a href=\"#narrow/stream/144837-PR-reviews/topic/.2314887.20remove.20.23align.20and.20.23align_import.20statements/near/452547445\">said</a>:</p>\n<blockquote>\n<p>You can just <code>bors merge p=1000</code>, right?</p>\n</blockquote>\n<p>That also works, and will cancel any running queue. But there is still the risk of getting merge conflicts because of PRs landing while we get this monster in shape.</p>",
        "id": 452547680,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1721387116
    },
    {
        "content": "<p>Let's start by making this one green</p>",
        "id": 452547875,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1721387190
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Bash\"><pre><span></span><code>warning:<span class=\"w\"> </span>batteries:<span class=\"w\"> </span>repository<span class=\"w\"> </span><span class=\"s1\">'././.lake/packages/batteries'</span><span class=\"w\"> </span>has<span class=\"w\"> </span><span class=\"nb\">local</span><span class=\"w\"> </span>changes\n✖<span class=\"w\"> </span><span class=\"o\">[</span>?/?<span class=\"o\">]</span><span class=\"w\"> </span>Computing<span class=\"w\"> </span>build<span class=\"w\"> </span><span class=\"nb\">jobs</span>\nerror:<span class=\"w\"> </span>no<span class=\"w\"> </span>such<span class=\"w\"> </span>file<span class=\"w\"> </span>or<span class=\"w\"> </span>directory<span class=\"w\"> </span><span class=\"o\">(</span>error<span class=\"w\"> </span>code:<span class=\"w\"> </span><span class=\"m\">2</span><span class=\"o\">)</span>\n<span class=\"w\">  </span>file:<span class=\"w\"> </span>././././Mathlib/Init/Align.lean\nSome<span class=\"w\"> </span>builds<span class=\"w\"> </span>logged<span class=\"w\"> </span>failures:\n-<span class=\"w\"> </span>Computing<span class=\"w\"> </span>build<span class=\"w\"> </span><span class=\"nb\">jobs</span>\nerror:<span class=\"w\"> </span>build<span class=\"w\"> </span>failed\n</code></pre></div>",
        "id": 452548054,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1721387279
    },
    {
        "content": "<p>And of course it already has merge conflicts <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span></p>",
        "id": 452548473,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1721387492
    },
    {
        "content": "<p>Ok, one queue just landed. The other PR is running because I didn't take it off the queue yet</p>",
        "id": 452548923,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1721387685
    },
    {
        "content": "<p>That's OK, I think I fixed it. But I don't know what to do with the <code>batteries</code> problem.</p>",
        "id": 452549042,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1721387726
    },
    {
        "content": "<p>It looks like <code>find</code> aggresively went into <code>.lake</code>.</p>",
        "id": 452549567,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1721387912
    },
    {
        "content": "<p>Maybe we should use <code>git ls-files</code> or <code>rg</code> instead of <code>find</code>.</p>",
        "id": 452549591,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1721387925
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"130384\">@Riccardo Brasca</span> I conjecture you pasted that error about batteries from a local build, not from CI, right?</p>",
        "id": 452549731,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1721387984
    },
    {
        "content": "<p>Anyway, I need to have lunch now.</p>",
        "id": 452549763,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1721387996
    },
    {
        "content": "<p>Yes</p>",
        "id": 452549764,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1721387996
    },
    {
        "content": "<p>CI says</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">Run</span><span class=\"w\"> </span><span class=\"n\">liskin</span><span class=\"bp\">/</span><span class=\"n\">gh</span><span class=\"bp\">-</span><span class=\"n\">problem</span><span class=\"bp\">-</span><span class=\"n\">matcher</span><span class=\"bp\">-</span><span class=\"n\">wrap</span><span class=\"bp\">@</span><span class=\"n\">v3</span>\n<span class=\"bp\">/</span><span class=\"n\">usr</span><span class=\"bp\">/</span><span class=\"n\">bin</span><span class=\"bp\">/</span><span class=\"n\">bash</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">o</span><span class=\"w\"> </span><span class=\"n\">pipefail</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"n\">env</span><span class=\"w\"> </span><span class=\"n\">LEAN_ABORT_ON_PANIC</span><span class=\"bp\">=</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"n\">build</span><span class=\"w\"> </span><span class=\"c1\">--wfail -KCI</span>\n<span class=\"bp\">✖</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">?/?</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Computing</span><span class=\"w\"> </span><span class=\"n\">build</span><span class=\"w\"> </span><span class=\"n\">jobs</span>\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">no</span><span class=\"w\"> </span><span class=\"n\">such</span><span class=\"w\"> </span><span class=\"n\">file</span><span class=\"w\"> </span><span class=\"n\">or</span><span class=\"w\"> </span><span class=\"n\">directory</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">error</span><span class=\"w\"> </span><span class=\"n\">code</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"n\">file</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">././././</span><span class=\"n\">Mathlib</span><span class=\"bp\">/</span><span class=\"n\">Init</span><span class=\"bp\">/</span><span class=\"n\">Align</span><span class=\"bp\">.</span><span class=\"n\">lean</span>\n<span class=\"n\">Some</span><span class=\"w\"> </span><span class=\"n\">builds</span><span class=\"w\"> </span><span class=\"n\">logged</span><span class=\"w\"> </span><span class=\"n\">failures</span><span class=\"o\">:</span>\n<span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Computing</span><span class=\"w\"> </span><span class=\"n\">build</span><span class=\"w\"> </span><span class=\"n\">jobs</span>\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">build</span><span class=\"w\"> </span><span class=\"n\">failed</span>\n<span class=\"n\">Error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">The</span><span class=\"w\"> </span><span class=\"n\">process</span><span class=\"w\"> </span><span class=\"bp\">'/</span><span class=\"n\">usr</span><span class=\"bp\">/</span><span class=\"n\">bin</span><span class=\"bp\">/</span><span class=\"n\">bash'</span><span class=\"w\"> </span><span class=\"n\">failed</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"n\">exit</span><span class=\"w\"> </span><span class=\"n\">code</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n</code></pre></div>",
        "id": 452549850,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1721388011
    },
    {
        "content": "<p>I am retrying excluding <code>.lake</code> from <code>find</code></p>",
        "id": 452550308,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1721388200
    },
    {
        "content": "<p>Ah, I see. There are files that import <code>Mathlib.Init.Align</code></p>",
        "id": 452551245,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1721388582
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/14904\">#14904</a> for a new try</p>",
        "id": 452551517,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1721388691
    },
    {
        "content": "<p>To halve the possibility of merge conflicts, there is also the option of first performing the replacement on the files starting with <code>[A-M]</code> and then <code>[N-Z]</code>.</p>",
        "id": 452552552,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1721389110
    },
    {
        "content": "<p>Mmm, something went wrong with my computer, there are still a lot of <code>set_option linter.uppercaseLean3 false in</code></p>",
        "id": 452553099,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1721389314
    },
    {
        "content": "<p>Apparently, not all set_options start on column 0:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">$</span><span class=\"w\"> </span><span class=\"n\">grep</span><span class=\"w\"> </span><span class=\"bp\">'.</span><span class=\"kn\">set_option</span><span class=\"w\"> </span><span class=\"n\">linter</span><span class=\"bp\">.</span><span class=\"n\">uppercaseLean3'</span>\n<span class=\"n\">Mathlib</span><span class=\"bp\">/</span><span class=\"n\">Algebra</span><span class=\"bp\">/</span><span class=\"n\">Category</span><span class=\"bp\">/</span><span class=\"n\">Ring</span><span class=\"bp\">/</span><span class=\"n\">Basic</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mi\">240</span><span class=\"o\">:</span><span class=\"c1\">-- set_option linter.uppercaseLean3 false in</span>\n<span class=\"n\">Mathlib</span><span class=\"bp\">/</span><span class=\"n\">Algebra</span><span class=\"bp\">/</span><span class=\"n\">Category</span><span class=\"bp\">/</span><span class=\"n\">Ring</span><span class=\"bp\">/</span><span class=\"n\">Basic</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mi\">384</span><span class=\"o\">:</span><span class=\"c1\">-- set_option linter.uppercaseLean3 false in</span>\n<span class=\"n\">Mathlib</span><span class=\"bp\">/</span><span class=\"n\">Algebra</span><span class=\"bp\">/</span><span class=\"n\">Category</span><span class=\"bp\">/</span><span class=\"n\">Ring</span><span class=\"bp\">/</span><span class=\"n\">Basic</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mi\">551</span><span class=\"o\">:</span><span class=\"c1\">-- set_option linter.uppercaseLean3 false in</span>\n<span class=\"n\">Mathlib</span><span class=\"bp\">/</span><span class=\"n\">Data</span><span class=\"bp\">/</span><span class=\"n\">Complex</span><span class=\"bp\">/</span><span class=\"n\">Basic</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mi\">571</span><span class=\"o\">:</span><span class=\"w\">  </span><span class=\"kn\">set_option</span><span class=\"w\"> </span><span class=\"n\">linter</span><span class=\"bp\">.</span><span class=\"n\">uppercaseLean3</span><span class=\"w\"> </span><span class=\"n\">false</span><span class=\"w\"> </span><span class=\"k\">in</span>\n<span class=\"n\">Mathlib</span><span class=\"bp\">/</span><span class=\"n\">Geometry</span><span class=\"bp\">/</span><span class=\"n\">RingedSpace</span><span class=\"bp\">/</span><span class=\"n\">SheafedSpace</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mi\">67</span><span class=\"o\">:</span><span class=\"c1\">-- set_option linter.uppercaseLean3 false in</span>\n<span class=\"n\">Mathlib</span><span class=\"bp\">/</span><span class=\"n\">Mathport</span><span class=\"bp\">/</span><span class=\"n\">Rename</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mi\">183</span><span class=\"o\">:</span><span class=\"w\">             </span><span class=\"kn\">set_option</span><span class=\"w\"> </span><span class=\"n\">linter</span><span class=\"bp\">.</span><span class=\"n\">uppercaseLean3</span><span class=\"w\"> </span><span class=\"n\">false</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"bp\">\\</span><span class=\"n\">n</span><span class=\"s2\">\"</span>\n<span class=\"s2\">Mathlib/RepresentationTheory/Rep.lean:511:  set_option linter.uppercaseLean3 false in</span>\n</code></pre></div>",
        "id": 452553361,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1721389425
    },
    {
        "content": "<p>try using <code>^ *set_option...</code> as the regex.</p>",
        "id": 452553464,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1721389465
    },
    {
        "content": "<p>Maybe they all start with optional spaces and nothing else.</p>",
        "id": 452553505,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1721389487
    },
    {
        "content": "<p>Ah, the syntax of <code>sed</code> is slightly different from Linux and Mac, I and think <span class=\"user-mention\" data-user-id=\"110087\">@Kim Morrison</span> 's scripts are for Mac</p>",
        "id": 452553630,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1721389545
    },
    {
        "content": "<p>Yes, let me restart again</p>",
        "id": 452553713,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1721389572
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"130384\">@Riccardo Brasca</span> I'm back from lunch. Which PR are we looking at now?</p>",
        "id": 452555062,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1721390138
    },
    {
        "content": "<p>I am trying to understand what's wrong with the scripts on my computer, so feel free to try on yours. If I understand correctly <code>sed -i ''</code> should be <code>sed -i</code> on Linux.</p>",
        "id": 452555335,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1721390242
    },
    {
        "content": "<p>I think that sounds right</p>",
        "id": 452555705,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1721390379
    },
    {
        "content": "<p>I think so, I also think that the <code>-e</code> may not be needed, and you can just concatenate the <code>sed</code>s:</p>",
        "id": 452555718,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1721390386
    },
    {
        "content": "<p><code>find . -name \"*.lean\" -not -path \"./lake/*\" -exec sed -i '/^$/N;/^\\n#noalign/d; /^#noalign/d' {} +</code></p>",
        "id": 452555829,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1721390411
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"321459\">Damiano Testa</span> <a href=\"#narrow/stream/144837-PR-reviews/topic/.2314887.20remove.20.23align.20and.20.23align_import.20statements/near/452552552\">said</a>:</p>\n<blockquote>\n<p>To halve the possibility of merge conflicts, there is also the option of first performing the replacement on the files starting with <code>[A-M]</code> and then <code>[N-Z]</code>.</p>\n</blockquote>\n<p>I agree that we could indeed split this over 2~4 PRs if that helps.</p>",
        "id": 452556043,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1721390497
    },
    {
        "content": "<p>I am trying with <a href=\"https://github.com/leanprover-community/mathlib4/pull/14905\">#14905</a>. There is a building error in <code>Mathlib.Lean.Json</code></p>",
        "id": 452556599,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1721390716
    },
    {
        "content": "<p>Because <code>Align</code> was it's only import</p>",
        "id": 452556812,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1721390790
    },
    {
        "content": "<p>Wow, nice to wake up to so much work going on! :-)</p>",
        "id": 452557204,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1721390946
    },
    {
        "content": "<p>In <a href=\"https://github.com/leanprover-community/mathlib4/pull/14905\">#14905</a> there is an error at the \"Post PR summary comment / build (pull_request)\" stage, but building mathlib is going well.</p>",
        "id": 452558507,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1721391457
    },
    {
        "content": "<p>Do we want to only run this in the <code>Mathlib/</code> folder?</p>",
        "id": 452558699,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1721391526
    },
    {
        "content": "<p>I guess that is also a good restriction. We can always cleanup the other folders later.</p>",
        "id": 452559689,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1721391935
    },
    {
        "content": "<p>I reran the script in <code>Mathlib/</code> on <a href=\"https://github.com/leanprover-community/mathlib4/pull/14887\">#14887</a></p>",
        "id": 452560934,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1721392439
    },
    {
        "content": "<p>merge conflict <span aria-label=\"rofl\" class=\"emoji emoji-1f923\" role=\"img\" title=\"rofl\">:rofl:</span></p>",
        "id": 452561165,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1721392529
    },
    {
        "content": "<p>Stale master :/</p>",
        "id": 452561215,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1721392539
    },
    {
        "content": "<p>Retry</p>",
        "id": 452561311,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1721392566
    },
    {
        "content": "<p>Sorry, I would have done this to start if I realized it was macOS syntax</p>",
        "id": 452561748,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1721392763
    },
    {
        "content": "<p>I didn’t add Johan’s addendum though</p>",
        "id": 452561908,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1721392822
    },
    {
        "content": "<p>That line breaks two files (that are very easy to fix by hand).</p>",
        "id": 452562016,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1721392859
    },
    {
        "content": "<p>Spot checks so far look fine to me.</p>",
        "id": 452562159,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1721392916
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"306577\">Matthew Ballard</span> <a href=\"#narrow/stream/144837-PR-reviews/topic/.2314887.20remove.20.23align.20and.20.23align_import.20statements/near/452561908\">said</a>:</p>\n<blockquote>\n<p>I didn’t add Johan’s addendum though</p>\n</blockquote>\n<p>We can do that in a follow up PR</p>",
        "id": 452562200,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1721392926
    },
    {
        "content": "<p>Let's not remove the imports of <code>Rename</code> yet. That is easy to do in a followup.</p>",
        "id": 452562242,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1721392938
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"130384\">Riccardo Brasca</span> <a href=\"#narrow/stream/144837-PR-reviews/topic/.2314887.20remove.20.23align.20and.20.23align_import.20statements/near/452562016\">said</a>:</p>\n<blockquote>\n<p>That line breaks two files (that are very easy to fix by hand).</p>\n</blockquote>\n<p>Does it break the build? Otherwise I would leave it to a followup</p>",
        "id": 452562259,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1721392947
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"130384\">Riccardo Brasca</span> <a href=\"#narrow/stream/144837-PR-reviews/topic/.2314887.20remove.20.23align.20and.20.23align_import.20statements/near/452562016\">said</a>:</p>\n<blockquote>\n<p>That line breaks two files (that are very easy to fix by hand).</p>\n</blockquote>\n<p>Can we just push those changes to master directly?</p>",
        "id": 452562321,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1721392967
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"306577\">@Matthew Ballard</span>, could you update the PR description with the version of the script you are now using? It's important that this is kept up to date, or only you can touch things.</p>",
        "id": 452562417,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1721392998
    },
    {
        "content": "<p>Yes, because <code>Mathlib.Lean.Json</code>  only imports <code>Mathlib.Mathport.Rename</code>.</p>",
        "id": 452562425,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1721393002
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110087\">Kim Morrison</span> <a href=\"#narrow/stream/144837-PR-reviews/topic/.2314887.20remove.20.23align.20and.20.23align_import.20statements/near/452562417\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"306577\">Matthew Ballard</span>, could you update the PR description with the version of the script you are now using? It's important that this is kept up to date, or only you can touch things.</p>\n</blockquote>\n<p>I copied the script from the PR directly</p>",
        "id": 452562486,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1721393020
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110087\">@Kim Morrison</span> did you run it in the root folder?</p>",
        "id": 452562606,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1721393056
    },
    {
        "content": "<p>250 files left</p>",
        "id": 452568118,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1721395031
    },
    {
        "content": "<p>Should we de-align <code>Archive</code> and <code>Counterexamples</code> separately?</p>",
        "id": 452568278,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1721395084
    },
    {
        "content": "<p>Certainly</p>",
        "id": 452568303,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1721395093
    },
    {
        "content": "<p>Those are much less prone to conflicts</p>",
        "id": 452568326,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1721395103
    },
    {
        "content": "<p>In my opinion we should merge this one as soon as it is green</p>",
        "id": 452568359,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1721395119
    },
    {
        "content": "<p><code>Counterexamples</code> is already done, isn't it?</p>",
        "id": 452568539,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1721395201
    },
    {
        "content": "<p>And also <code>Archive</code></p>",
        "id": 452568682,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1721395236
    },
    {
        "content": "<p>Ooh, I didn't realize that. Which PR did those?</p>",
        "id": 452568711,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1721395252
    },
    {
        "content": "<p>Kim originally had those</p>",
        "id": 452568741,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1721395264
    },
    {
        "content": "<p>I mean <a href=\"https://github.com/leanprover-community/mathlib4/pull/14887\">#14887</a> is also doing that</p>",
        "id": 452568763,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1721395270
    },
    {
        "content": "<p>Rerun only has <code>Mathlib</code></p>",
        "id": 452568793,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1721395286
    },
    {
        "content": "<p>Does the script reflect that it is only Mathlib?</p>",
        "id": 452568822,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1721395298
    },
    {
        "content": "<p>There are no instructions on where to run it provided</p>",
        "id": 452568882,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1721395321
    },
    {
        "content": "<p>Are you talking about <a href=\"https://github.com/leanprover-community/mathlib4/pull/14887\">#14887</a>?</p>",
        "id": 452568946,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1721395332
    },
    {
        "content": "<p>I think we should add those</p>",
        "id": 452568961,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1721395336
    },
    {
        "content": "<p><span aria-label=\"fencing\" class=\"emoji emoji-1f93a\" role=\"img\" title=\"fencing\">:fencing:</span> <span aria-label=\"check\" class=\"emoji emoji-2705\" role=\"img\" title=\"check\">:check:</span> <span aria-label=\"100\" class=\"emoji emoji-1f4af\" role=\"img\" title=\"100\">:100:</span> <span aria-label=\"rocket\" class=\"emoji emoji-1f680\" role=\"img\" title=\"rocket\">:rocket:</span> <span aria-label=\"octopus\" class=\"emoji emoji-1f419\" role=\"img\" title=\"octopus\">:octopus:</span></p>",
        "id": 452568982,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1721395345
    },
    {
        "content": "<p>Build complete. Now it's uploading cache</p>",
        "id": 452569006,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1721395358
    },
    {
        "content": "<p>I was waiting until adding the other folders</p>",
        "id": 452569065,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1721395384
    },
    {
        "content": "<p>Or not</p>",
        "id": 452569081,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1721395389
    },
    {
        "content": "<p>Maybe I am confused, but it seems to me that <a href=\"https://github.com/leanprover-community/mathlib4/pull/14887\">#14887</a> contains also modifications to <code>Archive</code></p>",
        "id": 452569147,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1721395411
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"306577\">@Matthew Ballard</span> I changed the PR comment to</p>\n<blockquote>\n<p>This PR is generated by running the following script in the <code>Mathlib/</code> directory:</p>\n</blockquote>\n<p>Is that accurate?</p>",
        "id": 452569219,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1721395440
    },
    {
        "content": "<p>Aha, Riccardo thinks it isn't</p>",
        "id": 452569288,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1721395449
    },
    {
        "content": "<p><a href=\"/user_uploads/3121/AL5sABk4aKKK0olz9TDwvWES/image.png\">image.png</a><br>\nThis is what I see</p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/AL5sABk4aKKK0olz9TDwvWES/image.png\" title=\"image.png\"><img src=\"/user_uploads/3121/AL5sABk4aKKK0olz9TDwvWES/image.png\"></a></div>",
        "id": 452569355,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1721395479
    },
    {
        "content": "<p>That’s what I did</p>",
        "id": 452569384,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1721395491
    },
    {
        "content": "<p>Huh... weird<br>\nI also see the changes to Archive</p>",
        "id": 452569503,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1721395532
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/blob/align/Archive/Imo/Imo1959Q1.lean\">https://github.com/leanprover-community/mathlib4/blob/align/Archive/Imo/Imo1959Q1.lean</a> does not contain any <code>align</code></p>",
        "id": 452569562,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1721395556
    },
    {
        "content": "<p>Hmm, I think we should undo my change that the script was run in Mathlib.<br>\nNo idea how those changes to Archive happened. But if they are there, let's merge them.</p>",
        "id": 452569990,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1721395697
    },
    {
        "content": "<p>Away from the machine at the moment. I’ll check the shell log</p>",
        "id": 452570044,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1721395715
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"306577\">@Matthew Ballard</span> how did you fix the conflicts?</p>",
        "id": 452570068,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1721395721
    },
    {
        "content": "<p>Maybe those are the changes made by Kim when opening the PR</p>",
        "id": 452570117,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1721395734
    },
    {
        "content": "<p>I reset to <code>master</code> and re-ran</p>",
        "id": 452570168,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1721395756
    },
    {
        "content": "<p>Hmm, yes, <code>7b17aee0794da0fa968242076166a40d1e66577f</code> contains all the changes</p>",
        "id": 452570479,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1721395849
    },
    {
        "content": "<p>I remember trying <code>lake build </code> and getting a no lake file error because I was in <code>Mathlib</code></p>",
        "id": 452570755,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1721395933
    },
    {
        "content": "<p>Can you check in your bash history if you did <code>rm Init/Align.lean</code>? (without <code>Mathlib/</code>)</p>",
        "id": 452570983,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1721396011
    },
    {
        "content": "<p>Linting passed!</p>",
        "id": 452571058,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1721396042
    },
    {
        "content": "<p>Are we waiting for anything at this point?</p>",
        "id": 452571160,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1721396067
    },
    {
        "content": "<p>ok it was in root</p>",
        "id": 452571246,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1721396091
    },
    {
        "content": "<p>second time</p>",
        "id": 452571327,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1721396103
    },
    {
        "content": "<p>Since everything works this is even better, isn't it?</p>",
        "id": 452571451,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1721396126
    },
    {
        "content": "<p>pr description needs updating</p>",
        "id": 452571459,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1721396129
    },
    {
        "content": "<p>let's just fix the description</p>",
        "id": 452571485,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1721396135
    },
    {
        "content": "<p>LGTM</p>",
        "id": 452571701,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1721396211
    },
    {
        "content": "<p><a href=\"/user_uploads/3121/NvVq3Wh93TXG_A-z-23Pfu35/Screenshot-2024-07-19-at-9.36.36AM.png\">Screenshot-2024-07-19-at-9.36.36AM.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/NvVq3Wh93TXG_A-z-23Pfu35/Screenshot-2024-07-19-at-9.36.36AM.png\" title=\"Screenshot-2024-07-19-at-9.36.36AM.png\"><img src=\"/user_uploads/3121/NvVq3Wh93TXG_A-z-23Pfu35/Screenshot-2024-07-19-at-9.36.36AM.png\"></a></div>",
        "id": 452571707,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1721396216
    },
    {
        "content": "<p>Who is going to do the honours?</p>",
        "id": 452571817,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1721396262
    },
    {
        "content": "<p>You?</p>",
        "id": 452571852,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1721396277
    },
    {
        "content": "<p>It's my PR, so someone else should merge. :-)</p>",
        "id": 452572048,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1721396341
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"306577\">@Matthew Ballard</span> you run the script, you take responsability for hitting \"merge\" <span aria-label=\"grinning\" class=\"emoji emoji-1f600\" role=\"img\" title=\"grinning\">:grinning:</span></p>",
        "id": 452572140,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1721396378
    },
    {
        "content": "<p>Mathlib is soon going to be disaligned!  Very appropriate, being based on Lean...</p>",
        "id": 452572462,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1721396476
    },
    {
        "content": "<p>Merged!</p>",
        "id": 452574161,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1721397026
    },
    {
        "content": "<p>Oof, lots of conflicts on <code>nightly-testing</code> :-) Only about 150, I think I can just do it by hand.</p>",
        "id": 452574836,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1721397171
    },
    {
        "content": "<p>The Lean alignment problem... <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 452574973,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1721397210
    },
    {
        "content": "<p>The <code>one_line_align</code> linter should now be changed to the <code>zero_line_align</code></p>",
        "id": 452575190,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1721397258
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/14909\">#14909</a> removes most (all?) linting associated with <code>#align</code>s.</p>",
        "id": 452578492,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1721397978
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"321459\">Damiano Testa</span> <a href=\"#narrow/stream/144837-PR-reviews/topic/.2314887.20remove.20.23align.20and.20.23align_import.20statements/near/452578492\">said</a>:</p>\n<blockquote>\n<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/14909\">#14909</a> removes most (all?) linting associated with <code>#align</code>s.</p>\n</blockquote>\n<p>The style linters have a tiny bit of code there; cleaning it up...</p>",
        "id": 452580273,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1721398431
    },
    {
        "content": "<p>Did we create a tag for the last revision suitable for <code>mathport</code>?</p>",
        "id": 452580724,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1721398530
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"634338\">Michael Rothgang</span> <a href=\"#narrow/stream/144837-PR-reviews/topic/.2314887.20remove.20.23align.20and.20.23align_import.20statements/near/452580273\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"321459\">Damiano Testa</span> <a href=\"#narrow/stream/144837-PR-reviews/topic/.2314887.20remove.20.23align.20and.20.23align_import.20statements/near/452578492\">said</a>:</p>\n<blockquote>\n<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/14909\">#14909</a> removes most (all?) linting associated with <code>#align</code>s.</p>\n</blockquote>\n<p>The style linters have a tiny bit of code there; cleaning it up...</p>\n</blockquote>\n<p>See <a href=\"https://github.com/leanprover-community/mathlib4/tree/MR-align-stylelint\">branch#MR-align-stylelint</a>; feel free to cherry-pick that into your PR (or should I file a separate one)?</p>",
        "id": 452580900,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1721398568
    },
    {
        "content": "<p>There's a bunch of comments mentioning <code>#align</code>s that were not added during the port. Is anyone working on removing them or should I?</p>",
        "id": 452580932,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1721398574
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"387244\">Yaël Dillies</span> <a href=\"#narrow/stream/144837-PR-reviews/topic/.2314887.20remove.20.23align.20and.20.23align_import.20statements/near/452580932\">said</a>:</p>\n<blockquote>\n<p>There's a bunch of comments mentioning <code>#align</code>s that were not added during the port. Is anyone working on removing them or should I?</p>\n</blockquote>\n<p>I can!</p>",
        "id": 452581053,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1721398599
    },
    {
        "content": "<p>Oh if you want! but I meant this in a \"I can do it, but I don't want to duplicate work\" way</p>",
        "id": 452581165,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1721398641
    },
    {
        "content": "<p>I like popping bubble wrap - do you mind if I start, and if I need to run, you can finish it off?</p>",
        "id": 452581571,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1721398728
    },
    {
        "content": "<p>Sure!</p>",
        "id": 452582143,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1721398852
    },
    {
        "content": "<p>I am currently busy fixing the conflicts that occurred in my 20 PRs <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span></p>",
        "id": 452582254,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1721398875
    },
    {
        "content": "<p>I am going to remove <code>Mathlib.Mathport.Rename</code></p>",
        "id": 452582881,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1721399051
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/14912\">#14912</a> Do we also want to remove <code>Mathlib.Mathport.Rename</code> in the same PR?</p>",
        "id": 452584317,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1721399501
    },
    {
        "content": "<p>Btw, <code>Mathport.Rename</code> also appears in <code>noshake</code>.</p>",
        "id": 452585853,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1721399874
    },
    {
        "content": "<p>Good question! I think this can be done separately, but perhaps it's useful to stage this: <a href=\"https://github.com/leanprover-community/mathlib4/pull/14914\">#14914</a> also removes now-empty <code>Init</code> files, many of which imported <code>Mathport.Rename</code> - this would conflict with the rename. How about landing <a href=\"https://github.com/leanprover-community/mathlib4/pull/14914\">#14914</a> first, and the rename afterwards?</p>",
        "id": 452586119,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1721399919
    },
    {
        "content": "<p>That said: I don't mind folding that into the same PR either.</p>",
        "id": 452586171,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1721399942
    },
    {
        "content": "<p>Doing <code>Rename</code> first sounds like extra busywork; I'd like to avoid that.</p>",
        "id": 452586222,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1721399961
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/14914\">#14914</a> is only about comments, right?</p>",
        "id": 452586450,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1721400031
    },
    {
        "content": "<p>I also included a PR deleting now-empty <code>Init</code> files - I can split that into a separate PR</p>",
        "id": 452586764,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1721400126
    },
    {
        "content": "<p>Ah no, sorry, you also delete the files in <code>Init</code>.</p>",
        "id": 452586778,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1721400130
    },
    {
        "content": "<p>Yes, I think it's better to split this</p>",
        "id": 452586822,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1721400141
    },
    {
        "content": "<p>removing the <code>align</code> comments and be merged immediately</p>",
        "id": 452586866,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1721400153
    },
    {
        "content": "<p>Sure, removed this from the PR: now it should only be comment changes.</p>",
        "id": 452587344,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1721400294
    },
    {
        "content": "<p>That PR feels complete to me now: there are a handful of \"dubious translation\" warnings from mathport in mathlib, which I think somebody which look at more carefully. I have left them in place.</p>",
        "id": 452589663,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1721400936
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"634338\">@Michael Rothgang</span>, while you're at it, there are a few stray <code>set_option linter.uppercaseLean3 false in</code></p>",
        "id": 452592248,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1721401348
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110087\">Kim Morrison</span> <a href=\"#narrow/stream/144837-PR-reviews/topic/.2314887.20remove.20.23align.20and.20.23align_import.20statements/near/452574836\">said</a>:</p>\n<blockquote>\n<p>Oof, lots of conflicts on <code>nightly-testing</code> :-) Only about 150, I think I can just do it by hand.</p>\n</blockquote>\n<p>Managed to automate, I think, we'll see if <code>nightly-testing</code> survived. :-)</p>",
        "id": 452593131,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1721401528
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/14916\">#14916</a> removes the empty Init files (in progress and blocked on <a href=\"https://github.com/leanprover-community/mathlib4/pull/14914\">#14914</a>)</p>",
        "id": 452593391,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1721401584
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"214703\">Yury G. Kudryashov</span> <a href=\"#narrow/stream/144837-PR-reviews/topic/.2314887.20remove.20.23align.20and.20.23align_import.20statements/near/452580724\">said</a>:</p>\n<blockquote>\n<p>Did we create a tag for the last revision suitable for <code>mathport</code>?</p>\n</blockquote>\n<p>I think this should be <code>v4.10.0-rc2</code>.</p>",
        "id": 452593432,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1721401594
    },
    {
        "content": "<p>(As part of a general strategy of encouraging people who are trying to upgrade to use the tagged release versions as rungs on their ladder. If they are really struggling they can also upgrade to the last commit on <code>master</code> before each such tag, so they can alternate adapting to mathlib changes and adapting to lean changes.)</p>",
        "id": 452593696,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1721401661
    },
    {
        "content": "<p>Here comes a naive question: should <code>Mathport/Rename</code> itself also be removed? Or do we want to keep that infrastructure for e.g. future projects running mathport?</p>",
        "id": 452594667,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1721401894
    },
    {
        "content": "<p>I <em>think</em> it can now be removed, but lets move slow on that one.</p>",
        "id": 452594817,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1721401926
    },
    {
        "content": "<p>If somebody feels so inclined: it's worth considering if <code>Logic/Equiv/Array</code> or <code>Data/Array/Lemmas</code> should be deleted now. I'm not sure, hence left them alone for now.</p>",
        "id": 452597539,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1721402651
    },
    {
        "content": "<p>3.4% wallclock <a href=\"http://speed.lean-fro.org/mathlib4/run-detail/4eabe53f-4a11-41d3-9e19-152dcee6aa59\">improvement</a></p>",
        "id": 452613271,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1721406324
    },
    {
        "content": "<p>Also -9.2% in <code>.lean</code>, which I guess means something approximately like: the average proof in Mathlib is less than 8 lines. (1 line blank + 1 line statement + 1 align + 8 proof lines = 11 lines and 9.2% ≈ 1/11; here I'm not even taking into account module docs, or docstrings, or comments, or multiline statements which obviously drive it below 8)</p>",
        "id": 452630310,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1721411767
    },
    {
        "content": "<p>So those were really efficient lines then? ;)</p>",
        "id": 452634193,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1721412914
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110087\">Kim Morrison</span> <a href=\"#narrow/stream/144837-PR-reviews/topic/.2314887.20remove.20.23align.20and.20.23align_import.20statements/near/452613271\">said</a>:</p>\n<blockquote>\n<p>3.4% wallclock <a href=\"http://speed.lean-fro.org/mathlib4/run-detail/4eabe53f-4a11-41d3-9e19-152dcee6aa59\">improvement</a></p>\n</blockquote>\n<p>I told you so at <a href=\"https://github.com/leanprover-community/mathlib4/pull/12410\">#12410</a> ... <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 452644925,
        "sender_full_name": "Michael Stoll",
        "timestamp": 1721416266
    },
    {
        "content": "<p>I'm deleting commented <code>#align</code>s and the files that are now empty (had nothingbut <code>align</code>s)</p>",
        "id": 452650549,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1721417381
    },
    {
        "content": "<p>WIP: <a href=\"https://github.com/leanprover-community/mathlib4/pull/14924\">#14924</a></p>",
        "id": 452653510,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1721418304
    },
    {
        "content": "<p>UPD: I missed <span class=\"user-mention\" data-user-id=\"634338\">@Michael Rothgang</span> 's PRs that do approx. the same. Once they're merged, I'll merge <code>master</code> and see if there is anything left in my branch.</p>",
        "id": 452655846,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1721419056
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/14916\">#14916</a> LGTM. does anyone see a reason to wait?</p>",
        "id": 452656399,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1721419214
    },
    {
        "content": "<p>CI</p>",
        "id": 452658628,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1721419742
    },
    {
        "content": "<p>I didn't notice it's already delegated. Let's wait for CI of course</p>",
        "id": 452659262,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1721419907
    },
    {
        "content": "<p>I've created the tag <a href=\"https://github.com/leanprover-community/mathlib4/releases/tag/v3-eol\">v3-eol</a> for marking the last commit containing align statements. I will make one final release of mathport targeting it</p>",
        "id": 452669393,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1721424626
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/14916\">#14916</a> has various merge conflicts</p>",
        "id": 452671910,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1721426071
    },
    {
        "content": "<p>Fixed</p>",
        "id": 452672201,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1721426235
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110087\">Kim Morrison</span> <a href=\"#narrow/stream/144837-PR-reviews/topic/.2314887.20remove.20.23align.20and.20.23align_import.20statements/near/452593432\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"214703\">Yury G. Kudryashov</span> <a href=\"#narrow/stream/144837-PR-reviews/topic/.2314887.20remove.20.23align.20and.20.23align_import.20statements/near/452580724\">said</a>:</p>\n<blockquote>\n<p>Did we create a tag for the last revision suitable for <code>mathport</code>?</p>\n</blockquote>\n<p>I think this should be <code>v4.10.0-rc2</code>.</p>\n</blockquote>\n<p><span class=\"user-mention\" data-user-id=\"110049\">@Mario Carneiro</span> Do you also want to target this tag <span aria-label=\"up\" class=\"emoji emoji-2b06\" role=\"img\" title=\"up\">:up:</span>? Or was that already done?</p>",
        "id": 452800089,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1721463844
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110049\">Mario Carneiro</span> <a href=\"#narrow/stream/144837-PR-reviews/topic/.2314887.20remove.20.23align.20and.20.23align_import.20statements/near/452669393\">said</a>:</p>\n<blockquote>\n<p>I've created the tag <a href=\"https://github.com/leanprover-community/mathlib4/releases/tag/v3-eol\">v3-eol</a> for marking the last commit containing align statements. I will make one final release of mathport targeting it</p>\n</blockquote>\n<p><span class=\"user-mention\" data-user-id=\"112680\">@Johan Commelin</span></p>",
        "id": 452861562,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1721493184
    },
    {
        "content": "<p>this is now live on mathport, with a corresponding v3-eol tag on mathport as well</p>",
        "id": 452861628,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1721493214
    },
    {
        "content": "<p>and a warning in the readme explaining how people can use it to port projects</p>",
        "id": 452861728,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1721493246
    }
]