[
    {
        "content": "<p>The build is failing. <a href=\"https://github.com/ImperialCollegeLondon/FLT/actions/runs/19715230822/job/56485611746\">Here's a link to the failure</a>. I am merging PRs for which CI passes and then CI fails once they're merged. The error is</p>\n<div class=\"codehilite\" data-code-language=\"Text only\"><pre><span></span><code>Run /home/runner/work/_actions/leanprover-community/docgen-action/deed0cdc44dd8e5de07a300773eb751d33e32fc8/scripts/build_docs.sh\n  /home/runner/work/_actions/leanprover-community/docgen-action/deed0cdc44dd8e5de07a300773eb751d33e32fc8/scripts/build_docs.sh\n  shell: /usr/bin/bash --noprofile --norc -e -o pipefail {0}\n  env:\n    LAKE_PACKAGE_DIRECTORY: .\n    API_DOCS: true\n    BUILD_ARGS: --log-level=warning\n    DOCS_EXISTS: true\n    NAME: FLT\n    DOCS_FACETS: FLT:docs\n    HOMEPAGE: docs\ninfo: docbuild: no previous manifest, creating one from scratch\ninfo: leanprover/doc-gen4: cloning https://github.com/leanprover/doc-gen4\ninfo: leanprover/doc-gen4: checking out revision '8b1135b818a03f16d69fb796589ebb4ad448d5ea'\ninfo: updating toolchain to 'leanprover/lean4:v4.26.0-rc2'\ninfo: restarting Lake via Elan\ninfo: docbuild: no previous manifest, creating one from scratch\ninfo: toolchain not updated; already up-to-date\ninfo: UnicodeBasic: cloning https://github.com/fgdorais/lean4-unicode-basic\ninfo: UnicodeBasic: checking out revision '378b62cdf3bb90d3cd9aa12dc2be43b42bdda339'\nerror: external command 'git' exited with code 128\nError: Process completed with exit code 1.\n</code></pre></div>\n<p>I had imagined that it might be a transient network error but I reran a job and it didn't fix it, I merged another PR and it didn't fix it, so I'm now confused.</p>",
        "id": 560605518,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1764252239
    },
    {
        "content": "<p>Probably this issue: <a class=\"stream-topic\" data-stream-id=\"270676\" href=\"/#narrow/channel/270676-lean4/topic/UnicodeBasic.3A.20.27git.27.20exited.20with.20code.20128/with/560603254\">#lean4 &gt; UnicodeBasic: 'git' exited with code 128</a>  (now fixed?)</p>",
        "id": 560605784,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1764252303
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110038\">@Kevin Buzzard</span> Can you (or someone with the right perms) re-run the CI for <a href=\"https://github.com/ImperialCollegeLondon/FLT/actions/runs/19715230822/job/56485611746\">this specific job</a> (this is for the latest master, commit <code>d7839af</code>). I suspect that will work, since it should fetch the right commit for doc-gen4.</p>\n<p>You'll know it did the right thing if <a href=\"https://github.com/ImperialCollegeLondon/FLT/actions/runs/19715230822/job/56485611746#step:5:2540\">line 2531</a>, all the way at the end, changes from:<br>\n<code>info: UnicodeBasic: checking out revision '378b62cdf3bb90d3cd9aa12dc2be43b42bdda339'</code><br>\n to:<br>\n<code>info: UnicodeBasic: checking out revision '2679356b3372d52f76d6d984eef16cade7956e0c'</code></p>",
        "id": 560616468,
        "sender_full_name": "Aayush Rajasekaran",
        "timestamp": 1764255203
    },
    {
        "content": "<p>I tried rerunning the job and now got an exciting new error! The unicode version I got was<br>\n<code>info: UnicodeBasic: checking out revision '106abeac8ee53a047b238976281b0e5017bded8a'</code><br>\nand then doc-gen seemed to work. But I got an error later on:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">jekyll</span><span class=\"w\"> </span><span class=\"mf\">3.9</span><span class=\"bp\">.</span><span class=\"m\">5</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">Error</span><span class=\"o\">:</span><span class=\"w\">  </span><span class=\"n\">No</span><span class=\"w\"> </span><span class=\"n\">space</span><span class=\"w\"> </span><span class=\"n\">left</span><span class=\"w\"> </span><span class=\"n\">on</span><span class=\"w\"> </span><span class=\"n\">device</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">copy_file_range</span>\n<span class=\"bp\">/</span><span class=\"n\">opt</span><span class=\"bp\">/</span><span class=\"n\">hostedtoolcache</span><span class=\"bp\">/</span><span class=\"n\">Ruby</span><span class=\"bp\">/</span><span class=\"mf\">3.1</span><span class=\"bp\">.</span><span class=\"m\">7</span><span class=\"bp\">/</span><span class=\"n\">x64</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">ruby</span><span class=\"bp\">/</span><span class=\"mf\">3.1</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">/</span><span class=\"n\">fileutils</span><span class=\"bp\">.</span><span class=\"n\">rb</span><span class=\"o\">:</span><span class=\"mi\">1396</span><span class=\"o\">:</span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"ss\">`copy_stream'</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">No</span><span class=\"w\"> </span><span class=\"n\">space</span><span class=\"w\"> </span><span class=\"n\">left</span><span class=\"w\"> </span><span class=\"n\">on</span><span class=\"w\"> </span><span class=\"n\">device</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">copy_file_range</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Errno</span><span class=\"bp\">::</span><span class=\"n\">ENOSPC</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 560661477,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1764271834
    },
    {
        "content": "<p>So I don't know how to fix this. As far as I can see, what's happening is that the CI job</p>\n<div class=\"codehilite\" data-code-language=\"Text only\"><pre><span></span><code>      - name: Upstreaming dashboard\n        run: python3 scripts/upstreaming_dashboard.py\n\n      - uses: leanprover-community/docgen-action@deed0cdc44dd8e5de07a300773eb751d33e32fc8 # 2025-10-26\n        with:\n          blueprint: true\n          homepage: docs\n</code></pre></div>\n<p>in <code>.github/workflows/blueprint.yml</code> spends an hour building the FLT blueprint and when it's successfully done so, does <a href=\"https://github.com/ImperialCollegeLondon/FLT/actions/runs/19747224681/job/56665186563\">this</a>:</p>\n<div class=\"codehilite\" data-code-language=\"Text only\"><pre><span></span><code>...\n✔ [11555/11556] Built FLT/FermatsLastTheorem:docs (3.7s)\nℹ [11556/11556] Built FLT/FLT:docs (8.4s)\ninfo: Documentation indexing\nBuild completed successfully (11556 jobs).\nRun ruby/setup-ruby@eaecf785f6a34567a6d97f686bbb7bccc1ac1e5c\nModifying PATH\nDownloading Ruby\n  https://github.com/ruby/ruby-builder/releases/download/toolcache/ruby-3.1.7-ubuntu-24.04.tar.gz\n  ENOSPC: no space left on device, write\n  Waiting 12 seconds before trying again\n  ENOSPC: no space left on device, write\n  Waiting 11 seconds before trying again\n  Took  23.85 seconds\nError: Error: ENOSPC: no space left on device, write\n</code></pre></div>\n<p>and that's the end of that. </p>\n<p>Am I right in thinking that this <code>leanprover-community/docgen-action</code> is not a part of my project? I am just trying to get to grips with CI.</p>",
        "id": 560941166,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1764446521
    },
    {
        "content": "<p>Others have found that it can help to add a step to free up some disk space: <a href=\"#narrow/channel/458659-Equational/topic/.22No.20space.20left.20on.20device.22/near/559142101\">https://leanprover.zulipchat.com/#narrow/channel/458659-Equational/topic/.22No.20space.20left.20on.20device.22/near/559142101</a></p>",
        "id": 560942087,
        "sender_full_name": "David Renshaw",
        "timestamp": 1764447423
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/docgen-action\"><code>leanprover-community/docgen-action</code></a> tells Github how to build docs for your project.</p>",
        "id": 560942166,
        "sender_full_name": "David Renshaw",
        "timestamp": 1764447532
    },
    {
        "content": "<p>Oh wow this is an entire _repo_? </p>\n<p>I'm trying to learn something about CI this weekend -- thanks!</p>",
        "id": 560942308,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1764447662
    },
    {
        "content": "<p>I'm guessing that it downloads Ruby so that it can call <code>jekyll</code> to build your landing page.</p>",
        "id": 560942312,
        "sender_full_name": "David Renshaw",
        "timestamp": 1764447665
    },
    {
        "content": "<p>I'm preparing a PR for FLT to add the disk-clearing step that Pietro has successfully used elsewhere.</p>",
        "id": 560942362,
        "sender_full_name": "David Renshaw",
        "timestamp": 1764447707
    },
    {
        "content": "<p><a href=\"https://github.com/ImperialCollegeLondon/FLT/pull/776\">https://github.com/ImperialCollegeLondon/FLT/pull/776</a></p>",
        "id": 560942649,
        "sender_full_name": "David Renshaw",
        "timestamp": 1764447989
    },
    {
        "content": "<p>Thanks!</p>",
        "id": 560942965,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1764448289
    },
    {
        "content": "<p>Thank you <span class=\"user-mention\" data-user-id=\"243791\">@David Renshaw</span>!</p>",
        "id": 560944478,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1764449982
    }
]