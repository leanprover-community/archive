[
    {
        "content": "<p>Another one at <a href=\"https://github.com/ImperialCollegeLondon/FLT/pull/131\">FLT#131</a></p>",
        "id": 469584671,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1726126890
    },
    {
        "content": "<p><a href=\"https://github.com/ImperialCollegeLondon/FLT/pull/177\">FLT#177</a></p>",
        "id": 478285230,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1729603717
    },
    {
        "content": "<p>I'll take a quick look</p>",
        "id": 478286418,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1729604018
    },
    {
        "content": "<p>It seems a few lemmas have been ported to mathlib recently.</p>",
        "id": 478286676,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1729604083
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110038\">@Kevin Buzzard</span> should I delete all the module topology experiments now?</p>",
        "id": 478288331,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1729604509
    },
    {
        "content": "<p>Definitely don't bump them! There's one file which contains the arguments which work and I'm in the process of porting it. I can just delete the old ones now if you like</p>",
        "id": 478298010,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1729607083
    },
    {
        "content": "<p>That would work too - <code>HIMExperiments/FGModuleTopology.lean</code> is the one that I got to that's failing</p>",
        "id": 478298988,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1729607371
    },
    {
        "content": "<p>(I'll wait for that)</p>",
        "id": 478302932,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1729608521
    },
    {
        "content": "<p>The file we need to keep is FLT.ForMathlib.ActionTopology . All the other module topologies are now nuked.</p>",
        "id": 478318148,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1729612411
    },
    {
        "content": "<p>BTW the next step in the ongoing port of <code>FLT.ForMathlib.ActionTopology</code> to mathlib is <a href=\"https://github.com/leanprover-community/mathlib4/pull/18077\">#18077</a></p>",
        "id": 478319900,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1729612974
    },
    {
        "content": "<p><a href=\"https://github.com/ImperialCollegeLondon/FLT/pull/179\">FLT#179</a> is up</p>",
        "id": 478320512,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1729613157
    },
    {
        "content": "<p>The <code>update-dependencies</code> workflow raised an issue (<a href=\"https://github.com/ImperialCollegeLondon/FLT/pull/182\">FLT#182</a>). </p>\n<p>Opened <a href=\"https://github.com/ImperialCollegeLondon/FLT/pull/183\">FLT#183</a> to fix it.</p>",
        "id": 478879904,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1729849132
    },
    {
        "content": "<p>The <code>update-dependencies</code> workflow raised an issue (<a href=\"https://github.com/ImperialCollegeLondon/FLT/pull/189\">FLT#189</a>). </p>\n<p>Opened <a href=\"https://github.com/ImperialCollegeLondon/FLT/pull/190\">FLT#190</a> to fix it.</p>",
        "id": 480067440,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1730473758
    },
    {
        "content": "<p>I want to bump mathlib to fix <a href=\"#narrow/channel/287929-mathlib4/topic/lake.20exe.20cache.20get.20error/near/480762054\">this problem</a>. </p>\n<p>I am on main locally. I fire up VS Code, click the upside-down A -&gt; project actions -&gt; project: update dependency -&gt; mathlib -&gt; proceed, and after everything has downloaded the diff for <code>lake-manifest.json</code> looks like this:</p>\n<div class=\"codehilite\" data-code-language=\"Diff\"><pre><span></span><code>buzzard@buster:~/lean-projects/FLT$ git diff lake-manifest.json | cat\n<span class=\"gh\">diff --git a/lake-manifest.json b/lake-manifest.json</span>\n<span class=\"gh\">index 9dbb3ba..22896e0 100644</span>\n<span class=\"gd\">--- a/lake-manifest.json</span>\n<span class=\"gi\">+++ b/lake-manifest.json</span>\n<span class=\"gu\">@@ -5,7 +5,7 @@</span>\n<span class=\"w\"> </span>   \"type\": \"git\",\n<span class=\"w\"> </span>   \"subDir\": null,\n<span class=\"w\"> </span>   \"scope\": \"leanprover-community\",\n<span class=\"gd\">-   \"rev\": \"76e9ebe4176d29cb9cc89c669ab9f1ce32b33c3d\",</span>\n<span class=\"gi\">+   \"rev\": \"af731107d531b39cd7278c73f91c573f40340612\",</span>\n<span class=\"w\"> </span>   \"name\": \"batteries\",\n<span class=\"w\"> </span>   \"manifestFile\": \"lake-manifest.json\",\n<span class=\"w\"> </span>   \"inputRev\": \"main\",\n<span class=\"gu\">@@ -25,7 +25,7 @@</span>\n<span class=\"w\"> </span>   \"type\": \"git\",\n<span class=\"w\"> </span>   \"subDir\": null,\n<span class=\"w\"> </span>   \"scope\": \"leanprover-community\",\n<span class=\"gd\">-   \"rev\": \"45d016d59cf45bcf8493a203e9564cfec5203d9b\",</span>\n<span class=\"gi\">+   \"rev\": \"93bcfd774f89d3874903cab06abfbf69f327cbd9\",</span>\n<span class=\"w\"> </span>   \"name\": \"aesop\",\n<span class=\"w\"> </span>   \"manifestFile\": \"lake-manifest.json\",\n<span class=\"w\"> </span>   \"inputRev\": \"master\",\n<span class=\"gu\">@@ -65,7 +65,7 @@</span>\n<span class=\"w\"> </span>   \"type\": \"git\",\n<span class=\"w\"> </span>   \"subDir\": null,\n<span class=\"w\"> </span>   \"scope\": \"leanprover-community\",\n<span class=\"gd\">-   \"rev\": \"7bedaed1ef024add1e171cc17706b012a9a37802\",</span>\n<span class=\"gi\">+   \"rev\": \"86d0d0584f5cd165353e2f8a30c455cd0e168ac2\",</span>\n<span class=\"w\"> </span>   \"name\": \"LeanSearchClient\",\n<span class=\"w\"> </span>   \"manifestFile\": \"lake-manifest.json\",\n<span class=\"w\"> </span>   \"inputRev\": \"main\",\n<span class=\"gu\">@@ -75,7 +75,7 @@</span>\n<span class=\"w\"> </span>   \"type\": \"git\",\n<span class=\"w\"> </span>   \"subDir\": null,\n<span class=\"w\"> </span>   \"scope\": \"leanprover-community\",\n<span class=\"gd\">-   \"rev\": \"0f1430e6f1193929f13905d450b2a44a54f3927e\",</span>\n<span class=\"gi\">+   \"rev\": \"42dc02bdbc5d0c2f395718462a76c3d87318f7fa\",</span>\n<span class=\"w\"> </span>   \"name\": \"plausible\",\n<span class=\"w\"> </span>   \"manifestFile\": \"lake-manifest.json\",\n<span class=\"w\"> </span>   \"inputRev\": \"main\",\n<span class=\"gu\">@@ -85,7 +85,7 @@</span>\n<span class=\"w\"> </span>   \"type\": \"git\",\n<span class=\"w\"> </span>   \"subDir\": null,\n<span class=\"w\"> </span>   \"scope\": \"\",\n<span class=\"gd\">-   \"rev\": \"079e5ca5a630dabf441b6b74924402b266c3f748\",</span>\n<span class=\"gi\">+   \"rev\": \"3ebc312bace785723ab6bb304c6a102dcc55bdee\",</span>\n<span class=\"w\"> </span>   \"name\": \"mathlib\",\n<span class=\"w\"> </span>   \"manifestFile\": \"lake-manifest.json\",\n<span class=\"w\"> </span>   \"inputRev\": null,\n<span class=\"gu\">@@ -100,46 +100,6 @@</span>\n<span class=\"w\"> </span>   \"manifestFile\": \"lake-manifest.json\",\n<span class=\"w\"> </span>   \"inputRev\": null,\n<span class=\"w\"> </span>   \"inherited\": false,\n<span class=\"gd\">-   \"configFile\": \"lakefile.lean\"},</span>\n<span class=\"gd\">-  {\"url\": \"https://github.com/acmepjz/md4lean\",</span>\n<span class=\"gd\">-   \"type\": \"git\",</span>\n<span class=\"gd\">-   \"subDir\": null,</span>\n<span class=\"gd\">-   \"scope\": \"\",</span>\n<span class=\"gd\">-   \"rev\": \"5e95f4776be5e048364f325c7e9d619bb56fb005\",</span>\n<span class=\"gd\">-   \"name\": \"MD4Lean\",</span>\n<span class=\"gd\">-   \"manifestFile\": \"lake-manifest.json\",</span>\n<span class=\"gd\">-   \"inputRev\": \"main\",</span>\n<span class=\"gd\">-   \"inherited\": true,</span>\n<span class=\"gd\">-   \"configFile\": \"lakefile.lean\"},</span>\n<span class=\"gd\">-  {\"url\": \"https://github.com/fgdorais/lean4-unicode-basic\",</span>\n<span class=\"gd\">-   \"type\": \"git\",</span>\n<span class=\"gd\">-   \"subDir\": null,</span>\n<span class=\"gd\">-   \"scope\": \"\",</span>\n<span class=\"gd\">-   \"rev\": \"b41bc9cec7f433d6e1d74ff3b59edaaf58ad2915\",</span>\n<span class=\"gd\">-   \"name\": \"UnicodeBasic\",</span>\n<span class=\"gd\">-   \"manifestFile\": \"lake-manifest.json\",</span>\n<span class=\"gd\">-   \"inputRev\": \"main\",</span>\n<span class=\"gd\">-   \"inherited\": true,</span>\n<span class=\"gd\">-   \"configFile\": \"lakefile.lean\"},</span>\n<span class=\"gd\">-  {\"url\": \"https://github.com/dupuisf/BibtexQuery\",</span>\n<span class=\"gd\">-   \"type\": \"git\",</span>\n<span class=\"gd\">-   \"subDir\": null,</span>\n<span class=\"gd\">-   \"scope\": \"\",</span>\n<span class=\"gd\">-   \"rev\": \"bdc2fc30b1e834b294759a5d391d83020a90058e\",</span>\n<span class=\"gd\">-   \"name\": \"BibtexQuery\",</span>\n<span class=\"gd\">-   \"manifestFile\": \"lake-manifest.json\",</span>\n<span class=\"gd\">-   \"inputRev\": \"master\",</span>\n<span class=\"gd\">-   \"inherited\": true,</span>\n<span class=\"gd\">-   \"configFile\": \"lakefile.lean\"},</span>\n<span class=\"gd\">-  {\"url\": \"https://github.com/leanprover/doc-gen4\",</span>\n<span class=\"gd\">-   \"type\": \"git\",</span>\n<span class=\"gd\">-   \"subDir\": null,</span>\n<span class=\"gd\">-   \"scope\": \"\",</span>\n<span class=\"gd\">-   \"rev\": \"b6ae1cf11e83d972ffa363f9cdc8a2f89aaa24dc\",</span>\n<span class=\"gd\">-   \"name\": \"¬´doc-gen4¬ª\",</span>\n<span class=\"gd\">-   \"manifestFile\": \"lake-manifest.json\",</span>\n<span class=\"gd\">-   \"inputRev\": \"main\",</span>\n<span class=\"gd\">-   \"inherited\": false,</span>\n<span class=\"w\"> </span>   \"configFile\": \"lakefile.lean\"}],\n<span class=\"w\"> </span> \"name\": \"FLT\",\n<span class=\"w\"> </span> \"lakeDir\": \".lake\"}\n</code></pre></div>\n<p>In particular, this procedure has nuked <code>md4lean</code>, <code>lean4-unicode-basic</code>, <code>BibtexQuery</code> and <code>doc-gen4</code>. I only noticed after I pushed, and now I've had to revert.</p>\n<p>Am I doing something wrong? I am desperate to get FLT working again.</p>",
        "id": 480957010,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1730910482
    },
    {
        "content": "<p>That's because doc-gen is an optional dependency. I never remember how to make <code>lake update</code> remember to add it, though</p>",
        "id": 480957315,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1730910573
    },
    {
        "content": "<p>Does this mean that I can't update with point-and-click? I remember sometimes some kind of <code>-Kenv=dev</code> option but I had understood some recent message somewhere here as implying that this wasn't needed any more. I'll give it another go.</p>\n<p><code>lake update -Kenv=dev mathlib</code>?</p>",
        "id": 480958394,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1730910896
    },
    {
        "content": "<p>Nope, it still nukes them (I have no idea what that option does but apparently it doesn't do this)</p>",
        "id": 480959115,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1730911113
    },
    {
        "content": "<p>Aah, got it. First update <code>lean-toolchain</code> manually, then <code>lake -R -Kenv=dev update</code>.</p>",
        "id": 480963135,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1730912389
    },
    {
        "content": "<p>In a few months I will ask how to do this again and you can all laugh at the old man.</p>",
        "id": 480963380,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1730912445
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110038\">@Kevin Buzzard</span> Next time you can just run the executable <code>scripts/update_mathlib.sh</code>.</p>",
        "id": 480984872,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1730920547
    },
    {
        "content": "<p>Thanks, and apologies if you told me this already :-)</p>",
        "id": 480993159,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1730924144
    },
    {
        "content": "<p>Can projects please please heed our repeated suggestions to <em>stop using</em> <code>-R -Kenv=dev</code>.</p>",
        "id": 481011562,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1730932265
    },
    {
        "content": "<p>Well can someone make it so that I can do the point and click thing which I did above and it updates my project without it also decimating my <code>lake-manifest.json</code> file? I really have no understanding of what's happening or what any of these commands do, I just searched for update and doc-gen and found some mumbo-jumbo on Zulip which worked for me, but this was only because I've not been able to work on FLT for several days for reasons which I don't really understand :-( (and don't particularly want to understand unless they'll actually help me later before I forget them)</p>",
        "id": 481013637,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1730933431
    },
    {
        "content": "<p>Yes, convince Yael and Pietro and whoever else have been super helpful setting up maths projects for people that we should remove all the reliance of <code>-R -Kenv=dev</code> in the ecosystem, and that if this comes at the cost of requiring a separate repo for doc-generation, then it is still overall an improvement. I've suggested this a number of times. :-)</p>",
        "id": 481014638,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1730934009
    },
    {
        "content": "<p>(I have seen it suggested thrice)</p>",
        "id": 481016270,
        "sender_full_name": "Ya√´l Dillies",
        "timestamp": 1730935005
    },
    {
        "content": "<p>We can do the change but I am not yet clear about how to update my workflows</p>",
        "id": 481016319,
        "sender_full_name": "Ya√´l Dillies",
        "timestamp": 1730935046
    },
    {
        "content": "<p>Ops, I have never seen such a suggestion. Sorry! </p>\n<p>Happy to change that, but I need a bit of time to dive a bit deeper and see how to actually do it.</p>",
        "id": 481023081,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1730939347
    },
    {
        "content": "<p>Is setting up a separate repository really supposed to be the simpler approach?</p>",
        "id": 481053822,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1730961308
    },
    {
        "content": "<ol>\n<li>Things are eventually going to change, e.g. we might have a service that handles doc-gen for all projects.</li>\n<li>Another option is just making doc-gen a first class dependency.</li>\n<li>It does appear likely to be simpler than dealing with everyone's confusion with <code>lake -R</code>...</li>\n</ol>",
        "id": 481055481,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1730962353
    },
    {
        "content": "<p>There was a suggestion somewhere of having two packages in different folders of the same github repository instead?  Or did I misunderstand? That would be more convenient. Is there an example of a repository that implemented one of those changes?</p>",
        "id": 481055679,
        "sender_full_name": "R√©my Degenne",
        "timestamp": 1730962504
    },
    {
        "content": "<p>Here and a couple of messages below: <a href=\"#narrow/channel/270676-lean4/topic/Improving.20the.20Windows.20user.20experience/near/479463868\">https://leanprover.zulipchat.com/#narrow/channel/270676-lean4/topic/Improving.20the.20Windows.20user.20experience/near/479463868</a></p>",
        "id": 481057481,
        "sender_full_name": "R√©my Degenne",
        "timestamp": 1730963515
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110087\">Kim Morrison</span> <a href=\"#narrow/channel/416277-FLT/topic/Mathlib.20bump/near/481011562\">said</a>:</p>\n<blockquote>\n<p>Can projects please please heed our repeated suggestions to <em>stop using</em> <code>-R -Kenv=dev</code>.</p>\n</blockquote>\n<p>What is the alternative? I have no objection to switching to something simpler (I've not had confusion with <code>lake -R</code>, but I'll take your word that it's bad), but I have no idea what I'm meant to be using instead.</p>",
        "id": 481379894,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1731096657
    },
    {
        "content": "<p>Please see <a href=\"https://github.com/leanprover-community/batteries/pull/1028\">batteries#1028</a> for what looks like a good model.</p>",
        "id": 481396934,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1731105260
    },
    {
        "content": "<p>Otherwise just a second downstream repository that includes doc-gen as a standard require.</p>",
        "id": 481396970,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1731105279
    },
    {
        "content": "<p>Obviously neither of these are great, and Mac + David are in different directions working on making this better, but I think <em>with the current version of Lean</em> these are both better than <code>-R -Kenv=dev</code>.</p>",
        "id": 481397050,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1731105329
    },
    {
        "content": "<p>I can volunteer to propose the \"subdirectory\" model, if desired. May take me until November 18/19, though.</p>",
        "id": 481447755,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1731147359
    },
    {
        "content": "<p>Thank you! I'm not in a hurry, I finally understand the situation here. If the only issue with kenvdev is that it's confusing then I'm now unconfused because I've now understood have a script to do this.</p>",
        "id": 481449066,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1731148594
    },
    {
        "content": "<p>I think the problem here is that it is confusing, people have remained in a state of confusion for a long time, and that this confusion has affected multiple projects. Seems like it might be an indication we should be using a different approach?</p>",
        "id": 481599247,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1731274305
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110087\">@Kim Morrison</span> It is all well and good to say \"don't use X\" but it's not effective advice unless it comes with \"use Y instead\". What is the proposed alternative here?</p>",
        "id": 481599917,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1731274902
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110087\">Kim Morrison</span> <a href=\"#narrow/channel/416277-FLT/topic/Mathlib.20bump/near/481396934\">said</a>:</p>\n<blockquote>\n<p>Please see <a href=\"https://github.com/leanprover-community/batteries/pull/1028\">batteries#1028</a> for what looks like a good model.</p>\n</blockquote>",
        "id": 481599969,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1731274928
    },
    {
        "content": "<p>can we do something to make that easier? there is a lot of code in that PR</p>",
        "id": 481600051,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1731275032
    },
    {
        "content": "<p>at the very least, a how to guide for users to be able to do the copy paste correctly</p>",
        "id": 481600132,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1731275093
    },
    {
        "content": "<p>Mathlib got the adeles of a number field in the last 24 hours or so. I used the script to bump FLT yesterday evening and it worked fine. As far as I'm concerned the script (ie -R -Kdev=env but something is remembering this for me) is a good solution for now. If someone comes up with a PR giving a better solution I'll be happy to merge it but right now I'm happy with the status quo.</p>",
        "id": 481600172,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1731275142
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110049\">Mario Carneiro</span> <a href=\"#narrow/channel/416277-FLT/topic/Mathlib.20bump/near/481600132\">said</a>:</p>\n<blockquote>\n<p>at the very least, a how to guide for users to be able to do the copy paste correctly</p>\n</blockquote>\n<p>I did in fact just try and fail to adapt APAP to use that approach</p>",
        "id": 481600679,
        "sender_full_name": "Ya√´l Dillies",
        "timestamp": 1731275568
    },
    {
        "content": "<p>The other thing is that the <code>update_mathlib.sh</code> script automatically updates <code>lean-toolchain</code>, thus avoiding a variety of confusing behavior</p>",
        "id": 481600730,
        "sender_full_name": "Ya√´l Dillies",
        "timestamp": 1731275635
    },
    {
        "content": "<p>I'm going to look at the elliptic curve changes</p>",
        "id": 485171223,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1732921814
    },
    {
        "content": "<p><a href=\"https://github.com/ImperialCollegeLondon/FLT/pull/248\">FLT#248</a></p>",
        "id": 485174134,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1732924463
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"307953\">Ruben Van de Velde</span> <a href=\"#narrow/channel/416277-FLT/topic/Mathlib.20bump/near/485174134\">said</a>:</p>\n<blockquote>\n<p><a href=\"https://github.com/ImperialCollegeLondon/FLT/pull/248\">FLT#248</a></p>\n</blockquote>\n<p>The checkdecls step failed on push to <code>main</code> due to the renaming of <code>EllipticCurve</code> to <code>WeierstrassCurve</code>. Pushed the fix now.</p>",
        "id": 485243199,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1732984436
    },
    {
        "content": "<p>A few weeks ago, I added the <code>run_before_push.sh</code> script <a href=\"https://github.com/ImperialCollegeLondon/FLT/blob/main/scripts/run_before_push.sh\">here</a> to be executed locally before pushing, specifically to help prevent issues like this.</p>",
        "id": 485243400,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1732984603
    },
    {
        "content": "<p>A more robust alternative could be to unify <code>push.yml </code>and <code>push_pr.yml</code> into a single <code>blueprint.yml</code> workflow file, where the push and PR events share all steps except for the GitHub Pages deployment. This would be the setup we adopt in the <a class=\"stream\" data-stream-id=\"458659\" href=\"/#narrow/channel/458659-Equational\">#Equational</a> and <a class=\"stream\" data-stream-id=\"455414\" href=\"/#narrow/channel/455414-Infinity-Cosmos\">#Infinity-Cosmos</a> projects.</p>\n<p>Let me know if you want that.</p>",
        "id": 485243851,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1732984945
    },
    {
        "content": "<p>I mean, if that's not what ci is for, what is?</p>",
        "id": 485250876,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1732990754
    },
    {
        "content": "<p>Yes, I don't know why they were not already included. In any case, I will add it later.</p>",
        "id": 485251006,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1732990859
    },
    {
        "content": "<p>Done <a href=\"https://github.com/ImperialCollegeLondon/FLT/pull/249\">FLT#249</a></p>",
        "id": 485252586,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1732992365
    },
    {
        "content": "<p>I merged the PR because github seemed happy and then I realised later on that something was broken, but my local copy was even more broken because I had local edits and was in the middle of something, so I ended up spending several hours finishing the something (which is still not quite done). In short, I noticed the problem but wasn't in a position to fix it. So sure, let's get CI to not let these things happen!</p>",
        "id": 485415927,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1732996669
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"556875\">Pietro Monticone</span> <a href=\"#narrow/channel/416277-FLT/topic/Mathlib.20bump/near/485252586\">said</a>:</p>\n<blockquote>\n<p>Done <a href=\"https://github.com/ImperialCollegeLondon/FLT/pull/249\">FLT#249</a></p>\n</blockquote>\n<p>I am not really in any position to review this PR. <span class=\"user-mention\" data-user-id=\"307953\">@Ruben Van de Velde</span> does it look OK to you? I think I'll go back to my infinite places work!</p>",
        "id": 485416033,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1732996793
    },
    {
        "content": "<p><a href=\"https://github.com/ImperialCollegeLondon/FLT/pull/262\">FLT#262</a> bumps to the latest Mathlib + v4.15.0-rc1 toolchain.</p>",
        "id": 485544651,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1733114421
    },
    {
        "content": "<p>(This fails in CI at doc-gen... I'll leave this to someone who enjoys <code>-R</code> more than me. :-)</p>",
        "id": 485545270,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1733114889
    },
    {
        "content": "<p>Done.</p>",
        "id": 485548105,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1733117171
    },
    {
        "content": "<p>Do we not want an intermediate commit that matches the release tag?</p>",
        "id": 485553264,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1733120788
    },
    {
        "content": "<p>The release tag will be created automatically, right?</p>",
        "id": 485555741,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1733122350
    },
    {
        "content": "<p>Pointing at what, if there's no commit that uses mathlib's v4.14.0 tag?</p>",
        "id": 485574502,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1733130126
    },
    {
        "content": "<p>Oh, now I see what you mean. You were referring to v4.14.0, sorry. </p>\n<p>Then yes, I think it‚Äôs better to have an intermediate commit.</p>",
        "id": 485646372,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1733152360
    },
    {
        "content": "<p><a href=\"https://github.com/ImperialCollegeLondon/FLT/pull/335\">FLT#335</a> bumps to the latest Mathlib and <code>v4.17.0-rc1</code> toolchain.</p>",
        "id": 498049406,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1738825453
    },
    {
        "content": "<p>Do you not want an intermediate tag for 4.16 stable?</p>",
        "id": 498053474,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1738827166
    },
    {
        "content": "<p>Yes, good idea. Thanks.</p>",
        "id": 498053703,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1738827260
    },
    {
        "content": "<p>Done <a href=\"https://github.com/ImperialCollegeLondon/FLT/pull/337\">FLT#337</a></p>",
        "id": 498064053,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1738831184
    },
    {
        "content": "<p>Merged both of them.</p>",
        "id": 498170463,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1738861566
    },
    {
        "content": "<p>Thanks! Sorry, I'm having a busy week (two talks)</p>",
        "id": 498204276,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1738873445
    },
    {
        "content": "<p><a href=\"https://github.com/ImperialCollegeLondon/FLT/pull/350\">FLT#350</a></p>",
        "id": 500468634,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1739898200
    },
    {
        "content": "<p>I had a quick look - bumping mathlib is currently broken with an issue related to <code>ModuleCat.ofHom</code> in <code>preweight.fdRep</code> (maybe due to <span class=\"user-mention\" data-user-id=\"238446\">@Anne Baanen</span>'s work?) , and an issue with <code>HeightOneSpectrum.adicCompletion</code> in <code>adicCompletionComap_isModuleTopology</code> and following (I'm guessing <a href=\"https://github.com/leanprover-community/mathlib4/pull/22055\">#22055</a> from <span class=\"user-mention\" data-user-id=\"650358\">@Salvatore Mercuri</span>)</p>",
        "id": 502783596,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1740860357
    },
    {
        "content": "<p><code>BaseChange.lean</code> probably needs to have <code>K</code> and <code>L</code> replaced with <code>WithVal (v.valuation K)</code> and <code>WithVal (w.valuation L)</code> resp. throughout (and maybe remove the <code>letI</code>'s) as a result of <a href=\"https://github.com/leanprover-community/mathlib4/pull/22055\">#22055</a>. Feel free to send any specific errors my way relating to that! Will be away from screen for the rest of today, but I can also take a look at bumping tomorrow</p>",
        "id": 502845871,
        "sender_full_name": "Salvatore Mercuri",
        "timestamp": 1740911458
    },
    {
        "content": "<p>I'll leave it for you tomorrow :)</p>",
        "id": 502849353,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1740914147
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"307953\">Ruben Van de Velde</span> <a href=\"#narrow/channel/416277-FLT/topic/Mathlib.20bump/near/502783596\">said</a>:</p>\n<blockquote>\n<p>I had a quick look - bumping mathlib is currently broken with an issue related to <code>ModuleCat.ofHom</code> in <code>preweight.fdRep</code> (maybe due to <span class=\"user-mention silent\" data-user-id=\"238446\">Anne Baanen</span>'s work?)</p>\n</blockquote>\n<p>Does it work if you replace <code>ModuleCat.ofHom</code> with <code>FGModuleCat.ofHom</code>? (What is the error precisely?)</p>",
        "id": 502864883,
        "sender_full_name": "Anne Baanen",
        "timestamp": 1740925058
    },
    {
        "content": "<p>Apparently not:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">GLnDefs</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mi\">288</span><span class=\"o\">:</span><span class=\"mi\">21</span>\n\n<span class=\"o\">(</span><span class=\"n\">deterministic</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">timeout</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"ss\">`whnf</span><span class=\"bp\">`</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">maximum</span><span class=\"w\"> </span><span class=\"n\">number</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">heartbeats</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">200000</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">has</span><span class=\"w\"> </span><span class=\"n\">been</span><span class=\"w\"> </span><span class=\"n\">reached</span>\n<span class=\"n\">Use</span><span class=\"w\"> </span><span class=\"ss\">`set_option</span><span class=\"w\"> </span><span class=\"n\">maxHeartbeats</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"n\">num</span><span class=\"bp\">&gt;`</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">set</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">limit</span><span class=\"bp\">.</span>\n<span class=\"n\">Additional</span><span class=\"w\"> </span><span class=\"n\">diagnostic</span><span class=\"w\"> </span><span class=\"n\">information</span><span class=\"w\"> </span><span class=\"n\">may</span><span class=\"w\"> </span><span class=\"n\">be</span><span class=\"w\"> </span><span class=\"n\">available</span><span class=\"w\"> </span><span class=\"kn\">using</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"ss\">`set_option</span><span class=\"w\"> </span><span class=\"n\">diagnostics</span><span class=\"w\"> </span><span class=\"n\">true</span><span class=\"bp\">`</span><span class=\"w\"> </span><span class=\"n\">command</span><span class=\"bp\">.</span>\n\n<span class=\"n\">GLnDefs</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mi\">287</span><span class=\"o\">:</span><span class=\"mi\">20</span>\n\n<span class=\"n\">failed</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">synthesize</span>\n<span class=\"w\">  </span><span class=\"n\">MulOneClass</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">FGModuleCat</span><span class=\"bp\">.</span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"bp\">?</span><span class=\"n\">m</span><span class=\"bp\">.</span><span class=\"m\">289793</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"n\">w</span><span class=\"bp\">.</span><span class=\"n\">d</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">‚ÑÇ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">‚ü∂</span><span class=\"w\"> </span><span class=\"n\">FGModuleCat</span><span class=\"bp\">.</span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"bp\">?</span><span class=\"n\">m</span><span class=\"bp\">.</span><span class=\"m\">289793</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"n\">w</span><span class=\"bp\">.</span><span class=\"n\">d</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">‚ÑÇ</span><span class=\"o\">))</span>\n<span class=\"n\">Additional</span><span class=\"w\"> </span><span class=\"n\">diagnostic</span><span class=\"w\"> </span><span class=\"n\">information</span><span class=\"w\"> </span><span class=\"n\">may</span><span class=\"w\"> </span><span class=\"n\">be</span><span class=\"w\"> </span><span class=\"n\">available</span><span class=\"w\"> </span><span class=\"kn\">using</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"ss\">`set_option</span><span class=\"w\"> </span><span class=\"n\">diagnostics</span><span class=\"w\"> </span><span class=\"n\">true</span><span class=\"bp\">`</span><span class=\"w\"> </span><span class=\"n\">command</span><span class=\"bp\">.</span>\n\n<span class=\"n\">GLnDefs</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mi\">287</span><span class=\"o\">:</span><span class=\"mi\">20</span>\n\n<span class=\"n\">failed</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">synthesize</span>\n<span class=\"w\">  </span><span class=\"n\">One</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">FGModuleCat</span><span class=\"bp\">.</span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"bp\">?</span><span class=\"n\">m</span><span class=\"bp\">.</span><span class=\"m\">289793</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"n\">w</span><span class=\"bp\">.</span><span class=\"n\">d</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">‚ÑÇ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">‚ü∂</span><span class=\"w\"> </span><span class=\"n\">FGModuleCat</span><span class=\"bp\">.</span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"bp\">?</span><span class=\"n\">m</span><span class=\"bp\">.</span><span class=\"m\">289793</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"n\">w</span><span class=\"bp\">.</span><span class=\"n\">d</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">‚ÑÇ</span><span class=\"o\">))</span>\n<span class=\"n\">Additional</span><span class=\"w\"> </span><span class=\"n\">diagnostic</span><span class=\"w\"> </span><span class=\"n\">information</span><span class=\"w\"> </span><span class=\"n\">may</span><span class=\"w\"> </span><span class=\"n\">be</span><span class=\"w\"> </span><span class=\"n\">available</span><span class=\"w\"> </span><span class=\"kn\">using</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"ss\">`set_option</span><span class=\"w\"> </span><span class=\"n\">diagnostics</span><span class=\"w\"> </span><span class=\"n\">true</span><span class=\"bp\">`</span><span class=\"w\"> </span><span class=\"n\">command</span><span class=\"bp\">.</span>\n\n<span class=\"n\">GLnDefs</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mi\">287</span><span class=\"o\">:</span><span class=\"mi\">7</span>\n\n<span class=\"n\">failed</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">synthesize</span>\n<span class=\"w\">  </span><span class=\"n\">Monoid</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">FGModuleCat</span><span class=\"bp\">.</span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"bp\">?</span><span class=\"n\">m</span><span class=\"bp\">.</span><span class=\"m\">289793</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"n\">w</span><span class=\"bp\">.</span><span class=\"n\">d</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">‚ÑÇ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">‚ü∂</span><span class=\"w\"> </span><span class=\"n\">FGModuleCat</span><span class=\"bp\">.</span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"bp\">?</span><span class=\"n\">m</span><span class=\"bp\">.</span><span class=\"m\">289793</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"n\">w</span><span class=\"bp\">.</span><span class=\"n\">d</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">‚ÑÇ</span><span class=\"o\">))</span>\n<span class=\"n\">Additional</span><span class=\"w\"> </span><span class=\"n\">diagnostic</span><span class=\"w\"> </span><span class=\"n\">information</span><span class=\"w\"> </span><span class=\"n\">may</span><span class=\"w\"> </span><span class=\"n\">be</span><span class=\"w\"> </span><span class=\"n\">available</span><span class=\"w\"> </span><span class=\"kn\">using</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"ss\">`set_option</span><span class=\"w\"> </span><span class=\"n\">diagnostics</span><span class=\"w\"> </span><span class=\"n\">true</span><span class=\"bp\">`</span><span class=\"w\"> </span><span class=\"n\">command</span><span class=\"bp\">.</span>\n</code></pre></div>",
        "id": 502869034,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1740928006
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"238446\">@Anne Baanen</span>, just bringing this one to your attention; if it hasn't been sorted out perhaps you can suggest something?</p>",
        "id": 502902788,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1740951482
    },
    {
        "content": "<p>Ah, I figured it out. The <code>.ofHom</code> is indeed the issue, but it should be removed altogether:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">noncomputable</span><span class=\"w\"> </span><span class=\"kd\">def</span><span class=\"w\"> </span><span class=\"n\">preweight.fdRep</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">‚Ñï</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">w</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">preweight</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">FDRep</span><span class=\"w\"> </span><span class=\"n\">‚ÑÇ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">orthogonalGroup</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">‚Ñù</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">where</span>\n<span class=\"w\">  </span><span class=\"n\">V</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">FGModuleCat.of</span><span class=\"w\"> </span><span class=\"n\">‚ÑÇ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"n\">w.d</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">‚ÑÇ</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"n\">œÅ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">{</span>\n<span class=\"w\">    </span><span class=\"n\">toFun</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">‚Ü¶</span><span class=\"w\"> </span><span class=\"n\">ModuleCat.ofHom</span><span class=\"w\"> </span><span class=\"o\">{</span>\n<span class=\"w\">      </span><span class=\"n\">toFun</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">‚Ü¶</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">w.rho</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">*·µ•</span><span class=\"w\"> </span><span class=\"n\">x</span>\n<span class=\"w\">      </span><span class=\"n\">map_add'</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">_</span><span class=\"w\"> </span><span class=\"n\">_</span><span class=\"w\"> </span><span class=\"bp\">‚Ü¶</span><span class=\"w\"> </span><span class=\"n\">Matrix.mulVec_add</span><span class=\"w\"> </span><span class=\"bp\">..</span>\n<span class=\"w\">      </span><span class=\"n\">map_smul'</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">_</span><span class=\"w\"> </span><span class=\"n\">_</span><span class=\"w\"> </span><span class=\"bp\">‚Ü¶</span><span class=\"w\"> </span><span class=\"kd\">by</span><span class=\"w\"> </span><span class=\"n\">simpa</span><span class=\"w\"> </span><span class=\"n\">using</span><span class=\"w\"> </span><span class=\"n\">Matrix.mulVec_smul</span><span class=\"w\"> </span><span class=\"bp\">..</span><span class=\"w\"> </span><span class=\"o\">}</span>\n<span class=\"w\">    </span><span class=\"n\">map_one'</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span><span class=\"w\"> </span><span class=\"n\">aesop</span>\n<span class=\"w\">    </span><span class=\"n\">map_mul'</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">_</span><span class=\"w\"> </span><span class=\"n\">_</span><span class=\"w\"> </span><span class=\"bp\">‚Ü¶</span><span class=\"w\"> </span><span class=\"kd\">by</span>\n<span class=\"w\">      </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"n\">only</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">obj_carrier</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">MonCat.mul_of</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">_root_.map_mul</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Units.val_mul</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">‚Üê</span><span class=\"w\"> </span><span class=\"n\">Matrix.mulVec_mulVec</span><span class=\"o\">]</span>\n<span class=\"w\">      </span><span class=\"n\">rfl</span><span class=\"w\"> </span><span class=\"o\">}</span>\n</code></pre></div>",
        "id": 502968710,
        "sender_full_name": "Anne Baanen",
        "timestamp": 1740991117
    },
    {
        "content": "<p>I've been through and fixed up the <code>adicValuation</code> errors locally. I'm upstreaming some fixes to mathlib in the following two PRs</p>\n<ul>\n<li><a href=\"https://github.com/leanprover-community/mathlib4/pull/22488\">https://github.com/leanprover-community/mathlib4/pull/22488</a> </li>\n<li><a href=\"https://github.com/leanprover-community/mathlib4/pull/22491\">https://github.com/leanprover-community/mathlib4/pull/22491</a></li>\n</ul>",
        "id": 502981156,
        "sender_full_name": "Salvatore Mercuri",
        "timestamp": 1740994902
    },
    {
        "content": "<p>Including Anne's fix above, my repo is now building successfully. But one of the issues is instance search timeout in <code>SMul (v.adicCompletionIntegers K) (v.adicCompletion K)</code>, so one of my local fixes is setting heartbeats to the max value (I've tried to lower the instance priority of <code>UniformSpace.Completion.instSMul</code> to fix it in one of the above PRs). For that it might be better to wait until <a href=\"https://github.com/leanprover-community/mathlib4/pull/22488\">#22488</a> is merged/resolved.</p>",
        "id": 502982973,
        "sender_full_name": "Salvatore Mercuri",
        "timestamp": 1740995450
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"650358\">Salvatore Mercuri</span> <a href=\"#narrow/channel/416277-FLT/topic/Mathlib.20bump/near/502982973\">said</a>:</p>\n<blockquote>\n<p>Including Anne's fix above, my repo is now building successfully. But one of the issues is instance search timeout in <code>SMul (v.adicCompletionIntegers K) (v.adicCompletion K)</code>, so one of my local fixes is setting heartbeats to the max value (I've tried to lower the instance priority of <code>UniformSpace.Completion.instSMul</code> to fix it in one of the above PRs). For that it might be better to wait until <a href=\"https://github.com/leanprover-community/mathlib4/pull/22488\">#22488</a> is merged/resolved.</p>\n</blockquote>\n<p>In the old days we had problems with timeouts with things like <code>Algebra (ùìû K) (ùìû K)</code> where <code>ùìû K</code> was the ring of integers of a number field <code>K</code>, and this was because <code>ùìû K</code> was defined to be a <code>Subalgebra</code> (i.e. a term, not a type). Then we changed it to a type and the problems went away. See <a href=\"https://github.com/leanprover-community/mathlib4/blob/6cecf71a82a22ea7c01598800e12f3e8eb66894b/Mathlib/NumberTheory/NumberField/Basic.lean#L81-L91\">here</a> for the relevant comment in Mathlib. However I see <code>v.adicCompletionIntegers K</code> is defined as a <code>ValuationSubring</code> (i.e. a subtype), and I suspect that this might be the cause of the problems. I can take a look later but my instinct is that we might want to make <code>v.adicCompletionIntegers K</code> into a type rather than making it as a term and coercing it to a type.</p>",
        "id": 503078533,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1741021302
    },
    {
        "content": "<p>This did remind me of the <code>RingOfIntegers</code> issue. I guess the issue in this case is twofold: (1) the type synonym is allowing <code>UniformSpace.Completion.instSMul</code> to fire in instance search when previously it did not, and (2) this is taking a long time to fail due to <code>v.adicCompletionIntegers K</code> being a subtype rather than a type. There are a couple of instance search traces in <a href=\"https://github.com/leanprover-community/mathlib4/pull/22488\">#22488</a> if that's useful. Redefining it as a type probably makes more sense then rather than lowering the instance priority of <code>UniformSpace.Completion.instSMul</code> (which anyway led to slightly mixed benchmarking results in the linked PR)</p>",
        "id": 503083306,
        "sender_full_name": "Salvatore Mercuri",
        "timestamp": 1741022656
    },
    {
        "content": "<p>By the way I noticed during the bump PR that this timeout also occurs for <code>SMul (v.adicCompletion K) (Œ† (w : v.Extension B), w.1.adicCompletion L)</code>, so this problem is not restricted to <code>adicCompletionIntegers</code></p>",
        "id": 503247612,
        "sender_full_name": "Salvatore Mercuri",
        "timestamp": 1741089324
    },
    {
        "content": "<p>Did another quick bump at <a href=\"https://github.com/ImperialCollegeLondon/FLT/pull/392\">FLT#392</a> to pick up the new lean version</p>",
        "id": 509521070,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1743532164
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"387244\">@Ya√´l Dillies</span> do you know why <code>FLT.Mathlib.GroupTheory.Index</code> is broken when I bump mathlib? The code is</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Function</span>\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"kn\">scoped</span><span class=\"w\"> </span><span class=\"n\">Pointwise</span>\n\n<span class=\"kn\">namespace</span><span class=\"w\"> </span><span class=\"n\">AddSubgroup</span>\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Group</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">AddGroup</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">DistribMulAction</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"o\">]</span>\n<span class=\"c1\">-- TODO: Why does making this lemma simp make `NumberTheory.Padic.PadicIntegers` time out?</span>\n<span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">index_smul</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">AddSubgroup</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">‚Ä¢</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">index</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"bp\">.</span><span class=\"n\">index</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">index_map_of_bijective</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">MulAction</span><span class=\"bp\">.</span><span class=\"n\">bijective</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"o\">)</span>\n\n<span class=\"kn\">end</span><span class=\"w\"> </span><span class=\"n\">AddSubgroup</span>\n</code></pre></div>\n<p>and the error is</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">failed</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">synthesize</span>\n<span class=\"w\">  </span><span class=\"n\">HSMul</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">AddSubgroup</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">?</span><span class=\"n\">m</span><span class=\"bp\">.</span><span class=\"m\">10818</span>\n</code></pre></div>\n<p>Is this action no longer a thing?</p>",
        "id": 511137338,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1744195555
    },
    {
        "content": "<p>Add <code>import Mathlib.Algebra.GroupWithZero.Subgroup</code></p>",
        "id": 511137562,
        "sender_full_name": "Ya√´l Dillies",
        "timestamp": 1744195640
    },
    {
        "content": "<p>This is fallout from <a href=\"https://github.com/leanprover-community/mathlib4/pull/23832\">#23832</a></p>",
        "id": 511137624,
        "sender_full_name": "Ya√´l Dillies",
        "timestamp": 1744195667
    },
    {
        "content": "<p>Thanks!</p>",
        "id": 511138270,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1744195911
    },
    {
        "content": "<p>Bump to <code>v4.21.0</code> (<a href=\"https://github.com/ImperialCollegeLondon/FLT/pull/652\">FLT#652</a>)</p>",
        "id": 525055765,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1750430644
    },
    {
        "content": "<p>Thanks. After two weeks of a lot of travelling I'm slowly catching up with the many PRs that have appeared in that time</p>",
        "id": 525075070,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1750438554
    },
    {
        "content": "<p>Bump to <code>v4.22.0-rc2</code> (<a href=\"https://github.com/ImperialCollegeLondon/FLT/pull/657\">FLT#657</a>)</p>",
        "id": 526562308,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1751361258
    },
    {
        "content": "<p>Thanks! I should hopefully get to both of these this afternoon</p>",
        "id": 526595036,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1751372332
    },
    {
        "content": "<p>Bump to <code>v4.22.0-rc3</code> (<a href=\"https://github.com/ImperialCollegeLondon/FLT/pull/662\">FLT#662</a>).</p>",
        "id": 527437291,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1751880659
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110038\">@Kevin Buzzard</span> if you have a minute, would you mind merging <a href=\"https://github.com/ImperialCollegeLondon/FLT/pull/720\">FLT#720</a>?</p>",
        "id": 540078902,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1758133884
    },
    {
        "content": "<p>Only substantial change is that <code>relindex</code> is now <code>relIndex</code>with capital I</p>",
        "id": 540079018,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1758133925
    },
    {
        "content": "<p>We have two approvals (mine and Michael‚Äôs). I think I can safely merge this right now.</p>",
        "id": 540079996,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1758134275
    },
    {
        "content": "<p>Done <span aria-label=\"check\" class=\"emoji emoji-2705\" role=\"img\" title=\"check\">:check:</span></p>",
        "id": 540080182,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1758134345
    },
    {
        "content": "<p>That works too :)</p>",
        "id": 540080616,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1758134520
    },
    {
        "content": "<p>Thanks</p>",
        "id": 540080623,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1758134522
    },
    {
        "content": "<p>Thanks! At a workshop this week</p>",
        "id": 540103139,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1758143258
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110038\">@Kevin Buzzard</span>  (or <span class=\"user-mention\" data-user-id=\"556875\">@Pietro Monticone</span>): <a href=\"https://github.com/ImperialCollegeLondon/FLT/pull/734\">FLT#734</a> updates mathlib and removes a hundred lines from <code>FLT/Mathlib/</code> in the process</p>",
        "id": 543032673,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1759527455
    },
    {
        "content": "<p>Merged. Thanks!</p>",
        "id": 543036959,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1759530922
    },
    {
        "content": "<p>Thanks! I am around, I'm working hard on top down stuff and not posting much here</p>",
        "id": 543068309,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1759564230
    },
    {
        "content": "<p>Thanks! <a href=\"https://github.com/ImperialCollegeLondon/FLT/pull/726\">FLT#726</a> is also ready, removing some code that was upstreamed under different names</p>",
        "id": 543070384,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1759566438
    },
    {
        "content": "<p>Merged. Thanks!</p>",
        "id": 543089609,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1759586128
    },
    {
        "content": "<p>Thanks Pietro!</p>",
        "id": 543095211,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1759591174
    },
    {
        "content": "<p>Bump to <code>v4.24.0</code> (<a href=\"https://github.com/ImperialCollegeLondon/FLT/pull/746\">FLT#746</a>).</p>",
        "id": 544851735,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1760484342
    },
    {
        "content": "<p>Bump to <code>v4.25.0-rc1</code> (<a href=\"https://github.com/ImperialCollegeLondon/FLT/pull/756\">FLT#756</a>).</p>",
        "id": 546464744,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1761141322
    },
    {
        "content": "<p>Thank you!</p>",
        "id": 546494010,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1761148304
    },
    {
        "content": "<p>Bump to <code>v4.25.1</code> (<a href=\"https://github.com/ImperialCollegeLondon/FLT/pull/765\">FLT#765</a>).</p>",
        "id": 558224788,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1763563971
    },
    {
        "content": "<p>Bump to <code>v4.26.0</code> (<a href=\"https://github.com/ImperialCollegeLondon/FLT/pull/800\">FLT#800</a>).</p>",
        "id": 563653600,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1765670011
    },
    {
        "content": "<p>Bumped (<a href=\"https://github.com/ImperialCollegeLondon/FLT/pull/824\">FLT#824</a>).</p>",
        "id": 566439661,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1767647660
    },
    {
        "content": "<p>Bumped (<a href=\"https://github.com/ImperialCollegeLondon/FLT/pull/843\">FLT#843</a>).</p>",
        "id": 569553943,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1769104041
    },
    {
        "content": "<p>Bumped to <code>v4.28.0-rc1</code> (<a href=\"https://github.com/ImperialCollegeLondon/FLT/pull/851\">FLT#851</a>)</p>",
        "id": 571152822,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1769824106
    }
]