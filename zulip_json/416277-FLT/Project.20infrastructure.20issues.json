[
    {
        "content": "<p>I've just seen this today <a class=\"message-link\" href=\"/#narrow/channel/113488-general/topic/Project.20dashboard/near/534214896\">#general &gt; Project dashboard @ ðŸ’¬</a>  which seems to indicate that we could be doing a couple of things better (but I don't really understand how to do them better). (I've been away for over a week but am back now)</p>",
        "id": 535212420,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1755643267
    },
    {
        "content": "<p>Here's the relevant stuff:</p>\n<ul>\n<li><span aria-label=\"check\" class=\"emoji emoji-2705\" role=\"img\" title=\"check\">:check:</span> Latest toolchain tag: v4.22.0-rc4</li>\n<li>\n<p><span aria-label=\"light bulb\" class=\"emoji emoji-1f4a1\" role=\"img\" title=\"light bulb\">:light_bulb:</span> Detected a workflow build set up by hand.<br>\n  A GitHub Action exists to handle this workflow for you.<br>\n  See <a href=\"https://github.com/leanprover/lean-action/blob/HEAD/README.md\">https://github.com/leanprover/lean-action/blob/HEAD/README.md</a> for installation instructions.</p>\n</li>\n<li>\n<p><span aria-label=\"check\" class=\"emoji emoji-2705\" role=\"img\" title=\"check\">:check:</span> Detected workflow docs, using the action: leanprover-community/docgen-action</p>\n</li>\n<li><span aria-label=\"check\" class=\"emoji emoji-2705\" role=\"img\" title=\"check\">:check:</span> Detected workflow release-tag, using the action: leanprover-community/lean-release-tag</li>\n<li><span aria-label=\"check\" class=\"emoji emoji-2705\" role=\"img\" title=\"check\">:check:</span> Detected workflow update, using the action: leanprover-community/mathlib-update-action</li>\n<li><span aria-label=\"check\" class=\"emoji emoji-2705\" role=\"img\" title=\"check\">:check:</span> License: Apache License</li>\n<li>\n<p><span aria-label=\"working on it\" class=\"emoji emoji-1f6e0\" role=\"img\" title=\"working on it\">:working_on_it:</span> Consider adding a lint driver.<br>\n  You can configure the lake lint command to automatically report code quality suggestions.<br>\n  Linters are included with Mathlib or Batteries.<br>\n  For instructions on enabling a linter, please see: <a href=\"https://github.com/leanprover-community/mathlib4/wiki/Setting-up-linting-and-testing-for-your-Lean-project#adding-a-linter\">https://github.com/leanprover-community/mathlib4/wiki/Setting-up-linting-and-testing-for-your-Lean-project#adding-a-linter</a></p>\n</li>\n<li>\n<p><span aria-label=\"check\" class=\"emoji emoji-2705\" role=\"img\" title=\"check\">:check:</span> Linting to Mathlib's standards.</p>\n</li>\n<li><span aria-label=\"light bulb\" class=\"emoji emoji-1f4a1\" role=\"img\" title=\"light bulb\">:light_bulb:</span> Consider adding a test driver.<br>\n  You can configure the lake test command to build and run test files.<br>\n  For instructions on creating a test suite, please see: <a href=\"https://github.com/leanprover-community/mathlib4/wiki/Setting-up-linting-and-testing-for-your-Lean-project#adding-a-test-driver\">https://github.com/leanprover-community/mathlib4/wiki/Setting-up-linting-and-testing-for-your-Lean-project#adding-a-test-driver</a></li>\n</ul>",
        "id": 535220741,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1755650453
    },
    {
        "content": "<p>Do we need a test driver if we don't have any tests?</p>",
        "id": 535247111,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1755671611
    },
    {
        "content": "<p>I don't think it's unreasonable that maths projects have tests folders. e.g. if at any point some typeclass search timed out, but you fixed it, the tests folder is a good place to put a regression test (i.e. a #synth statement). But yeah, many won't.</p>",
        "id": 535474054,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1755772067
    },
    {
        "content": "<p>Yeah, not saying we'd never have any tests, but there doesn't seem to be much need for a driver until then</p>",
        "id": 535488049,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1755777308
    },
    {
        "content": "<p>OK so after a summer of distractions I'm back to working on FLT every day. Right now I am attempting to stop being a complete CI ignoramus; up until now all CI issues have been handled by other people. I would like to try and understand the messages above and furthermore how to fix them, so I've opened the <code>.github</code> directory in FLT for the first time in my life and I'm trying to understand what's in there.</p>\n<p>Let's start with the most recent issue in the FLT repo, namely <a href=\"https://github.com/ImperialCollegeLondon/FLT/pull/706\">FLT#706</a> , which was opened by a bot. As far as I can see, it's impossible to tell from the issue itself exactly why this issue was opened, what script was run etc etc. I am pretty confident that ultimately the source of this issue is <a href=\"https://github.com/ImperialCollegeLondon/FLT/blob/main/.github/workflows/update.yml\">.github/workflows/update.yml</a>, which seems to be running a script from the totally different repo <code>leanprover-community/mathlib-update-action</code>. Right now (based on experience with the FLT repo) this script seems to be running once a week and creating an issue if a mindless bump of the <code>master</code> branch of <code>Mathlib</code> on FLT fails to build.</p>\n<p>I'll get to the issues above a bit later, but I just wanted to check: am I right so far? And why is this script running at all? Is it just the case that every script in <code>.github/workflows</code> is just being run...erm...hmm. Perhaps each file specifies when it is to be run? For example some files in this workflows directory seem to be triggered by e.g. a push, but this file is being triggered by a cron job which (if my understanding of cron is correct) is probably running at 8am (probably a lousy time to run cron jobs because it's on the hour so github is overloaded with cron jobs) on dates for which the day is a multiple of 7 (so it's not even weekly :-) ). </p>\n<p>I really like the idea of running this job weekly (and will probably edit the cron job after this discussion so it runs at 2:37am on Sunday nights UK time, which is a far more convenient time for me).</p>",
        "id": 537099542,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1756729639
    },
    {
        "content": "<p>I don't understand cron syntax either, but yeah, the <code>on</code> fields says when a job is triggered. In this case on schedule, and there's a button somewhere that you can click to make it run at some other time</p>\n<div class=\"codehilite\" data-code-language=\"YAML\"><pre><span></span><code><span class=\"nt\">name</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">Update Dependencies</span>\n<span class=\"nt\">on</span><span class=\"p\">:</span>\n<span class=\"w\">  </span><span class=\"nt\">schedule</span><span class=\"p\">:</span><span class=\"w\">             </span><span class=\"c1\"># Sets a schedule to trigger the workflow</span>\n<span class=\"w\">  </span><span class=\"p p-Indicator\">-</span><span class=\"w\"> </span><span class=\"nt\">cron</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s\">\"0</span><span class=\"nv\"> </span><span class=\"s\">8</span><span class=\"nv\"> </span><span class=\"s\">*/7</span><span class=\"nv\"> </span><span class=\"s\">*</span><span class=\"nv\"> </span><span class=\"s\">*\"</span><span class=\"w\"> </span><span class=\"c1\"># Every 7 days at 08:00 AM UTC (for more info on the cron syntax see https://docs.github.com/en/actions/writing-workflows/choosing-when-your-workflow-runs/events-that-trigger-workflows#schedule)</span>\n<span class=\"w\">  </span><span class=\"nt\">workflow_dispatch</span><span class=\"p\">:</span><span class=\"w\">    </span><span class=\"c1\"># Allows the workflow to be triggered manually via the GitHub interface</span>\n</code></pre></div>",
        "id": 537102959,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1756730708
    },
    {
        "content": "<p>So if you click the \"actions\" tab at the top next to \"pull requests\", you get to <a href=\"https://github.com/ImperialCollegeLondon/FLT/actions\">https://github.com/ImperialCollegeLondon/FLT/actions</a> and in the left bar all the workflows are listed. Clicking on \"Update Dependencies\" (this is the <code>name</code> field from the yaml file), you get a link back to the yaml file, and probably a button like this:<br>\n<a href=\"/user_uploads/3121/lHAFkCsyz2khQGRchA9uWkV7/Screenshot-from-2025-09-01-14-49-13.png\">Screenshot from 2025-09-01 14-49-13.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/lHAFkCsyz2khQGRchA9uWkV7/Screenshot-from-2025-09-01-14-49-13.png\" title=\"Screenshot from 2025-09-01 14-49-13.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"856x165\" src=\"/user_uploads/thumbnail/3121/lHAFkCsyz2khQGRchA9uWkV7/Screenshot-from-2025-09-01-14-49-13.png/840x560.webp\"></a></div>",
        "id": 537103585,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1756730908
    },
    {
        "content": "<p>For cron syntax, this is a very useful helper <a href=\"https://crontab.guru/\">https://crontab.guru/</a></p>",
        "id": 537108542,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1756732564
    },
    {
        "content": "<p>So <code>37 2 * * sun</code> might be good, though it's in UTC, not BST in summer</p>",
        "id": 537109911,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1756733008
    },
    {
        "content": "<p>Does UTC/BST really matter here? No</p>",
        "id": 537193402,
        "sender_full_name": "Jeremy Tan",
        "timestamp": 1756777052
    },
    {
        "content": "<p>I was responding to Kevin's comment about UK time, not particularly soliciting opinions on whether the difference would be an issue</p>",
        "id": 537215697,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1756794446
    }
]