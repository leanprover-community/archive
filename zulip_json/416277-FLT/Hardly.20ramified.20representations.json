[
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"407114\">@Stepan Nesterov</span> in <a href=\"https://github.com/ImperialCollegeLondon/FLT/pull/742\">FLT#742</a> I start the work of writing down the statements of nontrivial theorems about hardly ramified Galois representations.</p>\n<p>Here are some mathematical questions. After years of formalization I am becoming far more attuned to the idea of writing down \"the correct statement\" as opposed to \"a statement which suffices\". Here are some questions.</p>\n<p>Richard proves in his course that if <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>ρ</mi></mrow><annotation encoding=\"application/x-tex\">\\rho</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\">ρ</span></span></span></span> is a hardly ramified represention with coefficient ring a finite field of characteristic 3, then <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>ρ</mi></mrow><annotation encoding=\"application/x-tex\">\\rho</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\">ρ</span></span></span></span> is has a trivial 1-dimensional quotient. Do you think that it's true that if <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>ρ</mi></mrow><annotation encoding=\"application/x-tex\">\\rho</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\">ρ</span></span></span></span> is a hardly ramified representation with coefficient ring a finite <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi mathvariant=\"double-struck\">F</mi><mn>3</mn></msub></mrow><annotation encoding=\"application/x-tex\">\\mathbb{F}_3</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8389em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">F</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">3</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>-algebra then <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>ρ</mi></mrow><annotation encoding=\"application/x-tex\">\\rho</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\">ρ</span></span></span></span> has a trivial 1-dimensional quotient? Just to be clear, I mean that Galois acts on <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>V</mi></mrow><annotation encoding=\"application/x-tex\">V</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span></span></span></span> free of rank 2 over a finite <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi mathvariant=\"double-struck\">F</mi><mn>3</mn></msub></mrow><annotation encoding=\"application/x-tex\">\\mathbb{F}_3</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8389em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">F</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">3</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>-algebra <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>R</mi></mrow><annotation encoding=\"application/x-tex\">R</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span></span></span></span> and I'm suggesting that we have <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0</mn><mo>→</mo><mi>R</mi><mo stretchy=\"false\">(</mo><mn>1</mn><mo stretchy=\"false\">)</mo><mo>→</mo><mi>V</mi><mo>→</mo><mi>R</mi><mo>→</mo><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0\\to R(1)\\to V\\to R\\to 0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">0</span></span></span></span>. Maybe we need <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>R</mi></mrow><annotation encoding=\"application/x-tex\">R</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span></span></span></span> reduced? (actually reduced probably implies <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>R</mi></mrow><annotation encoding=\"application/x-tex\">R</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span></span></span></span> is a finite direct sum of fields, so here you're fine). </p>\n<p>Richard also proves in his course that if <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>ρ</mi></mrow><annotation encoding=\"application/x-tex\">\\rho</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\">ρ</span></span></span></span> is a hardly ramified 3-adic representation, by which I mean a representation to <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>G</mi><msub><mi>L</mi><mn>2</mn></msub><mo stretchy=\"false\">(</mo><mi>R</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">GL_2(R)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">G</span><span class=\"mord\"><span class=\"mord mathnormal\">L</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span><span class=\"mclose\">)</span></span></span></span> with <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>R</mi></mrow><annotation encoding=\"application/x-tex\">R</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span></span></span></span> the integers in a finite extension <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>K</mi></mrow><annotation encoding=\"application/x-tex\">K</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">K</span></span></span></span> of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi mathvariant=\"double-struck\">Q</mi><mn>3</mn></msub></mrow><annotation encoding=\"application/x-tex\">\\mathbb{Q}_3</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8556em;vertical-align:-0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">Q</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">3</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>, then <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mi>ρ</mi><mo>⊗</mo><mi>K</mi><msup><mo stretchy=\"false\">)</mo><mrow><mi>s</mi><mi>s</mi></mrow></msup></mrow><annotation encoding=\"application/x-tex\">(\\rho\\otimes K)^{ss}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">ρ</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">⊗</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">K</span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">ss</span></span></span></span></span></span></span></span></span></span></span></span> is <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>K</mi><mo stretchy=\"false\">(</mo><mn>1</mn><mo stretchy=\"false\">)</mo><mo>⊕</mo><mi>K</mi></mrow><annotation encoding=\"application/x-tex\">K(1)\\oplus K</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">K</span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">⊕</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">K</span></span></span></span>. I am pretty sure that the methods prove that <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0</mn><mo>→</mo><mi>K</mi><mo stretchy=\"false\">(</mo><mn>1</mn><mo stretchy=\"false\">)</mo><mo>→</mo><mi>ρ</mi><mo>⊗</mo><mi>K</mi><mo>→</mo><mi>K</mi><mo>→</mo><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0\\to K(1)\\to \\rho\\otimes K\\to K\\to 0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">K</span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7778em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\">ρ</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">⊗</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">K</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">K</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">0</span></span></span></span>. Is it true that <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0</mn><mo>→</mo><mi>R</mi><mo stretchy=\"false\">(</mo><mn>1</mn><mo stretchy=\"false\">)</mo><mo>→</mo><mi>ρ</mi><mo>→</mo><mi>R</mi><mo>→</mo><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0\\to R(1)\\to \\rho\\to R\\to 0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\">ρ</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">0</span></span></span></span>? Furthermore, is this claim true for <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>R</mi></mrow><annotation encoding=\"application/x-tex\">R</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span></span></span></span> a finite free <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi mathvariant=\"double-struck\">Z</mi><mn>3</mn></msub></mrow><annotation encoding=\"application/x-tex\">\\Z_3</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8389em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">Z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">3</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>-algebra? Maybe reduced? </p>\n<p>In short: what are the actual theorems that one should be proving here?</p>",
        "id": 544138289,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1760093120
    },
    {
        "content": "<p>OK I couldn't really let go of this and thought a bit more about it (after attempting to pass it on). I think that Theorem A of Fontaine's \"no ab var / Z\" still gives you that G^{3/2} acts trivially in the case where R is a finite F_3-algebra; no reducedness necessary. In his course Richard attempts to prove the cases of Fontaine's theorem which he needs directly, but I am happy to defer to Fontaine (avoiding Fontaine will mean classifying finite flat reps over R a la Fontaine's thesis so it's not really saving any work, and anyway the plan was to always assume Fontaine). </p>\n<p>As for the 3-adic case; Richard in his course didn't rule out 0-&gt;K-&gt;rho-&gt;K(1)-&gt;0 but I think the methods do (Richard didn't need to rule it out, all he needed was rho^ss=1+cyclo); if the trivial were the sub and the extension really was nonsplit then I think you can find an appropriate lattice and reduce mod 3 and contradict the mod 3 result. So \"trivial is a quotient\" is true if R is a finite extension K of Q_p (one has to be slightly careful here because \"flat\" doesn't make sense until you choose an integral model, but flatness is a property of the generic fibre so it's independent of the choice of model). Next, the same thing is true for R the integers of K, because the quotient K^2-&gt;K induces a map R^2-&gt;(something isomorphic to R) and the kernel must be R too as the quotient splits as R-modules. For R a general order in K, what do f.g. R-submodules of K look like (K is still a finite extension of Q_3)? I ask because that's what we know about the image of R^2. Are they all isomorphic to R as R-modules? If not then this idea is probably dead in the water. Hmm, if R is not integrally closed then presumably it can't be a PID which presumably means that there can be non-free R-ideals? Does this sound right? So are we doomed to focus on integrally-closed R-modules? Or maybe my definition of \"rank 1 quotient\" is wrong and it shouldn't demand that the quotient is free rank 1?</p>",
        "id": 544144925,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1760095297
    },
    {
        "content": "<p>Probably the conductor ideal of a non-maximal order gives an example of a non-invertible ideal? Or maybe I'm remembering wrongly</p>",
        "id": 544161714,
        "sender_full_name": "Bryan Wang",
        "timestamp": 1760100482
    },
    {
        "content": "<p>Aah -- maybe this question is irrelevant though? Because the definition of hardly ramified (<a href=\"https://imperialcollegelondon.github.io/FLT/blueprint/ch_freyreduction.html#hardly_ramified\">here</a> in LaTeX) implies that V locally at 2 has a free rank 1 sub and a free rank 1 quotient, and those pieces are not congruent mod p so I suspect that the local filtration is unique, which maybe means that it must be the global filtration? </p>\n<p>I think here's the general question for orders, although the question after that is \"for what rings R does the proof which is yet to be written down, work?\"</p>\n<p>Let R be an order in a finite extension K of Q_p, so R is a finite free Z_p-algebra.</p>\n<p>Say G is a group and D is a subgroup (in the application G is global Galois and D is decomp at 2). Say chi1 and chi2 are two maps G -&gt; Z_p^* which, when restriced to D, are distinct mod p . </p>\n<p>Say V is a finite free rank 2 R-module with an action of G, such that when restriced to D there's a short exact sequence 0-&gt;R(chi1)-&gt;V-&gt;R(chi2)-&gt;0 of D-modules.</p>\n<p>Say that V tensor_R K admits a short exact sequence 0-&gt;K(chi1)-&gt;V_K-&gt;K(chi2)-&gt;0 of G-modules.</p>\n<p>Does V admit a short exact sequence 0-&gt;R(chi1)-&gt;V-&gt;R(chi2)-&gt;0?</p>",
        "id": 544163614,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1760101052
    },
    {
        "content": "<p>I'm not sure how helpful this is, but e.g. Remark 1.1 of <a href=\"https://people.brandeis.edu/~jbellaic/RibetHawaii2.pdf\">these notes on Ribet's lemma</a> seems to suggest the order of extension can be exchanged, so in this full generality, the subgroup D is probably the crucial one.</p>",
        "id": 544212365,
        "sender_full_name": "Bryan Wang",
        "timestamp": 1760114887
    },
    {
        "content": "<p>This is only true when you're globally irreducible. Here we're globally reducible and there's a genuine asymmetry.</p>",
        "id": 544217196,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1760116841
    },
    {
        "content": "<p>In fact in some sense this is the proof of the implication \"mod 3 hardly ramified =&gt; trivial quotient\" =&gt; \"3-adic hardly ramified =&gt; trivial quotient\". Try as you might you can't find that second lattice which mod 3 is \"the other way up\", but which Ribet says always exists if the generic fibre is irreducible.</p>\n<p>In fact Richard in his course uses the same ideas as the ones in Serre's proof.</p>",
        "id": 544218569,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1760117427
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/channel/416277-FLT/topic/Next.20steps.20in.20the.20formalization/near/544138289\">said</a>:</p>\n<blockquote>\n<p>Do you think that it's true that if <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>ρ</mi></mrow><annotation encoding=\"application/x-tex\">\\rho</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\">ρ</span></span></span></span> is a hardly ramified representation with coefficient ring a finite <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi mathvariant=\"double-struck\">F</mi><mn>3</mn></msub></mrow><annotation encoding=\"application/x-tex\">\\mathbb{F}_3</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8389em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">F</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">3</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>-algebra then <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>ρ</mi></mrow><annotation encoding=\"application/x-tex\">\\rho</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\">ρ</span></span></span></span> has a trivial 1-dimensional quotient.</p>\n</blockquote>\n<p>Definitely yes. I think the morally correct theorem underlying the argument is in Schoof's paper: any 3-divisible group scheme over Z[1/2], where I_2 acts unipotently of echelon 2, is an extension of a diagonalizable by constant.</p>",
        "id": 544235804,
        "sender_full_name": "Stepan Nesterov",
        "timestamp": 1760125057
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/channel/416277-FLT/topic/Next.20steps.20in.20the.20formalization/near/544144925\">said</a>:</p>\n<blockquote>\n<p>Richard in his course didn't rule out 0-&gt;K-&gt;rho-&gt;K(1)-&gt;0 but I think the methods do (Richard didn't need to rule it out, all he needed was rho^ss=1+cyclo); if the trivial were the sub and the extension really was nonsplit then I think you can find an appropriate lattice and reduce mod 3 and contradict the mod 3 result.</p>\n</blockquote>\n<p>That is actually a necessary part of Schoof's argument!<br>\nI think what Richard does with Zorn's lemma is hopelessly wrong, actually: definitely S_3 has a representation which is irreducible in char 0 but reducible mod 3. If you only know you are reducible mod 3, how do you get reducible mod 9, 27, etc?<br>\nThe way it's stated in Daniel's notes I think the mistake is that he considers the map \\Lambda \\to (\\mathcal{O} / \\pi)^2 and like yea you can take the lattice \\mathcal{O} + 3\\mathcal{O} and the image of the map is 1-dimensional, that doesn't prove that Lambda is rank 1.</p>",
        "id": 544236509,
        "sender_full_name": "Stepan Nesterov",
        "timestamp": 1760125360
    },
    {
        "content": "<p>I am working on the write-up of the correct argument which will be a Taylor/Schoof amalgamation. The idea is to note that the mod 3 result gives you as a corollary that there are no exts of mu_3 by Z/3 which are hardly ramified, then you take rho mod 3^k, take its Jordan-Holder series, move all the mu_3 factors to the left by this, and conclude that it's an extension of Z/3^k by mu_3^k. All of this requires Raynaud's theorem that finite flat group schemes over Z_3 form an abelian category, but that's 1970s.</p>",
        "id": 544237371,
        "sender_full_name": "Stepan Nesterov",
        "timestamp": 1760125705
    },
    {
        "content": "<p><a href=\"/user_uploads/3121/_39P5rWcSeHY0xE9AAWL0sgk/Hardly_ramified.pdf\">Hardly_ramified.pdf</a><br>\nActually here's my highly unpolished preliminary version of the argument</p>",
        "id": 544241277,
        "sender_full_name": "Stepan Nesterov",
        "timestamp": 1760127558
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"934803\">Bryan Wang</span> <a href=\"#narrow/channel/416277-FLT/topic/Next.20steps.20in.20the.20formalization/near/544212365\">said</a>:</p>\n<blockquote>\n<p>I'm not sure how helpful this is, but e.g. Remark 1.1 of <a href=\"https://people.brandeis.edu/~jbellaic/RibetHawaii2.pdf\">these notes on Ribet's lemma</a> seems to suggest the order of extension can be exchanged, so in this full generality, the subgroup D is probably the crucial one.</p>\n</blockquote>\n<p>Oh wait</p>",
        "id": 544241621,
        "sender_full_name": "Stepan Nesterov",
        "timestamp": 1760127746
    },
    {
        "content": "<p>This Ribet's lemma would give a one-line proof of the implication \"mod 3 hardly ramified reducible\" =&gt; \"3-adic hardly ramified reducible\"</p>",
        "id": 544241737,
        "sender_full_name": "Stepan Nesterov",
        "timestamp": 1760127815
    },
    {
        "content": "<p>Because we can observe from the proof of the former that the wrong way extensions do not actually occur</p>",
        "id": 544241781,
        "sender_full_name": "Stepan Nesterov",
        "timestamp": 1760127840
    },
    {
        "content": "<p>Was Ribet's lemma known in the 1980s? Is it from his converse to Herbrand paper by any chance?</p>",
        "id": 544242129,
        "sender_full_name": "Stepan Nesterov",
        "timestamp": 1760128007
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/channel/416277-FLT/topic/Next.20steps.20in.20the.20formalization/near/544217196\">said</a>:</p>\n<blockquote>\n<p>This is only true when you're globally irreducible. Here we're globally reducible and there's a genuine asymmetry.</p>\n</blockquote>\n<p>Ah yeah right, my bad! I got confused here</p>",
        "id": 544242443,
        "sender_full_name": "Bryan Wang",
        "timestamp": 1760128132
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"407114\">Stepan Nesterov</span> <a href=\"#narrow/channel/416277-FLT/topic/Next.20steps.20in.20the.20formalization/near/544242129\">said</a>:</p>\n<blockquote>\n<p>Was Ribet's lemma known in the 1980s? Is it from his converse to Herbrand paper by any chance?</p>\n</blockquote>\n<p>The original paper by Ribet is from the 70s I think</p>",
        "id": 544242863,
        "sender_full_name": "Bryan Wang",
        "timestamp": 1760128298
    },
    {
        "content": "<p>Ok so then can we just assume Ribet’s lemma as an axiom and conclude that a 3-adic hardly ramified rep is reducible?</p>",
        "id": 544243307,
        "sender_full_name": "Stepan Nesterov",
        "timestamp": 1760128501
    },
    {
        "content": "<p>It probably doesn’t give you the stronger statement that an ext in the wrong order splits and probably doesn’t work over arbitrary finite Z_3-algebra, but we don’t really need to worry about that for FLT</p>",
        "id": 544243478,
        "sender_full_name": "Stepan Nesterov",
        "timestamp": 1760128572
    },
    {
        "content": "<p>The argument I outlined in the pdf above does do all of these things but it is a fair bit longer</p>",
        "id": 544243573,
        "sender_full_name": "Stepan Nesterov",
        "timestamp": 1760128609
    },
    {
        "content": "<p>This whole thing made me temporaily worry today about whether for \"random\" R the correct local or global deformation condition really should be \"there's a G-equivariant map R^2 -&gt; R\" (where G acts via rho on R^2 and trivially on R) or whether we should be more liberal about what kind of quotients to allow. I remembered from Mazur's work that this definitely should work but I was also confused about what happened if R wasn't integrally closed so I kind of had a contradiction in maths, especially when I convinced myself that if <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>A</mi><mo>⊆</mo><mi>R</mi></mrow><annotation encoding=\"application/x-tex\">A\\subseteq R</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8193em;vertical-align:-0.136em;\"></span><span class=\"mord mathnormal\">A</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">⊆</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span></span></span></span> then the image of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>A</mi><mn>2</mn></msup></mrow><annotation encoding=\"application/x-tex\">A^2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">A</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span> in some random <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>R</mi></mrow><annotation encoding=\"application/x-tex\">R</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span></span></span></span>-linear map <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>R</mi><mn>2</mn></msup><mo>→</mo><mi>R</mi></mrow><annotation encoding=\"application/x-tex\">R^2\\to R</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span></span></span></span> definitely might not be isomorphic to <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>A</mi></mrow><annotation encoding=\"application/x-tex\">A</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\">A</span></span></span></span>, which if I could beef up into an explicit <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>G</mi></mrow><annotation encoding=\"application/x-tex\">G</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\">G</span></span></span></span>-rep would contradict one of the axioms Mazur needed for subdeformations. I knew that the mistake had to be my hunch that \"I have a free rank 1 quotient\" didn't descend but it took me multiplying out a bunch of matrices with coefficients in <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi mathvariant=\"double-struck\">Z</mi><mn>3</mn></msub><mo stretchy=\"false\">[</mo><mn>3</mn><mi>i</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">\\Z_3[3i]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">Z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">3</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">[</span><span class=\"mord\">3</span><span class=\"mord mathnormal\">i</span><span class=\"mclose\">]</span></span></span></span> before I realised that my \"counterexample\" couldn't be made. In short you totally can have <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>A</mi><mo>⊆</mo><mi>R</mi></mrow><annotation encoding=\"application/x-tex\">A\\subseteq R</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8193em;vertical-align:-0.136em;\"></span><span class=\"mord mathnormal\">A</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">⊆</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span></span></span></span> and an <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>R</mi></mrow><annotation encoding=\"application/x-tex\">R</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span></span></span></span>-linear map <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>R</mi><mn>2</mn></msup><mo>→</mo><mi>R</mi></mrow><annotation encoding=\"application/x-tex\">R^2\\to R</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span></span></span></span> which doesn't descend to <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>A</mi><mn>2</mn></msup><mo>→</mo><mi>A</mi></mrow><annotation encoding=\"application/x-tex\">A^2\\to A</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">A</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\">A</span></span></span></span> and instead becomes <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>A</mi><mn>2</mn></msup><mo>→</mo></mrow><annotation encoding=\"application/x-tex\">A^2\\to</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">A</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">→</span></span></span></span> (random non-free thing) but this map can't be <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>ϕ</mi></mrow><annotation encoding=\"application/x-tex\">\\phi</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\">ϕ</span></span></span></span>-equivariant if <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>ϕ</mi></mrow><annotation encoding=\"application/x-tex\">\\phi</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\">ϕ</span></span></span></span> is an endomorphism of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>A</mi><mn>2</mn></msup></mrow><annotation encoding=\"application/x-tex\">A^2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">A</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span> which when extended to <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>R</mi><mn>2</mn></msup></mrow><annotation encoding=\"application/x-tex\">R^2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span> is acting by eigenvalues on the sub and quotient <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>R</mi></mrow><annotation encoding=\"application/x-tex\">R</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span></span></span></span> which are not congruent mod max ideal.</p>\n<p>Ribet's lemma can be assumed but morally Ribet's lemma is dead easy, you just conjugate by <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mi>π</mi><mo separator=\"true\">,</mo><mn>0</mn><mo separator=\"true\">;</mo><mn>0</mn><mo separator=\"true\">,</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(\\pi,0;0,1)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">π</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">0</span><span class=\"mpunct\">;</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">)</span></span></span></span> until you make the bottom left hand entry nonzero. If we assume anything Schoofy then it has to be pre-1990; my plan was to get the result from Fontaine which is 1985 (and would actually be a really interesting project to do in Lean but we're a long way from it yet, I am not sure if we have upper numbering and we have essentially nothing about flat Galois reps other than the definition).</p>",
        "id": 544249584,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1760131265
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"407114\">Stepan Nesterov</span> <a href=\"#narrow/channel/416277-FLT/topic/Next.20steps.20in.20the.20formalization/near/544236509\">said</a>:</p>\n<blockquote>\n<p>I think what Richard does with Zorn's lemma is hopelessly wrong, actually: definitely S_3 has a representation which is irreducible in char 0 but reducible mod 3. If you only know you are reducible mod 3, how do you get reducible mod 9, 27, etc?</p>\n</blockquote>\n<p>Ha ha this is the guy who told me he knew a complete proof ;-) I didn't read Richard's argument in Daniel's notes because I knew the argument myself. What does \"reducible mod 9\" even mean? Every rep is \"reducible mod 9\" in some sense because the 3-torsion is a stable sub.</p>",
        "id": 544249872,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1760131438
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"407114\">Stepan Nesterov</span> <a href=\"#narrow/channel/416277-FLT/topic/Next.20steps.20in.20the.20formalization/near/544241737\">said</a>:</p>\n<blockquote>\n<p>This Ribet's lemma would give a one-line proof of the implication \"mod 3 hardly ramified reducible\" =&gt; \"3-adic hardly ramified reducible\"</p>\n</blockquote>\n<p>given that we now seem to have established that the correct generality for the coefficient ring in the mod 3 result is \"arbitrary finite free <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi mathvariant=\"double-struck\">F</mi><mn>3</mn></msub></mrow><annotation encoding=\"application/x-tex\">\\mathbb{F}_3</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8389em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">F</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">3</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>-algebra\" I am now interested in what the correct generality for the coefficient ring should be in the 3-adic result. Is \"Arbitrary finite free <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi mathvariant=\"double-struck\">Z</mi><mn>3</mn></msub></mrow><annotation encoding=\"application/x-tex\">\\Z_3</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8389em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">Z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">3</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>-algebra\" too much to hope for? We have a quotient <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>R</mi><mn>2</mn></msup><mo>→</mo><mi>R</mi></mrow><annotation encoding=\"application/x-tex\">R^2\\to R</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span></span></span></span> locally at 2 and the game is to show that this is also a global quotient. I think we're all convinced that it works for <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>R</mi></mrow><annotation encoding=\"application/x-tex\">R</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span></span></span></span> the integers of a finite extension of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi mathvariant=\"double-struck\">Q</mi><mi>p</mi></msub></mrow><annotation encoding=\"application/x-tex\">\\mathbb{Q}_p</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.975em;vertical-align:-0.2861em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">Q</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">p</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span></span></span></span> but maybe the right proof works far more generally. Basically I am interested in investigating this concept of a hardly ramified representation (which I should say Richard suggested to me in an email, it's not my idea, but I think it's worth developing an API for). </p>\n<p>One reason I am thinking about this is that I've often wondered what the right framework for compatible families of ell-adic Galois reps is. Instead of saying \"there's some number field M and M_lambda-adic reps for all lambda\" you can work with reps to <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>M</mi><msub><mo>⊗</mo><mi mathvariant=\"double-struck\">Q</mi></msub><msub><mi mathvariant=\"double-struck\">Q</mi><mi>p</mi></msub></mrow><annotation encoding=\"application/x-tex\">M\\otimes_{\\mathbb{Q}}\\mathbb{Q}_p</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.95em;vertical-align:-0.2667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\"><span class=\"mbin\">⊗</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3322em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathbb mtight\">Q</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2667em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.975em;vertical-align:-0.2861em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">Q</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">p</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span></span></span></span> (a sum of the M_lambda for lambda dividing p) and then you're beginning to think what the point of introducing M in the first place is, maybe there's just some finite free Z-algebra lurking (basically the Hecke algebra over Z) and you just p-adically complete this, invert p and consider Galois reps into GL_2 of this ring instead as p varies.</p>",
        "id": 544251567,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1760132360
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"407114\">Stepan Nesterov</span> <a href=\"#narrow/channel/416277-FLT/topic/Next.20steps.20in.20the.20formalization/near/544241277\">said</a>:</p>\n<blockquote>\n<p><a href=\"/user_uploads/3121/_39P5rWcSeHY0xE9AAWL0sgk/Hardly_ramified.pdf\">Hardly_ramified.pdf</a><br>\nActually here's my highly unpolished preliminary version of the argument</p>\n</blockquote>\n<p>I think Prop 2 is in Tate's \"p-divisible groups\" paper from the 60s. Richard only gives a direct argument for Prop 5 assuming basically a classification of ffgs. If Theorem 12 is true then is it true that if R is any (module-)finite <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi mathvariant=\"double-struck\">Z</mi><mn>3</mn></msub></mrow><annotation encoding=\"application/x-tex\">\\Z_3</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8389em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">Z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">3</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>-algebra then any hardly ramified rep <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>V</mi><mi mathvariant=\"normal\">/</mi><mi>R</mi></mrow><annotation encoding=\"application/x-tex\">V/R</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span><span class=\"mord\">/</span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span></span></span></span> lives in a short exact sequence 0-&gt;R(1)-&gt;V-&gt;R-&gt;0? I'm hoping that this has a cute devissage proof (using only that cyclo != 1 mod 3) if we know it for finite <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi mathvariant=\"double-struck\">F</mi><mn>3</mn></msub></mrow><annotation encoding=\"application/x-tex\">\\mathbb{F}_3</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8389em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">F</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">3</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>-algebras.</p>\n<p>Hmm, you're telling me that it's not as easy as that because of the S_3 example :-/</p>",
        "id": 544254499,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1760133762
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/channel/416277-FLT/topic/Next.20steps.20in.20the.20formalization/near/544249872\">said</a>:</p>\n<blockquote>\n<p>What does \"reducible mod 9\" even mean?</p>\n</blockquote>\n<p>What I meant to say is \"the 3-adic representation is conjugate to a 3-adic representation such that the lower left corner is always divisible by 9\"</p>",
        "id": 544258959,
        "sender_full_name": "Stepan Nesterov",
        "timestamp": 1760136133
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/channel/416277-FLT/topic/Next.20steps.20in.20the.20formalization/near/544254499\">said</a>:</p>\n<blockquote>\n<p>If Theorem 12 is true then is it true that if R is any (module-)finite <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi mathvariant=\"double-struck\">Z</mi><mn>3</mn></msub></mrow><annotation encoding=\"application/x-tex\">\\Z_3</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8389em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">Z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">3</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>-algebra then any hardly ramified rep <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>V</mi><mi mathvariant=\"normal\">/</mi><mi>R</mi></mrow><annotation encoding=\"application/x-tex\">V/R</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span><span class=\"mord\">/</span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span></span></span></span> lives in a short exact sequence 0-&gt;R(1)-&gt;V-&gt;R-&gt;0? I'm hoping that this has a cute devissage proof (using only that cyclo != 1 mod 3) if we know it for finite <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi mathvariant=\"double-struck\">F</mi><mn>3</mn></msub></mrow><annotation encoding=\"application/x-tex\">\\mathbb{F}_3</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8389em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">F</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">3</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>-algebras.</p>\n</blockquote>\n<p>Yea I feel like Schoof's argument should be strong enough to give you that.</p>",
        "id": 544259439,
        "sender_full_name": "Stepan Nesterov",
        "timestamp": 1760136407
    },
    {
        "content": "<p>It's just a bit painful to think about because I think you can probably techically consider a nontrivial extension of Z/3 by mu_3 as a 1-dimensional F_3[eps]/eps^2 Galois representation or something</p>",
        "id": 544259559,
        "sender_full_name": "Stepan Nesterov",
        "timestamp": 1760136497
    },
    {
        "content": "<p>I would like to do something like this:<br>\nRepresent your 3-divisible group as an extension of a constant by diagonalisable. If there is an action of a Z_3-algebra R on this object then because there is no hom from diagonalisable to constant, the diagonalisable has to be an R-submodule.</p>",
        "id": 544260496,
        "sender_full_name": "Stepan Nesterov",
        "timestamp": 1760137094
    },
    {
        "content": "<p>But then of course if your R is Z_3[eps]/eps^2 who's to say that this sub is not just eps*Z_3[eps]/eps^2?</p>",
        "id": 544260550,
        "sender_full_name": "Stepan Nesterov",
        "timestamp": 1760137132
    },
    {
        "content": "<p>29 messages were moved here from <a class=\"stream-topic\" data-stream-id=\"416277\" href=\"/#narrow/channel/416277-FLT/topic/Next.20steps.20in.20the.20formalization/with/543968925\">#FLT &gt; Next steps in the formalization</a> by <span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span>.</p>",
        "id": 544623528,
        "sender_full_name": "Notification Bot",
        "timestamp": 1760391149
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"407114\">@Stepan Nesterov</span> I moved the discussion to a thread with a more representative title. I have also merged two files <a href=\"https://github.com/ImperialCollegeLondon/FLT/blob/main/FLT/GaloisRepresentation/HardlyRamified/ModThree.lean\">https://github.com/ImperialCollegeLondon/FLT/blob/main/FLT/GaloisRepresentation/HardlyRamified/ModThree.lean</a> and <a href=\"https://github.com/ImperialCollegeLondon/FLT/blob/main/FLT/GaloisRepresentation/HardlyRamified/Threeadic.lean\">https://github.com/ImperialCollegeLondon/FLT/blob/main/FLT/GaloisRepresentation/HardlyRamified/Threeadic.lean</a> so now you have some concrete statements to try proving.</p>",
        "id": 544623600,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1760391208
    },
    {
        "content": "<p>By the way, this argument maybe works for R finite Z_3 algebra which is an integral domain.<br>\nFor a hardly ramified rep G_Q \\to GL_2(R), define a subomdule of cyclotomic vectors to be {v in R^2 : for any g in G_Q, gv = chi(g)v}. This is nonzero because it is nonzero mod any ideal of finite index by Schoof + completeness. Note that if av is cyclotomic, then v also is. So R/(cyclotomic vectors) is torsion free, and I hope this is enough to imply that (cyclotomic vectors)=R and the quotient is R</p>",
        "id": 544642516,
        "sender_full_name": "Stepan Nesterov",
        "timestamp": 1760405405
    },
    {
        "content": "<p>In </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">FLT</span><span class=\"bp\">.</span><span class=\"n\">GaloisRepresentation</span><span class=\"bp\">.</span><span class=\"n\">HardlyRamified</span><span class=\"bp\">.</span><span class=\"n\">Defs</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">FLT</span><span class=\"bp\">.</span><span class=\"n\">Deformations</span><span class=\"bp\">.</span><span class=\"n\">RepresentationTheory</span><span class=\"bp\">.</span><span class=\"n\">EllipticCurve</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">FLT</span><span class=\"bp\">.</span><span class=\"n\">Basic</span><span class=\"bp\">.</span><span class=\"n\">Reductions</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">FLT</span><span class=\"bp\">.</span><span class=\"n\">FreyPackage</span><span class=\"o\">)</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">GaloisRepresentation</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">FLT</span><span class=\"bp\">.</span><span class=\"n\">FreyPackage</span><span class=\"bp\">.</span><span class=\"n\">FreyCurve</span><span class=\"bp\">.</span><span class=\"n\">torsion_isHardlyRamified</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fact</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">P</span><span class=\"bp\">.</span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">Prime</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n<span class=\"w\">    </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Algebra</span><span class=\"w\"> </span><span class=\"n\">ℤ_</span><span class=\"o\">[</span><span class=\"n\">P</span><span class=\"bp\">.</span><span class=\"n\">p</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ZMod</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"bp\">.</span><span class=\"n\">p</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Module</span><span class=\"bp\">.</span><span class=\"n\">Finite</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ZMod</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"bp\">.</span><span class=\"n\">p</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">P</span><span class=\"bp\">.</span><span class=\"n\">freyCurve</span><span class=\"bp\">.</span><span class=\"n\">n_torsion</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"bp\">.</span><span class=\"n\">p</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n<span class=\"w\">    </span><span class=\"n\">IsHardlyRamified</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">show</span><span class=\"w\"> </span><span class=\"n\">Odd</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"bp\">.</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"gr\">sorry</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n<span class=\"w\">      </span><span class=\"o\">(</span><span class=\"n\">P</span><span class=\"bp\">.</span><span class=\"n\">freyCurve</span><span class=\"bp\">.</span><span class=\"n\">galoisRep</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"bp\">.</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">show</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"bp\">.</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"gr\">sorry</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>what are all these sorries in the type doing? I would like <code>FLT.FreyPackage.FreyCurve.torsion_isHardlyRamified P </code> to have type <code> IsHardlyRamified (P.freyCurve.galoisRep P.p)</code> but instead it produces an unspeakable horror of a type <br>\nhave this := ⋯; have this_1 := sorry; have this_2 := ⋯; IsHardlyRamified ⋯ ⋯ (P.freyCurve.galoisRep P.p ⋯)</p>",
        "id": 545492323,
        "sender_full_name": "Stepan Nesterov",
        "timestamp": 1760682457
    },
    {
        "content": "<p>I understand that definition of a hardly ramified needs p odd and dimension 2 but why isn't it something like this?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">FLT</span><span class=\"bp\">.</span><span class=\"n\">FreyPackage</span><span class=\"bp\">.</span><span class=\"n\">FreyCurve</span><span class=\"bp\">.</span><span class=\"n\">torsion_isHardlyRamified</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">FreyPackage</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Odd</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"bp\">.</span><span class=\"n\">p</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Module</span><span class=\"bp\">.</span><span class=\"n\">rank</span><span class=\"w\"> </span><span class=\"n\">ZMod</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"bp\">.</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"bp\">.</span><span class=\"n\">freyCurve</span><span class=\"bp\">.</span><span class=\"n\">n_torsion</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"bp\">.</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IsHardlyRamified</span><span class=\"w\"> </span><span class=\"n\">h1</span><span class=\"w\"> </span><span class=\"n\">h2</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"bp\">.</span><span class=\"n\">freyCurve</span><span class=\"bp\">.</span><span class=\"n\">galoisRep</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"bp\">.</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n</code></pre></div>",
        "id": 545493016,
        "sender_full_name": "Stepan Nesterov",
        "timestamp": 1760682802
    },
    {
        "content": "<p>Maybe those should all be consequences of P being a Frey package?</p>",
        "id": 545496433,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1760684311
    },
    {
        "content": "<p>Oh I just wanted to get the PR over the line so I left them.</p>\n<p>The first sorry should be easy, p is prime and this is a theorem whose name I didn't remember.</p>\n<p>The second one involves constructing the ring homomorphism from <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi mathvariant=\"double-struck\">Z</mi><mi>p</mi></msub></mrow><annotation encoding=\"application/x-tex\">\\mathbb{Z}_p</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.975em;vertical-align:-0.2861em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">Z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">p</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span></span></span></span> to <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">Z</mi><mi mathvariant=\"normal\">/</mi><mi>p</mi><mi mathvariant=\"double-struck\">Z</mi></mrow><annotation encoding=\"application/x-tex\">\\mathbb{Z}/p\\Z</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathbb\">Z</span><span class=\"mord\">/</span><span class=\"mord mathnormal\">p</span><span class=\"mord mathbb\">Z</span></span></span></span> and I couldn't immediately find it so I left it.</p>\n<p>The third one is much more profound and is the kind of thing which we probably don't have in mathlib (n-torsion in E(K), elliptic curve over a field, is finite for n&gt;0). Probably a nontrivial project although I think that <span class=\"user-mention\" data-user-id=\"464700\">@David Ang</span> might get to it one day (he's just finished his thesis yesterday <span aria-label=\"tada\" class=\"emoji emoji-1f389\" role=\"img\" title=\"tada\">:tada:</span> ).</p>\n<p>P odd is again a one-liner, it's part of the axioms IIRC but I didn't remember the one-line proof and didn't look it up because I didn't want to get distracted. Next sorry I don't even know what the statement is, is it something like E(Kbar)[p] has dimension 2? Again very hard (but known in the 80s). Final sorry should be trivial.</p>",
        "id": 545504188,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1760687324
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"407114\">Stepan Nesterov</span> <a href=\"#narrow/channel/416277-FLT/topic/Hardly.20ramified.20representations/near/545493016\">said</a>:</p>\n<blockquote>\n<p>I understand that definition of a hardly ramified needs p odd and dimension 2 but why isn't it something like this?</p>\n<p><div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">FLT</span><span class=\"bp\">.</span><span class=\"n\">FreyPackage</span><span class=\"bp\">.</span><span class=\"n\">FreyCurve</span><span class=\"bp\">.</span><span class=\"n\">torsion_isHardlyRamified</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">FreyPackage</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Odd</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"bp\">.</span><span class=\"n\">p</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Module</span><span class=\"bp\">.</span><span class=\"n\">rank</span><span class=\"w\"> </span><span class=\"n\">ZMod</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"bp\">.</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"bp\">.</span><span class=\"n\">freyCurve</span><span class=\"bp\">.</span><span class=\"n\">n_torsion</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"bp\">.</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IsHardlyRamified</span><span class=\"w\"> </span><span class=\"n\">h1</span><span class=\"w\"> </span><span class=\"n\">h2</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"bp\">.</span><span class=\"n\">freyCurve</span><span class=\"bp\">.</span><span class=\"n\">galoisRep</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"bp\">.</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n</code></pre></div><br>\n</p>\n</blockquote>\n<p>We don't need them as extra hypotheses -- we can prove them from the hypotheses we already have. See <a href=\"https://imperialcollegelondon.github.io/FLT/docs/FLT/Basic/Reductions.html#FLT.FreyPackage\">https://imperialcollegelondon.github.io/FLT/docs/FLT/Basic/Reductions.html#FLT.FreyPackage</a> -- <code>P.p&gt;=5</code> is a hypothesis so we can prove <code>Odd P.p</code>, the proof will be called <code>P.hp5</code>, similarly <code>P.pp</code> will be the proof that <code>P.p</code> is prime etc etc.</p>",
        "id": 545504319,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1760687373
    },
    {
        "content": "<blockquote>\n<p>The second one involves constructing the ring homomorphism from <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi mathvariant=\"double-struck\">Z</mi><mi>p</mi></msub></mrow><annotation encoding=\"application/x-tex\">\\mathbb{Z}_p</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.975em;vertical-align:-0.2861em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">Z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">p</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span></span></span></span> to <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">Z</mi><mi mathvariant=\"normal\">/</mi><mi>p</mi><mi mathvariant=\"double-struck\">Z</mi></mrow><annotation encoding=\"application/x-tex\">\\mathbb{Z}/p\\Z</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathbb\">Z</span><span class=\"mord\">/</span><span class=\"mord mathnormal\">p</span><span class=\"mord mathbb\">Z</span></span></span></span> and I couldn't immediately find it so I left it.</p>\n</blockquote>\n<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=PadicInt.toZMod#doc\">docs#PadicInt.toZMod</a></p>",
        "id": 545588934,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1760713213
    },
    {
        "content": "<p>Thanks! Here's a revised version of that file:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">FLT</span><span class=\"bp\">.</span><span class=\"n\">GaloisRepresentation</span><span class=\"bp\">.</span><span class=\"n\">HardlyRamified</span><span class=\"bp\">.</span><span class=\"n\">Defs</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">FLT</span><span class=\"bp\">.</span><span class=\"n\">Deformations</span><span class=\"bp\">.</span><span class=\"n\">RepresentationTheory</span><span class=\"bp\">.</span><span class=\"n\">EllipticCurve</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">FLT</span><span class=\"bp\">.</span><span class=\"n\">Basic</span><span class=\"bp\">.</span><span class=\"n\">Reductions</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">FLT</span><span class=\"bp\">.</span><span class=\"n\">FreyPackage</span><span class=\"o\">)</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">GaloisRepresentation</span>\n\n<span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">FLT</span><span class=\"bp\">.</span><span class=\"n\">FreyPackage</span><span class=\"bp\">.</span><span class=\"n\">hp_odd</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Odd</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"bp\">.</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">Prime</span><span class=\"bp\">.</span><span class=\"n\">odd_of_ne_two</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"bp\">.</span><span class=\"n\">pp</span><span class=\"w\"> </span><span class=\"bp\">&lt;|</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"bp\">.</span><span class=\"n\">hp5</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">linarith</span>\n\n<span class=\"kn\">noncomputable</span><span class=\"w\"> </span><span class=\"kn\">local</span><span class=\"w\"> </span><span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Fact</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">Prime</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Algebra</span><span class=\"w\"> </span><span class=\"n\">ℤ_</span><span class=\"o\">[</span><span class=\"n\">p</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ZMod</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">RingHom</span><span class=\"bp\">.</span><span class=\"n\">toAlgebra</span><span class=\"w\"> </span><span class=\"n\">PadicInt</span><span class=\"bp\">.</span><span class=\"n\">toZMod</span>\n\n<span class=\"c1\">-- could be proved easily using `WeierstrassCurve.n_torsion_card`</span>\n<span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Module</span><span class=\"bp\">.</span><span class=\"n\">Finite</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ZMod</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"bp\">.</span><span class=\"n\">p</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">P</span><span class=\"bp\">.</span><span class=\"n\">freyCurve</span><span class=\"bp\">.</span><span class=\"n\">n_torsion</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"bp\">.</span><span class=\"n\">p</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">FLT</span><span class=\"bp\">.</span><span class=\"n\">FreyPackage</span><span class=\"bp\">.</span><span class=\"n\">FreyCurve</span><span class=\"bp\">.</span><span class=\"n\">torsion_isHardlyRamified</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fact</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">P</span><span class=\"bp\">.</span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">Prime</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">P</span><span class=\"bp\">.</span><span class=\"n\">pp</span><span class=\"bp\">⟩</span>\n<span class=\"w\">    </span><span class=\"n\">IsHardlyRamified</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"bp\">.</span><span class=\"n\">hp_odd</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n<span class=\"w\">      </span><span class=\"o\">(</span><span class=\"n\">P</span><span class=\"bp\">.</span><span class=\"n\">freyCurve</span><span class=\"bp\">.</span><span class=\"n\">galoisRep</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"bp\">.</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">show</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"bp\">.</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"bp\">.</span><span class=\"n\">hppos</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">FLT</span><span class=\"bp\">.</span><span class=\"n\">FreyPackage</span><span class=\"bp\">.</span><span class=\"n\">FreyCurve</span><span class=\"bp\">.</span><span class=\"n\">torsion_not_isIrreducible</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fact</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">P</span><span class=\"bp\">.</span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">Prime</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">P</span><span class=\"bp\">.</span><span class=\"n\">pp</span><span class=\"bp\">⟩</span>\n<span class=\"w\">    </span><span class=\"bp\">¬</span><span class=\"w\"> </span><span class=\"n\">GaloisRep</span><span class=\"bp\">.</span><span class=\"n\">IsIrreducible</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">P</span><span class=\"bp\">.</span><span class=\"n\">freyCurve</span><span class=\"bp\">.</span><span class=\"n\">galoisRep</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"bp\">.</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"bp\">.</span><span class=\"n\">hppos</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span><span class=\"w\"> </span><span class=\"c1\">-- TODO prove this</span>\n</code></pre></div>",
        "id": 545594970,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1760714733
    },
    {
        "content": "<p>Actually one of the <code>sorry</code>s is false -- looking at the code I've defined the Galois rep to be the p-torsion of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>E</mi><mo stretchy=\"false\">(</mo><mi mathvariant=\"double-struck\">Q</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">E(\\mathbb{Q})</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"mopen\">(</span><span class=\"mord mathbb\">Q</span><span class=\"mclose\">)</span></span></span></span> not <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>E</mi><mo stretchy=\"false\">(</mo><mover accent=\"true\"><mi mathvariant=\"double-struck\">Q</mi><mo stretchy=\"true\">‾</mo></mover><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">E(\\overline{\\mathbb{Q}})</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.1389em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"mopen\">(</span><span class=\"mord overline\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8889em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">Q</span></span></span><span style=\"top:-3.8089em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"overline-line\" style=\"border-bottom-width:0.04em;\"></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1667em;\"><span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span> -- I'll fix this now. I set up all of the machinery to have the Galois group acting on the <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mover accent=\"true\"><mi mathvariant=\"double-struck\">Q</mi><mo stretchy=\"true\">‾</mo></mover></mrow><annotation encoding=\"application/x-tex\">\\overline{\\mathbb{Q}}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0556em;vertical-align:-0.1667em;\"></span><span class=\"mord overline\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8889em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">Q</span></span></span><span style=\"top:-3.8089em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"overline-line\" style=\"border-bottom-width:0.04em;\"></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1667em;\"><span></span></span></span></span></span></span></span></span>-points but in the recent PR when I was just trying to get the statement down it looks like I've used the <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">Q</mi></mrow><annotation encoding=\"application/x-tex\">\\mathbb{Q}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8556em;vertical-align:-0.1667em;\"></span><span class=\"mord mathbb\">Q</span></span></span></span>-points.</p>",
        "id": 545597310,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1760715061
    },
    {
        "content": "<p>What is the difference between these two:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">blah</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fact</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">P</span><span class=\"bp\">.</span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">Prime</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">P</span><span class=\"bp\">.</span><span class=\"n\">pp</span><span class=\"bp\">⟩</span>\n<span class=\"w\">  </span><span class=\"n\">Something</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"bp\">.</span><span class=\"n\">p</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">blah'</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hPp</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"bp\">.</span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">Prime</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Something</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"bp\">.</span><span class=\"n\">p</span>\n</code></pre></div>",
        "id": 545600434,
        "sender_full_name": "Stepan Nesterov",
        "timestamp": 1760715810
    },
    {
        "content": "<p>In practice, <code>FLT.FreyPackage.FreyCurve.torsion_isHardlyRamified</code>seems to need a proof of <code>Fact (P.p.Prime)</code> as an argument</p>",
        "id": 545600602,
        "sender_full_name": "Stepan Nesterov",
        "timestamp": 1760715840
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/channel/416277-FLT/topic/Hardly.20ramified.20representations/near/545504188\">said</a>:</p>\n<blockquote>\n<p>The first sorry should be easy, p is prime and this is a theorem whose name I didn't remember.</p>\n</blockquote>\n<p>I mean the theorem \"any prime &gt;=5 is odd\" was known in the 1980s</p>",
        "id": 545601371,
        "sender_full_name": "Stepan Nesterov",
        "timestamp": 1760716011
    },
    {
        "content": "<p>So it's fine</p>",
        "id": 545601405,
        "sender_full_name": "Stepan Nesterov",
        "timestamp": 1760716021
    },
    {
        "content": "<p>The difference is that you don't want to use it as <code>blah' P P.pp</code> but rather just <code>blah P</code></p>",
        "id": 545601729,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1760716112
    },
    {
        "content": "<p>So when I do this</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">FLT</span><span class=\"bp\">.</span><span class=\"n\">GaloisRepresentation</span><span class=\"bp\">.</span><span class=\"n\">HardlyRamified</span><span class=\"bp\">.</span><span class=\"n\">Defs</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">FLT</span><span class=\"bp\">.</span><span class=\"n\">GaloisRepresentation</span><span class=\"bp\">.</span><span class=\"n\">HardlyRamified</span><span class=\"bp\">.</span><span class=\"n\">Lift</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">FLT</span><span class=\"bp\">.</span><span class=\"n\">Deformations</span><span class=\"bp\">.</span><span class=\"n\">RepresentationTheory</span><span class=\"bp\">.</span><span class=\"n\">EllipticCurve</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">FLT</span><span class=\"bp\">.</span><span class=\"n\">Basic</span><span class=\"bp\">.</span><span class=\"n\">Reductions</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">FLT</span><span class=\"bp\">.</span><span class=\"n\">FreyPackage</span><span class=\"o\">)</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">GaloisRepresentation</span>\n\n<span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">FLT</span><span class=\"bp\">.</span><span class=\"n\">FreyPackage</span><span class=\"bp\">.</span><span class=\"n\">hp_odd</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Odd</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"bp\">.</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">Prime</span><span class=\"bp\">.</span><span class=\"n\">odd_of_ne_two</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"bp\">.</span><span class=\"n\">pp</span><span class=\"w\"> </span><span class=\"bp\">&lt;|</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"bp\">.</span><span class=\"n\">hp5</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">linarith</span>\n\n<span class=\"kn\">noncomputable</span><span class=\"w\"> </span><span class=\"kn\">local</span><span class=\"w\"> </span><span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Fact</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">Prime</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Algebra</span><span class=\"w\"> </span><span class=\"n\">ℤ_</span><span class=\"o\">[</span><span class=\"n\">p</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ZMod</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">RingHom</span><span class=\"bp\">.</span><span class=\"n\">toAlgebra</span><span class=\"w\"> </span><span class=\"n\">PadicInt</span><span class=\"bp\">.</span><span class=\"n\">toZMod</span>\n<span class=\"c1\">-- could be proved easily using `WeierstrassCurve.n_torsion_card`</span>\n<span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Module</span><span class=\"bp\">.</span><span class=\"n\">Finite</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ZMod</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"bp\">.</span><span class=\"n\">p</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">P</span><span class=\"bp\">.</span><span class=\"n\">freyCurve</span><span class=\"bp\">.</span><span class=\"n\">n_torsion</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"bp\">.</span><span class=\"n\">p</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">FLT</span><span class=\"bp\">.</span><span class=\"n\">FreyPackage</span><span class=\"bp\">.</span><span class=\"n\">FreyCurve</span><span class=\"bp\">.</span><span class=\"n\">torsion_isHardlyRamified</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fact</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">P</span><span class=\"bp\">.</span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">Prime</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">P</span><span class=\"bp\">.</span><span class=\"n\">pp</span><span class=\"bp\">⟩</span>\n<span class=\"w\">    </span><span class=\"n\">IsHardlyRamified</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ℓ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"bp\">.</span><span class=\"n\">p</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"bp\">.</span><span class=\"n\">hp_odd</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n<span class=\"w\">      </span><span class=\"o\">(</span><span class=\"n\">P</span><span class=\"bp\">.</span><span class=\"n\">freyCurve</span><span class=\"bp\">.</span><span class=\"n\">galoisRep</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"bp\">.</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">show</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"bp\">.</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"bp\">.</span><span class=\"n\">hppos</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">FLT</span><span class=\"bp\">.</span><span class=\"n\">FreyPackage</span><span class=\"bp\">.</span><span class=\"n\">FreyCurve</span><span class=\"bp\">.</span><span class=\"n\">torsion_not_isIrreducible</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fact</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">P</span><span class=\"bp\">.</span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">Prime</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">P</span><span class=\"bp\">.</span><span class=\"n\">pp</span><span class=\"bp\">⟩</span>\n<span class=\"w\">    </span><span class=\"bp\">¬</span><span class=\"w\"> </span><span class=\"n\">GaloisRep</span><span class=\"bp\">.</span><span class=\"n\">IsIrreducible</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">P</span><span class=\"bp\">.</span><span class=\"n\">freyCurve</span><span class=\"bp\">.</span><span class=\"n\">galoisRep</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"bp\">.</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"bp\">.</span><span class=\"n\">hppos</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">hard_ram</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">FLT</span><span class=\"bp\">.</span><span class=\"n\">FreyPackage</span><span class=\"bp\">.</span><span class=\"n\">FreyCurve</span><span class=\"bp\">.</span><span class=\"n\">torsion_isHardlyRamified</span><span class=\"w\"> </span><span class=\"n\">P</span>\n</code></pre></div>\n<p>the type of hard_ram is <br>\nhave this := ⋯; IsHardlyRamified ⋯ ⋯ (P.freyCurve.galoisRep P.p ⋯)</p>",
        "id": 545602952,
        "sender_full_name": "Stepan Nesterov",
        "timestamp": 1760716362
    },
    {
        "content": "<p>Which I take to be a function from proofs that P.pp is prime to what I actually want</p>",
        "id": 545603087,
        "sender_full_name": "Stepan Nesterov",
        "timestamp": 1760716386
    },
    {
        "content": "<p>Also the goal is have this := ⋯; ¬(P.freyCurve.galoisRep P.p ⋯).IsIrreducible</p>",
        "id": 545603203,
        "sender_full_name": "Stepan Nesterov",
        "timestamp": 1760716404
    },
    {
        "content": "<p>Does <code>simp</code> clean it up? Or you might use <code>haveI</code> instead, not sure if that'd help</p>",
        "id": 545604771,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1760716709
    },
    {
        "content": "<p>Warning: I'm preparing a PR right now making some other modifications and tidying some of this up (we have a bunch of \"IsSimpleModule\" in the repo right now because there was no definition of an irreducible Galois rep, but now we have such a definition so things need cleaning up). I'll change the <code>have</code>s to <code>haveI</code>s if this makes things easier.</p>",
        "id": 545605060,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1760716772
    },
    {
        "content": "<p>(I thought I was done but I just might have found a diamond in mathlib so I've been distracted)</p>",
        "id": 545605413,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1760716826
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"307953\">Ruben Van de Velde</span> <a href=\"#narrow/channel/416277-FLT/topic/Hardly.20ramified.20representations/near/545604771\">said</a>:</p>\n<blockquote>\n<p>Does <code>simp</code> clean it up?</p>\n</blockquote>\n<p>It does! :)</p>",
        "id": 545606514,
        "sender_full_name": "Stepan Nesterov",
        "timestamp": 1760717023
    },
    {
        "content": "<p>Simp is magic</p>",
        "id": 545606573,
        "sender_full_name": "Stepan Nesterov",
        "timestamp": 1760717032
    },
    {
        "content": "<p>oh argh it's not a diamond, it's just that <code>AlgebraicClosure Rat</code> and <code>SeparableClosure Rat</code> are two different types :-/</p>",
        "id": 545608648,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1760717419
    },
    {
        "content": "<p>There is some design decision to be made here. Mathlib has <code>Field.absoluteGaloisGroup</code> and it is defined to be Gal(alg closure of K / K) where \"Gal\" just means K-algebra isomorphisms. I have been more principled and have been using the separable closure but now I've painted myself into a corner.</p>",
        "id": 545609044,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1760717504
    },
    {
        "content": "<p>We should just change <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Field.absoluteGaloisGroup#doc\">docs#Field.absoluteGaloisGroup</a> to take separable closure right?</p>",
        "id": 545609228,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1760717535
    },
    {
        "content": "<p>I can quite believe that that definition was made before we had existence of separable closure, but maybe? Of course then that would break all the code I just wrote ;-) (because I just switched to algebraic closure) but probably it's easily fixed again.</p>",
        "id": 545609661,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1760717601
    },
    {
        "content": "<p>Another thing which has come up: is it possible to create a computable instance of <code>DecidableEq (AlgebraicClosure ℚ)</code> or shall I just dump the classical instance on it?</p>",
        "id": 545610447,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1760717734
    },
    {
        "content": "<p>The stupid theory of stupid elliptic curves has gone stupid constructive on me and it's causing me pain.</p>",
        "id": 545610571,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1760717757
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/channel/416277-FLT/topic/Hardly.20ramified.20representations/near/545610447\">said</a>:</p>\n<blockquote>\n<p>Another thing which has come up: is it possible to create a computable instance of <code>DecidableEq (AlgebraicClosure ℚ)</code> or shall I just dump the classical instance on it?</p>\n</blockquote>\n<p>Does this mean formalising in Lean an algorithm which checks if two algebraic numbers are equal?</p>",
        "id": 545621872,
        "sender_full_name": "Stepan Nesterov",
        "timestamp": 1760719757
    },
    {
        "content": "<p>Afaik this is mathematically nontrivial</p>",
        "id": 545621974,
        "sender_full_name": "Stepan Nesterov",
        "timestamp": 1760719773
    },
    {
        "content": "<p>Probably best done using theory of heights and effective Liouville bounds or something</p>",
        "id": 545622473,
        "sender_full_name": "Stepan Nesterov",
        "timestamp": 1760719848
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/channel/416277-FLT/topic/Hardly.20ramified.20representations/near/545610447\">said</a>:</p>\n<blockquote>\n<p>Another thing which has come up: is it possible to create a computable instance of <code>DecidableEq (AlgebraicClosure ℚ)</code> or shall I just dump the classical instance on it?</p>\n</blockquote>\n<p>It's a quotient of a really big multivariate polynomial ring by a maximal ideal containing <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=AlgebraicClosure.spanCoeffs#doc\">docs#AlgebraicClosure.spanCoeffs</a> (must exist so choose one with choice) so I think the answer is no, you can't make such an instance computably since you choosed a maximal ideal with choice</p>",
        "id": 545623830,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1760720123
    },
    {
        "content": "<p>Hmm. So does this mean that Mathlib should have <code>noncomputable instance : DecidableEq (AlgebraicClosure K) := Classical.typeDecidableEq _</code> for all fields <code>K</code> (and the same for separable closure), on the basis that we will never have a computable instance for any of these, even if <code>K</code> is <code>ZMod 2</code>?</p>",
        "id": 545624846,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1760720290
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"407114\">@Stepan Nesterov</span> <a href=\"https://github.com/ImperialCollegeLondon/FLT/pull/750\">FLT#750</a> is incoming. It does a huge amount of cleanup \"underneath\" what you're thinking about.</p>",
        "id": 545625482,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1760720383
    },
    {
        "content": "<p>Seems to me that the tension between Stepan's answer and Aaron's answer to the decidable question is resolved with the observation that if we have <code>x : AlgebraicClosure \\Q</code> then we will be able to prove that there's an irred monic poly over Q with x as a root but we will essentially never be able to compute what it is (we might be able to prove what it is for certain values of x but there is no algorithm giving us the min poly for an arbitrary element) and hence <code>DecidableEq</code> is too much to hope for.</p>",
        "id": 545626440,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1760720508
    },
    {
        "content": "<p>Do number fields have decidable equality?<br>\nBecause if you ultimately care about E[n] having decidable equality, couldn’t you just prove E(Qbar)[n] = E(K)[n] for some number field K</p>",
        "id": 545627263,
        "sender_full_name": "Stepan Nesterov",
        "timestamp": 1760720665
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/channel/416277-FLT/topic/Hardly.20ramified.20representations/near/545624846\">said</a>:</p>\n<blockquote>\n<p>Hmm. So does this mean that Mathlib should have <code>noncomputable instance : DecidableEq (AlgebraicClosure K) := Classical.typeDecidableEq _</code> for all fields <code>K</code> (and the same for separable closure), on the basis that we will never have a computable instance for any of these, even if <code>K</code> is <code>ZMod 2</code>?</p>\n</blockquote>\n<p>This may be irrelevant, but it seems the entire file where <code>AlgebraicClosure</code> is defined is enclosed by a <code>noncomputable section</code> <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span></p>",
        "id": 545635463,
        "sender_full_name": "Bryan Wang",
        "timestamp": 1760722220
    },
    {
        "content": "<blockquote>\n<p>We should just change <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Field.absoluteGaloisGroup#doc\">docs#Field.absoluteGaloisGroup</a> to take separable closure right?</p>\n</blockquote>\n<p>That's <a href=\"https://github.com/leanprover-community/mathlib4/pull/19616\">#19616</a> and I left a comment there.</p>",
        "id": 545635778,
        "sender_full_name": "Junyan Xu",
        "timestamp": 1760722278
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"407114\">Stepan Nesterov</span> <a href=\"#narrow/channel/416277-FLT/topic/Hardly.20ramified.20representations/near/545627263\">said</a>:</p>\n<blockquote>\n<p>Do number fields have decidable equality?<br>\nBecause if you ultimately care about E[n] having decidable equality, couldn’t you just prove E(Qbar)[n] = E(K)[n] for some number field K</p>\n</blockquote>\n<p>Mathlib in general makes no attempt to be constructive. The rationals have decidable equality, and if anyone were to make number field instances on the constructively-defined <code>QuadraticAlgebra \\Q a b</code> then we could have decidable equality on those quadratic fields. But if you make a general number field by e.g. taking the splitting field of a random polynomial then this construction is, I would have thought, hopelessly classical in mathlib, and I cannot imagine any desire to make such number fields constructive; if people want e.g. constructive cubic fields then they will probably just make concrete models by hand like we made <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=QuadraticAlgebra#doc\">docs#QuadraticAlgebra</a> concretely.</p>",
        "id": 545640291,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1760723183
    },
    {
        "content": "<p>I am unclear about the following strategy: if K were a random number field of degree 2 then we could prove the existence of a bijection between K and <code>QuadraticAlgebra d 0</code> for some appropriate d; the bijection would need the type-theoretic axiom of choice (to choose which square root we use) and I am sufficiently unclear about all this constructivist stuff to know whether if you have a noncomputable bijection between X and Y then you might be expected to pull back decidable equality on Y to decidable equality on X (I would kind of doubt it but who knows).</p>",
        "id": 545641033,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1760723316
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/channel/416277-FLT/topic/Hardly.20ramified.20representations/near/545641033\">said</a>:</p>\n<blockquote>\n<p>and I am sufficiently unclear about all this constructivist stuff to know whether if you have a noncomputable bijection between X and Y then you might be expected to pull back decidable equality on Y to decidable equality on X (I would kind of doubt it but who knows).</p>\n</blockquote>\n<p>You can pull back decidable equality along computable injective functions but if it's noncomputable then not really (for example, the obvious function <code>Prop → Bool</code> is a noncomputable bijection)</p>",
        "id": 545644185,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1760723864
    },
    {
        "content": "<p>Why doesn't <code>import FLT.GaloisRepresentation.HardlyRamified.Lift.lifts</code> have that R is a domain in its conclusion but <code>FLT.GaloisRepresentation.HardlyRamified.Family.mem_isCompatible</code> requires that R is a domain in its hypothesis?</p>",
        "id": 545794315,
        "sender_full_name": "Stepan Nesterov",
        "timestamp": 1760838014
    },
    {
        "content": "<p>I assume that mathematically it doesn't matter much, because you can pushforward a hardly ramified representation from R to R/p for a minimal prime p and get a hardly ramified representation in a domain, but still</p>",
        "id": 545794352,
        "sender_full_name": "Stepan Nesterov",
        "timestamp": 1760838075
    },
    {
        "content": "<p>Yeah it's always difficult to know what generality to write things in. In the conclusion of <code>lifts</code> we have that R is local (hence nonzero) and finite free over Z_p, so it will have a minimal prime whose quotient will be integral and finite free over Z_p. Of course pushing this argument through will require proving that the minimal prime exists and also proving that a quotient of a hardly ramified representation is hardly ramified. For the first result you could ask on is there code for X, I am not up to date with how much comm alg we have (I think we have a bunch of going up/going down stuff so it should be OK). For the second, I've only just made hardly ramified representations so this result won't be there, it might be an interesting challenge to prove, or you could assume it. Or you could just change the statement of the theorem, or add a new theorem stating what you want and leave a comment saying how to relate it to the old theorem.</p>",
        "id": 545832656,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1760883376
    },
    {
        "content": "<p>What is the idiomatic Lean way of saying ‘R is a ring of integers in a local field’ or ‘R is a local field’? That’s what all these R’s turn out to be in the actual argument, so if you didn’t have any tricky Lean optimizations in mind, I would just change assumptions to one of the two</p>",
        "id": 545839185,
        "sender_full_name": "Stepan Nesterov",
        "timestamp": 1760889227
    },
    {
        "content": "<p>Another question: is there a reason why the conclusion of the nonexistence of 3-adic hardly ramified reps is ‘trace of Frob_b is 1+p’ instead of ‘it is an extension of trivial by cyclotomic’? To prove the equivalence, we need Cebotatev density and Brauer-Nesbitt, and the proof really does give you reducibility.</p>",
        "id": 545839325,
        "sender_full_name": "Stepan Nesterov",
        "timestamp": 1760889378
    },
    {
        "content": "<p>Well, I guess we do need those things anyway because we want to deduce that the original p-adic rep is reducible and we do that by comparing traces :c</p>",
        "id": 545839516,
        "sender_full_name": "Stepan Nesterov",
        "timestamp": 1760889592
    },
    {
        "content": "<p>Are there formalized statements of Cebotarev density and Brauer-Nesbitt anywhere in the file? I couldn’t find them in mathlib, so I assume Lean doesn’t know these yet</p>",
        "id": 545839779,
        "sender_full_name": "Stepan Nesterov",
        "timestamp": 1760889820
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"407114\">Stepan Nesterov</span> <a href=\"#narrow/channel/416277-FLT/topic/Hardly.20ramified.20representations/near/545839185\">said</a>:</p>\n<blockquote>\n<p>‘R is a ring of integers in a local field’ or ‘R is a local field’</p>\n</blockquote>\n<p>we just got nonarch local fields into mathlib recently</p>",
        "id": 545843228,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1760893442
    },
    {
        "content": "<p>and for those you have a <code>ValuativeRel</code>, so you can just write <code>𝒪[k]</code> after <code>open</code>ing <code>ValuativeRel</code></p>",
        "id": 545843264,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1760893480
    },
    {
        "content": "<p>there's also the predicate version called <code>Valuation.Integers</code></p>",
        "id": 545843292,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1760893501
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"407114\">Stepan Nesterov</span> <a href=\"#narrow/channel/416277-FLT/topic/Hardly.20ramified.20representations/near/545839185\">said</a>:</p>\n<blockquote>\n<p>What is the idiomatic Lean way of saying ‘R is a ring of integers in a local field’ or ‘R is a local field’? That’s what all these R’s turn out to be in the actual argument</p>\n</blockquote>\n<p>Is that true? In the lifting theorem the argument proves that the deformation ring is 1-dimensional and finite over Z_p, so it pretty much says what I wrote as opposed to what you're claiming that they turn out to be. At least, this is why I wrote it the way I wrote it. Even if we quotient out by a minimal prime we just get something which is an integral domain, finite and free over Z_p; I don't see any reason why this order in the field of fractions would be maximal in general.</p>\n<p>The idiomatic way to say \"I am a nonarchimedean local field\" was only established very recently. AFAIK there is currently no way to idiomatically say \"I am the ring of integers in a local field\", but I don't see anything wrong with \"I'm a Z_p-algebra, finite and free as a module, and an integral domain\" for being an order, and then you could add \"I am integrally closed\" if you want it to be the full ring of integers, although I am a bit unclear about how full rings of integers are involved.</p>",
        "id": 545851612,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1760901868
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"407114\">Stepan Nesterov</span> <a href=\"#narrow/channel/416277-FLT/topic/Hardly.20ramified.20representations/near/545839325\">said</a>:</p>\n<blockquote>\n<p>Another question: is there a reason why the conclusion of the nonexistence of 3-adic hardly ramified reps is ‘trace of Frob_b is 1+p’ instead of ‘it is an extension of trivial by cyclotomic’? To prove the equivalence, we need Cebotatev density and Brauer-Nesbitt, and the proof really does give you reducibility.</p>\n</blockquote>\n<p>I just chose something random because I wanted to formalise something. We could absolutely change it to \"I am an extension of trivial by cyclotomic\". Cebotarev and B-N we can just assume, they were known in the 80s.</p>",
        "id": 545851683,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1760901933
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110064\">Kenny Lau</span> <a href=\"#narrow/channel/416277-FLT/topic/Hardly.20ramified.20representations/near/545843264\">said</a>:</p>\n<blockquote>\n<p>and for those you have a <code>ValuativeRel</code>, so you can just write <code>𝒪[k]</code> after <code>open</code>ing <code>ValuativeRel</code></p>\n</blockquote>\n<p>But we don't have k, I think the argument gives you a Z_p-algebra which has a nonzero torsion-free quotient which is finite over Z_p. I am a bit confused about why local fields need to be involved here.</p>",
        "id": 545851735,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1760902001
    },
    {
        "content": "<p>Fields get involved because the argument uses some results from representation theory of groups over fields, such as Brauer's theorem on induced characters and Brauer-Nesbitt.<br>\nThe way I have the argument in my mind is:</p>\n<ul>\n<li>The universal deformation ring is finite</li>\n<li>Therefore, it has a K-point, for K/Q_p finite</li>\n<li>The representation rho corresponding to this K-point is potentially modular, hence, its restriction to G_F speads out to a compatible family </li>\n<li>By Brauer group trick and solvable base change, rho itself spreads (this formalism is over a field)</li>\n<li>The 3-adic rep in the family is reducible, hence Tr(Frob_q)=1+q</li>\n<li>The traces of rho are also 1+q, hence by Brauer-Nesbitt (which is over a field), rho^ss = 1 + cyclo</li>\n<li>Therefore, the reduction of rho (which I will need to formally define, I guess) is reducible</li>\n</ul>",
        "id": 545852499,
        "sender_full_name": "Stepan Nesterov",
        "timestamp": 1760902886
    },
    {
        "content": "<p>Alternatively, I could maybe say that two representations into GL_2(O_K) are isogenous, if they have sublattices which are isomorphic as representations, and state Brauer-Nesbitt in the form \"equal traces =&gt; semisimplifications are isogenous\". Of course the semisimplification will itself only be defined up to isogeny in this approach.<br>\nThe reason I want full O_K here is because I'm scared of non-normal rings and I'm afraid I will need to consider representations into non-free modules or something to make a correct statement</p>",
        "id": 545852761,
        "sender_full_name": "Stepan Nesterov",
        "timestamp": 1760903169
    },
    {
        "content": "<p>Are there obvious Lean reasons for why field approach or O_K approach is better?</p>",
        "id": 545852792,
        "sender_full_name": "Stepan Nesterov",
        "timestamp": 1760903209
    },
    {
        "content": "<p>I don't talk about hardly ramified representations into fields because the flatness criterion involves an integral model (a rep to GL_2(R) is flat iff the correponding reps to GL_2(R/I) come from a ffgs for all open ideals I), so one then has to decide how to formalise what it means for a rep to GL_2(K) to be hardly ramified (there exists a good lattice/for all good lattices). Again of course these things are all the same, but with formalization you just have to be very precise by what you mean with phrases like \"hardly ramified\" and \"flat\". I think I would avoid the concept of isogenous representations and work with fields -- and as you point out we'll have to work with fields when doing the Brauer group trick -- but mathematicians are good at glossing over issues, such as calling reps to GL_2(K) flat whereas in fact this concept depends on an integral model (and is independent of the model, but in Lean one would have to give this concept another name). At the end I was going to go \"trace of p-adic lift to GL_2(R), when tensored with K, is 1+q, so trace of p-adic lift to GL_2(R) has trace 1+q, so trace of original mod p rhobar is 1+q so it's reducible\" rather than attempting to reduce a p-adic representation mod p (which of course we'll also have to do at some stage).</p>",
        "id": 545855562,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1760906230
    },
    {
        "content": "<p>Your \"R is finite therefore has a K-point\" is just my \"choose a minimal prime\", you then work with the field of fractions of R/P which will be finite over Q_p and a field and hence a local field.</p>",
        "id": 545855585,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1760906274
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/channel/416277-FLT/topic/Hardly.20ramified.20representations/near/545855562\">said</a>:</p>\n<blockquote>\n<p>trace of original mod p rhobar is 1+q so it's reducible</p>\n</blockquote>\n<p>But you cannot apply Braueer-Nesbitt in positive characteristic. Well, you can, but then you need to define Brauer characters, which would take us too far afield</p>",
        "id": 545855812,
        "sender_full_name": "Stepan Nesterov",
        "timestamp": 1760906578
    },
    {
        "content": "<p>I think we need to say \"trace of the original is 1 + p =&gt; original tensor field is reducible =&gt; reduction of some lattice is reducible, but well-defined up to semisimplification, so rhobar reducible\" at this point</p>",
        "id": 545855920,
        "sender_full_name": "Stepan Nesterov",
        "timestamp": 1760906719
    },
    {
        "content": "<p>But I assume I can leave \"reduction well-defined\" as a sorry because it was known in the 1980s</p>",
        "id": 545855970,
        "sender_full_name": "Stepan Nesterov",
        "timestamp": 1760906789
    },
    {
        "content": "<p>Wait, actually you can, if you state Brauer-Nesbitt as \"If rho and sigma are reps over a field of char p, which have the same traces, then for any irreducible tau the amount of occurences of tau in the Jordan-Holder series of sigma is congruent mod p to the amount of occurences of tau in the Jordan-Holder series of rho\"</p>",
        "id": 545856558,
        "sender_full_name": "Stepan Nesterov",
        "timestamp": 1760907458
    },
    {
        "content": "<p>The statement I was thinking of is \"if semisimple rho and sigma have the same char polys then they're iso\"</p>",
        "id": 545857061,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1760908133
    },
    {
        "content": "<p>Yea ok</p>",
        "id": 545857080,
        "sender_full_name": "Stepan Nesterov",
        "timestamp": 1760908160
    },
    {
        "content": "<p>Because 1 and cyclo are distinct, everything is fine</p>",
        "id": 545857091,
        "sender_full_name": "Stepan Nesterov",
        "timestamp": 1760908177
    },
    {
        "content": "<p>Is there a theorem saying that if Galois representations are conjugate, then Frobenius at v has the same characteristic polynomial in them?<br>\nI have <code>(GaloisRep.baseChange (AlgebraicClosure ℚ_[P.p]) σ).conj r' = T fact ψ</code>,  and I need to relate <code>LinearMap.charpoly (((T fact ψ).toLocal v) (Field.AbsoluteGaloisGroup.adicArithFrob v))</code> to <code>LinearMap.charpoly (GaloisRep.baseChange (AlgebraicClosure ℚ_[P.p]) σ)  (Field.AbsoluteGaloisGroup.adicArithFrob v))</code></p>",
        "id": 547623290,
        "sender_full_name": "Stepan Nesterov",
        "timestamp": 1761708912
    },
    {
        "content": "<p>Also is there a theorem saying that charpoly behaves correctly under base change of Galois representations? I need <br>\n<code>LinearMap.charpoly ((((GaloisRep.baseChange (AlgebraicClosure ℚ_[3]) τ).conj r'').toLocal v) (Field.AbsoluteGaloisGroup.adicArithFrob v)) = Polynomial.map Algebra.algebraMap (LinearMap.charpoly ((τ.toLocal v) (Field.AbsoluteGaloisGroup.adicArithFrob v)))</code></p>",
        "id": 547626606,
        "sender_full_name": "Stepan Nesterov",
        "timestamp": 1761711757
    },
    {
        "content": "<p><code>GaloisRep</code> is a definition made in FLT, and you can see absolutely everything we know about it by just searching for <code>GaloisRep</code> in the FLT repo. I'm sure we're missing plenty of API! Your first step could be to get <code>GaloisRep</code> out of the question and to reduce it to a question involving only objects defined in mathlib and then ask again (because then the whole mathlib community can help), or alternatively to isolate and prove some intermediate results which will help. </p>\n<p>Unfortunately I have to spend all day interviewing (apart from a 1 hour lunch break which I will be spending giving a Zoom talk due to poor planning on my part) so I am out of action for the next 8 hours. I guess one thing which might be helpful is if you make a <a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a> which would run in the FLT repository; then I can start working on your question much more easily.</p>",
        "id": 547656963,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1761727707
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"407114\">@Stepan Nesterov</span> I've finally found the time to look at your question but it's just full of undefined terms and I can't get it to compile. Here's what I have so far:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">FLT</span><span class=\"bp\">.</span><span class=\"n\">GaloisRepresentation</span><span class=\"bp\">.</span><span class=\"n\">HardlyRamified</span><span class=\"bp\">.</span><span class=\"n\">Defs</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">FLT</span><span class=\"bp\">.</span><span class=\"n\">Basic</span><span class=\"bp\">.</span><span class=\"n\">FreyPackage</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">FreyPackage</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Fact</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"bp\">.</span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">Prime</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">GaloisRep</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">GaloisRep</span><span class=\"bp\">.</span><span class=\"n\">baseChange</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">AlgebraicClosure</span><span class=\"w\"> </span><span class=\"n\">ℚ_</span><span class=\"o\">[</span><span class=\"n\">P</span><span class=\"bp\">.</span><span class=\"n\">p</span><span class=\"o\">])</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">conj</span><span class=\"w\"> </span><span class=\"n\">r'</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">T</span><span class=\"w\"> </span><span class=\"n\">fact</span><span class=\"w\"> </span><span class=\"n\">ψ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">LinearMap</span><span class=\"bp\">.</span><span class=\"n\">charpoly</span><span class=\"w\"> </span><span class=\"o\">(((</span><span class=\"n\">T</span><span class=\"w\"> </span><span class=\"n\">fact</span><span class=\"w\"> </span><span class=\"n\">ψ</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">toLocal</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Field</span><span class=\"bp\">.</span><span class=\"n\">AbsoluteGaloisGroup</span><span class=\"bp\">.</span><span class=\"n\">adicArithFrob</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"bp\">=</span>\n<span class=\"w\">    </span><span class=\"n\">LinearMap</span><span class=\"bp\">.</span><span class=\"n\">charpoly</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">GaloisRep</span><span class=\"bp\">.</span><span class=\"n\">baseChange</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">AlgebraicClosure</span><span class=\"w\"> </span><span class=\"n\">ℚ_</span><span class=\"o\">[</span><span class=\"n\">P</span><span class=\"bp\">.</span><span class=\"n\">p</span><span class=\"o\">])</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Field</span><span class=\"bp\">.</span><span class=\"n\">AbsoluteGaloisGroup</span><span class=\"bp\">.</span><span class=\"n\">adicArithFrob</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>The best way to ask \"how do I prove X\" on this forum is to say \"here is compiling Lean code; how do I fill in the sorry?\" There are often several different ways to formalise the same mathematical idea so the added precision here is more important than you think.</p>",
        "id": 553245140,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1762089977
    },
    {
        "content": "<p>Looks to me like <code>GaloisRep.conj</code> is defined in terms of <code>LinearEquiv.algConj</code> which is defined in terms of <code>LinearEquiv.conjRingEquiv</code> which is defined by an explicit conjugation, and everything here is defeq, so Lean will be able to see through a lot of it and you should be able to use <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=LinearEquiv.charpoly_conj#doc\">docs#LinearEquiv.charpoly_conj</a> to answer your conjugate question.</p>",
        "id": 553245636,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1762090490
    },
    {
        "content": "<p>As for base change, if I've understood the question correctly then you're talking about <code>GaloisRep.baseChange</code> which is defined in terms of <code>Module.End.baseChangeHom</code> which is defined in terms of <code>LinearMap.baseChange</code> so you should be able to use <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=LinearMap.charpoly_baseChange#doc\">docs#LinearMap.charpoly_baseChange</a> . In general the amount of precision in my answer balances the amount of precision in your question.</p>",
        "id": 553245866,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1762090739
    },
    {
        "content": "<p>Ok sorry</p>",
        "id": 553702960,
        "sender_full_name": "Stepan Nesterov",
        "timestamp": 1762286668
    },
    {
        "content": "<p>Here's my sorries:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">FLT</span><span class=\"bp\">.</span><span class=\"n\">GaloisRepresentation</span><span class=\"bp\">.</span><span class=\"n\">HardlyRamified</span><span class=\"bp\">.</span><span class=\"n\">Defs</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">FLT</span><span class=\"bp\">.</span><span class=\"n\">GaloisRepresentation</span><span class=\"bp\">.</span><span class=\"n\">HardlyRamified</span><span class=\"bp\">.</span><span class=\"n\">Lift</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">FLT</span><span class=\"bp\">.</span><span class=\"n\">GaloisRepresentation</span><span class=\"bp\">.</span><span class=\"n\">HardlyRamified</span><span class=\"bp\">.</span><span class=\"n\">Family</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">FLT</span><span class=\"bp\">.</span><span class=\"n\">GaloisRepresentation</span><span class=\"bp\">.</span><span class=\"n\">HardlyRamified</span><span class=\"bp\">.</span><span class=\"n\">Threeadic</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">FLT</span><span class=\"bp\">.</span><span class=\"n\">Basic</span><span class=\"bp\">.</span><span class=\"n\">FreyPackage</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span><span class=\"bp\">.</span><span class=\"n\">Cases</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">LinearAlgebra</span><span class=\"bp\">.</span><span class=\"n\">Charpoly</span><span class=\"bp\">.</span><span class=\"n\">ToMatrix</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">K</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">L</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Field</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Field</span><span class=\"w\"> </span><span class=\"n\">L</span><span class=\"o\">]</span>\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">CommRing</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">TopologicalSpace</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"o\">]</span>\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">CommRing</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">TopologicalSpace</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">IsTopologicalRing</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"o\">]</span>\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Algebra</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">ContinuousSMul</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"o\">]</span>\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"n\">N</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">AddCommGroup</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Module</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">AddCommGroup</span><span class=\"w\"> </span><span class=\"n\">N</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Module</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">N</span><span class=\"o\">]</span>\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Module</span><span class=\"bp\">.</span><span class=\"n\">Finite</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Module</span><span class=\"bp\">.</span><span class=\"n\">Free</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Module</span><span class=\"bp\">.</span><span class=\"n\">Finite</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">N</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Module</span><span class=\"bp\">.</span><span class=\"n\">Free</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">N</span><span class=\"o\">]</span>\n\n<span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">charpoly_base_change</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ρ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">GaloisRep</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Field</span><span class=\"bp\">.</span><span class=\"n\">absoluteGaloisGroup</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">  </span><span class=\"n\">LinearMap</span><span class=\"bp\">.</span><span class=\"n\">charpoly</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">GaloisRep</span><span class=\"bp\">.</span><span class=\"n\">baseChange</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"n\">ρ</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span>\n<span class=\"w\">    </span><span class=\"n\">Polynomial</span><span class=\"bp\">.</span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"n\">Algebra</span><span class=\"bp\">.</span><span class=\"n\">algebraMap</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">LinearMap</span><span class=\"bp\">.</span><span class=\"n\">charpoly</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ρ</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n\n<span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">charpoly_conj</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ρ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">GaloisRep</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">e</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"bp\">≃ₗ</span><span class=\"o\">[</span><span class=\"n\">A</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">N</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Field</span><span class=\"bp\">.</span><span class=\"n\">absoluteGaloisGroup</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">  </span><span class=\"n\">LinearMap</span><span class=\"bp\">.</span><span class=\"n\">charpoly</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"n\">GaloisRep</span><span class=\"bp\">.</span><span class=\"n\">conj</span><span class=\"w\"> </span><span class=\"n\">ρ</span><span class=\"w\"> </span><span class=\"n\">e</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">LinearMap</span><span class=\"bp\">.</span><span class=\"n\">charpoly</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ρ</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n\n<span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">conj_commutes_with_to_local</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">NumberField</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"o\">]</span>\n<span class=\"w\">   </span><span class=\"o\">(</span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IsDedekindDomain</span><span class=\"bp\">.</span><span class=\"n\">HeightOneSpectrum</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">NumberField</span><span class=\"bp\">.</span><span class=\"n\">RingOfIntegers</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ρ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">GaloisRep</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">)</span>\n<span class=\"w\">     </span><span class=\"o\">(</span><span class=\"n\">e</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"bp\">≃ₗ</span><span class=\"o\">[</span><span class=\"n\">A</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">N</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">GaloisRep</span><span class=\"bp\">.</span><span class=\"n\">conj</span><span class=\"w\"> </span><span class=\"n\">ρ</span><span class=\"w\"> </span><span class=\"n\">e</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">toLocal</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">GaloisRep</span><span class=\"bp\">.</span><span class=\"n\">conj</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ρ</span><span class=\"bp\">.</span><span class=\"n\">toLocal</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">e</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n\n<span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">to_local_commutes_with_base_change</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">NumberField</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"o\">]</span>\n<span class=\"w\">   </span><span class=\"o\">(</span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IsDedekindDomain</span><span class=\"bp\">.</span><span class=\"n\">HeightOneSpectrum</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">NumberField</span><span class=\"bp\">.</span><span class=\"n\">RingOfIntegers</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ρ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">GaloisRep</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">GaloisRep</span><span class=\"bp\">.</span><span class=\"n\">baseChange</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"n\">ρ</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">toLocal</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">GaloisRep</span><span class=\"bp\">.</span><span class=\"n\">baseChange</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ρ</span><span class=\"bp\">.</span><span class=\"n\">toLocal</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n</code></pre></div>",
        "id": 553703030,
        "sender_full_name": "Stepan Nesterov",
        "timestamp": 1762286690
    },
    {
        "content": "<p>Ok actually the last two are just rfl</p>",
        "id": 553703232,
        "sender_full_name": "Stepan Nesterov",
        "timestamp": 1762286770
    },
    {
        "content": "<p>And the first two are the suggestions I made (modulo adding an import: when developing I usually just do <code>import Mathlib</code> and then <code>#min_imports</code> later on)</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">FLT</span><span class=\"bp\">.</span><span class=\"n\">GaloisRepresentation</span><span class=\"bp\">.</span><span class=\"n\">HardlyRamified</span><span class=\"bp\">.</span><span class=\"n\">Defs</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">FLT</span><span class=\"bp\">.</span><span class=\"n\">GaloisRepresentation</span><span class=\"bp\">.</span><span class=\"n\">HardlyRamified</span><span class=\"bp\">.</span><span class=\"n\">Lift</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">FLT</span><span class=\"bp\">.</span><span class=\"n\">GaloisRepresentation</span><span class=\"bp\">.</span><span class=\"n\">HardlyRamified</span><span class=\"bp\">.</span><span class=\"n\">Family</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">FLT</span><span class=\"bp\">.</span><span class=\"n\">GaloisRepresentation</span><span class=\"bp\">.</span><span class=\"n\">HardlyRamified</span><span class=\"bp\">.</span><span class=\"n\">Threeadic</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">FLT</span><span class=\"bp\">.</span><span class=\"n\">Basic</span><span class=\"bp\">.</span><span class=\"n\">FreyPackage</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span><span class=\"bp\">.</span><span class=\"n\">Cases</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">LinearAlgebra</span><span class=\"bp\">.</span><span class=\"n\">Charpoly</span><span class=\"bp\">.</span><span class=\"n\">ToMatrix</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">LinearAlgebra</span><span class=\"bp\">.</span><span class=\"n\">Charpoly</span><span class=\"bp\">.</span><span class=\"n\">BaseChange</span><span class=\"w\"> </span><span class=\"c1\">-- I added this</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">K</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">L</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Field</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Field</span><span class=\"w\"> </span><span class=\"n\">L</span><span class=\"o\">]</span>\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">CommRing</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">TopologicalSpace</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"o\">]</span>\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">CommRing</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">TopologicalSpace</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">IsTopologicalRing</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"o\">]</span>\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Algebra</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">ContinuousSMul</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"o\">]</span>\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"n\">N</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">AddCommGroup</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Module</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">AddCommGroup</span><span class=\"w\"> </span><span class=\"n\">N</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Module</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">N</span><span class=\"o\">]</span>\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Module</span><span class=\"bp\">.</span><span class=\"n\">Finite</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Module</span><span class=\"bp\">.</span><span class=\"n\">Free</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Module</span><span class=\"bp\">.</span><span class=\"n\">Finite</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">N</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Module</span><span class=\"bp\">.</span><span class=\"n\">Free</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">N</span><span class=\"o\">]</span>\n\n<span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">charpoly_base_change</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ρ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">GaloisRep</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Field</span><span class=\"bp\">.</span><span class=\"n\">absoluteGaloisGroup</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">  </span><span class=\"n\">LinearMap</span><span class=\"bp\">.</span><span class=\"n\">charpoly</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">GaloisRep</span><span class=\"bp\">.</span><span class=\"n\">baseChange</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"n\">ρ</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span>\n<span class=\"w\">    </span><span class=\"n\">Polynomial</span><span class=\"bp\">.</span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"n\">Algebra</span><span class=\"bp\">.</span><span class=\"n\">algebraMap</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">LinearMap</span><span class=\"bp\">.</span><span class=\"n\">charpoly</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ρ</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">LinearMap</span><span class=\"bp\">.</span><span class=\"n\">charpoly_baseChange</span>\n\n<span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">charpoly_conj</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ρ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">GaloisRep</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">e</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"bp\">≃ₗ</span><span class=\"o\">[</span><span class=\"n\">A</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">N</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Field</span><span class=\"bp\">.</span><span class=\"n\">absoluteGaloisGroup</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">LinearMap</span><span class=\"bp\">.</span><span class=\"n\">charpoly</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"n\">GaloisRep</span><span class=\"bp\">.</span><span class=\"n\">conj</span><span class=\"w\"> </span><span class=\"n\">ρ</span><span class=\"w\"> </span><span class=\"n\">e</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">LinearMap</span><span class=\"bp\">.</span><span class=\"n\">charpoly</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ρ</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">LinearEquiv</span><span class=\"bp\">.</span><span class=\"n\">charpoly_conj</span>\n\n<span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">conj_commutes_with_to_local</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">NumberField</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"o\">]</span>\n<span class=\"w\">   </span><span class=\"o\">(</span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IsDedekindDomain</span><span class=\"bp\">.</span><span class=\"n\">HeightOneSpectrum</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">NumberField</span><span class=\"bp\">.</span><span class=\"n\">RingOfIntegers</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ρ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">GaloisRep</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">)</span>\n<span class=\"w\">     </span><span class=\"o\">(</span><span class=\"n\">e</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"bp\">≃ₗ</span><span class=\"o\">[</span><span class=\"n\">A</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">N</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">GaloisRep</span><span class=\"bp\">.</span><span class=\"n\">conj</span><span class=\"w\"> </span><span class=\"n\">ρ</span><span class=\"w\"> </span><span class=\"n\">e</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">toLocal</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">GaloisRep</span><span class=\"bp\">.</span><span class=\"n\">conj</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ρ</span><span class=\"bp\">.</span><span class=\"n\">toLocal</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">e</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">rfl</span>\n\n<span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">to_local_commutes_with_base_change</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">NumberField</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"o\">]</span>\n<span class=\"w\">   </span><span class=\"o\">(</span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IsDedekindDomain</span><span class=\"bp\">.</span><span class=\"n\">HeightOneSpectrum</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">NumberField</span><span class=\"bp\">.</span><span class=\"n\">RingOfIntegers</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ρ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">GaloisRep</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">GaloisRep</span><span class=\"bp\">.</span><span class=\"n\">baseChange</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"n\">ρ</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">toLocal</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">GaloisRep</span><span class=\"bp\">.</span><span class=\"n\">baseChange</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ρ</span><span class=\"bp\">.</span><span class=\"n\">toLocal</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">rfl</span>\n</code></pre></div>",
        "id": 553710526,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1762288874
    },
    {
        "content": "<p>You don't even need to go into tactic mode:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">charpoly_base_change</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ρ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">GaloisRep</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Field</span><span class=\"bp\">.</span><span class=\"n\">absoluteGaloisGroup</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">LinearMap</span><span class=\"bp\">.</span><span class=\"n\">charpoly</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">GaloisRep</span><span class=\"bp\">.</span><span class=\"n\">baseChange</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"n\">ρ</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span>\n<span class=\"w\">    </span><span class=\"n\">Polynomial</span><span class=\"bp\">.</span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"n\">Algebra</span><span class=\"bp\">.</span><span class=\"n\">algebraMap</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">LinearMap</span><span class=\"bp\">.</span><span class=\"n\">charpoly</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ρ</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">LinearMap</span><span class=\"bp\">.</span><span class=\"n\">charpoly_baseChange</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">_</span>\n\n<span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">charpoly_conj</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ρ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">GaloisRep</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">e</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"bp\">≃ₗ</span><span class=\"o\">[</span><span class=\"n\">A</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">N</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Field</span><span class=\"bp\">.</span><span class=\"n\">absoluteGaloisGroup</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">LinearMap</span><span class=\"bp\">.</span><span class=\"n\">charpoly</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"n\">GaloisRep</span><span class=\"bp\">.</span><span class=\"n\">conj</span><span class=\"w\"> </span><span class=\"n\">ρ</span><span class=\"w\"> </span><span class=\"n\">e</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">LinearMap</span><span class=\"bp\">.</span><span class=\"n\">charpoly</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ρ</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">LinearEquiv</span><span class=\"bp\">.</span><span class=\"n\">charpoly_conj</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">_</span>\n</code></pre></div>\n<p>Lean sees through all the definitional equalities.</p>",
        "id": 553711219,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1762289010
    },
    {
        "content": "<p>Is the rule that defeq works with apply but not rw?</p>",
        "id": 553711418,
        "sender_full_name": "Stepan Nesterov",
        "timestamp": 1762289045
    },
    {
        "content": "<p>Roughly, yes</p>",
        "id": 553716080,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1762290081
    },
    {
        "content": "<p>Yeah <code>rw</code> will only match up to syntactic equality which is much stronger</p>",
        "id": 553726003,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1762294311
    },
    {
        "content": "<p>Alright, I have succesfully reduced the task to proving <code>¬ GaloisRep.IsIrreducible (P.freyCurve.galoisRep P.p P.hppos)</code> from<br>\n<code>∀ v ∉ S, 3 ∉ v.asIdeal → 5 ≤ ↑(toNatPrime v) → ↑P.p ∉ v.asIdeal → LinearMap.charpoly (((P.freyCurve.galoisRep P.p ⋯).toLocal v) (Field.AbsoluteGaloisGroup.adicArithFrob v)) = Polynomial.map Algebra.algebraMap ((Polynomial.X - 1) * (Polynomial.X - ↑↑(toNatPrime v)))</code><br>\nDo we need recognizable statements of Cebotarev density and Brauer-Nesbitt + formal deduction of this implication from these statements or does this count as reducing a theorem to results known in the 80s?</p>",
        "id": 553764516,
        "sender_full_name": "Stepan Nesterov",
        "timestamp": 1762318740
    },
    {
        "content": "<p>Reduction: please PR!</p>\n<p>Reducing to 1980s: right now my attitude is \"if I could prove it in the 1980s with a short proof using only standard stuff then skip it for now and we'll come back to it later\". I think this attitude will force us to focus on the important stuff, and I'll worry about tidying up later.</p>",
        "id": 553826987,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1762341602
    }
]