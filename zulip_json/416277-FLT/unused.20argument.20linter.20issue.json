[
    {
        "content": "<p>What have I done wrong in <a href=\"https://github.com/ImperialCollegeLondon/FLT/pull/732\">FLT#732</a> ? I have made a definition where I've put in some unused arguments to make the definition mathematically accurate. The unused arguments linter complained so I shut it up with <code>set_option linter.unusedVariables false in</code> but the file still isn't linting, which means CI is failing. And yet I see <code>set_option linter.unusedVariables false in</code> in mathlib too</p>",
        "id": 543095799,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1759591591
    },
    {
        "content": "<p>I've run into this issue before, it's actually two different linters (arguments vs. variable), and I think the fix is to change the names to <code>_</code></p>",
        "id": 543096746,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1759592315
    },
    {
        "content": "<p>I'm not sure: using <code>#lint</code> at the bottom also complains and using <code>_</code> does not seem to silence the linter either.</p>",
        "id": 543097593,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1759593033
    },
    {
        "content": "<p>This looks like a lakefile error: You must have turned on the wrong option for the linter. Unfortunately I don't know much more than that since I haven't quite followed the changes to state of the art linting practices, nor do I have time to investigate further</p>",
        "id": 543098515,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1759593844
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"387244\">Yaël Dillies</span> <a href=\"#narrow/channel/416277-FLT/topic/unused.20argument.20linter.20issue/near/543098515\">said</a>:</p>\n<blockquote>\n<p>You must have turned on the wrong option for the linter.</p>\n</blockquote>\n<p>I don't know what exactly this means, but I think I've seen it in Mathlib before.</p>",
        "id": 543099095,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1759594313
    },
    {
        "content": "<p>I've made <a href=\"https://github.com/leanprover-community/mathlib4/pull/30196\">#30196</a> to test it, let's see what the result is.</p>",
        "id": 543099441,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1759594589
    },
    {
        "content": "<p>My test confirms that mathlib also has the same issue: <a href=\"https://github.com/leanprover-community/mathlib4/actions/runs/18246721632/job/51955653447?pr=30196\">https://github.com/leanprover-community/mathlib4/actions/runs/18246721632/job/51955653447?pr=30196</a></p>",
        "id": 543101969,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1759596884
    },
    {
        "content": "<p><a href=\"/user_uploads/3121/buzpKTuhBt1ikzRkohrizzyZ/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/buzpKTuhBt1ikzRkohrizzyZ/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"1097x440\" src=\"/user_uploads/thumbnail/3121/buzpKTuhBt1ikzRkohrizzyZ/image.png/840x560.webp\"></a></div>",
        "id": 543101976,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1759596894
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"321459\">Damiano Testa</span> <a href=\"#narrow/channel/416277-FLT/topic/unused.20argument.20linter.20issue/near/543097593\">said</a>:</p>\n<blockquote>\n<p>I'm not sure: using <code>#lint</code> at the bottom also complains and using <code>_</code> does not seem to silence the linter either.</p>\n</blockquote>\n<p>The unusedArgument linter is an environment linter: the way to silence those is to put <code>@[nolint unusedArgument]</code> in front of the declaration.</p>",
        "id": 543105104,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1759599764
    },
    {
        "content": "<p>About the difference of the linters: my understanding is that</p>\n<ul>\n<li>the unusedVariable linter checks for named arguments (typeclasses, explicit or implicit hypotheses) whose names are never used. You can indeed suppress that by prepending an underscore to its name. This is a syntax linter, so can be suppressed by the usual set_option linter.unusedVariable false</li>\n<li>the unusedArgument linter checks for hypotheses (to definition and lemmas) which are never used.</li>\n</ul>",
        "id": 543105371,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1759600064
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">foo</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">_</span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n</code></pre></div>",
        "id": 543105395,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1759600092
    },
    {
        "content": "<p>triggers the unusedArgument linter (as <code>_k</code>) is never used, but not the unused variable linter (as the variable name starts with an underscore)</p>",
        "id": 543105414,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1759600119
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">foo</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n</code></pre></div>\n<p>triggers both linters</p>",
        "id": 543105440,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1759600135
    },
    {
        "content": "<p>I think the subtle difference between a \"syntax linter\" and an \"environmental linter\" might be too difficult for the average lean-user who doesn't know any meta-programming: is there a way to unify both types with <code>set_option</code>?</p>",
        "id": 543105527,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1759600224
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"634338\">Michael Rothgang</span> <a href=\"#narrow/channel/416277-FLT/topic/unused.20argument.20linter.20issue/near/543105104\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"321459\">Damiano Testa</span> <a href=\"#narrow/channel/416277-FLT/topic/unused.20argument.20linter.20issue/near/543097593\">said</a>:</p>\n<blockquote>\n<p>I'm not sure: using <code>#lint</code> at the bottom also complains and using <code>_</code> does not seem to silence the linter either.</p>\n</blockquote>\n<p>The unusedArgument linter is an environment linter: the way to silence those is to put <code>@[nolint unusedArgument]</code> in front of the declaration.</p>\n</blockquote>\n<p><code>@[nolint unusedArguments]</code> seems to have fixed it -- thanks!</p>",
        "id": 543106525,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1759601018
    },
    {
        "content": "<p>There's a way to tell which kind of linter you have:</p>\n<ul>\n<li>if you see yellow squiggles in your source, it's a syntax linter (and the warning tells you how to disable it)</li>\n<li>if you need to type #lint, you use the <code>nolint</code> incantation</li>\n</ul>",
        "id": 543106776,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1759601229
    },
    {
        "content": "<p>Basically, there are two kinds of linters, and you both encounter their warnings differently and suppress them differently.</p>",
        "id": 543106799,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1759601253
    },
    {
        "content": "<p>Note that this does not require any understanding of what a syntax or environment linter <em>is</em> or how it works. (I'm just using these terms so I don't have to invent new ones every time.)</p>",
        "id": 543106859,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1759601312
    },
    {
        "content": "<p>What I don't know is how to look up this information easily (which is why I had to ask) (because I will probably forget all this in a few months)</p>",
        "id": 543106977,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1759601421
    },
    {
        "content": "<p>At the very least, all our linters should probably remind us how to disable them.</p>",
        "id": 543107096,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1759601566
    },
    {
        "content": "<p>Right -- when I had the unused variables problem I could disable it because the warning told me how to. But <code>#lint</code> didn't give me the hint; I guess the experts figure that \"the answer is always <code>@[nolint &lt;name-of-linter&gt;]</code> but I don't know the first thing about linters and I don't really care enough about this stuff to learn properly (or maybe I mean \"I learn stuff and then forget quickly because I'm 57 and if I don't use stuff constantly then I forget\") so I struggle.</p>",
        "id": 543107204,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1759601685
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"123965\">Bryan Gin-ge Chen</span> <a href=\"#narrow/channel/416277-FLT/topic/unused.20argument.20linter.20issue/near/543107096\">said</a>:</p>\n<blockquote>\n<p>At the very least, all our linters should probably remind us how to disable them.</p>\n</blockquote>\n<p>I agree with this one: the environment linters should also say how they can be disabled. Any volunteers for such a PR to batteries?</p>",
        "id": 543107290,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1759601787
    },
    {
        "content": "<p>it's not you, none of us in this thread knew</p>",
        "id": 543107291,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1759601789
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"634338\">Michael Rothgang</span> <a href=\"#narrow/channel/416277-FLT/topic/unused.20argument.20linter.20issue/near/543107290\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"123965\">Bryan Gin-ge Chen</span> <a href=\"#narrow/channel/416277-FLT/topic/unused.20argument.20linter.20issue/near/543107096\">said</a>:</p>\n<blockquote>\n<p>At the very least, all our linters should probably remind us how to disable them.</p>\n</blockquote>\n<p>I agree with this one: the environment linters should also say how they can be disabled. Any volunteers for such a PR to batteries?</p>\n</blockquote>\n<p>If someone can give me pointers, I can do try and do this in a few days.</p>",
        "id": 543117414,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1759612680
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"123965\">Bryan Gin-ge Chen</span> <a href=\"#narrow/channel/416277-FLT/topic/unused.20argument.20linter.20issue/near/543117414\">said</a>:</p>\n<blockquote>\n<p>If someone can give me pointers</p>\n</blockquote>\n<p><a href=\"https://github.com/leanprover-community/batteries/blob/6f7d05f4955eb5af9799d828b697251bb2c9c0b8/Batteries/Tactic/Lint/Frontend.lean#L194\">https://github.com/leanprover-community/batteries/blob/6f7d05f4955eb5af9799d828b697251bb2c9c0b8/Batteries/Tactic/Lint/Frontend.lean#L194</a></p>",
        "id": 543117491,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1759612761
    },
    {
        "content": "<p>(I've been sitting on this for too long so I decided to just open an issue referencing this thread: <a href=\"https://github.com/leanprover-community/batteries/pull/1468\">batteries#1468</a>.)</p>",
        "id": 545832002,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1760882668
    }
]