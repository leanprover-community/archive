[
    {
        "content": "<p>Time to roll over the outstanding tasks thread from the <a href=\"#narrow/stream/412902-Polynomial-Freiman-Ruzsa-conjecture/topic/New.20PFR.20bounds.2C.20outstanding.20tasks.20V1\">previous thread</a>.  One major new development is that the blueprint for the improved PFR constant C=9 in the 2-torsion case is <a href=\"https://teorth.github.io/pfr/blueprint/sect0013.html\">now complete</a>, so we can start formalizing that in parallel with the m-torsion tasks. Thanks to Jyun-Jie Liao for completing this blueprint!</p>\n<p>Ongoing tasks:</p>\n<ul>\n<li><a href=\"https://teorth.github.io/pfr/blueprint/sect0012.html#klm-2\">Kaimonovich–Vershik–Madiman inequality, II</a> A corollary to <a href=\"https://teorth.github.io/pfr/blueprint/sect0012.html#klm-1\">Kaimonovich–Vershik–Madiman inequality</a> and other existing Ruzsa inequalities; again, the <code>iIndepFun</code> API may be the trickiest component. <strong>Completed by Lorenzo Luccioli and Pietro Monticone</strong></li>\n<li><a href=\"https://teorth.github.io/pfr/blueprint/sect0012.html#compare-sums\">Comparing sums</a> Should be a straightforward consequence of <a href=\"https://teorth.github.io/pfr/blueprint/sect0012.html#klm-2\">Kaimonovich–Vershik–Madiman inequality, II</a>, existing entropy facts, and the finite sum API. <strong>Claimed by Paul Lezeau</strong></li>\n</ul>\n<p>Outstanding tasks for the m-torsion project:<br>\nA.1. <a href=\"https://teorth.github.io/pfr/blueprint/sect0012.html#klm-3\">Kaimonovich–Vershik–Madiman inequality, III</a> Follows from existing Ruzsa inequalities.  I anticipate <code>iIndepFun</code> API to be the most significant issue. <strong>Completed by Lorenzo Luccioli and Pietro Monticone</strong><br>\nA.2. Defining <a href=\"https://teorth.github.io/pfr/blueprint/sect0012.html#multidist-def\">Multidistance</a> Should be straightforward after invoking <a href=\"https://teorth.github.io/pfr/docs/find/?%20pattern=ProbabilityTheory.independent_copies%27#doc\">pfr#ProbabilityTheory.independent_copies'</a>.  Perhaps the definition of Ruzsa distance <a href=\"https://teorth.github.io/pfr/docs/find/?pattern=rdist#doc\">pfr#rdist</a> can be a model? <strong>Completed by Terence Tao</strong><br>\nA.3. <a href=\"https://teorth.github.io/pfr/blueprint/sect0012.html#multidist-copy\">Multidistance of copy</a> Should be routine once item A.2 is formalized. <strong>Completed by Lorenzo Luccioli and Pietro Monticone</strong><br>\nA.4. <a href=\"https://teorth.github.io/pfr/blueprint/sect0012.html#multidist-indep\">Multidistance of independent variables</a> Should be routine once item A.2 is formalized. <strong>Claimed by Lorenzo Luccioli and Pietro Monticone</strong><br>\nA.5. <a href=\"https://teorth.github.io/pfr/blueprint/sect0012.html#multidist-nonneg\">Nonnegativity</a> Should follow quickly from <a href=\"https://teorth.github.io/pfr/docs/find/?pattern=max_entropy_le_entropy_add#doc\">pfr#max_entropy_le_entropy_add</a>, once item A.2 is done.<br>\nA.6. <a href=\"https://teorth.github.io/pfr/blueprint/sect0012.html#multidist-perm\">Relabeling</a> Should follow easily from <code>Finset.sum</code> API once item A.2 is done. <strong>Completed by Terence Tao</strong><br>\nA.7. <a href=\"https://github.com/LorenzoLuccioli/PFR/blob/4a7d354b1bd9153a3f9d21e42508cc5d600da2a5/PFR/Mathlib/Probability/Independence/Kernel.lean#L42-L49\">iIndepFun.finsets</a> New API for independence that is needed for <a href=\"https://teorth.github.io/pfr/blueprint/sect0012.html#klm-1\">Kaimonovich–Vershik–Madiman inequality</a> and will likely also be useful elsewhere in the project. <strong>Completed by Terence Tao</strong><br>\nA.8  (Deleted due to being redundant)<br>\nA.9. <a href=\"https://teorth.github.io/pfr/blueprint/sect0012.html#multidist-ruzsa-I\">Multidistance and Ruzsa distance I</a>  A relatively straightforward application of existing Ruzsa distance inequalities together with the definition of multidistance (A.2).<br>\nA.10. <a href=\"https://teorth.github.io/pfr/blueprint/sect0012.html#multidist-ruzsa-II\">Multidistance and Ruzsa distance II</a>  A corollary of A.9 and existing Ruzsa distance inequalities.<br>\nA.11. <a href=\"https://teorth.github.io/pfr/blueprint/sect0012.html#multidist-ruzsa-III\">Multidistance and Ruzsa distance III</a>  A more complicated application of Ruzsa distance inequalities.<br>\nA.12. <a href=\"https://teorth.github.io/pfr/blueprint/sect0012.html#multidist-ruzsa-IV\">Multidistance and Ruzsa distance IV</a>  Another more complicated application of Ruzsa distance inequalities.</p>\n<p>Outstanding tasks for the 2-torsion project (mostly initially focusing on some basic API for Kullback-Leibler divergence):<br>\nB.1. <a href=\"https://teorth.github.io/pfr/blueprint/sect0001.html#log-sum\">Log sum inequality</a>  This should be a straightforward application of Jensen's inequality, though one may need to take care with edge cases involving division by zero. (May be redundant due to external projects involving KL divergence.)<br>\nB.2. <a href=\"https://teorth.github.io/pfr/blueprint/sect0001.html#log-sum\">Converse log sum inequality</a>  This should be a straightforward application of the converse to Jensen's inequality (already in Mathlib), though again the edge cases require care. (May be redundant due to external projects involving KL divergence.)<br>\nB.3. <a href=\"https://teorth.github.io/pfr/blueprint/sect0013.html#kl-div-copy\">Kullback-Leibler divergence of copy</a> Should be straightforward from definitions.<br>\nB.4. <a href=\"https://teorth.github.io/pfr/blueprint/sect0013.html#Gibbs\">Gibbs inequality</a> Should follow from B.1.<br>\nB.5. <a href=\"https://teorth.github.io/pfr/blueprint/sect0013.html#Gibbs-converse\">Converse Gibbs inequality</a> Should follow from B.2.<br>\nB.6 <a href=\"https://teorth.github.io/pfr/blueprint/sect0013.html#kl-div-convex\">Convexity of Kullback-Liebler</a>  A routine application of Jensen's inequality.<br>\nB.7. <a href=\"https://teorth.github.io/pfr/blueprint/sect0013.html#kl-div-inj\">Kullback-Liebler and injections</a> Should be routine from <code>Finset.sum</code> API.</p>\n<p>We have chosen to achieve tasks B.3-B.7 (sidestepping the need for B.1, B.2) by first importing the relevant components of the \"Testing Lower Bounds\" project. <strong>Claimed by Lorenzo Luccioli and Pietro Monticone</strong></p>\n<p>Will keep adding to this list as progress continues.  But one thing to highlight is that A.2 (definition of multidistance) will soon be a bottleneck to make further progress on the m-torsion project.  Some thought may be needed to come up with a definition that makes the basic API (in particular A.3 and A.4) easy to establish.</p>",
        "id": 443526001,
        "sender_full_name": "Terence Tao",
        "timestamp": 1717882985
    },
    {
        "content": "<p>About the KL divergence, it is already formalized in <a href=\"https://github.com/RemyDegenne/testing-lower-bounds\">this repo</a> (<a href=\"https://github.com/RemyDegenne/testing-lower-bounds/blob/master/TestingLowerBounds/KullbackLeibler.lean\">this</a> is the file specifically about KL) where  <span class=\"user-mention\" data-user-id=\"350992\">@Rémy Degenne</span> and I are currently working. <br>\nIt's written in a more general form than the one in the blueprint (in particular it's defined as the divergence between two measures), so it may need some work to be adapted to the finite case for random variables. But we already have some properties proven, like the Gibbs inequality.</p>",
        "id": 444089877,
        "sender_full_name": "Lorenzo Luccioli",
        "timestamp": 1718136666
    },
    {
        "content": "<p>Hmm, this could potentially save some work, but I'm not sure how best to proceed since it seems your repo is also a work in progress.  One possibility is to import selected definitions and results already obtained in your repo as black boxes with some sorries and derive the discrete cases we need from those boxes, and then try to remove the sorries at a much later date.  Or we could adapt some of your code to the finite case.  The arguments in the blueprint are pretty specific to the finite case I think, and would not benefit extensively from generalizing to arbitrary measures (for instance, I would imagine the converse Gibbs inequality would be significantly more subtle at that level of generality), so it is tempting for me to not try to aim for mathlib levels of generality here and just do something good enough for the current application.  But I'd be interested to hear more thoughts.</p>",
        "id": 444107364,
        "sender_full_name": "Terence Tao",
        "timestamp": 1718142968
    },
    {
        "content": "<p>I think that many of the results that would be needed are sorry-free, so even if the project is still in development, it should be safe to import them. The inverse Gibbs inequality is still not proven, but we plan on doing it in the near future. <br>\nAs for the option to adapt our code to the finite case, this may require more work than the direct proof for the finite case, since many results about KL in our project rely on other lemmas about the more general f-divergences.</p>",
        "id": 444172733,
        "sender_full_name": "Lorenzo Luccioli",
        "timestamp": 1718179529
    },
    {
        "content": "<p>Lorenzo, what's the horizon for integration in mathlib of your project? PFR already depends on APAP, so adding a second dependency is a recipe for mismatched Mathlib versions and other disasters (at least until the community on a single, uniform, versioning system)</p>",
        "id": 444173105,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1718179663
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"638899\">Lorenzo Luccioli</span> <a href=\"#narrow/stream/412902-Polynomial-Freiman-Ruzsa-conjecture/topic/Outstanding.20tasks.2C.20version.202.2E0/near/444172733\">said</a>:</p>\n<blockquote>\n<p>I think that many of the results that would be needed are sorry-free, so even if the project is still in development, it should be safe to import them.</p>\n</blockquote>\n<p>I agree. The situation seems completely analogous to APAP which we already successfully depend upon.</p>",
        "id": 444173325,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1718179732
    },
    {
        "content": "<p>The horizon for integration in mathlib is not quite short term. We have PRed to mathlib several supporting lemmas about definitions that are already in mathlib and we will continue to do so as those come up, but for now we have not started PRing any new definition.</p>\n<p>There were design decisions that were not clear at the beginning for some of the new definitions, so I wanted to wait and see how the definitions interacted before making any PR.<br>\nMy intention is to merge most of the project to mathlib eventually, and we will make an effort towards that closer to the end of Lorenzo's internship (in September).</p>",
        "id": 444176741,
        "sender_full_name": "Rémy Degenne",
        "timestamp": 1718180720
    },
    {
        "content": "<p>I see three reasonable solutions then:</p>\n<ol>\n<li>Sorry the results whose proofs will come from your repo</li>\n<li>Keep the two repos in sync regarding the Mathlib version (seems like a pain since the repos are managed by a disjoint set of people)</li>\n<li>Get APAP in Mathlib (at least the part relevant to proving BSG)</li>\n</ol>",
        "id": 444177346,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1718180907
    },
    {
        "content": "<p>What would be helpful here in terms of version conventions, or support from <code>lake</code>?</p>",
        "id": 444348867,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1718234077
    },
    {
        "content": "<p>Currently the only versions that Mathlib issues are tags for the first time Mathlib moves to each new Lean toolchain (e.g. <code>v4.8.0</code> or <code>v4.9.0-rc1</code>)</p>",
        "id": 444348985,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1718234110
    },
    {
        "content": "<p>There is no reason we couldn't also make regular tags, e.g. <code>master-2024-06-12</code> each night, that might make it easier to communicate amongst project owners about which commit they would like to be on!</p>",
        "id": 444349105,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1718234146
    },
    {
        "content": "<p>Actually I checked the proof again and I think the converse Gibbs is not needed in the end, so should be fine to remove it if that turns out to be the tricky part. Also in your project it seems that chain rule has been proved while convexity for f-divergence has not, so if we want to import what you already have, then Lemma 13.7 can be proved with chain rule + Gibbs instead, and then 13.5 (convexity) can also be removed. Then the only remaining place that would need Lemma 1.4 (log sum inequality) is Lemma 13.14, and Lemma 1.2 actually suffices in the proof of Lemma 13.14. So Lemma 1.4/1.5 can also be removed.  This could potentially save some work. <span aria-label=\"stuck out tongue\" class=\"emoji emoji-1f61b\" role=\"img\" title=\"stuck out tongue\">:stuck_out_tongue:</span></p>\n<p><span class=\"user-mention silent\" data-user-id=\"638899\">Lorenzo Luccioli</span> <a href=\"#narrow/stream/412902-Polynomial-Freiman-Ruzsa-conjecture/topic/Outstanding.20tasks.2C.20version.202.2E0/near/444172733\">said</a>:</p>\n<blockquote>\n<p>I think that many of the results that would be needed are sorry-free, so even if the project is still in development, it should be safe to import them. The inverse Gibbs inequality is still not proven, but we plan on doing it in the near future. <br>\nAs for the option to adapt our code to the finite case, this may require more work than the direct proof for the finite case, since many results about KL in our project rely on other lemmas about the more general f-divergences.</p>\n</blockquote>",
        "id": 444386234,
        "sender_full_name": "Jyun-Jie Liao",
        "timestamp": 1718256696
    },
    {
        "content": "<p>13.7 is also a special case of the data-processing inequality for KL, which we have.</p>",
        "id": 444387171,
        "sender_full_name": "Rémy Degenne",
        "timestamp": 1718257313
    },
    {
        "content": "<p>(but convexity of KL, which is the main argument in the blueprint proof of 13.7, is also a consequence of the data processing inequality, so no surprise here)</p>",
        "id": 444387449,
        "sender_full_name": "Rémy Degenne",
        "timestamp": 1718257480
    },
    {
        "content": "<p>1.4 seems to correspond to this lemma: <a href=\"https://remydegenne.github.io/testing-lower-bounds/blueprint/sect0003.html#lem:kl_ge\">https://remydegenne.github.io/testing-lower-bounds/blueprint/sect0003.html#lem:kl_ge</a></p>",
        "id": 444388109,
        "sender_full_name": "Rémy Degenne",
        "timestamp": 1718257867
    },
    {
        "content": "<p>To come back to the issue of depending on several projects: I have no experience with that so I don't know how much trouble the version mismatchs could be. I am updating mathlib in our project quite regularly so if <span class=\"user-mention\" data-user-id=\"387244\">@Yaël Dillies</span> pings me whenever PFR needs to be updated i could update the project rather quickly.</p>\n<p>There might be a better way to do this. As Kim writes, we could try coordinating on the mathlib versions that we use. It is not clear to me how to do that though: do I specify a version of mathlib by hand in my lakefile, and change the version by hand before calling <code>lake update</code>, like I have to change the lean-toolchain? Is there a way to tell <code>lake</code> that I only want to update if the mathlib version changed?</p>\n<p>Anyway, I don't want to push the use of our project too much: the lemma we are talking about should not be too much trouble to prove again in the discrete case needed by PFR. It might just be simpler to do that.</p>",
        "id": 444389228,
        "sender_full_name": "Rémy Degenne",
        "timestamp": 1718258488
    },
    {
        "content": "<p>This is a great discussion! I just wanted to say that because this is a relatively low-risk project (the primary aims of PFR formalization have already been completed), this would be a good test case to implement any sort of experimental workflow (e.g., working with multiple pre-mathlib imports) in order to learn any lessons that could be useful for future projects (e.g., one could imagine the FLT project facing a comparable issue at some point).  So while we could go for a minimalistic route here of reducing the exposure of PFR to the theory of KL divergence as much as possible to avoid this particular issue, we could also use the opportunity to do a test in a situation where \"failure\" is not too painful (we always have the option of commenting out any integration attempts at a later date, and instead proving the small number of KL divergence lemmas that we need \"by hand\" in the finite case).  But taking the path of least resistance and just proving the lemmas by hand from the start is also OK with me.</p>\n<p>But perhaps at a bare minimum we can try to synchronize the notation and spelling with the project.  I am certainly not attached to the current spelling <code>KL[X ; μ # Y ; μ']</code> for KL divergence that I hastily implemented as a cut and paste from similar notation from previous parts of PFR - am open to suggestions to make notation that is more compatible both with the lower bounds project and with general mathlib conventions.</p>",
        "id": 444392880,
        "sender_full_name": "Terence Tao",
        "timestamp": 1718260344
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"657719\">Terence Tao</span> <a href=\"#narrow/stream/412902-Polynomial-Freiman-Ruzsa-conjecture/topic/Outstanding.20tasks.2C.20version.202.2E0/near/444392880\">said</a>:</p>\n<blockquote>\n<p>because this is a relatively low-risk project (the primary aims of PFR formalization have already been completed), this would be a good test case to implement any sort of experimental workflow</p>\n</blockquote>\n<p>I agree! Let's figure this out.</p>",
        "id": 444404976,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1718265123
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"350992\">Rémy Degenne</span> <a href=\"#narrow/stream/412902-Polynomial-Freiman-Ruzsa-conjecture/topic/Outstanding.20tasks.2C.20version.202.2E0/near/444389228\">said</a>:</p>\n<blockquote>\n<p>I am updating mathlib in our project quite regularly so if @Yaël Dillies pings me whenever PFR needs to be updated i could update the project rather quickly.</p>\n</blockquote>\n<p>New mathlib versions are so frequent that even if I ping you right as I update there's a very high chance that you wil need to specify the mathlib version by hand...</p>\n<p><span class=\"user-mention silent\" data-user-id=\"110087\">Kim Morrison</span> <a href=\"#narrow/stream/412902-Polynomial-Freiman-Ruzsa-conjecture/topic/Outstanding.20tasks.2C.20version.202.2E0/near/444348867\">said</a>:</p>\n<blockquote>\n<p>What would be helpful here in terms of version conventions, or support from <code>lake</code>?</p>\n<p>Currently the only versions that Mathlib issues are tags for the first time Mathlib moves to each new Lean toolchain (e.g. <code>v4.8.0</code> or <code>v4.9.0-rc1</code>)</p>\n<p>There is no reason we couldn't also make regular tags, e.g. <code>master-2024-06-12</code> each night, that might make it easier to communicate amongst project owners about which commit they would like to be on!</p>\n</blockquote>\n<p>... hence I agree that it would help a huge lot to have daily named commits for mathlib, and on top of that a simple way to tell <code>lake update</code> that we want to use such commits.</p>",
        "id": 444405000,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1718265137
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110087\">@Kim Morrison</span>, is something like this reasonable expectations?</p>\n<ul>\n<li>Have a bot automatically create version branches. Here \"version\" could mean either Lean toolchains or named mathlib commits. Not sure which one is best.</li>\n<li>Have a <code>--dep</code> flag to <code>lake update</code> to specify which dependency we want to update. When <code>lake update --dep preferred_dep</code> is run, the lake-manifest inherits the versions of all dependencies of <code>preferred_dep</code>, and all dependencies of the project that are not dependencies of <code>preferred_dep</code> are updated to the latest version of mathlib that's earlier than <code>preferred_dep</code>'s.</li>\n</ul>",
        "id": 444406840,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1718265799
    },
    {
        "content": "<p>Hmm, looks a bit complicated <span aria-label=\"thinking\" class=\"emoji emoji-1f914\" role=\"img\" title=\"thinking\">:thinking:</span></p>",
        "id": 444406867,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1718265807
    },
    {
        "content": "<p>You know that you can already write <code>lake update dep</code> to update just one of your dependencies?</p>",
        "id": 444414551,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1718268475
    },
    {
        "content": "<p>I'll arrange for <code>master-YYYY-MM-DD</code> tags on Mathlib.</p>",
        "id": 444414678,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1718268520
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110087\">Kim Morrison</span> <a href=\"#narrow/stream/412902-Polynomial-Freiman-Ruzsa-conjecture/topic/Outstanding.20tasks.2C.20version.202.2E0/near/444414551\">said</a>:</p>\n<blockquote>\n<p>You know that you can already write <code>lake update dep</code> to update just one of your dependencies?</p>\n</blockquote>\n<p>That's not exactly what I want, right? I want to update that one dependency and also the dependencies of that dependency</p>",
        "id": 444415139,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1718268681
    },
    {
        "content": "<p>I think if you don't specify transitive dependencies in your lakefile, then this is the behaviour you get already, no?</p>",
        "id": 444415884,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1718268955
    },
    {
        "content": "<p>Update: now we have the converse Gibbs' inequality for the general kl divergence. See <a href=\"https://github.com/RemyDegenne/testing-lower-bounds/pull/71\">this PR</a>.</p>",
        "id": 444464523,
        "sender_full_name": "Lorenzo Luccioli",
        "timestamp": 1718284985
    },
    {
        "content": "<p>That's great!  In view of the discussion I then propose trying to import enough of the lower bounds project to establish B.3-B.5 (B.1 and B.2 were only introduced to establish B.4 and B.5 respectively, so if you already have Gibbs and converse Gibbs in your repo, we don't need to establish this separately).  This is overkill for the PFR project, but it would be good to get some practice in how one project can \"cite\" another, as this is obviously something that will keep happening in the future (as it would be unrealistic to demand that every possible citeable mathematical fact be placed in mathlib).</p>",
        "id": 444743216,
        "sender_full_name": "Terence Tao",
        "timestamp": 1718383225
    },
    {
        "content": "<p>We have just completed <strong>task 6</strong> and opened the related <a href=\"https://github.com/teorth/pfr/pull/214\">PR</a>.</p>\n<p><strong>NB:</strong> We added an auxiliary lemma (see PR description).</p>",
        "id": 444999699,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1718559887
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"638899\">@Lorenzo Luccioli</span> and I would like to claim <strong>task A.1</strong>.</p>",
        "id": 445010138,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1718565695
    },
    {
        "content": "<p>I've made the following first stab at A.2 (defining multidistance), which at least passes the Lean compiler, but I am not sure if this version is at all aligned with good Lean practices.  Firstly it might be possible to have the entropy functional <code>H[]</code> automatically detect the volume measure from the <code>MeasureSpace</code> structure.  I'm also not committed to using <code>Fin m</code> as the indexing set; that's how we use it in the blueprint, but it might be marginally better to work either with an arbitrary <code>Fintype</code> or with a <code>Finset</code> of an arbitrary type.  One could also use the measure-based version <code>Hm[]</code> of entropy instead of the random variable-based version (this is how Ruzsa distance is defined).  I guess the precise definition might not be super important as long as core API such as A.3-A.6 are easy to prove.  Anyway, any thoughts would be appreciated.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"sd\">/--  Let `X_[m] = (X₁, ..., Xₘ)` be a non-empty finite tuple of `G`-valued random variables `X_i`.</span>\n<span class=\"sd\">Then we define `D[X_[m]] = H[∑ i, X_i'] - 1/m*∑ i, H[X_i']`, where the `X_i'` are independent copies</span>\n<span class=\"sd\">of the `X_i`.-/</span>\n<span class=\"kn\">noncomputable</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">multiDist</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">Ω</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hΩ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">MeasureSpace</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Ω</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">))</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Ω</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">H</span><span class=\"o\">[</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">ω</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"bp\">∑</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ω</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">)</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">pi</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hΩ</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">volume</span><span class=\"o\">)]</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">m</span><span class=\"o\">:</span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"bp\">⁻¹</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"bp\">∑</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">H</span><span class=\"o\">[</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hΩ</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">volume</span><span class=\"o\">]</span>\n</code></pre></div>",
        "id": 445020597,
        "sender_full_name": "Terence Tao",
        "timestamp": 1718572168
    },
    {
        "content": "<p>We have just completed <strong>task A.1</strong> and opened the related <a href=\"https://github.com/teorth/pfr/pull/217\">PR</a>.</p>\n<p><strong>NB:</strong> We added an auxiliary lemma and we slightly changed the original statement (see PR description).</p>",
        "id": 445234581,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1718662254
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"556875\">Pietro Monticone</span> <a href=\"#narrow/stream/412902-Polynomial-Freiman-Ruzsa-conjecture/topic/Outstanding.20tasks.2C.20version.202.2E0/near/445234581\">said</a>:</p>\n<blockquote>\n<p>We have just completed <strong>task A.1</strong> and opened the related <a href=\"https://github.com/teorth/pfr/pull/217\">PR</a>.</p>\n<p><strong>NB:</strong> We added an auxiliary lemma and we slightly changed the original statement (see PR description).</p>\n</blockquote>\n<p>Wow, that was fast!  Sounds like you have figured out how to handle all the <code>iIndepFun</code> issues.  I realized that there was one final application of the Kaimonovich-Vershik-Madiman inequalities that is in a similar spirit that I had neglected to put on the \"outstanding tasks\" list, so I added it just now as A.7.</p>",
        "id": 445248610,
        "sender_full_name": "Terence Tao",
        "timestamp": 1718670381
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"657719\">Terence Tao</span> <a href=\"#narrow/stream/412902-Polynomial-Freiman-Ruzsa-conjecture/topic/Outstanding.20tasks.2C.20version.202.2E0/near/445020597\">said</a>:</p>\n<blockquote>\n<p>I've made the following first stab at A.2 (defining multidistance)</p>\n</blockquote>\n<p>Since there wasn't any objection, I've gone ahead and approved this definition (I did discover that I could at least drop the final <code>(hΩ i).volume</code> as <code>autoparam</code> was able to figure this out already), and formalized the statement of several more lemmas that use multidistance.</p>",
        "id": 446293439,
        "sender_full_name": "Terence Tao",
        "timestamp": 1719074059
    },
    {
        "content": "<p>Is <strong>task A.8</strong> the same one claimed by <span class=\"user-mention\" data-user-id=\"376152\">@Paul Lezeau</span>? </p>\n<p>If  not, <span class=\"user-mention\" data-user-id=\"638899\">@Lorenzo Luccioli</span> and I would like to claim <strong>A.8</strong>.</p>",
        "id": 446339049,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1719096526
    },
    {
        "content": "<p>Oops, that is a duplicate, sorry!  Removing it now.</p>",
        "id": 446339389,
        "sender_full_name": "Terence Tao",
        "timestamp": 1719096758
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"638899\">@Lorenzo Luccioli</span> and I would like to attempt the porting of the KL divergence from the <em>Testing Lower Bounds</em> project in order to solve the <strong>B.X</strong> tasks.</p>\n<p>We have just opened the <a href=\"#narrow/stream/412902-Polynomial-Freiman-Ruzsa-conjecture/topic/KL.20Divergence.3A.20Porting.20TLB.20into.20PFR\">related topic</a>.</p>",
        "id": 446460593,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1719169009
    },
    {
        "content": "<p>We would like to claim task <strong>A.3</strong>.</p>",
        "id": 446472846,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1719175914
    },
    {
        "content": "<p>Great!  Feel free to modify the definition of multidistance if it makes basic API like A.3 and A.4 easier to establish.</p>",
        "id": 446482131,
        "sender_full_name": "Terence Tao",
        "timestamp": 1719181316
    },
    {
        "content": "<p>We have just completed <strong>task A.3</strong> and opened the related <a href=\"https://github.com/teorth/pfr/pull/218\">PR</a>.</p>\n<p>We slightly modified <code>multiDist</code> along the same lines of <code>rdist</code> as follows: </p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">def</span><span class=\"w\"> </span><span class=\"n\">multiDist</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">Ω</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hΩ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">MeasureSpace</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Ω</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">))</span>\n<span class=\"w\">     </span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Ω</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">   </span><span class=\"n\">H</span><span class=\"o\">[</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"bp\">∑</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">pi</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hΩ</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">volume.map</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">))]</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">m</span><span class=\"o\">:</span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"bp\">⁻¹</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"bp\">∑</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">H</span><span class=\"o\">[</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">]</span>\n</code></pre></div>",
        "id": 448708126,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1719956632
    },
    {
        "content": "<p>We would like to claim task <strong>A.4</strong> too. <a href=\"https://github.com/teorth/pfr/pull/219\">Here</a> is the associated draft PR we're working on.</p>",
        "id": 448711081,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1719957959
    },
    {
        "content": "<p>Just a note that this project is not completely dead!  I have recently started filling in a variety of tasks, including A.6 and some later results not currently listed on the \"outstanding task list\", in particular the very final result <a href=\"https://teorth.github.io/pfr/docs/find/?pattern=pfr-torsion#doc\">pfr#pfr-torsion</a> is now <em>locally</em> proven (of course its main dependency, <a href=\"https://teorth.github.io/pfr/docs/find/?pattern=pfr_aux_torsion#doc\">pfr#pfr_aux_torsion</a>, remains incomplete).  I plan to work on A.7 next.</p>",
        "id": 463751056,
        "sender_full_name": "Terence Tao",
        "timestamp": 1724171192
    },
    {
        "content": "<p>I am currently bumping the project to latest mathlib. Not a trivial task because of the new variable mechanism, but I think it's worth it to make sure we can PR some parts to mathlib later on.</p>",
        "id": 463760933,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1724173757
    },
    {
        "content": "<p>I'm still planning on completing the \"Comparing sums\" lemma (I've been distracted by various PhD related tasks and projects lately, but should hopefully have more time in the upcoming weeks!)</p>",
        "id": 463763383,
        "sender_full_name": "Paul Lezeau",
        "timestamp": 1724174451
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110050\">Sébastien Gouëzel</span> <a href=\"#narrow/stream/412902-Polynomial-Freiman-Ruzsa-conjecture/topic/Outstanding.20tasks.2C.20version.202.2E0/near/463760933\">said</a>:</p>\n<blockquote>\n<p>I am currently bumping the project to latest mathlib. Not a trivial task because of the new variable mechanism, but I think it's worth it to make sure we can PR some parts to mathlib later on.</p>\n</blockquote>\n<p>Sébastien, we had someone who wanted to use PFR on 4.9 for some AI training. Would it be possible for you to first bump to 4.9 then to 4.11.0-rc2 ?</p>",
        "id": 463780175,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1724178907
    },
    {
        "content": "<p>Sorry, I went straight for 4.11...</p>",
        "id": 463799291,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1724184158
    },
    {
        "content": "<p>A.7 now done.   (Maybe with a bit more wrestling in the mud with dependent types than strictly necessary, but still managed to reach the finish line.)</p>",
        "id": 463892457,
        "sender_full_name": "Terence Tao",
        "timestamp": 1724196831
    },
    {
        "content": "<p>Just a notification that I have merged <span class=\"user-mention\" data-user-id=\"110050\">@Sébastien Gouëzel</span> 's bump to 4.11.  It took a few minutes to recompile Lean, lake, and PFR, and I had to restart a few times, but it was generally without problems.  Just to quote from Sebastien's PR:</p>\n<blockquote>\n<p>Warning: since it changes the Lean and mathlib version, you will need to redownload the cache once you have merged this one, by doing <code>lake exe cache get</code> (and if this one fails, then erase your <code>.lake</code> folder and do <code>lake exe cache get</code> again).</p>\n</blockquote>",
        "id": 464130990,
        "sender_full_name": "Terence Tao",
        "timestamp": 1724264299
    },
    {
        "content": "<p>I don't know if this is a consequence of the bump, or of the code I am writing, but the lean compiler (on VSCode on a Windows machine) has become unstable for me, at least when working of <code>MoreRuzsaDist.lean</code>; it runs for maybe five minutes and then crashes.  Not sure what the problem is...</p>\n<blockquote>\n<p>[Error - 6:46:13 PM] Request textDocument/completion failed.</p>\n<p>Message: Server process for file:///c%3A/Users/teort/Dropbox/Lean/pfr/PFR/MoreRuzsaDist.lean crashed, likely due to a stack overflow or a bug.</p>\n<p>Code: -32902</p>\n<p>[Error - 6:46:13 PM] Request textDocument/codeAction failed.</p>\n<p>Message: Server process for file:///c%3A/Users/teort/Dropbox/Lean/pfr/PFR/MoreRuzsaDist.lean crashed, likely due to a stack overflow or a bug.</p>\n<p>Code: -32902</p>\n<p>[Error - 6:46:13 PM] Request textDocument/documentSymbol failed.</p>\n<p>Message: Server process for file:///c%3A/Users/teort/Dropbox/Lean/pfr/PFR/MoreRuzsaDist.lean crashed, likely due to a stack overflow or a bug.</p>\n<p>Code: -32902</p>\n<p>[Error - 6:46:13 PM] Request textDocument/codeAction failed.</p>\n<p>Message: Server process for file:///c%3A/Users/teort/Dropbox/Lean/pfr/PFR/MoreRuzsaDist.lean crashed, likely due to a stack overflow or a bug.</p>\n<p>Code: -32902</p>\n<p>[Error - 6:46:13 PM] Request textDocument/codeAction failed.</p>\n<p>Message: Server process for file:///c%3A/Users/teort/Dropbox/Lean/pfr/PFR/MoreRuzsaDist.lean crashed, likely due to a stack overflow or a bug.</p>\n<p>Code: -32902</p>\n<p>[Error - 6:46:13 PM] Request textDocument/codeAction failed.</p>\n<p>Message: Server process for file:///c%3A/Users/teort/Dropbox/Lean/pfr/PFR/MoreRuzsaDist.lean crashed, likely due to a stack overflow or a bug.</p>\n<p>Code: -32902</p>\n<p>[Error - 6:46:13 PM] Request textDocument/documentHighlight failed.</p>\n<p>Message: Server process for file:///c%3A/Users/teort/Dropbox/Lean/pfr/PFR/MoreRuzsaDist.lean crashed, likely due to a stack overflow or a bug.</p>\n<p>Code: -32902</p>\n<p>[Error - 6:46:13 PM] Request textDocument/documentHighlight failed.</p>\n<p>Message: Server process for file:///c%3A/Users/teort/Dropbox/Lean/pfr/PFR/MoreRuzsaDist.lean crashed, likely due to a stack overflow or a bug.</p>\n<p>Code: -32902</p>\n<p>[Error - 6:46:13 PM] Request textDocument/documentHighlight failed.</p>\n<p>Message: Server process for file:///c%3A/Users/teort/Dropbox/Lean/pfr/PFR/MoreRuzsaDist.lean crashed, likely due to a stack overflow or a bug.</p>\n<p>Code: -32902```</p>\n</blockquote>",
        "id": 464212877,
        "sender_full_name": "Terence Tao",
        "timestamp": 1724291361
    },
    {
        "content": "<p>Yes, I get a lot of these too... I thought <a href=\"#narrow/stream/287929-mathlib4/topic/haveLet.20linter.20crashing.20under.20.60byAsSorry.60\">it might be caused by the haveLet linter</a>, but I am not sure anymore</p>",
        "id": 464275387,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1724308899
    },
    {
        "content": "<p>Oh, I just managed to reproduce a crash in this file, and got the following stack trace:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">Lean</span><span class=\"w\"> </span><span class=\"n\">server</span><span class=\"w\"> </span><span class=\"n\">printed</span><span class=\"w\"> </span><span class=\"n\">an</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">libc</span><span class=\"bp\">++</span><span class=\"n\">abi</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">terminating</span><span class=\"w\"> </span><span class=\"n\">due</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">uncaught</span><span class=\"w\"> </span><span class=\"n\">exception</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">type</span><span class=\"w\"> </span><span class=\"n\">lean</span><span class=\"bp\">::</span><span class=\"n\">throwable</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">deep</span><span class=\"w\"> </span><span class=\"n\">recursion</span><span class=\"w\"> </span><span class=\"n\">was</span><span class=\"w\"> </span><span class=\"n\">detected</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">interpreter'</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">potential</span><span class=\"w\"> </span><span class=\"n\">solution</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">increase</span><span class=\"w\"> </span><span class=\"n\">stack</span><span class=\"w\"> </span><span class=\"n\">space</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">your</span><span class=\"w\"> </span><span class=\"n\">system</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">interpreter</span><span class=\"w\"> </span><span class=\"n\">stacktrace</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"mi\">1</span>\n<span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Linter</span><span class=\"bp\">.</span><span class=\"n\">haveLet</span><span class=\"bp\">.</span><span class=\"n\">InfoTree</span><span class=\"bp\">.</span><span class=\"n\">foldInfoM</span><span class=\"bp\">._</span><span class=\"n\">at</span><span class=\"bp\">.</span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Linter</span><span class=\"bp\">.</span><span class=\"n\">haveLet</span><span class=\"bp\">.</span><span class=\"n\">nonPropHaves</span><span class=\"bp\">._</span><span class=\"n\">spec_15</span><span class=\"bp\">._</span><span class=\"n\">lambda_1</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"mi\">2</span>\n<span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Linter</span><span class=\"bp\">.</span><span class=\"n\">haveLet</span><span class=\"bp\">.</span><span class=\"n\">InfoTree</span><span class=\"bp\">.</span><span class=\"n\">foldInfoM</span><span class=\"bp\">._</span><span class=\"n\">at</span><span class=\"bp\">.</span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Linter</span><span class=\"bp\">.</span><span class=\"n\">haveLet</span><span class=\"bp\">.</span><span class=\"n\">nonPropHaves</span><span class=\"bp\">._</span><span class=\"n\">spec_15</span><span class=\"bp\">._</span><span class=\"n\">lambda_1</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"mi\">3</span>\n<span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Linter</span><span class=\"bp\">.</span><span class=\"n\">haveLet</span><span class=\"bp\">.</span><span class=\"n\">InfoTree</span><span class=\"bp\">.</span><span class=\"n\">foldInfoM</span><span class=\"bp\">._</span><span class=\"n\">at</span><span class=\"bp\">.</span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Linter</span><span class=\"bp\">.</span><span class=\"n\">haveLet</span><span class=\"bp\">.</span><span class=\"n\">nonPropHaves</span><span class=\"bp\">._</span><span class=\"n\">spec_15</span><span class=\"bp\">._</span><span class=\"n\">lambda_1</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"mi\">4</span>\n<span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Linter</span><span class=\"bp\">.</span><span class=\"n\">haveLet</span><span class=\"bp\">.</span><span class=\"n\">InfoTree</span><span class=\"bp\">.</span><span class=\"n\">foldInfoM</span><span class=\"bp\">._</span><span class=\"n\">at</span><span class=\"bp\">.</span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Linter</span><span class=\"bp\">.</span><span class=\"n\">haveLet</span><span class=\"bp\">.</span><span class=\"n\">nonPropHaves</span><span class=\"bp\">._</span><span class=\"n\">spec_15</span><span class=\"bp\">._</span><span class=\"n\">lambda_1</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"mi\">5</span>\n<span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Linter</span><span class=\"bp\">.</span><span class=\"n\">haveLet</span><span class=\"bp\">.</span><span class=\"n\">InfoTree</span><span class=\"bp\">.</span><span class=\"n\">foldInfoM</span><span class=\"bp\">._</span><span class=\"n\">at</span><span class=\"bp\">.</span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Linter</span><span class=\"bp\">.</span><span class=\"n\">haveLet</span><span class=\"bp\">.</span><span class=\"n\">nonPropHaves</span><span class=\"bp\">._</span><span class=\"n\">spec_15</span><span class=\"bp\">._</span><span class=\"n\">lambda_1</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"mi\">6</span>\n<span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Linter</span><span class=\"bp\">.</span><span class=\"n\">haveLet</span><span class=\"bp\">.</span><span class=\"n\">InfoTree</span><span class=\"bp\">.</span><span class=\"n\">foldInfoM</span><span class=\"bp\">._</span><span class=\"n\">at</span><span class=\"bp\">.</span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Linter</span><span class=\"bp\">.</span><span class=\"n\">haveLet</span><span class=\"bp\">.</span><span class=\"n\">nonPropHaves</span><span class=\"bp\">._</span><span class=\"n\">spec_15</span><span class=\"bp\">._</span><span class=\"n\">lambda_1</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"mi\">7</span>\n<span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Linter</span><span class=\"bp\">.</span><span class=\"n\">haveLet</span><span class=\"bp\">.</span><span class=\"n\">InfoTree</span><span class=\"bp\">.</span><span class=\"n\">foldInfoM</span><span class=\"bp\">._</span><span class=\"n\">at</span><span class=\"bp\">.</span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Linter</span><span class=\"bp\">.</span><span class=\"n\">haveLet</span><span class=\"bp\">.</span><span class=\"n\">nonPropHaves</span><span class=\"bp\">._</span><span class=\"n\">spec_15</span><span class=\"bp\">._</span><span class=\"n\">lambda_1</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"mi\">8</span>\n<span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Linter</span><span class=\"bp\">.</span><span class=\"n\">haveLet</span><span class=\"bp\">.</span><span class=\"n\">InfoTree</span><span class=\"bp\">.</span><span class=\"n\">foldIn</span><span class=\"bp\">...</span>\n</code></pre></div>",
        "id": 464281461,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1724310499
    },
    {
        "content": "<p>So it is the haveLet linter.</p>",
        "id": 464281498,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1724310515
    },
    {
        "content": "<p>Hopefully for now <code>set_option linter.haveLet 0 </code> will suffice</p>",
        "id": 464281590,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1724310564
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"321459\">@Damiano Testa</span> is thinking about reimplementing that linter, so hopefully the bug is short-lived.</p>",
        "id": 464281635,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1724310590
    },
    {
        "content": "<p>It might be a good idea to just disable it in the PFR lakefile for now.</p>",
        "id": 464281701,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1724310609
    },
    {
        "content": "<p>Or, given how many problems this is causing, just disable it entirely in Mathlib until there is a reimplementation...</p>",
        "id": 464281761,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1724310633
    },
    {
        "content": "<p>Yes, it has already caused me to comment out huge chunks of proofs</p>",
        "id": 464282453,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1724310905
    },
    {
        "content": "<p>I am indeed trying to fix these issues, but I have a busy week ahead of me: I'll just make a PR to disable the linter on mathlib for the moment.</p>",
        "id": 464282700,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1724311027
    },
    {
        "content": "<p>Thank you. :-)</p>",
        "id": 464282902,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1724311128
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/16058\">#16058</a></p>",
        "id": 464283547,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1724311433
    },
    {
        "content": "<p>Mathlib bump with the above fix included at <a href=\"https://github.com/teorth/pfr/pull/223\">https://github.com/teorth/pfr/pull/223</a></p>",
        "id": 464356223,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1724329082
    },
    {
        "content": "<p>This seems to have fixed the problem.  Also, subjectively, compilation of the Lean code appears to be slightly faster, which is a nice bonus.</p>",
        "id": 464430465,
        "sender_full_name": "Terence Tao",
        "timestamp": 1724345370
    },
    {
        "content": "<p>It's not clear to me how much the project is alive. Still, I'd like to get to the exponent 9 instead of 11, so I started hacking a little bit on KL divergence. PR at <a href=\"https://github.com/teorth/pfr/pull/227\">PFR#227</a>. As I say in the PR, to get correct statements, I had to assume that the KL divergence was finite, i.e., that X is absolutely continuous wrt Y. It's not clear to me yet if it's better to work having this condition around, or to have a version of KL divergence taking values in extended nonnegative reals. I'll see as things go...</p>",
        "id": 480114259,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1730492970
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110050\">Sébastien Gouëzel</span> <a href=\"#narrow/channel/412902-Polynomial-Freiman-Ruzsa-conjecture/topic/Outstanding.20tasks.2C.20version.202.2E0/near/480114259\">said</a>:</p>\n<blockquote>\n<p>It's not clear to me how much the project is alive</p>\n</blockquote>\n<p>Progress on the mathematics seems to have mostly stalled. Progress on upstreaming has never been so fast. cf <a href=\"https://github.com/leanprover-community/mathlib4/pulls?q=is%3Aopen+is%3Apr+pfr+\">the PRs from PFR</a></p>",
        "id": 480114569,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1730493135
    },
    {
        "content": "<p>Yes, I've definitely noticed the PRs. Many thanks for that!</p>",
        "id": 480115954,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1730493935
    },
    {
        "content": "<p>Thanks for all the work! I’be been distracted by other projects but will set up a fresh thread here soon to try to maintain the fresh momentum.</p>",
        "id": 480182669,
        "sender_full_name": "Terence Tao",
        "timestamp": 1730522263
    }
]