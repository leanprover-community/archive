[
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110038\">@Kevin Buzzard</span>  suggested elsewhere that it would be worthwhile to have a roadmap for sheaf cohomology, and I agree, so I‚Äôll get it started here. Others should feel free to weigh in!</p>\n<p>As I see it, there are two main steps, each being fairly large:</p>\n<ol>\n<li>Show that categories of sheaves we are interested in have enough injectives in a suitable level of generality to cover not just sheaf cohomology in the usual sense, but also (pro)√©tale cohomology, flat cohomology, etc. This could be done, for example, with Grothendieck abelian categories using the proof in his Tohoku paper.</li>\n<li>Prove the equivalence with (hypercover) Cech cohomology as in <a href=\"https://stacks.math.columbia.edu/tag/01H0\">https://stacks.math.columbia.edu/tag/01H0</a><br>\nIn general there is a map from the <em>usual</em> Cech cohomology to hypercover-Cech-cohomology to sheaf cohomology. The proof should at some point construct these maps. Even better: there is the so-called ‚ÄúCech-to-derived‚Äù spectral sequence (I think this is also done in Tohoku?).</li>\n</ol>",
        "id": 448324953,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1719839080
    },
    {
        "content": "<p>Is anyone thinking about spectral sequences? I remember <span class=\"user-mention\" data-user-id=\"118107\">@Amelia Livingston</span> was interested in that</p>",
        "id": 448328523,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1719839995
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"130384\">Riccardo Brasca</span> <a href=\"#narrow/stream/335062-homology/topic/Roadmap.20for.20sheaf.20cohomology/near/448328523\">said</a>:</p>\n<blockquote>\n<p>Is anyone thinking about spectral sequences? I remember <span class=\"user-mention silent\" data-user-id=\"118107\">Amelia Livingston</span> was interested in that</p>\n</blockquote>\n<p>I have completely formalised the mechanism of spectral sequences! But these are thousands of lines of code. It is going to be very long to make this enter mathlib, and it is not my top priority. For many applications, we just do not really need spectral sequences...</p>",
        "id": 448328922,
        "sender_full_name": "Jo√´l Riou",
        "timestamp": 1719840079
    },
    {
        "content": "<p>Concerning this, another (better?) approach is to show that the colimit of the hypercover complexes computes <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>R</mi><mi mathvariant=\"normal\">Œì</mi></mrow><annotation encoding=\"application/x-tex\">R\\Gamma</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord\">Œì</span></span></span></span> in the derived category. I didn‚Äôt mention it because I couldn‚Äôt find a good reference right now (but check out the comments on the stacks project link I mentioned above).</p>",
        "id": 448329451,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1719840180
    },
    {
        "content": "<p>However I do hope we will be able to do concrete calculations using spectral sequences at some point. (For example the 5-term exact sequence for cohomology groups in low degree has been quite useful in my research)</p>",
        "id": 448330074,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1719840319
    },
    {
        "content": "<p><a href=\"#narrow/stream/335062-homology/topic/Roadmap.20for.20sheaf.20cohomology/near/448330074\">A message</a> was moved here from <a class=\"stream-topic\" data-stream-id=\"335062\" href=\"/#narrow/stream/335062-homology/topic/Derived.20categories.20in.20mathlib\">#homology &gt; Derived categories in mathlib</a> by <span class=\"user-mention silent\" data-user-id=\"243562\">Adam Topaz</span>.</p>",
        "id": 448330114,
        "sender_full_name": "Notification Bot",
        "timestamp": 1719840333
    },
    {
        "content": "<p>As I have already expressed this view, the simplicial homotopy theory in mathlib is not mature enough yet to consider general hypercovers seriously. Hypercovers are like morphisms of presheaves of simplicial sets (or simplicial presheaves) which are locally trivial fibrations for a Grothendieck topology, but we barely understand what is a trivial fibration of simplicial sets (for example, can we show that it induces a quasi-isomorphism in singular cohomology?).</p>",
        "id": 448339311,
        "sender_full_name": "Jo√´l Riou",
        "timestamp": 1719842126
    },
    {
        "content": "<ol>\n<li>My suggestion is to first use <code>Ext</code> groups (see draft PRs <a href=\"https://github.com/leanprover-community/mathlib4/pull/13883\">#13883</a>, <a href=\"https://github.com/leanprover-community/mathlib4/pull/13879\">#13879</a>, <a href=\"https://github.com/leanprover-community/mathlib4/pull/13963\">#13963</a>, this shall soon be in mathlib). From this, we may get Mayer-Vietoris exact sequences, etc.</li>\n</ol>",
        "id": 448339352,
        "sender_full_name": "Jo√´l Riou",
        "timestamp": 1719842131
    },
    {
        "content": "<ol start=\"2\">\n<li>When we know that at least some categories of sheaves have enough injectives (this is Adam's 1.), we may introduce the derived functor approach <code>D^+(abelian sheaves) ‚•§ D^+(CommGrp)</code>. The notion of abstract derived functor is already in mathlib <a href=\"https://github.com/leanprover-community/mathlib4/pull/12788\">#12788</a>. With the formalism of derivability structures from Bruno Kahn/Georges Maltsiniotis that I am implementing, the main remaining step is to show that bounded above complexes have resolutions by complexes of injective objects. I have introduced definitions in <a href=\"https://github.com/leanprover-community/mathlib4/pull/12624\">#12624</a>, and will have to PR the rest of it. (I have already shown that these <code>Functor.mapDerivedCategoryPlus</code> compose well, and obtained the associated Grothendieck spectral sequence.)</li>\n</ol>",
        "id": 448339404,
        "sender_full_name": "Jo√´l Riou",
        "timestamp": 1719842137
    },
    {
        "content": "<ol start=\"3\">\n<li>(Mostly independant of 2). Develop Cech cohomology on a given covering. Show that it maps to the actual cohomology (either from 1. or 2.). This is based on a simplicial object (the \"Cech nerve\"), which would fit in the general setting of hypercovers, but there is a special trick which allows to circumvent the strong technical issues with general hypercovers, which is the notion of extra-degeneracy that I introduced in mathlib. This can be used to show that the after \"abelianization\" the Cech nerve gives a resolution of the constant sheaf (this method was already used successfully by <span class=\"user-mention\" data-user-id=\"118107\">@Amelia Livingston</span> in the context of group cohomology). A student of Patrick <span class=\"user-mention\" data-user-id=\"432800\">@yannis monbru</span> in Orsay is currently making some progress on this part.</li>\n</ol>",
        "id": 448339442,
        "sender_full_name": "Jo√´l Riou",
        "timestamp": 1719842143
    },
    {
        "content": "<ol start=\"4\">\n<li>In the context of topological spaces, pass though the colimit over open coverings to get a map from the Cech cohomology to the actual cohomology. Then get the technical lemma by Henri Cartan (Th√©or√®me II.5.9.2 in Godement's book, in French) which says that the morphisms from the Cech cohomology to the actual cohomology is an isomorphism under certain circumstances. Then, deduce the vanishing of the cohomology of quasi-coherent sheaves on affine schemes. The proof in Godement's book uses a spectral sequence (probably the one Adam is referring to), but a careful analysis of filtrations on the single complex of a double complex may be enough.</li>\n</ol>",
        "id": 448339478,
        "sender_full_name": "Jo√´l Riou",
        "timestamp": 1719842149
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 448339899,
        "sender_full_name": "Jo√´l Riou",
        "timestamp": 1719842206
    },
    {
        "content": "<p>I agree that the hypercover approach would require that we further develop the homotopy theory of simplicial sets. But the nice thing about mathlib is that work can be distributed, and there are already a few people in the community interested in simplicial methods. My opinion is that the hypercover approach is the ‚Äúright‚Äù abstraction, which is why I suggested it (of course, this is just an opinion). Further developing simplicial homotopy theory and the theory of hypercovers would be useful elsewhere as well (e.g. I‚Äôm interested in √©tale homotopy).</p>",
        "id": 448343427,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1719842773
    },
    {
        "content": "<p>Maybe <span class=\"user-mention\" data-user-id=\"488744\">@Jack McKoen</span> would be interested in working on the statement that a trivial fibration induces a quasi-iso?</p>",
        "id": 448344446,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1719842983
    },
    {
        "content": "<p>I agree that eventually we would like to have the hypercovering theorem for the computation of cohomology, but strong foundations in simplicial homotopy theory are a prerequisite (see for example the proofs of SGA 4 V 7.2.1/7.3.2 which use a fair share of simplicial homotopy/homology theory).</p>",
        "id": 448347075,
        "sender_full_name": "Jo√´l Riou",
        "timestamp": 1719843661
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"459699\">Jo√´l Riou</span> <a href=\"#narrow/stream/335062-homology/topic/Roadmap.20for.20sheaf.20cohomology/near/448339311\">said</a>:</p>\n<blockquote>\n<p>As I have already expressed this view, the simplicial homotopy theory in mathlib is not mature enough yet to consider general hypercovers seriously. Hypercovers are like morphisms of presheaves of simplicial sets (or simplicial presheaves) which are locally trivial fibrations for a Grothendieck topology, but we barely understand what is a trivial fibration of simplicial sets (for example, can we show that it induces a quasi-isomorphism in singular cohomology?).</p>\n</blockquote>\n<p>This sounds good to me.  And this programme that Joel proposes is not one that needs to be followed in linear order, as he notes (and indeed he is moving forward on several of these fronts at once).</p>",
        "id": 448348501,
        "sender_full_name": "Ravi Vakil",
        "timestamp": 1719844014
    },
    {
        "content": "<p>I wanted to check how many things we are missing from pinning down a definition of the Cech complex (and thus Cech cohomology), and this is what I came up with:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">AlgebraicGeometry</span><span class=\"w\"> </span><span class=\"n\">CategoryTheory</span><span class=\"w\"> </span><span class=\"n\">Limits</span>\n\n<span class=\"kd\">universe</span><span class=\"w\"> </span><span class=\"n\">u</span>\n<span class=\"kd\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Category</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Scheme</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">u</span><span class=\"o\">}}</span>\n\n<span class=\"kd\">instance</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">HasFiniteLimits</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Scheme.OpenCover</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">u</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n\n<span class=\"kd\">structure</span><span class=\"w\"> </span><span class=\"n\">OpenOver</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Scheme</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">where</span>\n<span class=\"w\">  </span><span class=\"n\">dom</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Scheme</span>\n<span class=\"w\">  </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">dom</span><span class=\"w\"> </span><span class=\"bp\">‚ü∂</span><span class=\"w\"> </span><span class=\"n\">X</span>\n<span class=\"w\">  </span><span class=\"n\">isOpen</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IsOpenImmersion</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span><span class=\"w\"> </span><span class=\"n\">infer_instance</span>\n\n<span class=\"kd\">instance</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">OpenOver</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IsOpenImmersion</span><span class=\"w\"> </span><span class=\"n\">f.f</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">f.isOpen</span>\n\n<span class=\"kd\">instance</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Category</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">OpenOver</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">InducedCategory.category</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">Over.mk</span><span class=\"w\"> </span><span class=\"n\">f.f</span>\n\n<span class=\"kd\">def</span><span class=\"w\"> </span><span class=\"n\">OpenOver.toOpens</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Scheme</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">OpenOver</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">‚•§</span><span class=\"w\"> </span><span class=\"n\">TopologicalSpace.Opens</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"n\">where</span>\n<span class=\"w\">  </span><span class=\"n\">obj</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">f.f.opensRange</span>\n<span class=\"w\">  </span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"n\">e</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">LE.le.hom</span><span class=\"w\"> </span><span class=\"bp\">&lt;|</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n\n<span class=\"kd\">def</span><span class=\"w\"> </span><span class=\"n\">TopCat.Presheaf.openImmersionFunctor</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">F</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">TopCat.Presheaf</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">OpenOver</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">)</span><span class=\"bp\">·µí·µñ</span><span class=\"w\"> </span><span class=\"bp\">‚•§</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">OpenOver.toOpens</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">op</span><span class=\"w\"> </span><span class=\"bp\">‚ãô</span><span class=\"w\"> </span><span class=\"n\">F</span>\n\n<span class=\"kd\">def</span><span class=\"w\"> </span><span class=\"n\">AlgebraicGeometry.Scheme.OpenCover.toOpenOver</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">U</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Scheme.OpenCover</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">u</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">j</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">U.J</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">OpenOver</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"n\">where</span>\n<span class=\"w\">  </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">U.map</span><span class=\"w\"> </span><span class=\"n\">j</span>\n\n<span class=\"kd\">def</span><span class=\"w\"> </span><span class=\"n\">Scheme.OpenCover.mapToOpenOver</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">U</span><span class=\"w\"> </span><span class=\"n\">V</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Scheme.OpenCover</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">u</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">e</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">U</span><span class=\"w\"> </span><span class=\"bp\">‚ü∂</span><span class=\"w\"> </span><span class=\"n\">V</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">j</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">U.J</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">U.toOpenOver</span><span class=\"w\"> </span><span class=\"n\">j</span><span class=\"w\"> </span><span class=\"bp\">‚ü∂</span><span class=\"w\"> </span><span class=\"n\">V.toOpenOver</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">e.idx</span><span class=\"w\"> </span><span class=\"n\">j</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">where</span>\n<span class=\"w\">  </span><span class=\"n\">left</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">e.app</span><span class=\"w\"> </span><span class=\"n\">_</span>\n<span class=\"w\">  </span><span class=\"n\">right</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"mi\">ùüô</span><span class=\"w\"> </span><span class=\"n\">_</span>\n<span class=\"w\">  </span><span class=\"n\">w</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">e.w</span><span class=\"w\"> </span><span class=\"n\">_</span>\n\n<span class=\"kd\">noncomputable</span>\n<span class=\"kd\">def</span><span class=\"w\"> </span><span class=\"n\">Scheme.OpenCover.inducedFunctor</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">HasProducts</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">F</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">TopCat.Presheaf</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">Scheme.OpenCover</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">u</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">)</span><span class=\"bp\">·µí·µñ</span><span class=\"w\"> </span><span class=\"bp\">‚•§</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">where</span>\n<span class=\"w\">  </span><span class=\"n\">obj</span><span class=\"w\"> </span><span class=\"n\">U</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">piObj</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">j</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">U.unop.J</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">F.obj</span><span class=\"w\"> </span><span class=\"bp\">&lt;|</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">op</span><span class=\"w\"> </span><span class=\"bp\">&lt;|</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">OpenOver.toOpens</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">obj</span><span class=\"w\"> </span><span class=\"bp\">&lt;|</span><span class=\"w\"> </span><span class=\"n\">U.unop.toOpenOver</span><span class=\"w\"> </span><span class=\"n\">j</span>\n<span class=\"w\">  </span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">U</span><span class=\"w\"> </span><span class=\"n\">V</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"k\">Pi</span><span class=\"bp\">.</span><span class=\"n\">lift</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">j</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">    </span><span class=\"k\">Pi</span><span class=\"bp\">.</span><span class=\"n\">œÄ</span><span class=\"w\"> </span><span class=\"n\">_</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f.unop.idx</span><span class=\"w\"> </span><span class=\"n\">j</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">‚â´</span><span class=\"w\"> </span><span class=\"n\">F.map</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Quiver.Hom.op</span><span class=\"w\"> </span><span class=\"bp\">&lt;|</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">OpenOver.toOpens</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"bp\">&lt;|</span>\n<span class=\"w\">      </span><span class=\"n\">Scheme.OpenCover.mapToOpenOver</span><span class=\"w\"> </span><span class=\"n\">f.unop</span><span class=\"w\"> </span><span class=\"n\">_</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"n\">map_id</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n<span class=\"w\">  </span><span class=\"n\">map_comp</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n\n<span class=\"kd\">noncomputable</span>\n<span class=\"kd\">def</span><span class=\"w\"> </span><span class=\"n\">Scheme.OpenCover.cechComplex</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">HasProducts</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Preadditive</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">U</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Scheme.OpenCover</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">u</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">F</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">TopCat.Presheaf</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">CochainComplex</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">‚Ñï</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">e</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">U</span><span class=\"w\"> </span><span class=\"bp\">‚ü∂</span><span class=\"w\"> </span><span class=\"bp\">‚ä§</span><span class=\"n\">_</span><span class=\"w\"> </span><span class=\"n\">_</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">terminal.from</span><span class=\"w\"> </span><span class=\"n\">U</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">e</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Arrow.mk</span><span class=\"w\"> </span><span class=\"n\">e</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">e</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">e.cechNerve</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">e</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">CosimplicialObject</span><span class=\"w\"> </span><span class=\"n\">_</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">e.rightOp</span><span class=\"w\"> </span><span class=\"bp\">‚ãô</span><span class=\"w\"> </span><span class=\"n\">Scheme.OpenCover.inducedFunctor</span><span class=\"w\"> </span><span class=\"n\">F</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">AlgebraicTopology.alternatingCofaceMapComplex</span><span class=\"w\"> </span><span class=\"n\">_</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">obj</span><span class=\"w\"> </span><span class=\"n\">e</span>\n</code></pre></div>\n<p>For some reason, I'm still not completely happy with this definition. I would much rather be able to take <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>U</mi><mi>j</mi></msub></mrow><annotation encoding=\"application/x-tex\">U_j</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9694em;vertical-align:-0.2861em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">U</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.109em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span></span></span></span> an open cover of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>X</mi></mrow><annotation encoding=\"application/x-tex\">X</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span></span></span></span>, consider the map <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mo>‚àê</mo><mi>j</mi></msub><msub><mi>U</mi><mi>j</mi></msub><mo>‚Üí</mo><mi>X</mi></mrow><annotation encoding=\"application/x-tex\">\\coprod_j U_j \\to X</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.1858em;vertical-align:-0.4358em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:0em;\">‚àê</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.162em;\"><span style=\"top:-2.4003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4358em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">U</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.109em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">‚Üí</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span></span></span></span>, take the Cech nerve of that, take global sections, and take the associated complex. But it seems that for such an approach we will need the pullback functors that some people were working on at the AIM-AG workshop last week. How far are we from having such pullbacks?</p>",
        "id": 448646039,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1719936487
    },
    {
        "content": "<p>My suggestion would be to introduce a category <code>FormalCoproduct C</code> (which for certain universes could be identified to the full subcategory of presheaves of sets which identify to coproducts of representable presheaves). My definition of the Cech complex would then be <a href=\"https://github.com/leanprover-community/mathlib4/compare/master...cech-experiment\">https://github.com/leanprover-community/mathlib4/compare/master...cech-experiment</a><br>\n(This API would be immediately usable when it becomes reasonable to study general hypercovers.)</p>",
        "id": 448678617,
        "sender_full_name": "Jo√´l Riou",
        "timestamp": 1719945739
    },
    {
        "content": "<p>yes, I agree. BTW I think <code>FormalCoproduct C</code> should rather be called <code>Indexed C</code> (and possibly should even be defined for plain types independently of category theory)</p>",
        "id": 448688549,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1719948984
    },
    {
        "content": "<p>Unfortunately <code>Indexed C</code> is a little \"evil\"... <code>ext</code> for its <code>Hom</code>s would involve <code>HEq</code> or <code>eqToHom</code>s</p>",
        "id": 448689005,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1719949170
    },
    {
        "content": "<p>The stacks project calls this the category of \"Semi-representable\" objects BTW. I'm not a huge fan of that name.</p>",
        "id": 448689508,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1719949392
    },
    {
        "content": "<p>I remember when constructing the Cech Nerve that I thought about using products in <code>Over X</code> as opposed to wide pullbacks, and realized that it was painful (I don't remember exactly why though). It may be worthwhile to make a definition for families of arrows over a fixed base <code>X</code> as well, say <code>IndexedOver X</code> (or some other name). This has a terminal object which is the singleton <code>1 : X -&gt; X</code>, and if <code>X : C</code> and <code>C</code> has finite wide-pullbacks over <code>X</code>, then <code>IndexedOver X</code> has finite wide-pullbacks over the terminal object. You could then use the preexisting <code>cechNerve</code> instead of the variant <code>cechSimplicial</code>.</p>",
        "id": 448691127,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1719950099
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"459699\">Jo√´l Riou</span> <a href=\"#narrow/stream/335062-homology/topic/Roadmap.20for.20sheaf.20cohomology/near/448339478\">said</a>:</p>\n<blockquote>\n<ol start=\"4\">\n<li>In the context of topological spaces, pass though the colimit over open coverings to get a map from the Cech cohomology to the actual cohomology. Then get the technical lemma by Henri Cartan (Th√©or√®me II.5.9.2 in Godement's book, in French) which says that the morphisms from the Cech cohomology to the actual cohomology is an isomorphism under certain circumstances. Then, deduce the vanishing of the cohomology of quasi-coherent sheaves on affine schemes. The proof in Godement's book uses a spectral sequence (probably the one Adam is referring to), but a careful analysis of filtrations on the single complex of a double complex may be enough.</li>\n</ol>\n</blockquote>\n<p>I am not saying that things in this list are not useful and should not be done, but proving the vanishing of the cohomology of quasi-coherent sheaves on affine schemes is much easier and does not require Cech cohomology (or spectral sequences for that matter), if you know that the functor <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>M</mi><mo>‚Ü¶</mo><mover accent=\"true\"><mi>M</mi><mo stretchy=\"true\">~</mo></mover></mrow><annotation encoding=\"application/x-tex\">M \\mapsto \\widetilde{M}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6943em;vertical-align:-0.011em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">‚Ü¶</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.9433em;\"></span><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9433em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span></span><span class=\"svg-align\" style=\"width:calc(100% - 0.1667em);margin-left:0.1667em;top:-3.6833em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span style=\"height:0.26em;\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"100%\" height=\"0.26em\" viewBox=\"0 0 600 260\" preserveAspectRatio=\"none\"><path d=\"M200 55.538c-77 0-168 73.953-177 73.953-3 0-7\n-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0\n 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0\n 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128\n-68.267.847-113-73.952-191-73.952z\"/></svg></span></span></span></span></span></span></span></span></span> is an equivalence from <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>A</mi></mrow><annotation encoding=\"application/x-tex\">A</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\">A</span></span></span></span>-modules to quasi-coherent sheaves on <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi><mi>p</mi><mi>e</mi><mi>c</mi><mo stretchy=\"false\">(</mo><mi>A</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">Spec(A)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">Sp</span><span class=\"mord mathnormal\">ec</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">A</span><span class=\"mclose\">)</span></span></span></span>. As far as I remember, you only need to know that flabby sheaves have trivial cohomology.</p>",
        "id": 451492207,
        "sender_full_name": "Sophie Morel",
        "timestamp": 1721048346
    },
    {
        "content": "<p>But maybe you meant a more general version of the result?</p>",
        "id": 451492298,
        "sender_full_name": "Sophie Morel",
        "timestamp": 1721048374
    },
    {
        "content": "<p>As far as I know, to make this argument work, we also need to know that if <code>M</code> is an injective module, then <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mover accent=\"true\"><mi>M</mi><mo stretchy=\"true\">~</mo></mover></mrow><annotation encoding=\"application/x-tex\">\\widetilde{M}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9433em;\"></span><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9433em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span></span><span class=\"svg-align\" style=\"width:calc(100% - 0.1667em);margin-left:0.1667em;top:-3.6833em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span style=\"height:0.26em;\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"100%\" height=\"0.26em\" viewBox=\"0 0 600 260\" preserveAspectRatio=\"none\"><path d=\"M200 55.538c-77 0-168 73.953-177 73.953-3 0-7\n-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0\n 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0\n 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128\n-68.267.847-113-73.952-191-73.952z\"/></svg></span></span></span></span></span></span></span></span></span> is flasque, which may be true only in the Noetherian case (this is the proof in Hartshorne's book).</p>",
        "id": 451496780,
        "sender_full_name": "Jo√´l Riou",
        "timestamp": 1721049580
    },
    {
        "content": "<p>I was thinking of the proof in <a href=\"https://projecteuclid.org/journals/rocky-mountain-journal-of-mathematics/volume-10/issue-3/Some-elementary-proofs-of-basic-theorems-in-the-cohomology-of/10.1216/RMJ-1980-10-3-637.pdf\">this paper</a> of Kempf (in section 1, proposition 1 and theorem 2). I don't think that you need to know that <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mover accent=\"true\"><mi>M</mi><mo stretchy=\"true\">~</mo></mover></mrow><annotation encoding=\"application/x-tex\">\\widetilde{M}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9433em;\"></span><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9433em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span></span><span class=\"svg-align\" style=\"width:calc(100% - 0.1667em);margin-left:0.1667em;top:-3.6833em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span style=\"height:0.26em;\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"100%\" height=\"0.26em\" viewBox=\"0 0 600 260\" preserveAspectRatio=\"none\"><path d=\"M200 55.538c-77 0-168 73.953-177 73.953-3 0-7\n-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0\n 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0\n 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128\n-68.267.847-113-73.952-191-73.952z\"/></svg></span></span></span></span></span></span></span></span></span> is flasque for <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>M</mi></mrow><annotation encoding=\"application/x-tex\">M</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span></span></span></span> injective. Also, <span class=\"user-mention\" data-user-id=\"130609\">@Antoine Chambert-Loir</span>  mentioned to me that the proof is unnecessarily complicated at one point but I forgot the details, so it's probably better to ask him.</p>",
        "id": 451518668,
        "sender_full_name": "Sophie Morel",
        "timestamp": 1721054940
    },
    {
        "content": "<p>Indeed, the first lemma of that paper can be replaced by the simpler fact that cohomology classes (of degree alas 1) vanish locally.</p>",
        "id": 451530849,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1721058358
    },
    {
        "content": "<p>Then you would also have to modify the proof of Theorem 2 of the paper, I think? I'm sorry, I'm probably missing something but I don't see how to do that.</p>",
        "id": 451616269,
        "sender_full_name": "Sophie Morel",
        "timestamp": 1721073359
    },
    {
        "content": "<p>It seems to me that the proof of theorem 2 would not need much change. Then, for the variant of proposition 1 that Antoine suggests, it seems we do not even need to know anything about flasque sheaves. If <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>I</mi><mo>‚àô</mo></msup></mrow><annotation encoding=\"application/x-tex\">I^\\bullet</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">I</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6741em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mbin mtight\">‚àô</span></span></span></span></span></span></span></span></span></span></span> is an injective resolution of an abelian sheaf <code>F</code>, then a cohomology class of <code>F</code> shall be the class of a cocycle of the complex <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>I</mi><mrow><mi>n</mi><mo>‚àí</mo><mn>1</mn></mrow></msup><mo stretchy=\"false\">(</mo><mi>X</mi><mo stretchy=\"false\">)</mo><mo>‚Üí</mo><msup><mi>I</mi><mi>n</mi></msup><mo stretchy=\"false\">(</mo><mi>X</mi><mo stretchy=\"false\">)</mo><mo>‚Üí</mo><msup><mi>I</mi><mrow><mi>n</mi><mo>+</mo><mn>1</mn></mrow></msup><mo stretchy=\"false\">(</mo><mi>X</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">I^{n-1}(X) \\to I^n(X) \\to I^{n+1}(X)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0641em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">I</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span><span class=\"mbin mtight\">‚àí</span><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">‚Üí</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">I</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">‚Üí</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0641em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">I</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span><span class=\"mbin mtight\">+</span><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"mclose\">)</span></span></span></span>. By the exactness of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>I</mi><mo>‚àô</mo></msup></mrow><annotation encoding=\"application/x-tex\">I^\\bullet</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">I</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6741em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mbin mtight\">‚àô</span></span></span></span></span></span></span></span></span></span></span>, locally this cocycle has to be a coboundary.</p>",
        "id": 451626964,
        "sender_full_name": "Jo√´l Riou",
        "timestamp": 1721076188
    },
    {
        "content": "<p>I don't have a problem with the fact that cohomology classes are locally zero, but I don't understand how to relate <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>H</mi><mi>i</mi></msup><mo stretchy=\"false\">(</mo><mi>X</mi><mo separator=\"true\">,</mo><msub><mrow></mrow><mi>V</mi></msub><mi>F</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">H^i(X,{}_V F)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0747em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8247em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.22222em;\">V</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">F</span><span class=\"mclose\">)</span></span></span></span> and <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>H</mi><mi>i</mi></msup><mo stretchy=\"false\">(</mo><mi>V</mi><mo separator=\"true\">,</mo><mi>F</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">H^i(V,F)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0747em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8247em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">F</span><span class=\"mclose\">)</span></span></span></span>, and it seems that you need that to prove theorem 2.</p>",
        "id": 451627968,
        "sender_full_name": "Sophie Morel",
        "timestamp": 1721076558
    },
    {
        "content": "<p>(Notation as in Kempf's paper: <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>V</mi></mrow><annotation encoding=\"application/x-tex\">V</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span></span></span></span> is an open subset of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>X</mi></mrow><annotation encoding=\"application/x-tex\">X</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span></span></span></span>, and if we call <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>j</mi></mrow><annotation encoding=\"application/x-tex\">j</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.854em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05724em;\">j</span></span></span></span> the inclusion of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>V</mi></mrow><annotation encoding=\"application/x-tex\">V</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span></span></span></span> in <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>X</mi></mrow><annotation encoding=\"application/x-tex\">X</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span></span></span></span>, then <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mrow></mrow><mi>V</mi></msub><mi>F</mi></mrow><annotation encoding=\"application/x-tex\">{}_VF</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.22222em;\">V</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">F</span></span></span></span> is by definition <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>j</mi><mo>‚àó</mo></msub><msup><mi>j</mi><mo>‚àó</mo></msup><mi>F</mi></mrow><annotation encoding=\"application/x-tex\">j_*j^*F</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8831em;vertical-align:-0.1944em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05724em;\">j</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1757em;\"><span style=\"top:-2.55em;margin-left:-0.0572em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mbin mtight\">‚àó</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05724em;\">j</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6887em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mbin mtight\">‚àó</span></span></span></span></span></span></span></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">F</span></span></span></span>.)</p>",
        "id": 451628100,
        "sender_full_name": "Sophie Morel",
        "timestamp": 1721076611
    },
    {
        "content": "<p>The proof of theorem 2 is that you take a cohomology class <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>Œ±</mi></mrow><annotation encoding=\"application/x-tex\">\\alpha</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">Œ±</span></span></span></span> in <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>H</mi><mi>n</mi></msup><mo stretchy=\"false\">(</mo><mi>X</mi><mo separator=\"true\">,</mo><mi>F</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">H^n(X,F)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">F</span><span class=\"mclose\">)</span></span></span></span> (here <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>X</mi></mrow><annotation encoding=\"application/x-tex\">X</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span></span></span></span> is an affine scheme, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>F</mi></mrow><annotation encoding=\"application/x-tex\">F</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">F</span></span></span></span> is quasi-coherent sheaf on <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>X</mi></mrow><annotation encoding=\"application/x-tex\">X</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span></span></span></span>, and <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi><mo>&gt;</mo><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">n&gt;0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5782em;vertical-align:-0.0391em;\"></span><span class=\"mord mathnormal\">n</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">&gt;</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">0</span></span></span></span>) and you want to embed <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>F</mi></mrow><annotation encoding=\"application/x-tex\">F</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">F</span></span></span></span> into a quasi-coherent sheaf <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>G</mi></mrow><annotation encoding=\"application/x-tex\">G</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\">G</span></span></span></span> on <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>X</mi></mrow><annotation encoding=\"application/x-tex\">X</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span></span></span></span> such that the image of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>Œ±</mi></mrow><annotation encoding=\"application/x-tex\">\\alpha</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">Œ±</span></span></span></span> in <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>H</mi><mi>n</mi></msup><mo stretchy=\"false\">(</mo><mi>X</mi><mo separator=\"true\">,</mo><mi>G</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">H^n(X,G)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">G</span><span class=\"mclose\">)</span></span></span></span> is <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">0</span></span></span></span>. Kempf takes <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>G</mi></mrow><annotation encoding=\"application/x-tex\">G</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\">G</span></span></span></span> to be equal to a direct sum <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mrow></mrow><msub><mi>V</mi><mi>i</mi></msub></msub><mi>F</mi></mrow><annotation encoding=\"application/x-tex\">{}_{V_i}F</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9334em;vertical-align:-0.2501em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.22222em;\">V</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:-0.2222em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2501em;\"><span></span></span></span></span></span></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">F</span></span></span></span> for <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><msub><mi>V</mi><mi>i</mi></msub><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(V_i)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.2222em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span> a finite open cover of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>X</mi></mrow><annotation encoding=\"application/x-tex\">X</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span></span></span></span> by small enough basic open subschemes. How, from the local triviality of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>Œ±</mi></mrow><annotation encoding=\"application/x-tex\">\\alpha</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">Œ±</span></span></span></span>, do you deduce that you can choose <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><msub><mi>V</mi><mi>i</mi></msub><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(V_i)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.2222em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span> such that the image of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>Œ±</mi></mrow><annotation encoding=\"application/x-tex\">\\alpha</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">Œ±</span></span></span></span> in each <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>H</mi><mi>n</mi></msup><mo stretchy=\"false\">(</mo><mi>X</mi><mo separator=\"true\">,</mo><msub><mrow></mrow><msub><mi>V</mi><mi>i</mi></msub></msub><mi>F</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">H^n(X,{}_{V_i}F)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0001em;vertical-align:-0.2501em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.22222em;\">V</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:-0.2222em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2501em;\"><span></span></span></span></span></span></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">F</span><span class=\"mclose\">)</span></span></span></span> is zero?  It is not true for a  general sheaf <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>F</mi></mrow><annotation encoding=\"application/x-tex\">F</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">F</span></span></span></span> that <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>H</mi><mi>n</mi></msup><mo stretchy=\"false\">(</mo><mi>X</mi><mo separator=\"true\">,</mo><msub><mrow></mrow><msub><mi>V</mi><mi>i</mi></msub></msub><mi>F</mi><mo stretchy=\"false\">)</mo><mo>=</mo><msup><mi>H</mi><mi>n</mi></msup><mo stretchy=\"false\">(</mo><msub><mi>V</mi><mi>i</mi></msub><mo separator=\"true\">,</mo><mi>F</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">H^n(X,{}_{V_i}F)=H^n(V_i,F)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0001em;vertical-align:-0.2501em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.22222em;\">V</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3281em;\"><span style=\"top:-2.357em;margin-left:-0.2222em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2501em;\"><span></span></span></span></span></span></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">F</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.2222em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">F</span><span class=\"mclose\">)</span></span></span></span>, so it cannot be an abstract nonsense argument. Am I missing something?</p>",
        "id": 451629442,
        "sender_full_name": "Sophie Morel",
        "timestamp": 1721077167
    },
    {
        "content": "<p>(Of course the isomorphism <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>H</mi><mi>n</mi></msup><mo stretchy=\"false\">(</mo><mi>X</mi><mo separator=\"true\">,</mo><msub><mrow></mrow><mi>V</mi></msub><mi>F</mi><mo stretchy=\"false\">)</mo><mo>=</mo><msup><mi>H</mi><mi>n</mi></msup><mo stretchy=\"false\">(</mo><mi>V</mi><mo separator=\"true\">,</mo><mi>F</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">H^n(X,{}_{V}F)=H^n(V,F)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord\"></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.22222em;\">V</span></span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">F</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">F</span><span class=\"mclose\">)</span></span></span></span> holds for <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>F</mi></mrow><annotation encoding=\"application/x-tex\">F</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">F</span></span></span></span> quasi-coherent and <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>V</mi></mrow><annotation encoding=\"application/x-tex\">V</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span></span></span></span> affine, but that is usually deduced from the vanishing of the cohomology of quasi-coherent sheaves on affine schemes.)</p>",
        "id": 451629777,
        "sender_full_name": "Sophie Morel",
        "timestamp": 1721077300
    },
    {
        "content": "<p>Thanks! Yes, I was confused with the notatoins. The proof of proposition 1 is more subtle than I initially thought.</p>",
        "id": 451630314,
        "sender_full_name": "Jo√´l Riou",
        "timestamp": 1721077519
    },
    {
        "content": "<p>I had written down the proof for my course in algebraic geometry. There are certainly mistakes that remain but that may be useful. See ¬ß6.1, page 267 of my notes on<br>\n<a href=\"https://webusers.imj-prg.fr/~antoine.chambert-loir/enseignement/2023-24/cohcoh/ag.pdf\">Algebraic Geometry of Schemes</a></p>",
        "id": 451630599,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1721077633
    },
    {
        "content": "<p>I am afraid that the issue Sophie pointed out seems to apply to the statement \"the cohomology group <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>H</mi><mi>n</mi></msup><mo stretchy=\"false\">(</mo><mi>X</mi><mo separator=\"true\">,</mo><msub><mi>F</mi><mi>x</mi></msub><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">H^n(X,F_x)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">F</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">x</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span> identifies with <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>H</mi><mi>n</mi></msup><mo stretchy=\"false\">(</mo><msub><mi>U</mi><mi>x</mi></msub><mo separator=\"true\">,</mo><msub><mi>F</mi><mi>x</mi></msub><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">H^n(U_x,F_x)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">U</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.109em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">x</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">F</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">x</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span>\" in your text :-(</p>",
        "id": 451632898,
        "sender_full_name": "Jo√´l Riou",
        "timestamp": 1721078541
    },
    {
        "content": "<p>(In some sense, that's reassuring that Kempf has not missed an easy proof.)</p>",
        "id": 451633411,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1721078764
    },
    {
        "content": "<p>I have also taught this proof in an algebraic geometry course, and I remember finding it more subtle than it looked at first.</p>",
        "id": 451685761,
        "sender_full_name": "Sophie Morel",
        "timestamp": 1721109049
    },
    {
        "content": "<p>But it does allow one to prove that the cohomology of quasi-coherent sheaves on affine schemes vanishes with minimal information about cohomology. If I remember well, what you need is the fact that <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>H</mi><mn>0</mn></msup></mrow><annotation encoding=\"application/x-tex\">H^0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span></span></span></span></span></span></span></span> identifies to global sections, the existence of the long exact sequence, and the fact that cohomology of flasque sheaves vanish. That last fact can be replaced with the fact that the restriction to an open subset of an injective abelian sheaf stays injective, which follows from the existence of an exact left adjoint of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>j</mi><mo>‚àó</mo></msup></mrow><annotation encoding=\"application/x-tex\">j^*</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8831em;vertical-align:-0.1944em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05724em;\">j</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6887em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mbin mtight\">‚àó</span></span></span></span></span></span></span></span></span></span></span> (i.e. <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>j</mi><mo stretchy=\"false\">!</mo></msub></mrow><annotation encoding=\"application/x-tex\">j_!</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.854em;vertical-align:-0.1944em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05724em;\">j</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0572em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mclose mtight\">!</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>).</p>",
        "id": 451685998,
        "sender_full_name": "Sophie Morel",
        "timestamp": 1721109239
    },
    {
        "content": "<p>You do need to know some stuff about the <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mover accent=\"true\"><mi>M</mi><mo stretchy=\"true\">~</mo></mover></mrow><annotation encoding=\"application/x-tex\">\\widetilde{M}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9433em;\"></span><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9433em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span></span><span class=\"svg-align\" style=\"width:calc(100% - 0.1667em);margin-left:0.1667em;top:-3.6833em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span style=\"height:0.26em;\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"100%\" height=\"0.26em\" viewBox=\"0 0 600 260\" preserveAspectRatio=\"none\"><path d=\"M200 55.538c-77 0-168 73.953-177 73.953-3 0-7\n-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0\n 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0\n 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128\n-68.267.847-113-73.952-191-73.952z\"/></svg></span></span></span></span></span></span></span></span></span>, for example you have to be able to calculate the restriction of <span class=\"tex-error\">$$\\wildetilde{M}$$</span> to an affine open subscheme <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>U</mi></mrow><annotation encoding=\"application/x-tex\">U</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">U</span></span></span></span> of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>X</mi></mrow><annotation encoding=\"application/x-tex\">X</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span></span></span></span> (it's <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mover accent=\"true\"><mrow><mi>M</mi><msub><mo>‚äó</mo><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>X</mi><mo stretchy=\"false\">)</mo></mrow></msub><mi>O</mi><mo stretchy=\"false\">(</mo><mi>U</mi><mo stretchy=\"false\">)</mo></mrow><mo stretchy=\"true\">~</mo></mover></mrow><annotation encoding=\"application/x-tex\">\\widetilde{M\\otimes_{O(X)}O(U)}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.4452em;vertical-align:-0.3552em;\"></span><span class=\"mord accent\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.09em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\"><span class=\"mbin\">‚äó</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3448em;\"><span style=\"top:-2.5198em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen mtight\">(</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.07847em;\">X</span><span class=\"mclose mtight\">)</span></span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3552em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">U</span><span class=\"mclose\">)</span></span></span><span class=\"svg-align\" style=\"top:-3.75em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span style=\"height:0.34em;\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"100%\" height=\"0.34em\" viewBox=\"0 0 2340 312\" preserveAspectRatio=\"none\"><path d=\"M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345\n-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409\n 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9\n 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409\n -175.236-744-175.236z\"/></svg></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3552em;\"><span></span></span></span></span></span></span></span></span>). Actually you only need the case where <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>U</mi></mrow><annotation encoding=\"application/x-tex\">U</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">U</span></span></span></span> is basic, but the fact is true for any affine <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>U</mi></mrow><annotation encoding=\"application/x-tex\">U</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">U</span></span></span></span>.</p>",
        "id": 451686237,
        "sender_full_name": "Sophie Morel",
        "timestamp": 1721109366
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"318709\">Sophie Morel</span> <a href=\"#narrow/stream/335062-homology/topic/Roadmap.20for.20sheaf.20cohomology/near/451685761\">said</a>:</p>\n<blockquote>\n<p>I have also taught this proof in an algebraic geometry course, and I remember finding it more subtle than it looked at first.</p>\n</blockquote>\n<p>Lemma 1 is a bit intricate, indeed, and I was happy to avoid it‚Ä¶ Alas‚Ä¶</p>",
        "id": 451689324,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1721111493
    },
    {
        "content": "<p>Once you have proved that cohomology of quasi-coherent sheaves on affine schemes vanishes, it is possible to deduce the isomorphism between the cohomology of a quasi-coherent sheaf (on a quasi-compact separated scheme) and its Cech cohomology for a finite affine open cover, by showing that the Cech complex of the quasi-coherent sheaf is an acyclic resolution of it. This is Theorem 13 in the same paper of Kempf. Here we take the non-alternating Cech complex, but where you choose an ordering on the opens in the cover and you don't repeat indices, so it is finite. You can also use the cohomology of this complex as a \"cheap\" definition of Cech cohomology in that case, and use this to do calculations like the cohomology of line bundles on projective space. I also did that in an algebraic geometry class, though the calculations were exercises!</p>",
        "id": 451708850,
        "sender_full_name": "Sophie Morel",
        "timestamp": 1721119141
    },
    {
        "content": "<p>I have just PRed the definition of the sheaf cohomology of abelian sheaves on categories equipped with a Grothendieck topoplogy <a href=\"https://github.com/leanprover-community/mathlib4/pull/14800\">#14800</a>.</p>",
        "id": 451750028,
        "sender_full_name": "Jo√´l Riou",
        "timestamp": 1721133741
    },
    {
        "content": "<p>Do we know that sheaves have enough injectives? Or did you avoid that?</p>",
        "id": 451786463,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1721143626
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"130384\">Riccardo Brasca</span> <a href=\"#narrow/stream/335062-homology/topic/Roadmap.20for.20sheaf.20cohomology/near/451786463\">said</a>:</p>\n<blockquote>\n<p>Do we know that sheaves have enough injectives? Or did you avoid that?</p>\n</blockquote>\n<p>The <code>Ext</code> groups are defined using the derived category, which does not require the existence of enough injectives.<br>\n(The existence of enough injectives (for sheaves of modules over a topological space) was formalised during the AIM workshop using skyscraper sheaves.)</p>",
        "id": 452024388,
        "sender_full_name": "Jo√´l Riou",
        "timestamp": 1721212419
    },
    {
        "content": "<p>Using the long exact sequences of <code>Ext</code>, I have just formalized the Mayer-Vietoris long exact sequences in sheaf cohomology <a href=\"https://github.com/leanprover-community/mathlib4/pull/15099\">#15099</a>. For this, I have formalized certain types of \"Mayer-Vietoris squares\" so that it applies not only to the case of topological spaces (see <a href=\"https://github.com/leanprover-community/mathlib4/pull/15099/files#diff-28ed9f5f546a4424154cd41eed47f1bf7e4300ada781f26de22c6abf2d65ad3eR55-R69\">https://github.com/leanprover-community/mathlib4/pull/15099/files#diff-28ed9f5f546a4424154cd41eed47f1bf7e4300ada781f26de22c6abf2d65ad3eR55-R69</a>), but also to \"Nisnevich distinguished squares\" when more algebraic geometry is formalized.</p>",
        "id": 453774960,
        "sender_full_name": "Jo√´l Riou",
        "timestamp": 1721847986
    },
    {
        "content": "<p>Magnifique travail !</p>",
        "id": 453775900,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1721848297
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"459699\">@Jo√´l Riou</span> Thanks for <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Cech.20Cohomology/near/525239134\">pointing me here</a>. This discussion was 1 year ago. Has there been any new developments? Where can I start and contribute?</p>",
        "id": 525239278,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1750635019
    },
    {
        "content": "<p>cc <span class=\"user-mention\" data-user-id=\"673690\">@Raphael Douglas Giles</span></p>",
        "id": 525271323,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1750664236
    },
    {
        "content": "<p>I'm not very familiar with sites, are they supposed to have a terminal object representing the \"whole space\"?</p>",
        "id": 525387039,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1750702989
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110064\">@Kenny Lau</span> no, they dont, but you can still have a \"global sections\" functor by taking the appropriate limit. See <a class=\"stream-topic\" data-stream-id=\"116395\" href=\"/#narrow/channel/116395-maths/topic/global.20sections.20functor/with/502505259\">#maths &gt; global sections functor</a></p>",
        "id": 525388578,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1750703683
    },
    {
        "content": "<p>Also, I'm now stuck on another point: if I have a cover (corresponding to an element of <code>J X</code>), how do I view it as one morphism?</p>",
        "id": 525388986,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1750703891
    },
    {
        "content": "<p>wme?</p>",
        "id": 525389024,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1750703909
    },
    {
        "content": "<p>i.e. I think if {U_i -&gt; X}_i is a cover then I need one object U := coproduct of U_i so that I can view that cover as one morphism U -&gt; X?</p>",
        "id": 525389055,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1750703929
    },
    {
        "content": "<p>Are you using a Grothendieck topology or something else?</p>",
        "id": 525389323,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1750704039
    },
    {
        "content": "<p>E.g. a pretopology or a coverage...</p>",
        "id": 525389352,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1750704046
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"243562\">Adam Topaz</span> <a href=\"#narrow/channel/335062-homology/topic/Roadmap.20for.20sheaf.20cohomology/near/525389024\">said</a>:</p>\n<blockquote>\n<p>wme?</p>\n</blockquote>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">universe</span><span class=\"w\"> </span><span class=\"n\">w'</span><span class=\"w\"> </span><span class=\"n\">w</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"n\">u</span>\n\n<span class=\"kn\">namespace</span><span class=\"w\"> </span><span class=\"n\">CategoryTheory</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Abelian</span>\n\n<span class=\"kn\">namespace</span><span class=\"w\"> </span><span class=\"n\">Sheaf</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Category</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">v</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">J</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">GrothendieckTopology</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">}</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Cech</span><span class=\"bp\">.</span><span class=\"n\">complex</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">F</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Sheaf</span><span class=\"w\"> </span><span class=\"n\">J</span><span class=\"w\"> </span><span class=\"n\">AddCommGrp</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">v</span><span class=\"o\">})</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ùí∞</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">J</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">CochainComplex</span><span class=\"w\"> </span><span class=\"n\">AddCommGrp</span><span class=\"w\"> </span><span class=\"n\">‚Ñï</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">AlgebraicTopology</span><span class=\"bp\">.</span><span class=\"n\">alternatingCofaceMapComplex</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">obj</span><span class=\"w\"> </span><span class=\"bp\">&lt;|</span>\n<span class=\"w\">    </span><span class=\"n\">Functor</span><span class=\"bp\">.</span><span class=\"n\">rightOp</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Arrow</span><span class=\"bp\">.</span><span class=\"n\">cechNerve</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">‚ãô</span><span class=\"w\"> </span><span class=\"c1\">-- I need one arrow here</span>\n<span class=\"w\">      </span><span class=\"n\">F</span><span class=\"bp\">.</span><span class=\"n\">val</span><span class=\"w\"> </span><span class=\"c1\">-- this is wrong too</span>\n\n<span class=\"kn\">end</span><span class=\"w\"> </span><span class=\"n\">Sheaf</span>\n\n<span class=\"kn\">end</span><span class=\"w\"> </span><span class=\"n\">CategoryTheory</span>\n</code></pre></div>",
        "id": 525389595,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1750704132
    },
    {
        "content": "<p>a Grothendieck topology</p>",
        "id": 525389619,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1750704145
    },
    {
        "content": "<p>I'm not very well versed in Category Theory, so some parts are just my guess</p>",
        "id": 525390272,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1750704433
    },
    {
        "content": "<p>to be more specific, I've never been explicitly told to convert a covering into one arrow</p>",
        "id": 525390295,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1750704447
    },
    {
        "content": "<p>I think you want to take the colimit of the functor associated to the sieve U, that should be the analogue of the \"union of the objects in the cover\", and use the universal property of the colimit to obtain a morphism to <code>X</code>.</p>",
        "id": 525390389,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1750704487
    },
    {
        "content": "<p>I don't remember whether we have a developed API for this... <span class=\"user-mention\" data-user-id=\"519559\">@Dagur Asgeirsson</span> or <span class=\"user-mention\" data-user-id=\"459699\">@Jo√´l Riou</span> might know.</p>",
        "id": 525390484,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1750704534
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"243562\">@Adam Topaz</span> <del>That sounds like <code>Sieve.sup</code></del>?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">CategoryTheory</span><span class=\"bp\">.</span><span class=\"n\">Sieve</span><span class=\"bp\">.</span><span class=\"n\">sup</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">v‚ÇÅ</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">u‚ÇÅ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u‚ÇÅ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Category</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">v‚ÇÅ</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">u‚ÇÅ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ùíÆ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Sieve</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Sieve</span><span class=\"w\"> </span><span class=\"n\">X</span>\n\n<span class=\"n\">The</span><span class=\"w\"> </span><span class=\"n\">supremum</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">collection</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">sieves</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">union</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">them</span><span class=\"w\"> </span><span class=\"n\">all</span><span class=\"bp\">.</span>\n</code></pre></div>\n<p>but also, I also need to extend the sheaf <code>F</code> as a functor in a larger category...</p>",
        "id": 525391135,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1750704800
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">universe</span><span class=\"w\"> </span><span class=\"n\">w'</span><span class=\"w\"> </span><span class=\"n\">w</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"n\">u</span>\n\n<span class=\"kn\">namespace</span><span class=\"w\"> </span><span class=\"n\">CategoryTheory</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Limits</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Abelian</span>\n\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Category</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">v</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">J</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">GrothendieckTopology</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">}</span>\n\n<span class=\"kn\">noncomputable</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Presieve</span><span class=\"bp\">.</span><span class=\"n\">asMorphism</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Presieve</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">HasColimit</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"bp\">.</span><span class=\"n\">diagram</span><span class=\"o\">]:</span><span class=\"w\"> </span><span class=\"n\">colimit</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"bp\">.</span><span class=\"n\">diagram</span><span class=\"w\"> </span><span class=\"bp\">‚ü∂</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">colimit</span><span class=\"bp\">.</span><span class=\"n\">desc</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"bp\">.</span><span class=\"n\">diagram</span><span class=\"w\"> </span><span class=\"bp\">‚ü®_</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"bp\">.</span><span class=\"n\">obj</span><span class=\"bp\">.</span><span class=\"n\">hom</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">aesop_cat</span><span class=\"bp\">‚ü©</span>\n\n<span class=\"kn\">namespace</span><span class=\"w\"> </span><span class=\"n\">Sheaf</span>\n\n<span class=\"kn\">noncomputable</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Cech</span><span class=\"bp\">.</span><span class=\"n\">complex</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">F</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Sheaf</span><span class=\"w\"> </span><span class=\"n\">J</span><span class=\"w\"> </span><span class=\"n\">AddCommGrp</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">v</span><span class=\"o\">})</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ùí∞</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">J</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"o\">[</span><span class=\"n\">HasColimit</span><span class=\"w\"> </span><span class=\"n\">ùí∞</span><span class=\"bp\">.</span><span class=\"n\">val</span><span class=\"bp\">.</span><span class=\"n\">arrows</span><span class=\"bp\">.</span><span class=\"n\">diagram</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"o\">[</span><span class=\"n\">HasWidePullbacks</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">CochainComplex</span><span class=\"w\"> </span><span class=\"n\">AddCommGrp</span><span class=\"w\"> </span><span class=\"n\">‚Ñï</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">AlgebraicTopology</span><span class=\"bp\">.</span><span class=\"n\">alternatingCofaceMapComplex</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">obj</span><span class=\"w\"> </span><span class=\"bp\">&lt;|</span>\n<span class=\"w\">    </span><span class=\"n\">Functor</span><span class=\"bp\">.</span><span class=\"n\">rightOp</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Arrow</span><span class=\"bp\">.</span><span class=\"n\">cechNerve</span><span class=\"w\"> </span><span class=\"bp\">&lt;|</span><span class=\"w\"> </span><span class=\"n\">ùí∞</span><span class=\"bp\">.</span><span class=\"n\">val</span><span class=\"bp\">.</span><span class=\"n\">arrows</span><span class=\"bp\">.</span><span class=\"n\">asMorphism</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">‚ãô</span><span class=\"w\"> </span><span class=\"c1\">-- I need one arrow here</span>\n<span class=\"w\">      </span><span class=\"n\">F</span><span class=\"bp\">.</span><span class=\"n\">val</span><span class=\"w\"> </span><span class=\"c1\">-- this is wrong too</span>\n\n<span class=\"kn\">end</span><span class=\"w\"> </span><span class=\"n\">Sheaf</span>\n\n<span class=\"kn\">end</span><span class=\"w\"> </span><span class=\"n\">CategoryTheory</span>\n</code></pre></div>",
        "id": 525391171,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1750704817
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"243562\">@Adam Topaz</span> do you think maybe we're missing some ingredients to make everything work smoothly?</p>",
        "id": 525391934,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1750705177
    },
    {
        "content": "<p>Isnt‚Äôt that <em>always</em> true? ;)</p>",
        "id": 525392356,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1750705331
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"243562\">@Adam Topaz</span> ok, but do you happen to know how this is done in the literature? Specifically, if I just have a topological space X and a cover {Ui -&gt; X}_i, how do I convert this into one morphism, so that I can then do the Cech nerve construction?</p>",
        "id": 525393675,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1750705944
    },
    {
        "content": "<p>If you have such a cover, you just take the coproduct of the <code>U_i</code>. The issue is that given such a cover, <code>{U_i}_i</code>, the sieve associated to it is the collection of <em>all morphisms</em> <code>Y -&gt; X</code> which factor through one of the <code>U_i</code>. The sheaf library has been set up primarily around Grothendieck topologies which are collections of sieves satisfying some properties, but we also have two other constructions, pretopologies and coverages, which let you construct a Grothendieck topology and prove the sheaf condition associated to that Grothendieck topology in a more direct way.</p>",
        "id": 525394579,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1750706368
    },
    {
        "content": "<p>See <code>Presieve.ofArrows</code> and <code>Sieve.generate</code></p>",
        "id": 525394714,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1750706429
    },
    {
        "content": "<p>The closest we have to what's done in the literature is going via a pretopology or a coverage, depending on whether your category happens to have pullbacks or not.</p>",
        "id": 525394805,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1750706475
    },
    {
        "content": "<p>(Here \"literature\" means \"the stacks project\")</p>",
        "id": 525394825,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1750706485
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"243562\">@Adam Topaz</span> the issue is that the \"coproduct\" goes outside of the category. Going back to my example of open subsets of a topological space, the coproduct is just union. You need to first extend the notion to \"open immersion from a different topological space\", and that already causes problems, because sheaves are usually defined only on open <strong>subsets</strong> of a space.</p>",
        "id": 525394998,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1750706563
    },
    {
        "content": "<p>The thing I worry is that this \"extending the functor\" construction has not been done</p>",
        "id": 525395052,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1750706577
    },
    {
        "content": "<p>No, the coproduct is the <em>disjoint</em> union in the category of topological spaces.</p>",
        "id": 525395085,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1750706588
    },
    {
        "content": "<p>you're using a different category here. note that i started with the category of \"open subsets of a topological space\"</p>",
        "id": 525395176,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1750706613
    },
    {
        "content": "<p>Okay, I see the issue now. You want to work in <code>Opens X</code> for some topological space <code>X</code>, right?</p>",
        "id": 525395386,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1750706718
    },
    {
        "content": "<p>Yes.</p>",
        "id": 525395426,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1750706738
    },
    {
        "content": "<p>The extension of the functor should just be global section of pullback sheaf</p>",
        "id": 525395546,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1750706799
    },
    {
        "content": "<p>So I would take a look at <a href=\"https://github.com/leanprover-community/mathlib4/blob/f0f62b727da0394080ccfad6a667cfc0ee62488e/Mathlib/CategoryTheory/Sites/Spaces.lean#L43-L54\">https://github.com/leanprover-community/mathlib4/blob/f0f62b727da0394080ccfad6a667cfc0ee62488e/Mathlib/CategoryTheory/Sites/Spaces.lean#L43-L54</a></p>",
        "id": 525395555,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1750706805
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"243562\">@Adam Topaz</span> That's very well, but I still don't think we've extended the sheaf yet... If you look at the definition of a sheaf:</p>\n<p><a href=\"https://github.com/leanprover-community/mathlib4/blob/f0f62b727da0394080ccfad6a667cfc0ee62488e/Mathlib/CategoryTheory/Sites/Sheaf.lean#L297-L302\">https://github.com/leanprover-community/mathlib4/blob/f0f62b727da0394080ccfad6a667cfc0ee62488e/Mathlib/CategoryTheory/Sites/Sheaf.lean#L297-L302</a></p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u‚ÇÅ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Category</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">v‚ÇÅ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">]</span>\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">J</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">GrothendieckTopology</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">)</span>\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u‚ÇÇ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Category</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">v‚ÇÇ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"o\">]</span>\n\n<span class=\"sd\">/-- The category of sheaves taking values in `A` on a grothendieck topology. -/</span>\n<span class=\"kn\">structure</span><span class=\"w\"> </span><span class=\"n\">Sheaf</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"sd\">/-- the underlying presheaf -/</span>\n<span class=\"w\">  </span><span class=\"n\">val</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"bp\">·µí·µñ</span><span class=\"w\"> </span><span class=\"bp\">‚•§</span><span class=\"w\"> </span><span class=\"n\">A</span>\n<span class=\"w\">  </span><span class=\"sd\">/-- the condition that the presheaf is a sheaf -/</span>\n<span class=\"w\">  </span><span class=\"n\">cond</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Presheaf</span><span class=\"bp\">.</span><span class=\"n\">IsSheaf</span><span class=\"w\"> </span><span class=\"n\">J</span><span class=\"w\"> </span><span class=\"n\">val</span>\n</code></pre></div>\n<p>You'll see that the sheaf is defined as a functor with domain being the original category, regardless of what the Grothendieck topology says</p>",
        "id": 525395895,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1750706968
    },
    {
        "content": "<p>and you still need to extend the functor</p>",
        "id": 525395903,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1750706973
    },
    {
        "content": "<p>so the sheaf on <code>Opens X</code>, as a functor, is still of type <code>(Opens X)·µí·µñ ‚•§ A</code>.</p>",
        "id": 525395999,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1750707016
    },
    {
        "content": "<p>In <a href=\"https://github.com/leanprover-community/mathlib4/compare/master...cech-experiment\">https://github.com/leanprover-community/mathlib4/compare/master...cech-experiment</a> I considered the category of \"formal coproducts\" of objects. This is the right generality (in some form or another, it was already in SGA 4). (In the construction I am linking here, I am working in a category <code>C</code>, but I am \"thinking\" of this category <code>C</code> as the category <code>Over X</code> for some object <code>X</code> in a category <code>D</code>, i.e. we consider families of objects <code>U i ‚ü∂ X</code>, and doing products in this category correspond to taking (wide) pullbacks over <code>X</code>. It may be easier to work directly in a category <code>Over X</code>.)</p>",
        "id": 525396206,
        "sender_full_name": "Jo√´l Riou",
        "timestamp": 1750707114
    },
    {
        "content": "<p>That sounds like the correct category!</p>",
        "id": 525396359,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1750707190
    },
    {
        "content": "<p>But the correct question is now, what am I doing here if you <span class=\"user-mention\" data-user-id=\"459699\">@Jo√´l Riou</span> already has a Cech experiment made?</p>",
        "id": 525396457,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1750707239
    },
    {
        "content": "<p>That's the correct category if you work with a coverage (or a pretopology) but if you want to work with a Grothendieck topology then you probably need to look at the free cocompletion (i.e. the category of presheaves of types)</p>",
        "id": 525396464,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1750707242
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"243562\">@Adam Topaz</span> could you point me somewhere?</p>",
        "id": 525396529,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1750707273
    },
    {
        "content": "<p>I'm not sure mathlib knows that the category of presheaves is the free cocompletion...</p>",
        "id": 525396577,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1750707291
    },
    {
        "content": "<p><a href=\"https://ncatlab.org/nlab/show/free+completion\">https://ncatlab.org/nlab/show/free+completion</a></p>",
        "id": 525396665,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1750707311
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110064\">Kenny Lau</span> <a href=\"#narrow/channel/335062-homology/topic/Roadmap.20for.20sheaf.20cohomology/near/525396457\">said</a>:</p>\n<blockquote>\n<p>But the correct question is now, what am I doing here if you <span class=\"user-mention silent\" data-user-id=\"459699\">Jo√´l Riou</span> already has a Cech experiment made?</p>\n</blockquote>\n<p>My code was only a draft posted here. I did not work more on this.</p>",
        "id": 525396733,
        "sender_full_name": "Jo√´l Riou",
        "timestamp": 1750707346
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"243562\">@Adam Topaz</span> ok, so that means I first need to extend the sheaf to Set^(Opens X)·µí·µñ, <del>presumably by the Yoneda embedding</del>?</p>",
        "id": 525397340,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1750707628
    },
    {
        "content": "<p>presumably I don't want a second Grothendieck topology on that cocompletion?</p>",
        "id": 525397430,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1750707684
    },
    {
        "content": "<p>and then I want to show that a Sieve on Opens X become one element in that new category</p>",
        "id": 525397526,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1750707725
    },
    {
        "content": "<p>I don't think you would even have to extend it. I think you can combine the \"evaluate at F\" and the \"extend\" into one step.</p>",
        "id": 525397541,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1750707735
    },
    {
        "content": "<p>For example, if you take a \"formal disjoint union\" <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>U</mi><mo>‚àê</mo><mi>V</mi></mrow><annotation encoding=\"application/x-tex\">U \\coprod V</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">U</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mop op-symbol small-op\" style=\"position:relative;top:0em;\">‚àê</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span></span></span></span>, you can view it as the formal colimit of the diagrams of opens which are contained in either <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>U</mi></mrow><annotation encoding=\"application/x-tex\">U</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">U</span></span></span></span> or <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>V</mi></mrow><annotation encoding=\"application/x-tex\">V</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span></span></span></span>. Now given a sheaf <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>F</mi></mrow><annotation encoding=\"application/x-tex\">F</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">F</span></span></span></span>, when you evaluate at this formal colimit, you would get the limit of the values of those opens.</p>",
        "id": 525397713,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1750707835
    },
    {
        "content": "<p>wait, I'm suspicious.</p>",
        "id": 525397816,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1750707894
    },
    {
        "content": "<p>yeah, that's not quite right because you can have some <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>W</mi></mrow><annotation encoding=\"application/x-tex\">W</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">W</span></span></span></span> mapping to both <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>U</mi></mrow><annotation encoding=\"application/x-tex\">U</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">U</span></span></span></span> and <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>V</mi></mrow><annotation encoding=\"application/x-tex\">V</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span></span></span></span> (and the code above with the presieve is probably wrong too)</p>",
        "id": 525398696,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1750708340
    },
    {
        "content": "<p>An important remark I would like to make is that we want a definition of the Cech cohomology (with respect to a family <code>U i ‚ü∂ X</code>) not just for sheaves, but more generally for presheaves. (A significant part of the formalization should not involve Grothendieck topologies at all!)</p>",
        "id": 525407449,
        "sender_full_name": "Jo√´l Riou",
        "timestamp": 1750712680
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"243562\">@Adam Topaz</span> <span class=\"user-mention\" data-user-id=\"459699\">@Jo√´l Riou</span> I did some more experimentations, and came up with this:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">universe</span><span class=\"w\"> </span><span class=\"n\">w'</span><span class=\"w\"> </span><span class=\"n\">w</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"n\">u</span>\n\n<span class=\"kn\">namespace</span><span class=\"w\"> </span><span class=\"n\">CategoryTheory</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Abelian</span><span class=\"w\"> </span><span class=\"n\">Limits</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Category</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">v</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">J</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">GrothendieckTopology</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">}</span>\n\n<span class=\"kn\">namespace</span><span class=\"w\"> </span><span class=\"n\">Sheaf</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">toCocompletion</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">F</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"bp\">·µí·µñ</span><span class=\"w\"> </span><span class=\"bp\">‚•§</span><span class=\"w\"> </span><span class=\"n\">AddCommGrp</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">u</span><span class=\"o\">})</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">C</span><span class=\"bp\">·µí·µñ</span><span class=\"w\"> </span><span class=\"bp\">‚•§</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"o\">)</span><span class=\"bp\">·µí·µñ</span><span class=\"w\"> </span><span class=\"bp\">‚•§</span><span class=\"w\"> </span><span class=\"n\">AddCommGrp</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">v</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">obj</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">limit</span><span class=\"w\"> </span><span class=\"gr\">sorry</span><span class=\"w\"> </span><span class=\"c\">/-</span><span class=\"cm\"> I tried to come up with something like, take limit of a diagram where</span>\n<span class=\"cm\">    every map `V ‚ü∂ U` corresponds to a new map `F(U) ‚ü∂ F(V)`, and something like, take</span>\n<span class=\"cm\">    `X(U)` copies of `U`, but couldn't really make it work. -/</span>\n<span class=\"w\">  </span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n\n<span class=\"kn\">noncomputable</span><span class=\"w\"> </span><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">sieveToCocompletion</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ùí∞</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">J</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"bp\">·µí·µñ</span><span class=\"w\"> </span><span class=\"bp\">‚•§</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">obj</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">ùí∞</span><span class=\"bp\">.</span><span class=\"n\">val</span><span class=\"bp\">.</span><span class=\"n\">arrows</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Y</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"bp\">.</span><span class=\"n\">unop</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">‚ü®</span><span class=\"n\">f</span><span class=\"bp\">.</span><span class=\"n\">unop</span><span class=\"w\"> </span><span class=\"bp\">‚â´</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"bp\">.</span><span class=\"m\">1</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">ùí∞</span><span class=\"bp\">.</span><span class=\"n\">val</span><span class=\"bp\">.</span><span class=\"n\">downward_closed</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"bp\">.</span><span class=\"n\">unop</span><span class=\"bp\">‚ü©</span>\n\n<span class=\"kn\">noncomputable</span><span class=\"w\"> </span><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">sieveToCocompletionArrow</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ùí∞</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">J</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Arrow</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">C</span><span class=\"bp\">·µí·µñ</span><span class=\"w\"> </span><span class=\"bp\">‚•§</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">left</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">sieveToCocompletion</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"n\">ùí∞</span>\n<span class=\"w\">  </span><span class=\"n\">right</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">yoneda</span><span class=\"bp\">.</span><span class=\"n\">obj</span><span class=\"w\"> </span><span class=\"n\">X</span>\n<span class=\"w\">  </span><span class=\"n\">hom</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"w\"> </span><span class=\"n\">app</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"bp\">.</span><span class=\"m\">1</span><span class=\"w\"> </span><span class=\"o\">}</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Cech</span><span class=\"bp\">.</span><span class=\"n\">complex</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">F</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Sheaf</span><span class=\"w\"> </span><span class=\"n\">J</span><span class=\"w\"> </span><span class=\"n\">AddCommGrp</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">v</span><span class=\"o\">})</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ùí∞</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">J</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">CochainComplex</span><span class=\"w\"> </span><span class=\"n\">AddCommGrp</span><span class=\"w\"> </span><span class=\"n\">‚Ñï</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">AlgebraicTopology</span><span class=\"bp\">.</span><span class=\"n\">alternatingCofaceMapComplex</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">obj</span><span class=\"w\"> </span><span class=\"bp\">&lt;|</span>\n<span class=\"w\">    </span><span class=\"n\">Functor</span><span class=\"bp\">.</span><span class=\"n\">rightOp</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Arrow</span><span class=\"bp\">.</span><span class=\"n\">cechNerve</span><span class=\"w\"> </span><span class=\"bp\">&lt;|</span><span class=\"w\"> </span><span class=\"n\">sieveToCocompletionArrow</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"n\">ùí∞</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">‚ãô</span>\n<span class=\"w\">      </span><span class=\"o\">(</span><span class=\"n\">toCocompletion</span><span class=\"w\"> </span><span class=\"n\">F</span><span class=\"bp\">.</span><span class=\"n\">val</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"c1\">-- I should use one universe?</span>\n\n\n<span class=\"kn\">end</span><span class=\"w\"> </span><span class=\"n\">Sheaf</span>\n\n<span class=\"kn\">end</span><span class=\"w\"> </span><span class=\"n\">CategoryTheory</span>\n</code></pre></div>",
        "id": 525409875,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1750714021
    },
    {
        "content": "<p>perhaps you'll be able to fill in the <code>sorry</code>s?</p>",
        "id": 525409925,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1750714045
    },
    {
        "content": "<p>Sure, but even if you don't apply the construction to a sheaf but just to a presheaf, you still need to decide what it means to be a \"cover\". If we have a Grothedieck topology <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>J</mi></mrow><annotation encoding=\"application/x-tex\">J</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.09618em;\">J</span></span></span></span>, we can say that a morphism <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi><mo>:</mo><mi>X</mi><mo>‚Üí</mo><mi>Y</mi></mrow><annotation encoding=\"application/x-tex\">f : X \\to Y</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">:</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">‚Üí</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">Y</span></span></span></span> is a cover if the sieve it generates is a covering sieve, and once you have the notion of a morphism being a cover, you get the notion of a hypercover. What I don't know is under what assumptions there are \"enough\" such hypercovers so that (hyper)Cech-cohomology agrees with sheaf cohomology for the given topology.</p>",
        "id": 525409995,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1750714083
    },
    {
        "content": "<p>my desired application is to schemes</p>",
        "id": 525410076,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1750714117
    },
    {
        "content": "<p>but even in schemes there are many Grothendieck topologies (etale, crystalline, flat, v, ...)</p>",
        "id": 525410115,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1750714143
    },
    {
        "content": "<p>true</p>",
        "id": 525410195,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1750714193
    },
    {
        "content": "<p>So am I on the right track with the code above?</p>",
        "id": 525410318,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1750714262
    },
    {
        "content": "<p>For Cech-cohomology, \"covers\" means any family of maps <code>U i ‚ü∂ X</code> (see for example, SGA 4 V 2.3.5). What is remarkable with Cech-cohomology is that it has an interpretation as <code>Ext</code>-group in the category of abelian <em>presheaves</em> (SGA 4 V 2.3.4) (in particular, it only depends on the sieve generated by the <code>U i ‚ü∂ X</code>), but we certainly want to formalize more details...</p>",
        "id": 525411045,
        "sender_full_name": "Jo√´l Riou",
        "timestamp": 1750714701
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110064\">Kenny Lau</span> <a href=\"#narrow/channel/335062-homology/topic/Roadmap.20for.20sheaf.20cohomology/near/525410318\">said</a>:</p>\n<blockquote>\n<p>So am I on the right track with the code above?</p>\n</blockquote>\n<p>I am not exactly sure what this is, but there should not be <code>J : GrothendieckTopology C</code> anywhere in the first definitions.</p>",
        "id": 525411216,
        "sender_full_name": "Jo√´l Riou",
        "timestamp": 1750714806
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"459699\">Jo√´l Riou</span> <a href=\"#narrow/channel/335062-homology/topic/Roadmap.20for.20sheaf.20cohomology/near/525411216\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"110064\">Kenny Lau</span> <a href=\"#narrow/channel/335062-homology/topic/Roadmap.20for.20sheaf.20cohomology/near/525410318\">said</a>:</p>\n<blockquote>\n<p>So am I on the right track with the code above?</p>\n</blockquote>\n<p>I am not exactly sure what this is, but there should not be <code>J : GrothendieckTopology C</code> anywhere in the first definitions.</p>\n</blockquote>\n<p>I'm trying to extend a sheaf to the co-completion, so that I can turn a cover into one arrow, and then apply Cech nerve</p>",
        "id": 525411486,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1750714982
    },
    {
        "content": "<p>a cover {U_i -&gt; X}_i becomes one arrow in the co-completion, using either the formal coproducts in your Cech experiment, or Adam's provided cocompletion as C^op =&gt; Set</p>",
        "id": 525411546,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1750715020
    },
    {
        "content": "<p>is this correct?</p>",
        "id": 525411565,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1750715035
    },
    {
        "content": "<p>This seems unnecessarily complicated to me, and it is probably wrong because your definition depends on a sieve, even though in the Cech-complex, the summands are indexed by types which are related to index type of a family of maps. (These index types appear quite clearly in my code...)</p>",
        "id": 525412455,
        "sender_full_name": "Jo√´l Riou",
        "timestamp": 1750715585
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"459699\">Jo√´l Riou</span> <a href=\"#narrow/channel/335062-homology/topic/Roadmap.20for.20sheaf.20cohomology/near/525412455\">said</a>:</p>\n<blockquote>\n<p>This seems unnecessarily complicated to me, and it is probably wrong because your definition depends on a sieve, even though in the Cech-complex, the summands are summands are indexed by types which are related to index type of a family of maps. (These index types appear quite clearly in my code...)</p>\n</blockquote>\n<p>If an open subset Ui -&gt; X is part of the sieve, then the sieve necessarily also contains all those V -&gt; Ui, which are useless information; I dealt with this useless information by considering the limit of those F(Ui) -&gt; F(V), which should be just F(Ui) itself.</p>",
        "id": 525412830,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1750715817
    },
    {
        "content": "<p>I see that your code in the Cech experiment does not care about these other useless information</p>",
        "id": 525412986,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1750715900
    },
    {
        "content": "<p>which is of course equivalent, but I just thought that people might complain if we don't prove stuff in the highest generality and always use the higher generalities to derive the lower generalities</p>",
        "id": 525413064,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1750715961
    },
    {
        "content": "<p>in particular, this means that people might complain if we don't build the Cech cohomology out of the Cech nerve</p>",
        "id": 525413097,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1750715983
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110064\">Kenny Lau</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Cech.20Cohomology/near/525238092\">said</a>:</p>\n<blockquote>\n<p>Hello, I have come from 2 years in the future to resurrect this thread. So, as noted above, we have all the building blocks for Cech cohomology (?)</p>\n<ol>\n<li>We have the ƒåech nerve <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/AlgebraicTopology/CechNerve.html#CategoryTheory.Arrow.cechNerve\">CategoryTheory.Arrow.cechNerve</a></li>\n</ol>\n<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mo>‚ãØ</mo><mtext>¬†</mtext><mstyle scriptlevel=\"1\"><mtable rowspacing=\"0.1em\" columnspacing=\"0.2778em\"><mtr><mtd><mstyle scriptlevel=\"1\" displaystyle=\"false\"><mo lspace=\"0em\" rspace=\"0em\">‚áâ</mo></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"1\" displaystyle=\"false\"><mo lspace=\"0em\" rspace=\"0em\">‚áâ</mo></mstyle></mtd></mtr></mtable></mstyle><mtext>¬†</mtext><mi>U</mi><msub><mo>√ó</mo><mi>X</mi></msub><mi>U</mi><msub><mo>√ó</mo><mi>X</mi></msub><mi>U</mi><mo>‚áõ</mo><mi>U</mi><msub><mo>√ó</mo><mi>X</mi></msub><mi>U</mi><mo>‚áâ</mo><mi>U</mi></mrow><annotation encoding=\"application/x-tex\">\\cdots ~\\begin{smallmatrix}\\rightrightarrows \\\\ \\rightrightarrows\\end{smallmatrix}~ U \\times_X U \\times_X U \\Rrightarrow U \\times_X U \\rightrightarrows U</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.305em;vertical-align:-0.4025em;\"></span><span class=\"minner\">‚ãØ</span><span class=\"mspace nobreak\">¬†</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-c\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9025em;\"><span style=\"top:-3.13em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"mord mtight sizing reset-size6 size3\"><span class=\"mrel amsrm mtight\">‚áâ</span></span></span><span style=\"top:-2.4775em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"mord mtight sizing reset-size6 size3\"><span class=\"mrel amsrm mtight\">‚áâ</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4025em;\"><span></span></span></span></span></span></span></span><span class=\"mspace nobreak\">¬†</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">U</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\"><span class=\"mbin\">√ó</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.07847em;\">X</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">U</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\"><span class=\"mbin\">√ó</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.07847em;\">X</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.82em;vertical-align:-0.1367em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">U</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel amsrm\">‚áõ</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">U</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\"><span class=\"mbin\">√ó</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.07847em;\">X</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8641em;vertical-align:-0.1808em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">U</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel amsrm\">‚áâ</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">U</span></span></span></span></span></p>\n<ol start=\"2\">\n<li>Then just by the sheaf <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"script\">F</mi></mrow><annotation encoding=\"application/x-tex\">\\mathcal{F}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathcal\" style=\"margin-right:0.09931em;\">F</span></span></span></span> (on the site? extended to the site?) being a functor, we get a <strong>co</strong>chain complex:</li>\n</ol>\n<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi mathvariant=\"script\">F</mi><mo stretchy=\"false\">(</mo><mi>U</mi><mo stretchy=\"false\">)</mo><mo>‚áâ</mo><mi mathvariant=\"script\">F</mi><mo stretchy=\"false\">(</mo><mi>U</mi><msub><mo>√ó</mo><mi>X</mi></msub><mi>U</mi><mo stretchy=\"false\">)</mo><mo>‚áõ</mo><mi mathvariant=\"script\">F</mi><mo stretchy=\"false\">(</mo><mi>U</mi><msub><mo>√ó</mo><mi>X</mi></msub><mi>U</mi><msub><mo>√ó</mo><mi>X</mi></msub><mi>U</mi><mo stretchy=\"false\">)</mo><mtext>¬†</mtext><mstyle scriptlevel=\"1\"><mtable rowspacing=\"0.1em\" columnspacing=\"0.2778em\"><mtr><mtd><mstyle scriptlevel=\"1\" displaystyle=\"false\"><mo lspace=\"0em\" rspace=\"0em\">‚áâ</mo></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"1\" displaystyle=\"false\"><mo lspace=\"0em\" rspace=\"0em\">‚áâ</mo></mstyle></mtd></mtr></mtable></mstyle><mtext>¬†</mtext><mo>‚ãØ</mo></mrow><annotation encoding=\"application/x-tex\">\\mathcal{F}(U) \\rightrightarrows \\mathcal{F}(U \\times_X U) \\Rrightarrow \\mathcal{F}(U \\times_X U \\times_X U) ~\\begin{smallmatrix}\\rightrightarrows \\\\ \\rightrightarrows\\end{smallmatrix}~ \\cdots</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathcal\" style=\"margin-right:0.09931em;\">F</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">U</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel amsrm\">‚áâ</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathcal\" style=\"margin-right:0.09931em;\">F</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">U</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\"><span class=\"mbin\">√ó</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.07847em;\">X</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">U</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel amsrm\">‚áõ</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathcal\" style=\"margin-right:0.09931em;\">F</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">U</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\"><span class=\"mbin\">√ó</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.07847em;\">X</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">U</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\"><span class=\"mbin\">√ó</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.07847em;\">X</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.305em;vertical-align:-0.4025em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">U</span><span class=\"mclose\">)</span><span class=\"mspace nobreak\">¬†</span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-c\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9025em;\"><span style=\"top:-3.13em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"mord mtight sizing reset-size6 size3\"><span class=\"mrel amsrm mtight\">‚áâ</span></span></span><span style=\"top:-2.4775em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"mord mtight sizing reset-size6 size3\"><span class=\"mrel amsrm mtight\">‚áâ</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4025em;\"><span></span></span></span></span></span></span></span><span class=\"mspace nobreak\">¬†</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">‚ãØ</span></span></span></span></span></p>\n<p>, which finally brings us to an abelian category (assuming <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"script\">F</mi></mrow><annotation encoding=\"application/x-tex\">\\mathcal{F}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathcal\" style=\"margin-right:0.09931em;\">F</span></span></span></span> takes value in an abelian category).</p>\n<ol start=\"3\">\n<li>Then by <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/AlgebraicTopology/AlternatingFaceMapComplex.html#AlgebraicTopology.alternatingCofaceMapComplex\">AlgebraicTopology.alternatingCofaceMapComplex</a> we bring it to a cochain complex:</li>\n</ol>\n<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi mathvariant=\"script\">F</mi><mo stretchy=\"false\">(</mo><mi>U</mi><mo stretchy=\"false\">)</mo><mo>‚Üí</mo><mi mathvariant=\"script\">F</mi><mo stretchy=\"false\">(</mo><mi>U</mi><msub><mo>√ó</mo><mi>X</mi></msub><mi>U</mi><mo stretchy=\"false\">)</mo><mo>‚Üí</mo><mi mathvariant=\"script\">F</mi><mo stretchy=\"false\">(</mo><mi>U</mi><msub><mo>√ó</mo><mi>X</mi></msub><mi>U</mi><msub><mo>√ó</mo><mi>X</mi></msub><mi>U</mi><mo stretchy=\"false\">)</mo><mo>‚Üí</mo><mo>‚ãØ</mo></mrow><annotation encoding=\"application/x-tex\">\\mathcal{F}(U) \\to \\mathcal{F}(U \\times_X U) \\to \\mathcal{F}(U \\times_X U \\times_X U) \\to \\cdots</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathcal\" style=\"margin-right:0.09931em;\">F</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">U</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">‚Üí</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathcal\" style=\"margin-right:0.09931em;\">F</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">U</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\"><span class=\"mbin\">√ó</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.07847em;\">X</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">U</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">‚Üí</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathcal\" style=\"margin-right:0.09931em;\">F</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">U</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\"><span class=\"mbin\">√ó</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.07847em;\">X</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">U</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\"><span class=\"mbin\">√ó</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.07847em;\">X</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">U</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">‚Üí</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.313em;\"></span><span class=\"minner\">‚ãØ</span></span></span></span></span></p>\n<ol start=\"4\">\n<li>This is the ƒåech (cochain) complex associated to a cover <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>U</mi><mo>‚Üí</mo><mi>X</mi></mrow><annotation encoding=\"application/x-tex\">U \\to X</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">U</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">‚Üí</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span></span></span></span> and sheaf <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"script\">F</mi></mrow><annotation encoding=\"application/x-tex\">\\mathcal{F}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathcal\" style=\"margin-right:0.09931em;\">F</span></span></span></span>. Its cohomology is the ƒåech cohomology.</li>\n</ol>\n<p>Is this correct? Then my next step would be to make it finite, by considering the alternating ƒåech cohomology as well as the ordered ƒåech cohomology. Before that I would also translate it back to the site of open subsets (rather than open covers).</p>\n</blockquote>",
        "id": 525413148,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1750716010
    },
    {
        "content": "<p>What do you think?</p>",
        "id": 525413256,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1750716062
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110064\">Kenny Lau</span> <a href=\"#narrow/channel/335062-homology/topic/Roadmap.20for.20sheaf.20cohomology/near/525413097\">said</a>:</p>\n<blockquote>\n<p>in particular, this means that people might complain if we don't build the Cech cohomology out of the Cech nerve</p>\n</blockquote>\n<p>The definition in SGA 4 does not use \"the Cech nerve\". It is a linearized version, which is very close to the definition I made. I would argue that it is easier to manipulate objects in <code>FormalCoproduct</code> rather than presheaves of sets which happen to be isomorphic to a coproduct of representables; this is one of the reasons for this choice in my code.</p>",
        "id": 525413705,
        "sender_full_name": "Jo√´l Riou",
        "timestamp": 1750716373
    },
    {
        "content": "<p>With your notations,</p>\n<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mo>‚ãØ</mo><mtext>¬†</mtext><mstyle scriptlevel=\"1\"><mtable rowspacing=\"0.1em\" columnspacing=\"0.2778em\"><mtr><mtd><mstyle scriptlevel=\"1\" displaystyle=\"false\"><mo lspace=\"0em\" rspace=\"0em\">‚áâ</mo></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"1\" displaystyle=\"false\"><mo lspace=\"0em\" rspace=\"0em\">‚áâ</mo></mstyle></mtd></mtr></mtable></mstyle><mtext>¬†</mtext><mi>U</mi><msub><mo>√ó</mo><mi>X</mi></msub><mi>U</mi><msub><mo>√ó</mo><mi>X</mi></msub><mi>U</mi><mo>‚áõ</mo><mi>U</mi><msub><mo>√ó</mo><mi>X</mi></msub><mi>U</mi><mo>‚áâ</mo><mi>U</mi></mrow><annotation encoding=\"application/x-tex\">\\cdots ~\\begin{smallmatrix}\\rightrightarrows \\\\ \\rightrightarrows\\end{smallmatrix}~ U \\times_X U \\times_X U \\Rrightarrow U \\times_X U \\rightrightarrows U</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.305em;vertical-align:-0.4025em;\"></span><span class=\"minner\">‚ãØ</span><span class=\"mspace nobreak\">¬†</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-c\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9025em;\"><span style=\"top:-3.13em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"mord mtight sizing reset-size6 size3\"><span class=\"mrel amsrm mtight\">‚áâ</span></span></span><span style=\"top:-2.4775em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"mord mtight sizing reset-size6 size3\"><span class=\"mrel amsrm mtight\">‚áâ</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4025em;\"><span></span></span></span></span></span></span></span><span class=\"mspace nobreak\">¬†</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">U</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\"><span class=\"mbin\">√ó</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.07847em;\">X</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">U</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\"><span class=\"mbin\">√ó</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.07847em;\">X</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.82em;vertical-align:-0.1367em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">U</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel amsrm\">‚áõ</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">U</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\"><span class=\"mbin\">√ó</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.07847em;\">X</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8641em;vertical-align:-0.1808em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">U</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel amsrm\">‚áâ</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">U</span></span></span></span></span></p>\n<p>my understanding is that <code>U</code> is the presheaf of types that is the coproduct of the presheaves represented by the <code>U i ‚ü∂ X</code> in a family of morphisms. Then, <code>U \\times_X U</code> identifies to a coproduct of the presheaves represented by the fiber products of <code>U i</code> and <code>U j</code> over <code>X</code>, etc. We want to evaluate this on a presheaf with values in a category <code>A</code>. With my approach, these <code>U</code>, <code>U \\times_X U</code>, etc correspond directly to objects in <code>FormalCoproduct</code> corresponding to the family of the <code>U i</code>, or the family of the fiber products of the <code>U i</code> and <code>U j</code>, etc, which makes it easy to evaluate on any presheaf (provided the target category has suitable products).</p>",
        "id": 525414328,
        "sender_full_name": "Jo√´l Riou",
        "timestamp": 1750716866
    },
    {
        "content": "<p>I do prefer your approach, in general I like concrete definitions; but I'm just saying, there might be people who insist that Mathlib4 has to derive the most general stuff etc.</p>",
        "id": 525414405,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1750716915
    },
    {
        "content": "<p>And <span class=\"user-mention\" data-user-id=\"243562\">@Adam Topaz</span> above seems to believe that it's possible to do it abstractly via the cocompletion?</p>",
        "id": 525414428,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1750716935
    },
    {
        "content": "<p>Can you explain how my definition is not general enough?</p>",
        "id": 525414553,
        "sender_full_name": "Jo√´l Riou",
        "timestamp": 1750717029
    },
    {
        "content": "<p>People might say that there might be some way to use Cech nerve, and also we have an existing notion of covering called \"Grothendieck topology\" which you abandonned (which I agree with!), tho as I said I much prefer your approach without the unnecessary extra sets in the covering required by the downwards closure axiom</p>",
        "id": 525414643,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1750717087
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"459699\">@Jo√´l Riou</span> anyway, shall I take your code and make it into a PR?</p>",
        "id": 525414902,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1750717304
    },
    {
        "content": "<p>I am not \"abandonning\" Grothendieck topology: I am only saying it is irrelevant when one wants to define the Cech cohomology of a presheaf with respect to a family of morphisms <code>U i ‚ü∂ X</code>, but of course it shall have interesting properties basically only when it generates a covering sieve with respect to a Grothendieck topology. Requiring that the family \"is\" a sieve is not at all a good idea. Also, the notion of \"presieve\" is not great here because in the case of an open covering of a topological space <code>X</code> by two open subsets <code>U</code> and <code>V</code>, we may still want to use an index type with two elements even if <code>U=V</code>!</p>",
        "id": 525415437,
        "sender_full_name": "Jo√´l Riou",
        "timestamp": 1750717645
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110064\">Kenny Lau</span> <a href=\"#narrow/channel/335062-homology/topic/Roadmap.20for.20sheaf.20cohomology/near/525414902\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"459699\">Jo√´l Riou</span> anyway, shall I take your code and make it into a PR?</p>\n</blockquote>\n<p>Of course, you may freely reuse this code. It may have to be reorganised in several files though.</p>",
        "id": 525415509,
        "sender_full_name": "Jo√´l Riou",
        "timestamp": 1750717692
    },
    {
        "content": "<p>By the way, what's a use case where there is no terminal object?</p>",
        "id": 525416565,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1750718376
    },
    {
        "content": "<p>the prismatic site</p>",
        "id": 525416801,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1750718535
    },
    {
        "content": "<p>There is also the infinitesimal site</p>",
        "id": 525489396,
        "sender_full_name": "Calle S√∂nne",
        "timestamp": 1750761958
    },
    {
        "content": "<p>Or the crystalline one.</p>",
        "id": 525489497,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1750762005
    },
    {
        "content": "<p>For a simple example, can one make sense of an affine site on a separated non-affine scheme? Then a disjoint union of affines covering the scheme should give you a weakly final object so you can compute cohomology using the cech nerve?</p>",
        "id": 525492426,
        "sender_full_name": "Calle S√∂nne",
        "timestamp": 1750763152
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"243562\">Adam Topaz</span> <a href=\"#narrow/channel/335062-homology/topic/Roadmap.20for.20sheaf.20cohomology/near/525396577\">said</a>:</p>\n<blockquote>\n<p>I'm not sure mathlib knows that the category of presheaves is the free cocompletion...</p>\n</blockquote>\n<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/CategoryTheory/Limits/Presheaf.html#CategoryTheory.Presheaf.uniqueExtensionAlongYoneda\">https://leanprover-community.github.io/mathlib4_docs/Mathlib/CategoryTheory/Limits/Presheaf.html#CategoryTheory.Presheaf.uniqueExtensionAlongYoneda</a> this, or something nearby, should be that statement</p>",
        "id": 525574717,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1750790197
    },
    {
        "content": "<p>Yeah, that sounds right! Thanks!</p>",
        "id": 525574975,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1750790260
    },
    {
        "content": "<p>so i realised that formal products and formal coproducts are exactly the same lol</p>",
        "id": 525675211,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1750845148
    },
    {
        "content": "<p>Adam suggested naming it <code>Indexed C</code> instead.</p>",
        "id": 525678528,
        "sender_full_name": "Jo√´l Riou",
        "timestamp": 1750846211
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"459699\">@Jo√´l Riou</span> I'll do that, thanks; I can't quite figure out what <code>eval</code> should look like for formal products, would you have any idea?</p>",
        "id": 525680223,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1750846810
    },
    {
        "content": "<p>i think i would actually have to flip the direction? so it's like coeval : (A =&gt; C) =&gt; (A =&gt; FormalProduct C)?</p>",
        "id": 525681086,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1750847165
    },
    {
        "content": "<p>no that doesn't sound right either</p>",
        "id": 525681305,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1750847253
    },
    {
        "content": "<p>also i know that your file didn't make it into a functor and that's probably because it's not possible unless there's some finite fibre assumption</p>",
        "id": 525681504,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1750847332
    },
    {
        "content": "<p>what if I put that assumption into the <code>Hom</code>?</p>",
        "id": 525681543,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1750847349
    },
    {
        "content": "<p>I defined <code>(FormalCoproduct.{w} C)·µí·µñ ‚•§ (C·µí·µñ ‚•§ A) ‚•§ A</code> (which, flipped, would be <code>(C·µí·µñ ‚•§ A) ‚•§ ((FormalCoproduct.{w} C)·µí·µñ ‚•§ A)</code>), and I also defined <code>(J·µí·µñ ‚•§ FormalCoproduct.{w} C)·µí·µñ ‚•§ (C·µí·µñ ‚•§ A) ‚•§ (J ‚•§ A) </code>.</p>",
        "id": 525682944,
        "sender_full_name": "Jo√´l Riou",
        "timestamp": 1750847924
    },
    {
        "content": "<p>I'm still not sure I actually understand the difference between formal products and formal coproducts lol</p>",
        "id": 525683257,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1750848054
    },
    {
        "content": "<p>oh, should the Hom be reversed?</p>",
        "id": 525683377,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1750848107
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">structure</span><span class=\"w\"> </span><span class=\"n\">Hom</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"n\">Y</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">FormalProduct</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">w</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Y</span><span class=\"bp\">.</span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">I</span>\n<span class=\"w\">  </span><span class=\"n\">œÜ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Y</span><span class=\"bp\">.</span><span class=\"n\">I</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">obj</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">‚ü∂</span><span class=\"w\"> </span><span class=\"n\">Y</span><span class=\"bp\">.</span><span class=\"n\">obj</span><span class=\"w\"> </span><span class=\"n\">i</span>\n\n<span class=\"kn\">structure</span><span class=\"w\"> </span><span class=\"n\">Hom'</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"n\">Y</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">FormalCoproduct</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">w</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">Y</span><span class=\"bp\">.</span><span class=\"n\">I</span>\n<span class=\"w\">  </span><span class=\"n\">œÜ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">I</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">obj</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">‚ü∂</span><span class=\"w\"> </span><span class=\"n\">Y</span><span class=\"bp\">.</span><span class=\"n\">obj</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 525683524,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1750848157
    },
    {
        "content": "<p>something like this?</p>",
        "id": 525683532,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1750848159
    },
    {
        "content": "<p>yeah, that looks right!</p>",
        "id": 525683604,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1750848195
    },
    {
        "content": "<p>\"Formal products\" seem to be irrelevant for the formalization of Cech cohomology.</p>",
        "id": 525684278,
        "sender_full_name": "Jo√´l Riou",
        "timestamp": 1750848453
    },
    {
        "content": "<p>yes, but i'll define it nevertheless</p>",
        "id": 525684410,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1750848501
    },
    {
        "content": "<p>so now I won't use <code>Indexed</code> because they actually have different category structure</p>",
        "id": 525684450,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1750848513
    },
    {
        "content": "<p>If you just throw random definitions which are not supported by the mathematical literature and have no known applications, the reviewers/maintainers may rightfully complain.</p>\n<p>The reason for the definition of morphisms in <code>FormalCoproduct C</code> is that if <code>X</code> is thought as the formal coproduct of the <code>X i</code> and <code>Y</code> the same for the <code>Y j</code>, we are interested in understanding what are the morphisms in the category of presheaves from the coproduct of the Yoneda presheaves of <code>X i</code> to the coproduct of the Yoneda presheaves of the <code>Y j</code>. We see that it is the data, for each <code>i</code>, of the \"section\" over <code>X i</code> of the coproduct presheaf of the Yoneda presheaves of the <code>Y j</code>, and this is the choice of an index <code>j</code> and a map from <code>X i</code> to <code>Y j</code>. (In other words, when the universes satisfy certain conditions, there is a \"coproduct\" functor from <code>FormalCoproduct C</code> to presheaves that is fully faithful. Part of the reason for using <code>FormalCoproduct</code> instead of the cocompletion approach is that the universes are not always perfectly aligned...)</p>\n<p>The other category you suggest defining may be the opposite category of <code>FormalCoproduct</code> of the opposite category. If there is no specific application for it, we do not need this in mathlib.</p>",
        "id": 525686111,
        "sender_full_name": "Jo√´l Riou",
        "timestamp": 1750849051
    },
    {
        "content": "<p>and the maintainers won't complain if I make one definition without the dual? like sometimes i get confused by mathlib culture</p>",
        "id": 525686835,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1750849283
    },
    {
        "content": "<p>I do not know what is co-Cech homology ;-)</p>",
        "id": 525687096,
        "sender_full_name": "Jo√´l Riou",
        "timestamp": 1750849369
    },
    {
        "content": "<p>no, I just mean formal product</p>",
        "id": 525687406,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1750849493
    },
    {
        "content": "<p><a href=\"https://ncatlab.org/nlab/show/free+cartesian+category\">https://ncatlab.org/nlab/show/free+cartesian+category</a></p>",
        "id": 525687653,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1750849583
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/26402\">#26402</a> created</p>",
        "id": 525688513,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1750849939
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110064\">Kenny Lau</span> <a href=\"#narrow/channel/335062-homology/topic/Roadmap.20for.20sheaf.20cohomology/near/525686835\">said</a>:</p>\n<blockquote>\n<p>and the maintainers won't complain if I make one definition without the dual? like sometimes i get confused by mathlib culture</p>\n</blockquote>\n<p>I think that this is a very interesting question. When I first learnt about formalization I was very keen on the idea of making every single definition in small steps and creating a full API of everything. But later on I understood that definitions which don't have a point can actually obscure things, slow the system down, create an unnecessary maintenance burden and so on. I think that right at the bottom it is important that we have semigroups and nonassociative non-unital rings or what have you (and as you know we had these things years ago) -- but these things are being used by people. When we're talking about Grassmannians etc, and general more abstract objects, I think there's an art in defining just the right amount of stuff. Every new <code>def</code> and <code>structure</code> gives us a chance to hide a bunch of data behind something which Lean will not unfold by default, and I think there's an art to deciding where these defs go in order to make lean's life easier. In particular I think that at this kind of level the answer is definitely not \"make as many new defs as you can think of\" (which is is contrast to what's going on at the very bottom, where this seems to be a profitable approach).</p>",
        "id": 525693739,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1750851948
    },
    {
        "content": "<p>Another thing is that we do not always get the right design and the best phrasing of lemmas/definitions immediately. If we need 1000 lines of code or so to make a good API for a certain notion (e.g. left Kan extension and right derived functors), it may be appropriate to first test extensively the development of the notion on one side, and only when we are happy with it, dualize the results. Doing both API immediately can be very painful if we have to roll back any change. (Also, in terms of review process, if we have a good API for \"left stuff\", we can create a PR saying \"In this PR, we dualize the results from the file <code>*.*....</code> about left stuff to right stuff\", e.g. <a href=\"https://github.com/leanprover-community/mathlib4/pull/14238\">https://github.com/leanprover-community/mathlib4/pull/14238</a> which makes the review process very easy...)</p>",
        "id": 525696483,
        "sender_full_name": "Jo√´l Riou",
        "timestamp": 1750852648
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"459699\">Jo√´l Riou</span> <a href=\"#narrow/channel/335062-homology/topic/Roadmap.20for.20sheaf.20cohomology/near/525687096\">said</a>:</p>\n<blockquote>\n<p>I do not know what is co-Cech homology ;-)</p>\n</blockquote>\n<p>I don't know either, but \"cosheaves\" is a thing that people seriously think about.</p>",
        "id": 525723990,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1750861137
    },
    {
        "content": "<p><strong><a href=\"https://github.com/robin-carlier\">robin-carlier</a></strong>¬†<a href=\"https://github.com/leanprover-community/mathlib4/pull/26402#discussion_r2166956122\">3 hours ago</a></p>\n<blockquote>\n<p>Please do not state this in terms of opposites. Rather, you should assume¬†<code>[‚àÄ (I : Type w), HasCoproductsOfShape I A]</code>, and use¬†<code>‚àê</code>, and have the functor be out of¬†<code>C</code>.</p>\n</blockquote>\n<p><span class=\"user-mention\" data-user-id=\"286014\">@Robin Carlier</span> I'm intentionally using opposites because we're extending presheaves to the formal coproduct (also note that I'm mentally translating your 5 points to formal coproducts because I've removed formal products)</p>",
        "id": 525769643,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1750876718
    },
    {
        "content": "<p>I have done half of 1 and all of 2 in my local copy</p>",
        "id": 525769768,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1750876765
    },
    {
        "content": "<p>Maintainer‚Äôs word seems to be that we don‚Äôt want to dualize definitions and get the dual version right away, I‚Äôm not a fan of this but this is not my call to make and so be it.</p>\n<p>I would still really prefer if you'd provide a statement not in terms of opposite, this does not prevent also providing one in terms of opposite if needed.</p>\n<p>This category is the free category on <code>C</code> with coproducts, its universal property is that restriction along the inclusion induces an equivalence with coproduct-preserving functors when the target category has coproducts. It feels just plain wrong to have to go through the gymnastic of opposite categories (which are, in general, a pain) to state and use that universal property.<br>\nI understand the  need of the use case of extending presheaves, but to me this does not warrant not stating the universal property in its most natural way.</p>",
        "id": 525775003,
        "sender_full_name": "Robin Carlier",
        "timestamp": 1750879209
    },
    {
        "content": "<p>Regarding the use of \"formal products\", the case of formal finite products (which is yet an other definition than what we have here) is more interesting, , if I recall correctly they are used by Lurie as an object within the proof that simplicial objects with values in an \"algebraic category\" (e. g rings) have a model structure that presents the \"free homotopy-(sifted cocompletion)\" of the algebraic theory underlying everything. This is for instance how you prove that the model structure on simplicial rings really presents the infinity-category of what people call \"derived rings\". So related notion do have some use cases, but I would understand the call that in this case we can just wait until we get there to add them.</p>",
        "id": 525778405,
        "sender_full_name": "Robin Carlier",
        "timestamp": 1750880832
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"286014\">Robin Carlier</span> <a href=\"#narrow/channel/335062-homology/topic/Roadmap.20for.20sheaf.20cohomology/near/525775003\">said</a>:</p>\n<blockquote>\n<p>in terms of opposite if needed</p>\n</blockquote>\n<p>well we do need it, so I guess I'll just have both statements?</p>",
        "id": 525779802,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1750881435
    },
    {
        "content": "<p>I haven't pushed this change yet, but there's one proof where I proved that it has pullback if C has pullback, and i got into DTT hell so my proof was rather long, just as a heads up</p>",
        "id": 525799966,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1750891376
    },
    {
        "content": "<p>(advice on how to do this more efficiently is certainly welcome)</p>",
        "id": 525799990,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1750891389
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"459699\">@Jo√´l Riou</span> I've finished proving all the statements in <a href=\"https://github.com/leanprover-community/mathlib4/pull/26402\">#26402</a> . There are some proofs that are a bit long, and there might be some spacing problems, but I'll fix them later, so don't worry about them for the moment.</p>\n<p>If you have the time to review it, could you just focus on the statements for now, until I polish the file at a later time, thanks a lot.</p>",
        "id": 525813265,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1750903622
    },
    {
        "content": "<p>cc <span class=\"user-mention\" data-user-id=\"286014\">@Robin Carlier</span> if you would also like to review.</p>",
        "id": 525813347,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1750903709
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"286014\">@Robin Carlier</span> I've updated the file to complete the tasks.</p>",
        "id": 526092584,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1751033443
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"459699\">@Jo√´l Riou</span> I have a question about implementation. I proved that if C has terminal then FormalCoproduct F has terminal, and the same for pullback, so now I‚Äôm conjecturing that it‚Äôs probably true for all limits of all shapes? But should I prove that as well if I don‚Äôt think I would use it for the specific use case of cech cohomology?</p>",
        "id": 526097415,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1751034741
    },
    {
        "content": "<p>After further thought I think this might be doable but might require 200 more lines, so I think it‚Äôs better to delay it to a (non-existent) future PR.</p>",
        "id": 526104849,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1751036928
    },
    {
        "content": "<p>My approach would be to focus on what it is necessary for Cech cohomology. Anything else that is nontrivial could be done in future PRs.</p>",
        "id": 526107327,
        "sender_full_name": "Jo√´l Riou",
        "timestamp": 1751037763
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"286014\">@Robin Carlier</span> Thanks for the review. I've removed the non-terminal simps as well as added more <code>@[simps!]</code>.</p>",
        "id": 526213878,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1751127842
    },
    {
        "content": "<p>I've kept the two newlines because I think it's more readable.</p>",
        "id": 526213894,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1751127856
    },
    {
        "content": "<p>Great! will re-review tomorrow but except for name nitpicking I think we‚Äôre getting close.</p>",
        "id": 526214434,
        "sender_full_name": "Robin Carlier",
        "timestamp": 1751128572
    },
    {
        "content": "<p>Thanks!</p>",
        "id": 526214461,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1751128591
    },
    {
        "content": "<p>Is <code>FormalCoproduct C</code> (at least in the PR) just <code>StructuredArrow typeToCat C</code>?</p>",
        "id": 526228478,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1751144874
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"439483\">@Andrew Yang</span> It is similar to <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/CategoryTheory/Comma/StructuredArrow/Basic.html#CategoryTheory.CostructuredArrow\">CategoryTheory.CostructuredArrow</a> instead, but I think they are still different.</p>\n<p>A term <code>X : CostructuredArrow typeToCat C</code> encodes <code>X.I : Type</code> and then <code>X.obj : X.I ‚Üí C</code> (in the notation of my PR), but a morphism <code>f : X ‚ü∂¬†Y</code> in the category <code>CostructuredArrow typeToCat C</code> encodes a function <code>f.f : X.I ‚Üí Y.I</code> such that <code>Y.obj (f.f i) = X.obj i</code>.</p>",
        "id": 526229384,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1751146175
    },
    {
        "content": "<p><a href=\"/user_uploads/3121/bvWzr45Nu19jbz4dgH6GfQ3A/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/bvWzr45Nu19jbz4dgH6GfQ3A/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"720x311\" src=\"/user_uploads/thumbnail/3121/bvWzr45Nu19jbz4dgH6GfQ3A/image.png/840x560.webp\"></a></div>",
        "id": 526229463,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1751146282
    },
    {
        "content": "<blockquote>\n<p>The category of¬†<code>S</code>-costructured arrows with target¬†<code>T : D</code>¬†(here¬†<code>S : C ‚•§ D</code>), has as its objects¬†<code>D</code>-morphisms of the form¬†<code>S Y ‚ü∂ T</code>, for some¬†<code>Y : C</code>, and morphisms¬†<code>C</code>-morphisms¬†<code>Y ‚ü∂ Y'</code>¬†making the obvious triangle commute.</p>\n</blockquote>",
        "id": 526229477,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1751146296
    },
    {
        "content": "<p>You're right. Then it's probably </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">namespace</span><span class=\"w\"> </span><span class=\"n\">CategoryTheory</span>\n\n<span class=\"kn\">universe</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"n\">w</span>\n\n<span class=\"kd\">@[</span><span class=\"n\">simps</span><span class=\"kd\">]</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Category</span><span class=\"bp\">.</span><span class=\"n\">Pi</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"bp\">·µí·µñ</span><span class=\"w\"> </span><span class=\"bp\">‚•§</span><span class=\"w\"> </span><span class=\"n\">Cat</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">v</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">w</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"bp\">‚•§</span><span class=\"w\"> </span><span class=\"n\">Cat</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">obj</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"w\"> </span><span class=\"n\">obj</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">I</span><span class=\"bp\">.</span><span class=\"n\">unop</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Functor</span><span class=\"bp\">.</span><span class=\"n\">pi</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">‚Ü¶</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">}</span>\n<span class=\"w\">  </span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"w\"> </span><span class=\"n\">app</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Pi</span><span class=\"bp\">.</span><span class=\"n\">comap</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"bp\">.</span><span class=\"n\">unop</span><span class=\"w\"> </span><span class=\"o\">}</span>\n\n<span class=\"kn\">abbrev</span><span class=\"w\"> </span><span class=\"n\">FormalCoproduct</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Category</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">w</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">Grothendieck</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Category</span><span class=\"bp\">.</span><span class=\"n\">Pi</span><span class=\"bp\">.</span><span class=\"n\">flip</span><span class=\"bp\">.</span><span class=\"n\">obj</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">.</span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">)))</span><span class=\"bp\">·µí·µñ</span>\n</code></pre></div>",
        "id": 526230244,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1751147576
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"439483\">@Andrew Yang</span> ok, what properties do you get for free if this is the case?</p>",
        "id": 526230800,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1751148289
    },
    {
        "content": "<p>I'm guessing you can get the limits and colimit statments for free.</p>",
        "id": 526230848,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1751148359
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"439483\">@Andrew Yang</span> I think something is still flipped:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">universe</span><span class=\"w\"> </span><span class=\"n\">w</span><span class=\"w\"> </span><span class=\"n\">w‚ÇÅ</span><span class=\"w\"> </span><span class=\"n\">w‚ÇÇ</span><span class=\"w\"> </span><span class=\"n\">w‚ÇÉ</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"n\">v‚ÇÅ</span><span class=\"w\"> </span><span class=\"n\">v‚ÇÇ</span><span class=\"w\"> </span><span class=\"n\">v‚ÇÉ</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"n\">u‚ÇÅ</span><span class=\"w\"> </span><span class=\"n\">u‚ÇÇ</span><span class=\"w\"> </span><span class=\"n\">u‚ÇÉ</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Opposite</span>\n\n<span class=\"kn\">namespace</span><span class=\"w\"> </span><span class=\"n\">CategoryTheory</span>\n\n<span class=\"kn\">namespace</span><span class=\"w\"> </span><span class=\"n\">Limits</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Category</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">v</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u‚ÇÅ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Category</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">v‚ÇÅ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"o\">]</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">C</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">in</span>\n<span class=\"kd\">@[</span><span class=\"n\">simps</span><span class=\"kd\">]</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Category</span><span class=\"bp\">.</span><span class=\"n\">Pi</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">w</span><span class=\"bp\">·µí·µñ</span><span class=\"w\"> </span><span class=\"bp\">‚•§</span><span class=\"w\"> </span><span class=\"n\">Cat</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">v</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"bp\">‚•§</span><span class=\"w\"> </span><span class=\"n\">Cat</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">obj</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"w\"> </span><span class=\"n\">obj</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">I</span><span class=\"bp\">.</span><span class=\"n\">unop</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Functor</span><span class=\"bp\">.</span><span class=\"n\">pi</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">‚Ü¶</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">}</span>\n<span class=\"w\">  </span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"w\"> </span><span class=\"n\">app</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Pi</span><span class=\"bp\">.</span><span class=\"n\">comap</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"bp\">.</span><span class=\"n\">unop</span><span class=\"w\"> </span><span class=\"o\">}</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">C</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">in</span>\n<span class=\"kn\">abbrev</span><span class=\"w\"> </span><span class=\"n\">FormalCoproduct'</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">Grothendieck</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Category</span><span class=\"bp\">.</span><span class=\"n\">Pi</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">w</span><span class=\"o\">}</span><span class=\"bp\">.</span><span class=\"n\">flip</span><span class=\"bp\">.</span><span class=\"n\">obj</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">.</span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">)))</span><span class=\"bp\">·µí·µñ</span>\n\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">C</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">in</span>\n<span class=\"kn\">structure</span><span class=\"w\"> </span><span class=\"n\">FormalCoproduct</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"sd\">/-- The indexing type. -/</span>\n<span class=\"w\">  </span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">w</span>\n<span class=\"w\">  </span><span class=\"sd\">/-- The object in the original category indexed by `x : I`. -/</span>\n<span class=\"w\">  </span><span class=\"n\">obj</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">C</span>\n\n<span class=\"kn\">structure</span><span class=\"w\"> </span><span class=\"n\">Hom</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"n\">Y</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">FormalCoproduct</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">w</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"sd\">/-- The function on the indexing sets. -/</span>\n<span class=\"w\">  </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">Y</span><span class=\"bp\">.</span><span class=\"n\">I</span>\n<span class=\"w\">  </span><span class=\"sd\">/-- The map on each component. -/</span>\n<span class=\"w\">  </span><span class=\"n\">œÜ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">I</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">obj</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">‚ü∂</span><span class=\"w\"> </span><span class=\"n\">Y</span><span class=\"bp\">.</span><span class=\"n\">obj</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">)</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">foo</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">FormalCoproduct'</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">w</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"bp\">‚âÉ</span><span class=\"w\"> </span><span class=\"n\">FormalCoproduct</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">w</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">toFun</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">‚ü®</span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">unop</span><span class=\"bp\">.</span><span class=\"n\">base</span><span class=\"bp\">.</span><span class=\"n\">unop</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">unop</span><span class=\"bp\">.</span><span class=\"n\">fiber</span><span class=\"bp\">‚ü©</span>\n<span class=\"w\">  </span><span class=\"n\">invFun</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">‚ü®</span><span class=\"n\">op</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">I</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">obj</span><span class=\"bp\">‚ü©</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">bar</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"n\">Y</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">FormalCoproduct'</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">w</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Hom</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">foo</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">foo</span><span class=\"w\"> </span><span class=\"n\">Y</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">‚âÉ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">‚ü∂</span><span class=\"w\"> </span><span class=\"n\">Y</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">toFun</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">‚ü®</span><span class=\"n\">op</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"bp\">.</span><span class=\"n\">f</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">‚Ü¶</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">simp</span><span class=\"bp\">‚ü©</span><span class=\"w\"> </span><span class=\"c1\">-- unop Y).fiber (f.f i) ‚ü∂ (unop X).fiber i</span>\n</code></pre></div>",
        "id": 526231171,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1751148879
    },
    {
        "content": "<p>maybe you need to take the dual of C too...</p>",
        "id": 526231197,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1751148897
    },
    {
        "content": "<p>Yeah you're right its <code>(Grothendieck (Category.Pi.{w}.flip.obj (.of C·µí·µñ)))·µí·µñ</code></p>",
        "id": 526231287,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1751149039
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">universe</span><span class=\"w\"> </span><span class=\"n\">w</span><span class=\"w\"> </span><span class=\"n\">w‚ÇÅ</span><span class=\"w\"> </span><span class=\"n\">w‚ÇÇ</span><span class=\"w\"> </span><span class=\"n\">w‚ÇÉ</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"n\">v‚ÇÅ</span><span class=\"w\"> </span><span class=\"n\">v‚ÇÇ</span><span class=\"w\"> </span><span class=\"n\">v‚ÇÉ</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"n\">u‚ÇÅ</span><span class=\"w\"> </span><span class=\"n\">u‚ÇÇ</span><span class=\"w\"> </span><span class=\"n\">u‚ÇÉ</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Opposite</span>\n\n<span class=\"kn\">namespace</span><span class=\"w\"> </span><span class=\"n\">CategoryTheory</span>\n\n<span class=\"kn\">namespace</span><span class=\"w\"> </span><span class=\"n\">Limits</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Category</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">v</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u‚ÇÅ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Category</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">v‚ÇÅ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"o\">]</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">C</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">in</span>\n<span class=\"kd\">@[</span><span class=\"n\">simps</span><span class=\"kd\">]</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Category</span><span class=\"bp\">.</span><span class=\"n\">Pi</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">w</span><span class=\"bp\">·µí·µñ</span><span class=\"w\"> </span><span class=\"bp\">‚•§</span><span class=\"w\"> </span><span class=\"n\">Cat</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">v</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"bp\">‚•§</span><span class=\"w\"> </span><span class=\"n\">Cat</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">obj</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"w\"> </span><span class=\"n\">obj</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">I</span><span class=\"bp\">.</span><span class=\"n\">unop</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Functor</span><span class=\"bp\">.</span><span class=\"n\">pi</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">‚Ü¶</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">}</span>\n<span class=\"w\">  </span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"w\"> </span><span class=\"n\">app</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Pi</span><span class=\"bp\">.</span><span class=\"n\">comap</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"bp\">.</span><span class=\"n\">unop</span><span class=\"w\"> </span><span class=\"o\">}</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">C</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">in</span>\n<span class=\"kn\">abbrev</span><span class=\"w\"> </span><span class=\"n\">FormalCoproduct'</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">Grothendieck</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Category</span><span class=\"bp\">.</span><span class=\"n\">Pi</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">w</span><span class=\"o\">}</span><span class=\"bp\">.</span><span class=\"n\">flip</span><span class=\"bp\">.</span><span class=\"n\">obj</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">.</span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"bp\">·µí·µñ</span><span class=\"o\">)))</span><span class=\"bp\">·µí·µñ</span>\n\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">C</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">in</span>\n<span class=\"kn\">structure</span><span class=\"w\"> </span><span class=\"n\">FormalCoproduct</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"sd\">/-- The indexing type. -/</span>\n<span class=\"w\">  </span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">w</span>\n<span class=\"w\">  </span><span class=\"sd\">/-- The object in the original category indexed by `x : I`. -/</span>\n<span class=\"w\">  </span><span class=\"n\">obj</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">C</span>\n\n<span class=\"kn\">structure</span><span class=\"w\"> </span><span class=\"n\">Hom</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"n\">Y</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">FormalCoproduct</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">w</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"sd\">/-- The function on the indexing sets. -/</span>\n<span class=\"w\">  </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">Y</span><span class=\"bp\">.</span><span class=\"n\">I</span>\n<span class=\"w\">  </span><span class=\"sd\">/-- The map on each component. -/</span>\n<span class=\"w\">  </span><span class=\"n\">œÜ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">I</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">obj</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">‚ü∂</span><span class=\"w\"> </span><span class=\"n\">Y</span><span class=\"bp\">.</span><span class=\"n\">obj</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">)</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">foo</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">FormalCoproduct'</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">w</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"bp\">‚âÉ</span><span class=\"w\"> </span><span class=\"n\">FormalCoproduct</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">w</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">toFun</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">‚ü®</span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">unop</span><span class=\"bp\">.</span><span class=\"n\">base</span><span class=\"bp\">.</span><span class=\"n\">unop</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">‚Ü¶</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">unop</span><span class=\"bp\">.</span><span class=\"n\">fiber</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">unop</span><span class=\"bp\">‚ü©</span>\n<span class=\"w\">  </span><span class=\"n\">invFun</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">‚ü®</span><span class=\"n\">op</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">I</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">‚Ü¶</span><span class=\"w\"> </span><span class=\"n\">op</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">obj</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">)</span><span class=\"bp\">‚ü©</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">bar</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"n\">Y</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">FormalCoproduct'</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">w</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Hom</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">foo</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">foo</span><span class=\"w\"> </span><span class=\"n\">Y</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">‚âÉ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">‚ü∂</span><span class=\"w\"> </span><span class=\"n\">Y</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">toFun</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">‚ü®</span><span class=\"n\">op</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"bp\">.</span><span class=\"n\">f</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">‚Ü¶</span><span class=\"w\"> </span><span class=\"n\">op</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"bp\">.</span><span class=\"n\">œÜ</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">)</span><span class=\"bp\">‚ü©</span>\n<span class=\"w\">  </span><span class=\"n\">invFun</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">‚ü®</span><span class=\"n\">f</span><span class=\"bp\">.</span><span class=\"n\">unop</span><span class=\"bp\">.</span><span class=\"n\">base</span><span class=\"bp\">.</span><span class=\"n\">unop</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">‚Ü¶</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"bp\">.</span><span class=\"n\">unop</span><span class=\"bp\">.</span><span class=\"n\">fiber</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">unop</span><span class=\"bp\">‚ü©</span>\n</code></pre></div>",
        "id": 526231374,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1751149189
    },
    {
        "content": "<p>there you go</p>",
        "id": 526231376,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1751149191
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"459699\">@Jo√´l Riou</span> So in light of this new result I see three ways forward:</p>\n<ol>\n<li>Keep the current definition in the PR, and construct an equivalence of categories to Grothendieck, and try to transport all the limit stuff from there.</li>\n<li>Replace the definition in the PR with <code>abbrev</code>, and then define custom constructors and projections, and also define custom constructors and projections for the various cones.  (can we please make <code>@[simps]</code> support custom projections)</li>\n<li>Keep the current definition in the PR, make the equivalence a TODO, and change nothing.</li>\n</ol>",
        "id": 526231838,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1751149917
    },
    {
        "content": "<p>I would suggest doing 3. The whole point of <code>FormalCoproduct</code> in my original code was to make it easy to work with formal coproducts of objects.</p>",
        "id": 526234182,
        "sender_full_name": "Jo√´l Riou",
        "timestamp": 1751153880
    },
    {
        "content": "<p>I don't think 2 would make it harder to work with? And it would allow us to get abstract nonsense results more easily.</p>",
        "id": 526234444,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1751154325
    },
    {
        "content": "<p>As it was pointed out, the <code>@[simps]</code> lemmas generated for objects/morphisms in the Grothendieck construction would not match the ones obtained via the more direct approach: this is only making things more complicated IMO. (If some properties are much easier to obtain using the Grothendieck construction, we could do 1.)</p>",
        "id": 526248510,
        "sender_full_name": "Jo√´l Riou",
        "timestamp": 1751176522
    },
    {
        "content": "<p>I'd also prefer 3. <br>\nDo we even have that many results for existence of co/limits in Grothendieck constructions? What results currently in Mathlib would be used to get the \"abstract nonsense\" results with this redefinition?</p>",
        "id": 526255872,
        "sender_full_name": "Robin Carlier",
        "timestamp": 1751186715
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/CategoryTheory/Limits/Shapes/Grothendieck.html\">https://leanprover-community.github.io/mathlib4_docs/Mathlib/CategoryTheory/Limits/Shapes/Grothendieck.html</a></p>\n<p>Grothendieck has colimits (assuming conditions on base category), so we should be able to get limits (we took dual).</p>",
        "id": 526256061,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1751186974
    },
    {
        "content": "<p>From what I'm reading, this file is about colimits of functors out of <code>Grothendieck F</code>, not about colimits inside <code>Grothendieck F</code>. I'm note sure these would help.</p>",
        "id": 526256532,
        "sender_full_name": "Robin Carlier",
        "timestamp": 1751187542
    },
    {
        "content": "<p>I think ideally the metric we should be is not ‚Äúwhat is the easiest way to prove it given current mathib‚Äù but rather ‚Äúwhat is the easiest way to prove it if mathlib contained everything it should have contained‚Äù (this is still the same question that was raised in the reviewer chat). And the proof that Grothendieck construction has limits is basically in mathlib as ‚Äúpresheafed spaces has limits‚Äù. (the proof should be generalizable) <br>\nOf course practically this might be too big of a detour and it might be fine if this is done manually for now and left as a TODO. </p>\n<p>But note that you might also need formal finite (co)products so this duplication might need to appear four times. (Or we should just do formal completion for a set of diagrams instead)</p>",
        "id": 526276921,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1751210991
    },
    {
        "content": "<p>And for the simps issue, I totally agree that simps should add support to custom projections and I might eventually try to do this in some distant future if nobody else does.</p>\n<p>But I think it already supports custom projection if it is a chain of projections, which seems to be the case here.</p>",
        "id": 526277079,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1751211144
    },
    {
        "content": "<p>For formal finite coproducts, we can maybe \"cheat\" and use a full subcategory of the full formal coproducts?</p>\n<p>As to the \"right generality\" of the result, if we want to go that way, then we should probably prove general results about (co)limits in (co)fibered categories, these would be part of \"things mathlib should contain\" IMO, but they probably need to wait on more stuff on (co)fibered categories I think. (I also can‚Äôt find the reference, but I recall these results being proven in Lurie‚Äôs HTT as an application of \"<a href=\"https://kerodon.net/tag/02KF\">relative colimits</a>\" in cofibered categories (<a href=\"https://kerodon.net/tag/031Q\">related</a>), but I don‚Äôt know if Mathlib wants relative colimits...)</p>",
        "id": 526279455,
        "sender_full_name": "Robin Carlier",
        "timestamp": 1751213659
    },
    {
        "content": "<p>I might be hallucinating but is it not true that a fibered category is equivalent to the grothendieck construction of its fibers so this generalization is just a syntactic one not a mathematical one? (Though we probably want both anyways even if the answer is yes)</p>",
        "id": 526281104,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1751215626
    },
    {
        "content": "<p>Yes, it's true, but as you say there's the \"syntax\" thing going on so this is why I stated things that way: it's speculative since I have no code for any of this yet but I feel that stating things with general fibered categories would avoid constantly going back to the (equivalent) Grothendieck construction and carrying the equivalence everywhere.</p>",
        "id": 526284230,
        "sender_full_name": "Robin Carlier",
        "timestamp": 1751219189
    },
    {
        "content": "<p>cc <span class=\"user-mention\" data-user-id=\"132603\">@Calle S√∂nne</span></p>",
        "id": 526967265,
        "sender_full_name": "Paul Lezeau",
        "timestamp": 1751539334
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"286014\">@Robin Carlier</span> I've updated my PR (<a href=\"https://github.com/leanprover-community/mathlib4/pull/26402\">#26402</a>).</p>",
        "id": 528343378,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1752241333
    },
    {
        "content": "<p>Will try to have a look today or tomorrow</p>",
        "id": 528343462,
        "sender_full_name": "Robin Carlier",
        "timestamp": 1752241356
    },
    {
        "content": "<p>Thanks!</p>",
        "id": 528343517,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1752241367
    },
    {
        "content": "<p>Now that <a href=\"https://github.com/leanprover-community/mathlib4/pull/35026\">#35026</a> has been merged, how close are we to being able to define the Cech cohomology of an open cover of a topological space?</p>",
        "id": 574108602,
        "sender_full_name": "Oliver Nash",
        "timestamp": 1771248225
    },
    {
        "content": "<p>Once this is possible in a reasonable way, and it is possible to perform simple computations similarly to what we do on paper I think we need a blog post explaining how to go from the the very abstract and general setting to concrete computations.</p>",
        "id": 574110828,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1771248897
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">CategoryTheory</span><span class=\"bp\">.</span><span class=\"n\">Sites</span><span class=\"bp\">.</span><span class=\"n\">SheafCohomology</span><span class=\"bp\">.</span><span class=\"n\">Cech</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">CategoryTheory</span><span class=\"bp\">.</span><span class=\"n\">Sites</span><span class=\"bp\">.</span><span class=\"n\">Spaces</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Algebra</span><span class=\"bp\">.</span><span class=\"n\">Category</span><span class=\"bp\">.</span><span class=\"n\">Grp</span><span class=\"bp\">.</span><span class=\"n\">Abelian</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">CategoryTheory</span><span class=\"w\"> </span><span class=\"n\">TopologicalSpace</span>\n\n<span class=\"kn\">universe</span><span class=\"w\"> </span><span class=\"n\">u</span>\n\n<span class=\"kn\">noncomputable</span><span class=\"w\"> </span><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">T</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">TopologicalSpace</span><span class=\"w\"> </span><span class=\"n\">T</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">Œπ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">}</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">U</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Œπ</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">Opens</span><span class=\"w\"> </span><span class=\"n\">T</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"o\">((</span><span class=\"n\">Opens</span><span class=\"w\"> </span><span class=\"n\">T</span><span class=\"o\">)</span><span class=\"bp\">·µí·µñ</span><span class=\"w\"> </span><span class=\"bp\">‚•§</span><span class=\"w\"> </span><span class=\"n\">AddCommGrpCat</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">u</span><span class=\"o\">})</span><span class=\"w\"> </span><span class=\"bp\">‚•§</span><span class=\"w\"> </span><span class=\"n\">CochainComplex</span><span class=\"w\"> </span><span class=\"n\">AddCommGrpCat</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">u</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"n\">‚Ñï</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">cechComplexFunctor</span><span class=\"w\"> </span><span class=\"n\">U</span>\n</code></pre></div>",
        "id": 574111299,
        "sender_full_name": "Jo√´l Riou",
        "timestamp": 1771249026
    },
    {
        "content": "<p>Do we have conditions (somewhere) for when it computes the right derived functor?</p>",
        "id": 574111736,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1771249143
    },
    {
        "content": "<p>No.</p>",
        "id": 574111883,
        "sender_full_name": "Jo√´l Riou",
        "timestamp": 1771249180
    },
    {
        "content": "<p>But, at least the quasi-isomorphism I constructed at <a href=\"https://github.com/joelriou/mathlib4/blob/04b574a2dc239b7964d235d5f66e31c37162b449/Mathlib/CategoryTheory/Limits/FormalCoproducts/Misc.lean#L224\">https://github.com/joelriou/mathlib4/blob/04b574a2dc239b7964d235d5f66e31c37162b449/Mathlib/CategoryTheory/Limits/FormalCoproducts/Misc.lean#L224</a> would eventually give a map from the Cech cohomology with respect to a cover to the <code>Ext</code>-group which defines sheaf cohomology.</p>",
        "id": 574112364,
        "sender_full_name": "Jo√´l Riou",
        "timestamp": 1771249328
    },
    {
        "content": "<p>I plan to add an isomorphism which should allow to describe Cech cochains in slightly more concrete terms.</p>",
        "id": 574114446,
        "sender_full_name": "Jo√´l Riou",
        "timestamp": 1771249914
    },
    {
        "content": "<p>In the draft PR <a href=\"https://github.com/leanprover-community/mathlib4/pull/35073\">#35073</a>, I have the following, which gives a concrete description of Cech cochains for a family of opens subsets:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">noncomputable</span><span class=\"w\"> </span><span class=\"kd\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">T</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">TopologicalSpace</span><span class=\"w\"> </span><span class=\"n\">T</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">F</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Opens</span><span class=\"w\"> </span><span class=\"n\">T</span><span class=\"o\">)</span><span class=\"bp\">·µí·µñ</span><span class=\"w\"> </span><span class=\"bp\">‚•§</span><span class=\"w\"> </span><span class=\"n\">AddCommGrpCat</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">u</span><span class=\"o\">})</span>\n<span class=\"w\">    </span><span class=\"o\">{</span><span class=\"n\">Œπ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">U</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Œπ</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">Opens</span><span class=\"w\"> </span><span class=\"n\">T</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">‚Ñï</span><span class=\"o\">}</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">‚àÄ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">Œπ</span><span class=\"o\">)),</span>\n<span class=\"w\">      </span><span class=\"n\">F.obj</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">op</span><span class=\"w\"> </span><span class=\"o\">‚ü®</span><span class=\"bp\">‚ãÇ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)),</span><span class=\"w\"> </span><span class=\"n\">U</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">isOpen_iInter_of_finite</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">_</span><span class=\"w\"> </span><span class=\"bp\">‚Ü¶</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">U</span><span class=\"w\"> </span><span class=\"n\">_</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">isOpen</span><span class=\"o\">)‚ü©))</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"o\">((</span><span class=\"n\">cechComplexFunctor</span><span class=\"w\"> </span><span class=\"n\">U</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">obj</span><span class=\"w\"> </span><span class=\"n\">F</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">cechCochainAddCommGrpCatIso</span><span class=\"w\"> </span><span class=\"n\">F</span><span class=\"w\"> </span><span class=\"n\">U</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">inv</span><span class=\"w\"> </span><span class=\"n\">f</span>\n</code></pre></div>",
        "id": 574282286,
        "sender_full_name": "Jo√´l Riou",
        "timestamp": 1771332601
    }
]