[
    {
        "content": "<p>Sigh... I'm having a rough time getting Mathlib on to v4.20.0-rc3 (hopefully the last rc!), and at the least minute I've run into Mathlib/Data/Rat/Lemmas.lean having a broken proof... It's not used, so on <a href=\"https://github.com/leanprover-community/mathlib4/pull/24621\">#24621</a> I've just commented it out with an adaptation note.</p>\n<p>If someone could sort it out in a subsequent PR that would be great, otherwise I can look tomorrow, but right now I would like to sleep for 4 hours before getting up to get on a plane. :-)</p>",
        "id": 516310308,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1746485064
    },
    {
        "content": "<p>Is making it an <code>axiom</code> better or wore than commenting it out?</p>",
        "id": 516310779,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1746485302
    },
    {
        "content": "<p>is this related to <a href=\"https://github.com/leanprover-community/batteries/pull/1225\">batteries#1225</a>? (the timing is very close, <del>I'm not sure whether the version of batteries you are using includes this PR or not</del> it does include this PR, so this seems very likely)</p>",
        "id": 516323839,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1746493189
    },
    {
        "content": "<p>the author contributed a <a href=\"https://github.com/leanprover-community/mathlib4/commit/9c63b1355644e934028de279b7b5c27ee0496fe3\">fix</a> so I think it just needs to be cherry-picked to nightly-testing</p>",
        "id": 516324271,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1746493394
    },
    {
        "content": "<p>(To <code>master</code>, but yes! Thanks for identifying this, I'll see if I can get it queued up this morning.)</p>",
        "id": 516339907,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1746502576
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/24625\">#24625</a></p>",
        "id": 516346643,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1746506635
    },
    {
        "content": "<p>Did you mean to change the repository url but not the commit hash for batteries?</p>",
        "id": 516374679,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1746518158
    },
    {
        "content": "<p>Oops, no.</p>",
        "id": 516452839,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1746539996
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/channel/428973-nightly-testing/topic/Mathlib.2FData.2FRat.2FLemmas.2Elean/near/516310779\">said</a>:</p>\n<blockquote>\n<p>Is making it an <code>axiom</code> better or wore than commenting it out?</p>\n</blockquote>\n<p>Making it an axiom opens us up to a drive-by code inspector going \"wooah look mathlib has axioms, I thought the whole point was that it was axiom-free\"</p>",
        "id": 516619654,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1746609259
    },
    {
        "content": "<p>I don't think mathlib should add more axioms. Perhaps <code>proof_wanted</code>?</p>",
        "id": 516620359,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1746609473
    },
    {
        "content": "<p>Note, this is a temporary issue which has been fixed already. Using an <code>axiom</code> here is fine, insofar as we would not let it hit master</p>",
        "id": 516645350,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1746616888
    },
    {
        "content": "<p>commenting it out worked in this case only because the theorem had no users. In the general case we could comment out all the dependencies, but this could be a lot of work to track down and also could end up implicating a huge swath of the library, so <code>axiom</code> is much easier</p>",
        "id": 516645746,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1746617015
    },
    {
        "content": "<p><code>sorry</code> would be even better than <code>axiom</code> (which still has some knock-on effects when it comes to <code>noncomputable</code> marking), but it will cause a build failure (which is fine actually? as long as downstream files are built)</p>",
        "id": 516646120,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1746617118
    },
    {
        "content": "<p>Just noting that this was commented out (briefly) on master. There axiom is obviously a no go. For nightly-testing, maybe.</p>",
        "id": 516646395,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1746617187
    },
    {
        "content": "<p>if we want it not to be a build failure we will need to add some exception for nightly-testing to allow sorry (and we'll probably need this in the end if we ramp up <code>axiom</code> checking on master)</p>",
        "id": 516646433,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1746617197
    },
    {
        "content": "<p>I think this should not have hit master, it should have delayed the bump. In this case it was a minor fallout but if it was any worse I think we should just have waited for the fix</p>",
        "id": 516646903,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1746617320
    },
    {
        "content": "<p>(I think part of the issue in this case was that batteries had a merged PR in the middle of your bump process; an alternative fix would have been to downgrade the batteries commit you used for the bump to avoid it shifting in the middle of the process)</p>",
        "id": 516647189,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1746617412
    },
    {
        "content": "<p>I agree with all of the above. This release was an exceptionally difficult one, and this \"comment out an unused theorem on master\" hack should be avoided in future.</p>",
        "id": 516675803,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1746624411
    }
]