[
    {
        "content": "<p>I've just started the <code>v4.16.0-rc2</code> release, thanks very much to <span class=\"user-mention\" data-user-id=\"315577\">@Mac Malone</span> for quickly resolving the cache issues as soon as he was back from vacation!</p>",
        "id": 493489251,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1736818402
    },
    {
        "content": "<p>We have a new tool that checks the status of the release checklist, and I'm going to experiment by posting updates from that checklist tool as I proceed. I hope later this tool will run automatically via a bot, and will also actually perform many of the steps!</p>",
        "id": 493489254,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1736818403
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">Performing</span><span class=\"w\"> </span><span class=\"n\">preliminary</span><span class=\"w\"> </span><span class=\"n\">checks</span><span class=\"bp\">...</span>\n<span class=\"w\">  </span><span class=\"bp\">✅</span><span class=\"w\"> </span><span class=\"n\">Branch</span><span class=\"w\"> </span><span class=\"n\">releases</span><span class=\"bp\">/</span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">16</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"w\"> </span><span class=\"n\">exists</span>\n<span class=\"w\">  </span><span class=\"bp\">✅</span><span class=\"w\"> </span><span class=\"n\">CMake</span><span class=\"w\"> </span><span class=\"n\">version</span><span class=\"w\"> </span><span class=\"n\">settings</span><span class=\"w\"> </span><span class=\"n\">are</span><span class=\"w\"> </span><span class=\"n\">correct</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">src</span><span class=\"bp\">/</span><span class=\"n\">CMakeLists</span><span class=\"bp\">.</span><span class=\"n\">txt</span>\n<span class=\"w\">  </span><span class=\"bp\">✅</span><span class=\"w\"> </span><span class=\"n\">Tag</span><span class=\"w\"> </span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">16</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">-</span><span class=\"n\">rc2</span><span class=\"w\"> </span><span class=\"n\">exists</span>\n<span class=\"w\">  </span><span class=\"bp\">✅</span><span class=\"w\"> </span><span class=\"n\">Release</span><span class=\"w\"> </span><span class=\"n\">page</span><span class=\"w\"> </span><span class=\"n\">for</span><span class=\"w\"> </span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">16</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">-</span><span class=\"n\">rc2</span><span class=\"w\"> </span><span class=\"n\">exists</span>\n<span class=\"w\">  </span><span class=\"bp\">✅</span><span class=\"w\"> </span><span class=\"n\">Release</span><span class=\"w\"> </span><span class=\"n\">notes</span><span class=\"w\"> </span><span class=\"n\">look</span><span class=\"w\"> </span><span class=\"n\">good</span><span class=\"bp\">.</span>\n\n<span class=\"n\">Checking</span><span class=\"w\"> </span><span class=\"n\">repositories</span><span class=\"bp\">...</span>\n\n<span class=\"n\">Repository</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Batteries</span>\n<span class=\"w\">  </span><span class=\"bp\">✅</span><span class=\"w\"> </span><span class=\"n\">On</span><span class=\"w\"> </span><span class=\"n\">compatible</span><span class=\"w\"> </span><span class=\"n\">toolchain</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">&gt;=</span><span class=\"w\"> </span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">16</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">-</span><span class=\"n\">rc2</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"bp\">✅</span><span class=\"w\"> </span><span class=\"n\">Tag</span><span class=\"w\"> </span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">16</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">-</span><span class=\"n\">rc2</span><span class=\"w\"> </span><span class=\"n\">exists</span>\n\n<span class=\"n\">Repository</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">lean4checker</span>\n<span class=\"w\">  </span><span class=\"bp\">✅</span><span class=\"w\"> </span><span class=\"n\">On</span><span class=\"w\"> </span><span class=\"n\">compatible</span><span class=\"w\"> </span><span class=\"n\">toolchain</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">&gt;=</span><span class=\"w\"> </span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">16</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">-</span><span class=\"n\">rc2</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"bp\">✅</span><span class=\"w\"> </span><span class=\"n\">Tag</span><span class=\"w\"> </span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">16</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">-</span><span class=\"n\">rc2</span><span class=\"w\"> </span><span class=\"n\">exists</span>\n\n<span class=\"n\">Repository</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">doc</span><span class=\"bp\">-</span><span class=\"n\">gen4</span>\n<span class=\"w\">  </span><span class=\"bp\">✅</span><span class=\"w\"> </span><span class=\"n\">On</span><span class=\"w\"> </span><span class=\"n\">compatible</span><span class=\"w\"> </span><span class=\"n\">toolchain</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">&gt;=</span><span class=\"w\"> </span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">16</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">-</span><span class=\"n\">rc2</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"bp\">✅</span><span class=\"w\"> </span><span class=\"n\">Tag</span><span class=\"w\"> </span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">16</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">-</span><span class=\"n\">rc2</span><span class=\"w\"> </span><span class=\"n\">exists</span>\n\n<span class=\"n\">Repository</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Verso</span>\n<span class=\"w\">  </span><span class=\"bp\">❌</span><span class=\"w\"> </span><span class=\"n\">Not</span><span class=\"w\"> </span><span class=\"n\">on</span><span class=\"w\"> </span><span class=\"n\">target</span><span class=\"w\"> </span><span class=\"n\">toolchain</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">needs</span><span class=\"w\"> </span><span class=\"bp\">≥</span><span class=\"w\"> </span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">16</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">-</span><span class=\"n\">rc2</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">but</span><span class=\"w\"> </span><span class=\"n\">main</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">on</span><span class=\"w\"> </span><span class=\"n\">leanprover</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"o\">:</span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">16</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">-</span><span class=\"n\">rc1</span><span class=\"o\">)</span>\n\n<span class=\"n\">Repository</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Cli</span>\n<span class=\"w\">  </span><span class=\"bp\">✅</span><span class=\"w\"> </span><span class=\"n\">On</span><span class=\"w\"> </span><span class=\"n\">compatible</span><span class=\"w\"> </span><span class=\"n\">toolchain</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">&gt;=</span><span class=\"w\"> </span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">16</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">-</span><span class=\"n\">rc2</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"bp\">✅</span><span class=\"w\"> </span><span class=\"n\">Tag</span><span class=\"w\"> </span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">16</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">-</span><span class=\"n\">rc2</span><span class=\"w\"> </span><span class=\"n\">exists</span>\n\n<span class=\"n\">Repository</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ProofWidgets4</span>\n<span class=\"w\">  </span><span class=\"bp\">✅</span><span class=\"w\"> </span><span class=\"n\">On</span><span class=\"w\"> </span><span class=\"n\">compatible</span><span class=\"w\"> </span><span class=\"n\">toolchain</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">&gt;=</span><span class=\"w\"> </span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">16</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">-</span><span class=\"n\">rc2</span><span class=\"o\">)</span>\n\n<span class=\"n\">Repository</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Aesop</span>\n<span class=\"w\">  </span><span class=\"bp\">✅</span><span class=\"w\"> </span><span class=\"n\">On</span><span class=\"w\"> </span><span class=\"n\">compatible</span><span class=\"w\"> </span><span class=\"n\">toolchain</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">&gt;=</span><span class=\"w\"> </span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">16</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">-</span><span class=\"n\">rc2</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"bp\">✅</span><span class=\"w\"> </span><span class=\"n\">Tag</span><span class=\"w\"> </span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">16</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">-</span><span class=\"n\">rc2</span><span class=\"w\"> </span><span class=\"n\">exists</span>\n\n<span class=\"n\">Repository</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kn\">import</span><span class=\"bp\">-</span><span class=\"n\">graph</span>\n<span class=\"w\">  </span><span class=\"bp\">✅</span><span class=\"w\"> </span><span class=\"n\">On</span><span class=\"w\"> </span><span class=\"n\">compatible</span><span class=\"w\"> </span><span class=\"n\">toolchain</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">&gt;=</span><span class=\"w\"> </span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">16</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">-</span><span class=\"n\">rc2</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"bp\">✅</span><span class=\"w\"> </span><span class=\"n\">Tag</span><span class=\"w\"> </span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">16</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">-</span><span class=\"n\">rc2</span><span class=\"w\"> </span><span class=\"n\">exists</span>\n\n<span class=\"n\">Repository</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">plausible</span>\n<span class=\"w\">  </span><span class=\"bp\">✅</span><span class=\"w\"> </span><span class=\"n\">On</span><span class=\"w\"> </span><span class=\"n\">compatible</span><span class=\"w\"> </span><span class=\"n\">toolchain</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">&gt;=</span><span class=\"w\"> </span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">16</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">-</span><span class=\"n\">rc2</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"bp\">✅</span><span class=\"w\"> </span><span class=\"n\">Tag</span><span class=\"w\"> </span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">16</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">-</span><span class=\"n\">rc2</span><span class=\"w\"> </span><span class=\"n\">exists</span>\n\n<span class=\"n\">Repository</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n<span class=\"w\">  </span><span class=\"bp\">❌</span><span class=\"w\"> </span><span class=\"n\">Not</span><span class=\"w\"> </span><span class=\"n\">on</span><span class=\"w\"> </span><span class=\"n\">target</span><span class=\"w\"> </span><span class=\"n\">toolchain</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">needs</span><span class=\"w\"> </span><span class=\"bp\">≥</span><span class=\"w\"> </span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">16</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">-</span><span class=\"n\">rc2</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">but</span><span class=\"w\"> </span><span class=\"n\">master</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">on</span><span class=\"w\"> </span><span class=\"n\">leanprover</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"o\">:</span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">16</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">-</span><span class=\"n\">rc1</span><span class=\"o\">)</span>\n\n<span class=\"n\">Repository</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">REPL</span>\n<span class=\"w\">  </span><span class=\"bp\">❌</span><span class=\"w\"> </span><span class=\"n\">Not</span><span class=\"w\"> </span><span class=\"n\">on</span><span class=\"w\"> </span><span class=\"n\">target</span><span class=\"w\"> </span><span class=\"n\">toolchain</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">needs</span><span class=\"w\"> </span><span class=\"bp\">≥</span><span class=\"w\"> </span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">16</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">-</span><span class=\"n\">rc2</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">but</span><span class=\"w\"> </span><span class=\"n\">master</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">on</span><span class=\"w\"> </span><span class=\"n\">leanprover</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"o\">:</span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">15</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 493489290,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1736818427
    },
    {
        "content": "<p>(Added a check that the versions and release flag are set correctly on the releases/v4.16.0 branch.)</p>",
        "id": 493491681,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1736819572
    },
    {
        "content": "<p>(Added a check that the release notes look good, and otherwise prompt to run the generation script.)</p>",
        "id": 493495615,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1736821535
    },
    {
        "content": "<p>(Update release note)</p>",
        "id": 493495842,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1736821653
    },
    {
        "content": "<p>(bump lean4checker)</p>",
        "id": 493496550,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1736822033
    },
    {
        "content": "<p>(bump batteries)</p>",
        "id": 493496555,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1736822040
    },
    {
        "content": "<p>(bump doc-gen4)</p>",
        "id": 493496631,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1736822065
    },
    {
        "content": "<p>(bump lean4-cli)</p>",
        "id": 493496636,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1736822068
    },
    {
        "content": "<p>(tag batteries and lean4checker)</p>",
        "id": 493496809,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1736822163
    },
    {
        "content": "<p>(bump aesop)</p>",
        "id": 493497057,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1736822302
    },
    {
        "content": "<p>(bump ProofWidgets and import-graph)</p>",
        "id": 493497312,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1736822447
    },
    {
        "content": "<p>(bump plausible)</p>",
        "id": 493497437,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1736822517
    },
    {
        "content": "<p>(tag doc-gen4, lean4-cli, import-graph)</p>",
        "id": 493497707,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1736822649
    },
    {
        "content": "<p>(Just pausing a moment to automate tag creation, and have the checklist script suggest running the creation script.)</p>",
        "id": 493498268,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1736822988
    },
    {
        "content": "<p>(running recommended script <code>script/push_repo_release_tag.py leanprover-community/aesop master v4.16.0-rc2</code>)</p>",
        "id": 493500445,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1736824241
    },
    {
        "content": "<p>(<a href=\"https://github.com/leanprover-community/mathlib4/pull/20727\">#20727</a> is the Mathlib bump)</p>",
        "id": 493500704,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1736824399
    },
    {
        "content": "<p>A few outstanding issues with the release process:</p>\n<ul>\n<li>Automate creation of the bump branches?<ul>\n<li>Easy for the repos with no dependencies.</li>\n<li>Otherwise, this requires editing the <code>lakefile.toml</code> / <code>lakefile.lean</code> to update dependencies...</li>\n<li>For bump to stable releases or not-the-first-release-candidate, everything is easy. For the first release candidate, we need to merge all the <code>bump/v4.16.0</code> and/or <code>nightly-testing</code> branches at each step, and this is harder to automate.</li>\n</ul>\n</li>\n<li>For now it requires some human judgement about whether a new release of ProofWidgets will be needed or not.</li>\n<li>The release checklist script could detect whether the relevant bump PRs are in flight and need merging, or need to be created.</li>\n<li>For everything but Mathlib, I think the plan is to pin dependencies to toolchain tags.</li>\n<li>For Mathlib, the plan is just to depend on <code>master</code> / <code>main</code> of each upstream dependency, so that the auto-update bot works.</li>\n<li>The release checklist script could verify, after updating the lakefile and running lake update, that all upstream dependencies are actually using the right <code>lean-toolchain</code>. However <code>doc-gen4</code> would need an exception, as we <em>don't</em> regularly bump its dependencies.</li>\n</ul>",
        "id": 493501224,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1736824716
    },
    {
        "content": "<ul>\n<li>The release checklist could pay attention to the dependency information it has available, in order to tell you which repositories are ready to be bumped.</li>\n</ul>",
        "id": 493501867,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1736825114
    }
]