[
    {
        "content": "<blockquote>\n<p>chore: adaptations for nightly-2024-10-28 <a href=\"https://github.com/leanprover-community/mathlib4/pull/18333\">#18333</a>\\n\\nPlease review this PR. At the end of the month this diff will land in .</p>\n</blockquote>",
        "id": 479266595,
        "sender_full_name": "Johan Commelin's bot",
        "timestamp": 1730119400
    },
    {
        "content": "<p>The formatting seems off</p>",
        "id": 479266780,
        "sender_full_name": "YaÃ«l Dillies",
        "timestamp": 1730119452
    },
    {
        "content": "<p>I hope this will be fixed tomorrow</p>",
        "id": 479266952,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1730119513
    },
    {
        "content": "<p>The PR itself still seems fine</p>",
        "id": 479267008,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1730119532
    },
    {
        "content": "<p>I pushed a fix. Somehow <code>simp</code> was getting in a loop in one place.</p>",
        "id": 479292770,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1730126782
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"321459\">@Damiano Testa</span> The test for <code>MinImports</code> is failing on this one. It seems like now there are no messages generated a bunch of times... Could you please take a look?</p>",
        "id": 479398832,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1730175787
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"321459\">@Damiano Testa</span>, the actual problem is that you are now testing the \"increased by N\" messages, which are super fragile. It can't be on whoever touches these files to update these tests every time.</p>",
        "id": 479408968,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1730183242
    },
    {
        "content": "<p>Could you please (on <code>master</code>) change these tests? Removing them, adding a flag that suppressed \"increased by N\", etc?</p>",
        "id": 479409009,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1730183271
    },
    {
        "content": "<p>Oh, I should have though that having \"moving tests\" was not a good idea!</p>",
        "id": 479414076,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1730186204
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/18372\">#18372</a></p>",
        "id": 479414079,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1730186205
    },
    {
        "content": "<p>It simply prints <code>X</code> if the filepath starts with <code>test</code>.</p>",
        "id": 479414103,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1730186222
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"112680\">@Johan Commelin</span> </p>\n<p>By the way, \"live\" messages on the <code>minImports</code> linter are a little flaky, since linters do not really have a good mechanism for propagating information between different commands.  Using the <code>IO.Ref</code> as for this linter works well for a \"linear\" run, where the file is built from top to bottom.</p>\n<p>As soon as there is some recalculation to be done, messages are off.  This may explain why you were seeing \"empty\" messages: the <code>IO.Ref</code> counter had already accumulated all import increases and when the linter revisited an old command, it now did not detect a change.</p>",
        "id": 479414493,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1730186419
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 479447873,
        "sender_full_name": "Joachim Breitner",
        "timestamp": 1730198451
    },
    {
        "content": "<p>This one has now been rebased on current <code>master</code> so that it includes Damiano's changes.<br>\nIt will auto-merge if it passes CI.</p>",
        "id": 479511343,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1730216700
    },
    {
        "content": "<p>It's still failing <span aria-label=\"cry\" class=\"emoji emoji-1f622\" role=\"img\" title=\"cry\">:cry:</span> </p>\n<p>I won't be able to see what is going on for a couple of hours, though.</p>",
        "id": 479519323,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1730219071
    },
    {
        "content": "<p>However, as the messages are empty, I wonder if for some reason the linter is turned off on that file...</p>",
        "id": 479519531,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1730219138
    },
    {
        "content": "<p>I should have fixed the build on nightly and <a href=\"https://github.com/leanprover-community/mathlib4/pull/18405\">#18405</a> is the mathlib adaptation PR.</p>",
        "id": 479532672,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1730223464
    },
    {
        "content": "<p>The required change was to add <code>set_option linter.minImports true</code> somewhere in the test file: I do not know why this was not necessary before the nightly and became necessary, but seems to have fixed the tests.</p>",
        "id": 479533541,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1730223788
    },
    {
        "content": "<p>I was also told by shake that there was a redundant import in the flexible linter, so I removed it, but this may be the consequence of some upstreaming of declarations, since the same change does not seems to work on master.</p>",
        "id": 479533634,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1730223829
    },
    {
        "content": "<p>Thanks</p>",
        "id": 479535705,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1730224601
    },
    {
        "content": "<p><img alt=\":merge:\" class=\"emoji\" src=\"https://avatars.zulip.com/3121/emoji/images/37577b95.png\" title=\"merge\">'d</p>",
        "id": 479572396,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1730239304
    }
]