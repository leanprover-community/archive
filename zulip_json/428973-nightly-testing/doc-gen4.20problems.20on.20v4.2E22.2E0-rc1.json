[
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"395550\">@Henrik Böving</span>, might you be able to look at <a href=\"https://github.com/leanprover/doc-gen4/pull/302\">https://github.com/leanprover/doc-gen4/pull/302</a>?</p>",
        "id": 526387404,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1751285806
    },
    {
        "content": "<p>I fixed all but one error which I've asked Kyle about</p>",
        "id": 526389416,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1751286436
    },
    {
        "content": "<p>I think the remaining error is actually a question for <span class=\"user-mention\" data-user-id=\"221921\">@Marc Huisinga</span>, as the change occurs in <a href=\"https://github.com/leanprover/lean4/pull/8511\">lean#8511</a>.</p>",
        "id": 526392645,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1751287474
    },
    {
        "content": "<p>Ah, but <span class=\"user-mention\" data-user-id=\"221921\">@Marc Huisinga</span> is on a tropical island.</p>",
        "id": 526392724,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1751287497
    },
    {
        "content": "<p>Well he is not going to answer for the forseeable future :D</p>",
        "id": 526392727,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1751287499
    },
    {
        "content": "<p>My guess is that we just call</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">sigStx</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">infos</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">withTheReader</span><span class=\"w\"> </span><span class=\"n\">Core</span><span class=\"bp\">.</span><span class=\"n\">Context</span><span class=\"w\"> </span><span class=\"o\">({</span><span class=\"w\"> </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"n\">currNamespace</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"bp\">.</span><span class=\"n\">getPrefix</span><span class=\"w\"> </span><span class=\"o\">})</span><span class=\"w\"> </span><span class=\"bp\">&lt;|</span>\n<span class=\"w\">    </span><span class=\"n\">PrettyPrinter</span><span class=\"bp\">.</span><span class=\"n\">delabCore</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">delab</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">PrettyPrinter</span><span class=\"bp\">.</span><span class=\"n\">Delaborator</span><span class=\"bp\">.</span><span class=\"n\">delabConstWithSignature</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>at least, it type checks. :-)</p>",
        "id": 526392886,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1751287541
    },
    {
        "content": "<p>Are our tests in CI robust enough that this is worth a try?</p>",
        "id": 526392964,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1751287564
    },
    {
        "content": "<p>I wouldn't expect something to fail if this prints out whatever, we probably have to visually inspect the doc-gen output to see if it did the right thing <span aria-label=\"tm\" class=\"emoji emoji-2122\" role=\"img\" title=\"tm\">:tm:</span></p>",
        "id": 526393100,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1751287610
    },
    {
        "content": "<p>Is there any doc-gen output that we can inspect merely by running CI?</p>",
        "id": 526393206,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1751287643
    },
    {
        "content": "<p>I usually just run <code>lake build DocGen4:docs</code> and look at it locally</p>",
        "id": 526393264,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1751287662
    },
    {
        "content": "<p>Well that was not what I was hoping to see:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">stderr</span><span class=\"o\">:</span>\n<span class=\"n\">ld64</span><span class=\"bp\">.</span><span class=\"n\">lld</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">undefined</span><span class=\"w\"> </span><span class=\"n\">symbol</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">lean_inc_ref_cold</span>\n</code></pre></div>",
        "id": 526393412,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1751287708
    },
    {
        "content": "<p>Did you <code>lake clean</code> in between?</p>",
        "id": 526393474,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1751287727
    },
    {
        "content": "<p>that fixed this for me</p>",
        "id": 526393505,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1751287736
    },
    {
        "content": "<p>Yeah, my voodoo fix is not right, lots of </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">PANIC</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">PrettyPrinter</span><span class=\"bp\">.</span><span class=\"n\">Delaborator</span><span class=\"bp\">.</span><span class=\"n\">delabConst</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">PrettyPrinter</span><span class=\"bp\">.</span><span class=\"n\">Delaborator</span><span class=\"bp\">.</span><span class=\"n\">Builtins</span><span class=\"o\">:</span><span class=\"mi\">95</span><span class=\"o\">:</span><span class=\"mi\">35</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">unreachable</span><span class=\"w\"> </span><span class=\"n\">code</span><span class=\"w\"> </span><span class=\"n\">has</span><span class=\"w\"> </span><span class=\"n\">been</span><span class=\"w\"> </span><span class=\"n\">reached</span>\n<span class=\"n\">backtrace</span><span class=\"o\">:</span>\n</code></pre></div>",
        "id": 526393593,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1751287768
    },
    {
        "content": "<p>:D</p>",
        "id": 526393616,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1751287775
    },
    {
        "content": "<p>so we wait for our local pretty printing magician</p>",
        "id": 526393642,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1751287783
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"395550\">@Henrik Böving</span>, still there? I have another candidate fix (backport the code from before <a href=\"https://github.com/leanprover-community/mathlib4/pull/8511\">#8511</a>!). doc-gen4 builds, how do I view anything after <code>lake build DocGen4:docs</code>?</p>",
        "id": 526403640,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1751290527
    },
    {
        "content": "<p>you go to <code>.lake/build/doc</code> and run something like <code>python3 -m http.server</code></p>",
        "id": 526403712,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1751290552
    },
    {
        "content": "<p>Okay, superficially seems okay, at least, there are signatures. :-)</p>",
        "id": 526404086,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1751290663
    },
    {
        "content": "<p>Great, I would personally still prefer for Kyle to sign off on that stuff or are we under pressure here?</p>",
        "id": 526404325,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1751290728
    },
    {
        "content": "<p>No, it's fine to wait until tomorrow, as I'm going to fall asleep before I could get the Mathlib bump PR merged anyway.</p>",
        "id": 526404429,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1751290760
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"306601\">@Kyle Miller</span>, when you're coming to this, you'll see my \"let's restore the pre <a href=\"https://github.com/leanprover/lean4/pull/8511\">lean#8511</a> code\" in <a href=\"https://github.com/leanprover/doc-gen4/pull/302\">https://github.com/leanprover/doc-gen4/pull/302</a>. Feel free to remove that commit and replace it with whatever is sensible. :-)</p>",
        "id": 526404637,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1751290811
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110087\">@Kim Morrison</span> <span class=\"user-mention\" data-user-id=\"395550\">@Henrik Böving</span> Updated the PR. I tested it locally, but it probably would be good to spot check the output once more.</p>",
        "id": 526421582,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1751295221
    },
    {
        "content": "<p>will do, thanks!</p>",
        "id": 526424046,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1751295874
    },
    {
        "content": "<p>Yeah it looks fine to me <span aria-label=\"thumbs up\" class=\"emoji emoji-1f44d\" role=\"img\" title=\"thumbs up\">:thumbs_up:</span></p>",
        "id": 526428378,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1751297149
    },
    {
        "content": "<p><img alt=\":merge:\" class=\"emoji\" src=\"https://avatars.zulip.com/3121/emoji/images/37577b95.png\" title=\"merge\">'d</p>",
        "id": 526497085,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1751323706
    }
]