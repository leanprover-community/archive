[
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/14846\">#14846</a></p>",
        "id": 452152479,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1721240146
    },
    {
        "content": "<p>The script seems to have worked very nicely this time!</p>",
        "id": 452152510,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1721240153
    },
    {
        "content": "<p>My complaint is that I had to deal with essentially the same merge conflicts three times over on the three merges... But I'm not sure this is avoidable in general.</p>",
        "id": 452152975,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1721240248
    },
    {
        "content": "<p>I don't know the script, so this maybe be completely off, or maybe you know about that already, but maybe enabling <code>rerere</code> can help?<br>\n<a href=\"https://git-scm.com/book/en/v2/Git-Tools-Rerere\">https://git-scm.com/book/en/v2/Git-Tools-Rerere</a></p>",
        "id": 452198296,
        "sender_full_name": "Joachim Breitner",
        "timestamp": 1721253057
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110087\">@Kim Morrison</span> Maybe we should consider not squash-merging in the 2nd step?</p>",
        "id": 452254709,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1721282440
    },
    {
        "content": "<p>Because I think that makes it really hard for git to figure things out.</p>",
        "id": 452254745,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1721282461
    },
    {
        "content": "<p>I don't know rerere, will look into that.</p>",
        "id": 452254784,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1721282474
    },
    {
        "content": "<p>Cool! rerere seems to be exactly what would help us here</p>",
        "id": 452276456,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1721289768
    },
    {
        "content": "<p>merci <span class=\"user-mention\" data-user-id=\"470149\">@Joachim Breitner</span> !</p>",
        "id": 452276527,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1721289785
    },
    {
        "content": "<p>I suppose we could modify the script with</p>\n<div class=\"codehilite\" data-code-language=\"Bash\"><pre><span></span><code><span class=\"c1\"># near start of script</span>\n\n<span class=\"nv\">ORIG_RERERE</span><span class=\"o\">=</span><span class=\"k\">$(</span>git<span class=\"w\"> </span>config<span class=\"w\"> </span>rerere.enabled<span class=\"k\">)</span>\ngit<span class=\"w\"> </span>config<span class=\"w\"> </span>rerere.enabled<span class=\"w\"> </span><span class=\"nb\">true</span>\n\n\n...\n...\n\n<span class=\"c1\"># near end of script</span>\n\ngit<span class=\"w\"> </span>config<span class=\"w\"> </span>rerere.enabled<span class=\"w\"> </span><span class=\"nv\">$ORIG_RERERE</span>\n</code></pre></div>",
        "id": 452349406,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1721310470
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110087\">@Kim Morrison</span> what do you think of that?</p>",
        "id": 452349442,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1721310481
    },
    {
        "content": "<p>I'm not certain this will actually solve the problem, because the experience I had last time was that I needed to resolve the same conflict multiple times, but \"in different directions\" (i.e. sometimes the correct choice was in \"ours\", sometimes in \"theirs\"). So I think we should first investigate just not squash merging!</p>",
        "id": 452394912,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1721322431
    },
    {
        "content": "<p>As a data point, I just did <a href=\"https://github.com/leanprover-community/batteries/pull/886\">batteries#886</a> using <code>git merge nightly-testing</code> (without the <code>--squash</code>) and everything worked fine. However this didn't have any juicy conflicts to resolve.</p>",
        "id": 452396874,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1721322984
    },
    {
        "content": "<p>Again from the sidelines, but avoiding squash and rebase helps a lot avoiding stupid conflicts with git, so certainly worth trying</p>",
        "id": 452418586,
        "sender_full_name": "Joachim Breitner",
        "timestamp": 1721329047
    },
    {
        "content": "<p>I hope rerere would be smart enough to figure out the \"ours\" vs \"theirs\" bit... But maybe not...</p>",
        "id": 452485886,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1721364596
    },
    {
        "content": "<p>I'm happy to remove the squash from the script. Shouldn't hurt too much. Shall I PR this already, or do you want to try it out in a copy of the script for 1 or 2 days?</p>",
        "id": 452486050,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1721364643
    },
    {
        "content": "<p>Let's just change it.</p>",
        "id": 452563359,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1721393321
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/14907\">#14907</a></p>",
        "id": 452566708,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1721394527
    },
    {
        "content": "<p>Will merge once we resume.</p>",
        "id": 452572748,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1721396565
    }
]