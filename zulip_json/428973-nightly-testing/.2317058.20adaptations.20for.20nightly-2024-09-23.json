[
    {
        "content": "<blockquote>\n<p>chore: adaptations for nightly-2024-09-23 <a href=\"https://github.com/leanprover-community/mathlib4/pull/17058\">#17058</a></p>\n</blockquote>",
        "id": 472283505,
        "sender_full_name": "nightly bump bot",
        "timestamp": 1727110623
    },
    {
        "content": "<p>Tonight, I used the script with the modifications proposed in <a href=\"https://github.com/leanprover-community/mathlib4/pull/17060\">#17060</a> .<br>\nIn particular, the script now uses <code>zulip-send</code> to send this message, if the zulip cli is installed.</p>",
        "id": 472284840,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1727111039
    },
    {
        "content": "<p>Hmm, something does seem to have gone wrong, however, the PR is quite broken. :-(</p>",
        "id": 472356452,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1727135391
    },
    {
        "content": "<p>Probably not any problem with <a href=\"https://github.com/leanprover-community/mathlib4/pull/17060\">#17060</a> (which I've merged), but perhaps we used the head of <code>nightly-testing</code> which had already failed again?</p>",
        "id": 472356561,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1727135420
    },
    {
        "content": "<p>Looks like changes to Aesop: <a href=\"https://github.com/leanprover-community/aesop/commit/29cf094e84ae9852f0011b47b6ddc684ffe4be5f\">https://github.com/leanprover-community/aesop/commit/29cf094e84ae9852f0011b47b6ddc684ffe4be5f</a></p>",
        "id": 472356640,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1727135461
    },
    {
        "content": "<p>Pinging <span class=\"user-mention\" data-user-id=\"256311\">@Jannis Limperg</span></p>",
        "id": 472356710,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1727135501
    },
    {
        "content": "<p>Lots of copies of</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">warning</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">././././</span><span class=\"n\">Mathlib</span><span class=\"bp\">/</span><span class=\"n\">Data</span><span class=\"bp\">/</span><span class=\"n\">Finset</span><span class=\"bp\">/</span><span class=\"n\">NAry</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mi\">97</span><span class=\"o\">:</span><span class=\"mi\">8</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Apply</span><span class=\"w\"> </span><span class=\"n\">builder</span><span class=\"w\"> </span><span class=\"n\">was</span><span class=\"w\"> </span><span class=\"n\">used</span><span class=\"w\"> </span><span class=\"n\">for</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"n\">conclusion</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">↔</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"bp\">.</span><span class=\"w\"> </span><span class=\"n\">You</span><span class=\"w\"> </span><span class=\"n\">probably</span><span class=\"w\"> </span><span class=\"n\">want</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">use</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"n\">builder</span><span class=\"bp\">.</span>\n<span class=\"n\">Use</span><span class=\"w\"> </span><span class=\"ss\">`set_option</span><span class=\"w\"> </span><span class=\"n\">aesop</span><span class=\"bp\">.</span><span class=\"n\">warn</span><span class=\"bp\">.</span><span class=\"n\">applyIff</span><span class=\"w\"> </span><span class=\"n\">false</span><span class=\"bp\">`</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">disable</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"n\">warning</span><span class=\"bp\">.</span>\n</code></pre></div>\n<p>It's not particularly an actionable error message (beyond turning off the warning).</p>",
        "id": 472356824,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1727135545
    },
    {
        "content": "<p>(Separately, Jannis, if it's not a huge pain it would be helpful if you could push changes to Aesop via PRs, even if you just merge them instantly. It's easy to reference if there is a PR number rather than just a hash.)</p>",
        "id": 472356968,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1727135622
    },
    {
        "content": "<p>For now I'll just add</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"w\">  </span><span class=\"bp\">⟨</span><span class=\"ss\">`aesop.warn.applyIff</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">false</span><span class=\"bp\">⟩</span><span class=\"w\"> </span><span class=\"c1\">-- This became a problem after https://github.com/leanprover-community/aesop/commit/29cf094e84ae9852f0011b47b6ddc684ffe4be5f</span>\n</code></pre></div>\n<p>in the lakefile (presumably I'll need to do this on <code>master</code> as well).</p>",
        "id": 472357064,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1727135653
    },
    {
        "content": "<p>(I've re-merged <code>nightly-testing</code> into this PR.)</p>",
        "id": 472372304,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1727142296
    },
    {
        "content": "<p>Thanks for all the debugging! I will think about how we can make the process more robust.</p>",
        "id": 472389809,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1727149548
    },
    {
        "content": "<p>So now the diff is quite large. Should we try to split this into more reviewable chunks?</p>",
        "id": 472403160,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1727157165
    },
    {
        "content": "<p>No, the diff is bigger than it should be.</p>",
        "id": 472404642,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1727157881
    },
    {
        "content": "<p>Just need to merge master into <code>bump/v4.13.0</code></p>",
        "id": 472404655,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1727157889
    },
    {
        "content": "<p>when I merged nightly-testing into <a href=\"https://github.com/leanprover-community/mathlib4/pull/17058\">#17058</a> I brought a bunch more changes from master, sorry</p>",
        "id": 472404672,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1727157904
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110087\">Kim Morrison</span> <a href=\"#narrow/stream/428973-nightly-testing/topic/.2317058.20adaptations.20for.20nightly-2024-09-23/near/472404655\">said</a>:</p>\n<blockquote>\n<p>Just need to merge master into <code>bump/v4.13.0</code></p>\n</blockquote>\n<p>I did that, but the diff is still pretty large.</p>",
        "id": 472405769,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1727158519
    },
    {
        "content": "<p>It still has changes from master...</p>",
        "id": 472430253,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1727165656
    },
    {
        "content": "<p>I guess we <em>also</em> need to merge <code>bump/v4.13.0</code> into <code>bump/nightly-2024-09-23</code>.</p>",
        "id": 472430398,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1727165683
    },
    {
        "content": "<p>That dropped it from 94 files changed to 43</p>",
        "id": 472430608,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1727165744
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110087\">Kim Morrison</span> <a href=\"#narrow/stream/428973-nightly-testing/topic/.2317058.20adaptations.20for.20nightly-2024-09-23/near/472430398\">said</a>:</p>\n<blockquote>\n<p>I guess we <em>also</em> need to merge <code>bump/v4.13.0</code> into <code>bump/nightly-2024-09-23</code>.</p>\n</blockquote>\n<p>aah, of course <span aria-label=\"man facepalming\" class=\"emoji emoji-1f926-200d-2642\" role=\"img\" title=\"man facepalming\">:man_facepalming:</span></p>",
        "id": 472432213,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1727166208
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110087\">Kim Morrison</span> <a href=\"#narrow/stream/428973-nightly-testing/topic/.2317058.20adaptations.20for.20nightly-2024-09-23/near/472430608\">said</a>:</p>\n<blockquote>\n<p>That dropped it from 94 files changed to 43</p>\n</blockquote>\n<p>And the size of the diff is now +112 −98, instead of &gt; 700</p>",
        "id": 472432369,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1727166251
    },
    {
        "content": "<p>This diff now looks as expected to me. It is mainly the fallout of using <code>outParam</code>s to adapt to the TC speedup.<br>\nAnother pair of eyes wouldn't hurt though.</p>",
        "id": 472432609,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1727166331
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110087\">Kim Morrison</span> <a href=\"#narrow/stream/428973-nightly-testing/topic/.2317058.20adaptations.20for.20nightly-2024-09-23/near/472356968\">said</a>:</p>\n<blockquote>\n<p>(Separately, Jannis, if it's not a huge pain it would be helpful if you could push changes to Aesop via PRs, even if you just merge them instantly. It's easy to reference if there is a PR number rather than just a hash.)</p>\n</blockquote>\n<p>I'll try to remember to do this. I usually work on feature branches anyway, so this shouldn't be much additional effort.</p>",
        "id": 472441983,
        "sender_full_name": "Jannis Limperg",
        "timestamp": 1727169144
    },
    {
        "content": "<p>Yäel has left some comments</p>",
        "id": 472454814,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1727172342
    },
    {
        "content": "<p>I left another one.</p>",
        "id": 472456538,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1727172841
    },
    {
        "content": "<p>I've merged this one now</p>",
        "id": 472518391,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1727191162
    }
]