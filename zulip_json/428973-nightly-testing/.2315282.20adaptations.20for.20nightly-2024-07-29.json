[
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/15282\">#15282</a></p>",
        "id": 454982023,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1722299934
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"112680\">@Johan Commelin</span>, this time the script was not really helpful. I messed up the merge of <code>master</code> into <code>bump/v4.11.0</code>, and had to undo it and try again. On the second run of the script, something went very wrong (perhaps because <code>bump/nightly-2024-07-29</code> already existed??) and it ended up merging <code>nightly-testing</code> into <code>bump/v4.11.0</code> directly instead of <code>bump/nightly-2024-07-29</code>.</p>\n<p>I then nuked everything, deleting both local and remove <code>bump/nightly-2024-07-29</code>, and everything went through cleanly.</p>",
        "id": 454982445,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1722300060
    },
    {
        "content": "<p>In particular I saw:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">###</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">auto</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">create</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">new</span><span class=\"w\"> </span><span class=\"n\">branch</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">bump</span><span class=\"bp\">/</span><span class=\"n\">nightly</span><span class=\"bp\">-</span><span class=\"mi\">2024</span><span class=\"bp\">-</span><span class=\"mi\">07</span><span class=\"bp\">-</span><span class=\"mi\">29</span><span class=\"bp\">'</span><span class=\"w\"> </span><span class=\"n\">and</span><span class=\"w\"> </span><span class=\"n\">merge</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">latest</span><span class=\"w\"> </span><span class=\"n\">changes</span><span class=\"w\"> </span><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">origin</span><span class=\"bp\">/</span><span class=\"n\">nightly</span><span class=\"bp\">-</span><span class=\"n\">testing'</span>\n<span class=\"n\">fatal</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">branch</span><span class=\"w\"> </span><span class=\"n\">named</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">bump</span><span class=\"bp\">/</span><span class=\"n\">nightly</span><span class=\"bp\">-</span><span class=\"mi\">2024</span><span class=\"bp\">-</span><span class=\"mi\">07</span><span class=\"bp\">-</span><span class=\"mi\">29</span><span class=\"bp\">'</span><span class=\"w\"> </span><span class=\"n\">already</span><span class=\"w\"> </span><span class=\"n\">exists</span>\n</code></pre></div>\n<p>but then a merge going ahead anyway.</p>\n<p>Could you take a look at the error handling in the script? I think we just want to <em>stop</em> if anything goes wrong.</p>",
        "id": 454982838,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1722300194
    },
    {
        "content": "<p>Whoops, that isn't helpful. I guess there should be some flags at the top of the script.</p>",
        "id": 455031181,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1722316944
    },
    {
        "content": "<p>Right. <code>set -e</code> should work</p>",
        "id": 455031245,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1722316971
    },
    {
        "content": "<p>Took a while to get to it, but voila: <a href=\"https://github.com/leanprover-community/mathlib4/pull/15298\">#15298</a></p>",
        "id": 455072148,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1722329918
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/15282\">#15282</a> has a maintainer merge from <span class=\"user-mention\" data-user-id=\"307953\">@Ruben Van de Velde</span>, but needs a <span aria-label=\"peace sign\" class=\"emoji emoji-270c\" role=\"img\" title=\"peace sign\">:peace_sign:</span> still. This is now blocking making the next adaptation PR. (And tomorrow is <code>v4.11.0-rc1</code>, so timing is getting tight now.)</p>",
        "id": 455247110,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1722384597
    },
    {
        "content": "<p>Do we keep log of definitions/theorems that changed names/signatures while being moved to core?</p>",
        "id": 455263937,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1722394229
    },
    {
        "content": "<p>E.g., I see that <code>Sigma.exists</code> got renamed to <code>Sigma.exists'</code> because of a conflicting lemma with a different statement in core. It would be nice to have a comment somewhere telling what changed.</p>",
        "id": 455264242,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1722394308
    },
    {
        "content": "<p>(<code>PSigma</code>, not <code>Sigma</code>)</p>",
        "id": 455265721,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1722394839
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"214703\">Yury G. Kudryashov</span> <a href=\"#narrow/stream/428973-nightly-testing/topic/.2315282.20adaptations.20for.20nightly-2024-07-29/near/455263937\">said</a>:</p>\n<blockquote>\n<p>Do we keep log of definitions/theorems that changed names/signatures while being moved to core?</p>\n</blockquote>\n<p>No, although if someone sets up some infrastructure for doing so conveniently I'm happy to cooperate. :-)</p>",
        "id": 455266296,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1722395022
    },
    {
        "content": "<p>Regarding the <code>PSigma.exists</code> -&gt; <code>PSigma.exists'</code> rename, the new <code>PSigma.exists</code> in Lean was poorly named and will change again in nightly-2024-07-31 (i.e. a few hours time). I'll add an adaptation note for <a href=\"https://github.com/leanprover-community/mathlib4/pull/15282\">#15282</a> reminding me to change the name in Mathlib back. (EDIT: done)</p>",
        "id": 455266421,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1722395088
    },
    {
        "content": "<p>When I need to do renames that can't be captured by <code>@[deprecated]</code>, or signature changes, I'm making sure Mathlib still works, and then relying on reviewers to complain if the impact is too much.</p>",
        "id": 455266762,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1722395276
    },
    {
        "content": "<p>I'm too sleepy now to hit the \"merge\" button. I'll try to review in the morning unless someone beats me to it.</p>",
        "id": 455277578,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1722399403
    },
    {
        "content": "<p><img alt=\":merge:\" class=\"emoji\" src=\"https://avatars.zulip.com/3121/emoji/images/37577b95.png\" title=\"merge\"></p>",
        "id": 455293550,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1722406975
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"112680\">Johan Commelin</span> <a href=\"#narrow/stream/428973-nightly-testing/topic/.2315282.20adaptations.20for.20nightly-2024-07-29/near/455072148\">said</a>:</p>\n<blockquote>\n<p>Took a while to get to it, but voila: <a href=\"https://github.com/leanprover-community/mathlib4/pull/15298\">#15298</a></p>\n</blockquote>\n<p>Oops, <span class=\"user-mention\" data-user-id=\"112680\">@Johan Commelin</span> , <code>set -e</code> causes all the conflicted merges to fail the script. I'll do this one manually</p>",
        "id": 455330280,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1722417962
    },
    {
        "content": "<p>Aahrg! I'm sorry about that. I'll try to spend a few more brain cycles on this.</p>",
        "id": 455330844,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1722418143
    },
    {
        "content": "<p>Just a reminder, <span class=\"user-mention\" data-user-id=\"112680\">@Johan Commelin</span>, that this is still broken.</p>",
        "id": 456413912,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1722820758
    },
    {
        "content": "<p>Johan is on holiday for the rest of the week</p>",
        "id": 456457500,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1722841023
    }
]