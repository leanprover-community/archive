[
    {
        "content": "<p>I'm trying to update doc-gen4 to <code>v4.19.0-rc1</code>, but running into linking problems with md4lean.</p>\n<p>Please see <a href=\"https://github.com/leanprover/doc-gen4/pull/272\">chore: bump toolchain to v4.19.0-rc1</a>, which is failing to build with</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">ld64</span><span class=\"bp\">.</span><span class=\"n\">lld</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">undefined</span><span class=\"w\"> </span><span class=\"n\">symbol</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"n\">lean_alloc_small</span>\n<span class=\"bp\">&gt;&gt;&gt;</span><span class=\"w\"> </span><span class=\"n\">referenced</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"bp\">././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">MD4Lean</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">libleanmd4c</span><span class=\"bp\">.</span><span class=\"n\">a</span><span class=\"o\">(</span><span class=\"n\">wrapper</span><span class=\"bp\">.</span><span class=\"n\">o</span><span class=\"o\">):(</span><span class=\"n\">symbol</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"n\">lean_alloc_ctor_memory</span><span class=\"bp\">+</span><span class=\"mi\">0</span><span class=\"n\">x78</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>I'm not sure exactly which combination of <span class=\"user-mention\" data-user-id=\"366779\">@Jz Pan</span>  (author of md4lean), <span class=\"user-mention\" data-user-id=\"395550\">@Henrik Böving</span> (doc-gen4), and <span class=\"user-mention\" data-user-id=\"315577\">@Mac Malone</span> (lake) will be needed to solve this, but hopefully at least one of you can investigate!</p>",
        "id": 509650527,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1743587483
    },
    {
        "content": "<p>(Note that we have other problems with v4.19.0-rc1, with both aesop and lean4checker, so while this is blocking completing the release, it is not the <em>only</em> blocker. :-)</p>",
        "id": 509650629,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1743587512
    },
    {
        "content": "<p>I'm not sure about this, seems that Lean&lt;-&gt;C API has changed?</p>",
        "id": 509651367,
        "sender_full_name": "Jz Pan",
        "timestamp": 1743587733
    },
    {
        "content": "<p>I don't think the API has changed (<code>lean_alloc_ctor</code> is going nowhere), but rather the linking mechanism has?</p>",
        "id": 509651421,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1743587748
    },
    {
        "content": "<p>I see that you pulled a PR 6 in my repo, and it complies successfully. Does it fix the problem?</p>",
        "id": 509651722,
        "sender_full_name": "Jz Pan",
        "timestamp": 1743587846
    },
    {
        "content": "<p>It doesn't fail to build though does it? At least the CI is going through just fine?</p>",
        "id": 509652834,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1743588226
    },
    {
        "content": "<p>Yes, it's just <code>lake build</code> that fails, CI is fine.</p>",
        "id": 509653098,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1743588316
    },
    {
        "content": "<p><code>lake build</code> of doc-gen? That goes through on my side without errors.</p>",
        "id": 509654343,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1743588747
    },
    {
        "content": "<p>and indeed, after a <code>lake clean</code>, it works for me too.</p>",
        "id": 509654564,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1743588825
    },
    {
        "content": "<p>Apologies for the noise here!</p>",
        "id": 509654580,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1743588829
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110087\">Kim Morrison</span> has marked this topic as resolved.</p>",
        "id": 509654587,
        "sender_full_name": "Notification Bot",
        "timestamp": 1743588831
    }
]