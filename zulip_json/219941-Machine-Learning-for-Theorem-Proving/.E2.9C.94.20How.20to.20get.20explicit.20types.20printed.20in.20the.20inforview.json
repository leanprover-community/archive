[
    {
        "content": "<p>Hello,<br>\nI am writing a program that would gather the sorries in a proof and reformulate them into small theorems.</p>\n<p>I am using <a href=\"https://github.com/leanprover-community/repl\">https://github.com/leanprover-community/repl</a> to gather the goals of the sorries.</p>\n<p>For a theorem like this:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">question</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"bp\">^</span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">≥</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(((</span><span class=\"n\">x</span><span class=\"bp\">^</span><span class=\"o\">(</span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">64</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)))</span><span class=\"bp\">^</span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>In infoview we will only see<br>\n<strong>x</strong> : ℝ<br>\n<strong>h</strong> : x ^ (1 / 3) ≥ 0<br>\n<strong>⊢</strong> (x ^ 3 / 64) ^ (1 / 3) = x / 4</p>\n<p>Then if I reformulate, it becomes</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">question</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"bp\">^</span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"mi\">3</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">≥</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"bp\">^</span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"mi\">64</span><span class=\"o\">)</span><span class=\"bp\">^</span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"mi\">3</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>which is incorrect because 1/3=0 in LEAN by integer division. We lose the type information in infoview, which gets output by the repl package as well.</p>\n<p>Does anyone have a good idea how to solve it?</p>\n<p>Thanks in advance!</p>",
        "id": 503630441,
        "sender_full_name": "Tianxiang Xia",
        "timestamp": 1741207717
    },
    {
        "content": "<p>Are you looking for <code>set_option pp.numericTypes true</code></p>",
        "id": 503630826,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1741207875
    },
    {
        "content": "<p>Perfect, thanks! How to know such options <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span></p>",
        "id": 503630929,
        "sender_full_name": "Tianxiang Xia",
        "timestamp": 1741207917
    },
    {
        "content": "<p>There's a lot of pretty-printer options, and typing <code>set_option pp.</code> and then using autocomplete (on VSCode or the web server) will find them.</p>",
        "id": 503630996,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1741207929
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"884272\">Tianxiang Xia</span> has marked this topic as resolved.</p>",
        "id": 503631165,
        "sender_full_name": "Notification Bot",
        "timestamp": 1741207999
    },
    {
        "content": "<p>The most comprehensive reference of these at the moment is the source code that defines them:</p>\n<p><a href=\"https://github.com/leanprover/lean4/blob/master/src/Lean/PrettyPrinter/Delaborator/Options.lean\">https://github.com/leanprover/lean4/blob/master/src/Lean/PrettyPrinter/Delaborator/Options.lean</a></p>\n<p>I think these will eventually be in the reference manual. <a href=\"https://lean-lang.org/doc/reference/latest/\">https://lean-lang.org/doc/reference/latest/</a></p>",
        "id": 503631472,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1741208111
    },
    {
        "content": "<p>Note that <code>h : x ^ (1 / 3) ≥ 0</code> does not imply <code>x ≥ 0</code> so your goal is probably false.</p>",
        "id": 503637576,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1741210252
    },
    {
        "content": "<p>Indeed, it was just an illustrative example. But I've suffered it before haha</p>",
        "id": 503638290,
        "sender_full_name": "Tianxiang Xia",
        "timestamp": 1741210509
    },
    {
        "content": "<p>In fact I suspect that x^(1/3) is always &gt;= 0</p>",
        "id": 503640202,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1741211154
    },
    {
        "content": "<p>Really? Why?</p>",
        "id": 503641422,
        "sender_full_name": "Tianxiang Xia",
        "timestamp": 1741211589
    },
    {
        "content": "<p>You can read the proof that it's true for -1 <a href=\"#narrow/channel/270676-lean4/topic/.E2.9C.94.20Weird.20.60ring.60performance.20and.20how.20to.20simplify.20.60.28x.5E3.29.5E.281.2F3.29.60/near/503549807\">here</a> and the ideas will generalize.</p>",
        "id": 503643159,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1741212167
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"884272\">Tianxiang Xia</span> <a href=\"#narrow/channel/219941-Machine-Learning-for-Theorem-Proving/topic/.E2.9C.94.20How.20to.20get.20explicit.20types.20printed.20in.20the.20inforview/near/503630929\">said</a>:</p>\n<blockquote>\n<p>Perfect, thanks! How to know such options <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span></p>\n</blockquote>\n<p>You can also list all options by using <code>#help option</code> (and there are similar lists using e.g. <code>#help tactic</code> or any of the other categories:  'attr', 'attribute', 'cat', 'cats', 'command', 'conv', 'note', 'option', 'tactic' or 'term')</p>",
        "id": 503796797,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1741268659
    }
]