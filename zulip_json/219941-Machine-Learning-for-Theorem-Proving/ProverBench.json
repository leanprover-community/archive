[
    {
        "content": "<p>As part of the DeepSeek-Prover 2 work (<a class=\"stream-topic\" data-stream-id=\"219941\" href=\"/#narrow/channel/219941-Machine-Learning-for-Theorem-Proving/topic/DeepSeek-Prover.20V2/with/515338707\">#Machine Learning for Theorem Proving &gt; DeepSeek-Prover V2</a>), they released a benchmark called <a href=\"https://huggingface.co/datasets/deepseek-ai/DeepSeek-ProverBench\">ProverBench</a> made of a combination of AIME '24 '25 problems and textbook problems in Number Theory, Algebra, Analysis, and Probability.</p>",
        "id": 515405915,
        "sender_full_name": "Jason Rute",
        "timestamp": 1746049881
    },
    {
        "content": "<p>They seem (like the recent CombiBench benchmark) to put auxiliary definitions above the theorem statement, which is a natural way to do it.</p>",
        "id": 515405929,
        "sender_full_name": "Jason Rute",
        "timestamp": 1746049887
    },
    {
        "content": "<p>I haven't looked at it yet, but I'm afraid---like the CombiBench benchmark in <a class=\"stream-topic\" data-stream-id=\"113488\" href=\"/#narrow/channel/113488-general/topic/CombiBench.20.3A.20A.20benchmark.20focusing.20on.20combinatorics.20problem/with/514856740\">#general &gt; CombiBench : A benchmark focusing on combinatorics problem</a> (and frankly most other recent benchmarks) that it will be filled with errors, making a significant percent of the problems either impossible or trivially true.  The report doesn't say what they did to prevent this.  <span class=\"user-mention\" data-user-id=\"481527\">@Huajian Xin</span>, I know you are not the main author, but do you (or another author) know what quality control was done on this benchmark?  (The <a href=\"https://github.com/deepseek-ai/DeepSeek-Prover-V2/blob/main/DeepSeek_Prover_V2.pdf\">report</a> doesn't address this.)</p>",
        "id": 515405993,
        "sender_full_name": "Jason Rute",
        "timestamp": 1746049917
    },
    {
        "content": "<p>Problem elementary_algebra__p1 is not true even in English:</p>\n<blockquote>\n<p>For a polynomial \\(P\\) of degree \\(n\\) where \\(P(i)\\) equals the remainder of \\(i\\) modulo 2 for each \\(i=0,1,\\dots,n\\), \\(P(n+1)\\) is 1 if \\(n\\) is even and 0 if \\(n\\) is odd.</p>\n</blockquote>",
        "id": 515418462,
        "sender_full_name": "Jason Rute",
        "timestamp": 1746056561
    },
    {
        "content": "<p>(Just consider the n=0 or n=1 cases.  The formalization is for polynomials over the integers, but I’m not sure what ring the original intended, but it isn’t true for n=0 for any ring.)</p>",
        "id": 515418844,
        "sender_full_name": "Jason Rute",
        "timestamp": 1746056798
    },
    {
        "content": "<p>The formal version of <code>elementary_algebra__p1</code> also doesn't mention degree at all, so even if the informal is true the translation is also wrong</p>",
        "id": 515420088,
        "sender_full_name": "Thomas Zhu",
        "timestamp": 1746057634
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 515421616,
        "sender_full_name": "Thomas Zhu",
        "timestamp": 1746058356
    },
    {
        "content": "<p>I’m pretty sure calculus__p1 makes no sense and can’t possibly be true.  The + C notation in calculus can’t translate into Lean in that way, right?!?!</p>",
        "id": 515444706,
        "sender_full_name": "Jason Rute",
        "timestamp": 1746073589
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">integral_f_eq_integralF_plus_C</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">):</span><span class=\"w\"> </span><span class=\"bp\">∫</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">integralf</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n</code></pre></div>\n<p>Where f and integralf are particular functions from the reals to the reals.</p>",
        "id": 515444877,
        "sender_full_name": "Jason Rute",
        "timestamp": 1746073687
    },
    {
        "content": "<p>It would be kind of hilarious to define <code>notation \" +C\"</code> that maps a function to its quotient by \"these functions are equal up to a constant shift\" equivalence class, and then you have <code>∫</code> mean 'indefinite integration' into that class</p>",
        "id": 515454744,
        "sender_full_name": "Alex Meiburg",
        "timestamp": 1746080327
    },
    {
        "content": "<p>... but yes since that isn't currently in mathlib, that problem's definitely wrong. C becomes an implicit argument to the theorem that can be anything.</p>",
        "id": 515454958,
        "sender_full_name": "Alex Meiburg",
        "timestamp": 1746080475
    },
    {
        "content": "<p>This theorem is correct \"by accident\" (<code>e</code> can be any real nunber):</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"c\">/-</span>\n<span class=\"cm\">The derivative of \\(f(x)=e^x\\) at \\(x=e\\) is \\(e^e\\).</span>\n<span class=\"cm\">-/</span>\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Real</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">derivative_of_exp_at_e</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">deriv</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">exp</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">e</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">exp</span><span class=\"w\"> </span><span class=\"n\">e</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n</code></pre></div>",
        "id": 515455415,
        "sender_full_name": "Alex Meiburg",
        "timestamp": 1746080807
    },
    {
        "content": "<p>There's also many many instances in there of using <code>axiom</code>, and incorrectly. Like this one:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"c\">/-</span>\n<span class=\"cm\">Let T: Z × Z → Z be a linear function satisfying T(1, 0) = 3 and T(0, 1) = -5. Then for all (x, y) ∈ Z × Z, T(x, y) = 3x - 5y.</span>\n<span class=\"cm\">-/</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Int</span><span class=\"w\"> </span><span class=\"n\">AddMonoidHom</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">T</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"w\"> </span><span class=\"bp\">×</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"w\"> </span><span class=\"bp\">→+</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">)</span>\n\n<span class=\"kn\">axiom</span><span class=\"w\"> </span><span class=\"n\">T10</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">T</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">3</span>\n\n<span class=\"kn\">axiom</span><span class=\"w\"> </span><span class=\"n\">T01</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">T</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"mi\">5</span>\n\n<span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">T_expression</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">T</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>which means that \"given any function T : ℤ × ℤ →+ ℤ, it is true that T (1, 0) = 3\", which is of course not true</p>",
        "id": 515455490,
        "sender_full_name": "Alex Meiburg",
        "timestamp": 1746080853
    },
    {
        "content": "<p>Oh man, roughly 1/3rd of the dataset has <code>axiom</code> in it. That's too bad.</p>",
        "id": 515455620,
        "sender_full_name": "Alex Meiburg",
        "timestamp": 1746080947
    },
    {
        "content": "<p>At least some of the <code>axiom</code>s seem to be because they are formalizing problems that have subproblems. For example if the informal problem has subproblems (a) and (b), (a) will be formalized as <code>theorem a : A := by</code> and (b) as <code>axiom a : A; theorem b : B := by</code></p>",
        "id": 515459571,
        "sender_full_name": "Thomas Zhu",
        "timestamp": 1746083344
    },
    {
        "content": "<p>axioms are still unnecessary there, why not just add the fact as a hypothesis</p>",
        "id": 515460139,
        "sender_full_name": "Sabbir Rahman",
        "timestamp": 1746083675
    },
    {
        "content": "<p>For number_theory__p26,</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"c\">/-</span>\n<span class=\"cm\">For any real number α, there exist infinitely many pairs of positive integers (p, q) such that |α - p/q| &lt; 1/q^2</span>\n<span class=\"cm\">-/</span>\n<span class=\"kd\">theorem</span><span class=\"w\"> </span><span class=\"n\">infinitely_many_positive_integer_pairs_for_real_approximation</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">  </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"bp\">&gt;</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">&gt;</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p_n</span><span class=\"w\"> </span><span class=\"n\">q_n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h_n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">q_n</span><span class=\"w\"> </span><span class=\"bp\">&gt;</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">),</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p_n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"n\">q_n</span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"n\">q_n</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>there seems to be a few errors. First of all, <code>p</code> and <code>q</code> don't do anything at all. Also, there's nothing stating that there needs to be a distinct pair for each natural number <code>n</code>; the solution could just find a single pair and keep reusing that. But more importantly, the natural language problem itself seems impossible, since if <code>α</code> is <code>-2</code> then <code>|α - (p_n : ℝ) / q_n| ≥ 2 &gt; 1 / q_n^2</code>, so the problem is false.</p>",
        "id": 515462413,
        "sender_full_name": "Niels Voss",
        "timestamp": 1746084906
    },
    {
        "content": "<p>For number_theory__p27,</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"c\">/-</span>\n<span class=\"cm\">Prove that 4kxy-1 does not divide the number x^m+y^n for any positive integers x,y,k,m,n.</span>\n<span class=\"cm\">-/</span>\n<span class=\"kd\">theorem</span><span class=\"w\"> </span><span class=\"n\">no_division</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">PNat</span><span class=\"o\">}</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"n\">z</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">PNat</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"bp\">^</span><span class=\"o\">(</span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"bp\">^</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">z</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">  </span><span class=\"bp\">¬</span><span class=\"o\">((</span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">∣</span><span class=\"w\"> </span><span class=\"n\">z</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n</code></pre></div>\n<p><code>z</code> is being treated as an autoimplicit because it is actually unbound in <code>¬((4 * k * x * y - 1) ∣ z)</code>. This makes the statement false:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">False</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">@</span><span class=\"n\">no_division</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">⟨(</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"bp\">+</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"kd\">by</span><span class=\"w\"> </span><span class=\"n\">decide</span><span class=\"o\">⟩</span><span class=\"w\"> </span><span class=\"n\">dvd_rfl</span>\n</code></pre></div>",
        "id": 515463334,
        "sender_full_name": "Niels Voss",
        "timestamp": 1746085505
    },
    {
        "content": "<p>Everyone should really turn off autoImplicit for formalizing any statement using an LLM, it is such an easy fix for many wrong formalizations! I would also imagine something like disabling the instances <code>Div Nat</code> and <code>Div Int</code> to also fix many errors.</p>",
        "id": 515464450,
        "sender_full_name": "Thomas Zhu",
        "timestamp": 1746086111
    },
    {
        "content": "<p>For number_theory__p28,</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"c\">/-</span>\n<span class=\"cm\">Let p be a prime number and N=\\prod _{k=1}^{p-1}(k^2+1). The remainder of N upon division by p is 4 if p is congruent to 3 modulo 4, and 0 if p is congruent to 1 modulo 4.</span>\n<span class=\"cm\">-/</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Finset</span>\n\n<span class=\"kd\">theorem</span><span class=\"w\"> </span><span class=\"n\">prime_remainder_theorem</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hp</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Prime</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">N</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">range</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">))</span><span class=\"bp\">.</span><span class=\"n\">prod</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">λ</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"bp\">;</span>\n<span class=\"w\">  </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">%</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"n\">N</span><span class=\"w\"> </span><span class=\"bp\">%</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"k\">else</span><span class=\"w\"> </span><span class=\"n\">N</span><span class=\"w\"> </span><span class=\"bp\">%</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>The if statement fails to account for p = 2. As stated, this is false:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">False</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">prime_remainder_theorem</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Nat.prime_iff.mp</span><span class=\"w\"> </span><span class=\"n\">Nat.prime_two</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"n\">contradiction</span>\n</code></pre></div>",
        "id": 515464573,
        "sender_full_name": "Niels Voss",
        "timestamp": 1746086168
    },
    {
        "content": "<p>These were just the first three problems I looked at. Many of these seem like easy fixes, but it's at least a little concerning that a lot of the problems seem to contain mistakes.</p>",
        "id": 515465333,
        "sender_full_name": "Niels Voss",
        "timestamp": 1746086544
    },
    {
        "content": "<p>I should mention, the ones where they are using axiom incorrectly means that they are introducing contradictory axioms that the model can exploit (maybe easily) to prove anything.  It is possible that their model “solved” a number of these vacuously true problems inflating their benchmark score.</p>",
        "id": 515493145,
        "sender_full_name": "Jason Rute",
        "timestamp": 1746100954
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"115715\">Jason Rute</span> <a href=\"#narrow/stream/219941-Machine-Learning-for-Theorem-Proving/topic/ProverBench/near/515493145\">said</a>:</p>\n<blockquote>\n<p>I should mention, the ones where they are using axiom incorrectly means that they are introducing contradictory axioms that the model can exploit (maybe easily) to prove anything.  It is possible that their model “solved” a number of these vacuously true problems inflating their benchmark score.</p>\n</blockquote>\n<p>Regarding this, I found a problem mathd_algebra_275 in miniF2F-test that had a wrong formalization and escaped the attention of both Kimina Prover and DeepSeek teams. Kimina Prover didn't solve it but DeepSeek Prover v2 very apparently exploited the incorrectness of the formalization and used exfalso to prove it.</p>",
        "id": 515494653,
        "sender_full_name": "Thomas Zhu",
        "timestamp": 1746101692
    },
    {
        "content": "<p>MiniF2F is a mess</p>",
        "id": 515494725,
        "sender_full_name": "Jason Rute",
        "timestamp": 1746101742
    },
    {
        "content": "<p>Yes, there must be better version control than submitting pull requests to Kaiyu Yang's repo... but my point is that DeepSeek Prover v2 may have learned to recognize and exploit some formalization errors during the RL training.</p>",
        "id": 515495638,
        "sender_full_name": "Thomas Zhu",
        "timestamp": 1746102161
    },
    {
        "content": "<p>There are so many errors in MiniF2F.  Some are in the original MiniF2F for Lean 3, but I think others are due to the translation to Lean 4.  There are a few miniF2F versions which even makes it more complicated.  Harmonic cleaned them up (and it is rumored that DeepMind also has a cleaned-up version), but no one wants to use Harmonic's version because they changed the splits.  The best would be to use Harmonic's version with the original splits, but that seems unlikely now since so many papers use (presumably) Kaiyu's version.</p>",
        "id": 515495680,
        "sender_full_name": "Jason Rute",
        "timestamp": 1746102179
    },
    {
        "content": "<p>This is one reason I make such a big deal when new benchmarks come out.  We should be doing better as a field!</p>",
        "id": 515495803,
        "sender_full_name": "Jason Rute",
        "timestamp": 1746102230
    },
    {
        "content": "<p>(I'm a bit surprised since the original DeepSeek-Prover paper had all these tests to check if an autoformalization statement was false or vacuously true (the hypotheses are contradictory).  You would think they would use the same techniques to clean up their own benchmark. <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span> )</p>",
        "id": 515496064,
        "sender_full_name": "Jason Rute",
        "timestamp": 1746102327
    },
    {
        "content": "<p>I think the version we used at Kimina includes all the fixes Harmonic made + some more. I am personally not an expert on formalization and we have a small team working on this to maintain a MiniF2F with as little errors as possible. We published it here: <a href=\"https://huggingface.co/datasets/AI-MO/minif2f_test\">https://huggingface.co/datasets/AI-MO/minif2f_test</a></p>\n<p>Would it be possible for anyone to make a list of mistakes in this? <span class=\"user-mention\" data-user-id=\"708643\">@Junqi Liu</span>  can update our dataset to maintain a clean version.</p>",
        "id": 515525259,
        "sender_full_name": "Mert Ünsal",
        "timestamp": 1746112658
    },
    {
        "content": "<p>(You can also directly make a PR on the HF repo - although I agree this is not the best way to maintain a Lean project, it makes it easy for people to run benchmarks.)</p>",
        "id": 515525611,
        "sender_full_name": "Mert Ünsal",
        "timestamp": 1746112750
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"448405\">Alex Meiburg</span> <a href=\"#narrow/channel/219941-Machine-Learning-for-Theorem-Proving/topic/ProverBench/near/515455490\">said</a>:</p>\n<blockquote>\n<p><div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">T</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"w\"> </span><span class=\"bp\">×</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"w\"> </span><span class=\"bp\">→+</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">)</span>\n\n<span class=\"kn\">axiom</span><span class=\"w\"> </span><span class=\"n\">T10</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">T</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">3</span>\n\n<span class=\"kn\">axiom</span><span class=\"w\"> </span><span class=\"n\">T01</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">T</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"mi\">5</span>\n\n<span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">T_expression</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">T</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n</code></pre></div><br>\n</p>\n</blockquote>\n<p>This makes the question void:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"c\">/-</span>\n<span class=\"cm\">Let T: Z × Z → Z be a linear function satisfying T(1, 0) = 3 and T(0, 1) = -5. Then for all (x, y) ∈ Z × Z, T(x, y) = 3x - 5y.</span>\n<span class=\"cm\">-/</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Int</span><span class=\"w\"> </span><span class=\"n\">AddMonoidHom</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">T</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"w\"> </span><span class=\"bp\">×</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"w\"> </span><span class=\"bp\">→+</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">)</span>\n\n<span class=\"kn\">axiom</span><span class=\"w\"> </span><span class=\"n\">T10</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">T</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">3</span>\n\n<span class=\"kn\">axiom</span><span class=\"w\"> </span><span class=\"n\">T01</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">T</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"mi\">5</span>\n\n<span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">oops</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">False</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">cases</span><span class=\"w\"> </span><span class=\"n\">T10</span><span class=\"w\"> </span><span class=\"mi\">0</span>\n</code></pre></div>",
        "id": 515526039,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1746112882
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"631691\">Thomas Zhu</span> <a href=\"#narrow/channel/219941-Machine-Learning-for-Theorem-Proving/topic/ProverBench/near/515494653\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"115715\">Jason Rute</span> <a href=\"#narrow/stream/219941-Machine-Learning-for-Theorem-Proving/topic/ProverBench/near/515493145\">said</a>:</p>\n<blockquote>\n<p>I should mention, the ones where they are using axiom incorrectly means that they are introducing contradictory axioms that the model can exploit (maybe easily) to prove anything.  It is possible that their model “solved” a number of these vacuously true problems inflating their benchmark score.</p>\n</blockquote>\n<p>Regarding this, I found a problem mathd_algebra_275 in miniF2F-test that had a wrong formalization and escaped the attention of both Kimina Prover and DeepSeek teams. Kimina Prover didn't solve it but DeepSeek Prover v2 very apparently exploited the incorrectness of the formalization and used exfalso to prove it.</p>\n</blockquote>\n<p><span class=\"user-mention\" data-user-id=\"631691\">@Thomas Zhu</span> would you be able to help us with a corrected version?</p>",
        "id": 515526894,
        "sender_full_name": "Mert Ünsal",
        "timestamp": 1746113151
    },
    {
        "content": "<p>Is it not fixed in Harmonics’ version?</p>",
        "id": 515527651,
        "sender_full_name": "Jason Rute",
        "timestamp": 1746113349
    },
    {
        "content": "<p>This is the version we have in Kimina:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Aesop</span>\n\n<span class=\"kn\">set_option</span><span class=\"w\"> </span><span class=\"n\">maxHeartbeats</span><span class=\"w\"> </span><span class=\"mi\">0</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">BigOperators</span><span class=\"w\"> </span><span class=\"n\">Real</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"n\">Topology</span><span class=\"w\"> </span><span class=\"n\">Rat</span>\n\n<span class=\"sd\">/-- If $\\left(\\sqrt[4]{11}\\right)^{3x-3}=\\frac{1}{5}$, what is the value of $\\left(\\sqrt[4]{11}\\right)^{6x+2}$? Express your answer as a fraction. Show that it is \\frac{121}{25}.-/</span>\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">mathd_algebra_275</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"mi\">11</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"o\">((</span><span class=\"mi\">11</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">6</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">121</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"mi\">25</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n</code></pre></div>",
        "id": 515528097,
        "sender_full_name": "Mert Ünsal",
        "timestamp": 1746113479
    },
    {
        "content": "<p>Harmonic's version: <a href=\"https://github.com/harmonic-ai/datasets/blob/d3143cb7b8b5636d4829d5b8b88b48850217e8f8/minif2f/train.json#L1257-L1261\">https://github.com/harmonic-ai/datasets/blob/d3143cb7b8b5636d4829d5b8b88b48850217e8f8/minif2f/train.json#L1257-L1261</a></p>",
        "id": 515528983,
        "sender_full_name": "Jason Rute",
        "timestamp": 1746113750
    },
    {
        "content": "<p>Note that in the power <code>1/4</code> is a ratio of natural numbers, so it is zero...</p>",
        "id": 515529069,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1746113764
    },
    {
        "content": "<p>This is fixed in harmonic's version.</p>",
        "id": 515529144,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1746113790
    },
    {
        "content": "<p>This theorem is vacuously true currently: <code>by norm_num at h</code>. DeepSeek-Prover-V2 exploited this while Kimina-Prover didn't find this</p>",
        "id": 515529236,
        "sender_full_name": "Thomas Zhu",
        "timestamp": 1746113823
    },
    {
        "content": "<p>The wild west of minif2f is really hurting this field.</p>",
        "id": 515529263,
        "sender_full_name": "Jason Rute",
        "timestamp": 1746113833
    },
    {
        "content": "<p>Also, to be clear, similarly, don't use ProofNet.  Use the fixed version ProofNet# by <span class=\"user-mention\" data-user-id=\"321854\">@Auguste Poiroux</span> .</p>",
        "id": 515529607,
        "sender_full_name": "Jason Rute",
        "timestamp": 1746113937
    },
    {
        "content": "<p>Should the \"canonical\" versions be moved inside<code>leanprover-community</code> to make this kind of thing clear?</p>",
        "id": 515532042,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1746114730
    },
    {
        "content": "<p>(Leaving the original repo owners of course, but with the power for the community to transfer ownership if the author goes AWOL)</p>",
        "id": 515532086,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1746114747
    },
    {
        "content": "<p>I think having official maintained versions is a great idea. I would be happy to transfer the ownership of <a href=\"https://huggingface.co/datasets/PAug/ProofNetSharp\">ProofNet#</a>. For now, I only made a HuggingFace repo and no Github repo because I wanted to limit potential future data contamination (not sure if it is any better though). But I guess making a Github repo would be better for the following reasons:</p>\n<ul>\n<li>Porting the dataset to new Lean versions (currently limited to Lean v4.16.0-rc2)</li>\n<li>Fixing further mistakes</li>\n</ul>",
        "id": 515533967,
        "sender_full_name": "Auguste Poiroux",
        "timestamp": 1746115340
    },
    {
        "content": "<p>My impression is that unless the dataset is released via github, the lean community is unlikely to check the theorem statements, and even more unlikely to try and submit a correction.</p>",
        "id": 515534149,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1746115397
    },
    {
        "content": "<p>So I think you can either say \"this is a fixed dataset which may or may not actually contain real AIME/AMC/IMO/Putnam/... questions\", or \"this is a living dataset which will be updated to try and remain faithful to the true questions\", but sitting on the fence isn't really a good option.</p>",
        "id": 515534741,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1746115572
    },
    {
        "content": "<p>I agree. I prefer the second option, but this requires some kind of versioning. A PutnamBench-like leaderboard with an additional \"version\" column might help tracking that.</p>",
        "id": 515535544,
        "sender_full_name": "Auguste Poiroux",
        "timestamp": 1746115847
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"714373\">@Mert Ünsal</span> Meanwhile, I opened a PR for this fix: <a href=\"https://huggingface.co/datasets/AI-MO/minif2f_test/discussions/5\">https://huggingface.co/datasets/AI-MO/minif2f_test/discussions/5</a>. However the \"files changed\" doesn't really show the change because of LFS. Long-term I would very much support a community-maintained version on GitHub though.</p>",
        "id": 515535683,
        "sender_full_name": "Thomas Zhu",
        "timestamp": 1746115909
    },
    {
        "content": "<p>(Please also validate my change is ok first: <code>load_dataset(\"AI-MO/minif2f_test\", revision=\"refs/pr/5\")</code>)</p>",
        "id": 515535866,
        "sender_full_name": "Thomas Zhu",
        "timestamp": 1746115960
    },
    {
        "content": "<p>Thanks a lot <span class=\"user-mention\" data-user-id=\"631691\">@Thomas Zhu</span> - I merged your PR and acknowledged your contribution in the dataset card. Please let us know if you find any other issues - I pinged our internal team to have another look as well!</p>",
        "id": 515538202,
        "sender_full_name": "Mert Ünsal",
        "timestamp": 1746116785
    },
    {
        "content": "<p>I think there are also questions that become harder than they are supposed to be</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">theorem</span><span class=\"w\"> </span><span class=\"n\">amc12b_2021_p3</span>\n<span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">h₀</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)))</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">144</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"mi\">53</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n</code></pre></div>\n<p>I was trying the Deepseek model and I failed to make it prove this MiniF2F problem. This problem looks the same in the version by Harmonic. The \"denominator equals 0\" issue seems to make the proof cumbersome... Can anyone prove (or disprove) this manually?</p>\n<p><code>field_simp</code> requires the denominator to be non-zero, so it can't be used here.</p>\n<p>I think the theorem should still be correct: since <code>x/0=0</code> in Lean, there are some more points on the graph of this function <code>f(x)</code> that are originally undefined, but this should not affect the solution of <code>f(x)=144/53</code>.</p>\n<p>In general, I think the domain issues of functions like <code>1/x sqrt(x) tan(x) arcsin(x)</code> in MiniF2F cause many proofs to look longer and harder than the mathematical proofs on paper. </p>\n<p>It would be nice if we have better tactics to deal with these issues. These issues are probably uncommon in Mathlib but for these high school equation problems they become pretty serious.</p>\n<p>I figured out a proof with <code>by_cases</code></p>",
        "id": 515546740,
        "sender_full_name": "Deming Xu",
        "timestamp": 1746120083
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 515548340,
        "sender_full_name": "Deming Xu",
        "timestamp": 1746120717
    },
    {
        "content": "<p>is this MiniF2F-test? if so, it's not great to have the problem solutions in a public forum (a large enough LLM pre-trained on the internet can remember the proof.)</p>",
        "id": 515549467,
        "sender_full_name": "Mert Ünsal",
        "timestamp": 1746121127
    },
    {
        "content": "<p>Regarding domain issues, the convention I use in IMOLean is that any functions with restricted domain in a hypothesis require an additional formal hypothesis to be added that the arguments are within the domain for the informal function (for example, that a division in a hypothesis is not dividing by zero), while any such functions in the conclusions to the problem require such a statement to be added to the formal conclusion (so if a problem asks you to prove something involving division, you implicitly have to prove that this conclusion does not involve dividing by zero, since informal mathematics doesn't use the Lean convention on the result of division by zero). In both cases, the extra hypotheses / conclusions may be omitted from the formal statement if sufficiently obvious.</p>",
        "id": 515601910,
        "sender_full_name": "Joseph Myers",
        "timestamp": 1746144107
    }
]