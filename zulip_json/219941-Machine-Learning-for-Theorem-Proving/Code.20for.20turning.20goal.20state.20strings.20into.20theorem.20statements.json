[
    {
        "content": "<p>I thought I'd share some Python code I wrote today that parses pretty printed goal strings and creates a theorem statement from it. This is really wrong to do — much better would be to create the theorem statement by metaprogramming from within Lean and pretty print it! — but I'm sure people here have been in situations where you only have pretty printed goal states available.</p>\n<p><a href=\"https://gist.github.com/kmill/5991f18449fed6be4eb6d661fdd73742\">https://gist.github.com/kmill/5991f18449fed6be4eb6d661fdd73742</a></p>\n<p>This is only lightly tested, and I'm sure there are unhandled edge cases. Feel free to share your own code here, or make improvements to mine.</p>\n<p>Example:</p>\n<div class=\"codehilite\" data-code-language=\"Python\"><pre><span></span><code><span class=\"n\">ex4</span> <span class=\"o\">=</span> <span class=\"s2\">\"\"\"</span>\n<span class=\"s2\">V✝ : Type u_1</span>\n<span class=\"s2\">G✝ : SimpleGraph V✝</span>\n<span class=\"s2\">inst✝³ : Fintype V✝</span>\n<span class=\"s2\">inst✝² : DecidableRel G✝.Adj</span>\n<span class=\"s2\">V : Type u_1</span>\n<span class=\"s2\">G : SimpleGraph V</span>\n<span class=\"s2\">inst✝¹ : Fintype V</span>\n<span class=\"s2\">inst✝ : DecidableRel G.Adj</span>\n<span class=\"s2\">u w v : V</span>\n<span class=\"s2\">q : G.Walk u v</span>\n<span class=\"s2\">v✝ : V</span>\n<span class=\"s2\">hv : G.Adj v v✝</span>\n<span class=\"s2\">p : G.Walk v✝ w</span>\n<span class=\"s2\">h_nontrivial : (q.append (Walk.cons hv p)).length &gt; 0</span>\n<span class=\"s2\">h : (Walk.cons hv p).length &gt; 0</span>\n<span class=\"s2\">⊢ G.degree v ≥ 1</span>\n<span class=\"s2\">\"\"\"</span>\n<span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">goal_to_theorem</span><span class=\"p\">(</span><span class=\"s2\">\"my_thm4\"</span><span class=\"p\">,</span> <span class=\"n\">ex4</span><span class=\"p\">))</span>\n</code></pre></div>\n<p>outputs</p>\n<div class=\"codehilite\" data-code-language=\"Text only\"><pre><span></span><code>theorem my_thm4 (V_2 : Type u_1) (G_2 : SimpleGraph V_2) [Fintype V_2] [DecidableRel G_2.Adj]\n    (V : Type u_1) (G : SimpleGraph V) [Fintype V] [DecidableRel G.Adj]\n    (u w v : V) (q : G.Walk u v) (v_2 : V) (hv : G.Adj v v_2) (p : G.Walk v_2 w)\n    (h_nontrivial : (q.append (Walk.cons hv p)).length &gt; 0)\n    (h : (Walk.cons hv p).length &gt; 0) :\n    G.degree v ≥ 1 :=\n  sorry\n</code></pre></div>",
        "id": 529942933,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1753121512
    },
    {
        "content": "<p>Hmm, I just realized the logic I wrote to try to split a local let decl on the correct <code>:=</code> is incorrect (I assumed <code>let</code>/<code>have</code> would start with a space, but they could start with a <code>(</code> or other bracket too). It's a really unlikely situation that there's a <code>let</code> expression in the type of a variable though, and I'll fix it once it actually causes issue.</p>",
        "id": 529952467,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1753125480
    }
]