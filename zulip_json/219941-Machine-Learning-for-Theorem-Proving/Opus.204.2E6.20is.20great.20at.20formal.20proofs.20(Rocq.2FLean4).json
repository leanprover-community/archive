[
    {
        "content": "<p>I conducted a few experiments with <span class=\"user-mention\" data-user-id=\"444411\">@Yannick Forster</span>  and we were quite impressed by Opus 4.6 skills in Rocq and Lean4. I wrote a blog post with the details of all these experiments: <a href=\"https://tristan.st/blog/opus_4_6_formal_proofs\">https://tristan.st/blog/opus_4_6_formal_proofs</a></p>\n<p><strong>TLDR</strong></p>\n<p>Opus 4.6, with no human input beyond the prompt, successfully proved:</p>\n<ul>\n<li>258 of the 260 Rocq lemmas of the <a href=\"https://github.com/ccz181078/Coq-BB5/blob/main/CoqBB5/BB4/_BB4_Legacy_Monolith.v\">BB(4) proof</a>, 70% of the generated proofs were shorter than the original, see proof-by-proof comparison <a href=\"https://tristan.st/proof_comparison_report.html\">here</a></li>\n<li>Yannick and <span class=\"user-mention\" data-user-id=\"975617\">@Théo Winterhalter</span>  s <a href=\"https://mpri-prfa.github.io/\">PRFA course</a> 18-page <a href=\"https://mpri-prfa.github.io/files/project25.pdf\">Fall 2025 assignment</a></li>\n<li>The fact that intuitionistic arithmetic has a computable realizability interpretation</li>\n<li>The non-termination of a Fractran program in Lean4</li>\n</ul>",
        "id": 574288417,
        "sender_full_name": "Tristan Stérin",
        "timestamp": 1771334501
    },
    {
        "content": "<p>This topic was moved here from <a class=\"stream-topic\" data-stream-id=\"113488\" href=\"/#narrow/channel/113488-general/topic/Opus.204.2E6.20is.20great.20at.20formal.20proofs.20.28Rocq.2FLean4.29\">#general &gt; Opus 4.6 is great at formal proofs (Rocq/Lean4)</a> by <span class=\"user-mention silent\" data-user-id=\"306577\">Matthew Ballard</span>.</p>",
        "id": 574297280,
        "sender_full_name": "Notification Bot",
        "timestamp": 1771336904
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"911558\">@Tristan Stérin</span> I've moved your post to a place where it should get more attention</p>",
        "id": 574297364,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1771336921
    },
    {
        "content": "<p>Thank you, sorry for the poor initial placement!</p>",
        "id": 574297493,
        "sender_full_name": "Tristan Stérin",
        "timestamp": 1771336951
    },
    {
        "content": "<p>No worries!</p>",
        "id": 574297540,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1771336962
    },
    {
        "content": "<p>What did your <code>CLAUDE.md</code> look like? What other markdown files/skills/tools did you use?</p>",
        "id": 574297796,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1771337029
    },
    {
        "content": "<p>No <code>CLAUDE.md</code> no markdown files, no skills, no MCP. The compilation environments were pre-set on the VM (<code>coqc</code>, <code>lake</code>) and usable by command line.</p>\n<p>If anything, in the case of the BB(4) proof, I had to restrict its set of tools to prevent it from cheating by looking at the online published solution, using <code>.claude/settings.json</code>:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"o\">{</span>\n<span class=\"w\">  </span><span class=\"s2\">\"permissions\"</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">{</span>\n<span class=\"w\">    </span><span class=\"s2\">\"defaultMode\"</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"s2\">\"bypassPermissions\"</span><span class=\"o\">,</span>\n<span class=\"w\">    </span><span class=\"s2\">\"deny\"</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">[</span>\n<span class=\"w\">      </span><span class=\"s2\">\"WebSearch\"</span><span class=\"o\">,</span>\n<span class=\"w\">      </span><span class=\"s2\">\"WebFetch\"</span><span class=\"o\">,</span>\n<span class=\"w\">      </span><span class=\"s2\">\"Bash(curl *)\"</span><span class=\"o\">,</span>\n<span class=\"w\">      </span><span class=\"s2\">\"Bash(wget *)\"</span>\n<span class=\"w\">    </span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"o\">}</span>\n<span class=\"o\">}</span>\n</code></pre></div>",
        "id": 574299063,
        "sender_full_name": "Tristan Stérin",
        "timestamp": 1771337352
    },
    {
        "content": "<p>Just go get it, huh</p>",
        "id": 574299147,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1771337374
    },
    {
        "content": "<p>What is the token usage?</p>",
        "id": 574299443,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1771337446
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"911558\">Tristan Stérin</span> <a href=\"#narrow/channel/219941-Machine-Learning-for-Theorem-Proving/topic/Opus.204.2E6.20is.20great.20at.20formal.20proofs.20.28Rocq.2FLean4.29/near/574299063\">said</a>:</p>\n<blockquote>\n<p>I had to restrict its set of tools to prevent it from cheating by looking at the online published solution</p>\n</blockquote>\n<p>But isn't it already trained on the solution, since it came out later?</p>",
        "id": 574299994,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1771337581
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"306577\">Matthew Ballard</span> <a href=\"#narrow/channel/219941-Machine-Learning-for-Theorem-Proving/topic/Opus.204.2E6.20is.20great.20at.20formal.20proofs.20.28Rocq.2FLean4.29/near/574299443\">said</a>:</p>\n<blockquote>\n<p>What is the token usage?</p>\n</blockquote>\n<p>Great question, I should have kept track of token usage... I asked Claude to analyse the BB(4) conversation transcript to find token usage, it said:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">Token</span><span class=\"w\"> </span><span class=\"n\">Usage</span><span class=\"w\"> </span><span class=\"n\">Summary</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">949</span><span class=\"w\"> </span><span class=\"n\">API</span><span class=\"w\"> </span><span class=\"n\">requests</span><span class=\"o\">)</span>\n\n<span class=\"w\">  </span><span class=\"bp\">┌───────────────────────────┬─────────────┬───────────┐</span>\n<span class=\"w\">  </span><span class=\"bp\">│</span><span class=\"w\">         </span><span class=\"n\">Category</span><span class=\"w\">          </span><span class=\"bp\">│</span><span class=\"w\">   </span><span class=\"n\">Tokens</span><span class=\"w\">    </span><span class=\"bp\">│</span><span class=\"w\"> </span><span class=\"n\">Est</span><span class=\"bp\">.</span><span class=\"w\"> </span><span class=\"n\">Cost</span><span class=\"w\"> </span><span class=\"bp\">│</span>\n<span class=\"w\">  </span><span class=\"bp\">├───────────────────────────┼─────────────┼───────────┤</span>\n<span class=\"w\">  </span><span class=\"bp\">│</span><span class=\"w\"> </span><span class=\"n\">Input</span><span class=\"w\"> </span><span class=\"n\">tokens</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">non</span><span class=\"bp\">-</span><span class=\"n\">cached</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">│</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"o\">,</span><span class=\"mi\">033</span><span class=\"w\">       </span><span class=\"bp\">│</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"mf\">0.06</span><span class=\"w\">     </span><span class=\"bp\">│</span>\n<span class=\"w\">  </span><span class=\"bp\">├───────────────────────────┼─────────────┼───────────┤</span>\n<span class=\"w\">  </span><span class=\"bp\">│</span><span class=\"w\"> </span><span class=\"n\">Cache</span><span class=\"w\"> </span><span class=\"n\">write</span><span class=\"w\"> </span><span class=\"n\">tokens</span><span class=\"w\">        </span><span class=\"bp\">│</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">,</span><span class=\"mi\">588</span><span class=\"o\">,</span><span class=\"mi\">529</span><span class=\"w\">   </span><span class=\"bp\">│</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"mf\">48.53</span><span class=\"w\">    </span><span class=\"bp\">│</span>\n<span class=\"w\">  </span><span class=\"bp\">├───────────────────────────┼─────────────┼───────────┤</span>\n<span class=\"w\">  </span><span class=\"bp\">│</span><span class=\"w\"> </span><span class=\"n\">Cache</span><span class=\"w\"> </span><span class=\"n\">read</span><span class=\"w\"> </span><span class=\"n\">tokens</span><span class=\"w\">         </span><span class=\"bp\">│</span><span class=\"w\"> </span><span class=\"mi\">101</span><span class=\"o\">,</span><span class=\"mi\">660</span><span class=\"o\">,</span><span class=\"mi\">584</span><span class=\"w\"> </span><span class=\"bp\">│</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"mf\">152.49</span><span class=\"w\">   </span><span class=\"bp\">│</span>\n<span class=\"w\">  </span><span class=\"bp\">├───────────────────────────┼─────────────┼───────────┤</span>\n<span class=\"w\">  </span><span class=\"bp\">│</span><span class=\"w\"> </span><span class=\"n\">Output</span><span class=\"w\"> </span><span class=\"n\">tokens</span><span class=\"w\">             </span><span class=\"bp\">│</span><span class=\"w\"> </span><span class=\"mi\">438</span><span class=\"o\">,</span><span class=\"mi\">382</span><span class=\"w\">     </span><span class=\"bp\">│</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"mf\">32.88</span><span class=\"w\">    </span><span class=\"bp\">│</span>\n<span class=\"w\">  </span><span class=\"bp\">├───────────────────────────┼─────────────┼───────────┤</span>\n<span class=\"w\">  </span><span class=\"bp\">│</span><span class=\"w\"> </span><span class=\"n\">Total</span><span class=\"w\">                     </span><span class=\"bp\">│</span><span class=\"w\"> </span><span class=\"bp\">~</span><span class=\"mf\">104.7</span><span class=\"n\">M</span><span class=\"w\">     </span><span class=\"bp\">│</span><span class=\"w\"> </span><span class=\"bp\">~$</span><span class=\"mi\">234</span><span class=\"w\">     </span><span class=\"bp\">│</span>\n<span class=\"w\">  </span><span class=\"bp\">└───────────────────────────┴─────────────┴───────────┘</span>\n\n<span class=\"w\">  </span><span class=\"n\">Key</span><span class=\"w\"> </span><span class=\"n\">takeaways</span><span class=\"o\">:</span>\n<span class=\"w\">  </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">97</span><span class=\"bp\">%</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">input</span><span class=\"w\"> </span><span class=\"n\">tokens</span><span class=\"w\"> </span><span class=\"n\">were</span><span class=\"w\"> </span><span class=\"n\">cache</span><span class=\"w\"> </span><span class=\"n\">reads</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mf\">101.7</span><span class=\"n\">M</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">which</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">typical</span><span class=\"w\"> </span><span class=\"n\">for</span><span class=\"w\"> </span><span class=\"n\">long</span><span class=\"w\"> </span><span class=\"n\">agentic</span><span class=\"w\"> </span><span class=\"n\">sessions</span><span class=\"w\"> </span><span class=\"kn\">where</span><span class=\"w\"> </span><span class=\"n\">the</span>\n<span class=\"w\">  </span><span class=\"n\">growing</span><span class=\"w\"> </span><span class=\"n\">conversation</span><span class=\"w\"> </span><span class=\"n\">context</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">repeatedly</span><span class=\"w\"> </span><span class=\"n\">sent</span>\n<span class=\"w\">  </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Output</span><span class=\"w\"> </span><span class=\"n\">was</span><span class=\"w\"> </span><span class=\"n\">relatively</span><span class=\"w\"> </span><span class=\"n\">modest</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"mi\">438</span><span class=\"n\">K</span><span class=\"w\"> </span><span class=\"n\">tokens</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">~</span><span class=\"mi\">462</span><span class=\"w\"> </span><span class=\"n\">tokens</span><span class=\"bp\">/</span><span class=\"n\">request</span><span class=\"w\"> </span><span class=\"n\">average</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Cache</span><span class=\"w\"> </span><span class=\"n\">write</span><span class=\"w\"> </span><span class=\"n\">breakdown</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">839</span><span class=\"n\">K</span><span class=\"w\"> </span><span class=\"n\">for</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"bp\">-</span><span class=\"n\">min</span><span class=\"w\"> </span><span class=\"n\">ephemeral</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mf\">1.75</span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"n\">for</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"bp\">-</span><span class=\"n\">hour</span><span class=\"w\"> </span><span class=\"n\">ephemeral</span>\n<span class=\"w\">  </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Average</span><span class=\"w\"> </span><span class=\"n\">cost</span><span class=\"w\"> </span><span class=\"n\">per</span><span class=\"w\"> </span><span class=\"n\">request</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">~$</span><span class=\"mf\">0.25</span>\n<span class=\"w\">  </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Total</span><span class=\"w\"> </span><span class=\"n\">estimated</span><span class=\"w\"> </span><span class=\"n\">cost</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">~$</span><span class=\"mi\">234</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">standard</span><span class=\"w\"> </span><span class=\"n\">Opus</span><span class=\"w\"> </span><span class=\"n\">pricing</span>\n</code></pre></div>\n<p>I don't know if it's correct, though; 104M just for BB(4) feels high, but I'm not well calibrated.</p>\n<p>What I know is that running all these experiments (and a bit more) made me use 83% of my weekly allowance on a Max plan, and that this week I maxed out my session limit several times.</p>\n<p><span class=\"user-mention silent\" data-user-id=\"933054\">Snir Broshi</span> <a href=\"#narrow/channel/219941-Machine-Learning-for-Theorem-Proving/topic/Opus.204.2E6.20is.20great.20at.20formal.20proofs.20.28Rocq.2FLean4.29/near/574299994\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"911558\">Tristan Stérin</span> <a href=\"#narrow/channel/219941-Machine-Learning-for-Theorem-Proving/topic/Opus.204.2E6.20is.20great.20at.20formal.20proofs.20.28Rocq.2FLean4.29/near/574299063\">said</a>:</p>\n<blockquote>\n<p>I had to restrict its set of tools to prevent it from cheating by looking at the online published solution</p>\n</blockquote>\n<p>But isn't it already trained on the solution, since it came out later?</p>\n</blockquote>\n<p>Yes, most likely! I address this point in the blog post: (a) as a minimal effort I obfuscated and shuffled the proof before feeding to Claude (b) only 4 out of 258 proofs are the same between the original and AI-generated and they are inconsequential 1-2 liner pieces of boilerplate and (c) the AI-generated proofs were 20% shorter than the original in average. The point here is that in early iterations of this project, Opus 4.6 went on the internet when it got stuck (for the two lemmas it could not prove).</p>\n<p>We believe that all the other experiments are not in Opus 4.6's training set.</p>",
        "id": 574301299,
        "sender_full_name": "Tristan Stérin",
        "timestamp": 1771337919
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"911558\">Tristan Stérin</span> <a href=\"#narrow/channel/219941-Machine-Learning-for-Theorem-Proving/topic/Opus.204.2E6.20is.20great.20at.20formal.20proofs.20.28Rocq.2FLean4.29/near/574301299\">said</a>:</p>\n<blockquote>\n<p>We believe that all the other experiments are not in Opus 4.6's training set.</p>\n</blockquote>\n<p>Why? Are you assuming that Anthropic didn't scrape GitHub or didn't retrain Claude on it since last year?<br>\nAlso, I'm assuming you told it (or at least it could infer) that the problem was BB(4) and so it could potentially recall the BB(4) proofs it was trained on.<br>\nI'm not sure it's likely, but it is possible since it's in the training set.</p>",
        "id": 574306840,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1771339184
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"933054\">Snir Broshi</span> <a href=\"#narrow/channel/219941-Machine-Learning-for-Theorem-Proving/topic/Opus.204.2E6.20is.20great.20at.20formal.20proofs.20.28Rocq.2FLean4.29/near/574306840\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"911558\">Tristan Stérin</span> <a href=\"#narrow/channel/219941-Machine-Learning-for-Theorem-Proving/topic/Opus.204.2E6.20is.20great.20at.20formal.20proofs.20.28Rocq.2FLean4.29/near/574301299\">said</a>:</p>\n<blockquote>\n<p>We believe that all the other experiments are not in Opus 4.6's training set.</p>\n</blockquote>\n<p>Why? Are you assuming that Anthropic didn't scrape GitHub or didn't retrain Claude on it since last year?<br>\nAlso, I'm assuming you told it (or at least it could infer) that the problem was BB(4) and so it could potentially recall the BB(4) proofs it was trained on.<br>\nI'm not sure it's likely, but it is possible since it's in the training set.</p>\n</blockquote>\n<p>This is also addressed in the blog post, the reason is because solutions to the other problems have never been put on the internet.</p>\n<p>I did not tell Claude the problem was BB(4), but of course it inferred it. I invite you to look at the <a href=\"https://tristan.st/proof_comparison_report.html\">proof comparison report</a> to see that almost all proofs are shorter and, all but 4, are different. And again, I acknowledge the proof is in its training set but it still brought value by proposing short proofs in average.</p>",
        "id": 574308089,
        "sender_full_name": "Tristan Stérin",
        "timestamp": 1771339479
    },
    {
        "content": "<p>Interesting Article and result, especially the timing. I have yesterday published a small <a href=\"https://huschi.bearblog.dev/the-final-benchmark/\">Post</a> on my Blog, where I contemplated the idea of a Busy Beaver Intelligence Scale, which measures intelligence of AI, by testing which Busy Beaver Value it can prove.</p>\n<p>In this vein, Claude Opus 4.6 currently seems to sit just shy of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>B</mi><mi>B</mi><mo stretchy=\"false\">(</mo><mn>4</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">BB(4)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05017em;\">BB</span><span class=\"mopen\">(</span><span class=\"mord\">4</span><span class=\"mclose\">)</span></span></span></span>, if we account for the prepared Lemmas, then maybe a bit further back, but one can also see these prepared lemmas (or the agent teams) as noise, they do improve the performance but don't fundamentally change the general position of Opus 4.6 on the scale.</p>",
        "id": 574336533,
        "sender_full_name": "Franz Huschenbeth",
        "timestamp": 1771346450
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"1010143\">Franz Huschenbeth</span> <a href=\"#narrow/channel/219941-Machine-Learning-for-Theorem-Proving/topic/Opus.204.2E6.20is.20great.20at.20formal.20proofs.20.28Rocq.2FLean4.29/near/574336533\">said</a>:</p>\n<blockquote>\n<p>Interesting Article and result, especially the timing. I have yesterday published a small <a href=\"https://huschi.bearblog.dev/the-final-benchmark/\">Post</a> on my Blog, where I contemplated the idea of a Busy Beaver Intelligence Scale, which measures intelligence of AI, by testing which Busy Beaver Value it can prove.</p>\n<p>In this vein, Claude Opus 4.6 currently seems to sit just shy of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>B</mi><mi>B</mi><mo stretchy=\"false\">(</mo><mn>4</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">BB(4)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05017em;\">BB</span><span class=\"mopen\">(</span><span class=\"mord\">4</span><span class=\"mclose\">)</span></span></span></span>, if we account for the prepared Lemmas, then maybe a bit further back, but one can also see these prepared lemmas (or the agent teams) as noise, they do improve the performance but don't fundamentally change the general position of Opus 4.6 on the scale.</p>\n</blockquote>\n<p>I love the idea!! We had a similar one in the discussion section of the <a href=\"https://arxiv.org/pdf/2509.12337\">BB(5) paper</a>:</p>\n<blockquote>\n<p>More generally, given the sheer amount of problems, with broad variety of difficulty (from very easy to near-impossible), that the Busy Beaver game can generate, the ability to prove known Busy Beaver values or to make progress on unknown ones would be an ambitious benchmark for machine intelligence</p>\n</blockquote>",
        "id": 574339881,
        "sender_full_name": "Tristan Stérin",
        "timestamp": 1771347304
    },
    {
        "content": "<p>Ah nice, did not know that, but the idea is not too far fetched for anyone who knows the Busy Beaver Function and is interested in Benchmarking :D</p>",
        "id": 574360294,
        "sender_full_name": "Franz Huschenbeth",
        "timestamp": 1771353129
    },
    {
        "content": "<p>This makes me think. Has there been investigations into the Distribution of Halting Proofs Difficulty for a given n? Can this potentially be measured with Kolmogorov Complexity? I am not aware of the Busy Beaver Literature, so if there is a Paper that already investigated that, I would love to see it. </p>\n<p>The distribution might be something akin to <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn><mi mathvariant=\"normal\">/</mi><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">1/x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1/</span><span class=\"mord mathnormal\">x</span></span></span></span>, but I would be interested to see it graphed for low Busy Beaver Values. And what the best function fit might be.</p>\n<p>Its kinda interesting because along the lines of the Curry-Howard Isomorphism we can encode any mathematical problem as a Turing Machine, but ofc most of our problems are scattered across different $n$, and we only study them because there are \"interesting\" and \"canonical\" to us, in the sense that they are meaningful problems related to our physical world or have prestige associated to them.</p>\n<p>If one can (heuristically) state the distribution in terms of size $n$, then we could also potentially have heuristics for stating the difficulty of open math problems. Such as Goldbachs 27-state TM is (probabilistically) atleast as hard as the hardest problem from $BB(7)$ or so. And by measuring the AI Progress along the Busy Beaver Scale, we can roughly estimate, when it will be in a range to potentially solve the problem. This would be \"very\" approximate in every sense of the word, but I kinda like the possibility (or maybe it is fundamentally impossible I dont know).</p>",
        "id": 574363053,
        "sender_full_name": "Franz Huschenbeth",
        "timestamp": 1771354147
    },
    {
        "content": "<p>Perhaps this thread is actually a proof of \"opus 4.6 is great at formal proofs in the topic of theoretical computer science where it might have seen the answers already\". But that's not supposed to be a negative comment -- I think this is a really interesting benchmark and the fact that the proofs were <em>shorter</em> than the human-written proofs (something we're definitely not seeing right now in the domain of pure mathematics) is especially intriguing. I think it would be very interesting to do more tests of this nature across different domains because the current title of this thread looks to me like an interesting hypothesis and it's definitely worth testing further.</p>",
        "id": 574383103,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1771361752
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/channel/219941-Machine-Learning-for-Theorem-Proving/topic/Opus.204.2E6.20is.20great.20at.20formal.20proofs.20.28Rocq.2FLean4.29/near/574383103\">said</a>:</p>\n<blockquote>\n<p>the fact that the proofs were <em>shorter</em> than the human-written proofs (something we're definitely not seeing right now in the domain of pure mathematics) is especially intriguing.</p>\n</blockquote>\n<p>I don't know how true this is, if you look at the comparison report most shorter proofs appear to be \"just put semicolons and delete the newlines\". A simple script can do that, it doesn't make proofs more readable, possible the opposite.</p>\n<p><a href=\"/user_uploads/3121/kxIac5mpmXJDxq_QHZWFeC-1/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/kxIac5mpmXJDxq_QHZWFeC-1/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"3312x1018\" src=\"/user_uploads/thumbnail/3121/kxIac5mpmXJDxq_QHZWFeC-1/image.png/840x560.webp\"></a></div><p>I sampled 5 proofs and they were all like this, there might be some good simplifications in some of them.</p>",
        "id": 574385893,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1771362799
    },
    {
        "content": "<p>LOC is a vague measure for proof verbosity anyway. The main problem with AI Proofs to my understanding is verbosity and human readability.</p>",
        "id": 574404277,
        "sender_full_name": "Franz Huschenbeth",
        "timestamp": 1771371336
    },
    {
        "content": "<p>I suggest amount of tactic calls as a better approximation</p>",
        "id": 574404520,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1771371473
    },
    {
        "content": "<p>Plus maximum amount of nesting</p>",
        "id": 574404576,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1771371507
    },
    {
        "content": "<p>The ability to prove the value of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>B</mi><mi>B</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">BB(n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05017em;\">BB</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">n</span><span class=\"mclose\">)</span></span></span></span> doesn't seem like a good scale for AI abilities, because it's too coarse-grained, and just about everything related to busy beavers grows faster than any computable function. It seems quite likely to me that <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>B</mi><mi>B</mi><mo stretchy=\"false\">(</mo><mn>7</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">BB(7)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05017em;\">BB</span><span class=\"mopen\">(</span><span class=\"mord\">7</span><span class=\"mclose\">)</span></span></span></span> or <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>B</mi><mi>B</mi><mo stretchy=\"false\">(</mo><mn>8</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">BB(8)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05017em;\">BB</span><span class=\"mopen\">(</span><span class=\"mord\">8</span><span class=\"mclose\">)</span></span></span></span> is not just independent of Lean but independent of any reasonable consistent formal system with a description small enough to fit within the physical universe (and if not independent, the size of any proof of which machine achieves <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>B</mi><mi>B</mi><mo stretchy=\"false\">(</mo><mn>7</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">BB(7)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05017em;\">BB</span><span class=\"mopen\">(</span><span class=\"mord\">7</span><span class=\"mclose\">)</span></span></span></span> might be too large to fit in the universe). When people extrapolate AI abilities they're normally extrapolating an exponential function, not one that grows faster than any computable function.</p>\n<p>It's possible that AI ability to resolve some of the currently unresolved 6-state machines is a meaningful scale, since they likely have a wide range of difficulties.</p>",
        "id": 574410055,
        "sender_full_name": "Joseph Myers",
        "timestamp": 1771374937
    },
    {
        "content": "<p>While I do agree that it is not exactly fine-grained when observed as just the value <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>B</mi><mi>B</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">BB(n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05017em;\">BB</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">n</span><span class=\"mclose\">)</span></span></span></span> to the next <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>B</mi><mi>B</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo>+</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">BB(n+1)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05017em;\">BB</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">n</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">)</span></span></span></span>, one can simply look at the number of holdouts to get a more fine grained view.</p>\n<p>Do you have any arguments for <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>B</mi><mi>B</mi><mo stretchy=\"false\">(</mo><mn>7</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">BB(7)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05017em;\">BB</span><span class=\"mopen\">(</span><span class=\"mord\">7</span><span class=\"mclose\">)</span></span></span></span> or <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>B</mi><mi>B</mi><mo stretchy=\"false\">(</mo><mn>8</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">BB(8)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05017em;\">BB</span><span class=\"mopen\">(</span><span class=\"mord\">8</span><span class=\"mclose\">)</span></span></span></span> being independent? I would be very impressed to see a Turing Machine, which can enumerate all proofs in Lean with just 7 or 8 states.</p>\n<p>That proof length for machines of a given size n grows uncomputable is actually a big hindrance. Thanks for that insight. It means one can still take Machines of size $n$ or $n+1$ as inspiration, but their proofs don't give insights into an AI's Abilities because we can't pinpoint their \"difficulty\".</p>",
        "id": 574414442,
        "sender_full_name": "Franz Huschenbeth",
        "timestamp": 1771377901
    },
    {
        "content": "<p>I wouldn't expect it to be independent for any nice comprehensible reason (or even any reason that can be stated within the size of the universe) such as enumerating all proofs in Lean. If it enumerates proofs at all as a reason for independence (which I doubt), they're probably proofs in some extremely weird system (that happens to imply consistency of Lean).</p>\n<p>Cf <a href=\"https://www.ams.org/notices/201003/rtx100300343p.pdf\">Can’t Decide? Undecide!</a>: \"I confess delight in each of these examples—it’s absolutely mesmerizing to see them in action. But not only do they leave one unsatisﬁed, with little means of penetrating just <em>why</em> these particular examples—but not others!—behave as they do, but also we can <em>prove</em> that we can <em>never</em> expect to understand why these, particularly, are just so. That is, though there is some “reason” they are as they are, in the form of an astoundingly long proof, there cannot be any “good reason” or understandable short proof.\".</p>\n<p>That doesn't specifically justify 7 or 8 as the threshold, but that seems a reasonable guess based on <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>B</mi><mi>B</mi><mo stretchy=\"false\">(</mo><mn>6</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">BB(6)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05017em;\">BB</span><span class=\"mopen\">(</span><span class=\"mord\">6</span><span class=\"mclose\">)</span></span></span></span> being well beyond what present-day mathematics is capable of (requiring at least a major breakthrough on Collatz-type problems) and the gap in difficulty between <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>B</mi><mi>B</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">BB(n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05017em;\">BB</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">n</span><span class=\"mclose\">)</span></span></span></span> and <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>B</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo>+</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">B(n+1)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05017em;\">B</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">n</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">)</span></span></span></span> growing faster than any computable function of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">n</span></span></span></span>.</p>",
        "id": 574420509,
        "sender_full_name": "Joseph Myers",
        "timestamp": 1771382286
    },
    {
        "content": "<p>So even if you're an AI ultra-optimist in terms of expecting superhuman AI soon that can solve all Millennium Prize Problems with ease, and an AI ultra-pessimist who expects that AI then to proceed to convert all available physical resources into more computational power, expanding outwards from Earth at the speed of light in order to acquire more resources to continue its work on busy beaver numbers, you could still reasonably expect that <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>B</mi><mi>B</mi><mo stretchy=\"false\">(</mo><mn>7</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">BB(7)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05017em;\">BB</span><span class=\"mopen\">(</span><span class=\"mord\">7</span><span class=\"mclose\">)</span></span></span></span> or <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>B</mi><mi>B</mi><mo stretchy=\"false\">(</mo><mn>8</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">BB(8)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05017em;\">BB</span><span class=\"mopen\">(</span><span class=\"mord\">8</span><span class=\"mclose\">)</span></span></span></span> is beyond the physical limits of what such an AI could determine before the heat death of the universe and possibly beyond what can be proved in any reasonable consistent logical system that can be expressed within the universe.</p>",
        "id": 574420997,
        "sender_full_name": "Joseph Myers",
        "timestamp": 1771382684
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/channel/219941-Machine-Learning-for-Theorem-Proving/topic/Opus.204.2E6.20is.20great.20at.20formal.20proofs.20.28Rocq.2FLean4.29/near/574383103\">said</a>:</p>\n<blockquote>\n<p>Perhaps this thread is actually a proof of \"opus 4.6 is great at formal proofs in the topic of theoretical computer science where it might have seen the answers already\". But that's not supposed to be a negative comment -- I think this is a really interesting benchmark and the fact that the proofs were <em>shorter</em> than the human-written proofs (something we're definitely not seeing right now in the domain of pure mathematics) is especially intriguing. I think it would be very interesting to do more tests of this nature across different domains because the current title of this thread looks to me like an interesting hypothesis and it's definitely worth testing further.</p>\n</blockquote>\n<p>Thank you! I will concede that my title is a bit clickbaity/non-scientific (although I meant it genuinely because I did not expect any of the experiments to work and was positively shocked) and that all experiments performed were more CS than maths. However, just to clarify, we have very strong confidence that, excluding BB(4), for all the other experiments  (<a href=\"https://tristan.st/blog/opus_4_6_formal_proofs#master-rocq\">PRFA</a>, <a href=\"https://tristan.st/blog/opus_4_6_formal_proofs#tricky-rocq\">realizability</a>, <a href=\"https://tristan.st/blog/opus_4_6_formal_proofs#fractran-lean4\">Fractran</a>) the solutions were not on the internet.</p>\n<p>More, in the case of <a href=\"https://tristan.st/blog/opus_4_6_formal_proofs#tricky-rocq\">realizability</a>, the authors of the problem had renounced to prove a particularly tedious lemma of the proof, which was solved by Opus. And, in the case of <a href=\"https://tristan.st/blog/opus_4_6_formal_proofs#fractran-lean4\">Fractran</a> (Lean4), which is the closest to mathematics in this \"benchmark\", no human analysis had been performed on the problem and it came up with its own intermediary lemmas.</p>\n<p>Hence I stand by the conclusion of my post, which is my main point:</p>\n<blockquote>\n<p>Apart from the <a href=\"https://tristan.st/blog/opus_4_6_formal_proofs#fractran-lean4\">Lean4 Fractran experiment</a>, all these proofs have in common that Opus 4.6 was presented with an architecture already in place and “just had” to fill in the proofs (numerous and often tedious). This suggests that it is now possible to complete a formal proof project by spending the human research effort on the proof architecture and leveraging a model like Opus 4.6 to fill in the details of the proofs. The Lean4 Fractran experiment shows that Opus 4.6 can, in some contexts, come up with an original argument, proof architecture, and formalisation on its own.</p>\n</blockquote>\n<p>Finally, the capacity of this model/setup to run on its own for tens of hours and still make progress towards the end (instead of entering a \"doom loop\") was impressive to me.</p>",
        "id": 574441622,
        "sender_full_name": "Tristan Stérin",
        "timestamp": 1771399333
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"933054\">Snir Broshi</span> <a href=\"#narrow/channel/219941-Machine-Learning-for-Theorem-Proving/topic/Opus.204.2E6.20is.20great.20at.20formal.20proofs.20.28Rocq.2FLean4.29/near/574404520\">said</a>:</p>\n<blockquote>\n<p>I suggest amount of tactic calls as a better approximation</p>\n</blockquote>\n<p>On the <a href=\"https://rocq-prover.zulipchat.com/#narrow/channel/237655-Miscellaneous/topic/Opus.204.2E6.20is.20great.20at.20formal.20proofs.20.28Rocq.2FLean4.29/with/574288599\">rocq Zulip</a>, it was suggested to use byte count or gzip size. But yes, I agree that LOC is a vague metric.</p>\n<p>The <a href=\"https://tristan.st/blog/opus_4_6_formal_proofs#bb4-proof\">proof comparison</a> I sampled in the blog post is more interesting (I selected that one by sorting the table of the comparison report to show the proofs that were reduced the more, and chose a case that was not too long, to fit in the blog post), but yes, it would require a thorough analysis to measure exactly how many proofs have a meaningfully different proof (taking into consideration that this notion could have several definitions). </p>\n<p>I personally don't expect many of the AI-generated BB(4) proofs to be really meaningfully different, but instead, most of them to be the same argument but \"golfed better\" (e.g. using more compact tactics or leveraging the std library).</p>",
        "id": 574442209,
        "sender_full_name": "Tristan Stérin",
        "timestamp": 1771399691
    },
    {
        "content": "<p>I agree with Joseph Myers that busy beavers are not a particularly promising \"benchmark\" (if you want to call it that). More promising might be Bogdan Grechuk's approach to <a href=\"https://arxiv.org/abs/2404.08518\">Diophantine equations</a>. There's a pleasant mix of levels of difficulty, ranging from easy exercises to simple application of known techniques (some of which may be advanced techniques, such as reciprocity laws or elliptic curves) to ingenious new ad hoc arguments to potentially undecidable problems.</p>",
        "id": 574526849,
        "sender_full_name": "Timothy Chow",
        "timestamp": 1771426277
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"478409\">Timothy Chow</span> <a href=\"#narrow/channel/219941-Machine-Learning-for-Theorem-Proving/topic/Opus.204.2E6.20is.20great.20at.20formal.20proofs.20.28Rocq.2FLean4.29/near/574526849\">said</a>:</p>\n<blockquote>\n<p>I agree with Joseph Myers that busy beavers are not a particularly promising \"benchmark\" (if you want to call it that). More promising might be Bogdan Grechuk's approach to <a href=\"https://arxiv.org/abs/2404.08518\">Diophantine equations</a>. There's a pleasant mix of levels of difficulty, ranging from easy exercises to simple application of known techniques (some of which may be advanced techniques, such as reciprocity laws or elliptic curves) to ingenious new ad hoc arguments to potentially undecidable problems.</p>\n</blockquote>\n<p>I am confused about this argument, the same holds for BB. Inside one of these huge n-state Turing machine spaces, you have all kinds of problems' difficulty; e.g. we currently have 18,195,192 <a href=\"https://wiki.bbchallenge.org/wiki/Holdouts_lists\">holdouts for BB(7)</a> in which you will find every category from trivial to interesting to impossible.</p>",
        "id": 574538060,
        "sender_full_name": "Tristan Stérin",
        "timestamp": 1771428935
    },
    {
        "content": "<p>Finding open problems is probably not the hard part, but assigning a rough estimate of difficulty to it. BB(n) &lt; BB(n+1), in rough measures of difficulty, but the problem is that as indicated by Joseph Meyers, this breaks down, because we cant prove all machines (because of proof length problems) in a given n-state Turing Machine Space. And within a given n-state Turing Machine Space, we cant assign difficulty meaningful.</p>\n<p>Diphantine Equations also generates lots of hard problems (because of the Solution to Hilberts 10th), but (similarly) you cant assign a meaningful measure of difficulty, atleast I dont know a immediate way.</p>",
        "id": 574540468,
        "sender_full_name": "Franz Huschenbeth",
        "timestamp": 1771429475
    },
    {
        "content": "<p>If we are looking for classes of undecidable problems I have listed some others <a href=\"https://github.com/BoltonBailey/mathlib4/issues/9\">here</a> under \"undecidability tarpits\". I think at some point this approach starts to experience a meta-problem along the lines that whatever problem class and complexity measure you decide on, solving the hardest instances might come down to a small set of techniques that happen to line up with the problem class, but aren't more broadly applicable.</p>\n<p>I like ideas for generating benchmarks along the lines of proving or disproving automatic generalizations of existing library lemmas, because these seem likeliest to result in something useful to the community at large.</p>",
        "id": 574572801,
        "sender_full_name": "Bolton Bailey",
        "timestamp": 1771437817
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"911558\">Tristan Stérin</span> <a href=\"#narrow/channel/219941-Machine-Learning-for-Theorem-Proving/topic/Opus.204.2E6.20is.20great.20at.20formal.20proofs.20.28Rocq.2FLean4.29/near/574538060\">said</a>:</p>\n<blockquote>\n<p>I am confused about this argument, the same holds for BB. Inside one of these huge n-state Turing machine spaces, you have all kinds of problems' difficulty; e.g. we currently have 18,195,192 <a href=\"https://wiki.bbchallenge.org/wiki/Holdouts_lists\">holdouts for BB(7)</a> in which you will find every category from trivial to interesting to impossible.</p>\n</blockquote>\n<p>One difference is that, from what I have seen, solving a BB problem rarely if ever involves invoking advanced results from well-developed fields of mathematics such as geometry, analysis, algebra, etc. The other difference, somewhat related, is that there tends to be a steep slope between the tractable and the intractable. If there no elementary argument then the problem is typically impossible.</p>\n<p>However, maybe I'm just underinformed. Are there examples where the solution of a BB problem involved invoking some advanced machinery from a \"classical\" area of mathematics?</p>",
        "id": 574647212,
        "sender_full_name": "Timothy Chow",
        "timestamp": 1771474454
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"478409\">Timothy Chow</span> <a href=\"#narrow/channel/219941-Machine-Learning-for-Theorem-Proving/topic/Opus.204.2E6.20is.20great.20at.20formal.20proofs.20.28Rocq.2FLean4.29/near/574647212\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"911558\">Tristan Stérin</span> <a href=\"#narrow/channel/219941-Machine-Learning-for-Theorem-Proving/topic/Opus.204.2E6.20is.20great.20at.20formal.20proofs.20.28Rocq.2FLean4.29/near/574538060\">said</a>:</p>\n<blockquote>\n<p>I am confused about this argument, the same holds for BB. Inside one of these huge n-state Turing machine spaces, you have all kinds of problems' difficulty; e.g. we currently have 18,195,192 <a href=\"https://wiki.bbchallenge.org/wiki/Holdouts_lists\">holdouts for BB(7)</a> in which you will find every category from trivial to interesting to impossible.</p>\n</blockquote>\n<p>One difference is that, from what I have seen, solving a BB problem rarely if ever involves invoking advanced results from well-developed fields of mathematics such as geometry, analysis, algebra, etc. The other difference, somewhat related, is that there tends to be a steep slope between the tractable and the intractable. If there no elementary argument then the problem is typically impossible.</p>\n<p>However, maybe I'm just underinformed. Are there examples where the solution of a BB problem involved invoking some advanced machinery from a \"classical\" area of mathematics?</p>\n</blockquote>\n<p>\\Pi_1 statements and halting problems of Turing machines are the same thing. That means that any sentence of the form \"For all x, phi(x)\" with phi(x) verifiable in finite time, is also the halting problem of an n-state Turing machine for some n, and hence you need to solve it to solve BB(n). Such statements include for instance Goldbach conjecture or Riemann Hypothesis.</p>\n<p>Hence, you have infinitely many examples of BB problems that require some advanced machinery from a \"classical\" area of mathematics to be solved.</p>\n<p>One example (unsolved) close to my <span aria-label=\"heart\" class=\"emoji emoji-2764\" role=\"img\" title=\"heart\">:heart:</span>  : <a href=\"https://www.erdosproblems.com/406\">https://www.erdosproblems.com/406</a> and its corresponding <a href=\"https://arxiv.org/abs/2107.12475\">TM here</a>.</p>",
        "id": 574663582,
        "sender_full_name": "Tristan Stérin",
        "timestamp": 1771486773
    },
    {
        "content": "<p>No, I don't agree. What we're talking about here is not an arbitrary Turing machine; nor are we talking about an arbitrary Diophantine equation. We're talking about the <em>simplest</em> Turing machines and the <em>simplest</em> Diophantine equations according to some well-defined metric of simplicity. The Riemann hypothesis is not showing up in the BB(7) dataset. By the same token, <a href=\"https://doi.org/10.2307/2273588\">Jones's universal Diophantine equation</a>, which has degree <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>5</mn><mn>60</mn></msup></mrow><annotation encoding=\"application/x-tex\">5^{60}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\"><span class=\"mord\">5</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">60</span></span></span></span></span></span></span></span></span></span></span></span>, is not showing up in Bogdan Grechuk's list.</p>\n<p>My point is that well-developed tools in number theory such as reciprocity laws and elliptic curve theory are already showing up in \"simple\" Diophantine equations in Grechuk's sense. I don't think the same is true with BB.</p>",
        "id": 574715223,
        "sender_full_name": "Timothy Chow",
        "timestamp": 1771504201
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"478409\">Timothy Chow</span> <a href=\"#narrow/channel/219941-Machine-Learning-for-Theorem-Proving/topic/Opus.204.2E6.20is.20great.20at.20formal.20proofs.20.28Rocq.2FLean4.29/near/574715223\">said</a>:</p>\n<blockquote>\n<p>No, I don't agree. What we're talking about here is not an arbitrary Turing machine; nor are we talking about an arbitrary Diophantine equation. We're talking about the <em>simplest</em> Turing machines and the <em>simplest</em> Diophantine equations according to some well-defined metric of simplicity. The Riemann hypothesis is not showing up in the BB(7) dataset. By the same token, <a href=\"https://doi.org/10.2307/2273588\">Jones's universal Diophantine equation</a>, which has degree <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>5</mn><mn>60</mn></msup></mrow><annotation encoding=\"application/x-tex\">5^{60}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\"><span class=\"mord\">5</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">60</span></span></span></span></span></span></span></span></span></span></span></span>, is not showing up in Bogdan Grechuk's list.</p>\n<p>My point is that well-developed tools in number theory such as reciprocity laws and elliptic curve theory are already showing up in \"simple\" Diophantine equations in Grechuk's sense. I don't think the same is true with BB.</p>\n</blockquote>\n<p>(a) Erdős problem 406 is showing up in BB(15)<br>\n(b) With 18,195,192 BB(7) holdouts, we have no idea of what is showing up there<br>\n(c) <a href=\"https://wiki.bbchallenge.org/wiki/Antihydra\">Hard Collatz-like problems</a>, <a href=\"https://www.cambridge.org/core/journals/glasgow-mathematical-journal/article/on-integer-sequences-generated-by-linear-maps/C40C0C07FEC20797475BB2899C436C9A\">previously studied in the literature</a>, show up in BB(6)</p>",
        "id": 574718276,
        "sender_full_name": "Tristan Stérin",
        "timestamp": 1771505224
    },
    {
        "content": "<p>Okay, that reinforces my belief that well-developed theories in classical mathematics are <em>not</em> showing up in BB. Mathematics is famously \"not ready\" for hard Collatz-type problems; there is little to no relevant theory that can help us. I just took a look at Erdős problem 406 and again it seems to be elementary. The existence of problems where we have no idea what is going on means that we can't <em>prove</em> that the Riemann hypothesis isn't lurking inside, but it's not evidence that the Riemann hypothesis is there.</p>",
        "id": 574752319,
        "sender_full_name": "Timothy Chow",
        "timestamp": 1771513674
    },
    {
        "content": "<p>This is not to say that BB problems aren't interesting. I'm just clarifying what makes it a qualitatively different benchmark. Solving Diophantine equations would test the ability to master a lot of number theory and see how to apply it.</p>",
        "id": 574752733,
        "sender_full_name": "Timothy Chow",
        "timestamp": 1771513777
    },
    {
        "content": "<p>By the way, I myself have cited the appearance of Collatz-type problems in BB as a counterargument to people who try to argue that Collatz is an \"artificial\" problem and not a \"natural\" problem. Computation is arguably comparably fundamental to number theory. So I do think it is mathematically interesting that Collatz-type problems show up in BB. But that doesn't automatically make Collatz-type problems a good benchmark.</p>",
        "id": 574753693,
        "sender_full_name": "Timothy Chow",
        "timestamp": 1771514034
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"478409\">Timothy Chow</span> <a href=\"#narrow/channel/219941-Machine-Learning-for-Theorem-Proving/topic/Opus.204.2E6.20is.20great.20at.20formal.20proofs.20.28Rocq.2FLean4.29/near/574752319\">said</a>:</p>\n<blockquote>\n<p>Okay, that reinforces my belief that well-developed theories in classical mathematics are <em>not</em> showing up in BB. Mathematics is famously \"not ready\" for hard Collatz-type problems; there is little to no relevant theory that can help us. I just took a look at Erdős problem 406 and again it seems to be elementary. The existence of problems where we have no idea what is going on means that we can't <em>prove</em> that the Riemann hypothesis isn't lurking inside, but it's not evidence that the Riemann hypothesis is there.</p>\n</blockquote>\n<p>To that, I'll say again that with 18,195,192 holdouts in BB(7) we're far from knowing what flavor of problems lurk in. Also, BB is defined for all models of computations and there's no reasons for e.g. the problem space of <a href=\"https://wiki.bbchallenge.org/wiki/Fractran\">BB_Fractran</a> to look anyhting like the problem space of BB_TM.</p>",
        "id": 574756454,
        "sender_full_name": "Tristan Stérin",
        "timestamp": 1771514710
    },
    {
        "content": "<p>With this same setup we achieved 81.1% of solved problems (198/244) on the test set of <a href=\"https://github.com/LLM4Rocq/miniF2F-rocq/tree/main/valid\">miniF2F-rocq</a> in about 6h of active time (25h total but stalled a lot of the time because of waiting for session limits to reset).</p>",
        "id": 575001817,
        "sender_full_name": "Tristan Stérin",
        "timestamp": 1771610660
    },
    {
        "content": "<p>With the same setup, Opus 4.6 formalised in about 1h30 an early Collatz paper, <a href=\"https://ccchallenge.org/#BohmSontacchi1978\">[Bohm &amp; Sontacchi 1978]</a>, find the formalisation attached: <a href=\"/user_uploads/3121/FLgKpgtm2BzucFQxWeqN2VYz/BohmSontacchi1978_lean.zip\">BohmSontacchi1978_lean.zip</a></p>\n<p>One of the main result of the paper is that an element $x$ of a Collatz cycle of size $n$ is such that $|x| &lt; 3^n$, see Prop6.lean.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"sd\">/-- PROPOSITION 6 (main statement): If x is a fixed point of u^n</span>\n<span class=\"sd\">    (i.e., isCycleOfU n x), then |x| &lt; 3^n.</span>\n\n<span class=\"sd\">    The proof relies on Proposition 4 which gives the integer formula</span>\n<span class=\"sd\">    2^n * u^n(x) = 3^m * x + listNumSum v, and the bound listNumSum v &lt; 3^n. -/</span>\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">prop6_cycle_bound</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hcycle</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">isCycleOfU</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"bp\">|</span><span class=\"n\">x</span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"k\">obtain</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">hn</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">hcycle_eq</span><span class=\"bp\">⟩</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">hcycle</span>\n<span class=\"w\">  </span><span class=\"c1\">-- Let v be the list of odd steps</span>\n<span class=\"w\">  </span><span class=\"n\">set</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">oddSteps'</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"n\">hv_def</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">hv_sorted</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"bp\">.</span><span class=\"n\">Pairwise</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"bp\">·</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">oddSteps'_strictMono</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">n</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">hv_bound</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">oddSteps'_bound</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">n</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">hv_compat</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"bp\">↔</span><span class=\"w\"> </span><span class=\"n\">collatzU_iterate</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">%</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">    </span><span class=\"n\">oddSteps'_compat</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">n</span>\n<span class=\"w\">  </span><span class=\"c1\">-- Apply the integer formula</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">hformula</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">collatzU_iterate_int_formula</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"n\">hv_sorted</span><span class=\"w\"> </span><span class=\"n\">hv_bound</span><span class=\"w\"> </span><span class=\"n\">hv_compat</span>\n<span class=\"w\">  </span><span class=\"c1\">-- hformula : 2^n * collatzU_iterate n x = 3^v.length * x + listNumSum v</span>\n<span class=\"w\">  </span><span class=\"c1\">-- Since collatzU_iterate n x = x:</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">hcycle_eq</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">hformula</span>\n<span class=\"w\">  </span><span class=\"c1\">-- hformula : 2^n * x = 3^v.length * x + listNumSum v</span>\n<span class=\"w\">  </span><span class=\"c1\">-- So x * (2^n - 3^v.length) = listNumSum v</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">hkey</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"bp\">.</span><span class=\"n\">length</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">listNumSum</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">linarith</span>\n<span class=\"w\">  </span><span class=\"c1\">-- Case split on whether v is empty</span>\n<span class=\"w\">  </span><span class=\"n\">by_cases</span><span class=\"w\"> </span><span class=\"n\">hv_empty</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">[]</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"c1\">-- v = []: listNumSum [] = 0, so x * (2^n - 1) = 0</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">hlen</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"bp\">.</span><span class=\"n\">length</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">hv_empty</span><span class=\"o\">]</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">simp</span>\n<span class=\"w\">    </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">hlen</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">hkey</span>\n<span class=\"w\">    </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"n\">only</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">pow_zero</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">hkey</span>\n<span class=\"w\">    </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">hv_empty</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">listNumSum</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">hkey</span>\n<span class=\"w\">    </span><span class=\"c1\">-- hkey : x * (2^n - 1) = 0</span>\n<span class=\"w\">    </span><span class=\"c1\">-- 2^n - 1 ≠ 0 since n &gt; 0</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h2n_gt1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">&gt;</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">      </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">≥</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">        </span><span class=\"n\">exact_mod_cast</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">pow_le_pow_right</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">omega</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">hn</span>\n<span class=\"w\">      </span><span class=\"n\">linarith</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"k\">show</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">norm_num</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">hx_zero</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">      </span><span class=\"n\">rcases</span><span class=\"w\"> </span><span class=\"n\">mul_eq_zero</span><span class=\"bp\">.</span><span class=\"n\">mp</span><span class=\"w\"> </span><span class=\"n\">hkey</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">h</span>\n<span class=\"w\">      </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">h</span>\n<span class=\"w\">      </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">omega</span>\n<span class=\"w\">    </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">hx_zero</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">abs_zero</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"n\">positivity</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"c1\">-- v ≠ []: use the bounds</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">hS_nonneg</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">listNumSum</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">listNumSum_nonneg</span><span class=\"w\"> </span><span class=\"n\">v</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">hS_lt</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">listNumSum</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">listNumSum_lt_pow3</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">hv_empty</span><span class=\"w\"> </span><span class=\"n\">hv_sorted</span><span class=\"w\"> </span><span class=\"n\">hv_bound</span>\n<span class=\"w\">    </span><span class=\"c1\">-- 2^n ≠ 3^v.length</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">hne</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"bp\">.</span><span class=\"n\">length</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">pow2_ne_pow3</span><span class=\"w\"> </span><span class=\"n\">hn</span>\n<span class=\"w\">    </span><span class=\"c1\">-- So |2^n - 3^v.length| ≥ 1</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">hdiff_ne</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"bp\">.</span><span class=\"n\">length</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">sub_ne_zero</span><span class=\"bp\">.</span><span class=\"n\">mpr</span><span class=\"w\"> </span><span class=\"n\">hne</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">hdiff_abs_ge1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"o\">((</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"bp\">.</span><span class=\"n\">length</span><span class=\"o\">)</span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">      </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">Int</span><span class=\"bp\">.</span><span class=\"n\">one_le_abs</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">sub_ne_zero</span><span class=\"bp\">.</span><span class=\"n\">mpr</span><span class=\"w\"> </span><span class=\"n\">hne</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"c1\">-- |x| * |2^n - 3^m| = |listNumSum v| = listNumSum v (since nonneg)</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">habs_eq</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"n\">x</span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"o\">((</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"bp\">.</span><span class=\"n\">length</span><span class=\"o\">)</span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">listNumSum</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">      </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">abs_mul</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">hkey</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">abs_of_nonneg</span><span class=\"w\"> </span><span class=\"n\">hS_nonneg</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"c1\">-- |x| ≤ listNumSum v (since |2^n - 3^m| ≥ 1)</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">habs_le</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"n\">x</span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">listNumSum</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">      </span><span class=\"k\">calc</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"n\">x</span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"n\">x</span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">ring</span>\n<span class=\"w\">        </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"n\">x</span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"o\">((</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"bp\">.</span><span class=\"n\">length</span><span class=\"o\">)</span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">          </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">mul_le_mul_of_nonneg_left</span><span class=\"w\"> </span><span class=\"n\">hdiff_abs_ge1</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">abs_nonneg</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span>\n<span class=\"w\">        </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">listNumSum</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">habs_eq</span>\n<span class=\"w\">    </span><span class=\"n\">linarith</span>\n</code></pre></div>",
        "id": 575031692,
        "sender_full_name": "Tristan Stérin",
        "timestamp": 1771623375
    },
    {
        "content": "<p>What I like about Opus proofs is the extensive readable comments in the code.</p>",
        "id": 575069392,
        "sender_full_name": "Ralf Stephan",
        "timestamp": 1771660669
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"911558\">Tristan Stérin</span> <a href=\"#narrow/channel/219941-Machine-Learning-for-Theorem-Proving/topic/Opus.204.2E6.20is.20great.20at.20formal.20proofs.20.28Rocq.2FLean4.29/near/575001817\">said</a>:</p>\n<blockquote>\n<p>With this same setup we achieved 81.1% of solved problems (198/244) on the test set of <a href=\"https://github.com/LLM4Rocq/miniF2F-rocq/tree/main/valid\">miniF2F-rocq</a> in about 6h of active time (25h total but stalled a lot of the time because of waiting for session limits to reset).</p>\n</blockquote>\n<p>After a more careful analysis than mine by Guillaume Baudart, it turns out the setup achieved 81.1% and not 85.2% at miniF2F-rocq.</p>",
        "id": 575168486,
        "sender_full_name": "Tristan Stérin",
        "timestamp": 1771773058
    }
]