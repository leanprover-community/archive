[
    {
        "content": "<p>Looks like Deepseek's new model set a new record on PutnamBench -&gt;https://x.com/zhs05232838/status/1917600755936018715</p>",
        "id": 515338707,
        "sender_full_name": "Andy Jiang",
        "timestamp": 1746027811
    },
    {
        "content": "<p>49 problems solved is a huge improvement over previous bests. I've reached out to the DeepSeek team so they can send me the proofs to validate, so I can add the model to the leaderboard. (Though I only sent to their service email, if any members of the team see this, reach out!)</p>",
        "id": 515339204,
        "sender_full_name": "George Tsoukalas",
        "timestamp": 1746027942
    },
    {
        "content": "<p>I like the super long Lean proof starting page 23 and ending page 32 of the <a href=\"https://github.com/deepseek-ai/DeepSeek-Prover-V2/blob/main/DeepSeek_Prover_V2.pdf\">report</a> <span aria-label=\"exploding head\" class=\"emoji emoji-1f92f\" role=\"img\" title=\"exploding head\">:exploding_head:</span></p>",
        "id": 515365833,
        "sender_full_name": "Auguste Poiroux",
        "timestamp": 1746035522
    },
    {
        "content": "<p>It has certainly learned how to break proofs into small steps!</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"o\">[</span><span class=\"bp\">...</span><span class=\"o\">]</span>\n<span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h30</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Z</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">omega</span>\n<span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h31</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Z</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">⩾</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">omega</span>\n<span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h32</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Z</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">⩾</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">omega</span>\n<span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h33</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Z</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"bp\">−</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">−</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"bp\">−</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"bp\">−</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">linarith</span>\n<span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h34</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Z</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">omega</span>\n<span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h35</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Z</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">⩾</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">omega</span>\n<span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h36</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Z</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">⩾</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">omega</span>\n<span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h37</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Z</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"bp\">−</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">−</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"bp\">−</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"bp\">−</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">linarith</span>\n<span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h38</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">False</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h39</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Z</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">omega</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h40</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Z</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">⩾</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">omega</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h41</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Z</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">⩾</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">omega</span>\n<span class=\"o\">[</span><span class=\"bp\">...</span><span class=\"o\">]</span>\n</code></pre></div>",
        "id": 515377690,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1746039521
    },
    {
        "content": "<p>But joking aside, the performance and these formal proofs look impressive! That is very different than some of the previous proofs that some models gave, which basically felt like \"we learned how to provide 2 useful arguments to <code>nlinarith</code>\".</p>",
        "id": 515377693,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1746039523
    },
    {
        "content": "<p>Maybe this should be its own topic?</p>",
        "id": 515377848,
        "sender_full_name": "Jason Rute",
        "timestamp": 1746039601
    },
    {
        "content": "<p>6 messages were moved here from <a class=\"stream-topic\" data-stream-id=\"219941\" href=\"/#narrow/channel/219941-Machine-Learning-for-Theorem-Proving/topic/PutnamBench/with/452196205\">#Machine Learning for Theorem Proving &gt; PutnamBench</a> by <span class=\"user-mention silent\" data-user-id=\"111080\">Floris van Doorn</span>.</p>",
        "id": 515378257,
        "sender_full_name": "Notification Bot",
        "timestamp": 1746039737
    },
    {
        "content": "<p>This is impressive work!  I look forward to understanding it better, especially in relation to the recent Kimina work.</p>",
        "id": 515387467,
        "sender_full_name": "Jason Rute",
        "timestamp": 1746042992
    },
    {
        "content": "<p>Does validation for PutnamBench include making sure that the proofs do solve the intended informal problem (rather than showing up incorrect formal statements in the benchmark)?</p>\n<p>The report also refers to solving 12 problems from CombiBench, which even more needs assessment of whether those problems have correct formal statements.</p>",
        "id": 515419949,
        "sender_full_name": "Joseph Myers",
        "timestamp": 1746057595
    },
    {
        "content": "<p>Given this work, does DeepSeek intend to make formal-to-formal attempts at the problems from the next few IMOs, Putnams etc. when they come out (preferably with independent formal statements shared between all AIs making such attempts for better comparability than each AI having its own Lean versions of the problems)?</p>",
        "id": 515420407,
        "sender_full_name": "Joseph Myers",
        "timestamp": 1746057775
    },
    {
        "content": "<p>One unfortunate thing I noticed from the paper is that it's evaluated using Lean 4.9 (which was released last July) and benchmark problems which are incompatible with Lean 4.9 are excluded. It's not clear to me whether this is due to model limitations or for better testing control (since DeepSeek-Prover-1.5 is also evaluated with Lean 4.9)</p>",
        "id": 515450770,
        "sender_full_name": "Li Xuanji",
        "timestamp": 1746077767
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"308587\">Li Xuanji</span> <a href=\"#narrow/stream/219941-Machine-Learning-for-Theorem-Proving/topic/DeepSeek-Prover.20V2/near/515450770\">said</a>:</p>\n<blockquote>\n<p>One unfortunate thing I noticed from the paper is that it's evaluated using Lean 4.9 (which was released last July) and benchmark problems which are incompatible with Lean 4.9 are excluded. It's not clear to me whether this is due to model limitations or for better testing control (since DeepSeek-Prover-1.5 is also evaluated with Lean 4.9)</p>\n</blockquote>\n<p>I just opened my phone to post the same point, but you were there first</p>",
        "id": 515457438,
        "sender_full_name": "Alok Singh",
        "timestamp": 1746082038
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"115715\">Jason Rute</span> <a href=\"#narrow/channel/219941-Machine-Learning-for-Theorem-Proving/topic/DeepSeek-Prover.20V2/near/515387467\">said</a>:</p>\n<blockquote>\n<p>This is impressive work!  I look forward to understanding it better, especially in relation to the recent Kimina work.</p>\n</blockquote>\n<p>They speak a bit to this  point in the <strong>Cold Start by Synthetic Data</strong> subsection of Section 2.2</p>",
        "id": 515465551,
        "sender_full_name": "Kelly Davis",
        "timestamp": 1746086669
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"308587\">Li Xuanji</span> <a href=\"#narrow/channel/219941-Machine-Learning-for-Theorem-Proving/topic/DeepSeek-Prover.20V2/near/515450770\">said</a>:</p>\n<blockquote>\n<p>One unfortunate thing I noticed from the paper is that it's evaluated using Lean 4.9 (which was released last July) and benchmark problems which are incompatible with Lean 4.9 are excluded. It's not clear to me whether this is due to model limitations or for better testing control (since DeepSeek-Prover-1.5 is also evaluated with Lean 4.9)</p>\n</blockquote>\n<p>I would say it is probably neither about \"model limitations\" or \"better testing control\", but just about their technical setup. They are using <a href=\"https://github.com/xinhjBrant/mathlib4/tree/deepseek\">https://github.com/xinhjBrant/mathlib4/tree/deepseek</a> with a fixed version of a forked REPL. Their tooling and datasets are probably built around that.</p>",
        "id": 515465796,
        "sender_full_name": "Auguste Poiroux",
        "timestamp": 1746086782
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"644040\">George Tsoukalas</span> <a href=\"#narrow/channel/219941-Machine-Learning-for-Theorem-Proving/topic/DeepSeek-Prover.20V2/near/515339204\">said</a>:</p>\n<blockquote>\n<p>49 problems solved is a huge improvement over previous bests. I've reached out to the DeepSeek team so they can send me the proofs to validate, so I can add the model to the leaderboard. (Though I only sent to their service email, if any members of the team see this, reach out!)</p>\n</blockquote>\n<p>Let me ask Zhihong about this.</p>",
        "id": 515485429,
        "sender_full_name": "Albert Jiang",
        "timestamp": 1746097195
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"258175\">@Albert Jiang</span> you may want to also point out all the mistakes people found in their benchmark: <a href=\"#narrow/stream/219941-Machine-Learning-for-Theorem-Proving/topic/ProverBench/\">https://leanprover.zulipchat.com/#narrow/stream/219941-Machine-Learning-for-Theorem-Proving/topic/ProverBench/</a></p>",
        "id": 515485898,
        "sender_full_name": "Jason Rute",
        "timestamp": 1746097425
    },
    {
        "content": "<p>Well, I tried the 7B model locally, and it worked really great. But there's something I feel that I have to point out: In the Appendix B of the paper, both of the proofs there has used <code>apply?</code>, and the proof seems not to actually work? (Since aside from <code>apply?</code>, it seems that nothing non-trivial has been proved, so I'm wondering if they have mistaken that as having proved the problem?)</p>",
        "id": 515487837,
        "sender_full_name": "Wang Jingting",
        "timestamp": 1746098475
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"750070\">Wang Jingting</span> <a href=\"#narrow/channel/219941-Machine-Learning-for-Theorem-Proving/topic/DeepSeek-Prover.20V2/near/515487837\">said</a>:</p>\n<blockquote>\n<p>Well, I tried the 7B model locally, and it worked really great. But there's something I feel that I have to point out: In the Appendix B of the paper, both of the proofs there has used <code>apply?</code>, and the proof seems not to actually work? (Since aside from <code>apply?</code>, it seems that nothing non-trivial has been proved, so I'm wondering if they have mistaken that as having proved the problem?)</p>\n</blockquote>\n<p>I agree it looks wrong.  The proof doesn't use most of the assumptions.  <span class=\"user-mention\" data-user-id=\"644040\">@George Tsoukalas</span> Please look at this one closely when you get a chance.   Is this problem wrong in PutnamBench, or do they have a buggy proof-checking harness?  If the latter, I'm worried that their numbers might be much too high due to bugs in their infrastructure.</p>",
        "id": 515499255,
        "sender_full_name": "Jason Rute",
        "timestamp": 1746103674
    },
    {
        "content": "<p>A wrong <code>apply?</code> proof being accepted closely resembles to the <a href=\"https://github.com/leanprover-community/repl/issues/44\">bugs</a> of the tactic mode of the REPL that have been recently <a href=\"https://github.com/leanprover-community/repl/pull/63\">fixed</a> (second <a href=\"https://github.com/leanprover-community/repl/pull/82\">fix</a> specific to wrong self-application).<br>\nHowever, I would be surprised if they used the REPL tactic mode for DeepSeekProver-V2 given that they only used the command mode for DeepSeek-Prover v1.5 as far as I know. And from what I understand in their DeepSeek-Prover V2 report, they are also very likely using the command mode only.</p>",
        "id": 515499970,
        "sender_full_name": "Auguste Poiroux",
        "timestamp": 1746104010
    },
    {
        "content": "<p>It would be good to go through their miniF2F solutions and find proofs with <code>apply?</code>.  (And also to independently check all their solutions in Lean 4.9 or whatever it is that they use.)</p>",
        "id": 515501409,
        "sender_full_name": "Jason Rute",
        "timestamp": 1746104617
    },
    {
        "content": "<p>There is another Putnam <a href=\"https://live.lean-lang.org/#codez=JYWwDg9gTgLgBAWQIYwBYBtgCMBQEwCmAdnAMoHwByKcAYgK5EDGMwEROOaB0BIcYejCJIQAfQBMABikB2MVgAsOABQkAXHECohAEo4ayAGc4mkgD44UvetUBvFQAUANHACK1/Q4joAnkQggwEjocIC4hHoA657efgFBIeFwAD5wDnAAenAScADUbhlZcAC8qTH+gcEAdAAaBSrZAFRwRHp5AIxwgOREqZUAJgQA5lAEBHBmOHBufYPDBAC+lcxIUL3F+ioAZozNxRbZmWq5cG06HlpwgEmE2notJiVYPhNwqEgAbqOoHZqAAEQ7mloucyWS76WyeFzuEzRXzleJhSLQ2IVBJ6FJpTLZPKuArZEpeGFxKq1A6NJ63dpdHr9IYjMZTamzOALJYrKG6Nb7fQkdrWe6PSaTYBEGBQCA7VAcAXPN4fKG/DTaQF0qQglRgxwQjyOMqElFwKLagnI+HJVI4o7YjFrfFI+I1OqNZo6J6TCndBzTGmjCyuT2M5lMZarf56Eqcw48u5wB4ugVCkVikgS2OTF7vZ5fUHgtxam2w4Img153UmtHmrHmvE65H2klwJrk45dFMCj0M2k+v20gNBtmhwoHbnHXnR/lSgVpj7ZTRq7OQmfF42JIvVuGJMtWitWqtGu3E/SOxsdTotqVtmYd+kX0ZzKHkeAqQ22gvLxH5lGnRaB1lhupDk5RjG47jlAADucAANoAMJBkKVQiDAMGGDAYhCgAVgAuqeApIGAYC+AA/NhBAAB5ICwYggBAvRiIGyHPBILakeR8CfLGzEsM84qStK6aoNOWYajmUJPu+hZviW65mpu+TbqUu5Eg69ZOkcx5Utesadu2N5fr2IYcn+qkjkBOF4b4GbsWRnFEEYTyGKAYBIJB/EYXA9D2UQAwMUAA\">problem</a> using <code>apply?</code> that only formalizes variations of the answer statement in <code>have</code> statements without proof and then uses the final one to close the goal. I am really use about the results of this paper now, I would speculate that their REPL is dodgy and allows for these proofs to pass. Just a quick mention that the Kimina Lean server (<a href=\"https://github.com/project-numina/kimina-lean-server\">https://github.com/project-numina/kimina-lean-server</a>) catches these proofs as incomplete.</p>",
        "id": 515510174,
        "sender_full_name": "Mantas Baksys",
        "timestamp": 1746108017
    },
    {
        "content": "<p>Yes, for example the first proof of Appendix B doesn't pass our verification with the <a href=\"https://arxiv.org/abs/2504.21230\">Kimina Lean Server</a>:<br>\n<code>{'has_error': False, 'is_valid_no_sorry': False, 'is_valid_with_sorry': True}</code><br>\nIt is a valid proof, but it counts as a proof using <code>sorry</code>.</p>",
        "id": 515510370,
        "sender_full_name": "Marco Dos Santos",
        "timestamp": 1746108075
    },
    {
        "content": "<p>This could be really bad for them.  Is anyone willing to check all there minif2f results?  (They haven’t posted the Putnam bench results yet.)</p>",
        "id": 515510636,
        "sender_full_name": "Jason Rute",
        "timestamp": 1746108152
    },
    {
        "content": "<p>Let me try to validate their MiniF2F using Kimina Lean Server.</p>",
        "id": 515513137,
        "sender_full_name": "Mert Ünsal",
        "timestamp": 1746108974
    },
    {
        "content": "<p>(They officially use Lean 4.9 I think, so that may create issues.)</p>",
        "id": 515513322,
        "sender_full_name": "Jason Rute",
        "timestamp": 1746109052
    },
    {
        "content": "<p>I tested both proofs published in Appendix B using Lean <code>v4.9.0</code> and I can confirm they're both incomplete.</p>",
        "id": 515513719,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1746109187
    },
    {
        "content": "<p>Just checked all their minif2f proofs using LeanInteract with Lean v4.9.0. Unless I made a mistake in my code, no issues to report. They probably just made a mistake in their appendix.</p>\n<div class=\"spoiler-block\"><div class=\"spoiler-header\">\n<p>Code</p>\n</div><div class=\"spoiler-content\" aria-hidden=\"true\">\n<div class=\"codehilite\" data-code-language=\"Python\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"nn\">os</span>\n<span class=\"kn\">from</span><span class=\"w\"> </span><span class=\"nn\">concurrent.futures</span><span class=\"w\"> </span><span class=\"kn\">import</span> <span class=\"n\">ThreadPoolExecutor</span><span class=\"p\">,</span> <span class=\"n\">as_completed</span>\n\n<span class=\"kn\">from</span><span class=\"w\"> </span><span class=\"nn\">lean_interact</span><span class=\"w\"> </span><span class=\"kn\">import</span> <span class=\"n\">AutoLeanServer</span><span class=\"p\">,</span> <span class=\"n\">FileCommand</span><span class=\"p\">,</span> <span class=\"n\">LeanREPLConfig</span><span class=\"p\">,</span> <span class=\"n\">TempRequireProject</span>\n<span class=\"kn\">from</span><span class=\"w\"> </span><span class=\"nn\">lean_interact.interface</span><span class=\"w\"> </span><span class=\"kn\">import</span> <span class=\"n\">LeanError</span>\n\n<span class=\"n\">config</span> <span class=\"o\">=</span> <span class=\"n\">LeanREPLConfig</span><span class=\"p\">(</span><span class=\"n\">lean_version</span><span class=\"o\">=</span><span class=\"s2\">\"v4.9.0\"</span><span class=\"p\">,</span> <span class=\"n\">project</span><span class=\"o\">=</span><span class=\"n\">TempRequireProject</span><span class=\"p\">(</span><span class=\"s2\">\"mathlib\"</span><span class=\"p\">))</span>\n\n\n<span class=\"c1\"># Helper function to process a single file</span>\n<span class=\"k\">def</span><span class=\"w\"> </span><span class=\"nf\">process_file</span><span class=\"p\">(</span><span class=\"n\">path</span><span class=\"p\">):</span>\n    <span class=\"n\">server</span> <span class=\"o\">=</span> <span class=\"n\">AutoLeanServer</span><span class=\"p\">(</span><span class=\"n\">config</span><span class=\"p\">)</span>\n    <span class=\"n\">response</span> <span class=\"o\">=</span> <span class=\"n\">server</span><span class=\"o\">.</span><span class=\"n\">run</span><span class=\"p\">(</span><span class=\"n\">FileCommand</span><span class=\"p\">(</span><span class=\"n\">path</span><span class=\"o\">=</span><span class=\"n\">path</span><span class=\"p\">))</span>\n    <span class=\"k\">if</span> <span class=\"nb\">isinstance</span><span class=\"p\">(</span><span class=\"n\">response</span><span class=\"p\">,</span> <span class=\"n\">LeanError</span><span class=\"p\">)</span> <span class=\"ow\">or</span> <span class=\"ow\">not</span> <span class=\"n\">response</span><span class=\"o\">.</span><span class=\"n\">lean_code_is_valid</span><span class=\"p\">(</span><span class=\"n\">allow_sorry</span><span class=\"o\">=</span><span class=\"kc\">False</span><span class=\"p\">):</span>\n        <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"sa\">f</span><span class=\"s2\">\"Error in </span><span class=\"si\">{</span><span class=\"n\">path</span><span class=\"si\">}</span><span class=\"s2\">: </span><span class=\"si\">{</span><span class=\"n\">response</span><span class=\"si\">}</span><span class=\"s2\">\"</span><span class=\"p\">)</span>\n        <span class=\"k\">return</span> <span class=\"kc\">False</span>\n    <span class=\"k\">else</span><span class=\"p\">:</span>\n        <span class=\"k\">return</span> <span class=\"kc\">True</span>\n\n\n<span class=\"c1\"># run all the lean files inside the `test` and `valid` folders</span>\n<span class=\"n\">root_dir</span> <span class=\"o\">=</span> <span class=\"n\">os</span><span class=\"o\">.</span><span class=\"n\">path</span><span class=\"o\">.</span><span class=\"n\">dirname</span><span class=\"p\">(</span><span class=\"n\">os</span><span class=\"o\">.</span><span class=\"n\">path</span><span class=\"o\">.</span><span class=\"n\">abspath</span><span class=\"p\">(</span><span class=\"vm\">__file__</span><span class=\"p\">))</span>\n<span class=\"k\">for</span> <span class=\"n\">split</span> <span class=\"ow\">in</span> <span class=\"p\">[</span><span class=\"s2\">\"test\"</span><span class=\"p\">,</span> <span class=\"s2\">\"valid\"</span><span class=\"p\">]:</span>\n    <span class=\"n\">files_to_run</span> <span class=\"o\">=</span> <span class=\"p\">[]</span>\n    <span class=\"k\">for</span> <span class=\"n\">root</span><span class=\"p\">,</span> <span class=\"n\">dirs</span><span class=\"p\">,</span> <span class=\"n\">files</span> <span class=\"ow\">in</span> <span class=\"n\">os</span><span class=\"o\">.</span><span class=\"n\">walk</span><span class=\"p\">(</span><span class=\"n\">os</span><span class=\"o\">.</span><span class=\"n\">path</span><span class=\"o\">.</span><span class=\"n\">join</span><span class=\"p\">(</span><span class=\"n\">root_dir</span><span class=\"p\">,</span> <span class=\"n\">split</span><span class=\"p\">)):</span>\n        <span class=\"k\">for</span> <span class=\"n\">file</span> <span class=\"ow\">in</span> <span class=\"n\">files</span><span class=\"p\">:</span>\n            <span class=\"k\">if</span> <span class=\"n\">file</span><span class=\"o\">.</span><span class=\"n\">endswith</span><span class=\"p\">(</span><span class=\"s2\">\".lean\"</span><span class=\"p\">):</span>\n                <span class=\"n\">path</span> <span class=\"o\">=</span> <span class=\"n\">os</span><span class=\"o\">.</span><span class=\"n\">path</span><span class=\"o\">.</span><span class=\"n\">join</span><span class=\"p\">(</span><span class=\"n\">root_dir</span><span class=\"p\">,</span> <span class=\"n\">root</span><span class=\"p\">,</span> <span class=\"n\">file</span><span class=\"p\">)</span>\n                <span class=\"n\">files_to_run</span><span class=\"o\">.</span><span class=\"n\">append</span><span class=\"p\">(</span><span class=\"n\">path</span><span class=\"p\">)</span>\n\n    <span class=\"n\">counter_correct</span> <span class=\"o\">=</span> <span class=\"mi\">0</span>\n    <span class=\"n\">counter_total</span> <span class=\"o\">=</span> <span class=\"mi\">0</span>\n\n    <span class=\"k\">with</span> <span class=\"n\">ThreadPoolExecutor</span><span class=\"p\">()</span> <span class=\"k\">as</span> <span class=\"n\">executor</span><span class=\"p\">:</span>\n        <span class=\"n\">futures</span> <span class=\"o\">=</span> <span class=\"p\">{</span><span class=\"n\">executor</span><span class=\"o\">.</span><span class=\"n\">submit</span><span class=\"p\">(</span><span class=\"n\">process_file</span><span class=\"p\">,</span> <span class=\"n\">path</span><span class=\"p\">):</span> <span class=\"n\">path</span> <span class=\"k\">for</span> <span class=\"n\">path</span> <span class=\"ow\">in</span> <span class=\"n\">files_to_run</span><span class=\"p\">}</span>\n        <span class=\"k\">for</span> <span class=\"n\">future</span> <span class=\"ow\">in</span> <span class=\"n\">as_completed</span><span class=\"p\">(</span><span class=\"n\">futures</span><span class=\"p\">):</span>\n            <span class=\"n\">counter_total</span> <span class=\"o\">+=</span> <span class=\"mi\">1</span>\n            <span class=\"k\">if</span> <span class=\"n\">future</span><span class=\"o\">.</span><span class=\"n\">result</span><span class=\"p\">():</span>\n                <span class=\"n\">counter_correct</span> <span class=\"o\">+=</span> <span class=\"mi\">1</span>\n            <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"sa\">f</span><span class=\"s2\">\"Correct: </span><span class=\"si\">{</span><span class=\"n\">counter_correct</span><span class=\"si\">}</span><span class=\"s2\">/</span><span class=\"si\">{</span><span class=\"n\">counter_total</span><span class=\"si\">}</span><span class=\"s2\">\"</span><span class=\"p\">)</span>\n</code></pre></div>\n</div></div>",
        "id": 515516222,
        "sender_full_name": "Auguste Poiroux",
        "timestamp": 1746109965
    },
    {
        "content": "<p>Minor note: there is an <code>apply?</code>-incomplete proof in the valid set.</p>",
        "id": 515517209,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1746110255
    },
    {
        "content": "<p><code>algebra_amgm_prod1toneq1_sum1tongeqn.lean</code>? <del>It looks ok in the <a href=\"https://live.lean-lang.org/#codez=JYWwDg9gTgLgBAWQIYwBYBtgCMBQpKxwCCApgM4Rg45kkwD6lMwEAdnCEgB4ASJSsLPxhk4ABmqUS7AELAA5gHkwJKCmiiASv3RwAcijgAVShHQR5ATziaU1APQBaR3ADKqCAHc4aQwDNoOCRWaygdRwA3JHQAVxIAEzg/GNYAY2Y2OAASJCy4TLQSOFYUGLVdVhiQIShRMhjU1B9UQyyAHQDy3WA4NuB2Ns40LCwAbz0AXwAaIPoetvkSAEdxLJngP2ywKAh4+lHgAF4xCYA9UdZHAEYJ2Z7DuCu15uls+pB9o5Pzy5u73sWK1YWQAdI57DhCtASCAguhFlg1PQkCB5B9trsrjA2MsrvR3li2ID2AAKJBwABccEAqIRwQBJhPo9NpogBKOAk9hU6ksnBwdmoQABBJS4AAxfq0GAgjGJEli1gSkFqViLYps8kPK5sqlyhXvdk6uiK4Iq1hquCAUyJipSHlhLLy4C0IkUUfQ0XNWMsYtFgDBrFTAABE7K4wtpDL0TJ0bJJsK5LJm9r5Bsletl4sNSpVIDZwfsHAt+rTkulBfl6eNRSzcC4bNO7KucFzlYpNrtfL5jqKZBgJDAYmFgZJwa59MZzPQUZjNLjosLIJTSaNyor2YbectqdLRZ2MoXGeXVZrddXTZbCbb/RgOyrHDP7aQTodgECCfvGYVGSwqABUMyMI9Do50EdwzHa04FtW9z1YS8IGMCC+QvK8YDguAEJgkBkNQoJkJILgkHSLC2zbZxiDAMB0GsIgEEcABxBAUI9JYvUwX0fBgwo4FoRjpFSIo2hJKt6CuGYuHoAAmGY2nQeIIBEYT6FhNoeUIu8H1QQAggmFBd51nPcOBXRt8w3BViyMsslz0g84FrEl60bLVT2UtskFI8iAH4IJwvD4HUs8Ow47swHrAMgxDICI1ZdlJ25GYtKqEsFV0ysczXeLDRM3dyws6srKPOzQPAxzMODdDHOI7RPCgH0inY/pPW9Fj+iCDhoQ4YIkEWJAsHQIpOhK5SoG8ABtRY5j8Px6G6gBdCDiIAVVoF44HkYAnXYWrGPq6w/B2WF2IxLqYX8lAYWkJDHL81Bn21WdtM3RdM30lLTK3XZUslRLs0PGzj3s/yez7YqZpcABhNhUlieJqtQIoMQgTZbTgTAPQEIJKrQEA6GAVIILIfByRiXHlSfM9fPvTsAtEl9B1CsNwvHSKQ2nWLYWe+792S2F1wXdKdMypKvtsizmzA1tlKKm9zrJp9QK7f7rz6wiLo04XZcC+WcfwZF0HQEnCM8/DVYkPl7T8xYIAxy8sfk/hWHoZZGA9YVWZ5u7dNNIIBdXd2NXy0WVKKS7QJdN11qYn1rBJZJ2HoOBDgAPkeNkjbbJWg4+EOGLDljI5SOAY/jxPHlJ1TAGCCNPXQ+UPNvZKO89jhPNTgUTi4DwAQgnLjO6uYiPa/zhu2QAZhbh1AFCCDvK8z6uc+j+vC4AFjPXHwCCbzn3Uh0y9QdvUBHs8AB4AG4E9YaAPkqWFDED9fUE37fd8Iw+E6RgQfVQe0Tall/0cx1JreCV0SAOyKNdO6t0EqZXduSXM7BLRBQcinKWgcQG6jiqzN2ZpoH5jgSLIGcB5pQyKJRGidEq7dzgJ4V+i1lqrTgNKBo8BUhsHiD6FgrAIKp2FsHCeXdw5NTYZLUu493Q8Ozr3WeYgk7sMQe3Th6duEbTIdPOuBdG7J0VogsesiK7CIUbwpRfdC5XCkapQAYQRCNIXosRKi2TNwEQHQA4QTmMnooqx/c4BDzsQ6QAEQROJET3XOBjG4L08agQAkQS+N0aIgJs9G4AFZjEB0fEKLRndIn+JntYuAAA2BJT4roPC4TorO6TlFuIAOy5MusrApciilT1cYXAAHJUx8ZcUnyOKTXaJmSACcLSZE1O0RYqJGS3FXDUURFwrh8CYD8NYGqziWHkFYhxDw3h2KQ1xmERIYR6joDOspE+UAz5xUvhpG+Do74OjMagRxqAfFhKfEKS6a9HznNaU+VuEFH4cU1tEXQg1BQzDNhbSqv8Mb/3tjiaajkflHJOQrNsPzn5ozfnrXC+FLrv39hxKoAD6CchnKA1BGVzKQPzJyeBOKkGDNSZ0pR9w3ETI4bSjp9Tc6MsMcPC57S6lkPJPwhBqkBlBFqcMkpnLG62KFQHTRrK+WWI5TEwe3KzG8vFV0tayq4DBJlQ6Rx6rFkjJQtq+J6jVI+MNX4zVJrMk5PNQHcJVq0k2slWyCpDqnkRPpbXN1cBmmeped69lWrencrecGlxSrMnjMXvgFe0tr631Htc/V3iHThMus8x8ry1L7yPsUU+BLTmrwdOc5NO9U23PTY8rNeSnx5ofgW1gKLX7Yt+eAfGhN5C4vToA1gQA\">online Lean IDE</a>, although there is a weird message: <code>mathlib-demo.lean:8:0 AddConstAsyncResult.commitConst: constant has level params [u_1] but expected []</code></del></p>",
        "id": 515518241,
        "sender_full_name": "Auguste Poiroux",
        "timestamp": 1746110545
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"321854\">Auguste Poiroux</span> <a href=\"#narrow/channel/219941-Machine-Learning-for-Theorem-Proving/topic/DeepSeek-Prover.20V2/near/515518241\">said</a>:</p>\n<blockquote>\n<p><code>algebra_amgm_prod1toneq1_sum1tongeqn.lean</code>? <del>It looks ok in the <a href=\"https://live.lean-lang.org/#codez=JYWwDg9gTgLgBAWQIYwBYBtgCMBQpKxwCCApgM4Rg45kkwD6lMwEAdnCEgB4ASJSsLPxhk4ABmqUS7AELAA5gHkwJKCmiiASv3RwAcijgAVShHQR5ATziaU1APQBaR3ADKqCAHc4aQwDNoOCRWaygdRwA3JHQAVxIAEzg/GNYAY2Y2OAASJCy4TLQSOFYUGLVdVhiQIShRMhjU1B9UQyyAHQDy3WA4NuB2Ns40LCwAbz0AXwAaIPoetvkSAEdxLJngP2ywKAh4+lHgAF4xCYA9UdZHAEYJ2Z7DuCu15uls+pB9o5Pzy5u73sWK1YWQAdI57DhCtASCAguhFlg1PQkCB5B9trsrjA2MsrvR3li2ID2AAKJBwABccEAqIRwQBJhPo9NpogBKOAk9hU6ksnBwdmoQABBJS4AAxfq0GAgjGJEli1gSkFqViLYps8kPK5sqlyhXvdk6uiK4Iq1hquCAUyJipSHlhLLy4C0IkUUfQ0XNWMsYtFgDBrFTAABE7K4wtpDL0TJ0bJJsK5LJm9r5Bsletl4sNSpVIDZwfsHAt+rTkulBfl6eNRSzcC4bNO7KucFzlYpNrtfL5jqKZBgJDAYmFgZJwa59MZzPQUZjNLjosLIJTSaNyor2YbectqdLRZ2MoXGeXVZrddXTZbCbb/RgOyrHDP7aQTodgECCfvGYVGSwqABUMyMI9Do50EdwzHa04FtW9z1YS8IGMCC+QvK8YDguAEJgkBkNQoJkJILgkHSLC2zbZxiDAMB0GsIgEEcABxBAUI9JYvUwX0fBgwo4FoRjpFSIo2hJKt6CuGYuHoAAmGY2nQeIIBEYT6FhNoeUIu8H1QQAggmFBd51nPcOBXRt8w3BViyMsslz0g84FrEl60bLVT2UtskFI8iAH4IJwvD4HUs8Ow47swHrAMgxDICI1ZdlJ25GYtKqEsFV0ysczXeLDRM3dyws6srKPOzQPAxzMODdDHOI7RPCgH0inY/pPW9Fj+iCDhoQ4YIkEWJAsHQIpOhK5SoG8ABtRY5j8Px6G6gBdCDiIAVVoF44HkYAnXYWrGPq6w/B2WF2IxLqYX8lAYWkJDHL81Bn21WdtM3RdM30lLTK3XZUslRLs0PGzj3s/yez7YqZpcABhNhUlieJqtQIoMQgTZbTgTAPQEIJKrQEA6GAVIILIfByRiXHlSfM9fPvTsAtEl9B1CsNwvHSKQ2nWLYWe+792S2F1wXdKdMypKvtsizmzA1tlKKm9zrJp9QK7f7rz6wiLo04XZcC+WcfwZF0HQEnCM8/DVYkPl7T8xYIAxy8sfk/hWHoZZGA9YVWZ5u7dNNIIBdXd2NXy0WVKKS7QJdN11qYn1rBJZJ2HoOBDgAPkeNkjbbJWg4+EOGLDljI5SOAY/jxPHlJ1TAGCCNPXQ+UPNvZKO89jhPNTgUTi4DwAQgnLjO6uYiPa/zhu2QAZhbh1AFCCDvK8z6uc+j+vC4AFjPXHwCCbzn3Uh0y9QdvUBHs8AB4AG4E9YaAPkqWFDED9fUE37fd8Iw+E6RgQfVQe0Tall/0cx1JreCV0SAOyKNdO6t0EqZXduSXM7BLRBQcinKWgcQG6jiqzN2ZpoH5jgSLIGcB5pQyKJRGidEq7dzgJ4V+i1lqrTgNKBo8BUhsHiD6FgrAIKp2FsHCeXdw5NTYZLUu493Q8Ozr3WeYgk7sMQe3Th6duEbTIdPOuBdG7J0VogsesiK7CIUbwpRfdC5XCkapQAYQRCNIXosRKi2TNwEQHQA4QTmMnooqx/c4BDzsQ6QAEQROJET3XOBjG4L08agQAkQS+N0aIgJs9G4AFZjEB0fEKLRndIn+JntYuAAA2BJT4roPC4TorO6TlFuIAOy5MusrApciilT1cYXAAHJUx8ZcUnyOKTXaJmSACcLSZE1O0RYqJGS3FXDUURFwrh8CYD8NYGqziWHkFYhxDw3h2KQ1xmERIYR6joDOspE+UAz5xUvhpG+Do74OjMagRxqAfFhKfEKS6a9HznNaU+VuEFH4cU1tEXQg1BQzDNhbSqv8Mb/3tjiaajkflHJOQrNsPzn5ozfnrXC+FLrv39hxKoAD6CchnKA1BGVzKQPzJyeBOKkGDNSZ0pR9w3ETI4bSjp9Tc6MsMcPC57S6lkPJPwhBqkBlBFqcMkpnLG62KFQHTRrK+WWI5TEwe3KzG8vFV0tayq4DBJlQ6Rx6rFkjJQtq+J6jVI+MNX4zVJrMk5PNQHcJVq0k2slWyCpDqnkRPpbXN1cBmmeped69lWrencrecGlxSrMnjMXvgFe0tr631Htc/V3iHThMus8x8ry1L7yPsUU+BLTmrwdOc5NO9U23PTY8rNeSnx5ofgW1gKLX7Yt+eAfGhN5C4vToA1gQA\">online Lean IDE</a>, although there is a weird message: <code>mathlib-demo.lean:8:0 AddConstAsyncResult.commitConst: constant has level params [u_1] but expected []</code></del></p>\n</blockquote>\n<p>One of the messages is <code>declaration uses 'sorry'</code></p>",
        "id": 515518913,
        "sender_full_name": "Simon Sorg",
        "timestamp": 1746110742
    },
    {
        "content": "<p>Yes indeed, I read <code>apply?</code> as <code>exact?</code> in my head. Sorry for the confusion</p>",
        "id": 515519052,
        "sender_full_name": "Auguste Poiroux",
        "timestamp": 1746110775
    },
    {
        "content": "<p>Well, then it seems that the REPL is not reporting this <code>declaration uses 'sorry'</code> message. This might be the real issue here. Thanks for reporting this <span class=\"user-mention\" data-user-id=\"556875\">@Pietro Monticone</span>.</p>",
        "id": 515520257,
        "sender_full_name": "Auguste Poiroux",
        "timestamp": 1746111160
    },
    {
        "content": "<p><a href=\"https://huggingface.co/playground\">https://huggingface.co/playground</a><br>\n<a href=\"https://openrouter.ai/chat\">https://openrouter.ai/chat</a></p>\n<p>I found this model (deepseek-ai/DeepSeek-Prover-V2-671B) on Hugging Face Playground and OpenRouter! Hugging Face Playground should support free use of this model online. It seems like unlike previous Lean models, the API providers decided to add support for this one.</p>",
        "id": 515525332,
        "sender_full_name": "Deming Xu",
        "timestamp": 1746112679
    },
    {
        "content": "<p>I ran these tests:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib.Tactic</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib.Data.Real.Basic</span>\n\n\n<span class=\"sd\">/--</span>\n<span class=\"sd\">Formalize and prove this in Lean:</span>\n\n<span class=\"sd\">\"A implies B\", if and only if \"either not A or B\"</span>\n<span class=\"sd\">-/</span>\n<span class=\"kd\">theorem</span><span class=\"w\"> </span><span class=\"n\">imp_iff_not_or'</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">↔</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">¬</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">∨</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span>\n<span class=\"w\">  </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">Iff.intro</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"c1\">-- Prove the forward direction: (A → B) → (¬ A ∨ B)</span>\n<span class=\"w\">    </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">h</span>\n<span class=\"w\">    </span><span class=\"n\">by_cases</span><span class=\"w\"> </span><span class=\"n\">hA</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">A</span>\n<span class=\"w\">    </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"c1\">-- Case: A is true</span>\n<span class=\"w\">      </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">hB</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"n\">hA</span>\n<span class=\"w\">      </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">Or.inr</span><span class=\"w\"> </span><span class=\"n\">hB</span>\n<span class=\"w\">    </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"c1\">-- Case: A is false</span>\n<span class=\"w\">      </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">Or.inl</span><span class=\"w\"> </span><span class=\"n\">hA</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"c1\">-- Prove the backward direction: (¬ A ∨ B) → (A → B)</span>\n<span class=\"w\">    </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">h</span>\n<span class=\"w\">    </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">hA</span>\n<span class=\"w\">    </span><span class=\"n\">cases</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"k\">with</span>\n<span class=\"w\">    </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">inl</span><span class=\"w\"> </span><span class=\"n\">hnA</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">      </span><span class=\"c1\">-- Case: ¬ A is true</span>\n<span class=\"w\">      </span><span class=\"n\">exfalso</span>\n<span class=\"w\">      </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">hnA</span><span class=\"w\"> </span><span class=\"n\">hA</span>\n<span class=\"w\">    </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">inr</span><span class=\"w\"> </span><span class=\"n\">hB</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">      </span><span class=\"c1\">-- Case: B is true</span>\n<span class=\"w\">      </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">hB</span>\n\n<span class=\"sd\">/--</span>\n<span class=\"sd\">Formalize and prove this in Lean:</span>\n\n<span class=\"sd\">For a real number x != 0, abs(x + 1/x) &gt;= 2</span>\n<span class=\"sd\">-/</span>\n<span class=\"kd\">theorem</span><span class=\"w\"> </span><span class=\"n\">abs_x_plus_inv_x_ge_two</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hx</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">≥</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h₁</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">≥</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h₂</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">≥</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span><span class=\"w\"> </span><span class=\"n\">nlinarith</span>\n<span class=\"w\">    </span><span class=\"k\">calc</span>\n<span class=\"w\">      </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span>\n<span class=\"w\">        </span><span class=\"c1\">-- Prove that (x + 1/x)^2 = (x - 1/x)^2 + 4</span>\n<span class=\"w\">        </span><span class=\"n\">field_simp</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">hx</span><span class=\"o\">]</span>\n<span class=\"w\">        </span><span class=\"n\">ring</span>\n<span class=\"w\">        </span><span class=\"bp\">&lt;;&gt;</span>\n<span class=\"w\">        </span><span class=\"n\">nlinarith</span>\n<span class=\"w\">      </span><span class=\"n\">_</span><span class=\"w\"> </span><span class=\"bp\">≥</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span><span class=\"w\"> </span><span class=\"n\">nlinarith</span>\n<span class=\"w\">      </span><span class=\"n\">_</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span><span class=\"w\"> </span><span class=\"n\">norm_num</span>\n<span class=\"w\">  </span><span class=\"c1\">-- Now we know (x + 1/x)^2 ≥ 4, so |x + 1/x| ≥ 2</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h₂</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">≥</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span>\n<span class=\"w\">    </span><span class=\"c1\">-- Use the fact that if y^2 ≥ 4, then |y| ≥ 2</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h₃</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">≥</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">h₁</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h₄</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">≥</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span>\n<span class=\"w\">      </span><span class=\"c1\">-- Use the property of squares and absolute values</span>\n<span class=\"w\">      </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h₅</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span>\n<span class=\"w\">        </span><span class=\"n\">by_contra</span><span class=\"w\"> </span><span class=\"n\">h₅</span>\n<span class=\"w\">        </span><span class=\"c1\">-- If |x + 1/x| &lt; 2, then (x + 1/x)^2 &lt; 4</span>\n<span class=\"w\">        </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h₆</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span><span class=\"w\"> </span><span class=\"n\">linarith</span>\n<span class=\"w\">        </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h₇</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span>\n<span class=\"w\">          </span><span class=\"k\">calc</span>\n<span class=\"w\">            </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span>\n<span class=\"w\">              </span><span class=\"c1\">-- Since (x + 1/x)^2 = |x + 1/x|^2</span>\n<span class=\"w\">              </span><span class=\"n\">nlinarith</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">abs_mul_abs_self</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)]</span>\n<span class=\"w\">            </span><span class=\"n\">_</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span>\n<span class=\"w\">              </span><span class=\"n\">gcongr</span><span class=\"w\"> </span><span class=\"bp\">&lt;;&gt;</span><span class=\"w\"> </span><span class=\"n\">nlinarith</span>\n<span class=\"w\">            </span><span class=\"n\">_</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span><span class=\"w\"> </span><span class=\"n\">norm_num</span>\n<span class=\"w\">        </span><span class=\"n\">linarith</span>\n<span class=\"w\">      </span><span class=\"n\">linarith</span>\n<span class=\"w\">    </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">h₄</span>\n<span class=\"w\">  </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">h₂</span>\n\n\n<span class=\"sd\">/--</span>\n<span class=\"sd\">Formalize and prove this in Lean:</span>\n\n<span class=\"sd\">For a real number b, if there is not x such that</span>\n<span class=\"sd\">x^2 + b * x + 1 = 0</span>\n<span class=\"sd\">then abs(b) &lt; 2</span>\n<span class=\"sd\">-/</span>\n<span class=\"kd\">theorem</span><span class=\"w\"> </span><span class=\"n\">no_real_root_implies_abs_lt_two</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">¬</span><span class=\"w\"> </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">abs</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span>\n<span class=\"w\">  </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">h</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h₁</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span>\n<span class=\"w\">    </span><span class=\"n\">by_contra</span><span class=\"w\"> </span><span class=\"n\">h₂</span>\n<span class=\"w\">    </span><span class=\"c1\">-- If b² - 4 ≥ 0, then the quadratic has a real root, contradicting h.</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h₃</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"bp\">≥</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span><span class=\"w\"> </span><span class=\"n\">linarith</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h₄</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span>\n<span class=\"w\">      </span><span class=\"c1\">-- Use the quadratic formula to find a root.</span>\n<span class=\"w\">      </span><span class=\"n\">use</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">-</span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Real.sqrt</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">b</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"mi\">2</span>\n<span class=\"w\">      </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h₅</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"bp\">≥</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span><span class=\"w\"> </span><span class=\"n\">linarith</span>\n<span class=\"w\">      </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h₆</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Real.sqrt</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">b</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">≥</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Real.sqrt_nonneg</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">b</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"o\">)</span>\n<span class=\"w\">      </span><span class=\"n\">nlinarith</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Real.sq_sqrt</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"kd\">by</span><span class=\"w\"> </span><span class=\"n\">linarith</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">sq_nonneg</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Real.sqrt</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">b</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"o\">))]</span>\n<span class=\"w\">    </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"n\">h₄</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h₂</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">abs</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span>\n<span class=\"w\">    </span><span class=\"c1\">-- Prove that |b| &lt; 2 using h₁.</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h₃</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span><span class=\"w\"> </span><span class=\"n\">linarith</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h₄</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">abs</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span>\n<span class=\"w\">      </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">abs_lt</span><span class=\"o\">]</span>\n<span class=\"w\">      </span><span class=\"n\">constructor</span><span class=\"w\"> </span><span class=\"bp\">&lt;;&gt;</span><span class=\"w\"> </span><span class=\"n\">nlinarith</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">sq_nonneg</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">sq_nonneg</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">sq_nonneg</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">)]</span>\n<span class=\"w\">    </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">h₄</span>\n<span class=\"w\">  </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">h₂</span>\n\n<span class=\"sd\">/--</span>\n<span class=\"sd\">Formalize and prove this in Lean:</span>\n\n<span class=\"sd\">For a real number x, if x^3 = 8, then x = 2.</span>\n<span class=\"sd\">-/</span>\n<span class=\"kd\">theorem</span><span class=\"w\"> </span><span class=\"n\">cube_root_of_eight</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"bp\">^</span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">8</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h₁</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h₂</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"bp\">^</span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">8</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span><span class=\"w\"> </span><span class=\"n\">linarith</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h₃</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"bp\">^</span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">8</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span><span class=\"w\"> </span><span class=\"n\">ring</span>\n<span class=\"w\">    </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">h₃</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">at</span><span class=\"w\"> </span><span class=\"n\">h₂</span>\n<span class=\"w\">    </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">h₂</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h₂</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">∨</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span>\n<span class=\"w\">    </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">eq_zero_or_eq_zero_of_mul_eq_zero</span><span class=\"w\"> </span><span class=\"n\">h₁</span>\n<span class=\"w\">  </span><span class=\"n\">cases</span><span class=\"w\"> </span><span class=\"n\">h₂</span><span class=\"w\"> </span><span class=\"k\">with</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">inl</span><span class=\"w\"> </span><span class=\"n\">h₂</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h₃</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span><span class=\"w\"> </span><span class=\"n\">linarith</span>\n<span class=\"w\">    </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">h₃</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">inr</span><span class=\"w\"> </span><span class=\"n\">h₂</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h₃</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">h₂</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h₄</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span><span class=\"w\"> </span><span class=\"n\">nlinarith</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h₅</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">False</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span><span class=\"w\"> </span><span class=\"n\">nlinarith</span>\n<span class=\"w\">    </span><span class=\"n\">exfalso</span>\n<span class=\"w\">    </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">h₅</span>\n</code></pre></div>",
        "id": 515533196,
        "sender_full_name": "Deming Xu",
        "timestamp": 1746115127
    },
    {
        "content": "<p><a href=\"/user_uploads/3121/W-eqn43WHEFIgjkwyKabFQLQ/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/W-eqn43WHEFIgjkwyKabFQLQ/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"2704x1338\" src=\"/user_uploads/thumbnail/3121/W-eqn43WHEFIgjkwyKabFQLQ/image.png/840x560.webp\"></a></div>",
        "id": 515534060,
        "sender_full_name": "Deming Xu",
        "timestamp": 1746115366
    },
    {
        "content": "<p>Besides fixing REPL issues of not reporting the sorry, in my opinion the Lean side should also be changed: apply? shouldn't close a goal with sorry if no suggestions close the goal. (This was <a href=\"#narrow/channel/113488-general/topic/.E2.9C.94.20How.20can.20I.20see.20which.20tactic.20was.20chosen.20by.20.60apply.3F.60/near/499346735\">discussed</a>.)</p>",
        "id": 515541693,
        "sender_full_name": "Thomas Zhu",
        "timestamp": 1746118172
    },
    {
        "content": "<p>I don't think we should make Lean less nice to use for humans for the sake of agents. There could be an opt-in option for agents though.</p>",
        "id": 515544141,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1746119129
    },
    {
        "content": "<p>I think there is some misunderstanding: I am suggesting that making apply? not admit the goal when no suggestions close the goal is beneficial both for human users and for LLMs. At least this is the impression I got from this thread and my linked thread.</p>",
        "id": 515547359,
        "sender_full_name": "Thomas Zhu",
        "timestamp": 1746120338
    },
    {
        "content": "<p>Why is having tactics use sorry a problem?</p>",
        "id": 515553482,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1746122544
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"321854\">Auguste Poiroux</span> <a href=\"#narrow/channel/219941-Machine-Learning-for-Theorem-Proving/topic/DeepSeek-Prover.20V2/near/515520257\">said</a>:</p>\n<blockquote>\n<p>Well, then it seems that the REPL is not reporting this <code>declaration uses 'sorry'</code> message. This might be the real issue here. Thanks for reporting this <span class=\"user-mention silent\" data-user-id=\"556875\">Pietro Monticone</span>.</p>\n</blockquote>\n<p>Coming back to this, it seems that it's not a REPL issue. In Lean v4.9.0, when <code>apply?</code> is used in a proof we don't get a sorry message. Do any of you know when it was introduced? Additionally, are there other tactics that should be reported as sorry? I will update LeanInteract to check for these tactics when looking for sorries.</p>",
        "id": 515556554,
        "sender_full_name": "Auguste Poiroux",
        "timestamp": 1746123703
    },
    {
        "content": "<p>I don't think this is a trustworthy way to determine if a proof is sorry-free (but this is a user-interface bug)</p>",
        "id": 515556711,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1746123755
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/channel/219941-Machine-Learning-for-Theorem-Proving/topic/DeepSeek-Prover.20V2/near/515553482\">said</a>:</p>\n<blockquote>\n<p>Why is having tactics use sorry a problem?</p>\n</blockquote>\n<p>For one, it is frustrating to debug.  Where did the sorry come from?  It isn't like Lean will tell you which tactic was the cause of the sorry.  For a novice user, they may not even suspect the <code>?</code> tactics.  The above thread is an example of someone getting confused why <code>apply?</code> closes the goal.  Conversely, how does it help for a typical tactic?  (Obviously not <code>sorry</code> or a well-known synonym, although I would also love for <code>sorry</code> synonyms to be made more sorry-like in appearance, as well as tactics which introduce sorries, no?). But I'm not a Lean power-user.  Is there an advantage to using sorry in this case or similar tactics?</p>",
        "id": 515556876,
        "sender_full_name": "Jason Rute",
        "timestamp": 1746123825
    },
    {
        "content": "<p>I think the argument for using <code>sorry</code> is to avoid:</p>\n<ul>\n<li>the user seeing an annoying \"unsolved goals\" error on a goal they are actively working on</li>\n<li>a warning that the <code>apply?</code> tactic does nothing</li>\n</ul>",
        "id": 515557220,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1746123966
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/stream/219941-Machine-Learning-for-Theorem-Proving/topic/DeepSeek-Prover.20V2/near/515556711\">said</a>:</p>\n<blockquote>\n<p>I don't think this is a trustworthy way to determine if a proof is sorry-free (but this is a user-interface bug)</p>\n</blockquote>\n<p>This I absolutely agree. Would you say a more future proof way is to check the set of axioms used is a subset of the standard three?</p>",
        "id": 515558308,
        "sender_full_name": "Thomas Zhu",
        "timestamp": 1746124362
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/channel/219941-Machine-Learning-for-Theorem-Proving/topic/DeepSeek-Prover.20V2/near/515556711\">said</a>:</p>\n<blockquote>\n<p>I don't think this is a trustworthy way to determine if a proof is sorry-free</p>\n</blockquote>\n<p>Well, yes, you are right, I agree with you. A better way would be to enhance the REPL command mode to do an explicit check then. It would probably reuse the <a href=\"https://github.com/leanprover-community/repl/blob/82f6657e6cddc9e9e0d070d5352604488a76497d/REPL/Main.lean#L182-L230\"><code>getProofStatus</code></a> method introduced to check proofs in tactic mode. What do you think? I might try to implement that in the coming weeks.</p>",
        "id": 515558336,
        "sender_full_name": "Auguste Poiroux",
        "timestamp": 1746124377
    },
    {
        "content": "<p>The two PutnamBench problems in Appendix B would not compile even without the <code>apply?</code> issue, right?</p>",
        "id": 515559038,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1746124613
    },
    {
        "content": "<p>In particular, as far as I can tell, </p>\n<ul>\n<li><code>putnam_2005_a4</code> would not compile even if you replaced <code>apply?</code> with <code>sorry</code>. The whole <code>calc</code> block is invalid.</li>\n<li><code>putnam_2007_b4</code> doesn’t compile because of an error in the <code>rw</code> preceding the <code>apply?</code>. Do you happen to know why it wasn’t detected?</li>\n</ul>",
        "id": 515559786,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1746124895
    },
    {
        "content": "<p>Pantograph can check whether there's a sorry immediately after a tactic finishes, so there is that</p>",
        "id": 515562256,
        "sender_full_name": "Leni Aniva",
        "timestamp": 1746125854
    },
    {
        "content": "<p>Can you use pantograph to check proofs like these?</p>",
        "id": 515562380,
        "sender_full_name": "Jason Rute",
        "timestamp": 1746125897
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"115715\">Jason Rute</span> <a href=\"#narrow/channel/219941-Machine-Learning-for-Theorem-Proving/topic/DeepSeek-Prover.20V2/near/515562380\">said</a>:</p>\n<blockquote>\n<p>Can you use pantograph to check proofs like these?</p>\n</blockquote>\n<p>e.g.?</p>\n<p>We need to parse these text proofs into a proof tree if you want to do something like that</p>",
        "id": 515562444,
        "sender_full_name": "Leni Aniva",
        "timestamp": 1746125925
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"556875\">Pietro Monticone</span> <a href=\"#narrow/channel/219941-Machine-Learning-for-Theorem-Proving/topic/DeepSeek-Prover.20V2/near/515559786\">said</a>:</p>\n<blockquote>\n<p>In particular, as far as I can tell, </p>\n<ul>\n<li><code>putnam_2005_a4</code> would not compile even if you replaced <code>apply?</code> with <code>sorry</code>. The whole <code>calc</code> block is invalid.</li>\n<li><code>putnam_2007_b4</code> doesn’t compile because of an error in the <code>rw</code> preceding the <code>apply?</code>. Do you happen to know why it wasn’t detected?</li>\n</ul>\n</blockquote>\n<p>I don't know what's happening with these PutnamBench proofs, I cannot manage to get them to compile, neither in VSCode or using the REPL...</p>",
        "id": 515562512,
        "sender_full_name": "Auguste Poiroux",
        "timestamp": 1746125951
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"599027\">@Leni Aniva</span>  Any of the proofs in: <a href=\"https://github.com/deepseek-ai/DeepSeek-Prover-V2/blob/main/minif2f-solutions.zip\">https://github.com/deepseek-ai/DeepSeek-Prover-V2/blob/main/minif2f-solutions.zip</a></p>",
        "id": 515562557,
        "sender_full_name": "Jason Rute",
        "timestamp": 1746125969
    },
    {
        "content": "<p>Surely we should just be checking these proofs with <code>leanchecker</code> + an axioms check?</p>",
        "id": 515562718,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1746126017
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"115715\">Jason Rute</span> <a href=\"#narrow/channel/219941-Machine-Learning-for-Theorem-Proving/topic/DeepSeek-Prover.20V2/near/515562557\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"599027\">Leni Aniva</span>  Any of the proofs in: <a href=\"https://github.com/deepseek-ai/DeepSeek-Prover-V2/blob/main/minif2f-solutions.zip\">https://github.com/deepseek-ai/DeepSeek-Prover-V2/blob/main/minif2f-solutions.zip</a></p>\n</blockquote>\n<p>probably not, if you want the precise location of the tactics producing <code>sorry</code>s</p>",
        "id": 515562720,
        "sender_full_name": "Leni Aniva",
        "timestamp": 1746126018
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"599027\">Leni Aniva</span> <a href=\"#narrow/channel/219941-Machine-Learning-for-Theorem-Proving/topic/DeepSeek-Prover.20V2/near/515562256\">said</a>:</p>\n<blockquote>\n<p>Pantograph can check whether there's a sorry immediately after a tactic finishes, so there is that</p>\n</blockquote>\n<p>Does it detect</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">foo</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">rec</span><span class=\"w\"> </span><span class=\"n\">bar</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">apply?</span>\n<span class=\"w\">  </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">bar</span>\n</code></pre></div>",
        "id": 515562753,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1746126033
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/channel/219941-Machine-Learning-for-Theorem-Proving/topic/DeepSeek-Prover.20V2/near/515562753\">said</a>:</p>\n<blockquote>\n<p>Pantogr</p>\n<p><span class=\"user-mention silent\" data-user-id=\"599027\">Leni Aniva</span> <a href=\"#narrow/channel/219941-Machine-Learning-for-Theorem-Proving/topic/DeepSeek-Prover.20V2/near/515562256\">said</a>:</p>\n<blockquote>\n<p>Pantograph can check whether there's a sorry immediately after a tactic finishes, so there is that</p>\n</blockquote>\n<p>Does it detect</p>\n<p><div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">foo</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">rec</span><span class=\"w\"> </span><span class=\"n\">bar</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">apply?</span>\n<span class=\"w\">  </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">bar</span>\n</code></pre></div><br>\n</p>\n</blockquote>\n<p>Yes, but you would have to run it with <code>goal_tactic</code> (what an agent would call when searching for the proof)</p>\n<div class=\"codehilite\" data-code-language=\"Python\"><pre><span></span><code><span class=\"kn\">from</span><span class=\"w\"> </span><span class=\"nn\">pantograph.server</span><span class=\"w\"> </span><span class=\"kn\">import</span> <span class=\"n\">Server</span>\n<span class=\"kn\">from</span><span class=\"w\"> </span><span class=\"nn\">pantograph.expr</span><span class=\"w\"> </span><span class=\"kn\">import</span> <span class=\"n\">TacticHave</span>\n\n<span class=\"k\">if</span> <span class=\"vm\">__name__</span> <span class=\"o\">==</span> <span class=\"s1\">'__main__'</span><span class=\"p\">:</span>\n    <span class=\"n\">server</span> <span class=\"o\">=</span> <span class=\"n\">Server</span><span class=\"p\">(</span><span class=\"n\">imports</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"s1\">'Init'</span><span class=\"p\">])</span>\n    <span class=\"n\">state0</span> <span class=\"o\">=</span> <span class=\"n\">server</span><span class=\"o\">.</span><span class=\"n\">goal_start</span><span class=\"p\">(</span><span class=\"s2\">\"1 = 0\"</span><span class=\"p\">)</span>\n    <span class=\"n\">state1</span> <span class=\"o\">=</span> <span class=\"n\">server</span><span class=\"o\">.</span><span class=\"n\">goal_tactic</span><span class=\"p\">(</span><span class=\"n\">state0</span><span class=\"p\">,</span> <span class=\"n\">goal_id</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"n\">tactic</span><span class=\"o\">=</span><span class=\"n\">TacticHave</span><span class=\"p\">(</span><span class=\"s2\">\"1 = 0\"</span><span class=\"p\">))</span>\n    <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">state1</span><span class=\"p\">)</span>\n    <span class=\"n\">state1b</span> <span class=\"o\">=</span> <span class=\"n\">server</span><span class=\"o\">.</span><span class=\"n\">goal_tactic</span><span class=\"p\">(</span><span class=\"n\">state1</span><span class=\"p\">,</span> <span class=\"n\">goal_id</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"n\">tactic</span><span class=\"o\">=</span><span class=\"s2\">\"apply?\"</span><span class=\"p\">)</span>\n    <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">state1b</span><span class=\"p\">)</span>\n</code></pre></div>\n<p>This fails on line -2.</p>",
        "id": 515562780,
        "sender_full_name": "Leni Aniva",
        "timestamp": 1746126044
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/channel/219941-Machine-Learning-for-Theorem-Proving/topic/DeepSeek-Prover.20V2/near/515562718\">said</a>:</p>\n<blockquote>\n<p>Surely we should just be checking these proofs with <code>leanchecker</code> + an axioms check?</p>\n</blockquote>\n<p>Someone needs to write a document for AI researchers telling them about common pitfalls, axioms, checking proofs, errors in benchmarks, and other things which would embarrass them if they don't handle correctly.</p>",
        "id": 515563136,
        "sender_full_name": "Jason Rute",
        "timestamp": 1746126168
    },
    {
        "content": "<p>(Also because it wastes everyone's time.)</p>",
        "id": 515563481,
        "sender_full_name": "Jason Rute",
        "timestamp": 1746126301
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/channel/219941-Machine-Learning-for-Theorem-Proving/topic/DeepSeek-Prover.20V2/near/515562753\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"599027\">Leni Aniva</span> <a href=\"#narrow/channel/219941-Machine-Learning-for-Theorem-Proving/topic/DeepSeek-Prover.20V2/near/515562256\">said</a>:</p>\n<blockquote>\n<p>Pantograph can check whether there's a sorry immediately after a tactic finishes, so there is that</p>\n</blockquote>\n<p>Does it detect</p>\n<p><div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">foo</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">rec</span><span class=\"w\"> </span><span class=\"n\">bar</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">apply?</span>\n<span class=\"w\">  </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">bar</span>\n</code></pre></div><br>\n</p>\n</blockquote>\n<p>If we switch to tactic mode, the REPL detect this issue. The output is a bit long, but you get <code>proof_status='Incomplete: contains metavariable(s)'</code>.</p>\n<div class=\"spoiler-block\"><div class=\"spoiler-header\">\n<p>Code</p>\n</div><div class=\"spoiler-content\" aria-hidden=\"true\">\n<div class=\"codehilite\" data-code-language=\"Python\"><pre><span></span><code><span class=\"kn\">from</span><span class=\"w\"> </span><span class=\"nn\">lean_interact</span><span class=\"w\"> </span><span class=\"kn\">import</span> <span class=\"n\">AutoLeanServer</span><span class=\"p\">,</span> <span class=\"n\">Command</span><span class=\"p\">,</span> <span class=\"n\">LeanREPLConfig</span><span class=\"p\">,</span> <span class=\"n\">ProofStep</span>\n\n<span class=\"n\">conf</span> <span class=\"o\">=</span> <span class=\"n\">LeanREPLConfig</span><span class=\"p\">(</span><span class=\"n\">lean_version</span><span class=\"o\">=</span><span class=\"s2\">\"v4.9.0\"</span><span class=\"p\">)</span>\n<span class=\"n\">server</span> <span class=\"o\">=</span> <span class=\"n\">AutoLeanServer</span><span class=\"p\">(</span><span class=\"n\">conf</span><span class=\"p\">)</span>\n\n<span class=\"n\">server</span><span class=\"o\">.</span><span class=\"n\">run</span><span class=\"p\">(</span><span class=\"n\">Command</span><span class=\"p\">(</span><span class=\"n\">cmd</span><span class=\"o\">=</span><span class=\"s2\">\"theorem foo : 1 = 0 := by sorry\"</span><span class=\"p\">))</span>\n<span class=\"n\">response</span> <span class=\"o\">=</span> <span class=\"n\">server</span><span class=\"o\">.</span><span class=\"n\">run</span><span class=\"p\">(</span>\n    <span class=\"n\">ProofStep</span><span class=\"p\">(</span>\n        <span class=\"n\">tactic</span><span class=\"o\">=</span><span class=\"s2\">\"(</span><span class=\"se\">\\n</span><span class=\"s2\">  let rec bar : 1 = 0 := by apply?</span><span class=\"se\">\\n</span><span class=\"s2\">  exact bar)\"</span><span class=\"p\">,</span>\n        <span class=\"n\">proof_state</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">,</span>\n    <span class=\"p\">)</span>\n<span class=\"p\">)</span>\n<span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">response</span><span class=\"p\">)</span>\n</code></pre></div>\n</div></div>\n<div class=\"spoiler-block\"><div class=\"spoiler-header\">\n<p>Output</p>\n</div><div class=\"spoiler-content\" aria-hidden=\"true\">\n<div class=\"codehilite\" data-code-language=\"Python\"><pre><span></span><code><span class=\"n\">ProofStepResponse</span><span class=\"p\">(</span><span class=\"n\">proof_status</span><span class=\"o\">=</span><span class=\"s1\">'Incomplete: contains metavariable(s)'</span><span class=\"p\">,</span> <span class=\"n\">messages</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"n\">Message</span><span class=\"p\">(</span><span class=\"n\">data</span><span class=\"o\">=</span><span class=\"s1\">'Try this: refine Nat.eq_zero_of_add_eq_zero_left ?h'</span><span class=\"p\">,</span> <span class=\"n\">severity</span><span class=\"o\">=</span><span class=\"s1\">'info'</span><span class=\"p\">,</span> <span class=\"n\">start_pos</span><span class=\"o\">=</span><span class=\"n\">Pos</span><span class=\"p\">(</span><span class=\"n\">line</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"n\">column</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">),</span> <span class=\"n\">end_pos</span><span class=\"o\">=</span><span class=\"n\">Pos</span><span class=\"p\">(</span><span class=\"n\">line</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"n\">column</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">)),</span> <span class=\"n\">Message</span><span class=\"p\">(</span><span class=\"n\">data</span><span class=\"o\">=</span><span class=\"s1\">'Try this: refine Nat.eq_zero_of_le_zero ?h'</span><span class=\"p\">,</span> <span class=\"n\">severity</span><span class=\"o\">=</span><span class=\"s1\">'info'</span><span class=\"p\">,</span> <span class=\"n\">start_pos</span><span class=\"o\">=</span><span class=\"n\">Pos</span><span class=\"p\">(</span><span class=\"n\">line</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"n\">column</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">),</span> <span class=\"n\">end_pos</span><span class=\"o\">=</span><span class=\"n\">Pos</span><span class=\"p\">(</span><span class=\"n\">line</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"n\">column</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">)),</span> <span class=\"n\">Message</span><span class=\"p\">(</span><span class=\"n\">data</span><span class=\"o\">=</span><span class=\"s1\">'Try this: refine Nat.le_zero.mp ?a✝'</span><span class=\"p\">,</span> <span class=\"n\">severity</span><span class=\"o\">=</span><span class=\"s1\">'info'</span><span class=\"p\">,</span> <span class=\"n\">start_pos</span><span class=\"o\">=</span><span class=\"n\">Pos</span><span class=\"p\">(</span><span class=\"n\">line</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"n\">column</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">),</span> <span class=\"n\">end_pos</span><span class=\"o\">=</span><span class=\"n\">Pos</span><span class=\"p\">(</span><span class=\"n\">line</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"n\">column</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">)),</span> <span class=\"n\">Message</span><span class=\"p\">(</span><span class=\"n\">data</span><span class=\"o\">=</span><span class=\"s1\">'Try this: refine Nat.eq_zero_of_not_pos ?h'</span><span class=\"p\">,</span> <span class=\"n\">severity</span><span class=\"o\">=</span><span class=\"s1\">'info'</span><span class=\"p\">,</span> <span class=\"n\">start_pos</span><span class=\"o\">=</span><span class=\"n\">Pos</span><span class=\"p\">(</span><span class=\"n\">line</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"n\">column</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">),</span> <span class=\"n\">end_pos</span><span class=\"o\">=</span><span class=\"n\">Pos</span><span class=\"p\">(</span><span class=\"n\">line</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"n\">column</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">)),</span> <span class=\"n\">Message</span><span class=\"p\">(</span><span class=\"n\">data</span><span class=\"o\">=</span><span class=\"s1\">'Try this: refine Int.ofNat_eq_zero.mp ?a✝'</span><span class=\"p\">,</span> <span class=\"n\">severity</span><span class=\"o\">=</span><span class=\"s1\">'info'</span><span class=\"p\">,</span> <span class=\"n\">start_pos</span><span class=\"o\">=</span><span class=\"n\">Pos</span><span class=\"p\">(</span><span class=\"n\">line</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"n\">column</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">),</span> <span class=\"n\">end_pos</span><span class=\"o\">=</span><span class=\"n\">Pos</span><span class=\"p\">(</span><span class=\"n\">line</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"n\">column</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">)),</span> <span class=\"n\">Message</span><span class=\"p\">(</span><span class=\"n\">data</span><span class=\"o\">=</span><span class=\"s1\">'Try this: refine Nat.eq_zero_of_zero_dvd ?h'</span><span class=\"p\">,</span> <span class=\"n\">severity</span><span class=\"o\">=</span><span class=\"s1\">'info'</span><span class=\"p\">,</span> <span class=\"n\">start_pos</span><span class=\"o\">=</span><span class=\"n\">Pos</span><span class=\"p\">(</span><span class=\"n\">line</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"n\">column</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">),</span> <span class=\"n\">end_pos</span><span class=\"o\">=</span><span class=\"n\">Pos</span><span class=\"p\">(</span><span class=\"n\">line</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"n\">column</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">)),</span> <span class=\"n\">Message</span><span class=\"p\">(</span><span class=\"n\">data</span><span class=\"o\">=</span><span class=\"s1\">'Try this: refine Nat.zero_dvd.mp ?a✝'</span><span class=\"p\">,</span> <span class=\"n\">severity</span><span class=\"o\">=</span><span class=\"s1\">'info'</span><span class=\"p\">,</span> <span class=\"n\">start_pos</span><span class=\"o\">=</span><span class=\"n\">Pos</span><span class=\"p\">(</span><span class=\"n\">line</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"n\">column</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">),</span> <span class=\"n\">end_pos</span><span class=\"o\">=</span><span class=\"n\">Pos</span><span class=\"p\">(</span><span class=\"n\">line</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"n\">column</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">)),</span> <span class=\"n\">Message</span><span class=\"p\">(</span><span class=\"n\">data</span><span class=\"o\">=</span><span class=\"s1\">'Try this: refine Nat.eq_zero_of_gcd_eq_zero_left ?H'</span><span class=\"p\">,</span> <span class=\"n\">severity</span><span class=\"o\">=</span><span class=\"s1\">'info'</span><span class=\"p\">,</span> <span class=\"n\">start_pos</span><span class=\"o\">=</span><span class=\"n\">Pos</span><span class=\"p\">(</span><span class=\"n\">line</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"n\">column</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">),</span> <span class=\"n\">end_pos</span><span class=\"o\">=</span><span class=\"n\">Pos</span><span class=\"p\">(</span><span class=\"n\">line</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"n\">column</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">)),</span> <span class=\"n\">Message</span><span class=\"p\">(</span><span class=\"n\">data</span><span class=\"o\">=</span><span class=\"s1\">'Try this: refine Nat.eq_zero_of_gcd_eq_zero_right ?H'</span><span class=\"p\">,</span> <span class=\"n\">severity</span><span class=\"o\">=</span><span class=\"s1\">'info'</span><span class=\"p\">,</span> <span class=\"n\">start_pos</span><span class=\"o\">=</span><span class=\"n\">Pos</span><span class=\"p\">(</span><span class=\"n\">line</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"n\">column</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">),</span> <span class=\"n\">end_pos</span><span class=\"o\">=</span><span class=\"n\">Pos</span><span class=\"p\">(</span><span class=\"n\">line</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"n\">column</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">)),</span> <span class=\"n\">Message</span><span class=\"p\">(</span><span class=\"n\">data</span><span class=\"o\">=</span><span class=\"s1\">'Try this: refine Nat.eq_zero_of_add_eq_zero_right ?h'</span><span class=\"p\">,</span> <span class=\"n\">severity</span><span class=\"o\">=</span><span class=\"s1\">'info'</span><span class=\"p\">,</span> <span class=\"n\">start_pos</span><span class=\"o\">=</span><span class=\"n\">Pos</span><span class=\"p\">(</span><span class=\"n\">line</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"n\">column</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">),</span> <span class=\"n\">end_pos</span><span class=\"o\">=</span><span class=\"n\">Pos</span><span class=\"p\">(</span><span class=\"n\">line</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"n\">column</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">)),</span> <span class=\"n\">Message</span><span class=\"p\">(</span><span class=\"n\">data</span><span class=\"o\">=</span><span class=\"s1\">'Try this: refine Nat.eq_of_beq_eq_true ?a✝'</span><span class=\"p\">,</span> <span class=\"n\">severity</span><span class=\"o\">=</span><span class=\"s1\">'info'</span><span class=\"p\">,</span> <span class=\"n\">start_pos</span><span class=\"o\">=</span><span class=\"n\">Pos</span><span class=\"p\">(</span><span class=\"n\">line</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"n\">column</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">),</span> <span class=\"n\">end_pos</span><span class=\"o\">=</span><span class=\"n\">Pos</span><span class=\"p\">(</span><span class=\"n\">line</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"n\">column</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">)),</span> <span class=\"n\">Message</span><span class=\"p\">(</span><span class=\"n\">data</span><span class=\"o\">=</span><span class=\"s1\">'Try this: refine Nat.le_antisymm ?h₁ ?h₂'</span><span class=\"p\">,</span> <span class=\"n\">severity</span><span class=\"o\">=</span><span class=\"s1\">'info'</span><span class=\"p\">,</span> <span class=\"n\">start_pos</span><span class=\"o\">=</span><span class=\"n\">Pos</span><span class=\"p\">(</span><span class=\"n\">line</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"n\">column</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">),</span> <span class=\"n\">end_pos</span><span class=\"o\">=</span><span class=\"n\">Pos</span><span class=\"p\">(</span><span class=\"n\">line</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"n\">column</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">)),</span> <span class=\"n\">Message</span><span class=\"p\">(</span><span class=\"n\">data</span><span class=\"o\">=</span><span class=\"s1\">'Try this: refine Lean.ofReduceNat 1 0 ?h'</span><span class=\"p\">,</span> <span class=\"n\">severity</span><span class=\"o\">=</span><span class=\"s1\">'info'</span><span class=\"p\">,</span> <span class=\"n\">start_pos</span><span class=\"o\">=</span><span class=\"n\">Pos</span><span class=\"p\">(</span><span class=\"n\">line</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"n\">column</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">),</span> <span class=\"n\">end_pos</span><span class=\"o\">=</span><span class=\"n\">Pos</span><span class=\"p\">(</span><span class=\"n\">line</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"n\">column</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">)),</span> <span class=\"n\">Message</span><span class=\"p\">(</span><span class=\"n\">data</span><span class=\"o\">=</span><span class=\"s2\">\"Try this: refine Nat.succ_inj'.mp ?a✝\"</span><span class=\"p\">,</span> <span class=\"n\">severity</span><span class=\"o\">=</span><span class=\"s1\">'info'</span><span class=\"p\">,</span> <span class=\"n\">start_pos</span><span class=\"o\">=</span><span class=\"n\">Pos</span><span class=\"p\">(</span><span class=\"n\">line</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"n\">column</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">),</span> <span class=\"n\">end_pos</span><span class=\"o\">=</span><span class=\"n\">Pos</span><span class=\"p\">(</span><span class=\"n\">line</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"n\">column</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">)),</span> <span class=\"n\">Message</span><span class=\"p\">(</span><span class=\"n\">data</span><span class=\"o\">=</span><span class=\"s1\">'Try this: refine Nat.add_right_cancel ?h'</span><span class=\"p\">,</span> <span class=\"n\">severity</span><span class=\"o\">=</span><span class=\"s1\">'info'</span><span class=\"p\">,</span> <span class=\"n\">start_pos</span><span class=\"o\">=</span><span class=\"n\">Pos</span><span class=\"p\">(</span><span class=\"n\">line</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"n\">column</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">),</span> <span class=\"n\">end_pos</span><span class=\"o\">=</span><span class=\"n\">Pos</span><span class=\"p\">(</span><span class=\"n\">line</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"n\">column</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">)),</span> <span class=\"n\">Message</span><span class=\"p\">(</span><span class=\"n\">data</span><span class=\"o\">=</span><span class=\"s1\">'Try this: refine Nat.pred_inj ?a✝ ?a✝¹ rfl'</span><span class=\"p\">,</span> <span class=\"n\">severity</span><span class=\"o\">=</span><span class=\"s1\">'info'</span><span class=\"p\">,</span> <span class=\"n\">start_pos</span><span class=\"o\">=</span><span class=\"n\">Pos</span><span class=\"p\">(</span><span class=\"n\">line</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"n\">column</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">),</span> <span class=\"n\">end_pos</span><span class=\"o\">=</span><span class=\"n\">Pos</span><span class=\"p\">(</span><span class=\"n\">line</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"n\">column</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">)),</span> <span class=\"n\">Message</span><span class=\"p\">(</span><span class=\"n\">data</span><span class=\"o\">=</span><span class=\"s1\">'Try this: refine Nat.eq_of_mul_eq_mul_left ?hn ?h'</span><span class=\"p\">,</span> <span class=\"n\">severity</span><span class=\"o\">=</span><span class=\"s1\">'info'</span><span class=\"p\">,</span> <span class=\"n\">start_pos</span><span class=\"o\">=</span><span class=\"n\">Pos</span><span class=\"p\">(</span><span class=\"n\">line</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"n\">column</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">),</span> <span class=\"n\">end_pos</span><span class=\"o\">=</span><span class=\"n\">Pos</span><span class=\"p\">(</span><span class=\"n\">line</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"n\">column</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">)),</span> <span class=\"n\">Message</span><span class=\"p\">(</span><span class=\"n\">data</span><span class=\"o\">=</span><span class=\"s1\">'Try this: refine Nat.eq_iff_le_and_ge.mpr ?a✝'</span><span class=\"p\">,</span> <span class=\"n\">severity</span><span class=\"o\">=</span><span class=\"s1\">'info'</span><span class=\"p\">,</span> <span class=\"n\">start_pos</span><span class=\"o\">=</span><span class=\"n\">Pos</span><span class=\"p\">(</span><span class=\"n\">line</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"n\">column</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">),</span> <span class=\"n\">end_pos</span><span class=\"o\">=</span><span class=\"n\">Pos</span><span class=\"p\">(</span><span class=\"n\">line</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"n\">column</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">)),</span> <span class=\"n\">Message</span><span class=\"p\">(</span><span class=\"n\">data</span><span class=\"o\">=</span><span class=\"s1\">'Try this: refine Nat.add_left_cancel ?a✝'</span><span class=\"p\">,</span> <span class=\"n\">severity</span><span class=\"o\">=</span><span class=\"s1\">'info'</span><span class=\"p\">,</span> <span class=\"n\">start_pos</span><span class=\"o\">=</span><span class=\"n\">Pos</span><span class=\"p\">(</span><span class=\"n\">line</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"n\">column</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">),</span> <span class=\"n\">end_pos</span><span class=\"o\">=</span><span class=\"n\">Pos</span><span class=\"p\">(</span><span class=\"n\">line</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"n\">column</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">)),</span> <span class=\"n\">Message</span><span class=\"p\">(</span><span class=\"n\">data</span><span class=\"o\">=</span><span class=\"s1\">'Try this: refine Nat.eq_of_mul_eq_mul_right ?hm ?h'</span><span class=\"p\">,</span> <span class=\"n\">severity</span><span class=\"o\">=</span><span class=\"s1\">'info'</span><span class=\"p\">,</span> <span class=\"n\">start_pos</span><span class=\"o\">=</span><span class=\"n\">Pos</span><span class=\"p\">(</span><span class=\"n\">line</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"n\">column</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">),</span> <span class=\"n\">end_pos</span><span class=\"o\">=</span><span class=\"n\">Pos</span><span class=\"p\">(</span><span class=\"n\">line</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"n\">column</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">)),</span> <span class=\"n\">Message</span><span class=\"p\">(</span><span class=\"n\">data</span><span class=\"o\">=</span><span class=\"s1\">'Try this: refine Nat.eq_of_lt_succ_of_not_lt ?hmn ?h'</span><span class=\"p\">,</span> <span class=\"n\">severity</span><span class=\"o\">=</span><span class=\"s1\">'info'</span><span class=\"p\">,</span> <span class=\"n\">start_pos</span><span class=\"o\">=</span><span class=\"n\">Pos</span><span class=\"p\">(</span><span class=\"n\">line</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"n\">column</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">),</span> <span class=\"n\">end_pos</span><span class=\"o\">=</span><span class=\"n\">Pos</span><span class=\"p\">(</span><span class=\"n\">line</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"n\">column</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">)),</span> <span class=\"n\">Message</span><span class=\"p\">(</span><span class=\"n\">data</span><span class=\"o\">=</span><span class=\"s1\">'Try this: refine Nat.eq_of_le_of_lt_succ ?h₁ ?h₂'</span><span class=\"p\">,</span> <span class=\"n\">severity</span><span class=\"o\">=</span><span class=\"s1\">'info'</span><span class=\"p\">,</span> <span class=\"n\">start_pos</span><span class=\"o\">=</span><span class=\"n\">Pos</span><span class=\"p\">(</span><span class=\"n\">line</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"n\">column</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">),</span> <span class=\"n\">end_pos</span><span class=\"o\">=</span><span class=\"n\">Pos</span><span class=\"p\">(</span><span class=\"n\">line</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"n\">column</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">)),</span> <span class=\"n\">Message</span><span class=\"p\">(</span><span class=\"n\">data</span><span class=\"o\">=</span><span class=\"s1\">'Try this: refine Nat.le_antisymm_iff.mpr ?a✝'</span><span class=\"p\">,</span> <span class=\"n\">severity</span><span class=\"o\">=</span><span class=\"s1\">'info'</span><span class=\"p\">,</span> <span class=\"n\">start_pos</span><span class=\"o\">=</span><span class=\"n\">Pos</span><span class=\"p\">(</span><span class=\"n\">line</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"n\">column</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">),</span> <span class=\"n\">end_pos</span><span class=\"o\">=</span><span class=\"n\">Pos</span><span class=\"p\">(</span><span class=\"n\">line</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"n\">column</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">)),</span> <span class=\"n\">Message</span><span class=\"p\">(</span><span class=\"n\">data</span><span class=\"o\">=</span><span class=\"s1\">'Try this: refine Int.negSucc_inj.mp ?a✝'</span><span class=\"p\">,</span> <span class=\"n\">severity</span><span class=\"o\">=</span><span class=\"s1\">'info'</span><span class=\"p\">,</span> <span class=\"n\">start_pos</span><span class=\"o\">=</span><span class=\"n\">Pos</span><span class=\"p\">(</span><span class=\"n\">line</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"n\">column</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">),</span> <span class=\"n\">end_pos</span><span class=\"o\">=</span><span class=\"n\">Pos</span><span class=\"p\">(</span><span class=\"n\">line</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"n\">column</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">)),</span> <span class=\"n\">Message</span><span class=\"p\">(</span><span class=\"n\">data</span><span class=\"o\">=</span><span class=\"s1\">'Try this: refine Int.ofNat_inj.mp ?a✝'</span><span class=\"p\">,</span> <span class=\"n\">severity</span><span class=\"o\">=</span><span class=\"s1\">'info'</span><span class=\"p\">,</span> <span class=\"n\">start_pos</span><span class=\"o\">=</span><span class=\"n\">Pos</span><span class=\"p\">(</span><span class=\"n\">line</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"n\">column</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">),</span> <span class=\"n\">end_pos</span><span class=\"o\">=</span><span class=\"n\">Pos</span><span class=\"p\">(</span><span class=\"n\">line</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"n\">column</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">)),</span> <span class=\"n\">Message</span><span class=\"p\">(</span><span class=\"n\">data</span><span class=\"o\">=</span><span class=\"s1\">'Try this: refine Nat.dvd_antisymm ?a✝ ?a✝¹'</span><span class=\"p\">,</span> <span class=\"n\">severity</span><span class=\"o\">=</span><span class=\"s1\">'info'</span><span class=\"p\">,</span> <span class=\"n\">start_pos</span><span class=\"o\">=</span><span class=\"n\">Pos</span><span class=\"p\">(</span><span class=\"n\">line</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"n\">column</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">),</span> <span class=\"n\">end_pos</span><span class=\"o\">=</span><span class=\"n\">Pos</span><span class=\"p\">(</span><span class=\"n\">line</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"n\">column</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">)),</span> <span class=\"n\">Message</span><span class=\"p\">(</span><span class=\"n\">data</span><span class=\"o\">=</span><span class=\"s1\">'Try this: refine Nat.mul_left_cancel ?np ?h'</span><span class=\"p\">,</span> <span class=\"n\">severity</span><span class=\"o\">=</span><span class=\"s1\">'info'</span><span class=\"p\">,</span> <span class=\"n\">start_pos</span><span class=\"o\">=</span><span class=\"n\">Pos</span><span class=\"p\">(</span><span class=\"n\">line</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"n\">column</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">),</span> <span class=\"n\">end_pos</span><span class=\"o\">=</span><span class=\"n\">Pos</span><span class=\"p\">(</span><span class=\"n\">line</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"n\">column</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">)),</span> <span class=\"n\">Message</span><span class=\"p\">(</span><span class=\"n\">data</span><span class=\"o\">=</span><span class=\"s1\">'Try this: refine Nat.add_right_cancel_iff.mp ?a✝'</span><span class=\"p\">,</span> <span class=\"n\">severity</span><span class=\"o\">=</span><span class=\"s1\">'info'</span><span class=\"p\">,</span> <span class=\"n\">start_pos</span><span class=\"o\">=</span><span class=\"n\">Pos</span><span class=\"p\">(</span><span class=\"n\">line</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"n\">column</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">),</span> <span class=\"n\">end_pos</span><span class=\"o\">=</span><span class=\"n\">Pos</span><span class=\"p\">(</span><span class=\"n\">line</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"n\">column</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">)),</span> <span class=\"n\">Message</span><span class=\"p\">(</span><span class=\"n\">data</span><span class=\"o\">=</span><span class=\"s1\">'Try this: refine Nat.add_left_cancel_iff.mp ?a✝'</span><span class=\"p\">,</span> <span class=\"n\">severity</span><span class=\"o\">=</span><span class=\"s1\">'info'</span><span class=\"p\">,</span> <span class=\"n\">start_pos</span><span class=\"o\">=</span><span class=\"n\">Pos</span><span class=\"p\">(</span><span class=\"n\">line</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"n\">column</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">),</span> <span class=\"n\">end_pos</span><span class=\"o\">=</span><span class=\"n\">Pos</span><span class=\"p\">(</span><span class=\"n\">line</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"n\">column</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">)),</span> <span class=\"n\">Message</span><span class=\"p\">(</span><span class=\"n\">data</span><span class=\"o\">=</span><span class=\"s1\">'Try this: refine (Nat.mul_right_cancel_iff ?p 1 0).mp ?a✝'</span><span class=\"p\">,</span> <span class=\"n\">severity</span><span class=\"o\">=</span><span class=\"s1\">'info'</span><span class=\"p\">,</span> <span class=\"n\">start_pos</span><span class=\"o\">=</span><span class=\"n\">Pos</span><span class=\"p\">(</span><span class=\"n\">line</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"n\">column</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">),</span> <span class=\"n\">end_pos</span><span class=\"o\">=</span><span class=\"n\">Pos</span><span class=\"p\">(</span><span class=\"n\">line</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"n\">column</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">)),</span> <span class=\"n\">Message</span><span class=\"p\">(</span><span class=\"n\">data</span><span class=\"o\">=</span><span class=\"s1\">'Try this: refine Nat.mul_right_cancel ?mp ?h'</span><span class=\"p\">,</span> <span class=\"n\">severity</span><span class=\"o\">=</span><span class=\"s1\">'info'</span><span class=\"p\">,</span> <span class=\"n\">start_pos</span><span class=\"o\">=</span><span class=\"n\">Pos</span><span class=\"p\">(</span><span class=\"n\">line</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"n\">column</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">),</span> <span class=\"n\">end_pos</span><span class=\"o\">=</span><span class=\"n\">Pos</span><span class=\"p\">(</span><span class=\"n\">line</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"n\">column</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">)),</span> <span class=\"n\">Message</span><span class=\"p\">(</span><span class=\"n\">data</span><span class=\"o\">=</span><span class=\"s1\">'Try this: refine (Nat.mul_left_cancel_iff ?p 1 0).mp ?a✝'</span><span class=\"p\">,</span> <span class=\"n\">severity</span><span class=\"o\">=</span><span class=\"s1\">'info'</span><span class=\"p\">,</span> <span class=\"n\">start_pos</span><span class=\"o\">=</span><span class=\"n\">Pos</span><span class=\"p\">(</span><span class=\"n\">line</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"n\">column</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">),</span> <span class=\"n\">end_pos</span><span class=\"o\">=</span><span class=\"n\">Pos</span><span class=\"p\">(</span><span class=\"n\">line</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"n\">column</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">)),</span> <span class=\"n\">Message</span><span class=\"p\">(</span><span class=\"n\">data</span><span class=\"o\">=</span><span class=\"s1\">'Try this: refine Fin.mk.inj_iff.mp ?a✝'</span><span class=\"p\">,</span> <span class=\"n\">severity</span><span class=\"o\">=</span><span class=\"s1\">'info'</span><span class=\"p\">,</span> <span class=\"n\">start_pos</span><span class=\"o\">=</span><span class=\"n\">Pos</span><span class=\"p\">(</span><span class=\"n\">line</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"n\">column</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">),</span> <span class=\"n\">end_pos</span><span class=\"o\">=</span><span class=\"n\">Pos</span><span class=\"p\">(</span><span class=\"n\">line</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"n\">column</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">)),</span> <span class=\"n\">Message</span><span class=\"p\">(</span><span class=\"n\">data</span><span class=\"o\">=</span><span class=\"s1\">'Try this: refine Nat.eq_of_testBit_eq ?pred'</span><span class=\"p\">,</span> <span class=\"n\">severity</span><span class=\"o\">=</span><span class=\"s1\">'info'</span><span class=\"p\">,</span> <span class=\"n\">start_pos</span><span class=\"o\">=</span><span class=\"n\">Pos</span><span class=\"p\">(</span><span class=\"n\">line</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"n\">column</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">),</span> <span class=\"n\">end_pos</span><span class=\"o\">=</span><span class=\"n\">Pos</span><span class=\"p\">(</span><span class=\"n\">line</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"n\">column</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">)),</span> <span class=\"n\">Message</span><span class=\"p\">(</span><span class=\"n\">data</span><span class=\"o\">=</span><span class=\"s1\">'Try this: refine Nat.compare_eq_eq.mp ?a✝'</span><span class=\"p\">,</span> <span class=\"n\">severity</span><span class=\"o\">=</span><span class=\"s1\">'info'</span><span class=\"p\">,</span> <span class=\"n\">start_pos</span><span class=\"o\">=</span><span class=\"n\">Pos</span><span class=\"p\">(</span><span class=\"n\">line</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"n\">column</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">),</span> <span class=\"n\">end_pos</span><span class=\"o\">=</span><span class=\"n\">Pos</span><span class=\"p\">(</span><span class=\"n\">line</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"n\">column</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"p\">))],</span> <span class=\"n\">goals</span><span class=\"o\">=</span><span class=\"p\">[],</span> <span class=\"n\">proof_state</span><span class=\"o\">=</span><span class=\"mi\">1</span><span class=\"p\">)</span>\n</code></pre></div>\n</div></div>",
        "id": 515564251,
        "sender_full_name": "Auguste Poiroux",
        "timestamp": 1746126608
    },
    {
        "content": "<p>There's nothing wrong if a proof step contains mvars. Either the error message is misleading in the repl, or its being overeager in detecting errors.</p>",
        "id": 515564329,
        "sender_full_name": "Leni Aniva",
        "timestamp": 1746126652
    },
    {
        "content": "<p>Im not familiar with lean_interact. Does this example assume the proof is finished?</p>",
        "id": 515564454,
        "sender_full_name": "Leni Aniva",
        "timestamp": 1746126709
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"599027\">Leni Aniva</span> <a href=\"#narrow/channel/219941-Machine-Learning-for-Theorem-Proving/topic/DeepSeek-Prover.20V2/near/515564329\">said</a>:</p>\n<blockquote>\n<p>There's nothing wrong if a proof step contains mvars. Either the error message is misleading in the repl, or its being overeager in detecting errors.</p>\n</blockquote>\n<p>The check is for expression metavariables with <code>hasExprMVar</code></p>",
        "id": 515564604,
        "sender_full_name": "Auguste Poiroux",
        "timestamp": 1746126761
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"321854\">Auguste Poiroux</span> <a href=\"#narrow/channel/219941-Machine-Learning-for-Theorem-Proving/topic/DeepSeek-Prover.20V2/near/515564604\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"599027\">Leni Aniva</span> <a href=\"#narrow/channel/219941-Machine-Learning-for-Theorem-Proving/topic/DeepSeek-Prover.20V2/near/515564329\">said</a>:</p>\n<blockquote>\n<p>There's nothing wrong if a proof step contains mvars. Either the error message is misleading in the repl, or its being overeager in detecting errors.</p>\n</blockquote>\n<p>The check is for expression metavariables with <code>hasExprMVar</code></p>\n</blockquote>\n<p>so? What Im saying is unless we declare a proof to be fully complete, goals can have mvars, proof terms can have mvars, and these would not be a problem.</p>",
        "id": 515564631,
        "sender_full_name": "Leni Aniva",
        "timestamp": 1746126777
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"599027\">Leni Aniva</span> <a href=\"#narrow/channel/219941-Machine-Learning-for-Theorem-Proving/topic/DeepSeek-Prover.20V2/near/515564454\">said</a>:</p>\n<blockquote>\n<p>Im not familiar with lean_interact. Does this example assume the proof is finished?</p>\n</blockquote>\n<p>This is not specific to LeanInteract, I am just using it for the interface to the REPL and for using Lean v4.9.0.<br>\nThis example assume the proof is finished because there are no goals left. But there is a hole, hence the <code>hasExprMvar</code> check that fails</p>",
        "id": 515565127,
        "sender_full_name": "Auguste Poiroux",
        "timestamp": 1746126972
    },
    {
        "content": "<p>11 messages were moved from this topic to <a class=\"stream-topic\" data-stream-id=\"270676\" href=\"/#narrow/channel/270676-lean4/topic/.23print.20axioms.20does.20not.20report.20sorry/with/515566581\">#lean4 &gt; #print axioms does not report sorry</a> by <span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span>.</p>",
        "id": 515568645,
        "sender_full_name": "Notification Bot",
        "timestamp": 1746128333
    },
    {
        "content": "<p>Just so it is clear, that proof of <code>algebra_amgm_prod1toneq1_sum1tongeqn</code> is likely an example of an AI agent finding and exploiting a bug in Lean.  The bug is the one mentioned in the above message.  Even if DeepSeek were diligent and used <code>#print axioms ...</code> it would not have triggered anything suspicious.  (Maybe it is the same with the putnam problems when we see the actual code.  That could explain why the agent is using <code>Cardinal.toNat</code>.)  If this is the case, this is really interesting and should be made more well known!</p>",
        "id": 515574957,
        "sender_full_name": "Jason Rute",
        "timestamp": 1746130778
    },
    {
        "content": "<p>(Edit: I'm calling it a bug now, not a \"soundness bug\".)</p>",
        "id": 515575086,
        "sender_full_name": "Jason Rute",
        "timestamp": 1746130815
    },
    {
        "content": "<p>(Our graph2tac paper found aN issue, but that was just an axiom of False that didn't take care to check for.  This is much more crazy.)</p>",
        "id": 515576378,
        "sender_full_name": "Jason Rute",
        "timestamp": 1746131299
    },
    {
        "content": "<p>Jason, I think it would be much wiser to remove that bold sentence and stick to facts.</p>",
        "id": 515576463,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1746131330
    },
    {
        "content": "<p>This is not at all what people call a soundness bug. This has a precise meaning.</p>",
        "id": 515576694,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1746131410
    },
    {
        "content": "<p>Is the precise meaning based on external checking?</p>",
        "id": 515576778,
        "sender_full_name": "Jason Rute",
        "timestamp": 1746131446
    },
    {
        "content": "<p>Or the kernel?</p>",
        "id": 515576791,
        "sender_full_name": "Jason Rute",
        "timestamp": 1746131450
    },
    {
        "content": "<p>Of is <code>#print axioms</code> also part of that?</p>",
        "id": 515576832,
        "sender_full_name": "Jason Rute",
        "timestamp": 1746131470
    },
    {
        "content": "<p>Because there did seem to be a bug in <code>#print axioms</code>?</p>",
        "id": 515576879,
        "sender_full_name": "Jason Rute",
        "timestamp": 1746131488
    },
    {
        "content": "<p>The kernel.</p>",
        "id": 515576891,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1746131492
    },
    {
        "content": "<p>What should I call it?  A student could use this same trick to cheat on a Lean assignment (if not using an extenal checker).</p>",
        "id": 515577082,
        "sender_full_name": "Jason Rute",
        "timestamp": 1746131556
    },
    {
        "content": "<p><code>#print axiom</code> is a convenient command to quickly check something is axiom free, and it would indeed be nice to make it more reliable. But this has nothing to do with a soundness bug.</p>",
        "id": 515577117,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1746131569
    },
    {
        "content": "<p>You can call it a bug in a convenience command.</p>",
        "id": 515577157,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1746131586
    },
    {
        "content": "<p>\"Has nothing to do with\" is too strong.  There is a name for this.  Let me look it up.</p>",
        "id": 515577674,
        "sender_full_name": "Jason Rute",
        "timestamp": 1746131771
    },
    {
        "content": "<p>I thought it was \"Pollack consistency\" but that is slightly different.  Okay, I'll just call it a \"bug in Lean\".</p>",
        "id": 515578413,
        "sender_full_name": "Jason Rute",
        "timestamp": 1746132065
    },
    {
        "content": "<p>I commented on the non-severity in the other thread.</p>",
        "id": 515578583,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1746132130
    },
    {
        "content": "<p>Jason, you make it sound like the bug in this command is enough, but the main thing is the bug in the AI pipeline that simply doesn’t check the Lean kernel accepts the proof.</p>",
        "id": 515579099,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1746132356
    },
    {
        "content": "<p>My point is this.  It is well known you can trick Lean to make a bad proof look right.  You can mess with the tactic environment and such.  Sure, if you do external proof checking, it would be caught, but 99% of Lean users don't do that.  this is a case of an AI agent finding a very subtle bug in Lean such that #print axioms doesn't say sorry is used.  I think it is a big deal.  Lean's kernel is fine and external type checking still works, but for AI research it isn't enough to rely on Lean's command line + print axioms.  You have to export the proofs.  Is this balanced and fair?</p>",
        "id": 515579218,
        "sender_full_name": "Jason Rute",
        "timestamp": 1746132397
    },
    {
        "content": "<p>The bug in the AI pipeline could have just been that they didn't use external type checking.</p>",
        "id": 515579390,
        "sender_full_name": "Jason Rute",
        "timestamp": 1746132473
    },
    {
        "content": "<p>Oh, I see.  I should try to run this proof on the command line.  That apparently fails according to <span class=\"user-mention\" data-user-id=\"110024\">@Sebastian Ullrich</span>.  Let me do that.</p>",
        "id": 515579646,
        "sender_full_name": "Jason Rute",
        "timestamp": 1746132575
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"115715\">Jason Rute</span> <a href=\"#narrow/channel/219941-Machine-Learning-for-Theorem-Proving/topic/DeepSeek-Prover.20V2/near/515579390\">said</a>:</p>\n<blockquote>\n<p>The bug in the AI pipeline could have just been that they didn't use external type checking.</p>\n</blockquote>\n<p>Surely this is the most reasonable answer. Besides I'm not sure I agree that 99% of lean users don't know this. Anyone who uses lean mostly as a <em>human</em> will inevitably run into issues like these, and they come up all the time on Zulip. There's plenty of threads suggesting to use <code>done</code> at the end of proofs, etc... I think only people that interact with lean mostly via REPL will not have run into something similar.</p>",
        "id": 515580071,
        "sender_full_name": "Luigi Massacci",
        "timestamp": 1746132749
    },
    {
        "content": "<p>I think I have to disagree with <span class=\"user-mention\" data-user-id=\"115715\">@Jason Rute</span> here:</p>\n<ol>\n<li>There are two bugs: a Lean bug of <code>#print axioms</code> and a REPL bug of <code>apply?</code>.</li>\n<li>I wrote the <code>#print axioms</code> line myself to debug the seeming absence of squiggly lines of <code>apply?</code> (which turned out to be a VS Code issue)</li>\n<li><code>#print axioms</code> did break, but as far as I know, <code>#print axioms</code> is not used by DeepSeek's team to check correctness. The agent probably didn't find/exploit whatever bug I found.</li>\n<li>The original proof in the zip file released by DeepSeek was indeed incorrect, and some bug was exploited by the DeepSeek-Prover-V2 model. But this bug is the <code>apply?</code> bug: it is something like Lean REPL not reporting the sorry warning message in <code>apply?</code> (I have not read all the details above); and I don't have any evidence this <code>apply?</code> issue is at all related to the <code>#print axioms</code> issue. Since this is probably a REPL issue, this should be categorized as a bug in the AI pipeline and not a bug in Lean.</li>\n<li>DeepSeek-Prover-V2 did not use <code>apply?</code> on any other problem in miniF2F. I think their numbers on miniF2F are still broadly sound (except for this 0.4% difference on miniF2F-valid). But the proofs of PutnamBench should warrant a more detailed check.</li>\n<li>I would say this \"bug discovery\" is me trying to debug the <code>apply?</code> issue and (because DeepSeek-Prover-V2 wrote the <code>Type*</code>) accidentally triggering the <code>#print axioms</code> bug during debugging. It's interesting that besides the sorry warning, the <code>AddConstAsyncResult.commitConst: constant has level params [u] but expected []</code> <em>error</em> message was also not caught by DeepSeek-Prover-V2's checking (perhaps because there is also some message upper limit for REPL like VS Code?) but I don't expect DeepSeek-Prover to have put the <code>Type*</code> there to deliberately trigger the <code>#print axioms</code> bug for humans at all (see Appendix B of their paper).</li>\n</ol>",
        "id": 515581258,
        "sender_full_name": "Thomas Zhu",
        "timestamp": 1746133244
    },
    {
        "content": "<p>Lean doesn't have a single message for \"this proof is not correct\", and the engineers at DeepSeek did not cover all of the cases where a proof fails. That is my impression about this problem</p>",
        "id": 515581459,
        "sender_full_name": "Leni Aniva",
        "timestamp": 1746133328
    },
    {
        "content": "<p>I would say it is impressive that DeepSeek-Prover-V2 cheated their pipeline (perhaps using REPL) of checking proofs. But reward cheating in RL happens all the time: it only takes the agent to write an <code>apply?</code> tactic once to find it.</p>",
        "id": 515581844,
        "sender_full_name": "Thomas Zhu",
        "timestamp": 1746133493
    },
    {
        "content": "<blockquote>\n<p><code>#print axioms</code> did break, but as far as I know, <code>#print axioms</code> is not used by DeepSeek's team to check correctness. The agent probably didn't find/exploit whatever bug I found.</p>\n</blockquote>\n<p>Maybe.  But in that case, I'm surprised <code>apply?</code> wasn't used more by the AI.  You could solve everything with it.</p>",
        "id": 515581871,
        "sender_full_name": "Jason Rute",
        "timestamp": 1746133503
    },
    {
        "content": "<p>they probably havent trained it enough to collapse its output distribution yet</p>",
        "id": 515582088,
        "sender_full_name": "Leni Aniva",
        "timestamp": 1746133581
    },
    {
        "content": "<p><a class=\"stream-topic\" data-stream-id=\"270676\" href=\"/#narrow/channel/270676-lean4/topic/.23print.20axioms.20does.20not.20report.20sorry/with/515566581\">#lean4 &gt; #print axioms does not report sorry</a> </p>\n<p>Just to be clear, you mentioned in that thread that the error will not come up in Lean version <code>4.18.0</code>, and it might be \"an unintended side effect of parallelism\", which is probably a new feature? And you mentioned that DeepSeek was using Lean 4.9, so this <code>#print axioms</code> bug itself probably does not affect the DeepSeek team, right?</p>\n<p>I tested your code snippet on my machine. </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">universe</span><span class=\"w\"> </span><span class=\"n\">u</span>\n\n<span class=\"c1\">-- declaration uses 'sorry'</span>\n<span class=\"c1\">-- AddConstAsyncResult.commitConst: constant has level params [u] but expected []</span>\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">False</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">id</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n\n<span class=\"c1\">-- 'f' does not depend on any axioms</span>\n<span class=\"bp\">#</span><span class=\"n\">print</span><span class=\"w\"> </span><span class=\"n\">axioms</span><span class=\"w\"> </span><span class=\"n\">f</span>\n\n<span class=\"c1\">-- Let's try using this `f`</span>\n<span class=\"c1\">-- (kernel) unknown constant 'f'</span>\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">False</span><span class=\"bp\">.</span><span class=\"n\">elim</span><span class=\"w\"> </span><span class=\"n\">f</span>\n</code></pre></div>\n<p>When my <code>lean-toolchain</code> file is set to <code>leanprover/lean4:v4.19.0-rc3</code> it prints no axioms. When I change it to <code>leanprover/lean4:v4.18.0</code> it prints the usual <code>'f' depends on axioms: [sorryAx]</code>.</p>\n<p>In Lean 4 Web (<a href=\"https://live.lean-lang.org\">https://live.lean-lang.org</a>), it lets me change the version of Lean. The default \"Latest Mathlib\" version prints no axioms, while \"Mathlib stable\" prints the <code>sorryAx</code> axiom.</p>",
        "id": 515582434,
        "sender_full_name": "Deming Xu",
        "timestamp": 1746133727
    },
    {
        "content": "<p>In Lean v4.9.0, at least, I didn't get a sorry message for <code>apply?</code>. So I wouldn't say it is a REPL issue since the command mode is more or less mirroring what we get in the IDE. It was used with the belief that it does the type-checking. I agree that we should improve the REPL in this regard.</p>",
        "id": 515582571,
        "sender_full_name": "Auguste Poiroux",
        "timestamp": 1746133784
    },
    {
        "content": "<p>You are all correct that I'm making assumptions about how this arose.  Maybe it just happens to be that the one proof using <code>apply?</code> (which can solve any goal) was also the one proof for which <code>print axioms</code> won't point out that <code>apply?</code> introduces sorry.  (Well there are also the two putnam proofs using apply?, but we can't seem to get those to work, although they do have that weird cardinality stuff.)</p>",
        "id": 515582595,
        "sender_full_name": "Jason Rute",
        "timestamp": 1746133795
    },
    {
        "content": "<p>Ok, there is a slight sarcasm there, but un-sarcastically, I think the best would be to get DeepSeek to explain more how this arose and give more details on the putnam stuff.  Also <span class=\"user-mention\" data-user-id=\"644040\">@George Tsoukalas</span> should make sure he uses external type checking for checking PutnamBench problems.</p>",
        "id": 515582940,
        "sender_full_name": "Jason Rute",
        "timestamp": 1746133942
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"115715\">Jason Rute</span> <a href=\"#narrow/channel/219941-Machine-Learning-for-Theorem-Proving/topic/DeepSeek-Prover.20V2/near/515581871\">said</a>:</p>\n<blockquote>\n<blockquote>\n<p><code>#print axioms</code> did break, but as far as I know, <code>#print axioms</code> is not used by DeepSeek's team to check correctness. The agent probably didn't find/exploit whatever bug I found.</p>\n</blockquote>\n<p>Maybe.  But in that case, I'm surprised <code>apply?</code> wasn't used more by the AI.  You could solve everything with it.</p>\n</blockquote>\n<p>I suspect: the bug in REPL (or whatever DeepSeek used) was similar to squiggly lines in VS Code in that there is an upper limit to the number of messages, so the <code>declaration uses sorry</code> and the <code>AddConstAsyncResult.commitConst</code> messages were not caught. This depends on <code>apply?</code> suggesting enough suggestions to exceed this upper limit. I suspect REPL will find that <code>example : False := by apply?</code> is wrong but won't find that <code>example : a very long untrue prop := by apply?</code> is wrong. (Edit: check below)</p>",
        "id": 515582945,
        "sender_full_name": "Thomas Zhu",
        "timestamp": 1746133945
    },
    {
        "content": "<p>I think it's complete coincidence that the <code>apply?</code> REPL bug and <code>#print axioms</code> bug coincided in the same miniF2F problem. This is because of their two incorrect examples in Appendix B didn't add any <code>Type*</code> in the proof.</p>",
        "id": 515583127,
        "sender_full_name": "Thomas Zhu",
        "timestamp": 1746134031
    },
    {
        "content": "<p>And (unsarcastically), I am being too sensationalist.  Sorry.</p>",
        "id": 515583189,
        "sender_full_name": "Jason Rute",
        "timestamp": 1746134046
    },
    {
        "content": "<p>For Appendix B, I would like to see the original code and why they think it checks.</p>",
        "id": 515583352,
        "sender_full_name": "Jason Rute",
        "timestamp": 1746134125
    },
    {
        "content": "<p>I think tactics should not rely on error messages to indicate they have failed. All tactics should fail via throwing exceptions.</p>",
        "id": 515583408,
        "sender_full_name": "Leni Aniva",
        "timestamp": 1746134153
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"599027\">Leni Aniva</span> <a href=\"#narrow/channel/219941-Machine-Learning-for-Theorem-Proving/topic/DeepSeek-Prover.20V2/near/515583408\">said</a>:</p>\n<blockquote>\n<p>I think tactics should not rely on error messages to indicate they have failed. All tactics should fail via throwing exceptions.</p>\n</blockquote>\n<p>What's the difference between an error message and an exception?</p>",
        "id": 515583510,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1746134183
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"631691\">Thomas Zhu</span> <a href=\"#narrow/channel/219941-Machine-Learning-for-Theorem-Proving/topic/DeepSeek-Prover.20V2/near/515583127\">said</a>:</p>\n<blockquote>\n<p>I think it's complete coincidence that the <code>apply?</code> REPL bug and <code>#print axioms</code> bug coincided in the same miniF2F problem. This is because of their two incorrect examples in Appendix B didn't add any <code>Type*</code> in the proof.</p>\n</blockquote>\n<p>Would <code>Cardinality.toNat</code> add <code>Type*</code>?  (Both Putnam examples use this.)</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">foo</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"k\">calc</span>\n<span class=\"w\">    </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Cardinal</span><span class=\"bp\">.</span><span class=\"n\">toNat</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">cast_inj</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Cardinal</span><span class=\"bp\">.</span><span class=\"n\">toNat</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">m</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">apply?</span>\n<span class=\"w\">    </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">cast_inj</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">h0</span>\n</code></pre></div>",
        "id": 515583542,
        "sender_full_name": "Jason Rute",
        "timestamp": 1746134201
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> <a href=\"#narrow/channel/219941-Machine-Learning-for-Theorem-Proving/topic/DeepSeek-Prover.20V2/near/515583510\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"599027\">Leni Aniva</span> <a href=\"#narrow/channel/219941-Machine-Learning-for-Theorem-Proving/topic/DeepSeek-Prover.20V2/near/515583408\">said</a>:</p>\n<blockquote>\n<p>I think tactics should not rely on error messages to indicate they have failed. All tactics should fail via throwing exceptions.</p>\n</blockquote>\n<p>What's the difference between an error message and an exception?</p>\n</blockquote>\n<p>error messages are just strings in the message log. an exception forces whatever metaprogramming tool interacting with Lean to handle the error, and can't be silently ignored.</p>",
        "id": 515583615,
        "sender_full_name": "Leni Aniva",
        "timestamp": 1746134242
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"115715\">Jason Rute</span> <a href=\"#narrow/channel/219941-Machine-Learning-for-Theorem-Proving/topic/DeepSeek-Prover.20V2/near/515583542\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"631691\">Thomas Zhu</span> <a href=\"#narrow/channel/219941-Machine-Learning-for-Theorem-Proving/topic/DeepSeek-Prover.20V2/near/515583127\">said</a>:</p>\n<blockquote>\n<p>I think it's complete coincidence that the <code>apply?</code> REPL bug and <code>#print axioms</code> bug coincided in the same miniF2F problem. This is because of their two incorrect examples in Appendix B didn't add any <code>Type*</code> in the proof.</p>\n</blockquote>\n<p>Would <code>Cardinality.toNat</code> add <code>Type*</code>?</p>\n<p><div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">foo</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"k\">calc</span>\n<span class=\"w\">    </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Cardinal</span><span class=\"bp\">.</span><span class=\"n\">toNat</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">cast_inj</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Cardinal</span><span class=\"bp\">.</span><span class=\"n\">toNat</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">m</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">apply?</span>\n<span class=\"w\">    </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">cast_inj</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">h0</span>\n</code></pre></div><br>\n</p>\n</blockquote>\n<p>It introduces a universe metavariable <del>which gets converted into a universe parameter after the declaration finishes elaborating</del>. This causes the bug where something bad happens if a declaration has universe parameters not mentioned in its type.</p>",
        "id": 515583742,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1746134296
    },
    {
        "content": "<p>Is that bug related to either the apply? bug or the print axioms bug?</p>",
        "id": 515583996,
        "sender_full_name": "Jason Rute",
        "timestamp": 1746134419
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"599027\">Leni Aniva</span> <a href=\"#narrow/channel/219941-Machine-Learning-for-Theorem-Proving/topic/DeepSeek-Prover.20V2/near/515583615\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> <a href=\"#narrow/channel/219941-Machine-Learning-for-Theorem-Proving/topic/DeepSeek-Prover.20V2/near/515583510\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"599027\">Leni Aniva</span> <a href=\"#narrow/channel/219941-Machine-Learning-for-Theorem-Proving/topic/DeepSeek-Prover.20V2/near/515583408\">said</a>:</p>\n<blockquote>\n<p>I think tactics should not rely on error messages to indicate they have failed. All tactics should fail via throwing exceptions.</p>\n</blockquote>\n<p>What's the difference between an error message and an exception?</p>\n</blockquote>\n<p>error messages are just strings in the message log. an exception forces whatever metaprogramming tool interacting with Lean to handle the error, and can't be silently ignored.</p>\n</blockquote>\n<p>I think most tactics do this already. When a nested tactic failure happens, it propagates up the monad.</p>",
        "id": 515584026,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1746134437
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> <a href=\"#narrow/channel/219941-Machine-Learning-for-Theorem-Proving/topic/DeepSeek-Prover.20V2/near/515584026\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"599027\">Leni Aniva</span> <a href=\"#narrow/channel/219941-Machine-Learning-for-Theorem-Proving/topic/DeepSeek-Prover.20V2/near/515583615\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> <a href=\"#narrow/channel/219941-Machine-Learning-for-Theorem-Proving/topic/DeepSeek-Prover.20V2/near/515583510\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"599027\">Leni Aniva</span> <a href=\"#narrow/channel/219941-Machine-Learning-for-Theorem-Proving/topic/DeepSeek-Prover.20V2/near/515583408\">said</a>:</p>\n<blockquote>\n<p>I think tactics should not rely on error messages to indicate they have failed. All tactics should fail via throwing exceptions.</p>\n</blockquote>\n<p>What's the difference between an error message and an exception?</p>\n</blockquote>\n<p>error messages are just strings in the message log. an exception forces whatever metaprogramming tool interacting with Lean to handle the error, and can't be silently ignored.</p>\n</blockquote>\n<p>I think most tactics do this already. When a nested tactic failure happens, it propagates up the monad.</p>\n</blockquote>\n<p>but what if a tactic just sets the message log and silently returns. <code>ring_nf</code> behaves like this if it can't make progress.</p>",
        "id": 515584385,
        "sender_full_name": "Leni Aniva",
        "timestamp": 1746134607
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"631691\">Thomas Zhu</span> <a href=\"#narrow/channel/219941-Machine-Learning-for-Theorem-Proving/topic/DeepSeek-Prover.20V2/near/515582945\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"115715\">Jason Rute</span> <a href=\"#narrow/channel/219941-Machine-Learning-for-Theorem-Proving/topic/DeepSeek-Prover.20V2/near/515581871\">said</a>:</p>\n<blockquote>\n<blockquote>\n<p><code>#print axioms</code> did break, but as far as I know, <code>#print axioms</code> is not used by DeepSeek's team to check correctness. The agent probably didn't find/exploit whatever bug I found.</p>\n</blockquote>\n<p>Maybe.  But in that case, I'm surprised <code>apply?</code> wasn't used more by the AI.  You could solve everything with it.</p>\n</blockquote>\n<p>I suspect: the bug in REPL (or whatever DeepSeek used) was similar to squiggly lines in VS Code in that there is an upper limit to the number of messages, so the <code>declaration uses sorry</code> and the <code>AddConstAsyncResult.commitConst</code> messages were not caught. This depends on <code>apply?</code> suggesting enough suggestions to exceed this upper limit. I suspect REPL will find that <code>example : False := by apply?</code> is wrong but won't find that <code>example : a very long untrue prop := by apply?</code> is wrong.</p>\n</blockquote>\n<p><del><code>example : False := by apply?</code> will not raise any warning (sorry message) when using Lean v4.9.0. Same happens for the REPL using this Lean version.</del><br>\n<del>However, when using more recent Lean versions, the REPL will complain that the declaration is using sorry. This whole discussion would have never happened if DeepSeek used Lean v4.15.0 for example.</del><br>\n<del>But this raised the important problem that we should type check the proof correctly and that the REPL is currently not doing it in command mode <span aria-label=\"+1\" class=\"emoji emoji-1f44d\" role=\"img\" title=\"+1\">:+1:</span></del></p>",
        "id": 515584428,
        "sender_full_name": "Auguste Poiroux",
        "timestamp": 1746134630
    },
    {
        "content": "<p>Thanks for the fact check!</p>",
        "id": 515584622,
        "sender_full_name": "Thomas Zhu",
        "timestamp": 1746134709
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"599027\">Leni Aniva</span> <a href=\"#narrow/channel/219941-Machine-Learning-for-Theorem-Proving/topic/DeepSeek-Prover.20V2/near/515584385\">said</a>:</p>\n<blockquote>\n<p><code>ring_nf</code> behaves like this if it can't make progress.</p>\n</blockquote>\n<p>Can you provide an example? I can't seems to reproduce this.</p>",
        "id": 515584906,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1746134816
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> <a href=\"#narrow/channel/219941-Machine-Learning-for-Theorem-Proving/topic/DeepSeek-Prover.20V2/near/515584906\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"599027\">Leni Aniva</span> <a href=\"#narrow/channel/219941-Machine-Learning-for-Theorem-Proving/topic/DeepSeek-Prover.20V2/near/515584385\">said</a>:</p>\n<blockquote>\n<p><code>ring_nf</code> behaves like this if it can't make progress.</p>\n</blockquote>\n<p>Can you provide an example? I can't seems to reproduce this.</p>\n</blockquote>\n<p><a href=\"https://github.com/stanford-centaur/PyPantograph/issues/97\">https://github.com/stanford-centaur/PyPantograph/issues/97</a></p>",
        "id": 515585029,
        "sender_full_name": "Leni Aniva",
        "timestamp": 1746134865
    },
    {
        "content": "<p>So <code>ring_nf</code> doesn't throw a message.</p>",
        "id": 515585233,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1746134953
    },
    {
        "content": "<p>When using Lean <code>v4.9.0</code> this snippet: </p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">False</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span><span class=\"w\"> </span><span class=\"n\">apply</span><span class=\"bp\">?</span>\n</code></pre></div>\n<p>raises the following warning message: </p>\n<div class=\"codehilite\" data-code-language=\"Bash Session\"><pre><span></span><code><span class=\"go\">declaration uses 'sorry'</span>\n</code></pre></div>",
        "id": 515585295,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1746134997
    },
    {
        "content": "<p><del>@<strong>Thomas Zhu</strong> I wasn't testing your hypothesis about <code>example : a very long untrue prop := by apply?</code>. I was just testing if DeepSeek proof <code>apply?</code> issue is now caught with more recent Lean versions and the Lean REPL.</del><br>\n<del>I assumed the same would apply with <code>example : False := by apply?</code>, but your hypothesis is confirmed: in Lean v4.9.0 we have a <code>sorry</code> warning with <code>example : False := by apply?</code> but not with long enough declarations/proofs using <code>apply?</code>.</del></p>",
        "id": 515585735,
        "sender_full_name": "Auguste Poiroux",
        "timestamp": 1746135177
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"556875\">Pietro Monticone</span> <a href=\"#narrow/channel/219941-Machine-Learning-for-Theorem-Proving/topic/DeepSeek-Prover.20V2/near/515585295\">said</a>:</p>\n<blockquote>\n<p>When using Lean <code>v4.9.0</code> this snippet: </p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">False</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span><span class=\"w\"> </span><span class=\"n\">apply</span><span class=\"bp\">?</span>\n</code></pre></div>\n<p>raises the following warning message: </p>\n<p><div class=\"codehilite\" data-code-language=\"Bash Session\"><pre><span></span><code><span class=\"go\">declaration uses 'sorry'</span>\n</code></pre></div><br>\n</p>\n</blockquote>\n<p>Just to be clear: you mean Lean REPL v4.9.0, and not just Lean v4.9.0?</p>",
        "id": 515586025,
        "sender_full_name": "Thomas Zhu",
        "timestamp": 1746135303
    },
    {
        "content": "<p>No, I mean Lean <code>v4.9.0</code>.</p>",
        "id": 515586208,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1746135385
    },
    {
        "content": "<p>Yes, I am sure that an unsuccessful <code>apply?</code> raises the <code>declaration uses 'sorry'</code> message in any proof in any Lean version. The question is whether this message will be caught by Lean REPL (and whatever DeepSeek uses to check their proofs). It appears from the above messages that it isn't (at least in some theorems) but I have not tested myself. Also, completely unrelatedly, the warning message doesn't have an orange squiggly line in VS Code due to the 500 message limit.</p>",
        "id": 515586851,
        "sender_full_name": "Thomas Zhu",
        "timestamp": 1746135687
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"631691\">@Thomas Zhu</span> your hypothesis \"I suspect REPL will find that <code>example : False := by apply?</code> is wrong but won't find that <code>example : a very long untrue prop := by apply?</code> is wrong.\" is always true even in recent Lean versions. Sorry for the mix up, I added strikethrough to both my messages above. It seems that whenever we have a situation where we don't have the <code>sorry</code> squiggles in the IDE (i.e. no sorry message is raised), the same applies to the REPL</p>",
        "id": 515586956,
        "sender_full_name": "Auguste Poiroux",
        "timestamp": 1746135724
    },
    {
        "content": "<p>[PS: I think the undetected error <em>preceding</em> the <code>apply?</code> in <code>putnam_2007_b4</code> is at least as interesting]</p>",
        "id": 515587285,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1746135870
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"556875\">Pietro Monticone</span> <a href=\"#narrow/channel/219941-Machine-Learning-for-Theorem-Proving/topic/DeepSeek-Prover.20V2/near/515587285\">said</a>:</p>\n<blockquote>\n<p>[PS: I think the undetected error <em>preceding</em> the <code>apply?</code> in <code>putnam_2007_b4</code> is at least as interesting]</p>\n</blockquote>\n<p>I think that is the same as the AddConstAsyncResult.commitConst error in algebra_amgm_prod1toneq1_sum1tongeqn: the error is detected, but the error message is somehow flooded by the many suggestions from <code>apply?</code></p>",
        "id": 515587721,
        "sender_full_name": "Thomas Zhu",
        "timestamp": 1746136067
    },
    {
        "content": "<p>I'd encourage people in future to create new threads in other channels and link to them here when you find a weird Lean behavior; remember that many people very familiar with the internals of Lean may not bother reading threads in this channel.</p>",
        "id": 515588398,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1746136406
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"599027\">Leni Aniva</span> <a href=\"#narrow/channel/219941-Machine-Learning-for-Theorem-Proving/topic/DeepSeek-Prover.20V2/near/515585029\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> <a href=\"#narrow/channel/219941-Machine-Learning-for-Theorem-Proving/topic/DeepSeek-Prover.20V2/near/515584906\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"599027\">Leni Aniva</span> <a href=\"#narrow/channel/219941-Machine-Learning-for-Theorem-Proving/topic/DeepSeek-Prover.20V2/near/515584385\">said</a>:</p>\n<blockquote>\n<p><code>ring_nf</code> behaves like this if it can't make progress.</p>\n</blockquote>\n<p>Can you provide an example? I can't seems to reproduce this.</p>\n</blockquote>\n<p><a href=\"https://github.com/stanford-centaur/PyPantograph/issues/97\">https://github.com/stanford-centaur/PyPantograph/issues/97</a></p>\n</blockquote>\n<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/24529\">#24529</a></p>",
        "id": 515588512,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1746136447
    },
    {
        "content": "<p>Maybe DeepSeek-Prover V2 specifically learned through RL to generate <code>apply?</code> to flood messages with info messages to hide errors in preceding code. Since they are doing a recursive subgoal decomposition, it is possible that using <code>apply?</code> was the only way for the model to get unstuck.</p>",
        "id": 515588559,
        "sender_full_name": "Auguste Poiroux",
        "timestamp": 1746136472
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"321854\">Auguste Poiroux</span> <a href=\"#narrow/channel/219941-Machine-Learning-for-Theorem-Proving/topic/DeepSeek-Prover.20V2/near/515586956\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"631691\">Thomas Zhu</span> your hypothesis \"I suspect REPL will find that <code>example : False := by apply?</code> is wrong but won't find that <code>example : a very long untrue prop := by apply?</code> is wrong.\" is always true even in recent Lean versions. Sorry for the mix up, I added strikethrough to both my messages above. It seems that whenever we have a situation where we don't have the <code>sorry</code> squiggles in the IDE (i.e. no sorry message is raised), the same applies to the REPL</p>\n</blockquote>\n<p>That is very weird to me: the number 500 is <a href=\"https://github.com/microsoft/vscode/blob/3f0b857f7fd96e532df82c85614ebd08675bd8e4/src/vs/editor/common/services/markerDecorationsService.ts#L116\">hard-coded</a> by VS Code. (<a href=\"#narrow/channel/270676-lean4/topic/.23print.20axioms.20does.20not.20report.20sorry/near/515571523\">source</a>)</p>",
        "id": 515589946,
        "sender_full_name": "Thomas Zhu",
        "timestamp": 1746137165
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"321854\">@Auguste Poiroux</span> do you have an example of the \"very long untrue prop := by apply?\" that tricks REPL? Somehow I couldn't reproduce it</p>",
        "id": 515592319,
        "sender_full_name": "Thomas Zhu",
        "timestamp": 1746138403
    },
    {
        "content": "<p>O_O thanks for looking into this. This makes me dig into the REPL. So:</p>\n<ul>\n<li>it turns out that the REPL outputs all the messages.</li>\n<li>On the <code>algebra_amgm_prod1toneq1_sum1tongeqn</code> problem, the <code>declaration use sorry</code> message is in the list of the messages for Lean v4.18.0, but not for Lean v4.9.0.</li>\n</ul>\n<p>This may explain also why I was confused in my previous messages (it is also late where I am, so I am increasingly making more mistakes as well ^^)</p>",
        "id": 515592438,
        "sender_full_name": "Auguste Poiroux",
        "timestamp": 1746138465
    },
    {
        "content": "<p>So if I understand correctly, this is a bug in REPL v4.9.0 that was fixed before v4.18.0?</p>",
        "id": 515592619,
        "sender_full_name": "Thomas Zhu",
        "timestamp": 1746138573
    },
    {
        "content": "<p>And thanks for grounding my speculations by doing so many tests! There are many seemingly related issues here that aren't really related.</p>",
        "id": 515593167,
        "sender_full_name": "Thomas Zhu",
        "timestamp": 1746138845
    },
    {
        "content": "<p>Well, I don't think so. This surely complicates things, but I am using a <a href=\"https://github.com/augustepoiroux/repl/tree/v1.0.7\">backport</a> of the recent REPL in Lean v4.9.0. So the REPL code between v4.18.0 and v4.9.0 should be very similar.<br>\nBut maybe we should check with the original v4.9.0 of the REPL to make sure that we are not dealing with other issues on top of the original ones. (although it is likely that the issue will be the same since DeepSeek has the same undetected <code>apply?</code> issue)</p>",
        "id": 515593237,
        "sender_full_name": "Auguste Poiroux",
        "timestamp": 1746138898
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"631691\">Thomas Zhu</span> <a href=\"#narrow/channel/219941-Machine-Learning-for-Theorem-Proving/topic/DeepSeek-Prover.20V2/near/515593167\">said</a>:</p>\n<blockquote>\n<p>And thanks for grounding my speculations by doing so many tests! There are many seemingly related issues here that aren't really related.</p>\n</blockquote>\n<p>You speculate quite well, hopefully we can fix this issue soon <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 515593359,
        "sender_full_name": "Auguste Poiroux",
        "timestamp": 1746138963
    },
    {
        "content": "<p>there should be an option for setting which axioms you allow or disallow. I feel like having to manually parse for sorries is a bit sketchy</p>",
        "id": 515594352,
        "sender_full_name": "Frederick Pu",
        "timestamp": 1746139518
    },
    {
        "content": "<p>Indeed, I am just trying to understand what's happening about these sorry messages right now.<br>\nBut we should implement something rigorous for proof checking in the REPL.</p>",
        "id": 515594829,
        "sender_full_name": "Auguste Poiroux",
        "timestamp": 1746139779
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"321854\">Auguste Poiroux</span> <a href=\"#narrow/channel/219941-Machine-Learning-for-Theorem-Proving/topic/DeepSeek-Prover.20V2/near/515594829\">said</a>:</p>\n<blockquote>\n<p>Indeed, I am just trying to understand what's happening about these sorry messages right now.<br>\nBut we should implement something rigorous for proof checking in the REPL.</p>\n</blockquote>\n<p>Could this be a separate package for benchmarking / automated theorem proving? I was already considering writing this but have been working on other things. Perhaps we should create a new thread to discuss creating a rigorous proof checking system in the REPL.</p>",
        "id": 515595093,
        "sender_full_name": "Justin Asher",
        "timestamp": 1746139927
    },
    {
        "content": "<p>we have this kind of proof checking system in pantograph</p>",
        "id": 515602944,
        "sender_full_name": "Leni Aniva",
        "timestamp": 1746144654
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"599027\">Leni Aniva</span> <a href=\"#narrow/channel/219941-Machine-Learning-for-Theorem-Proving/topic/DeepSeek-Prover.20V2/near/515602944\">said</a>:</p>\n<blockquote>\n<p>we have this kind of proof checking system in pantograph</p>\n</blockquote>\n<p>Via sorry collection? E.g., <code>frontend.process</code></p>",
        "id": 515604732,
        "sender_full_name": "Justin Asher",
        "timestamp": 1746145681
    },
    {
        "content": "<p>Can you also check for axioms in pantograph? I am worried about LLMs cheating in more complicated, e.g., document based setups where they try to prove a theorem over many lines and declarations.</p>",
        "id": 515604983,
        "sender_full_name": "Justin Asher",
        "timestamp": 1746145807
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"780541\">Justin Asher</span> <a href=\"#narrow/channel/219941-Machine-Learning-for-Theorem-Proving/topic/DeepSeek-Prover.20V2/near/515604732\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"599027\">Leni Aniva</span> <a href=\"#narrow/channel/219941-Machine-Learning-for-Theorem-Proving/topic/DeepSeek-Prover.20V2/near/515602944\">said</a>:</p>\n<blockquote>\n<p>we have this kind of proof checking system in pantograph</p>\n</blockquote>\n<p>Via sorry collection? E.g., <code>frontend.process</code></p>\n</blockquote>\n<p>No. During proof search, tactics generating sorrys or unsafe definitions will be immediately rejected. At the end of a proof, if there are sorrys or unsafes the proof will be rejected as well.</p>",
        "id": 515608243,
        "sender_full_name": "Leni Aniva",
        "timestamp": 1746147103
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"780541\">Justin Asher</span> <a href=\"#narrow/channel/219941-Machine-Learning-for-Theorem-Proving/topic/DeepSeek-Prover.20V2/near/515604983\">said</a>:</p>\n<blockquote>\n<p>Can you also check for axioms in pantograph? I am worried about LLMs cheating in more complicated, e.g., document based setups where they try to prove a theorem over many lines and declarations.</p>\n</blockquote>\n<p>The way I intended is that unfiltered inputs should never go into <code>frontend.process</code>. All LLM interactions need to be done via <code>goal.{tactic,continue}</code> functions, where we have more control over the environment.</p>",
        "id": 515608337,
        "sender_full_name": "Leni Aniva",
        "timestamp": 1746147152
    },
    {
        "content": "<p>If the LLM can interact with frontend.process, it is inherently unsafe, and the model can cheat by adding new axioms</p>",
        "id": 515608395,
        "sender_full_name": "Leni Aniva",
        "timestamp": 1746147194
    },
    {
        "content": "<p>I downloaded the minif2f solution folder they released.</p>\n<p><a href=\"https://github.com/deepseek-ai/DeepSeek-Prover-V2\">https://github.com/deepseek-ai/DeepSeek-Prover-V2</a></p>\n<p>With a grep search, I found a single file containing the <code>apply?</code>.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">minif2f</span><span class=\"bp\">-</span><span class=\"n\">solutions</span><span class=\"w\"> </span><span class=\"bp\">%</span><span class=\"w\"> </span><span class=\"n\">rg</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">F</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">apply?'</span>\n<span class=\"n\">valid</span><span class=\"bp\">/</span><span class=\"n\">algebra_amgm_prod1toneq1_sum1tongeqn</span><span class=\"bp\">.</span><span class=\"n\">lean</span>\n<span class=\"mi\">23</span><span class=\"o\">:</span><span class=\"w\">        </span><span class=\"n\">apply?</span>\n<span class=\"n\">minif2f</span><span class=\"bp\">-</span><span class=\"n\">solutions</span><span class=\"w\"> </span><span class=\"bp\">%</span>\n</code></pre></div>\n<p>So I think it is not that bad for MiniF2F?</p>\n<p>The file <br>\n<code>minif2f-solutions/valid/algebra_amgm_prod1toneq1_sum1tongeqn.lean</code><br>\nlooks like this</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Aesop</span>\n\n<span class=\"kn\">set_option</span><span class=\"w\"> </span><span class=\"n\">maxHeartbeats</span><span class=\"w\"> </span><span class=\"mi\">0</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">BigOperators</span><span class=\"w\"> </span><span class=\"n\">Real</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"n\">Topology</span><span class=\"w\"> </span><span class=\"n\">Rat</span>\n\n<span class=\"sd\">/-- Show that for any real-valued function $a$ on the natural numbers such that $\\forall i \\in \\mathbb{N}, a_i \\geq 0$, if $prod_{i=0}^{n-1} a_i = 1$, then $sum_{i=0}^{n-1} a_i \\geq n$.-/</span>\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">algebra_amgm_prod1toneq1_sum1tongeqn</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">NNReal</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">h₀</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">prod</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">range</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">sum</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">range</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">≥</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">am_gm_inequality</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">NNReal</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">),</span>\n<span class=\"w\">    </span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">sum</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">range</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"bp\">≥</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">prod</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">range</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">step0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">NNReal</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">sum</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">range</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"bp\">≥</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">prod</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">range</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">      </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">m</span>\n<span class=\"w\">      </span><span class=\"c1\">-- (Removed to prevent data leakage...)</span>\n<span class=\"w\">      </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h₂</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">sum</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">range</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"bp\">≥</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">prod</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">range</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">        </span><span class=\"c1\">-- NOTE: The `apply?` line is here</span>\n<span class=\"w\">        </span><span class=\"n\">apply?</span>\n<span class=\"w\">      </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">h₂</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">step1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">NNReal</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">sum</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">range</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"bp\">≥</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">prod</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">range</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">      </span><span class=\"c1\">-- (Removed to prevent data leakage...)</span>\n</code></pre></div>",
        "id": 515612895,
        "sender_full_name": "Deming Xu",
        "timestamp": 1746149092
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"740877\">@Deming Xu</span> Yes, this is the one we extensively talked about above. The other solutions probably don't have this issue</p>",
        "id": 515613055,
        "sender_full_name": "Thomas Zhu",
        "timestamp": 1746149152
    },
    {
        "content": "<p>I’m unclear.  Has someone put all the miniF2F solutions through leanchecker?  Is this that only one which fails?</p>",
        "id": 515615175,
        "sender_full_name": "Jason Rute",
        "timestamp": 1746149716
    },
    {
        "content": "<p>Someone should definitely do that; I am saying other proofs don't have the <code>apply?</code> issue.</p>",
        "id": 515615317,
        "sender_full_name": "Thomas Zhu",
        "timestamp": 1746149750
    },
    {
        "content": "<p>I know.  Sorry I started a new topic.</p>",
        "id": 515615454,
        "sender_full_name": "Jason Rute",
        "timestamp": 1746149788
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">lean_proj</span><span class=\"w\"> </span><span class=\"bp\">%</span><span class=\"w\"> </span><span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"n\">env</span><span class=\"w\"> </span><span class=\"n\">lean</span><span class=\"w\"> </span><span class=\"bp\">./</span><span class=\"n\">LeanProj</span><span class=\"bp\">/</span><span class=\"n\">minif2f</span><span class=\"bp\">-</span><span class=\"n\">solutions</span><span class=\"bp\">/</span><span class=\"n\">valid</span><span class=\"bp\">/</span><span class=\"n\">algebra_amgm_prod1toneq1_sum1tongeqn</span><span class=\"bp\">.</span><span class=\"n\">lean</span>\n<span class=\"n\">warning</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Canonical</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">repository</span><span class=\"w\"> </span><span class=\"bp\">'././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">Canonical'</span><span class=\"w\"> </span><span class=\"n\">has</span><span class=\"w\"> </span><span class=\"kn\">local</span><span class=\"w\"> </span><span class=\"n\">changes</span>\n<span class=\"n\">Try</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">refine</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">NNReal</span><span class=\"bp\">.</span><span class=\"n\">le_div_iff'</span><span class=\"w\"> </span><span class=\"bp\">?_</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">mpr</span><span class=\"w\"> </span><span class=\"bp\">?_</span>\n<span class=\"n\">Try</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">refine</span><span class=\"w\"> </span><span class=\"n\">NNReal</span><span class=\"bp\">.</span><span class=\"n\">le_of_forall_lt_one_mul_le</span><span class=\"w\"> </span><span class=\"bp\">?_</span>\n<span class=\"n\">found</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">partial</span><span class=\"w\"> </span><span class=\"n\">proof</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">but</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">corresponding</span><span class=\"w\"> </span><span class=\"n\">tactic</span><span class=\"w\"> </span><span class=\"n\">failed</span><span class=\"o\">:</span>\n<span class=\"w\">  </span><span class=\"n\">refine</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">NNReal</span><span class=\"bp\">.</span><span class=\"n\">div_le_div_left</span><span class=\"w\"> </span><span class=\"bp\">?_</span><span class=\"w\"> </span><span class=\"bp\">?_</span><span class=\"w\"> </span><span class=\"bp\">?_</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">mp</span><span class=\"w\"> </span><span class=\"bp\">?_</span>\n<span class=\"n\">Try</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">refine</span><span class=\"w\"> </span><span class=\"n\">NNReal</span><span class=\"bp\">.</span><span class=\"n\">le_of_forall_pos_le_add</span><span class=\"w\"> </span><span class=\"bp\">?_</span>\n\n<span class=\"bp\">...</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">about</span><span class=\"w\"> </span><span class=\"mi\">800</span><span class=\"w\"> </span><span class=\"n\">lines</span><span class=\"o\">)</span>\n\n<span class=\"n\">Try</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">refine</span><span class=\"w\"> </span><span class=\"n\">WithUpperSet</span><span class=\"bp\">.</span><span class=\"n\">toUpperSet_specializes_toUpperSet</span><span class=\"bp\">.</span><span class=\"n\">mp</span><span class=\"w\"> </span><span class=\"bp\">?_</span>\n<span class=\"n\">Try</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">refine</span><span class=\"w\"> </span><span class=\"n\">WithUpperSet</span><span class=\"bp\">.</span><span class=\"n\">toUpperSet_le_iff</span><span class=\"bp\">.</span><span class=\"n\">mp</span><span class=\"w\"> </span><span class=\"bp\">?_</span>\n\n<span class=\"o\">(</span><span class=\"n\">Look</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">following</span><span class=\"w\"> </span><span class=\"n\">line</span><span class=\"bp\">.</span><span class=\"w\"> </span><span class=\"n\">It</span><span class=\"w\"> </span><span class=\"n\">mentions</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"gr\">sorry</span><span class=\"bp\">.</span><span class=\"o\">)</span>\n\n<span class=\"bp\">./</span><span class=\"n\">LeanProj</span><span class=\"bp\">/</span><span class=\"n\">minif2f</span><span class=\"bp\">-</span><span class=\"n\">solutions</span><span class=\"bp\">/</span><span class=\"n\">valid</span><span class=\"bp\">/</span><span class=\"n\">algebra_amgm_prod1toneq1_sum1tongeqn</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mi\">9</span><span class=\"o\">:</span><span class=\"mi\">8</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">warning</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">declaration</span><span class=\"w\"> </span><span class=\"n\">uses</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"gr\">sorry</span><span class=\"bp\">'</span>\n<span class=\"bp\">./</span><span class=\"n\">LeanProj</span><span class=\"bp\">/</span><span class=\"n\">minif2f</span><span class=\"bp\">-</span><span class=\"n\">solutions</span><span class=\"bp\">/</span><span class=\"n\">valid</span><span class=\"bp\">/</span><span class=\"n\">algebra_amgm_prod1toneq1_sum1tongeqn</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mi\">10</span><span class=\"o\">:</span><span class=\"mi\">3</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">warning</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">unused</span><span class=\"w\"> </span><span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"ss\">`h₀</span><span class=\"bp\">`</span>\n<span class=\"n\">note</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"n\">linter</span><span class=\"w\"> </span><span class=\"n\">can</span><span class=\"w\"> </span><span class=\"n\">be</span><span class=\"w\"> </span><span class=\"n\">disabled</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"ss\">`set_option</span><span class=\"w\"> </span><span class=\"n\">linter</span><span class=\"bp\">.</span><span class=\"n\">unusedVariables</span><span class=\"w\"> </span><span class=\"n\">false</span><span class=\"bp\">`</span>\n<span class=\"bp\">./</span><span class=\"n\">LeanProj</span><span class=\"bp\">/</span><span class=\"n\">minif2f</span><span class=\"bp\">-</span><span class=\"n\">solutions</span><span class=\"bp\">/</span><span class=\"n\">valid</span><span class=\"bp\">/</span><span class=\"n\">algebra_amgm_prod1toneq1_sum1tongeqn</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mi\">49</span><span class=\"o\">:</span><span class=\"mi\">8</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">warning</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"n\">tactic</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">never</span><span class=\"w\"> </span><span class=\"n\">executed</span>\n<span class=\"n\">note</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"n\">linter</span><span class=\"w\"> </span><span class=\"n\">can</span><span class=\"w\"> </span><span class=\"n\">be</span><span class=\"w\"> </span><span class=\"n\">disabled</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"ss\">`set_option</span><span class=\"w\"> </span><span class=\"n\">linter</span><span class=\"bp\">.</span><span class=\"n\">unreachableTactic</span><span class=\"w\"> </span><span class=\"n\">false</span><span class=\"bp\">`</span>\n<span class=\"bp\">./</span><span class=\"n\">LeanProj</span><span class=\"bp\">/</span><span class=\"n\">minif2f</span><span class=\"bp\">-</span><span class=\"n\">solutions</span><span class=\"bp\">/</span><span class=\"n\">valid</span><span class=\"bp\">/</span><span class=\"n\">algebra_amgm_prod1toneq1_sum1tongeqn</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mi\">50</span><span class=\"o\">:</span><span class=\"mi\">8</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">warning</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"n\">tactic</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">never</span><span class=\"w\"> </span><span class=\"n\">executed</span>\n<span class=\"n\">note</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"n\">linter</span><span class=\"w\"> </span><span class=\"n\">can</span><span class=\"w\"> </span><span class=\"n\">be</span><span class=\"w\"> </span><span class=\"n\">disabled</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"ss\">`set_option</span><span class=\"w\"> </span><span class=\"n\">linter</span><span class=\"bp\">.</span><span class=\"n\">unreachableTactic</span><span class=\"w\"> </span><span class=\"n\">false</span><span class=\"bp\">`</span>\n<span class=\"bp\">./</span><span class=\"n\">LeanProj</span><span class=\"bp\">/</span><span class=\"n\">minif2f</span><span class=\"bp\">-</span><span class=\"n\">solutions</span><span class=\"bp\">/</span><span class=\"n\">valid</span><span class=\"bp\">/</span><span class=\"n\">algebra_amgm_prod1toneq1_sum1tongeqn</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mi\">70</span><span class=\"o\">:</span><span class=\"mi\">10</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">warning</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"n\">tactic</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">never</span><span class=\"w\"> </span><span class=\"n\">executed</span>\n<span class=\"n\">note</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"n\">linter</span><span class=\"w\"> </span><span class=\"n\">can</span><span class=\"w\"> </span><span class=\"n\">be</span><span class=\"w\"> </span><span class=\"n\">disabled</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"ss\">`set_option</span><span class=\"w\"> </span><span class=\"n\">linter</span><span class=\"bp\">.</span><span class=\"n\">unreachableTactic</span><span class=\"w\"> </span><span class=\"n\">false</span><span class=\"bp\">`</span>\n<span class=\"bp\">./</span><span class=\"n\">LeanProj</span><span class=\"bp\">/</span><span class=\"n\">minif2f</span><span class=\"bp\">-</span><span class=\"n\">solutions</span><span class=\"bp\">/</span><span class=\"n\">valid</span><span class=\"bp\">/</span><span class=\"n\">algebra_amgm_prod1toneq1_sum1tongeqn</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mi\">71</span><span class=\"o\">:</span><span class=\"mi\">10</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">warning</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"n\">tactic</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">never</span><span class=\"w\"> </span><span class=\"n\">executed</span>\n<span class=\"n\">note</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"n\">linter</span><span class=\"w\"> </span><span class=\"n\">can</span><span class=\"w\"> </span><span class=\"n\">be</span><span class=\"w\"> </span><span class=\"n\">disabled</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"ss\">`set_option</span><span class=\"w\"> </span><span class=\"n\">linter</span><span class=\"bp\">.</span><span class=\"n\">unreachableTactic</span><span class=\"w\"> </span><span class=\"n\">false</span><span class=\"bp\">`</span>\n<span class=\"bp\">./</span><span class=\"n\">LeanProj</span><span class=\"bp\">/</span><span class=\"n\">minif2f</span><span class=\"bp\">-</span><span class=\"n\">solutions</span><span class=\"bp\">/</span><span class=\"n\">valid</span><span class=\"bp\">/</span><span class=\"n\">algebra_amgm_prod1toneq1_sum1tongeqn</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mi\">72</span><span class=\"o\">:</span><span class=\"mi\">10</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">warning</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"n\">tactic</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">never</span><span class=\"w\"> </span><span class=\"n\">executed</span>\n<span class=\"n\">note</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"n\">linter</span><span class=\"w\"> </span><span class=\"n\">can</span><span class=\"w\"> </span><span class=\"n\">be</span><span class=\"w\"> </span><span class=\"n\">disabled</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"ss\">`set_option</span><span class=\"w\"> </span><span class=\"n\">linter</span><span class=\"bp\">.</span><span class=\"n\">unreachableTactic</span><span class=\"w\"> </span><span class=\"n\">false</span><span class=\"bp\">`</span>\n<span class=\"bp\">./</span><span class=\"n\">LeanProj</span><span class=\"bp\">/</span><span class=\"n\">minif2f</span><span class=\"bp\">-</span><span class=\"n\">solutions</span><span class=\"bp\">/</span><span class=\"n\">valid</span><span class=\"bp\">/</span><span class=\"n\">algebra_amgm_prod1toneq1_sum1tongeqn</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mi\">89</span><span class=\"o\">:</span><span class=\"mi\">8</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">warning</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"n\">tactic</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">never</span><span class=\"w\"> </span><span class=\"n\">executed</span>\n<span class=\"n\">note</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"n\">linter</span><span class=\"w\"> </span><span class=\"n\">can</span><span class=\"w\"> </span><span class=\"n\">be</span><span class=\"w\"> </span><span class=\"n\">disabled</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"ss\">`set_option</span><span class=\"w\"> </span><span class=\"n\">linter</span><span class=\"bp\">.</span><span class=\"n\">unreachableTactic</span><span class=\"w\"> </span><span class=\"n\">false</span><span class=\"bp\">`</span>\n<span class=\"bp\">./</span><span class=\"n\">LeanProj</span><span class=\"bp\">/</span><span class=\"n\">minif2f</span><span class=\"bp\">-</span><span class=\"n\">solutions</span><span class=\"bp\">/</span><span class=\"n\">valid</span><span class=\"bp\">/</span><span class=\"n\">algebra_amgm_prod1toneq1_sum1tongeqn</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mi\">90</span><span class=\"o\">:</span><span class=\"mi\">8</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">warning</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"n\">tactic</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">never</span><span class=\"w\"> </span><span class=\"n\">executed</span>\n<span class=\"n\">note</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"n\">linter</span><span class=\"w\"> </span><span class=\"n\">can</span><span class=\"w\"> </span><span class=\"n\">be</span><span class=\"w\"> </span><span class=\"n\">disabled</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"ss\">`set_option</span><span class=\"w\"> </span><span class=\"n\">linter</span><span class=\"bp\">.</span><span class=\"n\">unreachableTactic</span><span class=\"w\"> </span><span class=\"n\">false</span><span class=\"bp\">`</span>\n<span class=\"bp\">./</span><span class=\"n\">LeanProj</span><span class=\"bp\">/</span><span class=\"n\">minif2f</span><span class=\"bp\">-</span><span class=\"n\">solutions</span><span class=\"bp\">/</span><span class=\"n\">valid</span><span class=\"bp\">/</span><span class=\"n\">algebra_amgm_prod1toneq1_sum1tongeqn</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mi\">49</span><span class=\"o\">:</span><span class=\"mi\">8</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">warning</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">norm_num</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">h₁</span><span class=\"w\"> </span><span class=\"n\">h₂</span><span class=\"w\"> </span><span class=\"n\">h₃</span><span class=\"w\"> </span><span class=\"n\">h₄</span><span class=\"w\"> </span><span class=\"n\">h₅'</span><span class=\"w\"> </span><span class=\"n\">tactic</span><span class=\"w\"> </span><span class=\"n\">does</span><span class=\"w\"> </span><span class=\"n\">nothing</span>\n<span class=\"n\">note</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"n\">linter</span><span class=\"w\"> </span><span class=\"n\">can</span><span class=\"w\"> </span><span class=\"n\">be</span><span class=\"w\"> </span><span class=\"n\">disabled</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"ss\">`set_option</span><span class=\"w\"> </span><span class=\"n\">linter</span><span class=\"bp\">.</span><span class=\"n\">unusedTactic</span><span class=\"w\"> </span><span class=\"n\">false</span><span class=\"bp\">`</span>\n<span class=\"bp\">./</span><span class=\"n\">LeanProj</span><span class=\"bp\">/</span><span class=\"n\">minif2f</span><span class=\"bp\">-</span><span class=\"n\">solutions</span><span class=\"bp\">/</span><span class=\"n\">valid</span><span class=\"bp\">/</span><span class=\"n\">algebra_amgm_prod1toneq1_sum1tongeqn</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mi\">50</span><span class=\"o\">:</span><span class=\"mi\">8</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">warning</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">linarith'</span><span class=\"w\"> </span><span class=\"n\">tactic</span><span class=\"w\"> </span><span class=\"n\">does</span><span class=\"w\"> </span><span class=\"n\">nothing</span>\n<span class=\"n\">note</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"n\">linter</span><span class=\"w\"> </span><span class=\"n\">can</span><span class=\"w\"> </span><span class=\"n\">be</span><span class=\"w\"> </span><span class=\"n\">disabled</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"ss\">`set_option</span><span class=\"w\"> </span><span class=\"n\">linter</span><span class=\"bp\">.</span><span class=\"n\">unusedTactic</span><span class=\"w\"> </span><span class=\"n\">false</span><span class=\"bp\">`</span>\n<span class=\"bp\">./</span><span class=\"n\">LeanProj</span><span class=\"bp\">/</span><span class=\"n\">minif2f</span><span class=\"bp\">-</span><span class=\"n\">solutions</span><span class=\"bp\">/</span><span class=\"n\">valid</span><span class=\"bp\">/</span><span class=\"n\">algebra_amgm_prod1toneq1_sum1tongeqn</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mi\">70</span><span class=\"o\">:</span><span class=\"mi\">10</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">warning</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">simp_all</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">h₀</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">geometric_mean_eq_one</span><span class=\"o\">]</span><span class=\"bp\">'</span><span class=\"w\"> </span><span class=\"n\">tactic</span><span class=\"w\"> </span><span class=\"n\">does</span><span class=\"w\"> </span><span class=\"n\">nothing</span>\n<span class=\"n\">note</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"n\">linter</span><span class=\"w\"> </span><span class=\"n\">can</span><span class=\"w\"> </span><span class=\"n\">be</span><span class=\"w\"> </span><span class=\"n\">disabled</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"ss\">`set_option</span><span class=\"w\"> </span><span class=\"n\">linter</span><span class=\"bp\">.</span><span class=\"n\">unusedTactic</span><span class=\"w\"> </span><span class=\"n\">false</span><span class=\"bp\">`</span>\n<span class=\"bp\">./</span><span class=\"n\">LeanProj</span><span class=\"bp\">/</span><span class=\"n\">minif2f</span><span class=\"bp\">-</span><span class=\"n\">solutions</span><span class=\"bp\">/</span><span class=\"n\">valid</span><span class=\"bp\">/</span><span class=\"n\">algebra_amgm_prod1toneq1_sum1tongeqn</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mi\">71</span><span class=\"o\">:</span><span class=\"mi\">10</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">warning</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">norm_num'</span><span class=\"w\"> </span><span class=\"n\">tactic</span><span class=\"w\"> </span><span class=\"n\">does</span><span class=\"w\"> </span><span class=\"n\">nothing</span>\n<span class=\"n\">note</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"n\">linter</span><span class=\"w\"> </span><span class=\"n\">can</span><span class=\"w\"> </span><span class=\"n\">be</span><span class=\"w\"> </span><span class=\"n\">disabled</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"ss\">`set_option</span><span class=\"w\"> </span><span class=\"n\">linter</span><span class=\"bp\">.</span><span class=\"n\">unusedTactic</span><span class=\"w\"> </span><span class=\"n\">false</span><span class=\"bp\">`</span>\n<span class=\"bp\">./</span><span class=\"n\">LeanProj</span><span class=\"bp\">/</span><span class=\"n\">minif2f</span><span class=\"bp\">-</span><span class=\"n\">solutions</span><span class=\"bp\">/</span><span class=\"n\">valid</span><span class=\"bp\">/</span><span class=\"n\">algebra_amgm_prod1toneq1_sum1tongeqn</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mi\">72</span><span class=\"o\">:</span><span class=\"mi\">10</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">warning</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">linarith'</span><span class=\"w\"> </span><span class=\"n\">tactic</span><span class=\"w\"> </span><span class=\"n\">does</span><span class=\"w\"> </span><span class=\"n\">nothing</span>\n<span class=\"n\">note</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"n\">linter</span><span class=\"w\"> </span><span class=\"n\">can</span><span class=\"w\"> </span><span class=\"n\">be</span><span class=\"w\"> </span><span class=\"n\">disabled</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"ss\">`set_option</span><span class=\"w\"> </span><span class=\"n\">linter</span><span class=\"bp\">.</span><span class=\"n\">unusedTactic</span><span class=\"w\"> </span><span class=\"n\">false</span><span class=\"bp\">`</span>\n<span class=\"bp\">./</span><span class=\"n\">LeanProj</span><span class=\"bp\">/</span><span class=\"n\">minif2f</span><span class=\"bp\">-</span><span class=\"n\">solutions</span><span class=\"bp\">/</span><span class=\"n\">valid</span><span class=\"bp\">/</span><span class=\"n\">algebra_amgm_prod1toneq1_sum1tongeqn</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mi\">89</span><span class=\"o\">:</span><span class=\"mi\">8</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">warning</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">norm_num</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">h₁</span><span class=\"w\"> </span><span class=\"n\">h₂</span><span class=\"w\"> </span><span class=\"n\">h₃</span><span class=\"w\"> </span><span class=\"n\">h₄</span><span class=\"w\"> </span><span class=\"n\">h₅</span><span class=\"w\"> </span><span class=\"n\">h₆</span><span class=\"w\"> </span><span class=\"n\">h₇</span><span class=\"w\"> </span><span class=\"n\">h₈</span><span class=\"w\"> </span><span class=\"n\">h₉</span><span class=\"w\"> </span><span class=\"n\">h₁₀</span><span class=\"w\"> </span><span class=\"n\">h₁₁</span><span class=\"w\"> </span><span class=\"n\">h₁₂'</span><span class=\"w\"> </span><span class=\"n\">tactic</span><span class=\"w\"> </span><span class=\"n\">does</span><span class=\"w\"> </span><span class=\"n\">nothing</span>\n<span class=\"n\">note</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"n\">linter</span><span class=\"w\"> </span><span class=\"n\">can</span><span class=\"w\"> </span><span class=\"n\">be</span><span class=\"w\"> </span><span class=\"n\">disabled</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"ss\">`set_option</span><span class=\"w\"> </span><span class=\"n\">linter</span><span class=\"bp\">.</span><span class=\"n\">unusedTactic</span><span class=\"w\"> </span><span class=\"n\">false</span><span class=\"bp\">`</span>\n<span class=\"bp\">./</span><span class=\"n\">LeanProj</span><span class=\"bp\">/</span><span class=\"n\">minif2f</span><span class=\"bp\">-</span><span class=\"n\">solutions</span><span class=\"bp\">/</span><span class=\"n\">valid</span><span class=\"bp\">/</span><span class=\"n\">algebra_amgm_prod1toneq1_sum1tongeqn</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mi\">90</span><span class=\"o\">:</span><span class=\"mi\">8</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">warning</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">nlinarith'</span><span class=\"w\"> </span><span class=\"n\">tactic</span><span class=\"w\"> </span><span class=\"n\">does</span><span class=\"w\"> </span><span class=\"n\">nothing</span>\n<span class=\"n\">note</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"n\">linter</span><span class=\"w\"> </span><span class=\"n\">can</span><span class=\"w\"> </span><span class=\"n\">be</span><span class=\"w\"> </span><span class=\"n\">disabled</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"ss\">`set_option</span><span class=\"w\"> </span><span class=\"n\">linter</span><span class=\"bp\">.</span><span class=\"n\">unusedTactic</span><span class=\"w\"> </span><span class=\"n\">false</span><span class=\"bp\">`</span>\n</code></pre></div>",
        "id": 515615972,
        "sender_full_name": "Deming Xu",
        "timestamp": 1746149912
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"115715\">Jason Rute</span> <a href=\"#narrow/stream/219941-Machine-Learning-for-Theorem-Proving/topic/DeepSeek-Prover.20V2/near/515615454\">said</a>:</p>\n<blockquote>\n<p>I know.  Sorry I started a new topic.</p>\n</blockquote>\n<p>No, it's definitely something that should be done in light of this error. Thanks for pointing out!</p>",
        "id": 515616201,
        "sender_full_name": "Thomas Zhu",
        "timestamp": 1746150005
    },
    {
        "content": "<p>I ran <code>lake env lean xxx.lean</code>.<br>\nThe <code>warning: declaration uses 'sorry'</code> is in the output</p>",
        "id": 515617187,
        "sender_full_name": "Deming Xu",
        "timestamp": 1746150369
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"740877\">@Deming Xu</span> I meant run all of the proofs in Lean (using whatever lean version they used), and moreover use leanchecker and check for axioms.</p>",
        "id": 515617741,
        "sender_full_name": "Jason Rute",
        "timestamp": 1746150619
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"740877\">@Deming Xu</span>  I notice the \"Canonical\" warning in your output; this probably means you are not using their Lean version of v4.9.0? And also you should use lean4checker instead of manually watching the warnings of lake env lean.</p>",
        "id": 515618203,
        "sender_full_name": "Thomas Zhu",
        "timestamp": 1746150836
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover/lean4checker\">https://github.com/leanprover/lean4checker</a></p>",
        "id": 515618754,
        "sender_full_name": "Jason Rute",
        "timestamp": 1746151031
    },
    {
        "content": "<p>I will try to run the check later. Thanks for your tips!</p>",
        "id": 515620350,
        "sender_full_name": "Deming Xu",
        "timestamp": 1746151449
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"115715\">Jason Rute</span> <a href=\"#narrow/channel/219941-Machine-Learning-for-Theorem-Proving/topic/DeepSeek-Prover.20V2/near/515617741\">said</a>:</p>\n<blockquote>\n<p>and moreover use leanchecker and check for axioms.</p>\n</blockquote>\n<p>I created <a class=\"message-link\" href=\"/#narrow/channel/270676-lean4/topic/Checking.20axioms.20with.20leanchecker/near/515616623\">#lean4 &gt; Checking axioms with leanchecker @ 💬</a>  regarding this</p>",
        "id": 515620556,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1746151520
    },
    {
        "content": "<p>I'll mention <a href=\"https://github.com/GasStationManager/SafeVerify\">https://github.com/GasStationManager/SafeVerify</a><br>\nwhich was mostly based on lean4checker, but additionally: throws error if axioms other than the standard ones are used.</p>",
        "id": 515623695,
        "sender_full_name": "GasStationManager",
        "timestamp": 1746153155
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"776090\">@GasStationManager</span> can you put the message to the separate thread Eric posted? Thanks!</p>",
        "id": 515623774,
        "sender_full_name": "Thomas Zhu",
        "timestamp": 1746153207
    }
]