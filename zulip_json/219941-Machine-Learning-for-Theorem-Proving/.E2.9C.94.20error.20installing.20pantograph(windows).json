[
    {
        "content": "<p>on windows, when i try to build the wheel for pantograph i get this:<br>\n\\&gt; cd C:\\Users\\jared\\AppData\\Roaming\\Roo-Code\\MCP\\PyPantograph; python -m poetry build -f wheel<br>\nBuild completed successfully.</p>\n<p>cannot import name 'BuildBackendException' from 'build' (C:\\Users\\jared\\AppData\\Roaming\\Roo-Code\\MCP\\PyPantograph\\build.py)<br>\nthere is still no wheel file in the directory</p>",
        "id": 513195192,
        "sender_full_name": "Jared green",
        "timestamp": 1745088179
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"394803\">Jared green</span> <a href=\"#narrow/channel/219941-Machine-Learning-for-Theorem-Proving/topic/error.20installing.20pantograph.28windows.29/near/513195192\">said</a>:</p>\n<blockquote>\n<p>on windows, when i try to build the wheel for pantograph i get this:<br>\n\\&gt; cd C:\\Users\\jared\\AppData\\Roaming\\Roo-Code\\MCP\\PyPantograph; python -m poetry build -f wheel<br>\nBuild completed successfully.</p>\n<p>cannot import name 'BuildBackendException' from 'build' (C:\\Users\\jared\\AppData\\Roaming\\Roo-Code\\MCP\\PyPantograph\\build.py)<br>\nthere is still no wheel file in the directory</p>\n</blockquote>\n<p>Seems like a windows only problem: <a href=\"https://github.com/gpongelli/pycode128/pull/12\">https://github.com/gpongelli/pycode128/pull/12</a></p>\n<p>However even if you could build it, PyP will not run on windows, because it uses pexpect and pexpect does not work on windows. I don't know what library I could use in place of pexpect</p>",
        "id": 513207022,
        "sender_full_name": "Leni Aniva",
        "timestamp": 1745098148
    },
    {
        "content": "<p>Depending on what you need, <code>pexpect</code> might work on Windows. There is a section about this in the <a href=\"https://pexpect.readthedocs.io/en/stable/overview.html#pexpect-on-windows\">doc</a>. Otherwise, there is <a href=\"https://docs.python.org/3/library/subprocess.html\">subprocess</a>, but it is a bit more manual.</p>",
        "id": 513210202,
        "sender_full_name": "Auguste Poiroux",
        "timestamp": 1745100839
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"321854\">Auguste Poiroux</span> <a href=\"#narrow/channel/219941-Machine-Learning-for-Theorem-Proving/topic/error.20installing.20pantograph.28windows.29/near/513210202\">said</a>:</p>\n<blockquote>\n<p>Depending on what you need, <code>pexpect</code> might work on Windows. There is a section about this in the <a href=\"https://pexpect.readthedocs.io/en/stable/overview.html#pexpect-on-windows\">doc</a>. Otherwise, there is <a href=\"https://docs.python.org/3/library/subprocess.html\">subprocess</a>, but it is a bit more manual.</p>\n</blockquote>\n<p>If there's a way to use subprocess asynchronously like what we have now I would switch to it</p>",
        "id": 513213345,
        "sender_full_name": "Leni Aniva",
        "timestamp": 1745103788
    },
    {
        "content": "<p>Not sure, bu this might be what you are looking for: <a href=\"https://docs.python.org/3/library/asyncio-subprocess.html\">https://docs.python.org/3/library/asyncio-subprocess.html</a></p>",
        "id": 513213734,
        "sender_full_name": "Auguste Poiroux",
        "timestamp": 1745104196
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"321854\">Auguste Poiroux</span> <a href=\"#narrow/channel/219941-Machine-Learning-for-Theorem-Proving/topic/error.20installing.20pantograph.28windows.29/near/513213734\">said</a>:</p>\n<blockquote>\n<p>Not sure, bu this might be what you are looking for: <a href=\"https://docs.python.org/3/library/asyncio-subprocess.html\">https://docs.python.org/3/library/asyncio-subprocess.html</a></p>\n</blockquote>\n<p>I remember this. It doesn't work because the communicate function closes stdin, and so we can only interact with the repl once</p>",
        "id": 513216539,
        "sender_full_name": "Leni Aniva",
        "timestamp": 1745107197
    },
    {
        "content": "<p>Does its stdout.readline() not do the trick? There is a warning about potential deadlocks but that seems like an inherent risk when splitting reads and writes</p>",
        "id": 513249157,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1745134498
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110024\">Sebastian Ullrich</span> <a href=\"#narrow/channel/219941-Machine-Learning-for-Theorem-Proving/topic/error.20installing.20pantograph.28windows.29/near/513249157\">said</a>:</p>\n<blockquote>\n<p>Does its stdout.readline() not do the trick? There is a warning about potential deadlocks but that seems like an inherent risk when splitting reads and writes</p>\n</blockquote>\n<p>how do I feed one line into stdin and then wait for the next line in stdout?</p>",
        "id": 513250384,
        "sender_full_name": "Leni Aniva",
        "timestamp": 1745135631
    },
    {
        "content": "<p>I would have assumed something like stdin.write, stdin.flush, stdout.readline. Am I missing an issue there?</p>",
        "id": 513252260,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1745137228
    },
    {
        "content": "<p>Something like this works: (sorry for the indentation ^^)</p>\n<div class=\"codehilite\" data-code-language=\"Python\"><pre><span></span><code>            <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">_proc</span><span class=\"o\">.</span><span class=\"n\">stdin</span><span class=\"o\">.</span><span class=\"n\">write</span><span class=\"p\">(</span><span class=\"n\">json_query</span> <span class=\"o\">+</span> <span class=\"s2\">\"</span><span class=\"se\">\\n\\n</span><span class=\"s2\">\"</span><span class=\"p\">)</span>\n            <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">_proc</span><span class=\"o\">.</span><span class=\"n\">stdin</span><span class=\"o\">.</span><span class=\"n\">flush</span><span class=\"p\">()</span>\n\n            <span class=\"n\">output</span><span class=\"p\">:</span> <span class=\"nb\">str</span> <span class=\"o\">=</span> <span class=\"s2\">\"\"</span>\n\n            <span class=\"k\">def</span><span class=\"w\"> </span><span class=\"nf\">reader</span><span class=\"p\">():</span>\n                <span class=\"c1\"># Read until delimiter \"\\n\\n\" or timeout</span>\n                <span class=\"k\">nonlocal</span> <span class=\"n\">output</span>\n                <span class=\"k\">assert</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">_proc</span> <span class=\"ow\">is</span> <span class=\"ow\">not</span> <span class=\"kc\">None</span> <span class=\"ow\">and</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">_proc</span><span class=\"o\">.</span><span class=\"n\">stdout</span> <span class=\"ow\">is</span> <span class=\"ow\">not</span> <span class=\"kc\">None</span>\n                <span class=\"k\">while</span> <span class=\"kc\">True</span><span class=\"p\">:</span>\n                    <span class=\"n\">line</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">_proc</span><span class=\"o\">.</span><span class=\"n\">stdout</span><span class=\"o\">.</span><span class=\"n\">readline</span><span class=\"p\">()</span>\n                    <span class=\"k\">if</span> <span class=\"ow\">not</span> <span class=\"n\">line</span><span class=\"p\">:</span>\n                        <span class=\"k\">break</span>  <span class=\"c1\"># EOF</span>\n                    <span class=\"n\">output</span> <span class=\"o\">+=</span> <span class=\"n\">line</span>\n                    <span class=\"k\">if</span> <span class=\"n\">output</span><span class=\"o\">.</span><span class=\"n\">endswith</span><span class=\"p\">(</span><span class=\"s2\">\"</span><span class=\"se\">\\n\\n</span><span class=\"s2\">\"</span><span class=\"p\">):</span>\n                        <span class=\"k\">break</span>\n\n            <span class=\"n\">t</span> <span class=\"o\">=</span> <span class=\"n\">threading</span><span class=\"o\">.</span><span class=\"n\">Thread</span><span class=\"p\">(</span><span class=\"n\">target</span><span class=\"o\">=</span><span class=\"n\">reader</span><span class=\"p\">)</span>\n            <span class=\"n\">t</span><span class=\"o\">.</span><span class=\"n\">start</span><span class=\"p\">()</span>\n            <span class=\"n\">t</span><span class=\"o\">.</span><span class=\"n\">join</span><span class=\"p\">(</span><span class=\"n\">timeout</span><span class=\"p\">)</span>\n            <span class=\"k\">if</span> <span class=\"n\">t</span><span class=\"o\">.</span><span class=\"n\">is_alive</span><span class=\"p\">():</span>\n                <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">kill</span><span class=\"p\">()</span>\n                <span class=\"k\">raise</span> <span class=\"ne\">TimeoutError</span><span class=\"p\">(</span><span class=\"sa\">f</span><span class=\"s2\">\"The Lean server did not respond in time (</span><span class=\"si\">{</span><span class=\"n\">timeout</span><span class=\"si\">=}</span><span class=\"s2\">) and is now killed.\"</span><span class=\"p\">)</span>\n            <span class=\"k\">return</span> <span class=\"n\">output</span>\n</code></pre></div>\n<p>And I am using the following to initialize the subprocess:</p>\n<div class=\"codehilite\" data-code-language=\"Python\"><pre><span></span><code><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">_proc</span> <span class=\"o\">=</span> <span class=\"n\">subprocess</span><span class=\"o\">.</span><span class=\"n\">Popen</span><span class=\"p\">(</span>\n            <span class=\"p\">[</span><span class=\"s2\">\"lake\"</span><span class=\"p\">,</span> <span class=\"s2\">\"env\"</span><span class=\"p\">,</span> <span class=\"n\">os</span><span class=\"o\">.</span><span class=\"n\">path</span><span class=\"o\">.</span><span class=\"n\">join</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">config</span><span class=\"o\">.</span><span class=\"n\">_cache_repl_dir</span><span class=\"p\">,</span> <span class=\"s2\">\".lake\"</span><span class=\"p\">,</span> <span class=\"s2\">\"build\"</span><span class=\"p\">,</span> <span class=\"s2\">\"bin\"</span><span class=\"p\">,</span> <span class=\"s2\">\"repl\"</span><span class=\"p\">)],</span>\n            <span class=\"n\">cwd</span><span class=\"o\">=</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">config</span><span class=\"o\">.</span><span class=\"n\">working_dir</span><span class=\"p\">,</span>\n            <span class=\"n\">stdin</span><span class=\"o\">=</span><span class=\"n\">subprocess</span><span class=\"o\">.</span><span class=\"n\">PIPE</span><span class=\"p\">,</span>\n            <span class=\"n\">stdout</span><span class=\"o\">=</span><span class=\"n\">subprocess</span><span class=\"o\">.</span><span class=\"n\">PIPE</span><span class=\"p\">,</span>\n            <span class=\"n\">stderr</span><span class=\"o\">=</span><span class=\"n\">subprocess</span><span class=\"o\">.</span><span class=\"n\">PIPE</span><span class=\"p\">,</span>\n            <span class=\"n\">encoding</span><span class=\"o\">=</span><span class=\"s2\">\"utf-8\"</span><span class=\"p\">,</span>\n            <span class=\"n\">text</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">,</span>\n            <span class=\"n\">bufsize</span><span class=\"o\">=</span><span class=\"mi\">1</span><span class=\"p\">,</span>\n            <span class=\"n\">preexec_fn</span><span class=\"o\">=</span><span class=\"kc\">None</span>\n            <span class=\"k\">if</span> <span class=\"n\">platform</span><span class=\"o\">.</span><span class=\"n\">system</span><span class=\"p\">()</span> <span class=\"o\">==</span> <span class=\"s2\">\"Windows\"</span>\n            <span class=\"k\">else</span> <span class=\"k\">lambda</span><span class=\"p\">:</span> <span class=\"n\">_limit_memory</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">config</span><span class=\"o\">.</span><span class=\"n\">memory_hard_limit_mb</span><span class=\"p\">),</span>\n        <span class=\"p\">)</span>\n</code></pre></div>",
        "id": 513258889,
        "sender_full_name": "Auguste Poiroux",
        "timestamp": 1745143075
    },
    {
        "content": "<p>so what do i do?</p>",
        "id": 513281127,
        "sender_full_name": "Jared green",
        "timestamp": 1745160925
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"394803\">Jared green</span> <a href=\"#narrow/channel/219941-Machine-Learning-for-Theorem-Proving/topic/error.20installing.20pantograph.28windows.29/near/513281127\">said</a>:</p>\n<blockquote>\n<p>so what do i do?</p>\n</blockquote>\n<p>As is there's no way to run PyPantograph on windows, unless we can remove the pexpect dependency.</p>",
        "id": 513286571,
        "sender_full_name": "Leni Aniva",
        "timestamp": 1745165183
    },
    {
        "content": "<p>im still getting the same error</p>",
        "id": 513297673,
        "sender_full_name": "Jared green",
        "timestamp": 1745175473
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"394803\">Jared green</span> <a href=\"#narrow/channel/219941-Machine-Learning-for-Theorem-Proving/topic/error.20installing.20pantograph.28windows.29/near/513297673\">said</a>:</p>\n<blockquote>\n<p>im still getting the same error</p>\n</blockquote>\n<p>that's related to the poetry bug on windows that I mentioned above</p>",
        "id": 513301154,
        "sender_full_name": "Leni Aniva",
        "timestamp": 1745178249
    },
    {
        "content": "<p>new error:<br>\n\\&gt;  python -m poetry build -f wheel<br>\nBuilding pantograph (0.3.0)<br>\nBuilding wheel</p>\n<p>Can't instantiate abstract class IsolatedEnv with abstract methods executable, scripts_dir</p>",
        "id": 513314286,
        "sender_full_name": "Jared green",
        "timestamp": 1745189552
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"394803\">Jared green</span> <a href=\"#narrow/channel/219941-Machine-Learning-for-Theorem-Proving/topic/error.20installing.20pantograph.28windows.29/near/513314286\">said</a>:</p>\n<blockquote>\n<p>new error:<br>\n\\&gt;  python -m poetry build -f wheel<br>\nBuilding pantograph (0.3.0)<br>\nBuilding wheel</p>\n<p>Can't instantiate abstract class IsolatedEnv with abstract methods executable, scripts_dir</p>\n</blockquote>\n<p>I don't know what is going on with poetry on windows. Maybe a windows user can tell you and me how to fix it</p>",
        "id": 513315225,
        "sender_full_name": "Leni Aniva",
        "timestamp": 1745190527
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"394803\">@Jared green</span> Given the build issues you're encountering on Windows (<code>ImportError</code> then <code>IsolatedEnv</code>) and the separate, fundamental problem that PyPantograph uses <code>pexpect</code> (which has limited functionality on Windows), have you considered trying to build and run it using the Windows Subsystem for Linux (WSL)? You can try creating a Conda environment, if you really want to isolate everything.</p>",
        "id": 513315946,
        "sender_full_name": "Justin Asher",
        "timestamp": 1745191366
    },
    {
        "content": "<p>i would rather not use wsl. not that there is anything wrong with wsl, but it would be nice if all the software i need would just build on every device i use as is.</p>",
        "id": 513316310,
        "sender_full_name": "Jared green",
        "timestamp": 1745191795
    },
    {
        "content": "<p>so whats that about using a conda environment?</p>",
        "id": 513316413,
        "sender_full_name": "Jared green",
        "timestamp": 1745191877
    },
    {
        "content": "<p>also, looking on stackoverflow, this other problem is caused by the absence of the required abstract methods(its a confusing message) executable, scripts_dir</p>",
        "id": 513316633,
        "sender_full_name": "Jared green",
        "timestamp": 1745192143
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"394803\">Jared green</span> <a href=\"#narrow/channel/219941-Machine-Learning-for-Theorem-Proving/topic/error.20installing.20pantograph.28windows.29/near/513316310\">said</a>:</p>\n<blockquote>\n<p>i would rather not use wsl. not that there is anything wrong with wsl, but it would be nice if all the software i need would just build on every device i use as is.</p>\n</blockquote>\n<p>Ah, I see you are more worried about it building on Windows than whether you can run Pantograph on Windows, even if it is through WSL. That's fair.</p>",
        "id": 513318571,
        "sender_full_name": "Justin Asher",
        "timestamp": 1745194062
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"780541\">Justin Asher</span> <a href=\"#narrow/channel/219941-Machine-Learning-for-Theorem-Proving/topic/error.20installing.20pantograph.28windows.29/near/513315946\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"394803\">Jared green</span> Given the build issues you're encountering on Windows (<code>ImportError</code> then <code>IsolatedEnv</code>) and the separate, fundamental problem that PyPantograph uses <code>pexpect</code> (which has limited functionality on Windows), have you considered trying to build and run it using the Windows Subsystem for Linux (WSL)? You can try creating a Conda environment, if you really want to isolate everything.</p>\n</blockquote>\n<p>I deleted pexpect from pantograph. the build problems are because of poetry</p>",
        "id": 513329339,
        "sender_full_name": "Leni Aniva",
        "timestamp": 1745202341
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"599027\">@Leni Aniva</span> I was able to successfully build Pantograph on my Windows machine! Hopefully I can help. Poetry should not be causing a problem on Windows.</p>\n<p><span class=\"user-mention\" data-user-id=\"394803\">@Jared green</span> This suggests the build error you're seeing might be related to your specific environment setup, as the build completed successfully for me. Here are the details of my working setup:</p>\n<ul>\n<li><strong>Operating System:</strong> Microsoft Windows 11 Pro (Build 22631)</li>\n<li><strong>Python:</strong> 3.12.10</li>\n<li><strong>Poetry:</strong> 2.1.2</li>\n<li><strong>pip:</strong> 25.0</li>\n<li><strong>virtualenv:</strong> 20.30.0</li>\n<li><strong>setuptools:</strong> 75.1.0</li>\n<li><strong>wheel:</strong> <em>Note: <code>pip show wheel</code> didn't find this installed in my main Python environment, but the build still worked fine. This is likely because Poetry installs necessary build tools like <code>wheel</code> into a temporary, isolated environment when it runs the build process.</em></li>\n</ul>\n<p><strong>Checking Your Versions:</strong></p>\n<p>You should compare these versions to your own setup. You can check yours by running these commands in your terminal (Command Prompt or PowerShell):</p>\n<ul>\n<li>For <strong>OS Version</strong>:<br>\n    * PowerShell: <code>Get-ComputerInfo | Select-Object OsName, OsVersion</code><br>\n    * CMD: <code>systeminfo | findstr /B /C:\"OS Name\" /C:\"OS Version\"</code></li>\n<li>For <strong>Python Version</strong>: <code>python --version</code></li>\n<li>For <strong>Poetry Version</strong>: <code>poetry --version</code></li>\n<li>For <strong>pip Version</strong>: <code>python -m pip --version</code></li>\n<li>For <strong>virtualenv Version</strong>: <code>python -m pip show virtualenv</code> (check the <code>Version:</code> line)</li>\n<li>For <strong>setuptools Version</strong>: <code>python -m pip show setuptools</code> (check the <code>Version:</code> line)</li>\n<li>For <strong>wheel Version</strong>: <code>python -m pip show wheel</code> (check the <code>Version:</code> line)</li>\n</ul>\n<p><strong>Updating Your Tools (If Necessary):</strong></p>\n<p>If your versions (especially for <strong>Python</strong>, <strong>Poetry</strong>, and <strong>virtualenv</strong>) are older than mine, updating them is the most likely way to fix the build error. You can update using commands like these:</p>\n<ol>\n<li><strong>Update Core Packaging Tools:</strong> Run <code>python -m pip install --upgrade pip virtualenv setuptools wheel</code>.</li>\n<li><strong>Update Poetry:</strong> The specific command depends on how you originally installed Poetry. If you used the <strong>official installer script</strong>, run <code>poetry self update</code>. If you installed Poetry <strong>via pip</strong>, run <code>pip install --upgrade poetry</code> (or <code>python -m pip install --upgrade poetry</code>). If you installed Poetry <strong>via pipx</strong>, run <code>pipx upgrade poetry</code>.</li>\n</ol>\n<p>After checking and potentially updating your tools, try running the build command again: <code>python -m poetry build -f wheel</code> from inside the project directory.</p>\n<p>Hopefully, aligning your environment helps resolve the issue!</p>",
        "id": 513423671,
        "sender_full_name": "Justin Asher",
        "timestamp": 1745250681
    },
    {
        "content": "<p>what is the line to get the version number for poetry if it was installed via pip?</p>",
        "id": 513435798,
        "sender_full_name": "Jared green",
        "timestamp": 1745254836
    },
    {
        "content": "<p><code>poetry --version</code> or <code>pip show poetry</code>.</p>",
        "id": 513437354,
        "sender_full_name": "Justin Asher",
        "timestamp": 1745255428
    },
    {
        "content": "<p>and to get the latest python?</p>",
        "id": 513438264,
        "sender_full_name": "Jared green",
        "timestamp": 1745255803
    },
    {
        "content": "<p>Surely you can just Google this?</p>",
        "id": 513444372,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1745258270
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"599027\">Leni Aniva</span> has marked this topic as resolved.</p>",
        "id": 513755420,
        "sender_full_name": "Notification Bot",
        "timestamp": 1745371899
    }
]