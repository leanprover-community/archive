[
    {
        "content": "<p>Hi all <span aria-label=\"wave\" class=\"emoji emoji-1f44b\" role=\"img\" title=\"wave\">:wave:</span></p>\n<p>I've recently started with Lean based on talks with Floris and have just published my first draft PR: <a href=\"https://github.com/fpvandoorn/carleson/pull/261\">https://github.com/fpvandoorn/carleson/pull/261</a><br>\nI'm looking forward to being part of this community! Please feel free to suggest/improve/correct/whatever.</p>\n<p>There are some suggestions in my PR which I think should be discussed a bit more freely and/or more detailed than Github comments, which is what this channel is for.</p>\n<p>In particular, I think there are some topics that warrant discussion before diving into Chapter 10 with multiple people. I am aware that most of the current activity is in Chapter 7 but it seems that that is progressing nicely and maybe soon, others want to take a shot at Chapter 10 as well.</p>",
        "id": 505456963,
        "sender_full_name": "Jasper Mulder-Sohn",
        "timestamp": 1741880345
    },
    {
        "content": "<blockquote>\n<p>I used <code>mul_le_mul</code> a lot but it seems that in NNReal/ENNReal it can be simplified to avoid <code>case c0 | b0</code> (e.g. L349 is typical)</p>\n</blockquote>\n<p>(doing a guess, maybe you need <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=ENNReal.mul_le_mul_left#doc\">docs#ENNReal.mul_le_mul_left</a> and variants?)</p>\n<p>If not, could you elaborate what you mean here? it's a bit hard to figure out exactly what situation you're talking about, since i can't read the goal state from the PR diff.<br>\n(a <a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a> can be nice)</p>",
        "id": 505471429,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1741883753
    },
    {
        "content": "<p>(or maybe you want <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=mul_le_mul%27#doc\">docs#mul_le_mul'</a> , actually)</p>",
        "id": 505472149,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1741883937
    },
    {
        "content": "<p>also, if you feel like looking up these kinds of lemmas is prone to missing them, try the <code>gcongr</code> tactic occasionally</p>",
        "id": 505472486,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1741884024
    },
    {
        "content": "<p>Thanks for your suggestions. I will work on a mwe to showcase the issues. In the meantime: e.g. <code>mul_le_mul_left</code> is bidirectional and I only need the 'easy' direction for which <code>a \\ne 0</code> and <code>a \\ne \\top</code> are not necessary. And <code>mul_le_mul'</code> requires MulRightMono which ENNReal doesn't have. So <code>mul_le_mul</code> was the move of least resistance I found.</p>",
        "id": 505473621,
        "sender_full_name": "Jasper Mulder-Sohn",
        "timestamp": 1741884319
    },
    {
        "content": "<p>i think it does have <code>MulRightMono</code>?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Data</span><span class=\"bp\">.</span><span class=\"n\">ENNReal</span><span class=\"bp\">.</span><span class=\"n\">Basic</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Order</span><span class=\"bp\">.</span><span class=\"n\">CompletePartialOrder</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">ENNReal</span>\n\n<span class=\"sd\">/-- info: covariant_swap_mul_of_covariant_mul ℝ≥0∞ fun x1 x2 =&gt; x1 ≤ x2 -/</span>\n<span class=\"bp\">#</span><span class=\"n\">guard_msgs</span><span class=\"w\"> </span><span class=\"k\">in</span>\n<span class=\"bp\">#</span><span class=\"n\">synth</span><span class=\"w\"> </span><span class=\"n\">MulRightMono</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"bp\">≥</span><span class=\"mi\">0</span><span class=\"bp\">∞</span>\n</code></pre></div>",
        "id": 505475570,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1741884835
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"684366\">Edward van de Meent</span> <a href=\"#narrow/channel/442935-Carleson/topic/Lemma.2010.2E1.2E2.20and.20Chapter.2010/near/505475570\">said</a>:</p>\n<blockquote>\n<p>i think it does have <code>MulRightMono</code>?</p>\n</blockquote>\n<p>You are right, I messed up. That saved ~20 lines. Thanks!</p>",
        "id": 505495893,
        "sender_full_name": "Jasper Mulder-Sohn",
        "timestamp": 1741890196
    },
    {
        "content": "<p>Welcome to this Zulip! I responded in your PR.<br>\nFor others: Jasper is a college friend of mine, that started playing with Lean recently <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 505527969,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1741900752
    },
    {
        "content": "<p>Question on approach to generality: For 10.1.2. I have to prove:</p>\n<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mo stretchy=\"false\">{</mo><mi>y</mi><mi mathvariant=\"normal\">∣</mi><mtext>dist</mtext><mo stretchy=\"false\">(</mo><mi>x</mi><mo separator=\"true\">,</mo><mi>y</mi><mo stretchy=\"false\">)</mo><mo>≥</mo><mn>2</mn><mi>r</mi><mo stretchy=\"false\">}</mo><mo>=</mo><munder><mo>⋃</mo><mrow><mi>i</mi><mo>∈</mo><mi mathvariant=\"double-struck\">N</mi></mrow></munder><mo stretchy=\"false\">{</mo><mi>y</mi><mi mathvariant=\"normal\">∣</mi><msup><mn>2</mn><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msup><mi>r</mi><mo>≤</mo><mtext>dist</mtext><mo stretchy=\"false\">(</mo><mi>x</mi><mo separator=\"true\">,</mo><mi>y</mi><mo stretchy=\"false\">)</mo><mo>&lt;</mo><msup><mn>2</mn><mrow><mi>i</mi><mo>+</mo><mn>2</mn></mrow></msup><mi>r</mi><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">\\{ y | \\text{dist}(x, y) \\ge 2r\\} = \\bigcup_{i \\in \\N} \\{ y | 2^{i+1}r \\le \\text{dist}(x, y) &lt; 2^{i+2}r \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mord\">∣</span><span class=\"mord text\"><span class=\"mord\">dist</span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">≥</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">2</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mclose\">}</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.3756em;vertical-align:-1.3256em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.05em;\"><span style=\"top:-1.8518em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mrel mtight\">∈</span><span class=\"mord mathbb mtight\">N</span></span></span></span><span style=\"top:-3.05em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">⋃</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3256em;\"><span></span></span></span></span></span><span class=\"mopen\">{</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mord\">∣</span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8747em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mbin mtight\">+</span><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord text\"><span class=\"mord\">dist</span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.1247em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8747em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mbin mtight\">+</span><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mclose\">}</span></span></span></span></span></p>\n<p>I.e. the complement of a ball written as a union of annuli.<br>\nI was thinking this can be proved for any sequence tending to infinity (monotone is not necessary, the 'descending' annuli are empty). Moreover I was thinking that it probably should first be done for intervals so that annuli is a direct consequence.<br>\nWould this make sense for Mathlib or is it too specific? Do we also want pairwise disjointness there (for monotone sequences) or not?</p>\n<p>And if it makes sense to do this more general, where would I best put these results? In <code>Annulus.lean</code> and <code>Interval.lean</code> respectively?</p>",
        "id": 506398730,
        "sender_full_name": "Jasper Mulder-Sohn",
        "timestamp": 1742280093
    },
    {
        "content": "<p>Of course it would be great to write lemmas in great generality and put them in <code>ToMathlib</code>, with the intention to upstream them. </p>\n<p>Such lemmas for intervals are definitely not too specific for Mathlib. What you want is similar to <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Monotone.biUnion_Ico_Ioc_map_succ#doc\">docs#Monotone.biUnion_Ico_Ioc_map_succ</a> and <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Set.iUnion_Ioc_eq_Ioi_self_iff#doc\">docs#Set.iUnion_Ioc_eq_Ioi_self_iff</a>, but those are not quite the version you want.<br>\nPairwise disjointness also makes sense. In fact, we already have such lemmas for a few specific functions.</p>",
        "id": 506456066,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1742298114
    },
    {
        "content": "<p>Note, I found these using (variants of):</p>",
        "id": 506456136,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1742298125
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"644391\">@loogle</span> ⋃ _, _, Set.Ioi</p>",
        "id": 506456195,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1742298134
    },
    {
        "content": "<p><span aria-label=\"search\" class=\"emoji emoji-1f50d\" role=\"img\" title=\"search\">:search:</span> <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Order/Interval/Set/Disjoint.html#Set.iUnion_Ioc_right\">Set.iUnion_Ioc_right</a>, <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Order/Interval/Set/Disjoint.html#Set.iUnion_Ioi\">Set.iUnion_Ioi</a>, and <a href=\"https://loogle.lean-lang.org/?q=%E2%8B%83%20_%2C%20_%2C%20Set.Ioi\">13 more</a></p>",
        "id": 506456200,
        "sender_full_name": "loogle",
        "timestamp": 1742298134
    },
    {
        "content": "<p>and <br>\n<span class=\"user-mention\" data-user-id=\"644391\">@loogle</span> Disjoint, Set.Ioc<br>\nfor specific instances of the pairwise disjointnesses.</p>",
        "id": 506456309,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1742298162
    },
    {
        "content": "<p><span aria-label=\"search\" class=\"emoji emoji-1f50d\" role=\"img\" title=\"search\">:search:</span> <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Algebra/Order/Interval/Set/Group.html#Set.pairwise_disjoint_Ioc_zpow\">Set.pairwise_disjoint_Ioc_zpow</a>, <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Algebra/Order/Interval/Set/Group.html#Set.pairwise_disjoint_Ioc_zsmul\">Set.pairwise_disjoint_Ioc_zsmul</a>, and <a href=\"https://loogle.lean-lang.org/?q=Disjoint%2C%20Set.Ioc\">15 more</a></p>",
        "id": 506456312,
        "sender_full_name": "loogle",
        "timestamp": 1742298162
    },
    {
        "content": "<p>Ok so I managed to get the generic results I need. But now actually the challenge is to show that we are in the case <code>¬BddAbove (range fun i ↦ 2 ^ (i + 1) * r)</code>.</p>\n<p>I did the searches I could, but I conclude that I must be missing some Mathlib lingo/knowledge that expresses sequences tending to infinity or similar. <code>BddAbove</code> and <code>upperBounds</code> definitely didn't bring me to the place I need to be. I did find stuff like <code>Real.range_log</code> but it didn't help me get further.</p>\n<p>Help appreciated!</p>",
        "id": 508781977,
        "sender_full_name": "Jasper Mulder-Sohn",
        "timestamp": 1743175400
    },
    {
        "content": "<p>Maybe <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Filter.unbounded_of_tendsto_atTop#doc\">docs#Filter.unbounded_of_tendsto_atTop</a> ?</p>",
        "id": 508783813,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1743175831
    },
    {
        "content": "<p>(as an aside, can't the domain filter in that lemma be generalized to any <code>NeBot</code> filter?)</p>",
        "id": 508785981,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1743176406
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"111080\">Floris van Doorn</span> <a href=\"#narrow/channel/442935-Carleson/topic/Lemma.2010.2E1.2E2.20and.20Chapter.2010/near/508785981\">said</a>:</p>\n<blockquote>\n<p>(as an aside, can't the domain filter in that lemma be generalized to any <code>NeBot</code> filter?)</p>\n</blockquote>\n<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/23531\">#23531</a></p>",
        "id": 509417589,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1743504417
    },
    {
        "content": "<p>Thanks to your suggestion I managed to clean up the <code>rw_dom</code> situation with <code>BddAbove</code>. Compare <a href=\"https://github.com/fpvandoorn/carleson/pull/261\">https://github.com/fpvandoorn/carleson/pull/261</a> for latest status.</p>\n<p>Now remain <code>czoperator_welldefined</code> and <code>Measurable (vol x)</code>.<br>\nI have noticed that it takes quite some work to keep the PR up to date with the master branch, so if at all possible it'd be great if we could agree on some general results to be in a stated-but-sorried form.<br>\nMy current thoughts are:</p>\n<ul>\n<li>For <code>Measurable (vol x)</code> I have another branch lined up but the formalization eludes me, so I'd like to keep that out of the 10.1.2 PR</li>\n<li>For <code>czoperator_welldefined</code> I think there is reusable value in the statement that <code>K x y * g y</code> is a.e. bounded in <code>(ball x r)ᶜ</code> (or maybe <code>K x y</code> only)</li>\n</ul>\n<p>I'm having trouble finding results on \"a.e. bounded\" in Mathlib. Depending on if that is me or if they aren't there, I would include or exclude the second bullet from my PR.</p>\n<p>Advice on how to proceed, and a review on the rest of the PR, would be greatly appreciated. (I'll rebase onto master shortly for reviewing convenience.)</p>",
        "id": 510513307,
        "sender_full_name": "Jasper Mulder-Sohn",
        "timestamp": 1743968225
    },
    {
        "content": "<p>I'm happy to merge partial work, even if it has sorry's. If it passes CI, I can merge it if you indicate that you'd like that. </p>\n<p>I guess that \"f is a.e. bounded on s\" should be written as MemLp (s.indicator f) \\top.</p>",
        "id": 510527832,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1743979853
    },
    {
        "content": "<p>I'll review your PR, but it will take a few days.</p>",
        "id": 510529213,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1743981054
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"888530\">Jasper Mulder-Sohn</span> has marked this topic as resolved.</p>",
        "id": 514816735,
        "sender_full_name": "Notification Bot",
        "timestamp": 1745847460
    }
]