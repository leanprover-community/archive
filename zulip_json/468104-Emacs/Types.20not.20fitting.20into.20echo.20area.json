[
    {
        "content": "<p>I think I have lean working in emacs. One thing I have a problem with is that if I hover over an identifier then there is <em>no</em> pop up showing the type like there is in VS but there is something in the echo area. But sadly the echo area is not big enough to contain the type. I have tried various incantations to expand the echo area but to no avail.</p>\n<p>Is this a known problem? And is there a known solution?</p>",
        "id": 483943139,
        "sender_full_name": "Dominic Steinitz",
        "timestamp": 1732291870
    },
    {
        "content": "<p>I think everything printed in the echo area (minibuffer) ends up in the <code>*Messages*</code> buffer</p>",
        "id": 483945209,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1732292453
    },
    {
        "content": "<p>But maybe you'll get a more VS Code-like experience if you add <code>(use-package lsp-ui)</code> to your config file (but I don't use this package so I'm not sure)</p>",
        "id": 483945397,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1732292509
    },
    {
        "content": "<p>That's what I though (the echo area ending up in the <code>*Messages*</code> buffer) but that is not happening so either my installation is somehow borked or maybe it is up to the package to decide which output goes where.</p>",
        "id": 483959799,
        "sender_full_name": "Dominic Steinitz",
        "timestamp": 1732297238
    },
    {
        "content": "<p>But I do see this when I open a .lean file</p>\n<p>LSP :: Unable to autoconfigure company-mode. [2 times]<br>\nLSP :: Connected to [lean4-lsp:1398 /Users/dom/Dropbox/Tidy/DifferentialGeometry/TestLean].</p>",
        "id": 483961208,
        "sender_full_name": "Dominic Steinitz",
        "timestamp": 1732297683
    },
    {
        "content": "<p>What are the lean and lsp-related lines in your config file?</p>",
        "id": 483964901,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1732298921
    },
    {
        "content": "<p>I am not sure what you mean by config file - .emacs?</p>\n<div class=\"codehilite\" data-code-language=\"EmacsLisp\"><pre><span></span><code><span class=\"p\">(</span><span class=\"nb\">use-package</span><span class=\"w\"> </span><span class=\"nv\">lean4-mode</span>\n<span class=\"w\">  </span><span class=\"nb\">:straight</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"nv\">lean4-mode</span>\n<span class=\"w\">         </span><span class=\"nb\">:type</span><span class=\"w\"> </span><span class=\"nv\">git</span>\n<span class=\"w\">         </span><span class=\"nb\">:host</span><span class=\"w\"> </span><span class=\"nv\">github</span>\n<span class=\"w\">         </span><span class=\"nb\">:repo</span><span class=\"w\"> </span><span class=\"s\">\"leanprover/lean4-mode\"</span>\n<span class=\"w\">         </span><span class=\"nb\">:files</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"s\">\"*.el\"</span><span class=\"w\"> </span><span class=\"s\">\"data\"</span><span class=\"p\">))</span>\n<span class=\"w\">  </span><span class=\"c1\">;; to defer loading the package until required</span>\n<span class=\"w\">  </span><span class=\"nb\">:commands</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"nv\">lean4-mode</span><span class=\"p\">))</span>\n\n<span class=\"p\">(</span><span class=\"nb\">require</span><span class=\"w\"> </span><span class=\"ss\">'lean4-mode</span><span class=\"p\">)</span>\n</code></pre></div>",
        "id": 484050372,
        "sender_full_name": "Dominic Steinitz",
        "timestamp": 1732355722
    },
    {
        "content": "<p>You could try the command <code>eldoc-doc-buffer</code> show the Eldoc documentation buffer. It might also be necessary to customize the variable <code>eldoc-echo-area-prefer-doc-buffer</code> to the value <code>t</code> (\"Prefer ElDoc's documentation buffer\").</p>",
        "id": 484085000,
        "sender_full_name": "Richard Copley",
        "timestamp": 1732385945
    },
    {
        "content": "<p>Thanks for this but the eldoc-doc-buffer just shows the single line I see in the echo area i.e. not the full type. I am about to ask what my .emacs file should be given all the work that has been going on so no need to reply. And thanks once again.</p>",
        "id": 488583261,
        "sender_full_name": "Dominic Steinitz",
        "timestamp": 1733994571
    },
    {
        "content": "<p>add LSP UI Mode to your installation:</p>\n<div class=\"codehilite\" data-code-language=\"EmacsLisp\"><pre><span></span><code><span class=\"c1\">;; Install lsp-ui</span>\n<span class=\"w\">  </span><span class=\"p\">(</span><span class=\"nb\">use-package</span><span class=\"w\"> </span><span class=\"nv\">lsp-ui</span>\n<span class=\"w\">    </span><span class=\"nb\">:commands</span><span class=\"w\"> </span><span class=\"nv\">lsp-ui-mode</span>\n<span class=\"w\">    </span><span class=\"nb\">:hook</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"nv\">lsp-mode</span><span class=\"w\"> </span><span class=\"o\">.</span><span class=\"w\"> </span><span class=\"nv\">lsp-ui-mode</span><span class=\"p\">)</span>\n<span class=\"w\">    </span><span class=\"nb\">:config</span>\n<span class=\"w\">    </span><span class=\"p\">(</span><span class=\"k\">setq</span><span class=\"w\"> </span><span class=\"nv\">lsp-ui-sideline-show-hover</span><span class=\"w\"> </span><span class=\"no\">t</span>\n<span class=\"w\">          </span><span class=\"nv\">lsp-ui-doc-enable</span><span class=\"w\"> </span><span class=\"no\">t</span><span class=\"p\">))</span>\n</code></pre></div>\n<div class=\"codehilite\" data-code-language=\"EmacsLisp\"><pre><span></span><code><span class=\"w\">  </span><span class=\"p\">(</span><span class=\"nb\">use-package</span><span class=\"w\"> </span><span class=\"nv\">lean4-mode</span>\n<span class=\"w\">    </span><span class=\"nb\">:straight</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"nv\">lean4-mode</span><span class=\"w\"> </span><span class=\"nb\">:type</span><span class=\"w\"> </span><span class=\"nv\">git</span><span class=\"w\"> </span><span class=\"nb\">:host</span><span class=\"w\"> </span><span class=\"nv\">github</span>\n<span class=\"w\">                          </span><span class=\"nb\">:repo</span><span class=\"w\"> </span><span class=\"s\">\"leanprover-community/lean4-mode\"</span>\n<span class=\"w\">                          </span><span class=\"nb\">:commit</span><span class=\"w\"> </span><span class=\"s\">\"8404acf3d8facf3351d78ac18e9414d27872105c\"</span><span class=\"w\"> </span><span class=\"c1\">;if your lsp buffer is empty, they fixed it in this commit.</span>\n<span class=\"w\">                          </span><span class=\"nb\">:files</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"s\">\"*.el\"</span><span class=\"w\"> </span><span class=\"s\">\"data\"</span><span class=\"p\">))</span>\n<span class=\"w\">    </span><span class=\"nb\">:hook</span><span class=\"w\"> </span><span class=\"p\">((</span><span class=\"nv\">lean4-mode</span><span class=\"w\"> </span><span class=\"o\">.</span><span class=\"w\"> </span><span class=\"nv\">lsp</span><span class=\"p\">)</span>\n<span class=\"w\">           </span><span class=\"p\">(</span><span class=\"nv\">lean4-mode</span><span class=\"w\"> </span><span class=\"o\">.</span><span class=\"w\"> </span><span class=\"nv\">lsp-ui-mode</span><span class=\"p\">))</span><span class=\"w\"> </span><span class=\"c1\">; Add lsp-ui-mode if you want UI enhancements</span>\n</code></pre></div>\n<p>please delete your lean4-mode folder from your straight directory before changing it.</p>",
        "id": 488960397,
        "sender_full_name": "Mahdi Khaleghi",
        "timestamp": 1734151110
    }
]