[
    {
        "content": "<p>On a JIS keyboard, there is no backslash key, so I defined</p>\n<div class=\"codehilite\" data-code-language=\"EmacsLisp\"><pre><span></span><code><span class=\"p\">(</span><span class=\"nf\">define-key</span><span class=\"w\"> </span><span class=\"nv\">key-translation-map</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"nv\">kbd</span><span class=\"w\"> </span><span class=\"s\">\"M-¥\"</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"nv\">kbd</span><span class=\"w\"> </span><span class=\"s\">\"\\\\\"</span><span class=\"p\">))</span>\n<span class=\"p\">(</span><span class=\"nf\">define-key</span><span class=\"w\"> </span><span class=\"nv\">key-translation-map</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"nv\">kbd</span><span class=\"w\"> </span><span class=\"s\">\"M-|\"</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"nv\">kbd</span><span class=\"w\"> </span><span class=\"s\">\"|\"</span><span class=\"p\">))</span>\n<span class=\"p\">(</span><span class=\"nf\">define-key</span><span class=\"w\"> </span><span class=\"nv\">key-translation-map</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"nv\">kbd</span><span class=\"w\"> </span><span class=\"s\">\"C-M-¥\"</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"nv\">kbd</span><span class=\"w\"> </span><span class=\"s\">\"C-\\\\\"</span><span class=\"p\">))</span>\n</code></pre></div>\n<p>but with this, I cannot type unicode symbols using lean-mode's input method. When I type e.g. '\\R', the input method is not triggered.</p>\n<p>Is there a way to place the keymap before the input method?</p>\n<p>Alternatively, is there a way to trigger the IM without the backslash key?</p>",
        "id": 486369335,
        "sender_full_name": "Leni Aniva",
        "timestamp": 1733423242
    },
    {
        "content": "<p>you should be able to set the leader key to something else</p>",
        "id": 486370220,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1733423592
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110049\">Mario Carneiro</span> <a href=\"#narrow/channel/468104-Emacs/topic/Lean.20input.20method.20after.20keymap/near/486370220\">said</a>:</p>\n<blockquote>\n<p>you should be able to set the leader key to something else</p>\n</blockquote>\n<p>Is there a way to make the IM capture the \\ from a symbol?</p>",
        "id": 486370401,
        "sender_full_name": "Leni Aniva",
        "timestamp": 1733423664
    },
    {
        "content": "<p>I mean you could just set the leader to be <code>¥</code> instead of changing the key mapping so that <code>¥</code> looks like <code>\\</code></p>",
        "id": 486370588,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1733423761
    },
    {
        "content": "<p>but how would I type a backslash if I don't use the keymap?</p>",
        "id": 486370701,
        "sender_full_name": "Leni Aniva",
        "timestamp": 1733423796
    },
    {
        "content": "<p>you don't need to type a backslash</p>",
        "id": 486370737,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1733423816
    },
    {
        "content": "<p>setting the leader key means that instead of getting alpha from <code>\\a</code> you get it from <code>¥a</code></p>",
        "id": 486370822,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1733423847
    },
    {
        "content": "<p>for example if I want to print a string with a newline I would need to type a literal \\n and that requires a backslash</p>",
        "id": 486370852,
        "sender_full_name": "Leni Aniva",
        "timestamp": 1733423859
    },
    {
        "content": "<p>oh well that would still need a backslash, yes</p>",
        "id": 486370903,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1733423879
    },
    {
        "content": "<p>yeah so I think the optimal solution would involve the IM capture the backslash from keymap</p>",
        "id": 486370975,
        "sender_full_name": "Leni Aniva",
        "timestamp": 1733423896
    },
    {
        "content": "<p>you could add a custom abbreviation such that <code>¥bs</code> produces <code>\\</code> or something</p>",
        "id": 486371001,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1733423907
    },
    {
        "content": "<p>I found a better solution. I used <a href=\"https://software.sil.org/ukelele/\">https://software.sil.org/ukelele/</a> to map the Yen key to \\ and it works well</p>",
        "id": 486373352,
        "sender_full_name": "Leni Aniva",
        "timestamp": 1733424844
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"599027\">Leni Aniva</span> has marked this topic as resolved.</p>",
        "id": 486373358,
        "sender_full_name": "Notification Bot",
        "timestamp": 1733424847
    },
    {
        "content": "<p>I wonder if it would work to use input-decode-map instead of key-translation-map. Also note that define-key is deprecated in recent versions of  Emacs in favor of keymap-set. But that's just a side note :) Glad you found a solution!</p>",
        "id": 486377548,
        "sender_full_name": "Mekeor Melire",
        "timestamp": 1733426314
    }
]