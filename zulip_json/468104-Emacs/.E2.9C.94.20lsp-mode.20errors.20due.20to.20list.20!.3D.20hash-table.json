[
    {
        "content": "<p>I have installed Lean-mode on Emacs using straight.el. When I open the test.lean file, which contains</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Topology</span><span class=\"bp\">.</span><span class=\"n\">Basic</span>\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">TopologicalSpace</span>\n</code></pre></div>\n<p>I get:</p>\n<div class=\"codehilite\" data-code-language=\"Bash Session\"><pre><span></span><code><span class=\"go\">Error processing message (wrong-type-argument listp #s(hash-table size 2 test equal rehash-size 1.5 rehash-threshold 0.8125 data (\"range\" #s(hash-table size 2 test equal rehash-size 1.5 rehash-threshold 0.8125 data (\"start\" #s(hash-table size 2 test equal rehash-size 1.5 rehash-threshold 0.8125 data (\"line\" 1 \"character\" 7)) \"end\" #s(hash-table size 2 test equal rehash-size 1.5 rehash-threshold 0.8125 data (\"line\" 1 \"character\" 23)))) \"goal\" \"⊢ Type u → Type u\"))).</span>\n</code></pre></div>\n<p>It compiles correctly, but I receive an LSP error. lean4-toggle-info doesn't work at all. Are there conflicts between Lean4 and some LSP versions?</p>",
        "id": 486710389,
        "sender_full_name": "Mahdi Khaleghi",
        "timestamp": 1733610569
    },
    {
        "content": "<p>What's your lean related config?</p>",
        "id": 486718885,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1733618310
    },
    {
        "content": "<p>Lean (version 4.14.0-rc2, x86_64-apple-darwin22.6.0, commit 7dc1ceb8d431, Release)<br>\nworks fine on vscode but not on emacs</p>",
        "id": 486745382,
        "sender_full_name": "Mahdi Khaleghi",
        "timestamp": 1733643641
    },
    {
        "content": "<p>I mean, what Lean config do you have in your emacs init file?</p>",
        "id": 486779745,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1733672534
    },
    {
        "content": "<p>Do you use <code>elan</code>?</p>",
        "id": 486779792,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1733672575
    },
    {
        "content": "<p>I have installed lean-mode through Emacs. the rest such as elan and lean, are set up via the terminal.<br>\nhere is my emacs setup for lean:<br>\nfor lsp:</p>\n<div class=\"codehilite\" data-code-language=\"EmacsLisp\"><pre><span></span><code><span class=\"w\">    </span><span class=\"p\">(</span><span class=\"nb\">use-package</span><span class=\"w\"> </span><span class=\"nv\">lsp-mode</span>\n<span class=\"w\">    </span><span class=\"nb\">:straight</span><span class=\"w\"> </span><span class=\"no\">t</span>\n<span class=\"w\">    </span><span class=\"nb\">:hook</span><span class=\"w\"> </span><span class=\"p\">((</span><span class=\"nv\">prog-mode</span><span class=\"w\"> </span><span class=\"o\">.</span><span class=\"w\"> </span><span class=\"nv\">lsp</span><span class=\"p\">)</span><span class=\"w\">              </span><span class=\"c1\">;; Enable lsp-mode for programming modes</span>\n<span class=\"w\">           </span><span class=\"p\">(</span><span class=\"nv\">lean4-mode</span><span class=\"w\"> </span><span class=\"o\">.</span><span class=\"w\"> </span><span class=\"nv\">lsp</span><span class=\"p\">))</span><span class=\"w\">            </span><span class=\"c1\">;; Enable lsp-mode specifically for Lean 4</span>\n<span class=\"w\">    </span><span class=\"nb\">:commands</span><span class=\"w\"> </span><span class=\"nv\">lsp</span>\n<span class=\"w\">    </span><span class=\"nb\">:init</span>\n<span class=\"w\">    </span><span class=\"p\">(</span><span class=\"k\">setq</span><span class=\"w\"> </span><span class=\"nv\">lsp-keymap-prefix</span><span class=\"w\"> </span><span class=\"s\">\"C-c l\"</span><span class=\"p\">)</span><span class=\"w\">      </span><span class=\"c1\">;; Optional: Set a prefix for lsp-mode commands</span>\n<span class=\"w\">    </span><span class=\"nb\">:config</span>\n<span class=\"w\">    </span><span class=\"p\">(</span><span class=\"k\">setq</span><span class=\"w\"> </span><span class=\"nv\">lsp-enable-snippet</span><span class=\"w\"> </span><span class=\"no\">nil</span><span class=\"w\">          </span><span class=\"c1\">;; Disable snippets if you prefer</span>\n<span class=\"w\">          </span><span class=\"nv\">lsp-log-io</span><span class=\"w\"> </span><span class=\"no\">t</span><span class=\"p\">))</span><span class=\"w\">                  </span><span class=\"c1\">;; Enable LSP logging for debugging</span>\n\n\n<span class=\"w\">    </span><span class=\"c1\">;; lsp-ui for rich UI features (hover, sideline, etc.)</span>\n<span class=\"w\">  </span><span class=\"p\">(</span><span class=\"nb\">use-package</span><span class=\"w\"> </span><span class=\"nv\">lsp-ui</span>\n<span class=\"w\">    </span><span class=\"nb\">:straight</span><span class=\"w\"> </span><span class=\"no\">t</span>\n<span class=\"w\">    </span><span class=\"nb\">:commands</span><span class=\"w\"> </span><span class=\"nv\">lsp-ui-mode</span>\n<span class=\"w\">    </span><span class=\"nb\">:config</span>\n<span class=\"w\">    </span><span class=\"p\">(</span><span class=\"k\">setq</span><span class=\"w\"> </span><span class=\"nv\">lsp-ui-doc-enable</span><span class=\"w\"> </span><span class=\"no\">t</span>\n<span class=\"w\">          </span><span class=\"nv\">lsp-ui-doc-show-with-cursor</span><span class=\"w\"> </span><span class=\"no\">t</span>\n<span class=\"w\">          </span><span class=\"nv\">lsp-ui-sideline-enable</span><span class=\"w\"> </span><span class=\"no\">t</span><span class=\"p\">))</span>\n</code></pre></div>\n<p>and lean:</p>\n<div class=\"codehilite\" data-code-language=\"EmacsLisp\"><pre><span></span><code><span class=\"w\">  </span><span class=\"p\">(</span><span class=\"nv\">add-to-list</span><span class=\"w\"> </span><span class=\"ss\">'package-selected-packages</span><span class=\"w\"> </span><span class=\"ss\">'dash</span><span class=\"p\">)</span>\n<span class=\"w\">  </span><span class=\"p\">(</span><span class=\"nv\">add-to-list</span><span class=\"w\"> </span><span class=\"ss\">'package-selected-packages</span><span class=\"w\"> </span><span class=\"ss\">'lsp-mode</span><span class=\"p\">)</span>\n<span class=\"w\">  </span><span class=\"p\">(</span><span class=\"nv\">add-to-list</span><span class=\"w\"> </span><span class=\"ss\">'package-selected-packages</span><span class=\"w\"> </span><span class=\"ss\">'magit-section</span><span class=\"p\">)</span>\n\n<span class=\"w\">  </span><span class=\"p\">(</span><span class=\"nv\">package-refresh-contents</span><span class=\"p\">)</span>\n<span class=\"w\">  </span><span class=\"p\">(</span><span class=\"nv\">package-install-selected-packages</span><span class=\"w\"> </span><span class=\"ss\">'no-confirm</span><span class=\"p\">)</span>\n\n<span class=\"w\">  </span><span class=\"p\">(</span><span class=\"nb\">use-package</span><span class=\"w\"> </span><span class=\"nv\">lean4-mode</span>\n<span class=\"w\">    </span><span class=\"nb\">:commands</span><span class=\"w\"> </span><span class=\"nv\">lean4-mode</span>\n<span class=\"w\">    </span><span class=\"nb\">:straight</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"nv\">lean4-mode</span><span class=\"w\"> </span><span class=\"nb\">:type</span><span class=\"w\"> </span><span class=\"nv\">git</span><span class=\"w\"> </span><span class=\"nb\">:host</span><span class=\"w\"> </span><span class=\"nv\">github</span>\n<span class=\"w\">                          </span><span class=\"nb\">:repo</span><span class=\"w\"> </span><span class=\"s\">\"leanprover-community/lean4-mode\"</span>\n<span class=\"w\">                          </span><span class=\"nb\">:files</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"s\">\"*.el\"</span><span class=\"w\"> </span><span class=\"s\">\"data\"</span><span class=\"p\">)))</span>\n</code></pre></div>",
        "id": 486782954,
        "sender_full_name": "Mahdi Khaleghi",
        "timestamp": 1733675117
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"779400\">@Mekeor Melire</span> Do you know what happens here?</p>",
        "id": 486786570,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1733678154
    },
    {
        "content": "<p>If your setup works without any issues, could you let me know which version of LSP you are using?</p>",
        "id": 486787398,
        "sender_full_name": "Mahdi Khaleghi",
        "timestamp": 1733678805
    },
    {
        "content": "<p><a href=\"/user_uploads/3121/1iadNFI1Inz-f9OgO9v_DNvo/image.png\">image.png</a><br>\n<a href=\"/user_uploads/3121/p-iotFw-8bh4SX3MxxgUnoHt/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/1iadNFI1Inz-f9OgO9v_DNvo/image.png\" title=\"image.png\"><img data-original-dimensions=\"3248x2112\" src=\"/user_uploads/thumbnail/3121/1iadNFI1Inz-f9OgO9v_DNvo/image.png/840x560.webp\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/3121/p-iotFw-8bh4SX3MxxgUnoHt/image.png\" title=\"image.png\"><img data-original-dimensions=\"3248x2112\" src=\"/user_uploads/thumbnail/3121/p-iotFw-8bh4SX3MxxgUnoHt/image.png/840x560.webp\"></a></div><p>I just want to share an screenshot to show you what's happening.</p>",
        "id": 486788630,
        "sender_full_name": "Mahdi Khaleghi",
        "timestamp": 1733679839
    },
    {
        "content": "<p>I use lsp 9.0.1</p>",
        "id": 486789411,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1733680493
    },
    {
        "content": "<p>But I'm using a bit old <code>lean4-mode</code>.</p>",
        "id": 486789446,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1733680523
    },
    {
        "content": "<p>I'm going to upgrade <code>lean4-mode</code> today and test it.</p>",
        "id": 486789584,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1733680624
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"472787\">@Mahdi Khaleghi</span>, thanks for reporting and sorry for the inconvenience. I'll look into it within the next hours. I already have an idea.</p>",
        "id": 486790477,
        "sender_full_name": "Mekeor Melire",
        "timestamp": 1733681257
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"472787\">@Mahdi Khaleghi</span>, I can't reproduce this. Can you do <code>M-x toggle-debug-on-error RET</code>, then provoke the error, then share the displayed backtrace?</p>",
        "id": 486803377,
        "sender_full_name": "Mekeor Melire",
        "timestamp": 1733692006
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"779400\">@Mekeor Melire</span> This one?</p>\n<div class=\"codehilite\" data-code-language=\"EmacsLisp\"><pre><span></span><code><span class=\"nv\">Debugger</span><span class=\"w\"> </span><span class=\"nv\">entered--Lisp</span><span class=\"w\"> </span><span class=\"nv\">error:</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"nv\">void-variable</span><span class=\"w\"> </span><span class=\"nv\">goals</span><span class=\"p\">)</span>\n<span class=\"w\">  </span><span class=\"err\">#</span><span class=\"nv\">f</span><span class=\"p\">(</span><span class=\"nv\">compiled-function</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"nv\">input0</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"err\">#</span><span class=\"nv\">&lt;bytecode</span><span class=\"w\"> </span><span class=\"nv\">0x1558779f98255db4&gt;</span><span class=\"p\">)(</span><span class=\"no\">nil</span><span class=\"p\">)</span>\n<span class=\"w\">  </span><span class=\"nf\">apply</span><span class=\"p\">(</span><span class=\"err\">#</span><span class=\"nv\">f</span><span class=\"p\">(</span><span class=\"nv\">compiled-function</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"nv\">input0</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"err\">#</span><span class=\"nv\">&lt;bytecode</span><span class=\"w\"> </span><span class=\"nv\">0x1558779f98255db4&gt;</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"no\">nil</span><span class=\"p\">)</span>\n<span class=\"w\">  </span><span class=\"err\">#</span><span class=\"nv\">f</span><span class=\"p\">(</span><span class=\"nv\">compiled-function</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"kp\">&amp;rest</span><span class=\"w\"> </span><span class=\"nv\">args</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"err\">#</span><span class=\"nv\">&lt;bytecode</span><span class=\"w\"> </span><span class=\"nv\">-0x12f5965019f2d97&gt;</span><span class=\"p\">)(</span><span class=\"no\">nil</span><span class=\"p\">)</span>\n<span class=\"w\">  </span><span class=\"err\">#</span><span class=\"nv\">f</span><span class=\"p\">(</span><span class=\"nv\">compiled-function</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"nv\">result</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"err\">#</span><span class=\"nv\">&lt;bytecode</span><span class=\"w\"> </span><span class=\"nv\">-0x43092f5d8f096e6&gt;</span><span class=\"p\">)(</span><span class=\"no\">nil</span><span class=\"p\">)</span>\n<span class=\"w\">  </span><span class=\"err\">#</span><span class=\"nv\">f</span><span class=\"p\">(</span><span class=\"nv\">compiled-function</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"nv\">result</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"err\">#</span><span class=\"nv\">&lt;bytecode</span><span class=\"w\"> </span><span class=\"nv\">0xaec9a33b63429a5&gt;</span><span class=\"p\">)(</span><span class=\"no\">nil</span><span class=\"p\">)</span>\n<span class=\"w\">  </span><span class=\"nv\">lsp--parser-on-message</span><span class=\"p\">(</span><span class=\"err\">#</span><span class=\"nv\">&lt;hash-table</span><span class=\"w\"> </span><span class=\"nf\">equal</span><span class=\"w\"> </span><span class=\"m\">3/3</span><span class=\"w\"> </span><span class=\"nv\">0x4ca51b1f&gt;</span><span class=\"w\"> </span><span class=\"err\">#</span><span class=\"nv\">s</span><span class=\"p\">(</span><span class=\"nv\">lsp--workspace</span><span class=\"w\"> </span><span class=\"nb\">:ewoc</span><span class=\"w\"> </span><span class=\"err\">#</span><span class=\"nv\">s</span><span class=\"p\">(</span><span class=\"nv\">ewoc</span><span class=\"w\"> </span><span class=\"nb\">:buffer</span><span class=\"w\"> </span><span class=\"err\">#</span><span class=\"nv\">&lt;buffer</span><span class=\"w\"> </span><span class=\"nv\">*lsp-log:</span><span class=\"w\"> </span><span class=\"nv\">lean4-lsp:18584*&gt;</span><span class=\"w\"> </span><span class=\"nb\">:pretty-printer</span><span class=\"w\"> </span><span class=\"nv\">lsp--log-entry-pp</span><span class=\"w\"> </span><span class=\"nb\">:header</span><span class=\"w\"> </span><span class=\"p\">[[[</span><span class=\"o\">...</span><span class=\"w\"> </span><span class=\"err\">#</span><span class=\"mi\">5</span><span class=\"w\"> </span><span class=\"s\">\"\"</span><span class=\"w\"> </span><span class=\"err\">#</span><span class=\"nv\">&lt;marker</span><span class=\"w\"> </span><span class=\"nv\">at</span><span class=\"w\"> </span><span class=\"mi\">1925700</span><span class=\"w\"> </span><span class=\"nv\">in</span><span class=\"w\"> </span><span class=\"nv\">*lsp-log:</span><span class=\"w\"> </span><span class=\"nv\">lean4-lsp:18584*&gt;</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"err\">#</span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"nv\">DL-LIST</span><span class=\"w\"> </span><span class=\"err\">#</span><span class=\"nv\">&lt;marker</span><span class=\"w\"> </span><span class=\"nv\">at</span><span class=\"w\"> </span><span class=\"mi\">1925700</span><span class=\"w\"> </span><span class=\"nv\">in</span><span class=\"w\"> </span><span class=\"nv\">*lsp-log:</span><span class=\"w\"> </span><span class=\"nv\">lean4-lsp:18584*&gt;</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"err\">#</span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"err\">#</span><span class=\"mi\">5</span><span class=\"w\"> </span><span class=\"o\">...</span><span class=\"w\"> </span><span class=\"o\">...</span><span class=\"w\"> </span><span class=\"err\">#</span><span class=\"nv\">&lt;marker</span><span class=\"w\"> </span><span class=\"nv\">at</span><span class=\"w\"> </span><span class=\"mi\">7216</span><span class=\"w\"> </span><span class=\"nv\">in</span><span class=\"w\"> </span><span class=\"nv\">*lsp-log:</span><span class=\"w\"> </span><span class=\"nv\">lean4-lsp:18584*&gt;</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"err\">#</span><span class=\"nv\">s</span><span class=\"p\">(</span><span class=\"nv\">lsp--log-entry</span><span class=\"w\"> </span><span class=\"nb\">:timestamp</span><span class=\"w\"> </span><span class=\"s\">\"07:00:06 PM\"</span><span class=\"w\"> </span><span class=\"nb\">:process-time</span><span class=\"w\"> </span><span class=\"no\">nil</span><span class=\"w\"> </span><span class=\"nb\">:type</span><span class=\"w\"> </span><span class=\"nv\">outgoing-req</span><span class=\"w\"> </span><span class=\"nb\">:method</span><span class=\"w\"> </span><span class=\"s\">\"initialize\"</span><span class=\"w\"> </span><span class=\"nb\">:id</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"nb\">:body</span><span class=\"w\"> </span><span class=\"o\">...</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"err\">#</span><span class=\"nv\">&lt;marker</span><span class=\"w\"> </span><span class=\"nv\">at</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"nv\">in</span><span class=\"w\"> </span><span class=\"nv\">*lsp-log:</span><span class=\"w\"> </span><span class=\"nv\">lean4-lsp:18584*&gt;</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"s\">\"\"</span><span class=\"w\"> </span><span class=\"err\">#</span><span class=\"nv\">&lt;marker</span><span class=\"w\"> </span><span class=\"nv\">at</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"nv\">in</span><span class=\"w\"> </span><span class=\"nv\">*lsp-log:</span><span class=\"w\"> </span><span class=\"nv\">lean4-lsp:18584*&gt;</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"nb\">:footer</span><span class=\"w\"> </span><span class=\"p\">[[[</span><span class=\"o\">...</span><span class=\"w\"> </span><span class=\"err\">#</span><span class=\"mi\">5</span><span class=\"w\"> </span><span class=\"o\">...</span><span class=\"w\"> </span><span class=\"err\">#</span><span class=\"nv\">&lt;marker</span><span class=\"w\"> </span><span class=\"nv\">at</span><span class=\"w\"> </span><span class=\"mi\">1925347</span><span class=\"w\"> </span><span class=\"nv\">in</span><span class=\"w\"> </span><span class=\"nv\">*lsp-log:</span><span class=\"w\"> </span><span class=\"nv\">lean4-lsp:18584*&gt;</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"err\">#</span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"err\">#</span><span class=\"nv\">s</span><span class=\"p\">(</span><span class=\"nv\">lsp--log-entry</span><span class=\"w\"> </span><span class=\"nb\">:timestamp</span><span class=\"w\"> </span><span class=\"s\">\"10:39:09 PM\"</span><span class=\"w\"> </span><span class=\"nb\">:process-time</span><span class=\"w\"> </span><span class=\"mi\">18</span><span class=\"w\"> </span><span class=\"nb\">:type</span><span class=\"w\"> </span><span class=\"nv\">incoming-resp</span><span class=\"w\"> </span><span class=\"nb\">:method</span><span class=\"w\"> </span><span class=\"s\">\"$/lean/plainGoal\"</span><span class=\"w\"> </span><span class=\"nb\">:id</span><span class=\"w\"> </span><span class=\"mi\">367</span><span class=\"w\"> </span><span class=\"nb\">:body</span><span class=\"w\"> </span><span class=\"no\">nil</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"err\">#</span><span class=\"nv\">&lt;marker</span><span class=\"w\"> </span><span class=\"nv\">at</span><span class=\"w\"> </span><span class=\"mi\">1925609</span><span class=\"w\"> </span><span class=\"nv\">in</span><span class=\"w\"> </span><span class=\"nv\">*lsp-log:</span><span class=\"w\"> </span><span class=\"nv\">lean4-lsp:18584*&gt;</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"err\">#</span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"err\">#</span><span class=\"mi\">5</span><span class=\"w\"> </span><span class=\"o\">...</span><span class=\"w\"> </span><span class=\"s\">\"\"</span><span class=\"w\"> </span><span class=\"err\">#</span><span class=\"nv\">&lt;marker</span><span class=\"w\"> </span><span class=\"nv\">at</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"nv\">in</span><span class=\"w\"> </span><span class=\"nv\">*lsp-log:</span><span class=\"w\"> </span><span class=\"nv\">lean4-lsp:18584*&gt;</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"nv\">DL-LIST</span><span class=\"w\"> </span><span class=\"err\">#</span><span class=\"nv\">&lt;marker</span><span class=\"w\"> </span><span class=\"nv\">at</span><span class=\"w\"> </span><span class=\"mi\">1925700</span><span class=\"w\"> </span><span class=\"nv\">in</span><span class=\"w\"> </span><span class=\"nv\">*lsp-log:</span><span class=\"w\"> </span><span class=\"nv\">lean4-lsp:18584*&gt;</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"s\">\"\"</span><span class=\"w\"> </span><span class=\"err\">#</span><span class=\"nv\">&lt;marker</span><span class=\"w\"> </span><span class=\"nv\">at</span><span class=\"w\"> </span><span class=\"mi\">1925700</span><span class=\"w\"> </span><span class=\"nv\">in</span><span class=\"w\"> </span><span class=\"nv\">*lsp-log:</span><span class=\"w\"> </span><span class=\"nv\">lean4-lsp:18584*&gt;</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"nb\">:dll</span><span class=\"w\"> </span><span class=\"p\">[[[</span><span class=\"o\">...</span><span class=\"w\"> </span><span class=\"err\">#</span><span class=\"mi\">5</span><span class=\"w\"> </span><span class=\"o\">...</span><span class=\"w\"> </span><span class=\"err\">#</span><span class=\"nv\">&lt;marker</span><span class=\"w\"> </span><span class=\"nv\">at</span><span class=\"w\"> </span><span class=\"mi\">1925609</span><span class=\"w\"> </span><span class=\"nv\">in</span><span class=\"w\"> </span><span class=\"nv\">*lsp-log:</span><span class=\"w\"> </span><span class=\"nv\">lean4-lsp:18584*&gt;</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"err\">#</span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"s\">\"\"</span><span class=\"w\"> </span><span class=\"err\">#</span><span class=\"nv\">&lt;marker</span><span class=\"w\"> </span><span class=\"nv\">at</span><span class=\"w\"> </span><span class=\"mi\">1925700</span><span class=\"w\"> </span><span class=\"nv\">in</span><span class=\"w\"> </span><span class=\"nv\">*lsp-log:</span><span class=\"w\"> </span><span class=\"nv\">lean4-lsp:18584*&gt;</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"err\">#</span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"err\">#</span><span class=\"mi\">5</span><span class=\"w\"> </span><span class=\"o\">...</span><span class=\"w\"> </span><span class=\"o\">...</span><span class=\"w\"> </span><span class=\"err\">#</span><span class=\"nv\">&lt;marker</span><span class=\"w\"> </span><span class=\"nv\">at</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"nv\">in</span><span class=\"w\"> </span><span class=\"nv\">*lsp-log:</span><span class=\"w\"> </span><span class=\"nv\">lean4-lsp:18584*&gt;</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"s\">\"\"</span><span class=\"w\"> </span><span class=\"err\">#</span><span class=\"nv\">&lt;marker</span><span class=\"w\"> </span><span class=\"nv\">at</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"nv\">in</span><span class=\"w\"> </span><span class=\"nv\">*lsp-log:</span><span class=\"w\"> </span><span class=\"nv\">lean4-lsp:18584*&gt;</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"nv\">DL-LIST</span><span class=\"w\"> </span><span class=\"err\">#</span><span class=\"nv\">&lt;marker</span><span class=\"w\"> </span><span class=\"nv\">at</span><span class=\"w\"> </span><span class=\"mi\">1925700</span><span class=\"w\"> </span><span class=\"nv\">in</span><span class=\"w\"> </span><span class=\"nv\">*lsp-log:</span><span class=\"w\"> </span><span class=\"nv\">lean4-lsp:18584*&gt;</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"nb\">:last-node</span><span class=\"w\"> </span><span class=\"no\">nil</span><span class=\"w\"> </span><span class=\"nb\">:hf-pp</span><span class=\"w\"> </span><span class=\"nf\">insert</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"nb\">:server-capabilities</span><span class=\"w\"> </span><span class=\"err\">#</span><span class=\"nv\">&lt;hash-table</span><span class=\"w\"> </span><span class=\"nf\">equal</span><span class=\"w\"> </span><span class=\"m\">15/15</span><span class=\"w\"> </span><span class=\"nv\">0x4cc9e5eb&gt;</span><span class=\"w\"> </span><span class=\"nb\">:registered-server-capabilities</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"err\">#</span><span class=\"nv\">s</span><span class=\"p\">(</span><span class=\"nv\">lsp--registered-capability</span><span class=\"w\"> </span><span class=\"nb\">:id</span><span class=\"w\"> </span><span class=\"s\">\"lean_watcher\"</span><span class=\"w\"> </span><span class=\"nb\">:method</span><span class=\"w\"> </span><span class=\"s\">\"workspace/didChangeWatchedFiles\"</span><span class=\"w\"> </span><span class=\"nb\">:options</span><span class=\"w\"> </span><span class=\"err\">#</span><span class=\"nv\">&lt;hash-table</span><span class=\"w\"> </span><span class=\"nf\">equal</span><span class=\"w\"> </span><span class=\"m\">1/1</span><span class=\"w\"> </span><span class=\"nv\">0x4cae7755&gt;</span><span class=\"p\">))</span><span class=\"w\"> </span><span class=\"nb\">:root</span><span class=\"w\"> </span><span class=\"s\">\"/Users/mahdi/git/formalization_in_lean...\"</span><span class=\"w\"> </span><span class=\"nb\">:client</span><span class=\"w\"> </span><span class=\"err\">#</span><span class=\"nv\">s</span><span class=\"p\">(</span><span class=\"nv\">lsp--client</span><span class=\"w\"> </span><span class=\"nb\">:language-id</span><span class=\"w\"> </span><span class=\"no\">nil</span><span class=\"w\"> </span><span class=\"nb\">:add-on?</span><span class=\"w\"> </span><span class=\"no\">nil</span><span class=\"w\"> </span><span class=\"nb\">:new-connection</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"nb\">:connect</span><span class=\"w\"> </span><span class=\"err\">#</span><span class=\"nv\">f</span><span class=\"p\">(</span><span class=\"nv\">compiled-function</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"nv\">filter</span><span class=\"w\"> </span><span class=\"nv\">sentinel</span><span class=\"w\"> </span><span class=\"nv\">name</span><span class=\"w\"> </span><span class=\"nv\">environment-fn</span><span class=\"w\"> </span><span class=\"nv\">workspace</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"err\">#</span><span class=\"nv\">&lt;bytecode</span><span class=\"w\"> </span><span class=\"nv\">-0x53eb06d1f99c35c&gt;</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"nb\">:test?</span><span class=\"w\"> </span><span class=\"err\">#</span><span class=\"nv\">f</span><span class=\"p\">(</span><span class=\"nv\">compiled-function</span><span class=\"w\"> </span><span class=\"p\">()</span><span class=\"w\"> </span><span class=\"err\">#</span><span class=\"nv\">&lt;bytecode</span><span class=\"w\"> </span><span class=\"nv\">0x24e1023d95a9&gt;</span><span class=\"p\">))</span><span class=\"w\"> </span><span class=\"nb\">:ignore-regexps</span><span class=\"w\"> </span><span class=\"no\">nil</span><span class=\"w\"> </span><span class=\"nb\">:ignore-messages</span><span class=\"w\"> </span><span class=\"no\">nil</span><span class=\"w\"> </span><span class=\"nb\">:notification-handlers</span><span class=\"w\"> </span><span class=\"err\">#</span><span class=\"nv\">&lt;hash-table</span><span class=\"w\"> </span><span class=\"nf\">equal</span><span class=\"w\"> </span><span class=\"m\">1/65</span><span class=\"w\"> </span><span class=\"nv\">0x4c70d979&gt;</span><span class=\"w\"> </span><span class=\"nb\">:request-handlers</span><span class=\"w\"> </span><span class=\"err\">#</span><span class=\"nv\">&lt;hash-table</span><span class=\"w\"> </span><span class=\"nf\">equal</span><span class=\"w\"> </span><span class=\"m\">0/65</span><span class=\"w\"> </span><span class=\"nv\">0x4c70dc4f&gt;</span><span class=\"w\"> </span><span class=\"nb\">:response-handlers</span><span class=\"w\"> </span><span class=\"err\">#</span><span class=\"nv\">&lt;hash-table</span><span class=\"w\"> </span><span class=\"nf\">eql</span><span class=\"w\"> </span><span class=\"m\">2/65</span><span class=\"w\"> </span><span class=\"nv\">0x4c70dc6f&gt;</span><span class=\"w\"> </span><span class=\"nb\">:prefix-function</span><span class=\"w\"> </span><span class=\"no\">nil</span><span class=\"w\"> </span><span class=\"nb\">:uri-handlers</span><span class=\"w\"> </span><span class=\"err\">#</span><span class=\"nv\">&lt;hash-table</span><span class=\"w\"> </span><span class=\"nf\">equal</span><span class=\"w\"> </span><span class=\"m\">0/65</span><span class=\"w\"> </span><span class=\"nv\">0x4c70dc8f&gt;</span><span class=\"w\"> </span><span class=\"nb\">:action-handlers</span><span class=\"w\"> </span><span class=\"err\">#</span><span class=\"nv\">&lt;hash-table</span><span class=\"w\"> </span><span class=\"nf\">equal</span><span class=\"w\"> </span><span class=\"m\">0/65</span><span class=\"w\"> </span><span class=\"nv\">0x4ca889a9&gt;</span><span class=\"w\"> </span><span class=\"nb\">:action-filter</span><span class=\"w\"> </span><span class=\"no\">nil</span><span class=\"w\"> </span><span class=\"nb\">:major-modes</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"nv\">lean4-mode</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"nb\">:activation-fn</span><span class=\"w\"> </span><span class=\"no\">nil</span><span class=\"w\"> </span><span class=\"nb\">:priority</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"nb\">:server-id</span><span class=\"w\"> </span><span class=\"nv\">lean4-lsp</span><span class=\"w\"> </span><span class=\"nb\">:multi-root</span><span class=\"w\"> </span><span class=\"no\">nil</span><span class=\"w\"> </span><span class=\"nb\">:initialization-options</span><span class=\"w\"> </span><span class=\"no\">nil</span><span class=\"w\"> </span><span class=\"nb\">:semantic-tokens-faces-overrides</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"nb\">:types</span><span class=\"w\"> </span><span class=\"p\">((</span><span class=\"s\">\"leanSorryLike\"</span><span class=\"w\"> </span><span class=\"o\">.</span><span class=\"w\"> </span><span class=\"nv\">font-lock-warning-face</span><span class=\"p\">)))</span><span class=\"w\"> </span><span class=\"nb\">:custom-capabilities</span><span class=\"w\"> </span><span class=\"no\">nil</span><span class=\"w\"> </span><span class=\"nb\">:library-folders-fn</span><span class=\"w\"> </span><span class=\"no\">nil</span><span class=\"w\"> </span><span class=\"nb\">:before-file-open-fn</span><span class=\"w\"> </span><span class=\"no\">nil</span><span class=\"w\"> </span><span class=\"nb\">:initialized-fn</span><span class=\"w\"> </span><span class=\"no\">nil</span><span class=\"w\"> </span><span class=\"nb\">:remote?</span><span class=\"w\"> </span><span class=\"no\">nil</span><span class=\"w\"> </span><span class=\"nb\">:completion-in-comments?</span><span class=\"w\"> </span><span class=\"no\">nil</span><span class=\"w\"> </span><span class=\"nb\">:path-&gt;uri-fn</span><span class=\"w\"> </span><span class=\"no\">nil</span><span class=\"w\"> </span><span class=\"nb\">:uri-&gt;path-fn</span><span class=\"w\"> </span><span class=\"no\">nil</span><span class=\"w\"> </span><span class=\"nb\">:environment-fn</span><span class=\"w\"> </span><span class=\"no\">nil</span><span class=\"w\"> </span><span class=\"nb\">:after-open-fn</span><span class=\"w\"> </span><span class=\"no\">nil</span><span class=\"w\"> </span><span class=\"nb\">:async-request-handlers</span><span class=\"w\"> </span><span class=\"err\">#</span><span class=\"nv\">&lt;hash-table</span><span class=\"w\"> </span><span class=\"nf\">equal</span><span class=\"w\"> </span><span class=\"m\">0/65</span><span class=\"w\"> </span><span class=\"nv\">0x4ca88c7f&gt;</span><span class=\"w\"> </span><span class=\"nb\">:download-server-fn</span><span class=\"w\"> </span><span class=\"no\">nil</span><span class=\"w\"> </span><span class=\"nb\">:download-in-progress?</span><span class=\"w\"> </span><span class=\"no\">nil</span><span class=\"w\"> </span><span class=\"nb\">:buffers</span><span class=\"w\"> </span><span class=\"no\">nil</span><span class=\"w\"> </span><span class=\"nb\">:synchronize-sections</span><span class=\"w\"> </span><span class=\"no\">nil</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"nb\">:host-root</span><span class=\"w\"> </span><span class=\"no\">nil</span><span class=\"w\"> </span><span class=\"nb\">:proc</span><span class=\"w\"> </span><span class=\"err\">#</span><span class=\"nv\">&lt;process</span><span class=\"w\"> </span><span class=\"nv\">lean4-lsp&gt;</span><span class=\"w\"> </span><span class=\"nb\">:cmd-proc</span><span class=\"w\"> </span><span class=\"err\">#</span><span class=\"nv\">&lt;process</span><span class=\"w\"> </span><span class=\"nv\">lean4-lsp&gt;</span><span class=\"w\"> </span><span class=\"nb\">:buffers</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"err\">#</span><span class=\"nv\">&lt;buffer</span><span class=\"w\"> </span><span class=\"nv\">test.lean&gt;</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"nb\">:semantic-tokens-faces</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"nv\">lsp-face-semhl-keyword</span><span class=\"w\"> </span><span class=\"nv\">lsp-face-semhl-variable</span><span class=\"w\"> </span><span class=\"nv\">lsp-face-semhl-property</span><span class=\"w\"> </span><span class=\"nv\">lsp-face-semhl-function</span><span class=\"w\"> </span><span class=\"nv\">lsp-face-semhl-namespace</span><span class=\"w\"> </span><span class=\"nv\">lsp-face-semhl-type</span><span class=\"w\"> </span><span class=\"nv\">lsp-face-semhl-class</span><span class=\"w\"> </span><span class=\"nv\">lsp-face-semhl-enum</span><span class=\"w\"> </span><span class=\"nv\">lsp-face-semhl-interface</span><span class=\"w\"> </span><span class=\"nv\">lsp-face-semhl-struct</span><span class=\"w\"> </span><span class=\"nv\">lsp-face-semhl-type-parameter</span><span class=\"w\"> </span><span class=\"nv\">lsp-face-semhl-parameter</span><span class=\"w\"> </span><span class=\"nv\">lsp-face-semhl-constant</span><span class=\"w\"> </span><span class=\"nv\">lsp-face-semhl-event</span><span class=\"w\"> </span><span class=\"nv\">lsp-face-semhl-method</span><span class=\"w\"> </span><span class=\"nv\">lsp-face-semhl-macro</span><span class=\"w\"> </span><span class=\"no\">nil</span><span class=\"w\"> </span><span class=\"nv\">lsp-face-semhl-comment</span><span class=\"w\"> </span><span class=\"nv\">lsp-face-semhl-string</span><span class=\"w\"> </span><span class=\"nv\">lsp-face-semhl-number</span><span class=\"w\"> </span><span class=\"nv\">lsp-face-semhl-regexp</span><span class=\"w\"> </span><span class=\"nv\">lsp-face-semhl-operator</span><span class=\"w\"> </span><span class=\"no\">nil</span><span class=\"w\"> </span><span class=\"nv\">font-lock-warning-face</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"nb\">:semantic-tokens-modifier-faces</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"nv\">lsp-face-semhl-interface</span><span class=\"w\"> </span><span class=\"nv\">lsp-face-semhl-definition</span><span class=\"w\"> </span><span class=\"nv\">lsp-face-semhl-constant</span><span class=\"w\"> </span><span class=\"nv\">lsp-face-semhl-static</span><span class=\"w\"> </span><span class=\"nv\">lsp-face-semhl-deprecated</span><span class=\"w\"> </span><span class=\"nv\">lsp-face-semhl-keyword</span><span class=\"w\"> </span><span class=\"nv\">lsp-face-semhl-macro</span><span class=\"w\"> </span><span class=\"nv\">lsp-face-semhl-operator</span><span class=\"w\"> </span><span class=\"nv\">lsp-face-semhl-comment</span><span class=\"w\"> </span><span class=\"nv\">lsp-face-semhl-default-library</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"nb\">:extra-client-capabilities</span><span class=\"w\"> </span><span class=\"no\">nil</span><span class=\"w\"> </span><span class=\"nb\">:status</span><span class=\"w\"> </span><span class=\"nv\">initialized</span><span class=\"w\"> </span><span class=\"nb\">:metadata</span><span class=\"w\"> </span><span class=\"err\">#</span><span class=\"nv\">&lt;hash-table</span><span class=\"w\"> </span><span class=\"nf\">equal</span><span class=\"w\"> </span><span class=\"m\">0/65</span><span class=\"w\"> </span><span class=\"nv\">0x4cc6d327&gt;</span><span class=\"w\"> </span><span class=\"nb\">:watches</span><span class=\"w\"> </span><span class=\"err\">#</span><span class=\"nv\">&lt;hash-table</span><span class=\"w\"> </span><span class=\"nf\">equal</span><span class=\"w\"> </span><span class=\"m\">0/65</span><span class=\"w\"> </span><span class=\"nv\">0x4cc6d347&gt;</span><span class=\"w\"> </span><span class=\"nb\">:workspace-folders</span><span class=\"w\"> </span><span class=\"no\">nil</span><span class=\"w\"> </span><span class=\"nb\">:last-id</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"nb\">:status-string</span><span class=\"w\"> </span><span class=\"no\">nil</span><span class=\"w\"> </span><span class=\"nb\">:shutdown-action</span><span class=\"w\"> </span><span class=\"no\">nil</span><span class=\"w\"> </span><span class=\"nb\">:diagnostics</span><span class=\"w\"> </span><span class=\"err\">#</span><span class=\"nv\">&lt;hash-table</span><span class=\"w\"> </span><span class=\"nf\">equal</span><span class=\"w\"> </span><span class=\"m\">1/65</span><span class=\"w\"> </span><span class=\"nv\">0x4caa3485&gt;</span><span class=\"w\"> </span><span class=\"nb\">:work-done-tokens</span><span class=\"w\"> </span><span class=\"err\">#</span><span class=\"nv\">&lt;hash-table</span><span class=\"w\"> </span><span class=\"nf\">equal</span><span class=\"w\"> </span><span class=\"m\">0/65</span><span class=\"w\"> </span><span class=\"nv\">0x4c7254c5&gt;</span><span class=\"p\">))</span>\n<span class=\"w\">  </span><span class=\"err\">#</span><span class=\"nv\">f</span><span class=\"p\">(</span><span class=\"nv\">compiled-function</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"nv\">msg</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"err\">#</span><span class=\"nv\">&lt;bytecode</span><span class=\"w\"> </span><span class=\"nv\">-0x4bd6a98d29711ee&gt;</span><span class=\"p\">)(</span><span class=\"err\">#</span><span class=\"nv\">&lt;hash-table</span><span class=\"w\"> </span><span class=\"nf\">equal</span><span class=\"w\"> </span><span class=\"m\">3/3</span><span class=\"w\"> </span><span class=\"nv\">0x4ca51b1f&gt;</span><span class=\"p\">)</span>\n<span class=\"w\">  </span><span class=\"nf\">mapc</span><span class=\"p\">(</span><span class=\"err\">#</span><span class=\"nv\">f</span><span class=\"p\">(</span><span class=\"nv\">compiled-function</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"nv\">msg</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"err\">#</span><span class=\"nv\">&lt;bytecode</span><span class=\"w\"> </span><span class=\"nv\">-0x4bd6a98d29711ee&gt;</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"err\">#</span><span class=\"nv\">&lt;hash-table</span><span class=\"w\"> </span><span class=\"nf\">equal</span><span class=\"w\"> </span><span class=\"m\">3/3</span><span class=\"w\"> </span><span class=\"nv\">0x4ca51b1f&gt;</span><span class=\"w\"> </span><span class=\"err\">#</span><span class=\"nv\">&lt;hash-table</span><span class=\"w\"> </span><span class=\"nf\">equal</span><span class=\"w\"> </span><span class=\"m\">3/3</span><span class=\"w\"> </span><span class=\"nv\">0x4ca51b3f&gt;</span><span class=\"w\"> </span><span class=\"err\">#</span><span class=\"nv\">&lt;hash-table</span><span class=\"w\"> </span><span class=\"nf\">equal</span><span class=\"w\"> </span><span class=\"m\">3/3</span><span class=\"w\"> </span><span class=\"nv\">0x4ca51b5f&gt;</span><span class=\"p\">))</span>\n<span class=\"w\">  </span><span class=\"err\">#</span><span class=\"nv\">f</span><span class=\"p\">(</span><span class=\"nv\">compiled-function</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"nv\">proc</span><span class=\"w\"> </span><span class=\"nv\">input</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"err\">#</span><span class=\"nv\">&lt;bytecode</span><span class=\"w\"> </span><span class=\"nv\">-0x160e1966c64ccd2a&gt;</span><span class=\"p\">)(</span><span class=\"err\">#</span><span class=\"nv\">&lt;process</span><span class=\"w\"> </span><span class=\"nv\">lean4-lsp&gt;</span><span class=\"w\"> </span><span class=\"s\">\"Content-Length: 40\\15\\n\\15\\n{\\\"result\\\":null,\\\"jsonrpc\\\":\\\"2....\"</span><span class=\"p\">)</span>\n</code></pre></div>\n<p><a href=\"/user_uploads/3121/Q7GxKc8v9fBXgJ7rMxi81ZaD/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/Q7GxKc8v9fBXgJ7rMxi81ZaD/image.png\" title=\"image.png\"><img data-original-dimensions=\"3248x2112\" src=\"/user_uploads/thumbnail/3121/Q7GxKc8v9fBXgJ7rMxi81ZaD/image.png/840x560.webp\"></a></div>",
        "id": 486805722,
        "sender_full_name": "Mahdi Khaleghi",
        "timestamp": 1733694152
    },
    {
        "content": "<p>I'd guess that there is some problem with the <code>lsp-interface</code> macro from <code>lsp-mode</code>. But I don't understand it.</p>\n<p>For me, personally, this recipe works just fine:</p>\n<div class=\"codehilite\" data-code-language=\"EmacsLisp\"><pre><span></span><code><span class=\"c1\">;; Usage: emacs --init-directory=$(mktemp -d) -l this-file.el</span>\n\n<span class=\"p\">(</span><span class=\"nb\">require</span><span class=\"w\"> </span><span class=\"ss\">'package</span><span class=\"p\">)</span>\n<span class=\"p\">(</span><span class=\"nv\">add-to-list</span><span class=\"w\"> </span><span class=\"ss\">'package-archives</span>\n<span class=\"w\">             </span><span class=\"o\">'</span><span class=\"p\">(</span><span class=\"s\">\"melpa\"</span><span class=\"w\"> </span><span class=\"o\">.</span><span class=\"w\"> </span><span class=\"s\">\"https://melpa.org/packages/\"</span><span class=\"p\">))</span>\n\n<span class=\"p\">(</span><span class=\"nv\">add-to-list</span><span class=\"w\"> </span><span class=\"ss\">'package-selected-packages</span><span class=\"w\"> </span><span class=\"ss\">'flycheck</span><span class=\"p\">)</span>\n<span class=\"p\">(</span><span class=\"nv\">add-to-list</span><span class=\"w\"> </span><span class=\"ss\">'package-selected-packages</span><span class=\"w\"> </span><span class=\"ss\">'lsp-mode</span><span class=\"p\">)</span>\n<span class=\"p\">(</span><span class=\"nv\">add-to-list</span><span class=\"w\"> </span><span class=\"ss\">'package-selected-packages</span><span class=\"w\"> </span><span class=\"ss\">'lsp-ui</span><span class=\"p\">)</span>\n<span class=\"p\">(</span><span class=\"nv\">add-to-list</span><span class=\"w\"> </span><span class=\"ss\">'package-selected-packages</span><span class=\"w\"> </span><span class=\"ss\">'markdown-mode</span><span class=\"p\">)</span>\n<span class=\"p\">(</span><span class=\"nv\">add-to-list</span><span class=\"w\"> </span><span class=\"ss\">'package-selected-packages</span><span class=\"w\"> </span><span class=\"ss\">'lean4-mode</span><span class=\"p\">)</span>\n\n<span class=\"p\">(</span><span class=\"nv\">package-refresh-contents</span><span class=\"p\">)</span>\n<span class=\"p\">(</span><span class=\"nv\">package-install-selected-packages</span><span class=\"w\"> </span><span class=\"ss\">'no-confirm</span><span class=\"p\">)</span>\n\n<span class=\"p\">(</span><span class=\"nb\">require</span><span class=\"w\"> </span><span class=\"ss\">'flycheck</span><span class=\"p\">)</span>\n<span class=\"p\">(</span><span class=\"nb\">require</span><span class=\"w\"> </span><span class=\"ss\">'lean4-mode</span><span class=\"p\">)</span>\n<span class=\"p\">(</span><span class=\"nb\">require</span><span class=\"w\"> </span><span class=\"ss\">'lsp-mode</span><span class=\"p\">)</span>\n<span class=\"p\">(</span><span class=\"nb\">require</span><span class=\"w\"> </span><span class=\"ss\">'lsp-ui</span><span class=\"p\">)</span>\n<span class=\"p\">(</span><span class=\"nb\">require</span><span class=\"w\"> </span><span class=\"ss\">'markdown-mode</span><span class=\"p\">)</span>\n\n<span class=\"p\">(</span><span class=\"nv\">setopt</span><span class=\"w\"> </span><span class=\"nv\">lsp-enable-snippet</span><span class=\"w\"> </span><span class=\"no\">nil</span><span class=\"p\">)</span>\n<span class=\"p\">(</span><span class=\"nv\">setopt</span><span class=\"w\"> </span><span class=\"nv\">lsp-log-io</span><span class=\"w\"> </span><span class=\"no\">t</span><span class=\"p\">)</span>\n\n<span class=\"p\">(</span><span class=\"nv\">setopt</span><span class=\"w\"> </span><span class=\"nv\">lsp-ui-doc-enable</span><span class=\"w\"> </span><span class=\"no\">t</span><span class=\"p\">)</span>\n<span class=\"p\">(</span><span class=\"nv\">setopt</span><span class=\"w\"> </span><span class=\"nv\">lsp-ui-doc-show-with-cursor</span><span class=\"w\"> </span><span class=\"no\">t</span><span class=\"p\">)</span>\n<span class=\"p\">(</span><span class=\"nv\">setopt</span><span class=\"w\"> </span><span class=\"nv\">lsp-ui-sideline-enable</span><span class=\"w\"> </span><span class=\"no\">t</span><span class=\"p\">)</span>\n\n<span class=\"c1\">;;          vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv           ADAPT THIS PATH!</span>\n<span class=\"p\">(</span><span class=\"nv\">find-file</span><span class=\"w\"> </span><span class=\"s\">\"/path/to/some/project/file.lean\"</span><span class=\"p\">)</span>\n</code></pre></div>\n<p>You may try it too.</p>",
        "id": 486807271,
        "sender_full_name": "Mekeor Melire",
        "timestamp": 1733695544
    },
    {
        "content": "<p>what the last line refers to?</p>",
        "id": 486807357,
        "sender_full_name": "Mahdi Khaleghi",
        "timestamp": 1733695613
    },
    {
        "content": "<p>Further thoughts:</p>\n<ul>\n<li>I had recently changed the invocations of <code>lsp-interface</code>: They are not wrapped inside <code>eval-when-compile</code> since then:</li>\n<li>You probably do not need <code>(add-to-list 'package-selected-packages 'lsp-mode)</code> since you already install <code>lsp-mode</code> with Straight.el with <code>(use-package lsp-mode :straight t)</code>.</li>\n</ul>",
        "id": 486807506,
        "sender_full_name": "Mekeor Melire",
        "timestamp": 1733695725
    },
    {
        "content": "<p>The last line in my script will open a Lean file in the Emacs process that evaluates the script. You can then see if it works fine, or if there is an error.</p>",
        "id": 486807632,
        "sender_full_name": "Mekeor Melire",
        "timestamp": 1733695808
    },
    {
        "content": "<p><del>@<strong>Mahdi Khaleghi</strong>, excuse me. I had forgotten the very important <code>-Q</code> flag in the first line: <code>;; Usage: emacs --init-directory=$(mktemp -d) -Q -l this-file.el</code>. Fixed.</del></p>\n<p>Urgh. I actually think it should not matter :D</p>",
        "id": 486807701,
        "sender_full_name": "Mekeor Melire",
        "timestamp": 1733695885
    },
    {
        "content": "<p>Also you mentioned <code>lean4-toggle-info-buffer</code> but you should not use that function but you should use the command (which means <em>interactive function</em>  in Elisp) <code>lean4-toggle-info</code> instead.</p>",
        "id": 486808353,
        "sender_full_name": "Mekeor Melire",
        "timestamp": 1733696509
    },
    {
        "content": "<p>This topic was moved here from <a class=\"stream-topic\" data-stream-id=\"468104\" href=\"/#narrow/channel/468104-Emacs/topic/Installation.20Guide\">#Emacs &gt; Installation Guide</a> by <span class=\"user-mention silent\" data-user-id=\"779400\">Mekeor Melire</span>.</p>",
        "id": 486808702,
        "sender_full_name": "Notification Bot",
        "timestamp": 1733696773
    },
    {
        "content": "<p>This topic was moved here from <a class=\"stream-topic\" data-stream-id=\"468104\" href=\"/#narrow/channel/468104-Emacs/topic/.02klzzwxh.3A0000.03\">#Emacs &gt; <code>wrong-type-argument listp #s(hash-table</code></a> by <span class=\"user-mention silent\" data-user-id=\"779400\">Mekeor Melire</span>.</p>",
        "id": 486808791,
        "sender_full_name": "Notification Bot",
        "timestamp": 1733696863
    },
    {
        "content": "<p>BTW, can you try different versions of <code>lean4-mode</code> (e.g., starting with \"before all recent changes\") and, if it works, bisect to find which commit causes troubles?</p>",
        "id": 486816989,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1733704171
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"779400\">Mekeor Melire</span> <a href=\"#narrow/channel/468104-Emacs/topic/lsp-mode.20errors.20due.20to.20list.20!.3D.20hash-table/near/486807506\">said</a>:</p>\n<blockquote>\n<p>Further thoughts:</p>\n<ul>\n<li>I had recently changed the invocations of <code>lsp-interface</code>: They are not wrapped inside <code>eval-when-compile</code> since then:</li>\n<li>You probably do not need <code>(add-to-list 'package-selected-packages 'lsp-mode)</code> since you already install <code>lsp-mode</code> with Straight.el with <code>(use-package lsp-mode :straight t)</code>.</li>\n</ul>\n</blockquote>\n<p>I currently get the following errors when native-compiling:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">$</span><span class=\"w\"> </span><span class=\"n\">for</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"bp\">*.</span><span class=\"n\">el</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"k\">do</span><span class=\"w\"> </span><span class=\"n\">emacs</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">Q</span><span class=\"w\"> </span><span class=\"c1\">--batch -f batch-native-compile $f; done</span>\n<span class=\"n\">In</span><span class=\"w\"> </span><span class=\"n\">toplevel</span><span class=\"w\"> </span><span class=\"n\">form</span><span class=\"o\">:</span>\n<span class=\"n\">lean4</span><span class=\"bp\">-</span><span class=\"n\">fringe</span><span class=\"bp\">.</span><span class=\"n\">el</span><span class=\"o\">:</span><span class=\"mi\">35</span><span class=\"o\">:</span><span class=\"mi\">71</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Warning</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">attempt</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"k\">let</span><span class=\"bp\">-</span><span class=\"n\">bind</span><span class=\"w\"> </span><span class=\"n\">constant</span><span class=\"w\"> </span><span class=\"bp\">‘</span><span class=\"o\">:</span><span class=\"n\">range</span><span class=\"bp\">’</span>\n<span class=\"n\">In</span><span class=\"w\"> </span><span class=\"n\">lean4</span><span class=\"bp\">-</span><span class=\"n\">fringe</span><span class=\"bp\">-</span><span class=\"n\">region</span><span class=\"o\">:</span>\n<span class=\"n\">lean4</span><span class=\"bp\">-</span><span class=\"n\">fringe</span><span class=\"bp\">.</span><span class=\"n\">el</span><span class=\"o\">:</span><span class=\"mi\">35</span><span class=\"o\">:</span><span class=\"mi\">34</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Warning</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Unused</span><span class=\"w\"> </span><span class=\"n\">lexical</span><span class=\"w\"> </span><span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"bp\">‘&amp;</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"n\">LeanFileProgressProcessingInfo</span><span class=\"bp\">’</span>\n<span class=\"n\">lean4</span><span class=\"bp\">-</span><span class=\"n\">fringe</span><span class=\"bp\">.</span><span class=\"n\">el</span><span class=\"o\">:</span><span class=\"mi\">36</span><span class=\"o\">:</span><span class=\"mi\">25</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Warning</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">reference</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">free</span><span class=\"w\"> </span><span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"bp\">‘</span><span class=\"n\">range</span><span class=\"bp\">’</span>\n<span class=\"n\">lean4</span><span class=\"bp\">-</span><span class=\"n\">fringe</span><span class=\"bp\">.</span><span class=\"n\">el</span><span class=\"o\">:</span><span class=\"mi\">65</span><span class=\"o\">:</span><span class=\"mi\">76</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Warning</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">attempt</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"k\">let</span><span class=\"bp\">-</span><span class=\"n\">bind</span><span class=\"w\"> </span><span class=\"n\">constant</span><span class=\"w\"> </span><span class=\"bp\">‘</span><span class=\"o\">:</span><span class=\"n\">kind</span><span class=\"bp\">’</span>\n<span class=\"n\">In</span><span class=\"w\"> </span><span class=\"n\">lean4</span><span class=\"bp\">-</span><span class=\"n\">fringe</span><span class=\"bp\">-</span><span class=\"n\">fringe</span><span class=\"bp\">-</span><span class=\"n\">face</span><span class=\"o\">:</span>\n<span class=\"n\">lean4</span><span class=\"bp\">-</span><span class=\"n\">fringe</span><span class=\"bp\">.</span><span class=\"n\">el</span><span class=\"o\">:</span><span class=\"mi\">65</span><span class=\"o\">:</span><span class=\"mi\">39</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Warning</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Unused</span><span class=\"w\"> </span><span class=\"n\">lexical</span><span class=\"w\"> </span><span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"bp\">‘&amp;</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"n\">LeanFileProgressProcessingInfo</span><span class=\"bp\">’</span>\n<span class=\"n\">lean4</span><span class=\"bp\">-</span><span class=\"n\">fringe</span><span class=\"bp\">.</span><span class=\"n\">el</span><span class=\"o\">:</span><span class=\"mi\">67</span><span class=\"o\">:</span><span class=\"mi\">9</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Warning</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">reference</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">free</span><span class=\"w\"> </span><span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"bp\">‘</span><span class=\"n\">kind</span><span class=\"bp\">’</span>\n<span class=\"n\">lean4</span><span class=\"bp\">-</span><span class=\"n\">fringe</span><span class=\"bp\">.</span><span class=\"n\">el</span><span class=\"o\">:</span><span class=\"mi\">89</span><span class=\"o\">:</span><span class=\"mi\">73</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Warning</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">attempt</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"k\">let</span><span class=\"bp\">-</span><span class=\"n\">bind</span><span class=\"w\"> </span><span class=\"n\">constant</span><span class=\"w\"> </span><span class=\"bp\">‘</span><span class=\"o\">:</span><span class=\"n\">processing</span><span class=\"bp\">’</span>\n<span class=\"n\">lean4</span><span class=\"bp\">-</span><span class=\"n\">fringe</span><span class=\"bp\">.</span><span class=\"n\">el</span><span class=\"o\">:</span><span class=\"mi\">89</span><span class=\"o\">:</span><span class=\"mi\">85</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Warning</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">attempt</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"k\">let</span><span class=\"bp\">-</span><span class=\"n\">bind</span><span class=\"w\"> </span><span class=\"n\">constant</span><span class=\"w\"> </span><span class=\"bp\">‘</span><span class=\"o\">:</span><span class=\"n\">text</span><span class=\"bp\">-</span><span class=\"n\">document</span><span class=\"bp\">’</span>\n<span class=\"n\">In</span><span class=\"w\"> </span><span class=\"n\">lean4</span><span class=\"bp\">-</span><span class=\"n\">fringe</span><span class=\"bp\">-</span><span class=\"n\">update</span><span class=\"o\">:</span>\n<span class=\"n\">lean4</span><span class=\"bp\">-</span><span class=\"n\">fringe</span><span class=\"bp\">.</span><span class=\"n\">el</span><span class=\"o\">:</span><span class=\"mi\">89</span><span class=\"o\">:</span><span class=\"mi\">44</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Warning</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Unused</span><span class=\"w\"> </span><span class=\"n\">lexical</span><span class=\"w\"> </span><span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"bp\">‘&amp;</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"n\">LeanFileProgressParams</span><span class=\"bp\">’</span>\n<span class=\"n\">lean4</span><span class=\"bp\">-</span><span class=\"n\">fringe</span><span class=\"bp\">.</span><span class=\"n\">el</span><span class=\"o\">:</span><span class=\"mi\">93</span><span class=\"o\">:</span><span class=\"mi\">33</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Warning</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">reference</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">free</span><span class=\"w\"> </span><span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"bp\">‘</span><span class=\"n\">processing</span><span class=\"bp\">’</span>\n<span class=\"n\">In</span><span class=\"w\"> </span><span class=\"n\">lsp</span><span class=\"bp\">-</span><span class=\"n\">make</span><span class=\"bp\">-</span><span class=\"n\">lean</span><span class=\"bp\">-</span><span class=\"n\">diagnostic</span><span class=\"o\">:</span>\n<span class=\"n\">lean4</span><span class=\"bp\">-</span><span class=\"n\">info</span><span class=\"bp\">.</span><span class=\"n\">el</span><span class=\"o\">:</span><span class=\"mi\">75</span><span class=\"o\">:</span><span class=\"mi\">2</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Warning</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">docstring</span><span class=\"w\"> </span><span class=\"n\">wider</span><span class=\"w\"> </span><span class=\"n\">than</span><span class=\"w\"> </span><span class=\"mi\">80</span><span class=\"w\"> </span><span class=\"n\">characters</span>\n<span class=\"n\">lean4</span><span class=\"bp\">-</span><span class=\"n\">info</span><span class=\"bp\">.</span><span class=\"n\">el</span><span class=\"o\">:</span><span class=\"mi\">85</span><span class=\"o\">:</span><span class=\"mi\">64</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Warning</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">attempt</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"k\">let</span><span class=\"bp\">-</span><span class=\"n\">bind</span><span class=\"w\"> </span><span class=\"n\">constant</span><span class=\"w\"> </span><span class=\"bp\">‘</span><span class=\"o\">:</span><span class=\"n\">full</span><span class=\"bp\">-</span><span class=\"n\">range</span><span class=\"bp\">’</span>\n<span class=\"n\">In</span><span class=\"w\"> </span><span class=\"n\">lean4</span><span class=\"bp\">-</span><span class=\"n\">diagnostic</span><span class=\"bp\">-</span><span class=\"n\">full</span><span class=\"bp\">-</span><span class=\"n\">start</span><span class=\"bp\">-</span><span class=\"n\">line</span><span class=\"o\">:</span>\n<span class=\"n\">lean4</span><span class=\"bp\">-</span><span class=\"n\">info</span><span class=\"bp\">.</span><span class=\"n\">el</span><span class=\"o\">:</span><span class=\"mi\">85</span><span class=\"o\">:</span><span class=\"mi\">47</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Warning</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Unused</span><span class=\"w\"> </span><span class=\"n\">lexical</span><span class=\"w\"> </span><span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"bp\">‘&amp;</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"n\">Diagnostic</span><span class=\"bp\">’</span>\n<span class=\"n\">lean4</span><span class=\"bp\">-</span><span class=\"n\">info</span><span class=\"bp\">.</span><span class=\"n\">el</span><span class=\"o\">:</span><span class=\"mi\">87</span><span class=\"o\">:</span><span class=\"mi\">62</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Warning</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">attempt</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"k\">let</span><span class=\"bp\">-</span><span class=\"n\">bind</span><span class=\"w\"> </span><span class=\"n\">constant</span><span class=\"w\"> </span><span class=\"bp\">‘</span><span class=\"o\">:</span><span class=\"n\">full</span><span class=\"bp\">-</span><span class=\"n\">range</span><span class=\"bp\">’</span>\n<span class=\"n\">In</span><span class=\"w\"> </span><span class=\"n\">lean4</span><span class=\"bp\">-</span><span class=\"n\">diagnostic</span><span class=\"bp\">-</span><span class=\"n\">full</span><span class=\"bp\">-</span><span class=\"kn\">end</span><span class=\"bp\">-</span><span class=\"n\">line</span><span class=\"o\">:</span>\n<span class=\"n\">lean4</span><span class=\"bp\">-</span><span class=\"n\">info</span><span class=\"bp\">.</span><span class=\"n\">el</span><span class=\"o\">:</span><span class=\"mi\">87</span><span class=\"o\">:</span><span class=\"mi\">45</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Warning</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Unused</span><span class=\"w\"> </span><span class=\"n\">lexical</span><span class=\"w\"> </span><span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"bp\">‘&amp;</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"n\">Diagnostic</span><span class=\"bp\">’</span>\n<span class=\"n\">lean4</span><span class=\"bp\">-</span><span class=\"n\">info</span><span class=\"bp\">.</span><span class=\"n\">el</span><span class=\"o\">:</span><span class=\"mi\">291</span><span class=\"o\">:</span><span class=\"mi\">46</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Warning</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">attempt</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"k\">let</span><span class=\"bp\">-</span><span class=\"n\">bind</span><span class=\"w\"> </span><span class=\"n\">constant</span><span class=\"w\"> </span><span class=\"bp\">‘</span><span class=\"o\">:</span><span class=\"n\">goals</span><span class=\"bp\">’</span>\n<span class=\"n\">lean4</span><span class=\"bp\">-</span><span class=\"n\">info</span><span class=\"bp\">.</span><span class=\"n\">el</span><span class=\"o\">:</span><span class=\"mi\">300</span><span class=\"o\">:</span><span class=\"mi\">50</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Warning</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">attempt</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"k\">let</span><span class=\"bp\">-</span><span class=\"n\">bind</span><span class=\"w\"> </span><span class=\"n\">constant</span><span class=\"w\"> </span><span class=\"bp\">‘</span><span class=\"o\">:</span><span class=\"n\">goal</span><span class=\"bp\">’</span>\n<span class=\"n\">In</span><span class=\"w\"> </span><span class=\"n\">lean4</span><span class=\"bp\">-</span><span class=\"n\">info</span><span class=\"bp\">-</span><span class=\"n\">buffer</span><span class=\"bp\">-</span><span class=\"n\">refresh</span><span class=\"o\">:</span>\n<span class=\"n\">lean4</span><span class=\"bp\">-</span><span class=\"n\">info</span><span class=\"bp\">.</span><span class=\"n\">el</span><span class=\"o\">:</span><span class=\"mi\">291</span><span class=\"o\">:</span><span class=\"mi\">29</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Warning</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Unused</span><span class=\"w\"> </span><span class=\"n\">lexical</span><span class=\"w\"> </span><span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"bp\">‘&amp;</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"n\">PlainGoal?</span><span class=\"bp\">’</span>\n<span class=\"n\">lean4</span><span class=\"bp\">-</span><span class=\"n\">info</span><span class=\"bp\">.</span><span class=\"n\">el</span><span class=\"o\">:</span><span class=\"mi\">292</span><span class=\"o\">:</span><span class=\"mi\">26</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Warning</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">reference</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">free</span><span class=\"w\"> </span><span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"bp\">‘</span><span class=\"n\">goals</span><span class=\"bp\">’</span>\n<span class=\"n\">lean4</span><span class=\"bp\">-</span><span class=\"n\">info</span><span class=\"bp\">.</span><span class=\"n\">el</span><span class=\"o\">:</span><span class=\"mi\">300</span><span class=\"o\">:</span><span class=\"mi\">29</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Warning</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Unused</span><span class=\"w\"> </span><span class=\"n\">lexical</span><span class=\"w\"> </span><span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"bp\">‘&amp;</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"n\">PlainTermGoal?</span><span class=\"bp\">’</span>\n<span class=\"n\">lean4</span><span class=\"bp\">-</span><span class=\"n\">info</span><span class=\"bp\">.</span><span class=\"n\">el</span><span class=\"o\">:</span><span class=\"mi\">301</span><span class=\"o\">:</span><span class=\"mi\">30</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Warning</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">reference</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">free</span><span class=\"w\"> </span><span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"bp\">‘</span><span class=\"n\">goal</span><span class=\"bp\">’</span>\n</code></pre></div>",
        "id": 487023621,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1733757858
    },
    {
        "content": "<p>In particular, the <code>Warning: reference to free variable ‘goals’</code> one seems related.</p>",
        "id": 487023785,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1733757898
    },
    {
        "content": "<p>Code inside <code>eval-when-compile</code> also runs in interpreted code, according to documentation.</p>",
        "id": 487024528,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1733758063
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 487026476,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1733758443
    },
    {
        "content": "<p>Probably the original <code>eval-when-compile</code> should have been <code>eval-and-compile</code> (untested), as in <a href=\"https://github.com/emacs-lsp/emacs-ccls/pull/95\">https://github.com/emacs-lsp/emacs-ccls/pull/95</a> or <a href=\"https://github.com/emacs-lsp/lsp-mode/blob/c3be413f8545a26ad0334e1dd2b7e65c448d9f22/test/lsp-protocol-test.el#L32\">https://github.com/emacs-lsp/lsp-mode/blob/c3be413f8545a26ad0334e1dd2b7e65c448d9f22/test/lsp-protocol-test.el#L32</a> for example. I thought the difference between those macros was only visible on compiled code, but now I am not sure. Perhaps there is some Doom Emacs trickery which cares about the difference.</p>",
        "id": 487030178,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1733759274
    },
    {
        "content": "<p>Thanks, <span class=\"user-mention\" data-user-id=\"325367\">@Mauricio Collares</span>. I will look into it today :)</p>",
        "id": 487064330,
        "sender_full_name": "Mekeor Melire",
        "timestamp": 1733767605
    },
    {
        "content": "<p><a href=\"https://melpa.org/#/lsp-mode\">https://melpa.org/#/lsp-mode</a> lists packages that have lsp-mode as dependency. I used this Elisp script to determine the URLs of these packages:</p>\n<div class=\"codehilite\" data-code-language=\"EmacsLisp\"><pre><span></span><code><span class=\"p\">(</span><span class=\"nf\">mapcar</span>\n<span class=\"w\"> </span><span class=\"p\">(</span><span class=\"nb\">lambda</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"nv\">package</span><span class=\"p\">)</span>\n<span class=\"w\">   </span><span class=\"p\">(</span><span class=\"nv\">alist-get</span><span class=\"w\"> </span><span class=\"nb\">:url</span>\n<span class=\"w\">              </span><span class=\"p\">(</span><span class=\"nv\">package-desc-extras</span>\n<span class=\"w\">               </span><span class=\"p\">(</span><span class=\"nf\">car</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"nv\">alist-get</span><span class=\"w\"> </span><span class=\"nv\">package</span>\n<span class=\"w\">                               </span><span class=\"nv\">package-archive-contents</span><span class=\"p\">)))))</span>\n<span class=\"w\"> </span><span class=\"o\">'</span><span class=\"p\">(</span><span class=\"nv\">ccls</span><span class=\"w\"> </span><span class=\"nv\">consult-lsp</span><span class=\"w\"> </span><span class=\"nv\">cquery</span><span class=\"w\"> </span><span class=\"nv\">daml-lsp</span><span class=\"w\"> </span><span class=\"nv\">dap-mode</span><span class=\"w\"> </span><span class=\"nv\">elsa</span><span class=\"w\"> </span><span class=\"nv\">frontside-javascript</span>\n<span class=\"w\">        </span><span class=\"nv\">helm-lsp</span><span class=\"w\"> </span><span class=\"nv\">lsp-cfn</span><span class=\"w\"> </span><span class=\"nv\">lsp-dart</span><span class=\"w\"> </span><span class=\"nv\">lsp-docker</span><span class=\"w\"> </span><span class=\"nv\">lsp-focus</span><span class=\"w\"> </span><span class=\"nv\">lsp-grammarly</span>\n<span class=\"w\">        </span><span class=\"nv\">lsp-haskell</span><span class=\"w\"> </span><span class=\"nv\">lsp-intellij</span><span class=\"w\"> </span><span class=\"nv\">lsp-ivy</span><span class=\"w\"> </span><span class=\"nv\">lsp-java</span><span class=\"w\"> </span><span class=\"nv\">lsp-javacomp</span>\n<span class=\"w\">        </span><span class=\"nv\">lsp-jedi</span><span class=\"w\"> </span><span class=\"nv\">lsp-julia</span><span class=\"w\"> </span><span class=\"nv\">lsp-latex</span><span class=\"w\"> </span><span class=\"nv\">lsp-ltex</span><span class=\"w\"> </span><span class=\"nv\">lsp-metals</span><span class=\"w\"> </span><span class=\"nv\">lsp-mssql</span>\n<span class=\"w\">        </span><span class=\"nv\">lsp-origami</span><span class=\"w\"> </span><span class=\"nv\">lsp-p4</span><span class=\"w\"> </span><span class=\"nv\">lsp-pascal</span><span class=\"w\"> </span><span class=\"nv\">lsp-pyre</span><span class=\"w\"> </span><span class=\"nv\">lsp-pyright</span>\n<span class=\"w\">        </span><span class=\"nv\">lsp-python-ms</span><span class=\"w\"> </span><span class=\"nv\">lsp-rescript</span><span class=\"w\"> </span><span class=\"nv\">lsp-scheme</span><span class=\"w\"> </span><span class=\"nv\">lsp-shader</span><span class=\"w\"> </span><span class=\"nv\">lsp-sonarlint</span>\n<span class=\"w\">        </span><span class=\"nv\">lsp-sourcekit</span><span class=\"w\"> </span><span class=\"nv\">lsp-tailwindcss</span><span class=\"w\"> </span><span class=\"nv\">lsp-treemacs</span><span class=\"w\"> </span><span class=\"nv\">lsp-ui</span><span class=\"w\"> </span><span class=\"nv\">mos-mode</span>\n<span class=\"w\">        </span><span class=\"nv\">org-linenote</span><span class=\"w\"> </span><span class=\"nv\">sideline-lsp</span><span class=\"w\"> </span><span class=\"nv\">sway-lang-mode</span><span class=\"w\"> </span><span class=\"nv\">swift-helpful</span>\n<span class=\"w\">        </span><span class=\"nv\">verilog-ext</span><span class=\"w\"> </span><span class=\"nv\">vhdl-ext</span><span class=\"p\">))</span>\n</code></pre></div>\n<p>I git-cloned those packages that are developed by the lsp-mode developer team itself:</p>\n<div class=\"codehilite\" data-code-language=\"Bash\"><pre><span></span><code><span class=\"ch\">#!/bin/bash</span>\n<span class=\"nv\">d</span><span class=\"o\">=</span><span class=\"s2\">\"</span><span class=\"k\">$(</span>mktemp<span class=\"w\"> </span>-d<span class=\"k\">)</span><span class=\"s2\">\"</span>\n<span class=\"k\">for</span><span class=\"w\"> </span>p<span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span>dap-mode<span class=\"w\"> </span>emacs-ccls<span class=\"w\"> </span>helm-lsp<span class=\"w\"> </span>lsp-dart<span class=\"w\"> </span>lsp-docker<span class=\"w\"> </span>lsp-focus<span class=\"w\"> </span>lsp-haskell<span class=\"w\"> </span>lsp-ivy<span class=\"w\"> </span>lsp-java<span class=\"w\"> </span>lsp-metals<span class=\"w\"> </span>lsp-mssql<span class=\"w\"> </span>lsp-origami<span class=\"w\"> </span>lsp-pyright<span class=\"w\"> </span>lsp-python-ms<span class=\"w\"> </span>lsp-sonarlint<span class=\"w\"> </span>lsp-sourcekit<span class=\"w\"> </span>lsp-treemacs<span class=\"w\"> </span>lsp-ui<span class=\"p\">;</span><span class=\"w\"> </span><span class=\"k\">do</span>\n<span class=\"w\">    </span>git<span class=\"w\"> </span>clone<span class=\"w\"> </span>--depth<span class=\"w\"> </span><span class=\"m\">1</span><span class=\"w\"> </span><span class=\"s2\">\"https://github.com/emacs-lsp/</span><span class=\"nv\">$p</span><span class=\"s2\">\"</span><span class=\"w\"> </span><span class=\"s2\">\"</span><span class=\"nv\">$d</span><span class=\"s2\">/</span><span class=\"nv\">$p</span><span class=\"s2\">\"</span><span class=\"w\"> </span><span class=\"p\">&amp;</span>\n<span class=\"k\">done</span>\n</code></pre></div>\n<p>When we recursively grep all this code with grep-context 3, we can see that none of these packages uses <code>eval-when-compile</code> around <code>lsp-interface</code>.<br>\nMore specifically, based on some indendation assumption, there seem to be two packages that do not wrap their invocations of <code>lsp-interface</code> - neither into <code>eval-and-compile</code> like the other packages, nor in anything else: <a href=\"https://github.com/emacs-lsp/lsp-metals/blob/b5139c959336758a93d0e55458e6ca938d9fd16a/lsp-metals-protocol.el#L31\">lsp-metals</a> and <a href=\"https://github.com/emacs-lsp/lsp-dart/blob/7e3d3429418bc42cda7fa7b58e6644a705cf2f89/lsp-dart-protocol.el#L26\">lsp-dart</a>. But maybe these cases are just bugs.</p>",
        "id": 487116830,
        "sender_full_name": "Mekeor Melire",
        "timestamp": 1733785017
    },
    {
        "content": "<p>I didn't have the time to test if the compilation warning does not occur with eval-and-compile; will do tomorrow.</p>",
        "id": 487129170,
        "sender_full_name": "Mekeor Melire",
        "timestamp": 1733790634
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"779400\">Mekeor Melire</span> <a href=\"#narrow/channel/468104-Emacs/topic/lsp-mode.20errors.20due.20to.20list.20!.3D.20hash-table/near/487116830\">said</a>:</p>\n<blockquote>\n<p>More specifically, based on some indendation assumption, there seem to be two packages that do not wrap their invocations of <code>lsp-interface</code> - neither into <code>eval-and-compile</code> like the other packages, nor in anything else: <a href=\"https://github.com/emacs-lsp/lsp-metals/blob/b5139c959336758a93d0e55458e6ca938d9fd16a/lsp-metals-protocol.el#L31\">lsp-metals</a> and <a href=\"https://github.com/emacs-lsp/lsp-dart/blob/7e3d3429418bc42cda7fa7b58e6644a705cf2f89/lsp-dart-protocol.el#L26\">lsp-dart</a>. But maybe these cases are just bugs.</p>\n</blockquote>\n<p>Great investigation, thanks! In both of the cases you found, the <code>lsp-interface</code> invocations are in files which contain nothing else and are then <code>require</code>'d by others. As <a href=\"https://www.gnu.org/software/emacs/manual/html_node/elisp/Eval-During-Compile.html\">the <code>eval-and-compile</code> documentation</a> says, you \"can get a similar result [to <code>eval-and-compile</code>] by putting body in a separate file and referring to that file with <code>require</code>. That method is preferable when body is large. Effectively <code>require</code> is automatically <code>eval-and-compile</code>, the package is loaded both when compiling and executing.\"</p>",
        "id": 487227748,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1733831055
    },
    {
        "content": "<p>Wow, thanks :)</p>",
        "id": 487228445,
        "sender_full_name": "Mekeor Melire",
        "timestamp": 1733831263
    },
    {
        "content": "<p>I caused this trouble in the first place (I didn't know <code>eval-and-compile</code> even existed when I submitted a PR to make lean4-mode work with native compilation), so it's the least I can do. Hopefully this solves the Doom Emacs problem as well.</p>",
        "id": 487228815,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1733831386
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"325367\">@Mauricio Collares</span>, your single-line shell command for batch-native-compile did not work well for me. Here's how I did it:</p>\n<p>I launched an Emacs instance that only has the dependencies of lean4-mode installed:</p>\n<div class=\"codehilite\" data-code-language=\"EmacsLisp\"><pre><span></span><code><span class=\"p\">(</span><span class=\"nv\">package-isolate</span>\n<span class=\"w\"> </span><span class=\"p\">(</span><span class=\"nv\">seq-mapcat</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"nb\">lambda</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"nv\">p</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"nv\">alist-get</span><span class=\"w\"> </span><span class=\"nv\">p</span><span class=\"w\"> </span><span class=\"nv\">package-alist</span><span class=\"p\">))</span>\n<span class=\"w\">             </span><span class=\"o\">'</span><span class=\"p\">(</span><span class=\"nv\">dash</span><span class=\"w\"> </span><span class=\"nv\">lsp-mode</span><span class=\"w\"> </span><span class=\"nv\">magit-section</span><span class=\"p\">)))</span>\n</code></pre></div>\n<p>I copied and modified the command line with which that Emacs process was invoked, ending up with this Shell command:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">for</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">lean4</span><span class=\"bp\">-*.</span><span class=\"n\">el</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"k\">do</span>\n<span class=\"w\">    </span><span class=\"n\">emacs</span><span class=\"w\"> </span><span class=\"c1\">--batch \\</span>\n<span class=\"w\">          </span><span class=\"c1\">--quick \\</span>\n<span class=\"w\">          </span><span class=\"bp\">-</span><span class=\"n\">L</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"w\"> </span><span class=\"bp\">\\</span>\n<span class=\"w\">          </span><span class=\"c1\">--eval=\"(progn</span>\n<span class=\"w\">            </span><span class=\"o\">(</span><span class=\"n\">require</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">package</span><span class=\"o\">)</span>\n<span class=\"w\">            </span><span class=\"o\">(</span><span class=\"n\">add</span><span class=\"bp\">-</span><span class=\"n\">to</span><span class=\"bp\">-</span><span class=\"n\">list</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">package</span><span class=\"bp\">-</span><span class=\"n\">directory</span><span class=\"bp\">-</span><span class=\"n\">list</span><span class=\"w\"> </span><span class=\"bp\">\\</span><span class=\"s2\">\"~/.emacs.d/elpa</span><span class=\"se\">\\\"</span><span class=\"s2\">)</span>\n<span class=\"s2\">            (add-to-list 'package-directory-list</span>\n<span class=\"s2\">                         </span><span class=\"se\">\\\"</span><span class=\"s2\">/usr/local/share/emacs/30.0.91/site-lisp/elpa</span><span class=\"se\">\\\"</span><span class=\"s2\">)</span>\n<span class=\"s2\">            (add-to-list 'package-directory-list</span>\n<span class=\"s2\">                         </span><span class=\"se\">\\\"</span><span class=\"s2\">/usr/local/share/emacs/site-lisp/elpa</span><span class=\"se\">\\\"</span><span class=\"s2\">)</span>\n<span class=\"s2\">            (setq package-load-list</span>\n<span class=\"s2\">                  '((spinner </span><span class=\"se\">\\\"</span><span class=\"s2\">1.7.4</span><span class=\"se\">\\\"</span><span class=\"s2\">)</span>\n<span class=\"s2\">                    (s </span><span class=\"se\">\\\"</span><span class=\"s2\">20220902.1511</span><span class=\"se\">\\\"</span><span class=\"s2\">)</span>\n<span class=\"s2\">                    (magit-section </span><span class=\"se\">\\\"</span><span class=\"s2\">4.1.3</span><span class=\"se\">\\\"</span><span class=\"s2\">)</span>\n<span class=\"s2\">                    (markdown-mode </span><span class=\"se\">\\\"</span><span class=\"s2\">2.6</span><span class=\"se\">\\\"</span><span class=\"s2\">)</span>\n<span class=\"s2\">                    (lv </span><span class=\"se\">\\\"</span><span class=\"s2\">0.15.0</span><span class=\"se\">\\\"</span><span class=\"s2\">)</span>\n<span class=\"s2\">                    (lsp-mode </span><span class=\"se\">\\\"</span><span class=\"s2\">20241202.334</span><span class=\"se\">\\\"</span><span class=\"s2\">)</span>\n<span class=\"s2\">                    (ht </span><span class=\"se\">\\\"</span><span class=\"s2\">20230703.558</span><span class=\"se\">\\\"</span><span class=\"s2\">)</span>\n<span class=\"s2\">                    (f </span><span class=\"se\">\\\"</span><span class=\"s2\">20241003.1131</span><span class=\"se\">\\\"</span><span class=\"s2\">)</span>\n<span class=\"s2\">                    (dash </span><span class=\"se\">\\\"</span><span class=\"s2\">2.19.1</span><span class=\"se\">\\\"</span><span class=\"s2\">)))</span>\n<span class=\"s2\">            (package-initialize))\"</span><span class=\"w\"> </span><span class=\"bp\">\\</span>\n<span class=\"w\">          </span><span class=\"bp\">-</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">batch</span><span class=\"bp\">-</span><span class=\"n\">native</span><span class=\"bp\">-</span><span class=\"n\">compile</span><span class=\"w\"> </span><span class=\"bp\">\\</span>\n<span class=\"w\">          </span><span class=\"s2\">\"$f\"</span>\n<span class=\"n\">done</span>\n</code></pre></div>",
        "id": 487325602,
        "sender_full_name": "Mekeor Melire",
        "timestamp": 1733858641
    },
    {
        "content": "<p>Anyway, the result is that <code>eval-and-compile</code> does indeed remove the warning you mentioned. :)</p>",
        "id": 487325693,
        "sender_full_name": "Mekeor Melire",
        "timestamp": 1733858665
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"472787\">@Mahdi Khaleghi</span>, I pushed the changes. Please try it out and report back your experience :)</p>",
        "id": 487327310,
        "sender_full_name": "Mekeor Melire",
        "timestamp": 1733859287
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"779400\">Mekeor Melire</span> <a href=\"#narrow/channel/468104-Emacs/topic/lsp-mode.20errors.20due.20to.20list.20!.3D.20hash-table/near/487327310\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"472787\">Mahdi Khaleghi</span>, I pushed the changes. Please try it out and report back your experience :)</p>\n</blockquote>\n<p>Oh sure. I was diving into lean4-mode.el to find the error :D</p>",
        "id": 487329752,
        "sender_full_name": "Mahdi Khaleghi",
        "timestamp": 1733860258
    },
    {
        "content": "<p>yes it's fixed. thanks a lot <span class=\"user-mention\" data-user-id=\"779400\">@Mekeor Melire</span> <span class=\"user-mention\" data-user-id=\"325367\">@Mauricio Collares</span> <span class=\"user-mention\" data-user-id=\"214703\">@Yury G. Kudryashov</span></p>",
        "id": 487330131,
        "sender_full_name": "Mahdi Khaleghi",
        "timestamp": 1733860434
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"472787\">Mahdi Khaleghi</span> has marked this topic as resolved.</p>",
        "id": 487330857,
        "sender_full_name": "Notification Bot",
        "timestamp": 1733860702
    },
    {
        "content": "<p>Thanks for reporting :)</p>",
        "id": 487331680,
        "sender_full_name": "Mekeor Melire",
        "timestamp": 1733861006
    },
    {
        "content": "<p>I'll release latest master as version 1.1.2 now.</p>",
        "id": 487331724,
        "sender_full_name": "Mekeor Melire",
        "timestamp": 1733861030
    }
]