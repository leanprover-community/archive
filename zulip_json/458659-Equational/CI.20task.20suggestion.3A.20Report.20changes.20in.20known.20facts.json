[
    {
        "content": "<p>Here is a nice task for those who like writing Github Actions:</p>\n<p>Write a bot that builds the project at the base branch and the PR branch (maybe with <code>debug.byAsSorry</code> to be fast), collects the results, and reports how our summary numbers (implications, anti-implications, implied implications, implied anti-implications) have changed in this PR.</p>",
        "id": 474217794,
        "sender_full_name": "Joachim Breitner",
        "timestamp": 1727854048
    },
    {
        "content": "<p>Is there already a script in the main branch that outputs this info?</p>",
        "id": 474240664,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1727860205
    },
    {
        "content": "<p>I might get to it today or tomorrow</p>",
        "id": 474240695,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1727860213
    },
    {
        "content": "<p>I see several threads on this topic, hence the question</p>",
        "id": 474240743,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1727860231
    },
    {
        "content": "<p><code>extract_implications</code> kinda does it, but produces huge output (i.e you'd still have to tally the lists).<br>\nMaybe add a <code>--stats</code> mode to it that just prints the stats in json format,and post-process that.</p>",
        "id": 474240970,
        "sender_full_name": "Joachim Breitner",
        "timestamp": 1727860287
    },
    {
        "content": "<p>There is <code>lake exe extract_implications outcomes --hist</code></p>",
        "id": 474245521,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1727861639
    },
    {
        "content": "<p>Thanks!</p>\n<p>For finding the right base branch, </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">git</span><span class=\"w\"> </span><span class=\"n\">merge</span><span class=\"bp\">-</span><span class=\"n\">base</span><span class=\"w\"> </span><span class=\"n\">origin</span><span class=\"bp\">/$</span><span class=\"o\">{{</span><span class=\"w\"> </span><span class=\"n\">github</span><span class=\"bp\">.</span><span class=\"n\">base_ref</span><span class=\"w\"> </span><span class=\"o\">}}</span><span class=\"w\"> </span><span class=\"n\">HEAD</span>\n</code></pre></div>\n<p>is used for a similar task in other projects where I have seen that.<br>\nMay need</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"w\">    </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">uses</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">actions</span><span class=\"bp\">/</span><span class=\"n\">checkout</span><span class=\"bp\">@</span><span class=\"n\">v4</span>\n<span class=\"w\">      </span><span class=\"k\">with</span><span class=\"o\">:</span>\n<span class=\"w\">        </span><span class=\"bp\">#</span><span class=\"w\"> </span><span class=\"n\">fetch</span><span class=\"w\"> </span><span class=\"n\">full</span><span class=\"w\"> </span><span class=\"n\">history</span><span class=\"w\"> </span><span class=\"n\">so</span><span class=\"w\"> </span><span class=\"n\">that</span><span class=\"w\"> </span><span class=\"n\">git</span><span class=\"w\"> </span><span class=\"n\">merge</span><span class=\"bp\">-</span><span class=\"n\">base</span><span class=\"w\"> </span><span class=\"n\">works</span>\n<span class=\"w\">        </span><span class=\"n\">fetch</span><span class=\"bp\">-</span><span class=\"n\">depth</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0</span>\n<span class=\"w\">        </span><span class=\"bp\">#</span><span class=\"w\"> </span><span class=\"n\">fetch</span><span class=\"w\"> </span><span class=\"n\">PR</span><span class=\"w\"> </span><span class=\"n\">commit</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">predicted</span><span class=\"w\"> </span><span class=\"n\">merge</span><span class=\"w\"> </span><span class=\"n\">commit</span>\n<span class=\"w\">        </span><span class=\"n\">ref</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"o\">{{</span><span class=\"w\"> </span><span class=\"n\">github</span><span class=\"bp\">.</span><span class=\"n\">event</span><span class=\"bp\">.</span><span class=\"n\">pull_request</span><span class=\"bp\">.</span><span class=\"n\">head</span><span class=\"bp\">.</span><span class=\"n\">sha</span><span class=\"w\"> </span><span class=\"o\">}}</span>\n</code></pre></div>\n<p>in the workflow</p>",
        "id": 474249334,
        "sender_full_name": "Joachim Breitner",
        "timestamp": 1727862845
    },
    {
        "content": "<p>Should I create an explicit task for this, or is this something that someone can just do directly with an issue or pr?</p>",
        "id": 474296443,
        "sender_full_name": "Terence Tao",
        "timestamp": 1727875346
    },
    {
        "content": "<p>I think this is easiest for project contributors because we already have the permissions.</p>",
        "id": 474296704,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1727875427
    },
    {
        "content": "<p>I am on a different time crunch which is why I am <strong>not</strong> doing it right away</p>",
        "id": 474296744,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1727875439
    },
    {
        "content": "<p>Ok then i will not make an explicit project task for this.</p>",
        "id": 474299034,
        "sender_full_name": "Terence Tao",
        "timestamp": 1727876018
    },
    {
        "content": "<blockquote>\n<p>and reports how our summary numbers (implications, anti-implications, implied implications, implied anti-implications) have changed in this PR</p>\n</blockquote>\n<p>Do you mean mean a bot that would post on zulip? Or something that updates the webpage? (Both sound to me like good ideas.) Or something else?</p>",
        "id": 474303135,
        "sender_full_name": "David Renshaw",
        "timestamp": 1727877061
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"243791\">David Renshaw</span> <a href=\"#narrow/stream/458659-Equational/topic/CI.20task.20suggestion.3A.20Report.20changes.20in.20known.20facts/near/474303135\">said</a>:</p>\n<blockquote>\n<blockquote>\n<p>and reports how our summary numbers (implications, anti-implications, implied implications, implied anti-implications) have changed in this PR</p>\n</blockquote>\n<p>Do you mean mean a bot that would post on zulip? Or something that updates the webpage? (Both sound to me like good ideas.) Or something else?</p>\n</blockquote>\n<p>Iâ€™d expect a comment on the PR</p>",
        "id": 474315842,
        "sender_full_name": "Joachim Breitner",
        "timestamp": 1727879872
    },
    {
        "content": "<p>Here's my go at making something that updates the website: <a href=\"#narrow/stream/458659-Equational/topic/proposal.3A.20add.20a.20dashboard.20page.20to.20the.20website/near/474364688\">https://leanprover.zulipchat.com/#narrow/stream/458659-Equational/topic/proposal.3A.20add.20a.20dashboard.20page.20to.20the.20website/near/474364688</a></p>",
        "id": 474365261,
        "sender_full_name": "David Renshaw",
        "timestamp": 1727892754
    },
    {
        "content": "<p>Will merge right away</p>",
        "id": 474365378,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1727892809
    },
    {
        "content": "<p>This helps people see the graph live and then if there are suggestions for improvement we can change it later</p>",
        "id": 474365543,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1727892854
    },
    {
        "content": "<p>(It passes CI)</p>",
        "id": 474365597,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1727892877
    },
    {
        "content": "<p>Suggestions for additions to the dashboard:</p>\n<ul>\n<li>Links to files for each of the statistics given (i.e., a link to a text file of explicitly true implications, a list of implicitly true implications, etc.).</li>\n<li>Stats about equivalence classes: how many equivalence classes of equations are there?  How many unknown implications are there after quotienting by equivalence?  See <a href=\"https://github.com/teorth/equational_theories/pull/176\">equational#176</a>.  </li>\n<li>A list (and count) of \"equivalence-closing\" implications - implications that, if proven, would generate an equivalence because the converse is already established.  See <a href=\"https://github.com/teorth/equational_theories/pull/188\">equational#188</a>.</li>\n<li>Similar stats, but only for the equations considered in <code>Equations.lean</code>.  Here one can also add a Hasse diagram, as it is small enough to be human digestible. See <a href=\"https://github.com/teorth/equational_theories/pull/183\">equational#183</a>.</li>\n</ul>",
        "id": 474367005,
        "sender_full_name": "Terence Tao",
        "timestamp": 1727893379
    }
]