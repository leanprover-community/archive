[
    {
        "content": "<p>Also I think we crossed the 4000 file mark. Many of our files can be rather large too. Can someone get a line count of our project (both overall and lean only counts for comparison with Mathlib which has ~6500ish files).</p>",
        "id": 512024337,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1744621221
    },
    {
        "content": "<table>\n<thead>\n<tr>\n<th>Language</th>\n<th>Files</th>\n<th>Blank</th>\n<th>Comment</th>\n<th>Code</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Python</td>\n<td>2981</td>\n<td>200,733</td>\n<td>376,196</td>\n<td>658,413</td>\n</tr>\n<tr>\n<td>SVG</td>\n<td>5</td>\n<td>1</td>\n<td>31,677</td>\n<td>213,111</td>\n</tr>\n<tr>\n<td>Lean</td>\n<td>1307</td>\n<td>14,723</td>\n<td>8,182</td>\n<td>140,193</td>\n</tr>\n<tr>\n<td>Text</td>\n<td>87</td>\n<td>3,561</td>\n<td>0</td>\n<td>93,144</td>\n</tr>\n<tr>\n<td>CSV</td>\n<td>30</td>\n<td>0</td>\n<td>0</td>\n<td>36,702</td>\n</tr>\n<tr>\n<td>C</td>\n<td>10</td>\n<td>250</td>\n<td>263</td>\n<td>30,516</td>\n</tr>\n<tr>\n<td>Cython</td>\n<td>43</td>\n<td>5,888</td>\n<td>2,272</td>\n<td>28,971</td>\n</tr>\n<tr>\n<td>HTML</td>\n<td>38</td>\n<td>7,145</td>\n<td>4</td>\n<td>26,999</td>\n</tr>\n<tr>\n<td>C/C++ Header</td>\n<td>77</td>\n<td>2,433</td>\n<td>5,347</td>\n<td>15,573</td>\n</tr>\n<tr>\n<td>JavaScript</td>\n<td>17</td>\n<td>2,279</td>\n<td>668</td>\n<td>13,856</td>\n</tr>\n<tr>\n<td>JSON</td>\n<td>17</td>\n<td>0</td>\n<td>0</td>\n<td>13,338</td>\n</tr>\n<tr>\n<td>TeX</td>\n<td>54</td>\n<td>1,342</td>\n<td>92</td>\n<td>6,705</td>\n</tr>\n<tr>\n<td>Markdown</td>\n<td>92</td>\n<td>424</td>\n<td>0</td>\n<td>3,962</td>\n</tr>\n<tr>\n<td>Ruby</td>\n<td>18</td>\n<td>407</td>\n<td>153</td>\n<td>1,964</td>\n</tr>\n<tr>\n<td>YAML</td>\n<td>12</td>\n<td>183</td>\n<td>53</td>\n<td>1,057</td>\n</tr>\n<tr>\n<td>Fortran 90</td>\n<td>55</td>\n<td>126</td>\n<td>86</td>\n<td>924</td>\n</tr>\n<tr>\n<td>Haskell</td>\n<td>11</td>\n<td>137</td>\n<td>39</td>\n<td>919</td>\n</tr>\n<tr>\n<td>CSS</td>\n<td>12</td>\n<td>104</td>\n<td>13</td>\n<td>569</td>\n</tr>\n<tr>\n<td>Fortran 77</td>\n<td>22</td>\n<td>26</td>\n<td>50</td>\n<td>383</td>\n</tr>\n<tr>\n<td>Elm</td>\n<td>2</td>\n<td>49</td>\n<td>4</td>\n<td>366</td>\n</tr>\n<tr>\n<td>Bourne Shell</td>\n<td>10</td>\n<td>58</td>\n<td>90</td>\n<td>267</td>\n</tr>\n<tr>\n<td>reStructuredText</td>\n<td>2</td>\n<td>74</td>\n<td>1</td>\n<td>216</td>\n</tr>\n<tr>\n<td>XML</td>\n<td>2</td>\n<td>1</td>\n<td>0</td>\n<td>186</td>\n</tr>\n<tr>\n<td>Meson</td>\n<td>5</td>\n<td>36</td>\n<td>9</td>\n<td>162</td>\n</tr>\n<tr>\n<td>C++</td>\n<td>1</td>\n<td>13</td>\n<td>14</td>\n<td>143</td>\n</tr>\n<tr>\n<td>TypeScript</td>\n<td>1</td>\n<td>14</td>\n<td>5</td>\n<td>101</td>\n</tr>\n<tr>\n<td>Fish Shell</td>\n<td>1</td>\n<td>19</td>\n<td>14</td>\n<td>70</td>\n</tr>\n<tr>\n<td>PowerShell</td>\n<td>3</td>\n<td>19</td>\n<td>12</td>\n<td>63</td>\n</tr>\n<tr>\n<td>C Shell</td>\n<td>1</td>\n<td>13</td>\n<td>7</td>\n<td>35</td>\n</tr>\n<tr>\n<td>INI</td>\n<td>3</td>\n<td>5</td>\n<td>0</td>\n<td>34</td>\n</tr>\n<tr>\n<td>TOML</td>\n<td>1</td>\n<td>8</td>\n<td>0</td>\n<td>30</td>\n</tr>\n<tr>\n<td>Nix</td>\n<td>1</td>\n<td>0</td>\n<td>0</td>\n<td>18</td>\n</tr>\n<tr>\n<td>Snakemake</td>\n<td>16</td>\n<td>0</td>\n<td>0</td>\n<td>16</td>\n</tr>\n<tr>\n<td>SCSS</td>\n<td>1</td>\n<td>3</td>\n<td>0</td>\n<td>14</td>\n</tr>\n<tr>\n<td>Scheme</td>\n<td>1</td>\n<td>0</td>\n<td>0</td>\n<td>12</td>\n</tr>\n<tr>\n<td>Fortran 95</td>\n<td>1</td>\n<td>0</td>\n<td>1</td>\n<td>4</td>\n</tr>\n<tr>\n<td>DOS Batch</td>\n<td>1</td>\n<td>2</td>\n<td>4</td>\n<td>3</td>\n</tr>\n<tr>\n<td>Unity-Prefab</td>\n<td>1</td>\n<td>0</td>\n<td>0</td>\n<td>2</td>\n</tr>\n<tr>\n<td><strong>Total</strong></td>\n<td>4942</td>\n<td>240,076</td>\n<td>425,256</td>\n<td>1,289,041</td>\n</tr>\n</tbody>\n</table>",
        "id": 512058557,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1744631424
    },
    {
        "content": "<p><code>lake build</code> shows 4004 files. Does this include all the dependency files as well?</p>",
        "id": 512058895,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1744631526
    },
    {
        "content": "<p>also where did we use haskell, fortran 77, fortran 90, and elm?</p>",
        "id": 512059009,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1744631565
    },
    {
        "content": "<p>No, it excludes everything in <code>.lake</code>, <code>.venv</code>, <code>.vscode</code>, <code>data</code>, <code>.github</code>.</p>",
        "id": 512059113,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1744631596
    },
    {
        "content": "<p>If you look at the <code>equational_theories</code> directory only you get the following: </p>\n<table>\n<thead>\n<tr>\n<th>Language</th>\n<th>Files</th>\n<th>Blank</th>\n<th>Comment</th>\n<th>Code</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Lean</td>\n<td>1304</td>\n<td>14,687</td>\n<td>8,163</td>\n<td>139,941</td>\n</tr>\n<tr>\n<td>C</td>\n<td>4</td>\n<td>131</td>\n<td>96</td>\n<td>28,678</td>\n</tr>\n<tr>\n<td>Text</td>\n<td>17</td>\n<td>2,992</td>\n<td>0</td>\n<td>11,036</td>\n</tr>\n<tr>\n<td>Python</td>\n<td>30</td>\n<td>855</td>\n<td>531</td>\n<td>3,785</td>\n</tr>\n<tr>\n<td>Ruby</td>\n<td>10</td>\n<td>284</td>\n<td>85</td>\n<td>1,359</td>\n</tr>\n<tr>\n<td>Haskell</td>\n<td>11</td>\n<td>137</td>\n<td>39</td>\n<td>919</td>\n</tr>\n<tr>\n<td>Markdown</td>\n<td>14</td>\n<td>161</td>\n<td>0</td>\n<td>411</td>\n</tr>\n<tr>\n<td>Bourne Shell</td>\n<td>1</td>\n<td>10</td>\n<td>23</td>\n<td>74</td>\n</tr>\n<tr>\n<td>Scheme</td>\n<td>1</td>\n<td>0</td>\n<td>0</td>\n<td>12</td>\n</tr>\n<tr>\n<td>C/C++ Header</td>\n<td>2</td>\n<td>3</td>\n<td>0</td>\n<td>10</td>\n</tr>\n<tr>\n<td>XML</td>\n<td>1</td>\n<td>1</td>\n<td>0</td>\n<td>5</td>\n</tr>\n<tr>\n<td>JSON</td>\n<td>2</td>\n<td>0</td>\n<td>0</td>\n<td>2</td>\n</tr>\n<tr>\n<td><strong>Total</strong></td>\n<td>1397</td>\n<td>19,261</td>\n<td>8,937</td>\n<td>186,232</td>\n</tr>\n</tbody>\n</table>",
        "id": 512062172,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1744632402
    },
    {
        "content": "<p>Where are the other ~650k lines of python coming from?</p>",
        "id": 512062422,
        "sender_full_name": "Aaron Hill",
        "timestamp": 1744632469
    },
    {
        "content": "<p>7 messages were moved here from <a class=\"stream-topic\" data-stream-id=\"458659\" href=\"/#narrow/channel/458659-Equational/topic/Crowdsourcing.20the.20proof.20of.201729.20.21.3D.20817/with/507397066\">#Equational &gt; Crowdsourcing the proof of 1729 != 817</a> by <span class=\"user-mention silent\" data-user-id=\"466334\">Shreyas Srinivas</span>.</p>",
        "id": 512062429,
        "sender_full_name": "Notification Bot",
        "timestamp": 1744632472
    },
    {
        "content": "<p>the scripts folder I suppose. I still don't see where we get any fortran, let alone three different versions of Fortran (77/90/95) from. Why does lake claim that there are 4004 files?</p>",
        "id": 512062664,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1744632537
    },
    {
        "content": "<p>what technique was used to get these numbers <span class=\"user-mention\" data-user-id=\"556875\">@Pietro Monticone</span> ?</p>",
        "id": 512065126,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1744633282
    },
    {
        "content": "<p>I have just run <code>cloc</code>.</p>",
        "id": 512065249,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1744633314
    },
    {
        "content": "<p>Running </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"w\"> </span><span class=\"n\">Elab</span><span class=\"w\"> </span><span class=\"n\">Command</span>\n<span class=\"n\">run_cmd</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">all</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">getEnv</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">allImportedModuleNames</span>\n<span class=\"w\">  </span><span class=\"n\">dbg_trace</span><span class=\"w\"> </span><span class=\"n\">all</span><span class=\"bp\">.</span><span class=\"n\">size</span>\n</code></pre></div>\n<p>in the <a href=\"https://github.com/teorth/equational_theories/blob/main/equational_theories.lean\">build file</a> I get the number of total files (project + imports not necessarily used): 5003.</p>",
        "id": 512065852,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1744633453
    },
    {
        "content": "<p>yeah, but I don't think <code>lake build</code> counts the dependencies</p>",
        "id": 512065996,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1744633501
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Bash Session\"><pre><span></span><code><span class=\"gp\">$ </span>cloc<span class=\"w\"> </span>.<span class=\"w\"> </span>--exclude-dir<span class=\"o\">=</span>.lake,.git\n<span class=\"go\">    1709 text files.</span>\n<span class=\"go\">    1695 unique files.</span>\n<span class=\"go\">     100 files ignored.</span>\n\n<span class=\"go\">github.com/AlDanial/cloc v 1.90  T=2.04 s (788.9 files/s, 240296.7 lines/s)</span>\n<span class=\"go\">-------------------------------------------------------------------------------</span>\n<span class=\"go\">Language                     files          blank        comment           code</span>\n<span class=\"go\">-------------------------------------------------------------------------------</span>\n<span class=\"go\">SVG                              4              1          31677         213031</span>\n<span class=\"go\">Lean                          1307          14723           8182         140193</span>\n<span class=\"go\">C                                4            131             96          28678</span>\n<span class=\"go\">JavaScript                       9           2004            608          11648</span>\n<span class=\"go\">JSON                            14              0              0          10542</span>\n<span class=\"go\">Python                          52           1558            837           6769</span>\n<span class=\"go\">TeX                             52           1342             92           5607</span>\n<span class=\"go\">Markdown                        89            399              0           3861</span>\n<span class=\"go\">Ruby                            18            407            153           1964</span>\n<span class=\"go\">HTML                             9            231              4           1586</span>\n<span class=\"go\">YAML                            12            183             53           1057</span>\n<span class=\"go\">Haskell                         11            137             39            919</span>\n<span class=\"go\">CSS                              5             55              9            366</span>\n<span class=\"go\">Elm                              2             49              4            366</span>\n<span class=\"go\">Bourne Shell                    10             58             90            267</span>\n<span class=\"go\">XML                              2              1              0            186</span>\n<span class=\"go\">TypeScript                       1             14              5            101</span>\n<span class=\"go\">TOML                             1              8              0             30</span>\n<span class=\"go\">Nix                              1              0              0             18</span>\n<span class=\"go\">PowerShell                       2              7              9             17</span>\n<span class=\"go\">Sass                             1              3              0             14</span>\n<span class=\"go\">Scheme                           1              0              0             12</span>\n<span class=\"go\">C/C++ Header                     2              3              0             10</span>\n<span class=\"go\">DOS Batch                        1              2              4              3</span>\n<span class=\"go\">-------------------------------------------------------------------------------</span>\n<span class=\"go\">SUM:                          1610          21316          41862         427245</span>\n<span class=\"go\">-------------------------------------------------------------------------------</span>\n</code></pre></div>",
        "id": 512066077,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1744633527
    },
    {
        "content": "<p>I'm not getting any fortran</p>",
        "id": 512066226,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1744633565
    },
    {
        "content": "<p><del>the first line that seems likely to be an error is Elm</del></p>",
        "id": 512066392,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1744633612
    },
    {
        "content": "<p>It might be because of <code>.gitignore</code>d stuff.</p>",
        "id": 512066510,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1744633650
    },
    {
        "content": "<p>The finite magma explorer uses  Elm</p>",
        "id": 512066520,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1744633652
    },
    {
        "content": "<p>yeah actually all of these seem to be real hits, this is just an incredibly multi-lingual project</p>",
        "id": 512066588,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1744633674
    },
    {
        "content": "<p>And the app uses Haskell.</p>",
        "id": 512066594,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1744633675
    },
    {
        "content": "<p>ah, the scheme is a false hit (not sure what <a href=\"https://github.com/teorth/equational_theories/blob/main/equational_theories/Generated/VampireProven/src/finsched.sch\">finsched.sch</a> is but it's definitely not scheme; I guess vampire has some custom format for scheduling?)</p>",
        "id": 512066773,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1744633720
    },
    {
        "content": "<p>I can't find scheme files right away, but aren't there like a gazillion flavours of scheme</p>",
        "id": 512067018,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1744633801
    },
    {
        "content": "<p>More relevant to lean : where are the 4004 build targets of lake build coming from? can we list them explicitly without building everything?</p>",
        "id": 512067211,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1744633849
    },
    {
        "content": "<p>probably parts of mathlib are involved there</p>",
        "id": 512067397,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1744633895
    },
    {
        "content": "<p>I managed to confirm all of the languages listed except for the Scheme mis-classification</p>",
        "id": 512067798,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1744633995
    },
    {
        "content": "<p>Yes, the <code>finsched.sch</code> file is considered Scheme by <code>cloc</code> (see <a href=\"https://github.com/AlDanial/cloc?tab=readme-ov-file#recognized-languages-\">docs</a>).</p>",
        "id": 512068405,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1744634179
    },
    {
        "content": "<p>do you have .f90 files in your local copy?</p>",
        "id": 512069481,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1744634517
    },
    {
        "content": "<p>Yes, but in the <code>.venv</code> I stupidly forgot to exclude at the beginning (more precisely I forgot a <code>,</code> between <code>.venv</code> and <code>.vscode</code> in the <code>--exclude-dir</code> list).</p>\n<p>Numpy uses Fortran.</p>",
        "id": 512069727,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1744634589
    },
    {
        "content": "<p>I think even in terms of raw stats, we accomplished something spectacular here. While I am aware that a lot of the lean files are autogenerated, 1307 files is not a small number (although ungolfed and somewhat disorganised). Many of these files are massive. It has been 6 months more or less.</p>",
        "id": 512071046,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1744634952
    },
    {
        "content": "<p>I will golf the latest changes later today.</p>\n<p>In the meantime, the next major objective is bumping to the latest stable toolchain (<code>v4.18.0</code>).  Any help would be greatly appreciated.</p>",
        "id": 512071872,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1744635167
    },
    {
        "content": "<p>All the errors I get right now when running lake update are docgen errors</p>",
        "id": 512073108,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1744635489
    },
    {
        "content": "<p>and lake is simply choosing to update to v4.18.0 even when the mathlib depedency rev is set to v4.15.0. I really wish there was a lake command that just updated the toolchain to a specified version.</p>",
        "id": 512073179,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1744635514
    },
    {
        "content": "<p>In fact it would be nicer still if we could say something <code>lake pin v4.18.0</code> and lake did just that instead of forcing toolchain updates every time cache is called.</p>",
        "id": 512075109,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1744636035
    },
    {
        "content": "<p>We never finished <a class=\"stream-topic\" data-stream-id=\"458659\" href=\"/#narrow/channel/458659-Equational/topic/A.20final.20end-to-end.20theorem.20in.20Lean/with/477384391\">#Equational &gt; A final end-to-end theorem in Lean</a> :(</p>",
        "id": 512076899,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1744636501
    },
    {
        "content": "<p>Oh. Wasn’t that because we couldn’t get native decide to be accepted by lean4checker</p>",
        "id": 512082176,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1744637853
    },
    {
        "content": "<p>FWIW, we could still finish it.</p>",
        "id": 512082306,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1744637886
    }
]