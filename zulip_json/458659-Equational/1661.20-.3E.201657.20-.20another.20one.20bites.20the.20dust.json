[
    {
        "content": "<p>The nice infinite model shown on the screenshot proves that 1661 does not imply 1657. I think this'll  settle<code>1661-&gt;1659?</code> negatively as well, and several others. I'm cleaning up / finishing off the Lean proof now.<br>\n<a href=\"/user_uploads/3121/mJe6AGf5-UN8tD0T-LVq_B6p/1661-1657.png\">1661-1657.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/mJe6AGf5-UN8tD0T-LVq_B6p/1661-1657.png\" title=\"1661-1657.png\"><img data-original-dimensions=\"541x977\" src=\"/user_uploads/thumbnail/3121/mJe6AGf5-UN8tD0T-LVq_B6p/1661-1657.png/840x560.webp\"></a></div>",
        "id": 476037184,
        "sender_full_name": "Zoltan A. Kocsis (Z.A.K.)",
        "timestamp": 1728539475
    },
    {
        "content": "<p>Notes: the operation is basically<br>\n<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mo>⋄</mo><mi>y</mi><mo>=</mo><mrow><mo fence=\"true\">{</mo><mtable rowspacing=\"0.36em\" columnalign=\"left left\" columnspacing=\"1em\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mrow><mi>x</mi><mo>−</mo><mn>1</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mrow><mtext>if </mtext><mi>x</mi><mo separator=\"true\">,</mo><mi>y</mi><mtext> same parity</mtext><mo separator=\"true\">,</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mrow><mi>x</mi><mo>+</mo><mn>1</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mrow><mtext>if </mtext><mi>x</mi><mo separator=\"true\">,</mo><mi>y</mi><mtext> opposite parity</mtext><mi mathvariant=\"normal\">.</mi></mrow></mstyle></mtd></mtr></mtable></mrow></mrow><annotation encoding=\"application/x-tex\">x \\diamond y = \\begin{cases}    x-1 &amp; \\text{if }x,y \\text{ same parity}, \\\\    x+1 &amp; \\text{if }x,y \\text{ opposite parity}.\\end{cases}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4445em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">⋄</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:3em;vertical-align:-1.25em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size4\">{</span></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-l\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.69em;\"><span style=\"top:-3.69em;\"><span class=\"pstrut\" style=\"height:3.008em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\">1</span></span></span><span style=\"top:-2.25em;\"><span class=\"pstrut\" style=\"height:3.008em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.19em;\"><span></span></span></span></span></span><span class=\"arraycolsep\" style=\"width:1em;\"></span><span class=\"col-align-l\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.69em;\"><span style=\"top:-3.69em;\"><span class=\"pstrut\" style=\"height:3.008em;\"></span><span class=\"mord\"><span class=\"mord text\"><span class=\"mord\">if </span></span><span class=\"mord mathnormal\">x</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mord text\"><span class=\"mord\"> same parity</span></span><span class=\"mpunct\">,</span></span></span><span style=\"top:-2.25em;\"><span class=\"pstrut\" style=\"height:3.008em;\"></span><span class=\"mord\"><span class=\"mord text\"><span class=\"mord\">if </span></span><span class=\"mord mathnormal\">x</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mord text\"><span class=\"mord\"> opposite parity</span></span><span class=\"mord\">.</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.19em;\"><span></span></span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></p>\n<p>Then we have  <code>(y◇z)◇y = y</code> when <code>y,z</code> have the same parity, and <code>(y◇z)◇y = y+2</code> when <code>y,z</code> have opposite parities. Thus, if <code>x,y</code> have the same parity, <code>(x◇y)◇((y◇z)◇y) = (x-1)◇y = x</code> or <code>(x◇y)◇((y◇z)◇y) = (x-1)◇(y+2) = x</code>, i.e. 1661 is satisfied. The other cases are similar.</p>\n<p>Of course, this operation ◇ is not well-defined on Nat around 0 and in any case satisfies 1657. But we can \"fix\" the values around 0 in such a way that 1657 fails while 1661 is retained (that's what the 4 special cases accomplish).</p>",
        "id": 476045679,
        "sender_full_name": "Zoltan A. Kocsis (Z.A.K.)",
        "timestamp": 1728541977
    },
    {
        "content": "<p>Can you work with Int to fix the issue at 0?</p>",
        "id": 476053287,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1728543884
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110038\">@Kevin Buzzard</span> Yes, and if you do it the naive way, by extending the diamond above to the negatives, the resulting operation does satisfy 1657 (which we do not want).</p>\n<p>If you do it the smart way, however, you have less work to do if you just stick with the naturals.</p>",
        "id": 476055149,
        "sender_full_name": "Zoltan A. Kocsis (Z.A.K.)",
        "timestamp": 1728544235
    },
    {
        "content": "<p>(Speaking of,I tried to be clever by doing an induction proof, but I think the straightforward case analysis will turn out to be nicer in the end <span aria-label=\"sad\" class=\"emoji emoji-2639\" role=\"img\" title=\"sad\">:sad:</span> , so I'm moving there now)</p>",
        "id": 476055760,
        "sender_full_name": "Zoltan A. Kocsis (Z.A.K.)",
        "timestamp": 1728544346
    },
    {
        "content": "<p>It's interesting that this construction is some finite modification (and truncation) of the translation invariant magmas <code>y ◇ x = x + f(x-y)</code> that <a href=\"#narrow/stream/458659-Equational/topic/Equation.2065.20-.3E.20left.20cancellability\">ended up resolving the 65-&gt;1491 anti-implication</a>.  I wonder if there is some way to identify equations that not only admit non-trivial translation-invariant models, but also have the ability to locally modify those models to still obey the equation, in order to preserve that law but break some other law.</p>\n<p>p.s. when you PR the proof, you can also update the \"selected magmas\" chapter of the blue[rint to add the example.</p>",
        "id": 476154656,
        "sender_full_name": "Terence Tao",
        "timestamp": 1728572215
    },
    {
        "content": "<p>It took me longer than expected to structure this proof; I'm sitll not completely happy with it, but it looks like it's done. I'm running checks, will post a PR within the hour.</p>",
        "id": 476276153,
        "sender_full_name": "Zoltan A. Kocsis (Z.A.K.)",
        "timestamp": 1728615381
    },
    {
        "content": "<p>This is now <a href=\"https://github.com/teorth/equational_theories/pull/503\">PR #503</a>.</p>",
        "id": 476296736,
        "sender_full_name": "Zoltan A. Kocsis (Z.A.K.)",
        "timestamp": 1728621003
    },
    {
        "content": "<p>I opened <a href=\"https://github.com/teorth/equational_theories/pull/512\">equational#512</a> to clean up <code>InfModel_1661.lean</code> a bit.</p>",
        "id": 476377557,
        "sender_full_name": "David Renshaw",
        "timestamp": 1728649587
    },
    {
        "content": "<p>Looks like it may introduce some conflicts with <a href=\"https://github.com/teorth/equational_theories/pull/511\">equational#511</a>.</p>",
        "id": 476377695,
        "sender_full_name": "David Renshaw",
        "timestamp": 1728649641
    },
    {
        "content": "<p>Okay, so all that 511 does is:</p>\n<ol>\n<li>Move the main proof (that 1661 is satisfied in the magma I constructed) out of the \"1661 does not imply 1657\" environment.</li>\n<li>Runs a few more implications in the end.</li>\n</ol>",
        "id": 476378266,
        "sender_full_name": "Zoltan A. Kocsis (Z.A.K.)",
        "timestamp": 1728649848
    },
    {
        "content": "<p>511 does not modify the main proof in any other way. It should be easy to update your 512 to be compatible with that (massive thanks for this btw <span class=\"user-mention\" data-user-id=\"243791\">@David Renshaw</span> ).</p>",
        "id": 476378635,
        "sender_full_name": "Zoltan A. Kocsis (Z.A.K.)",
        "timestamp": 1728649940
    },
    {
        "content": "<p>Good news: it looks like this construction will prove a bunch of other anti-implications too.<br>\nI'll have to check the details in the morning but I think I have a patched countermodel to 1701 -&gt; 8.</p>",
        "id": 476402014,
        "sender_full_name": "Zoltan A. Kocsis (Z.A.K.)",
        "timestamp": 1728657542
    },
    {
        "content": "<p>In <a href=\"https://github.com/teorth/equational_theories/pull/524\">equational#524</a> I use <del>the duality metatheorem</del> some of our duality theory to knock out all of the duals of these implications.</p>",
        "id": 476451514,
        "sender_full_name": "David Renshaw",
        "timestamp": 1728677222
    },
    {
        "content": "<p>This took somewhat more copy/pasting than I would like. Probably we should make a tactic or macro to handle this kind of thing more automatically.</p>",
        "id": 476451703,
        "sender_full_name": "David Renshaw",
        "timestamp": 1728677295
    },
    {
        "content": "<p>side note: the eq4314/eq4606 duality is an interesting one: <a href=\"https://teorth.github.io/equational_theories/implications/?4314\">https://teorth.github.io/equational_theories/implications/?4314</a></p>",
        "id": 476452821,
        "sender_full_name": "David Renshaw",
        "timestamp": 1728677816
    },
    {
        "content": "<p>it doesn't just flip the order of the operator -- also the equality flips. I gather that this is an artifact of how we are canonicalizing equations and eliminating duplicates.</p>",
        "id": 476453014,
        "sender_full_name": "David Renshaw",
        "timestamp": 1728677900
    },
    {
        "content": "<p>This might be a good test case on how to implement <a href=\"https://github.com/teorth/equational_theories/pull/147\">equational#147</a>.  Is there a specific tactic specification that would have been helpful for you?</p>",
        "id": 476464421,
        "sender_full_name": "Terence Tao",
        "timestamp": 1728683573
    },
    {
        "content": "<p>Progress report: Okay, I couldn't find one single patched countermodel to refute all the potential implications from 1701.<br>\nHowever, I was able to make do with 3 different ones which together cover them all.  I'll put them in Lean shortly.</p>\n<p>Constructing the right patch to refute 1701-&gt;4587 was the most difficult by far, took me a solid 3 hours. But that's another 13 unknowns down, and is also sufficient  to conclude that 1167 does not imply 1701.</p>",
        "id": 476490210,
        "sender_full_name": "Zoltan A. Kocsis (Z.A.K.)",
        "timestamp": 1728705899
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"763356\">Zoltan A. Kocsis (Z.A.K.)</span> <a href=\"#narrow/stream/458659-Equational/topic/1661.20-.3E.201657.20-.20another.20one.20bites.20the.20dust/near/476402014\">said</a>:</p>\n<blockquote>\n<p>Good news: it looks like this construction will prove a bunch of other anti-implications too.<br>\nI'll have to check the details in the morning but I think I have a patched countermodel to 1701 -&gt; 8.</p>\n</blockquote>\n<p>Do you think these patched countermodels can be searched for automatically? What kind of operations are used for the infinite part?</p>",
        "id": 476492476,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1728708467
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"690858\">@Daniel Weber</span> I don't know yet, for the simple reason that I deliberately looked for equations which looked like 1661, since the same absic infinite models work for them. I started by looking at the unknows of the smallest equations, and hit jackpot at 8. I think it can be tested whether _this_ particular infinite model works for any other implications but I don't know since I didn't have to look hard yet.</p>",
        "id": 476495092,
        "sender_full_name": "Zoltan A. Kocsis (Z.A.K.)",
        "timestamp": 1728710949
    },
    {
        "content": "<p>As for the patching itself:</p>\n<p>one starts with an infinite model of the antecedent, adjoins (or changes, depending on one's perspective; I've been thinking about it as adjoining during the construction, but writing up my proofs from the changing perspective, it's closer to the truth) a counterexample to the consequent. Then one has to determine how the adjoined elements interact with the original ones. In general this is an infinite amount of work but I could make use of the structure of the initial models, which defined the operation by taking equivalence classes mod 2, to kill infinite classes of antecedent counterexamples at once.</p>",
        "id": 476495569,
        "sender_full_name": "Zoltan A. Kocsis (Z.A.K.)",
        "timestamp": 1728711440
    },
    {
        "content": "<p>In principle, I think this is combinatorial work that can be auttomated but I doubt it's worth the effort until we see whether <span class=\"user-mention\" data-user-id=\"246273\">@Bhavik Mehta</span> 's confluent extension methods can settle all remaining implications or not.</p>",
        "id": 476495640,
        "sender_full_name": "Zoltan A. Kocsis (Z.A.K.)",
        "timestamp": 1728711508
    },
    {
        "content": "<p>I've been giving some though to a general  characterization  of magmas on which patching   will work, but don't have anything definitive yet.<br>\nMy starting point is that in a  patching candidate for each <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>z</mi></mrow><annotation encoding=\"application/x-tex\">z</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span></span></span></span> there is a small set <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>L</mi><mo stretchy=\"false\">(</mo><mi>z</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\"> L(z) </annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">L</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span><span class=\"mclose\">)</span></span></span></span> so that if <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mo>⋄</mo><mi>y</mi><mo>=</mo><mi>z</mi></mrow><annotation encoding=\"application/x-tex\">x \\diamond y = z</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4445em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">⋄</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span></span></span></span> then <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mo>∈</mo><mi>L</mi><mo stretchy=\"false\">(</mo><mi>z</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\"> x \\in L(z)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5782em;vertical-align:-0.0391em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">L</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span><span class=\"mclose\">)</span></span></span></span> or <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>y</mi><mo>∈</mo><mi>L</mi><mo stretchy=\"false\">(</mo><mi>z</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">y \\in L(z)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7335em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">L</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span><span class=\"mclose\">)</span></span></span></span>, but I can't tell whether this'll be necessary or sufficient. Probably not.</p>",
        "id": 476496963,
        "sender_full_name": "Zoltan A. Kocsis (Z.A.K.)",
        "timestamp": 1728712808
    },
    {
        "content": "<p>Okay, <a href=\"https://github.com/teorth/equational_theories/pull/557\">PR#557</a> is up for the implications of the form <code>1701 -&gt; ...</code></p>",
        "id": 476615388,
        "sender_full_name": "Zoltan A. Kocsis (Z.A.K.)",
        "timestamp": 1728834084
    },
    {
        "content": "<p>For the counterexamples, I think you might be able to benefit from the split tactic if you use <code>if then else</code></p>",
        "id": 476617095,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1728835590
    },
    {
        "content": "<p>Okay, I think the modified translation-invariant magma technique will apply to four more equations <em>using the same base model</em>: these are <a href=\"https://teorth.github.io/equational_theories/implications/?1659\">1659</a>, <a href=\"https://teorth.github.io/equational_theories/implications/?2460\">2460</a> and their duals.</p>",
        "id": 476618790,
        "sender_full_name": "Zoltan A. Kocsis (Z.A.K.)",
        "timestamp": 1728836928
    },
    {
        "content": "<p>The case of 2460 is much more interesting, in that it has a fairly different structure from the other cases I solved so far (whereas 1659 is very similar). But 1659 has more bang for buck, more implications to refute.</p>",
        "id": 476618839,
        "sender_full_name": "Zoltan A. Kocsis (Z.A.K.)",
        "timestamp": 1728836987
    },
    {
        "content": "<p>That's potentially still 90 more unknowns (plus whatever else transitivity would then settle), but  then I'll have to either</p>\n<ol>\n<li>come up with some more interesting examples of base models on which I can make this technique work; or</li>\n<li>get a more general understanding of when and why patching works; or</li>\n<li>accept that this method has run out of steam.</li>\n</ol>",
        "id": 476619262,
        "sender_full_name": "Zoltan A. Kocsis (Z.A.K.)",
        "timestamp": 1728837271
    },
    {
        "content": "<p>It might be worth writing up some notes on this approach as a chapter to the blueprint describing the general method, giving some examples, and recording some of your empirical observations on what type of patching constructions seem to work well and what types don't.  This may help other contributors find ways to adapt the method.</p>",
        "id": 476621358,
        "sender_full_name": "Terence Tao",
        "timestamp": 1728839110
    }
]