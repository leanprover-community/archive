[
    {
        "content": "<p>Someone previously mentioned constructing a monoid on the complex numbers, where the monoid map is linear of the form x*y=ax+by for some a,b\\in \\C.  (Apologies for forgetting who it was who had this great idea.)  I believe that this shows that Eqn1286 =/&gt; Eqn3, which is one of the open questions.</p>\n<p>In that case, this turns into finding a,b such that a+b\\neq 1, yet b^2=-a/(a^2+1) and b=(2a^2+1)/(a^5+a^3).  Taking any root of a^5+2a^4+3a^3+3a^2+a+1 should do the trick.</p>",
        "id": 475035357,
        "sender_full_name": "Pace Nielsen",
        "timestamp": 1728175509
    },
    {
        "content": "<p>I guess it's some Grobner basis calculation for any given implication Equation X =&gt; Equation Y whether this construction furnishes a counterexample or not.  I have no idea whether this is already implemented within Lean but I could imagine it is well within the capability of e.g., SAGE to enumerate through the 20,000 remaining implications to see if any further examples of this type exist.</p>",
        "id": 475035488,
        "sender_full_name": "Terence Tao",
        "timestamp": 1728175678
    },
    {
        "content": "<p>I feel dumb not being able to articulate this correctly, but it's not necessary to go all the way to Grobner bases since we are looking at quadratic forms, the \"duality trick\" should suffice (and reduce it to a linear problem). But still might not be easy to formalize.</p>",
        "id": 475036705,
        "sender_full_name": "Cody Roux",
        "timestamp": 1728177029
    },
    {
        "content": "<p>One can also model these infinite magmas through a finite field model (replace C by F_p for a sufficiently large prime p), by the Lefschetz principle.  So one could just do a numerical search with random p, a, b and one has a reasonably high likelihood to get a hit.  For instance in the example above, for typical medium size p one should be able to get a working a,b about 1/p^2 of the time.  It may thus be faster to simply do random brute force across all equations than a Grobner basis for each pair of equations.  (Though we should now be able to cut down the number of equations to look at a fair bit, as many equations now have 0 incoming or outgoing open implications, and of course we only need to study one representative from each equivalence class.)</p>",
        "id": 475038501,
        "sender_full_name": "Terence Tao",
        "timestamp": 1728179095
    },
    {
        "content": "<p>One has to try a couple p, e.g. p = 5, 7, 11, just because some of the polynomial equations to solve won't have roots in F_p.  (One could also work in fields of prime power order, e.g., F_8 or F_9.)</p>",
        "id": 475038605,
        "sender_full_name": "Terence Tao",
        "timestamp": 1728179182
    },
    {
        "content": "<p>In this model all words evaluate to linear maps, so one can check equational laws just by comparing two coefficients; one does not need to check all inputs.  So this is actually quite a fast verification and should be quite doable numerically, with very concrete finite magmas (associated to triples (p,a,b)) output as a consequence.</p>",
        "id": 475038920,
        "sender_full_name": "Terence Tao",
        "timestamp": 1728179524
    },
    {
        "content": "<p>Created <a href=\"https://github.com/teorth/equational_theories/pull/346\">equational#346</a> to propose testing out this idea on the remaining set of equations.</p>",
        "id": 475039132,
        "sender_full_name": "Terence Tao",
        "timestamp": 1728179806
    },
    {
        "content": "<p>I did one non-implication of this form (3116 does not imply 513) to show how the proof style can be expressed in Lean.  (Proofs generated by <code>polyrith</code>).</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">FieldTheory</span><span class=\"bp\">.</span><span class=\"n\">IsAlgClosed</span><span class=\"bp\">.</span><span class=\"n\">AlgebraicClosure</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span><span class=\"bp\">.</span><span class=\"n\">Polyrith</span>\n\n<span class=\"kn\">class</span><span class=\"w\"> </span><span class=\"n\">Magma</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">op</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">α</span>\n\n<span class=\"kn\">infix</span><span class=\"o\">:</span><span class=\"mi\">65</span><span class=\"w\"> </span><span class=\"s2\">\" ◇ \"</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">Magma</span><span class=\"bp\">.</span><span class=\"n\">op</span>\n\n<span class=\"kn\">abbrev</span><span class=\"w\"> </span><span class=\"n\">Equation3116</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">G</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Magma</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(((</span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">◇</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">◇</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">◇</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">◇</span><span class=\"w\"> </span><span class=\"n\">y</span>\n\n<span class=\"kn\">abbrev</span><span class=\"w\"> </span><span class=\"n\">Equation513</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">G</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Magma</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">◇</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">◇</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">◇</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">◇</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)))</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">AlgebraicClosure</span><span class=\"w\"> </span><span class=\"n\">ℚ</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Polynomial</span>\n\n<span class=\"kn\">noncomputable</span><span class=\"w\"> </span><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">foo</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Polynomial</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">AlgebraicClosure</span><span class=\"w\"> </span><span class=\"n\">ℚ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">foo_degree</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">foo</span><span class=\"bp\">.</span><span class=\"n\">degree</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">unfold</span><span class=\"w\"> </span><span class=\"n\">foo</span>\n<span class=\"w\">  </span><span class=\"n\">compute_degree</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">norm_num</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">decide</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">decide</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">foo_degree_ne_zero</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">foo</span><span class=\"bp\">.</span><span class=\"n\">degree</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">foo_degree</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">norm_num</span>\n\n<span class=\"kn\">noncomputable</span><span class=\"w\"> </span><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">AlgebraicClosure</span><span class=\"w\"> </span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">IsAlgClosed</span><span class=\"bp\">.</span><span class=\"n\">exists_root</span><span class=\"w\"> </span><span class=\"n\">foo</span><span class=\"w\"> </span><span class=\"n\">foo_degree_ne_zero</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">choose</span>\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">spec_α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">foo</span><span class=\"bp\">.</span><span class=\"n\">IsRoot</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">IsAlgClosed</span><span class=\"bp\">.</span><span class=\"n\">exists_root</span><span class=\"w\"> </span><span class=\"n\">foo</span><span class=\"w\"> </span><span class=\"n\">foo_degree_ne_zero</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">choose_spec</span>\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">spec_α_eq</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">simpa</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">foo</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"kn\">using</span><span class=\"w\"> </span><span class=\"n\">spec_α</span>\n\n<span class=\"kn\">noncomputable</span><span class=\"w\"> </span><span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"n\">instG</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Magma</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">op</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">id</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">AlgebraicClosure</span><span class=\"w\"> </span><span class=\"n\">ℚ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">id</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">AlgebraicClosure</span><span class=\"w\"> </span><span class=\"n\">ℚ</span><span class=\"o\">)</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">Equation3116_not_implies_Equation513</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">G</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">_</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Magma</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">Equation3116</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"w\"> </span><span class=\"n\">Equation513</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">use</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">instG</span>\n<span class=\"w\">  </span><span class=\"n\">constructor</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Equation3116</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">instG</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span>\n<span class=\"w\">    </span><span class=\"n\">linear_combination</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">spec_α_eq</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Equation513</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">instG</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"n\">use</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">0</span>\n<span class=\"w\">    </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">H</span>\n<span class=\"w\">    </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">one_ne_zero</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">AlgebraicClosure</span><span class=\"w\"> </span><span class=\"n\">ℚ</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"n\">linear_combination</span>\n<span class=\"w\">      </span><span class=\"o\">(</span><span class=\"bp\">-</span><span class=\"o\">(</span><span class=\"mi\">19</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"mi\">45</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">17</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"mi\">45</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">16</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"mi\">45</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">23</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"mi\">45</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">H</span><span class=\"w\"> </span><span class=\"bp\">+</span>\n<span class=\"w\">        </span><span class=\"o\">(</span><span class=\"bp\">-</span><span class=\"o\">(</span><span class=\"mi\">19</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"mi\">45</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">74</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"mi\">45</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">92</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"mi\">45</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">spec_α_eq</span>\n</code></pre></div>",
        "id": 475042461,
        "sender_full_name": "Heather Macbeth",
        "timestamp": 1728182762
    },
    {
        "content": "<p>For <span class=\"user-mention\" data-user-id=\"762865\">@Pace Nielsen</span>'s initial example above (Eqn1286 =/&gt; Eqn3), (p,a,b) = (11, 1, 7) works as a finite refutation.<br>\nPR incoming.</p>",
        "id": 475042942,
        "sender_full_name": "David Renshaw",
        "timestamp": 1728183333
    },
    {
        "content": "<p><a href=\"https://github.com/teorth/equational_theories/pull/349\">equational#349</a></p>",
        "id": 475043696,
        "sender_full_name": "David Renshaw",
        "timestamp": 1728184108
    },
    {
        "content": "<p>It's amusing that when restricting to these linear magma operations, <a href=\"https://en.wikipedia.org/wiki/Variety_(universal_algebra)\">magma varieties</a> basically become <a href=\"https://en.wikipedia.org/wiki/Algebraic_variety\">algebraic varieties</a>.</p>",
        "id": 475044023,
        "sender_full_name": "Terence Tao",
        "timestamp": 1728184457
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"763356\">@Zoltan A. Kocsis (Z.A.K.)</span> can you add the above 11x11 magma to your list and generate all consequences? I'm noticing that it proves a bunch more anti-implications involving Eqn1286.</p>",
        "id": 475048591,
        "sender_full_name": "David Renshaw",
        "timestamp": 1728187807
    },
    {
        "content": "<p>Certainly <span class=\"user-mention\" data-user-id=\"243791\">@David Renshaw</span>  will do in a bit!</p>",
        "id": 475049404,
        "sender_full_name": "Zoltan A. Kocsis (Z.A.K.)",
        "timestamp": 1728188418
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"243791\">@David Renshaw</span> - a bit behind with other stuff, so this'll have to be on hold until tomorrow. Sorry :(</p>",
        "id": 475060444,
        "sender_full_name": "Zoltan A. Kocsis (Z.A.K.)",
        "timestamp": 1728194561
    },
    {
        "content": "<p>In fact examples are relatively likely to exist over finite fields (not necessarily F_p) even when they don't exist over C, particularly for 3-variable equations. 3-variable equations become triples of polynomial equations in two variables, and a generic such triple doesn't have solutions over C but does have solutions over a few finite  fields.</p>",
        "id": 475093772,
        "sender_full_name": "Will Sawin",
        "timestamp": 1728215936
    },
    {
        "content": "<p>Are there any ways to generalize this approach which could refute implications which hold on finite models?</p>",
        "id": 475093890,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1728216036
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"260507\">@Heather Macbeth</span> a finite refutation for your implication above is given by (p,a,b) = (11, 3, 9). See <a href=\"https://github.com/teorth/equational_theories/pull/360\">equational#360</a>.</p>",
        "id": 475098137,
        "sender_full_name": "David Renshaw",
        "timestamp": 1728219120
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"690858\">Daniel Weber</span> <a href=\"#narrow/stream/458659-Equational/topic/An.20old.20new.20idea/near/475093890\">said</a>:</p>\n<blockquote>\n<p>Are there any ways to generalize this approach which could refute implications which hold on finite models?</p>\n</blockquote>\n<p>Going to higher-degree polynomials doesn't fix the problem that any tuple of equations and negations of equations that can be satisfied over C can be satisfied over a large finite field. The general idea of \"take some understood algebraic structure and define a magma operation using operations of that structure\" could potentially produce further examples, for example considering nonabelian groups with magmas defined using the group operation, but most structures I can think of that are easy to compute in also have this kind of reduction to finite examples property (e.g. residually finite groups).</p>",
        "id": 475100563,
        "sender_full_name": "Will Sawin",
        "timestamp": 1728221742
    },
    {
        "content": "<p>I'm sure it doesn't matter as I didn't get this idea to go anywhere as I found it hard to find a real example of where this was useful for an implication that wasn't already generated but I mentioned this idea before this thread. I don't really know how to do this but I imagine you can use field extensions on other finite fields to generate more magmas like this.</p>\n<p>I couldn't work out how you'd get useful magmas out of this ideas for equations that don't have 2 variables and have at least 2 instances of each variable in them.</p>",
        "id": 475101034,
        "sender_full_name": "Leo Shine",
        "timestamp": 1728222192
    },
    {
        "content": "<p>The other problem I found is that there had to be some sort of reason such a counter example would not have already been found by #Equational19 which brute forced small polynomials in Z/n</p>",
        "id": 475102209,
        "sender_full_name": "Leo Shine",
        "timestamp": 1728223337
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"217253\">Leo Shine</span> <a href=\"#narrow/stream/458659-Equational/topic/An.20old.20new.20idea/near/475102209\">said</a>:</p>\n<blockquote>\n<p>The other problem I found is that there had to be some sort of reason such a counter example would not have already been found by #Equational19 which brute forced small polynomials in Z/n</p>\n</blockquote>\n<p>Do you know why the examples people found on this thread weren't found by <a href=\"https://github.com/teorth/equational_theories/pull/19\">equational#19</a>?</p>",
        "id": 475102321,
        "sender_full_name": "Will Sawin",
        "timestamp": 1728223446
    },
    {
        "content": "<p>Maybe something to do with magmas with 6 or more elements being excluded from the PR</p>",
        "id": 475102393,
        "sender_full_name": "Will Sawin",
        "timestamp": 1728223557
    },
    {
        "content": "<p>No I have not really looked into it very much sorry.</p>",
        "id": 475102504,
        "sender_full_name": "Leo Shine",
        "timestamp": 1728223668
    },
    {
        "content": "<p>Looking at code it only goes up to n=12 so could easily be missing bigger examples</p>",
        "id": 475102715,
        "sender_full_name": "Leo Shine",
        "timestamp": 1728223858
    },
    {
        "content": "<p>Also there were like 6 different variables so finding the Z/11 example above is going to be less than a 1/100000 chance. So maybe not run enough to find.</p>",
        "id": 475103238,
        "sender_full_name": "Leo Shine",
        "timestamp": 1728224361
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"230900\">Will Sawin</span> <a href=\"#narrow/stream/458659-Equational/topic/An.20old.20new.20idea/near/475102321\">said</a>:</p>\n<blockquote>\n<p>Do you know why the examples people found on this thread weren't found by <a href=\"https://github.com/teorth/equational_theories/pull/19\">equational#19</a>?</p>\n</blockquote>\n<p>That search wasn't a complete brute force, I just ran it on python for a few hours and stopped it when it seemed like it had ran \"long enough\". At that point in the project it refuted 60% of the unknown implications (up from 0%). I never went back to it because I'd assumed that after we did enumeration over the 3x3 and 4x4s, and then the theorem provers, there wouldn't be any low hanging fruit for such a simple method to find.</p>\n<p>But I guess clearly that was wrong: I can resume a bigger brute force and see if there's anything more new that's found.</p>",
        "id": 475104486,
        "sender_full_name": "Nicholas Carlini",
        "timestamp": 1728225483
    },
    {
        "content": "<p>Yeah it seems that restricting attention to linear operations instead of quadratic ones has a much higher \"yield\" because many fewer equations have to be satisfied for things to go right.  In particular, in order for a law <code>x ◇ y = a * x + b * y</code>to obey a law of <code>k</code> variables, the coefficients <code>a</code> and <code>b</code> need to satisfy <code>k</code> polynomial equations with integer coefficients (I believe the fancy name for this is \"planar affine scheme over <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mrow><mi mathvariant=\"normal\">S</mi><mi mathvariant=\"normal\">p</mi><mi mathvariant=\"normal\">e</mi><mi mathvariant=\"normal\">c</mi></mrow><mo stretchy=\"false\">(</mo><mi mathvariant=\"double-struck\">Z</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\mathrm{Spec}({\\mathbb Z})</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathrm\">Spec</span></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathbb\">Z</span></span><span class=\"mclose\">)</span></span></span></span>\", but I'm not 100% sure).  In order for one law to imply (resp. be equivalent to) another, the corresponding scheme must contain (resp. be equal to) the other scheme, which in principle should recover a large fraction of the entire set of anti-implication (it might be nice to actually compute this coarser implication graph of linear magma implication and see how it compares with the full implication graph - I've set up <a href=\"https://github.com/teorth/equational_theories/pull/364\">equational#364</a> for this in case someone is interested).</p>\n<p>This comports well with the previous intuition that the number of variables <code>k</code> determines a lot of the behavior.  Indeed:</p>\n<ul>\n<li>If <code>k=1</code>, then we have one equation and the scheme is a (possibly reducible) curve (except when dealing with the trivial equation <code>x = x</code>, in which case the scheme is the entire plane).</li>\n<li>If <code>k=2</code>, then except in some degenerate circumstances (such as the commutative law <code>x ◇ y = y ◇ x</code>the scheme is 0-dimensional - basically a finite set of points, with some ramification at small primes due to some discriminant or resultant having all coefficients divisible by the a non-trivial greatest common divisor.</li>\n<li>If <code>k&gt;2</code>, then one expects the scheme to be empty, suggesting (but not proving conclusively) that the law is equivalent to the singleton law.</li>\n</ul>\n<p>Some simple examples of schemes associated to laws:</p>\n<ul>\n<li>The constant law <code>x ◇ y = z ◇ w</code> is associated to the origin <code>a=b=0</code> (degenerate behavior).</li>\n<li>The idempotent law <code>x = x ◇ x</code> is associated to the line <code>a+b=1</code>.</li>\n<li>The commutative law <code>x ◇ y = y ◇ x</code> is associated to the line <code>a=b</code> (degenerate behavior).</li>\n<li>The associative law <code>(x ◇ y) ◇ z = x ◇ (y ◇ z)</code> is associated to the four-point set <code>a(a-1)=b(b-1)=0</code> (degenerate behavior).</li>\n<li>The left absorption law <code>x = x ◇ y</code> is associated to the line <code>b=0</code>.</li>\n</ul>\n<p>I think that one should be able to describe these schemes and identify the linear implication graph using the classical theory of resultants (so the full power of Groebner bases is not required).  In any case we now have a way to assign a geometric object (a planar affine scheme) to each law that serves as a first approximation as to where that law should be located in the implication graph.  (One could eventually update the equation explorer to add this geometric object to the web page associated to each equation... I'll add that to the previous task.)</p>",
        "id": 475104851,
        "sender_full_name": "Terence Tao",
        "timestamp": 1728225836
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"657719\">Terence Tao</span> <a href=\"#narrow/stream/458659-Equational/topic/An.20old.20new.20idea/near/475104851\">said</a>:</p>\n<blockquote>\n<ul>\n<li>If <code>k&gt;2</code>, then one expects the scheme to be empty, suggesting (but not proving conclusively) that the law is equivalent to the singleton law.<br>\n</li>\n</ul>\n</blockquote>\n<p>This seems not quite right. If k=3 we have three equations in two variables. The theory of resultants lets us compute from the coefficients of the equations a number such that if p divides that number then (at least generically) the equations have a common solution mod p. If I write a complicated expression in three variables than we should get high-degree polynomials so that this number is probably large and thus a solution mod p for some large-ish p should exist.</p>",
        "id": 475106874,
        "sender_full_name": "Will Sawin",
        "timestamp": 1728227431
    },
    {
        "content": "<p>Do there exist three-variable equations not currently known to be satisfied by any nontrivial 3-variable magma where one can test this approach?</p>",
        "id": 475106907,
        "sender_full_name": "Will Sawin",
        "timestamp": 1728227473
    },
    {
        "content": "<p>Ah, right, I forget how weird algebraic geometry gets at low characteristic.  So even the \"asymptotically empty\" schemes have some interesting structure to them that continues to make them a useful invariant of a law.</p>\n<p>By the way, I wanted to add one more example of a scheme attached to a law: the law <code>x ◇ (y ◇ z) = (x ◇ y) ◇ w</code> that <a href=\"https://mathoverflow.net/a/451008/766\">inspired this whole project</a> is associated to the two-point scheme <code>a(a-1)=b=0</code>, which helps explain why it lies between the constant law (associated to the scheme <code>a=b=0</code>) and the associative law (associated to the scheme <code>a(a-1)=b(b-1)=0</code>).</p>",
        "id": 475107409,
        "sender_full_name": "Terence Tao",
        "timestamp": 1728227892
    },
    {
        "content": "<p><a href=\"https://github.com/teorth/equational_theories/pull/371\">equational#371</a> resolves 4 more implications with Z/11 models</p>",
        "id": 475109831,
        "sender_full_name": "David Renshaw",
        "timestamp": 1728230075
    },
    {
        "content": "<p>I'll have a brute force run started shortly that should be able to go up fairly high. What other meta-data would be saved along with the run? The smallest (p, a, b) that satisfy each equation? Other things?</p>",
        "id": 475109945,
        "sender_full_name": "Nicholas Carlini",
        "timestamp": 1728230197
    },
    {
        "content": "<p>Not sure how you're doing the brute force so not sure if it's obvious but you only need to check x=1 and y =0  and y=1 and x=0 in order to check an equation is satisfied I think(at least for primes)</p>",
        "id": 475110536,
        "sender_full_name": "Leo Shine",
        "timestamp": 1728230759
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"657719\">Terence Tao</span> <a href=\"#narrow/stream/458659-Equational/topic/An.20old.20new.20idea/near/475107409\">said</a>:</p>\n<blockquote>\n<p>Ah, right, I forget how weird algebraic geometry gets at low characteristic.  So even the \"asymptotically empty\" schemes have some interesting structure to them that continues to make them a useful invariant of a law.</p>\n</blockquote>\n<p>However, this might not be so relevant for this project: Unless each variable appears twice in the equation, we are forced to have a=0 or b=0 for the coefficient of that variable to cancel.  This forces the magma to have a very simple form - the operation ignores one variable and viewed as a function on the other variable it's periodic. Presumably everything with a counterexample of this form was found already. The size limit of the project means if each variable appears at least twice then it appears exactly twice and there might not be so many remaining such examples that are undetermined.</p>",
        "id": 475110589,
        "sender_full_name": "Will Sawin",
        "timestamp": 1728230786
    },
    {
        "content": "<p>One can consider more general rings where a,b may be nilpotent or zero divisors without being zero. In none of the examples I tried did this help but maybe there are some where it does.</p>",
        "id": 475110621,
        "sender_full_name": "Will Sawin",
        "timestamp": 1728230849
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"217253\">Leo Shine</span> <a href=\"#narrow/stream/458659-Equational/topic/An.20old.20new.20idea/near/475110536\">said</a>:</p>\n<blockquote>\n<p>Not sure how you're doing the brute force so not sure if it's obvious but you only need to check x=1 and y =0  and y=1 and x=0 in order to check an equation is satisfied I think(at least for primes)</p>\n</blockquote>\n<p>Just to clarify notation, you're saying that the constants \"x\" and \"y\" in operator <code>op(a, b) = x*a + y*b mod p</code>. Not the variables we've called x and y (and z,w,u,v)</p>",
        "id": 475110742,
        "sender_full_name": "Nicholas Carlini",
        "timestamp": 1728230965
    },
    {
        "content": "<p>I believe he actually meant the variables: to check whether two linear forms <code>ax+by</code>, <code>cx+dy</code> agree, it suffices to check them at generators <code>(x,y) = (1,0), (0,1)</code>.  This is probably about as fast as just computing the coefficients directly.</p>",
        "id": 475110819,
        "sender_full_name": "Terence Tao",
        "timestamp": 1728231040
    },
    {
        "content": "<p>OK. That makes more sense. I'm starting with a brute force over everything for now and can revisit this later</p>",
        "id": 475110952,
        "sender_full_name": "Nicholas Carlini",
        "timestamp": 1728231199
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"230900\">Will Sawin</span> <a href=\"#narrow/stream/458659-Equational/topic/An.20old.20new.20idea/near/475110621\">said</a>:</p>\n<blockquote>\n<p>One can consider more general rings where a,b may be nilpotent or zero divisors without being zero. In none of the examples I tried did this help but maybe there are some where it does.</p>\n</blockquote>\n<p>For the central groupoid law <a href=\"https://teorth.github.io/equational_theories/implications/?168\">https://teorth.github.io/equational_theories/implications/?168</a> the scheme is <code>a^2 = b^2 = 0; 2ab = 1</code> which unfortunately collapses to the uninteresting empty set (multiply the last equation by <code>a</code> or <code>b</code>), but it did at least have a chance of containing nilpotents.  EDIT: but maybe the non-commutative scheme <code>a^2 = b^2 = 0; ab+ba = 1</code> is more interesting?</p>",
        "id": 475111026,
        "sender_full_name": "Terence Tao",
        "timestamp": 1728231256
    },
    {
        "content": "<p>By the way I just wanted to point out that we have recovered an old result of Austin <a href=\"https://www.jstor.org/stable/2035753?seq=1\">https://www.jstor.org/stable/2035753?seq=1</a> that any law with at most 2 variables has non-trivial finite models (in fact infinitely many such), with basically the same proof.</p>",
        "id": 475111200,
        "sender_full_name": "Terence Tao",
        "timestamp": 1728231452
    },
    {
        "content": "<p>I haven't pulled since yesterday, but linear equations solves &gt;443 unknowns since what we had last time I pulled. Rebuilding now and will let this run a while longer to see how it goes</p>",
        "id": 475116492,
        "sender_full_name": "Nicholas Carlini",
        "timestamp": 1728234552
    },
    {
        "content": "<p>Okay, so updating to the latest and it's down to 30 new ones. I've created <a href=\"https://github.com/leanprover-community/mathlib4/pull/380\">#380</a> which introduces these. I think my counting may be wrong, I know it's at least 30, but it may be more. I'll be back later today and can both report status on the more complete run and diagnose what's going on here with counting.</p>",
        "id": 475120742,
        "sender_full_name": "Nicholas Carlini",
        "timestamp": 1728237351
    },
    {
        "content": "<p><a href=\"https://github.com/teorth/equational_theories/pull/380\">equational#380</a></p>",
        "id": 475120792,
        "sender_full_name": "David Renshaw",
        "timestamp": 1728237380
    },
    {
        "content": "<p>including one at <code>ZMod 43</code>. Nice!</p>",
        "id": 475120860,
        "sender_full_name": "David Renshaw",
        "timestamp": 1728237435
    },
    {
        "content": "<p>It completed its search for all p^k &lt;= 47</p>",
        "id": 475121103,
        "sender_full_name": "Nicholas Carlini",
        "timestamp": 1728237534
    },
    {
        "content": "<p>which equation is ZMod 43 for?</p>",
        "id": 475124916,
        "sender_full_name": "Will Sawin",
        "timestamp": 1728239001
    },
    {
        "content": "<p>1076 according to PR</p>",
        "id": 475125151,
        "sender_full_name": "Leo Shine",
        "timestamp": 1728239198
    },
    {
        "content": "<p>I was trying to figure out \"why 43 is necessary.\" I didn't quite figure it out. If I calculated right the equations are a^2b+a^2b^2=1 and a+ab^3+b^2=0 whose interesting solutions have b a root of b^4-b^3-b^2+b-1 which is an irreducible polynomial of degree 4, so writing down a solution over C is tricky, but it has solutions over smaller finite fields.</p>",
        "id": 475131734,
        "sender_full_name": "Will Sawin",
        "timestamp": 1728242499
    },
    {
        "content": "<p>Ah okay so I'm not entirely sure that this is the first one that's necessary. I try to do some kind of set-cover like thing and that 43 is there might mean that it covers a larger set of things and that's why it's there</p>",
        "id": 475132752,
        "sender_full_name": "Nicholas Carlini",
        "timestamp": 1728243186
    },
    {
        "content": "<p>I'm running into a problem now though if one of you lean experts have an idea. I've sped up my algorithm by quite a bit and have brute forced up to Z/199Z but now Lean is taking forever to prove just saying \"by decide!\" which I read to mean \"I give up just brute force it or something\". Is there some faster way to show lean some of these are true/false? It's been building for 10 minutes with no end in sight</p>",
        "id": 475132936,
        "sender_full_name": "Nicholas Carlini",
        "timestamp": 1728243314
    },
    {
        "content": "<p>I wonder if the <code>memoFinOp</code> thing would help?</p>",
        "id": 475133808,
        "sender_full_name": "David Renshaw",
        "timestamp": 1728243723
    },
    {
        "content": "<p>Switch from <code>ZMod n</code> to <code>Fin n</code> and put <code>memoFinOp</code> in front of your <code>fun</code></p>",
        "id": 475133851,
        "sender_full_name": "David Renshaw",
        "timestamp": 1728243744
    },
    {
        "content": "<p>That can help if the operation itself is slow to reduce. But deciding an equation over <code>Fin 43</code> requires 43^n tests, where n is the number of variables. I would not expect the kernel to be up for that. </p>\n<p>Did you also try <code>by native_decide</code>?</p>",
        "id": 475134346,
        "sender_full_name": "Joachim Breitner",
        "timestamp": 1728244009
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"470149\">Joachim Breitner</span> <a href=\"#narrow/stream/458659-Equational/topic/An.20old.20new.20idea/near/475134346\">said</a>:</p>\n<blockquote>\n<p>That can help if the operation itself is slow to reduce. But deciding an equation over <code>Fin 43</code> requires 43^n tests, where n is the number of variables. I would not expect the kernel to be up for that. </p>\n</blockquote>\n<p>If that's the problem then couldn't Leo Shine's idea be the solution? <a href=\"#narrow/stream/458659-Equational/topic/An.20old.20new.20idea/near/475110536\">https://leanprover.zulipchat.com/#narrow/stream/458659-Equational/topic/An.20old.20new.20idea/near/475110536</a> Checking only for the standard basis vectors reduces the 43^n tests to n.</p>",
        "id": 475136171,
        "sender_full_name": "Will Sawin",
        "timestamp": 1728245105
    },
    {
        "content": "<p>Sorry, not following closely. If there is a certain structure and you can prove the theorem that checking only certain values suffices, then you should be able to <code>apply</code> that theorem before using <code>decide</code>.</p>",
        "id": 475136503,
        "sender_full_name": "Joachim Breitner",
        "timestamp": 1728245339
    },
    {
        "content": "<p>Also, is there a reason this file uses <code>decid!e</code> and not <code>decideFin!</code>? Ah,the latter probably needs to learn about <code>ZMod n</code> in addition to <code>Fin</code>. This might help a bit with theorems with very many facts (but less so with theorems with a small number of facts)</p>",
        "id": 475137102,
        "sender_full_name": "Joachim Breitner",
        "timestamp": 1728245541
    },
    {
        "content": "<p>I won't be able to have a look today, but if no one beats me to it I should be able to make a tactic somewhen next week that recognizes and efficiently checks linear equations over ZMod n. Maybe near the end of the week, though.</p>",
        "id": 475137871,
        "sender_full_name": "Joachim Breitner",
        "timestamp": 1728245748
    },
    {
        "content": "<p>I had a bug. (I overflowed int64 trying to be tricky). I don't have anything past Z/47Z but that's still rather slow to compile in lean. I have it running and will check back in a few hours if it's found anything else</p>",
        "id": 475142018,
        "sender_full_name": "Nicholas Carlini",
        "timestamp": 1728248262
    },
    {
        "content": "<p>Okay, going up to Z/169Z exclusively searching for new implications (restricting only to the ~300 equations that aren't solved) doesn't find anything new.</p>",
        "id": 475187530,
        "sender_full_name": "Nicholas Carlini",
        "timestamp": 1728273231
    },
    {
        "content": "<p>If I'm counting right, 13.3m implications are resolved with this approach</p>",
        "id": 475188920,
        "sender_full_name": "Nicholas Carlini",
        "timestamp": 1728273695
    },
    {
        "content": "<p>That's pretty close to the 13.8m anti-implications that actually exist.  So the linear implications are reasonably good at clearing out most anti-implications.</p>",
        "id": 475189600,
        "sender_full_name": "Terence Tao",
        "timestamp": 1728273944
    },
    {
        "content": "<p>Had a brief look, maybe the proof can be algebraic rather than calculational, and thus scale to large magmas easily.</p>\n<p>It seems that <code>ring</code> can almost solve the positive facts, but it needs a little help reducing the constants. Here is a quick hack:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"c1\">-- The following three lemmas help simp reduce constants in `ZMod n`, which together with</span>\n<span class=\"c1\">-- `ring` can solve positive facts.</span>\n<span class=\"c1\">-- The proofs are just quick ugly hacks. And the whole thing is maybe better</span>\n<span class=\"c1\">-- implemented as a simproc</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">ZMod_reduce_constant0</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">NeZero</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"w\">  </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"bp\">@</span><span class=\"n\">OfNat</span><span class=\"bp\">.</span><span class=\"n\">ofNat</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ZMod</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">OfNat</span><span class=\"bp\">.</span><span class=\"n\">ofNat</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">ZMod</span><span class=\"bp\">.</span><span class=\"n\">val_injective</span>\n<span class=\"w\">  </span><span class=\"n\">norm_num</span>\n<span class=\"w\">  </span><span class=\"n\">conv_lhs</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">equals</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ZMod</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">simp</span>\n<span class=\"w\">  </span><span class=\"n\">conv_rhs</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">equals</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ZMod</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">simp</span>\n<span class=\"w\">  </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ZMod</span><span class=\"bp\">.</span><span class=\"n\">natCast_eq_natCast_iff'</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">mpr</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">h</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">ZMod_reduce_constant1</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">NeZero</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\">  </span><span class=\"o\">:</span>\n<span class=\"w\">  </span><span class=\"bp\">@</span><span class=\"n\">OfNat</span><span class=\"bp\">.</span><span class=\"n\">ofNat</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ZMod</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">OfNat</span><span class=\"bp\">.</span><span class=\"n\">ofNat</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">conv_lhs</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">equals</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ZMod</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">simp</span>\n<span class=\"w\">  </span><span class=\"n\">conv_rhs</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">equals</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ZMod</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">norm_num</span>\n<span class=\"w\">  </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ZMod</span><span class=\"bp\">.</span><span class=\"n\">natCast_eq_natCast_iff'</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">mpr</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">h</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">cases</span><span class=\"w\"> </span><span class=\"n\">x</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">simp</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">mod_eq_sub_mod</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"n\">simp</span>\n<span class=\"w\">    </span><span class=\"n\">omega</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">ZMod_reduce_constant2</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">_</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\">  </span><span class=\"o\">:</span>\n<span class=\"w\">  </span><span class=\"bp\">@</span><span class=\"n\">OfNat</span><span class=\"bp\">.</span><span class=\"n\">ofNat</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ZMod</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">@</span><span class=\"n\">OfNat</span><span class=\"bp\">.</span><span class=\"n\">ofNat</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ZMod</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">%</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"n\">only</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">OfNat</span><span class=\"bp\">.</span><span class=\"n\">ofNat</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">cast_add</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">ZMod</span><span class=\"bp\">.</span><span class=\"n\">natCast_mod</span><span class=\"o\">]</span>\n\n\n<span class=\"kd\">@[</span><span class=\"n\">equational_result</span><span class=\"kd\">]</span>\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">LinearInvariance0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Magma</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">Facts</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">1076</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">26</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">65</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">73</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">102</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">117</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">125</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">160</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">167</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">212</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">229</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">258</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">263</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">335</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">362</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">429</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">437</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">464</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">473</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">504</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">513</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">546</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">562</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">617</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">632</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">640</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">679</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">704</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">826</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">833</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">872</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">879</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">910</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">917</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">949</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">962</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">1029</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">1046</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">1085</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">1110</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">1119</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">1226</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">1231</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">1278</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">1323</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">1455</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">1482</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">1491</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">1518</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">1526</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">1632</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">1654</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">1658</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">1662</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">1682</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">1721</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">1729</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">1790</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">1838</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">1850</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">1861</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">1873</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">1885</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">1897</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">1925</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">1967</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">2044</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">2053</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">2060</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">2100</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">2125</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">2267</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">2300</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">2328</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">2330</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">2449</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">2457</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">2470</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">2485</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">2503</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">2533</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">2541</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">2586</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">2653</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">2663</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">2672</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">2699</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">2744</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">2850</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">2863</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">2875</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">2910</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">2939</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">3053</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">3058</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">3066</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">3075</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">3079</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">3083</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">3094</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">3113</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">3271</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">3279</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">3343</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">3352</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">3459</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">3474</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">3482</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">3518</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">3526</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">3558</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">3607</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">3668</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">3675</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">3761</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">3871</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">3888</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">3924</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">3954</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">4068</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">4073</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">4127</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">4131</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">4135</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">4146</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">4157</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">4290</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">4321</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">4369</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">4383</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">4408</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">4443</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">4585</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">4636</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">4656</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">refine</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">ZMod</span><span class=\"w\"> </span><span class=\"mi\">43</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"w\"> </span><span class=\"n\">op</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"mi\">17</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">27</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"o\">},</span><span class=\"w\"> </span><span class=\"bp\">?_⟩</span>\n<span class=\"w\">  </span><span class=\"n\">constructor</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">unfold</span><span class=\"w\"> </span><span class=\"n\">Equation1076</span>\n<span class=\"w\">    </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Magma</span><span class=\"bp\">.</span><span class=\"n\">op</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"n\">ring_nf</span>\n<span class=\"w\">    </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">ZMod_reduce_constant0</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">ZMod_reduce_constant1</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">ZMod_reduce_constant2</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">repeat'</span><span class=\"w\"> </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">And</span><span class=\"bp\">.</span><span class=\"n\">intro</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">revert</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">decide</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>For the negative facts I guess the easiest plan is to write a tactic that detects the number of variables, and then just tries 0,1 and then 1,0 etc.</p>\n<p>Or alternatively this could proceeds algebraically as in the positive case, yielding</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">⊢</span><span class=\"w\"> </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">x_1</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">x_1</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"mi\">26</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"mi\">18</span>\n</code></pre></div>\n<p>which could be processed further,  solving for <code>x_1</code> (if this is in a finite field), and then eliminating the existential.</p>\n<p>But maybe that’s not actually worth it, and a simple tactic that just plugs in the basis vectors and uses <code>decide</code> suffices.</p>\n<p>Anyways, this plan should allow us to us rather large magmas with linear operators very efficiently.</p>",
        "id": 475253132,
        "sender_full_name": "Joachim Breitner",
        "timestamp": 1728292619
    },
    {
        "content": "<p>And it seems that <code>simp</code> already knows how to reduce <code>Fin n</code> constants, just not <code>ZMod n</code> constants, so presumably that’s just something that mathlib can fix:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">42</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">42</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"o\">):</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">44</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span>\n<span class=\"w\">  </span><span class=\"n\">guard_target</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ZMod</span><span class=\"w\"> </span><span class=\"mi\">42</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ZMod</span><span class=\"w\"> </span><span class=\"mi\">42</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"o\">):</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">44</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">fail_if_success</span><span class=\"w\"> </span><span class=\"n\">simp</span>\n<span class=\"w\">  </span><span class=\"n\">guard_target</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">44</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 475274629,
        "sender_full_name": "Joachim Breitner",
        "timestamp": 1728300401
    },
    {
        "content": "<p>In particular this means that if you use <code>Fin</code> rather than <code>ZMod</code> then <code>ring_nf; simp</code> can solve the positive facts easily:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kd\">@[</span><span class=\"n\">equational_result</span><span class=\"kd\">]</span>\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">LinearInvariance0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Magma</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">Facts</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">1076</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">26</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">65</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">73</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">102</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">117</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">125</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">160</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">167</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">212</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">229</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">258</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">263</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">335</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">362</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">429</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">437</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">464</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">473</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">504</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">513</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">546</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">562</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">617</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">632</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">640</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">679</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">704</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">826</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">833</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">872</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">879</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">910</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">917</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">949</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">962</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">1029</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">1046</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">1085</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">1110</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">1119</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">1226</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">1231</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">1278</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">1323</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">1455</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">1482</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">1491</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">1518</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">1526</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">1632</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">1654</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">1658</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">1662</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">1682</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">1721</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">1729</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">1790</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">1838</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">1850</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">1861</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">1873</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">1885</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">1897</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">1925</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">1967</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">2044</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">2053</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">2060</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">2100</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">2125</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">2267</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">2300</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">2328</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">2330</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">2449</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">2457</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">2470</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">2485</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">2503</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">2533</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">2541</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">2586</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">2653</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">2663</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">2672</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">2699</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">2744</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">2850</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">2863</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">2875</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">2910</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">2939</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">3053</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">3058</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">3066</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">3075</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">3079</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">3083</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">3094</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">3113</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">3271</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">3279</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">3343</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">3352</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">3459</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">3474</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">3482</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">3518</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">3526</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">3558</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">3607</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">3668</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">3675</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">3761</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">3871</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">3888</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">3924</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">3954</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">4068</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">4073</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">4127</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">4131</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">4135</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">4146</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">4157</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">4290</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">4321</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">4369</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">4383</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">4408</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">4443</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">4585</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">4636</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">4656</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">refine</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">43</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"w\"> </span><span class=\"n\">op</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"mi\">17</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">27</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"o\">},</span><span class=\"w\"> </span><span class=\"bp\">?_⟩</span>\n<span class=\"w\">  </span><span class=\"n\">constructor</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">unfold</span><span class=\"w\"> </span><span class=\"n\">Equation1076</span>\n<span class=\"w\">    </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Magma</span><span class=\"bp\">.</span><span class=\"n\">op</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"n\">ring_nf</span>\n<span class=\"w\">    </span><span class=\"n\">simp</span>\n</code></pre></div>",
        "id": 475275124,
        "sender_full_name": "Joachim Breitner",
        "timestamp": 1728300594
    },
    {
        "content": "<p>does the <code>reduce_mod_char</code> tactic help?</p>",
        "id": 475277621,
        "sender_full_name": "David Renshaw",
        "timestamp": 1728301477
    },
    {
        "content": "<p><a href=\"https://github.com/teorth/equational_theories/pull/402\">https://github.com/teorth/equational_theories/pull/402</a> switches to <code>Fin n</code> so that <code>simp</code> reduces literals and that we can use <code>decideFin!</code>, packages the above into a little macro, and uses that to solve positive facts for larger magmas. 26→9s speed up building this file.<br>\nI hope this unblocks larger magmas from being included by <span class=\"user-mention\" data-user-id=\"761294\">@Nicholas Carlini</span> .</p>",
        "id": 475282553,
        "sender_full_name": "Joachim Breitner",
        "timestamp": 1728303058
    },
    {
        "content": "<p>Doesn't taking (p,a,b)=(11,4,6) show 1076=/&gt; 3?</p>",
        "id": 475327456,
        "sender_full_name": "Pace Nielsen",
        "timestamp": 1728315596
    },
    {
        "content": "<p>My tool says 1076 fails (11,4,6) on (x,y)=(0,1)</p>",
        "id": 475331161,
        "sender_full_name": "Nicholas Carlini",
        "timestamp": 1728316543
    },
    {
        "content": "<p>Let me make sure it's right.</p>",
        "id": 475331195,
        "sender_full_name": "Nicholas Carlini",
        "timestamp": 1728316554
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">◇</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">◇</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">◇</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"bp\">◇</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">)</span>\n<span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">ay</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"o\">(</span><span class=\"n\">ax</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">(</span><span class=\"n\">ax</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"o\">)</span>\n<span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">ay</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"bp\">²</span><span class=\"n\">bx</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"bp\">²</span><span class=\"n\">b</span><span class=\"bp\">²</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">ab</span><span class=\"bp\">³</span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"bp\">²</span><span class=\"n\">y</span>\n\n<span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"bp\">²</span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"bp\">²</span><span class=\"n\">b</span><span class=\"bp\">²</span><span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">coefficients</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span>\n<span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">ab</span><span class=\"bp\">³</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"bp\">²</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">coefficients</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>It looks to me like the coefficients of y fail to line up.</p>",
        "id": 475331388,
        "sender_full_name": "David Renshaw",
        "timestamp": 1728316607
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">class</span><span class=\"w\"> </span><span class=\"n\">Number</span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"bp\">__</span><span class=\"n\">init__</span><span class=\"o\">(</span><span class=\"n\">self</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">number</span><span class=\"o\">):</span>\n<span class=\"w\">        </span><span class=\"n\">self</span><span class=\"bp\">.</span><span class=\"n\">number</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">number</span>\n<span class=\"w\">    </span><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"bp\">__</span><span class=\"n\">add__</span><span class=\"o\">(</span><span class=\"n\">self</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">other</span><span class=\"o\">):</span>\n<span class=\"w\">        </span><span class=\"n\">return</span><span class=\"w\"> </span><span class=\"n\">Number</span><span class=\"o\">((</span><span class=\"mi\">4</span><span class=\"bp\">*</span><span class=\"n\">self</span><span class=\"bp\">.</span><span class=\"n\">number</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">6</span><span class=\"bp\">*</span><span class=\"n\">other</span><span class=\"bp\">.</span><span class=\"n\">number</span><span class=\"o\">)</span><span class=\"bp\">%</span><span class=\"mi\">11</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"bp\">__</span><span class=\"n\">str__</span><span class=\"o\">(</span><span class=\"n\">self</span><span class=\"o\">):</span>\n<span class=\"w\">        </span><span class=\"n\">return</span><span class=\"w\"> </span><span class=\"n\">str</span><span class=\"o\">(</span><span class=\"n\">self</span><span class=\"bp\">.</span><span class=\"n\">number</span><span class=\"o\">)</span>\n\n<span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Number</span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"o\">)</span>\n<span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Number</span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"o\">)</span>\n<span class=\"n\">print</span><span class=\"o\">(</span><span class=\"n\">eval</span><span class=\"o\">(</span><span class=\"bp\">'</span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">◇</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">◇</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">◇</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"bp\">◇</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">)</span><span class=\"bp\">'.</span><span class=\"n\">replace</span><span class=\"o\">(</span><span class=\"s2\">\"◇\"</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"s2\">\"+\"</span><span class=\"o\">)))</span>\n</code></pre></div>",
        "id": 475331440,
        "sender_full_name": "Nicholas Carlini",
        "timestamp": 1728316623
    },
    {
        "content": "<p>(Gives 2, and 2 != 0)</p>",
        "id": 475331775,
        "sender_full_name": "Nicholas Carlini",
        "timestamp": 1728316732
    },
    {
        "content": "<p>Oops, I made a miscalculation on this.  Back to the drawing board.</p>",
        "id": 475335164,
        "sender_full_name": "Pace Nielsen",
        "timestamp": 1728317663
    },
    {
        "content": "<p>As long as my code is correct (and double checking it today) there will exist no new linear solutions up to Z/200Z.</p>",
        "id": 475336383,
        "sender_full_name": "Nicholas Carlini",
        "timestamp": 1728317954
    },
    {
        "content": "<p>Maybe this has already been said here - but I wonder if any new counterexamples can be found by considering <code>x ◇ y = Ax + By</code> for A, B arbitrary (possibly non-commuting) matrices</p>",
        "id": 475654958,
        "sender_full_name": "Franklin Pezzuti Dyer",
        "timestamp": 1728416661
    },
    {
        "content": "<p>I have been puzzling over the unresolved implication 63 &lt;--&gt; 1692 and thought to try this approach when the I didn't find any linear counterexamples over C. Sadly it didn't work for this specific pair of laws (the exact same pairs of matrices A, B make <code>x ◇ y = Ax + By</code> satisfy 63 as 1692) but I wonder whether this could be applied to any other implications...</p>",
        "id": 475655604,
        "sender_full_name": "Franklin Pezzuti Dyer",
        "timestamp": 1728416802
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"557192\">Franklin Pezzuti Dyer</span> <a href=\"#narrow/stream/458659-Equational/topic/An.20old.20new.20idea/near/475655604\">said</a>:</p>\n<blockquote>\n<p>I have been puzzling over the unresolved implication 63 &lt;--&gt; 1692 and thought to try this approach when the I didn't find any linear counterexamples over C. Sadly it didn't work for this specific pair of laws (the exact same pairs of matrices A, B make <code>x ◇ y = Ax + By</code> satisfy 63 as 1692) but I wonder whether this could be applied to any other implications...</p>\n</blockquote>\n<p>The laws can be expressed as polynomial equations in the coefficients of A and B, so general nonsense means that if any pair of matrices over any field works to establish a non-implication between two magma laws then a pair of matrices over a finite  field works to establish a non-implication which means there will be counterexamples for finite magmas. So this can't work for any implication known to hold for finite magmas. But other than that this potentially works.</p>",
        "id": 475662831,
        "sender_full_name": "Will Sawin",
        "timestamp": 1728418603
    },
    {
        "content": "<p>The dimension-counting arguments Terry was thinking about earlier still suggest that there will likely be interesting solutions for laws in two variables but not for more than two variables. Here the choice of finite field doesn't save you and give expected solutions in the three variable case. But are there any unknown implications left, not known to hold for finite magmas, where the source of the implication has two variables?</p>",
        "id": 475663170,
        "sender_full_name": "Will Sawin",
        "timestamp": 1728418701
    },
    {
        "content": "<p>No idea. I was finding implications to work on from the Equation Explorer - is there a way to filter out (in EE or elsewhere) the implications that are known/not known for finite magmas?</p>",
        "id": 475663814,
        "sender_full_name": "Franklin Pezzuti Dyer",
        "timestamp": 1728418901
    },
    {
        "content": "<p>I think in principle we might get some equations that are only solvable with infinite dimensional matrices and so not subject to the Lefschetz principle objection.  A classical example is AB-BA=1 which is solvable in infinite dimensions (Heisenberg relations) but not finite ones (left-hand side has trace zero, right-hand side doesn't).  I don't know if the noncommutative 63 equations have some exotic infinite dimensional solutions of this form though.</p>",
        "id": 475663955,
        "sender_full_name": "Terence Tao",
        "timestamp": 1728418934
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"557192\">Franklin Pezzuti Dyer</span> <a href=\"#narrow/stream/458659-Equational/topic/An.20old.20new.20idea/near/475663814\">said</a>:</p>\n<blockquote>\n<p>No idea. I was finding implications to work on from the Equation Explorer - is there a way to filter out (in EE or elsewhere) the implications that are known/not known for finite magmas?</p>\n</blockquote>\n<p>We have a file <a href=\"https://github.com/teorth/equational_theories/blob/main/data/smallest_magma.txt\">https://github.com/teorth/equational_theories/blob/main/data/smallest_magma.txt</a> that stores the size of the smallest nontrivial finite magma solving a given equation, so it implicitly will answer your question (up to numerical evidence), but it is not integrated into EE (maybe we should add it...)</p>",
        "id": 475664578,
        "sender_full_name": "Terence Tao",
        "timestamp": 1728419120
    },
    {
        "content": "<p>Wait this doesn't fully answer your question, it only lists whether an equation has a finite magma model, not whether an implication holds for finite models.  We don't have systematic data on that, only isolated human generated results</p>",
        "id": 475664773,
        "sender_full_name": "Terence Tao",
        "timestamp": 1728419165
    },
    {
        "content": "<p>In principle we do have data on which of the anti-implications arise from finite models, and perhaps we could remove this from the set of all anti-implications and get a relatively small set of anti-implications (a couple thousand perhaps) that are only known via infinitary techniques such as saturation, or a small number of human-coded infinite models. But we don't have tooling to easily recover this.</p>\n<p>In the medium term, we could develop an enriched version of the transitive closure tooling that lists, for a given implied implication, the specific explicit implications that were used to establish it, and also their locations in te Lean files where they live.  Then one could manually see, for any given implication, whether for instance it was disproven using a finite magma.  The list of issues is getting a bit long, but perhaps I will list this as a medium term issue.</p>",
        "id": 475671823,
        "sender_full_name": "Terence Tao",
        "timestamp": 1728421499
    },
    {
        "content": "<p>I've run through a bunch of the equations involved in open implications, plugging in ax+by+c for the operation, and then finding a reduction system for the resulting relations over noncommutative rings (using Bergman's diamond lemma from ring theory).  Each time, the relations have resulted in a,b commuting, occasionally with a+b=1.  I'm not sure why the current batch of equations leads to commuting coefficients.  (On the other hand, c doesn't commute with a,b, it is often a zero-divisor, but so far also hasn't provided any useful leverage.)  The reduction systems are very simple to find and describe.  So if anyone has a favorite equation # where they want me to give the full reduction system in terms of a,b,c, just post the number here and I'll get to it.</p>",
        "id": 475672191,
        "sender_full_name": "Pace Nielsen",
        "timestamp": 1728421662
    },
    {
        "content": "<p>Even if it is a largely negative result, this is a useful empirical data point to have - it's not intuitively obvious that the noncommutative linear models aren't significantly more powerful as anti-implication generation machines than the commutative linear models, so this is worth knowing.</p>",
        "id": 475676675,
        "sender_full_name": "Terence Tao",
        "timestamp": 1728422939
    },
    {
        "content": "<p>and the situation may totally flip applying similar ideas to a variant problem, for example the version where the equations are allowed to have five multiplications. Maybe in that case the noncommutative algebra method will resolve a lot of cases other methods don't.</p>",
        "id": 475691895,
        "sender_full_name": "Will Sawin",
        "timestamp": 1728429482
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"657719\">Terence Tao</span> <a href=\"#narrow/stream/458659-Equational/topic/An.20old.20new.20idea/near/475671823\">said</a>:</p>\n<blockquote>\n<p>In the medium term, we could develop an enriched version of the transitive closure tooling that lists, for a given implied implication, the specific explicit implications that were used to establish it, and also their locations in te Lean files where they live.  Then one could manually see, for any given implication, whether for instance it was disproven using a finite magma.  The list of issues is getting a bit long, but perhaps I will list this as a medium term issue.</p>\n</blockquote>\n<p>A possibly more pressing issue is the reverse of what you are discussing, which is to know which of the implications that are currently unknown can be proven relatively easily for finite magmas. This would require generalizing and systematizing some of the arguments people have already made.</p>",
        "id": 475696042,
        "sender_full_name": "Will Sawin",
        "timestamp": 1728432209
    }
]