[
    {
        "content": "<p>I created a PR with some infrastructure for proving a large number of properties for <code>Fin n</code>-based magmas, extracted from the PR with the many counter examples. I thought I’d highlight it here so that interested parties know about the existence of these tools:</p>\n<p><a href=\"https://github.com/teorth/equational_theories/pull/110\">https://github.com/teorth/equational_theories/pull/110</a></p>\n<ul>\n<li>\n<p>The <code>Facts G [1,2] [3,4]</code> syntax to concisely and efficiently state<br>\n   that G satisfies Equation1 and Equation2, but not Equation3 and<br>\n   Equation4</p>\n<p>There is also a crude <code>calculate_facts</code> command that takes a magma<br>\n and an instance and a tactic and lists those for which the tactic<br>\n succeeds.</p>\n</li>\n<li>\n<p>The <code>decideFin!</code> tactic that is a bit like <code>decide</code> but simply<br>\n  believes that the statement is true, so that the check only happens by<br>\n  the kernel, and uses custom code to construct the <code>Decidable</code> instance<br>\n  for the kind of theorems we actually encounter, to avoid the (slow)<br>\n  type inference.</p>\n</li>\n<li>\n<p>The <code>memoFinOp</code> elaborator that take a function<br>\n<code>Fin n → Fin n → Fin n</code>, tabulates it, encodes this table in a single<br>\n  number and implements the lookup based on that. Presumably that's more<br>\n  compact and faster to evaluate by <code>decide</code> than other forms (array<br>\n  indexing, polynomials etc.)</p>\n</li>\n</ul>\n<p>It also includes, more as a demo,  an exhaustive <code>Facts</code> statement for three <code>Fin 2</code>-based magmas, so that’s a fair number of antiimplications already right there</p>",
        "id": 473473194,
        "sender_full_name": "Joachim Breitner",
        "timestamp": 1727631335
    },
    {
        "content": "<p>CI is happy. Do people want to review/comment on this, or should I just merge :-)</p>\n<p>Maybe someone has a better name instead of <code>Facts</code>?</p>",
        "id": 473474261,
        "sender_full_name": "Joachim Breitner",
        "timestamp": 1727632208
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"243791\">@David Renshaw</span> Once this is in it would be good if the attribute from <a href=\"https://github.com/leanprover-community/mathlib4/pull/93\">#93</a>  will understand theorems of the form</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">Magma2a</span><span class=\"bp\">.</span><span class=\"n\">Facts</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Magma</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">Facts</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"mi\">2</span><span class=\"o\">,</span><span class=\"mi\">3</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">4</span><span class=\"o\">,</span><span class=\"mi\">5</span><span class=\"o\">,</span><span class=\"mi\">6</span><span class=\"o\">]</span>\n</code></pre></div>\n<p>although now that I write this, this will appear as</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">Magma2a</span><span class=\"bp\">.</span><span class=\"n\">Facts</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Magma</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">Equation1</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">Equation2</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"w\"> </span><span class=\"n\">Equation3</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"w\"> </span><span class=\"n\">Equation4</span><span class=\"w\"> </span><span class=\"n\">G</span>\n</code></pre></div>\n<p>in the environment (because <code>Facts</code> is an elaborator), so that’s what the attribute would have look for, a mild generalization of what you already do.</p>",
        "id": 473474327,
        "sender_full_name": "Joachim Breitner",
        "timestamp": 1727632273
    },
    {
        "content": "<p>should be straightforward</p>",
        "id": 473474798,
        "sender_full_name": "David Renshaw",
        "timestamp": 1727632612
    },
    {
        "content": "<p>... and should be a separate PR from <a href=\"https://github.com/teorth/equational_theories/pull/93\">equational#93</a>. :)</p>",
        "id": 473475038,
        "sender_full_name": "David Renshaw",
        "timestamp": 1727632811
    },
    {
        "content": "<p>One could possibly use <code>G.satisfies [1,2,3] [4,5,6]</code> instead of <code>Facts G [1,2,3] [4,5,6]</code></p>",
        "id": 473480276,
        "sender_full_name": "Terence Tao",
        "timestamp": 1727635503
    },
    {
        "content": "<p>Hmm, it's an elaborator, not a normal function, so probably easier starting with a keyword.</p>",
        "id": 473482441,
        "sender_full_name": "Joachim Breitner",
        "timestamp": 1727636630
    },
    {
        "content": "<p>I guess <code>Facts</code> is fine.  One could try for some pseudo-English such as <code>G satisfies [1,2,3] not [4,5,6]</code> but that also reads weirdly</p>",
        "id": 473489099,
        "sender_full_name": "Terence Tao",
        "timestamp": 1727642483
    },
    {
        "content": "<p>Another option is <code>G ⊧ [1,2,3] \\ [4,5,6]</code> which is pseudo-model theory notation</p>",
        "id": 473489191,
        "sender_full_name": "Terence Tao",
        "timestamp": 1727642571
    },
    {
        "content": "<p>I guess we can start with <code>Facts</code> and change later when we are so inclined</p>",
        "id": 473490522,
        "sender_full_name": "Joachim Breitner",
        "timestamp": 1727643723
    }
]