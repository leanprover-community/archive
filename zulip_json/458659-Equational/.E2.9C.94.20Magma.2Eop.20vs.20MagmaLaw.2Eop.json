[
    {
        "content": "<p>Equation Explorer says that eq1661 and eq1979 and dual: <a href=\"https://teorth.github.io/equational_theories/implications/?1661\">https://teorth.github.io/equational_theories/implications/?1661</a></p>\n<p>Therefore I expect this to work:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">equational_theories</span><span class=\"bp\">.</span><span class=\"n\">Equations</span><span class=\"bp\">.</span><span class=\"n\">All</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Law1661</span><span class=\"bp\">.</span><span class=\"n\">symm</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Law1979</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">decide</span>\n</code></pre></div>\n<p>However, it fails with the error:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">tactic</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">decide'</span><span class=\"w\"> </span><span class=\"n\">proved</span><span class=\"w\"> </span><span class=\"n\">that</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">proposition</span>\n<span class=\"w\">  </span><span class=\"n\">Law</span><span class=\"bp\">.</span><span class=\"n\">MagmaLaw</span><span class=\"bp\">.</span><span class=\"n\">symm</span><span class=\"w\"> </span><span class=\"n\">Law1661</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Law1979</span>\n<span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">false</span>\n</code></pre></div>\n<p>What's going wrong here?</p>",
        "id": 476436724,
        "sender_full_name": "David Renshaw",
        "timestamp": 1728670101
    },
    {
        "content": "<p>These examples do work:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Law1</span><span class=\"bp\">.</span><span class=\"n\">symm</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Law1</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">decide</span>\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Law1661</span><span class=\"bp\">.</span><span class=\"n\">symm</span><span class=\"bp\">.</span><span class=\"n\">symm</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Law1661</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">decide</span>\n</code></pre></div>",
        "id": 476436877,
        "sender_full_name": "David Renshaw",
        "timestamp": 1728670174
    },
    {
        "content": "<p>This fails:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Law4</span><span class=\"bp\">.</span><span class=\"n\">symm</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Law5</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">decide</span>\n<span class=\"c1\">-- tactic 'decide' proved that the proposition</span>\n<span class=\"c1\">--  Law.MagmaLaw.symm Law4 = Law5</span>\n<span class=\"c1\">-- is false</span>\n</code></pre></div>",
        "id": 476438023,
        "sender_full_name": "David Renshaw",
        "timestamp": 1728670720
    },
    {
        "content": "<p><span aria-label=\"man facepalming\" class=\"emoji emoji-1f926-200d-2642\" role=\"img\" title=\"man facepalming\">:man_facepalming:</span> oh... I'm confusing \"symmetry\" with \"duality\".</p>",
        "id": 476438241,
        "sender_full_name": "David Renshaw",
        "timestamp": 1728670833
    },
    {
        "content": "<p>I started reading <a href=\"https://github.com/teorth/equational_theories/pull/285\">equational#285</a> and saw a bunch of stuff about <code>symm</code> and apparently got the wrong idea.</p>",
        "id": 476438752,
        "sender_full_name": "David Renshaw",
        "timestamp": 1728671083
    },
    {
        "content": "<p>Aha! This works:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">equational_theories</span><span class=\"bp\">.</span><span class=\"n\">Equations</span><span class=\"bp\">.</span><span class=\"n\">All</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">equational_theories</span><span class=\"bp\">.</span><span class=\"n\">MagmaOp</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Law4</span><span class=\"bp\">.</span><span class=\"n\">op</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Law5</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">decide</span>\n</code></pre></div>",
        "id": 476439017,
        "sender_full_name": "David Renshaw",
        "timestamp": 1728671214
    },
    {
        "content": "<p>where <code>MagmaLaw.op</code> presumably is short for \"opposite\"</p>",
        "id": 476439056,
        "sender_full_name": "David Renshaw",
        "timestamp": 1728671231
    },
    {
        "content": "<p>... which is an unfortunate naming clash with <code>Magma.op</code>, the binary operator</p>",
        "id": 476439121,
        "sender_full_name": "David Renshaw",
        "timestamp": 1728671270
    },
    {
        "content": "<p>I feel like <code>MagmaLaw.dual</code> could be a clearer name.</p>",
        "id": 476439326,
        "sender_full_name": "David Renshaw",
        "timestamp": 1728671374
    },
    {
        "content": "<p>that's a fair point, from my side, happy to do this rename (or if you want to give it a go)</p>",
        "id": 476441710,
        "sender_full_name": "Andrés Goens",
        "timestamp": 1728672340
    },
    {
        "content": "<p>(I don't intend to do it myself right now.)</p>",
        "id": 476441949,
        "sender_full_name": "David Renshaw",
        "timestamp": 1728672456
    },
    {
        "content": "<p>me neither, maybe we should make an issue and whoever ends up finding time can claim it then?</p>",
        "id": 476442065,
        "sender_full_name": "Andrés Goens",
        "timestamp": 1728672501
    },
    {
        "content": "<p>note that I called it op on MagmaLaw because of FreeMagma <a href=\"https://github.com/teorth/equational_theories/blob/main/equational_theories%2FMagmaOp.lean\">https://github.com/teorth/equational_theories/blob/main/equational_theories%2FMagmaOp.lean</a>, I guess those should also be renamed?</p>",
        "id": 476442433,
        "sender_full_name": "Andrés Goens",
        "timestamp": 1728672665
    },
    {
        "content": "<p>(maybe we should wait a bit to see if someone else has a different opinion on this?)</p>",
        "id": 476442602,
        "sender_full_name": "Andrés Goens",
        "timestamp": 1728672759
    },
    {
        "content": "<p>Oh dear, that is an unfortunate namespace collision.  I'm not strongly attached to <code>op</code> for the <code>Magma</code> operation; I introduced it way back at the very beginning of the project, because I couldn't think of a better name, but if someone can propose one I would not object to a refactor.  On the other hand the <code>MagmaLaw</code> codebase is smaller and so just from a practical point of view it may be easier to refactor that name instead.  (Or we can just keep both names at is and hope that confusion is minimized, but perhaps it's better to bite the bullet and refactor now while it is still somewhat doable.)</p>",
        "id": 476444773,
        "sender_full_name": "Terence Tao",
        "timestamp": 1728673883
    },
    {
        "content": "<p>It's probably a good idea to keep an issue open to track it, even if its super low priority for the time being. If nothing else it gives a place to point to if it leads to a similar confusion in the future <span aria-label=\"joy\" class=\"emoji emoji-1f602\" role=\"img\" title=\"joy\">:joy:</span></p>",
        "id": 476460872,
        "sender_full_name": "Joe McCann",
        "timestamp": 1728681763
    },
    {
        "content": "<p>Added <a href=\"https://github.com/teorth/equational_theories/pull/525\">equational#525</a> for this.</p>",
        "id": 476464293,
        "sender_full_name": "Terence Tao",
        "timestamp": 1728683490
    },
    {
        "content": "<p>Should we rename only <code>MagmaLaw.op</code>(and its related theorems) as <code>MagmaLaw.dual</code> or also <code>FreeMagma.op</code> (and its related theorems) as <code>FreeMagma.dual</code>?</p>",
        "id": 476466434,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1728684833
    },
    {
        "content": "<p>Opened draft PR <a href=\"https://github.com/teorth/equational_theories/pull/527\">equational#527</a></p>",
        "id": 476466770,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1728685071
    },
    {
        "content": "<p>I have no objection to this, but perhaps the contributors who are working more closely with <code>FreeMagma</code> and <code>MagmaLaw</code> can weigh in.</p>",
        "id": 476468939,
        "sender_full_name": "Terence Tao",
        "timestamp": 1728686610
    },
    {
        "content": "<p>I've been working more closely with those and have no objection to this. I would ask that we make it consistently with both, e.g. <a href=\"https://github.com/teorth/equational_theories/pull/527\">equational#527</a> currently changes <code>MagmaLaw.op</code> to <code>dual</code> but not <code>FreeMagma.op</code>, so those should be changed as well</p>",
        "id": 476502256,
        "sender_full_name": "Andrés Goens",
        "timestamp": 1728718179
    },
    {
        "content": "<p>Will do it later. Thanks.</p>",
        "id": 476517015,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1728732105
    },
    {
        "content": "<p>Done.</p>",
        "id": 476529526,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1728744637
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"556875\">Pietro Monticone</span> has marked this topic as resolved.</p>",
        "id": 476530286,
        "sender_full_name": "Notification Bot",
        "timestamp": 1728745438
    }
]