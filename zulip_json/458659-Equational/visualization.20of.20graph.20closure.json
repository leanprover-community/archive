[
    {
        "content": "<p><a href=\"/user_uploads/3121/gOpZrSsPNHjowJWs0BNUWbEI/outcomes0.png\">outcomes0.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/gOpZrSsPNHjowJWs0BNUWbEI/outcomes0.png\" title=\"outcomes0.png\"><img data-original-dimensions=\"4694x4694\" src=\"/user_uploads/thumbnail/3121/gOpZrSsPNHjowJWs0BNUWbEI/outcomes0.png/840x560.webp\"></a></div>",
        "id": 474037885,
        "sender_full_name": "David Renshaw",
        "timestamp": 1727789222
    },
    {
        "content": "<p>^ A rendering of the current output of <code>lake exe extract_implications outcomes equational_theories</code></p>",
        "id": 474038100,
        "sender_full_name": "David Renshaw",
        "timestamp": 1727789277
    },
    {
        "content": "<p>explicitly proved implications are bright green. implicitly proved implications are dim green.<br>\nexplicitly disproved implications are bridge red. implicitly disproved implications are dim red.<br>\nconjectures are purple. Not many of those.</p>",
        "id": 474038350,
        "sender_full_name": "David Renshaw",
        "timestamp": 1727789338
    },
    {
        "content": "<p>3 messages were moved here from <a class=\"stream-topic\" data-stream-id=\"458659\" href=\"/#narrow/stream/458659-Equational/topic/Some.20more.20implication.20visualizations\">#Equational &gt; Some more implication visualizations</a> by <span class=\"user-mention silent\" data-user-id=\"243791\">David Renshaw</span>.</p>",
        "id": 474038737,
        "sender_full_name": "Notification Bot",
        "timestamp": 1727789426
    },
    {
        "content": "<p>The ordering of the rows and columns are not yet canonical. Fixing that is my next task.</p>",
        "id": 474038918,
        "sender_full_name": "David Renshaw",
        "timestamp": 1727789471
    },
    {
        "content": "<p>Nice to see so much area covered already -)</p>",
        "id": 474039923,
        "sender_full_name": "Joachim Breitner",
        "timestamp": 1727789723
    },
    {
        "content": "<p>What do the (nearly) black columns mean? Identities that are probably very weak but we have no proof of that?</p>",
        "id": 474040493,
        "sender_full_name": "Amir Livne Bar-on",
        "timestamp": 1727789881
    },
    {
        "content": "<p>put up a draft pull request: <a href=\"https://github.com/teorth/equational_theories/pull/167\">https://github.com/teorth/equational_theories/pull/167</a></p>",
        "id": 474040676,
        "sender_full_name": "David Renshaw",
        "timestamp": 1727789927
    },
    {
        "content": "<p>what I really want with this is some way that I can navigate the data!</p>",
        "id": 474040814,
        "sender_full_name": "David Renshaw",
        "timestamp": 1727789967
    },
    {
        "content": "<p>like, it would be cool if Amir could hover a mouse pointer over a black column and get information about it</p>",
        "id": 474040901,
        "sender_full_name": "David Renshaw",
        "timestamp": 1727789990
    },
    {
        "content": "<p><a href=\"/user_uploads/3121/1gbneBrs5RlFJO2w2xNklZZS/outcomes1.png\">outcomes1.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/1gbneBrs5RlFJO2w2xNklZZS/outcomes1.png\" title=\"outcomes1.png\"><img data-original-dimensions=\"4694x4694\" src=\"/user_uploads/thumbnail/3121/1gbneBrs5RlFJO2w2xNklZZS/outcomes1.png/840x560.webp\"></a></div>",
        "id": 474043359,
        "sender_full_name": "David Renshaw",
        "timestamp": 1727790646
    },
    {
        "content": "<p>^ ordering canonicalized</p>",
        "id": 474043404,
        "sender_full_name": "David Renshaw",
        "timestamp": 1727790659
    },
    {
        "content": "<p>I've seen that picture before!</p>\n<div class=\"spoiler-block\"><div class=\"spoiler-header\">\n<p>:bagpipe:</p>\n</div><div class=\"spoiler-content\" aria-hidden=\"true\">\n<p><a href=\"https://duckduckgo.com/?t=ffab&amp;q=scottish+kilt+cloth+pattern&amp;iax=images&amp;ia=images\">https://duckduckgo.com/?t=ffab&amp;q=scottish+kilt+cloth+pattern&amp;iax=images&amp;ia=images</a></p>\n</div></div>",
        "id": 474046074,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1727791306
    },
    {
        "content": "<p>It looks like the whole diagonal is black, meaning unknown</p>",
        "id": 474048640,
        "sender_full_name": "David Renshaw",
        "timestamp": 1727792020
    },
    {
        "content": "<p>rather than green, as it should be</p>",
        "id": 474048660,
        "sender_full_name": "David Renshaw",
        "timestamp": 1727792027
    },
    {
        "content": "<p>I think that means there's an easy set of results to add to <code>equational_theories/Generated</code></p>",
        "id": 474048764,
        "sender_full_name": "David Renshaw",
        "timestamp": 1727792050
    },
    {
        "content": "<p>the difference between <em>transitive</em> closure and <em>reflexive-transitive</em> closure</p>",
        "id": 474048809,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1727792064
    },
    {
        "content": "<p>I don’t think we have explicit proofs of the diagonal, and I don’t think it’s useful to add these proofs. Just include them as implied implications in the picture.</p>",
        "id": 474048852,
        "sender_full_name": "Joachim Breitner",
        "timestamp": 1727792077
    },
    {
        "content": "<p>this could be a metatheorem <span aria-label=\"upside down\" class=\"emoji emoji-1f643\" role=\"img\" title=\"upside down\">:upside_down:</span></p>",
        "id": 474048923,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1727792100
    },
    {
        "content": "<p>why isn't it useful? I thought we wanted to prove everything.</p>",
        "id": 474049116,
        "sender_full_name": "David Renshaw",
        "timestamp": 1727792153
    },
    {
        "content": "<p>It's not like there's a huge number of them, compared to other sorts of things</p>",
        "id": 474049218,
        "sender_full_name": "David Renshaw",
        "timestamp": 1727792173
    },
    {
        "content": "<p>one could write a macro and have this take up very little source code space</p>",
        "id": 474049380,
        "sender_full_name": "David Renshaw",
        "timestamp": 1727792222
    },
    {
        "content": "<p>it's trivially true, that's why. and i imagine they clog up calculating the transitive closure.</p>",
        "id": 474049381,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1727792222
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"243791\">David Renshaw</span> <a href=\"#narrow/stream/458659-Equational/topic/visualization.20of.20graph.20closure/near/474049116\">said</a>:</p>\n<blockquote>\n<p>why isn't it useful? I thought we wanted to prove everything.</p>\n</blockquote>\n<p>I don’t think we want to prove everything. We want to prove enough so that we know the full graph, but just like we don’t  prove transitive implications, we shouldn’t prove symmetrical implications.</p>",
        "id": 474049904,
        "sender_full_name": "Joachim Breitner",
        "timestamp": 1727792364
    },
    {
        "content": "<p>I’d also say we don’t prove implications or anti-implications where we already have the dual one, and instead move that information into the result-processing stage.</p>",
        "id": 474050082,
        "sender_full_name": "Joachim Breitner",
        "timestamp": 1727792412
    },
    {
        "content": "<p>makes sense</p>",
        "id": 474050758,
        "sender_full_name": "David Renshaw",
        "timestamp": 1727792605
    },
    {
        "content": "<p><a href=\"/user_uploads/3121/jrXiFmUkZDuSMyaq0L7pkmbO/outcomes2.png\">outcomes2.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/jrXiFmUkZDuSMyaq0L7pkmbO/outcomes2.png\" title=\"outcomes2.png\"><img data-original-dimensions=\"4694x4694\" src=\"/user_uploads/thumbnail/3121/jrXiFmUkZDuSMyaq0L7pkmbO/outcomes2.png/840x560.webp\"></a></div>",
        "id": 474051267,
        "sender_full_name": "David Renshaw",
        "timestamp": 1727792749
    },
    {
        "content": "<p>^ drew the diagonal as \"implicit_proof_true\"</p>",
        "id": 474051417,
        "sender_full_name": "David Renshaw",
        "timestamp": 1727792779
    },
    {
        "content": "<p>I think it would be very cool to render an up-to-date version of this on a webpage and to make it explorable somehow. (hover to get info about a pixel, maybe choose between different orders on indices, zoom in, etc)</p>",
        "id": 474051829,
        "sender_full_name": "David Renshaw",
        "timestamp": 1727792892
    },
    {
        "content": "<p>Hm... I wonder why red stripes can be both vertical and horizontal, but it seems that green stripes can only be vertical. What's the math explanation for that?</p>",
        "id": 474052525,
        "sender_full_name": "David Renshaw",
        "timestamp": 1727793084
    },
    {
        "content": "<p>A horizontal green stripe would mean that something is implied by many equations, right? That seems like a very rare property, compared to a vertical green stripe (implies a lot of things), a vertical red stripe (doesn't imply a lot of things), and a horizontal red stripe (a lot of things don't imply it)</p>",
        "id": 474052980,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1727793196
    },
    {
        "content": "<p>Thanks!  I just created a list of visualizations in README.md (similar to the \"recent progress\", please add to it when submitting your PR to link these files.   (I have lists both for single-shot visualizations generated at one point in time, and continuously updated visualizations.)</p>",
        "id": 474056581,
        "sender_full_name": "Terence Tao",
        "timestamp": 1727794152
    },
    {
        "content": "<p><a href=\"/user_uploads/3121/N2U--i-N0TxudNPPSPJMXWhW/out.png\">out.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/N2U--i-N0TxudNPPSPJMXWhW/out.png\" title=\"out.png\"><img data-original-dimensions=\"4694x4694\" src=\"/user_uploads/thumbnail/3121/N2U--i-N0TxudNPPSPJMXWhW/out.png/840x560.webp\"></a></div>",
        "id": 474061126,
        "sender_full_name": "David Renshaw",
        "timestamp": 1727795261
    },
    {
        "content": "<p>now using blue instead of green, after being informed that might work better for colorblind folks</p>",
        "id": 474061441,
        "sender_full_name": "David Renshaw",
        "timestamp": 1727795323
    },
    {
        "content": "<p>ready for review <a href=\"https://github.com/teorth/equational_theories/pull/167\">equational#167</a></p>",
        "id": 474073975,
        "sender_full_name": "David Renshaw",
        "timestamp": 1727799173
    },
    {
        "content": "<p>I added a <code>--scale</code> parameter, so that a smaller visualization of something like <code>Subgraph.lean</code> looks good. (Zooming in on a tiny png typically looks bad due to antialiasing).</p>",
        "id": 474074447,
        "sender_full_name": "David Renshaw",
        "timestamp": 1727799327
    },
    {
        "content": "<p><a href=\"/user_uploads/3121/Vg564aVMjjs3kww31jETTDBP/subgraph.png\">subgraph.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/Vg564aVMjjs3kww31jETTDBP/subgraph.png\" title=\"subgraph.png\"><img data-original-dimensions=\"240x240\" src=\"/user_uploads/thumbnail/3121/Vg564aVMjjs3kww31jETTDBP/subgraph.png/840x560.webp\"></a></div>",
        "id": 474074550,
        "sender_full_name": "David Renshaw",
        "timestamp": 1727799359
    },
    {
        "content": "<p><a href=\"/user_uploads/3121/UZkw5Xhs_1UkHEhVdX0hxqo9/output.gif\">output.gif</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/UZkw5Xhs_1UkHEhVdX0hxqo9/output.gif\" title=\"output.gif\"><img data-animated=\"true\" data-original-dimensions=\"1200x1200\" src=\"/user_uploads/thumbnail/3121/UZkw5Xhs_1UkHEhVdX0hxqo9/output.gif/840x560-anim.webp\"></a></div>",
        "id": 474153337,
        "sender_full_name": "David Renshaw",
        "timestamp": 1727829518
    },
    {
        "content": "<p>^ zoomed in 300x300 pixel area showing some of the changes from <span class=\"user-mention\" data-user-id=\"761203\">@Vlad Tsyrklevich</span>'s <a href=\"https://github.com/teorth/equational_theories/pull/178\">equational#178</a></p>",
        "id": 474153384,
        "sender_full_name": "David Renshaw",
        "timestamp": 1727829580
    },
    {
        "content": "<p>It looks to me like all the changes (even when I zoom out) are filling in existing dashed vertical blue lines and making them solid.</p>",
        "id": 474153466,
        "sender_full_name": "David Renshaw",
        "timestamp": 1727829621
    },
    {
        "content": "<p>I wonder what the means about the math!</p>",
        "id": 474153483,
        "sender_full_name": "David Renshaw",
        "timestamp": 1727829637
    },
    {
        "content": "<p>I realize now that the original bruteforce scripts did not make use of <code>symm</code>, so there were certain identities it would never solve that were fairly trivial</p>",
        "id": 474199112,
        "sender_full_name": "Vlad Tsyrklevich",
        "timestamp": 1727849056
    },
    {
        "content": "<p>In particular, I increased the size of the Equation 2 equivalence class by another ~140 equations, and perhaps that's what's visible there?</p>",
        "id": 474200741,
        "sender_full_name": "Vlad Tsyrklevich",
        "timestamp": 1727849611
    },
    {
        "content": "<p>I fixed a bug in index order canonicalization (see <a href=\"https://github.com/teorth/equational_theories/pull/268\">equational#268</a>), and now the status image looks much more regular:<br>\n<a href=\"/user_uploads/3121/Toq9N-urb82ez3HmJm_BGJfW/outcomes.png\">outcomes.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/Toq9N-urb82ez3HmJm_BGJfW/outcomes.png\" title=\"outcomes.png\"><img data-original-dimensions=\"4697x4697\" src=\"/user_uploads/thumbnail/3121/Toq9N-urb82ez3HmJm_BGJfW/outcomes.png/840x560.webp\"></a></div>",
        "id": 474717177,
        "sender_full_name": "David Renshaw",
        "timestamp": 1728010116
    },
    {
        "content": "<p><a href=\"/user_uploads/3121/NKWbrT7gzWFqTSGnqwxZpFav/Screenshot-from-2024-10-03-23-00-31.png\">Screenshot from 2024-10-03 23-00-31.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/NKWbrT7gzWFqTSGnqwxZpFav/Screenshot-from-2024-10-03-23-00-31.png\" title=\"Screenshot from 2024-10-03 23-00-31.png\"><img data-original-dimensions=\"1952x1092\" src=\"/user_uploads/thumbnail/3121/NKWbrT7gzWFqTSGnqwxZpFav/Screenshot-from-2024-10-03-23-00-31.png/840x560.webp\"></a></div>",
        "id": 474718854,
        "sender_full_name": "David Renshaw",
        "timestamp": 1728010846
    },
    {
        "content": "<p>I like these secondary diagonals, but I don't know what they mean.</p>",
        "id": 474718896,
        "sender_full_name": "David Renshaw",
        "timestamp": 1728010864
    },
    {
        "content": "<p>oops, fixed another indexing bug (<a href=\"https://github.com/teorth/equational_theories/pull/274\">equational#274</a>), and now the images look even more regular:<br>\n<a href=\"/user_uploads/3121/fK39t197lewPMGh9l-IeKHy-/outcomes2.png\">outcomes2.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/fK39t197lewPMGh9l-IeKHy-/outcomes2.png\" title=\"outcomes2.png\"><img data-original-dimensions=\"4697x4697\" src=\"/user_uploads/thumbnail/3121/fK39t197lewPMGh9l-IeKHy-/outcomes2.png/840x560.webp\"></a></div>",
        "id": 474807426,
        "sender_full_name": "David Renshaw",
        "timestamp": 1728043093
    },
    {
        "content": "<p>I guess we need formally verified visualisations <span aria-label=\"rofl\" class=\"emoji emoji-1f923\" role=\"img\" title=\"rofl\">:rofl:</span></p>",
        "id": 474807688,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1728043196
    },
    {
        "content": "<p>more practically, perhaps <code>Closure.lean</code> should at least sort the equation numbers in its indexing. (some related discussion <a href=\"#narrow/stream/458659-Equational/topic/Lean.20script.20for.20extracting.20current.20set.20of.20implications/near/474706822\">over here</a>)</p>",
        "id": 474808219,
        "sender_full_name": "David Renshaw",
        "timestamp": 1728043329
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"112680\">@Johan Commelin</span> You're joking, but the first release of the formally verified <a href=\"https://www.semanticscholar.org/paper/Formalizing-and-Computing-Propositional-Quantifiers-F%C3%A9r%C3%A9e-Gool/27fab386e164e8f9c76a5b8b804f19a0cee6d629\">Pitts quantifier calculator</a> -- an algorithm so difficult that nobody could implement it correctly without formal verification despite repeated attempts in the last 30 years -- gave wrong outputs for related reasons.</p>\n<p>The output it gave was sometimes, but not always, wrong. I only noticed because I happened to know the Pitts interpolant of a specific formula. I double-checked everything, but \"<em>Dear Professor, This sounds crazy but I'm pretty sure your formally verified program is giving wrong outputs...</em>\" was still one of the harder emails of my career :) The issue turned out to be a bug in the unverified expression printing which put some parentheses in wrong places.</p>",
        "id": 474811227,
        "sender_full_name": "Zoltan A. Kocsis (Z.A.K.)",
        "timestamp": 1728044451
    },
    {
        "content": "<p>Great story <span aria-label=\"grinning\" class=\"emoji emoji-1f600\" role=\"img\" title=\"grinning\">:grinning:</span></p>",
        "id": 474820593,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1728047557
    },
    {
        "content": "<p>This is actually an important insight. Our project has a formally verified Lean backend but we are going to interface with it through a variety of front ends written in a variety of languages. We already had one major (but thankfully very temporary) issue with an off-by-one error temporarily scrambling the non-verified (conjectural) portion of the ground truth data set but there is also the possibility of even the verified data set being incorrectly rendered when converted to human-accessible form. I guess “unit tests” are a common validation here? We could try to see if various formally verified (or verifiable) phenomena, such as duality symmetry, actually show up in our data visualizations.</p>",
        "id": 474835208,
        "sender_full_name": "Terence Tao",
        "timestamp": 1728052012
    },
    {
        "content": "<p>In this particular case, I tried zooming in on some black (\"unknown\") pixels, grabbed their pixel coordinates, translated those to equation numbers (just add 1 to each) and then checked their status in <a href=\"https://nicholas.carlini.com/tmp/view.html\">https://nicholas.carlini.com/tmp/view.html</a>.</p>",
        "id": 474835839,
        "sender_full_name": "David Renshaw",
        "timestamp": 1728052192
    },
    {
        "content": "<p>... and they seemed to line up.</p>",
        "id": 474835862,
        "sender_full_name": "David Renshaw",
        "timestamp": 1728052201
    },
    {
        "content": "<p>Here is a concrete suggestion.  At <a href=\"https://github.com/teorth/equational_theories/blob/main/data/dual_equations.md\">https://github.com/teorth/equational_theories/blob/main/data/dual_equations.md</a> is a list of equations and their dual, generated by <a href=\"https://github.com/teorth/equational_theories/blob/main/scripts/find_dual.py\">https://github.com/teorth/equational_theories/blob/main/scripts/find_dual.py</a> .  This can be used to order the 4694 equations so that duality becomes reflection symmetry (e.g., the self-dual equations would be in the middle, and then dual pairs added around that self-dual core).  Then the above visualizations should also exhibit a reflection symmetry (this will hopefully be more manifest if one figures out a nice ordering of the self-dual equations and dual pairs that gives the graph a bit more structure, e.g., putting simpler equations on one end.  The visual symmetry might also give more pleasing images as well as being a nontrivial unit test.  (Note: our graph is not currently guaranteed to exhibit duality symmetry, as we have not implemented  <a href=\"https://github.com/teorth/equational_theories/pull/174\">equational#174</a>, but it should be pretty close to such, and this visualization is in fact a very nice way of seeing how close we are to being closed under duality, and whether we can get a quick win from implementing <a href=\"https://github.com/teorth/equational_theories/pull/174\">equational#174</a> .)</p>",
        "id": 474836468,
        "sender_full_name": "Terence Tao",
        "timestamp": 1728052369
    },
    {
        "content": "<p>Here is another concrete suggestion, starting with a heuristic.  To specify a finite magma of size n one needs to specify n^2 quantities, each of which have n choices, leading to n^(n^2) such magmas.  Intuitively there are n^2 \"degrees of freedom\" here, one for each entry of the multiplication table.  If one has a law involving k variables, this is basically specifying about n^k \"constraints\" on these n^2 variables.  So the total \"degrees of freedom\" a law provides should be roughly n^2 - n^k, ignoring the extremely complex issue of what dependencies between the constraints there are.  Still, this suggests the following predictions:</p>\n<ul>\n<li>k=1 laws are underdetermined - they should have a ton of finite magmas obeying them.</li>\n<li>k=2 laws are determined - some of them may have very few finite instances, some may have a moderately large number, but nowhere near what the k=1 type equations would have</li>\n<li>k&gt;2 laws are overdetermined - most of them should be trivial, particularly for very large k, but some may have some sporadic solutions, and a few wil have exceptional algebraic structure and have a lot of solutions.</li>\n</ul>\n<p>So if we order the laws by k (as opposed to the current system of ordering lexicographically by length of LHS and RHS) we may get a more structurally interesting visualization.</p>\n<p>It might also be worth visualizing the finite magma data somehow using this classification by the number k of variables to see to what extent this heuristic is valid.</p>\n<p>More generally, we have enough data now that experimental mathematics is in play: we can try to start testing heuristic hypotheses empirically.  It is perhaps ironic (but potentially quite wonderful) that formal proof assistants can in fact enable one of the least formal (but still very useful) modes of mathematics that we have...</p>",
        "id": 474837786,
        "sender_full_name": "Terence Tao",
        "timestamp": 1728052763
    },
    {
        "content": "<p>Let me go ahead and make formal project tasks out of these two assertions.  One sec.  UPDATE: <a href=\"https://github.com/teorth/equational_theories/pull/277\">equational#277</a> and <a href=\"https://github.com/teorth/equational_theories/pull/278\">equational#278</a></p>",
        "id": 474838047,
        "sender_full_name": "Terence Tao",
        "timestamp": 1728052835
    },
    {
        "content": "<p>a lot less bright red after the transitive closure pruning that just landed: <br>\n<a href=\"/user_uploads/3121/KHTW7KCbk7yYC2Qy9EHuz5l6/outcomes3.png\">outcomes3.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/KHTW7KCbk7yYC2Qy9EHuz5l6/outcomes3.png\" title=\"outcomes3.png\"><img data-original-dimensions=\"4697x4697\" src=\"/user_uploads/thumbnail/3121/KHTW7KCbk7yYC2Qy9EHuz5l6/outcomes3.png/840x560.webp\"></a></div>",
        "id": 474844447,
        "sender_full_name": "David Renshaw",
        "timestamp": 1728054840
    },
    {
        "content": "<p>Is there still interest in sorting the equations in the program output?<br>\n<a href=\"https://github.com/teorth/equational_theories/pull/280\">https://github.com/teorth/equational_theories/pull/280</a></p>",
        "id": 474845643,
        "sender_full_name": "Amir Livne Bar-on",
        "timestamp": 1728055236
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"657719\">Terence Tao</span> <a href=\"#narrow/stream/458659-Equational/topic/visualization.20of.20graph.20closure/near/474837786\">said</a>:</p>\n<blockquote>\n<p>t might also be worth visualizing the finite magma data somehow using this classification by the number k of variables to see to what extent this heuristic is valid.</p>\n</blockquote>\n<p>Note that there might not be all that much exhaustive finite magma data for this project yet. We have a full enumeration of 4x4 magmas, but it's not checked in, and we only use 858 finite magmas as counterexamples. Still, let me get this started with the following histograms, based on these 858 finite magmas.</p>\n<p><a href=\"/user_uploads/3121/P_oc_vwK_e4cDl70sG2xJQWY/858-finite-magmas-histograms.png\">858-finite-magmas-histograms.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/P_oc_vwK_e4cDl70sG2xJQWY/858-finite-magmas-histograms.png\" title=\"858-finite-magmas-histograms.png\"><img data-original-dimensions=\"689x1310\" src=\"/user_uploads/thumbnail/3121/P_oc_vwK_e4cDl70sG2xJQWY/858-finite-magmas-histograms.png/840x560.webp\"></a></div><p>The histograms show how many equations there are which are satisfied in a given number of magmas. The x axis does not actually go below 0, that's just how a bin that includes 0 is visualized.</p>\n<p>Note that this particular dataset is not just small, but might be quite skewed. E.g. a lot of magmas satisfying Equation3 (x=xx) won't feature.</p>",
        "id": 474851468,
        "sender_full_name": "Zoltan A. Kocsis (Z.A.K.)",
        "timestamp": 1728057249
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"763356\">Zoltan A. Kocsis (Z.A.K.)</span> <a href=\"#narrow/stream/458659-Equational/topic/visualization.20of.20graph.20closure/near/474851468\">said</a>:</p>\n<blockquote>\n<p>We have a full enumeration of 4x4 magmas, but it's not checked in</p>\n</blockquote>\n<p>I thought it was checked in, right? Or at least it looks like some of them are, are others not<br>\n<a href=\"https://github.com/teorth/equational_theories/blob/main/equational_theories/Generated/All4x4Tables/Refutation176.lean\">https://github.com/teorth/equational_theories/blob/main/equational_theories/Generated/All4x4Tables/Refutation176.lean</a></p>",
        "id": 474853080,
        "sender_full_name": "Nicholas Carlini",
        "timestamp": 1728057755
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"761294\">@Nicholas Carlini</span> : Sorry, I misspoke. Your refutations4x4.txt is of course checked in and used, but that's not the list of all 4x4 magmas (which is massive), it's a close-to-minimal subset which proves the same set of anti-implications as the full ist.</p>",
        "id": 474853792,
        "sender_full_name": "Zoltan A. Kocsis (Z.A.K.)",
        "timestamp": 1728057951
    },
    {
        "content": "<p>That preliminary data already indicates that the number of variables plays a role.  One may wish to first reduce by equivalence to get sharper correlations; there are some equations with many variables that are actually just low-variable equations in disguise.  And x=x and x=y are somewhat degenerate and should probably be removed from the analysis.  Still it does indicate that we should get some meaningful empirical observations by exploring the relation between finite magma solvability and number of \"degrees of freedom\" (where one may need to update the naive metric of \"number of variables\" to something more subtle).</p>",
        "id": 474853822,
        "sender_full_name": "Terence Tao",
        "timestamp": 1728057959
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"763356\">Zoltan A. Kocsis (Z.A.K.)</span> <a href=\"#narrow/stream/458659-Equational/topic/visualization.20of.20graph.20closure/near/474853792\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"761294\">Nicholas Carlini</span> : Sorry, I misspoke. Your refutations4x4.txt is of course checked in and used, but that's not the list of all 4x4 magmas (which is massive), it's a close-to-minimal subset which proves the same set of anti-implications as the full ist.</p>\n</blockquote>\n<p>Oh okay yeah that's right. We could potentially check in one magma per equivalence class (meaning: proves the exact same set of equations). That's only ~500k I think of them. But that still is quite a lot of text to be storing in the repo.</p>",
        "id": 474868536,
        "sender_full_name": "Nicholas Carlini",
        "timestamp": 1728061866
    },
    {
        "content": "<p><a href=\"/user_uploads/3121/WqrYE_qOpXbk7JA8XDe9ae98/outcomes5.png\">outcomes5.png</a><br>\nthings are looking very filled in now that <a href=\"https://github.com/teorth/equational_theories/pull/281\">equational#281</a> has landed</p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/WqrYE_qOpXbk7JA8XDe9ae98/outcomes5.png\" title=\"outcomes5.png\"><img data-original-dimensions=\"4697x4697\" src=\"/user_uploads/thumbnail/3121/WqrYE_qOpXbk7JA8XDe9ae98/outcomes5.png/840x560.webp\"></a></div>",
        "id": 474936092,
        "sender_full_name": "David Renshaw",
        "timestamp": 1728095864
    },
    {
        "content": "<p>Nice!  You might consider uploading a gallery of some images (marked with dates) to the repo for visitors to browse through.</p>",
        "id": 474937677,
        "sender_full_name": "Terence Tao",
        "timestamp": 1728097559
    },
    {
        "content": "<p>Do I have it right that this has brought down the number of unknown equations to ~30k?</p>",
        "id": 474937868,
        "sender_full_name": "Nicholas Carlini",
        "timestamp": 1728097670
    },
    {
        "content": "<p>Here's (currently) the longest chain of implications where A=&gt;B=&gt;C=&gt;D where at no point does B=&gt;A, or C=&gt;B etc</p>\n<p>Equation 2: x = y<br>\nEquation 4: x = x ∘ y<br>\nEquation 1037: x = x ∘ ((y ∘ (x ∘ x)) ∘ z)<br>\nEquation 1237: x = x ∘ (((x ∘ y) ∘ z) ∘ w)<br>\nEquation 103: x = x ∘ ((x ∘ y) ∘ z)<br>\nEquation 824: x = x ∘ ((x ∘ y) ∘ (x ∘ z))<br>\nEquation 9: x = x ∘ (x ∘ y)<br>\nEquation 418: x = x ∘ (x ∘ (y ∘ (x ∘ z)))<br>\nEquation 48: x = x ∘ (x ∘ (x ∘ y))<br>\nEquation 412: x = x ∘ (x ∘ (x ∘ (x ∘ y)))<br>\nEquation 3: x = x ∘ x<br>\nEquation 3715: x ∘ y = (x ∘ x) ∘ (y ∘ y)<br>\nEquation 375: x ∘ y = (x ∘ x) ∘ y<br>\nEquation 4118: x ∘ y = ((x ∘ x) ∘ x) ∘ y<br>\nEquation 4065: x ∘ x = ((x ∘ x) ∘ x) ∘ x<br>\nEquation 1: x = x</p>\n<p>Note that this chain could either get longer (if a new intermediate equation is found) or shorter (if we discover one of these equations implies one of the earlier ones).</p>",
        "id": 474942074,
        "sender_full_name": "Nicholas Carlini",
        "timestamp": 1728100454
    },
    {
        "content": "<p>What's the latest equation each equation in this chain is known to not imply?</p>",
        "id": 474942286,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1728100656
    },
    {
        "content": "<p>Oh I didn't even check</p>",
        "id": 474942392,
        "sender_full_name": "Nicholas Carlini",
        "timestamp": 1728100764
    },
    {
        "content": "<p>The only possible backwards edges are 418 =?&gt; 9 and 412=?&gt;48</p>",
        "id": 474942557,
        "sender_full_name": "Nicholas Carlini",
        "timestamp": 1728100882
    },
    {
        "content": "<p>The rest are all filled in (proven | conjectured)</p>",
        "id": 474942581,
        "sender_full_name": "Nicholas Carlini",
        "timestamp": 1728100901
    },
    {
        "content": "<p>412 can't imply 48, by a similar string-concat-with-a-twist example as I gave in another thread (sorry, on mobile)</p>",
        "id": 474944798,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1728103179
    },
    {
        "content": "<p>418 can't imply 9, by the following 5x5 counterexample:  [[0,2,3,0,0],[4,1,4,4,1],[2,2,2,2,2],[3,3,3,3,3],[4,4,4,4,4]].  (In case this notation isn't clear, the underlying set of the magma is {0,1,2,3,4}, and the product 0*1=2 shows up in the first line of the array.)  Equation 9 doesn't hold taking x=0 and y=1.</p>",
        "id": 474947932,
        "sender_full_name": "Pace Nielsen",
        "timestamp": 1728106366
    },
    {
        "content": "<p>If we only take implications which are proven to be strict, this is a maximally long chain:<br>\n2 =&gt; 5 =&gt; 2499 =&gt; 2415 =&gt; 238 =&gt; 2716 =&gt; 28 =&gt; 2973 =&gt; 270 =&gt; 3 =&gt; 3715 =&gt; 375 =&gt; 359 =&gt; 4065 =&gt; 1<br>\n(one item shorter than the one above)</p>",
        "id": 474960051,
        "sender_full_name": "Amir Livne Bar-on",
        "timestamp": 1728116827
    },
    {
        "content": "<p>I looked into the composition of the 29651 unknown implications.<br>\nThese statistics include the order-5 and order-6 laws, which we have almost no data about. Without them there are 9520 unknowns, or 4819 up to equivalence.</p>",
        "id": 474960562,
        "sender_full_name": "Amir Livne Bar-on",
        "timestamp": 1728117327
    },
    {
        "content": "<p>I've thought a bit about that, because they only hold nontrivially in infinite models, one direction of the implication should be fairly simple to resolve, by just adding them to some <code>Fact</code> statements. The other direction seems more complex</p>",
        "id": 474960680,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1728117437
    },
    {
        "content": "<p>The sequence 4, 9, 48, 412 continues to an infinite sequence of longer equations which all imply the next one but all are distinct. Probably Johan's example works for this. I did it with n-bit strings where x ∘ y is obtained by taking bits from x until after the first bit that differs in x and y and then taking bits from y. I wonder if there is any equation that is between every member of that sequence and 3, my guess is not.</p>",
        "id": 474973350,
        "sender_full_name": "Will Sawin",
        "timestamp": 1728127909
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"230900\">@Will Sawin</span> Would you mind explaining your example in a bit more detail?</p>",
        "id": 474974226,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1728128462
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"230900\">Will Sawin</span> <a href=\"#narrow/stream/458659-Equational/topic/visualization.20of.20graph.20closure/near/474973350\">said</a>:</p>\n<blockquote>\n<p>The sequence 4, 9, 48, 412 continues to an infinite sequence of longer equations which all imply the next one but all are distinct. Probably Johan's example works for this. I did it with n-bit strings where x ∘ y is obtained by taking bits from x until after the first bit that differs in x and y and then taking bits from y. I wonder if there is any equation that is between every member of that sequence and 3, my guess is not.</p>\n</blockquote>\n<p>Here is another way to construct an example.  Define a magma with underlying set {0,1,2,...,n}, with the binary operation given by the rule that when a\\neq 0 we simply take a<em>b=a , but when a=0 we take a</em>b=b+1 for 0&lt;b&lt;n, and finally we take 0<em>0=0</em>n=0.  (So, essentially, only the top row is nontrivial, and that row would be a simple +1 shifting except that 0*0 is not 1.)</p>\n<p>(Another similar example that also works is to set a<em>b=b+1 (mod n) when a\\neq b, and to set a</em>a=a.)</p>",
        "id": 474992216,
        "sender_full_name": "Pace Nielsen",
        "timestamp": 1728143382
    },
    {
        "content": "<p>Is there a fixed n for which this example already rules out implications?  We could add it to the list of finite magmas.</p>",
        "id": 474993441,
        "sender_full_name": "Terence Tao",
        "timestamp": 1728144344
    },
    {
        "content": "<p>Pace's examples are probably simpler, but the basic idea is for x circ y to have every bit agree with y except one, which is shifted to the corresponding bit of x. Specifically, we take the first bit where x and y differ and flip that bit in y. Iterating this process enough n times, with n the total number of bits, you get x, but iterating it n-1 times doesn't always work if x and y differ by n bits.</p>",
        "id": 475002889,
        "sender_full_name": "Will Sawin",
        "timestamp": 1728151525
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"657719\">Terence Tao</span> <a href=\"#narrow/stream/458659-Equational/topic/visualization.20of.20graph.20closure/near/474993441\">said</a>:</p>\n<blockquote>\n<p>Is there a fixed n for which this example already rules out implications?  We could add it to the list of finite magmas.</p>\n</blockquote>\n<p>Either of Pace's examples on n+1 elements takes n operations of x to converge. So the n=1 example with 2 elements shows Equation 4 does not imply Equation 2 , the n=2 example with 3 elements shows Equation 9 does not imply Equation 4, the n=3 example with 4 elements shows Equation 48 does not imply Equation 9, and the n=4 example with 5 elements shows equation 412 does not imply equation 48.  The next example has five multiplications so isn't part of the project, but the magmas with 2 through 5 elements could be added to the list of finite examples if they aren't already.</p>",
        "id": 475003566,
        "sender_full_name": "Will Sawin",
        "timestamp": 1728151860
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"762865\">Pace Nielsen</span> <a href=\"#narrow/stream/458659-Equational/topic/visualization.20of.20graph.20closure/near/474947932\">said</a>:</p>\n<blockquote>\n<p>418 can't imply 9, by the following 5x5 counterexample:  [[0,2,3,0,0],[4,1,4,4,1],[2,2,2,2,2],[3,3,3,3,3],[4,4,4,4,4]].</p>\n</blockquote>\n<p>Verified:</p>\n<p><code>% scripts/explore_magma.py '[[0,2,3,0,0],[4,1,4,4,1],[2,2,2,2,2],[3,3,3,3,3],[4,4,4,4,4]]' --ids 9,418 --verbose</code></p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th><strong>0</strong></th>\n<th><strong>1</strong></th>\n<th><strong>2</strong></th>\n<th><strong>3</strong></th>\n<th><strong>4</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>0</strong></td>\n<td>0</td>\n<td>2</td>\n<td>3</td>\n<td>0</td>\n<td>0</td>\n</tr>\n<tr>\n<td><strong>1</strong></td>\n<td>4</td>\n<td>1</td>\n<td>4</td>\n<td>4</td>\n<td>1</td>\n</tr>\n<tr>\n<td><strong>2</strong></td>\n<td>2</td>\n<td>2</td>\n<td>2</td>\n<td>2</td>\n<td>2</td>\n</tr>\n<tr>\n<td><strong>3</strong></td>\n<td>3</td>\n<td>3</td>\n<td>3</td>\n<td>3</td>\n<td>3</td>\n</tr>\n<tr>\n<td><strong>4</strong></td>\n<td>4</td>\n<td>4</td>\n<td>4</td>\n<td>4</td>\n<td>4</td>\n</tr>\n</tbody>\n</table>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"w\">    </span><span class=\"mf\">9.</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">◇</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">◇</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">❌</span>\n<span class=\"w\">       </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">◇</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">◇</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"w\"> </span><span class=\"n\">counterexample</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"bp\">=</span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"bp\">=</span><span class=\"mi\">1</span>\n<span class=\"w\">       </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">◇</span><span class=\"w\"> </span><span class=\"mi\">2</span>\n<span class=\"w\">       </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"mi\">3</span>\n\n<span class=\"w\">  </span><span class=\"mf\">418.</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">◇</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">◇</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">◇</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">◇</span><span class=\"w\"> </span><span class=\"n\">z</span><span class=\"o\">)))</span><span class=\"w\"> </span><span class=\"bp\">✅</span>\n<span class=\"w\">       </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">◇</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">◇</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">◇</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">◇</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)))</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"w\"> </span><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"bp\">=</span><span class=\"mi\">3</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"bp\">=</span><span class=\"mi\">2</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">z</span><span class=\"bp\">=</span><span class=\"mi\">0</span>\n<span class=\"w\">       </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">◇</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">◇</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">◇</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">))</span>\n<span class=\"w\">       </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">◇</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">◇</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">)</span>\n<span class=\"w\">       </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">◇</span><span class=\"w\"> </span><span class=\"mi\">3</span>\n<span class=\"w\">       </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">3</span>\n</code></pre></div>",
        "id": 475118850,
        "sender_full_name": "Isak Colboubrani",
        "timestamp": 1728235877
    }
]