[
    {
        "content": "<p>How about turning our prover running experience into one command-line prover that could be used in our ml or algorithm development efforts?</p>\n<p>One could then add their own tools to that list (let's say someone has a network analysis idea, or wants to aggressively test certain patterns assuming certain conditions, or maybe generate data and train a model).</p>\n<p>Below is just a (rough) sketch, and I'd first make it work with Vampire (cross-platform), assuming that I can reliably run Vampire in the command line setting. The real tool would use the script we already have to turn Vampire output into Lean.</p>\n<p>I'd need to understand what the main formats are (is TPTP recommended? can anything be turned into that format?). I guess the output would be Lean.</p>\n<p>So, command line: TPTP file (?) -&gt; Prover (picks a prover, picks a line, picks a strategy, picks a custom tool, runs in defined order, perhaps all that defined in a yaml file) -&gt; Lean (?)</p>\n<div class=\"codehilite\" data-code-language=\"Python\"><pre><span></span><code><span class=\"kn\">import</span> <span class=\"nn\">argparse</span>\n<span class=\"kn\">import</span> <span class=\"nn\">subprocess</span>\n<span class=\"kn\">import</span> <span class=\"nn\">time</span>\n<span class=\"kn\">import</span> <span class=\"nn\">sys</span>\n<span class=\"kn\">import</span> <span class=\"nn\">os</span>\n\n<span class=\"k\">def</span> <span class=\"nf\">translate_implication</span><span class=\"p\">(</span><span class=\"n\">implication</span><span class=\"p\">,</span> <span class=\"n\">tool</span><span class=\"p\">):</span>\n    <span class=\"k\">if</span> <span class=\"n\">tool</span> <span class=\"ow\">in</span> <span class=\"p\">[</span><span class=\"s1\">'prover9'</span><span class=\"p\">,</span> <span class=\"s1\">'mace'</span><span class=\"p\">]:</span>\n        <span class=\"c1\"># No translation needed</span>\n        <span class=\"k\">return</span> <span class=\"n\">implication</span>\n    <span class=\"k\">elif</span> <span class=\"n\">tool</span> <span class=\"o\">==</span> <span class=\"s1\">'vampire'</span><span class=\"p\">:</span>\n        <span class=\"c1\"># Translate to TPTP syntax</span>\n        <span class=\"n\">translation_table</span> <span class=\"o\">=</span> <span class=\"p\">{</span>\n            <span class=\"s1\">'-&gt;'</span><span class=\"p\">:</span> <span class=\"s1\">'=&gt;'</span><span class=\"p\">,</span>\n            <span class=\"s1\">'&lt;-&gt;'</span><span class=\"p\">:</span> <span class=\"s1\">'&lt;=&gt;'</span><span class=\"p\">,</span>\n            <span class=\"s1\">'-'</span><span class=\"p\">:</span> <span class=\"s1\">'~'</span><span class=\"p\">,</span>\n            <span class=\"s1\">'&amp;'</span><span class=\"p\">:</span> <span class=\"s1\">'&amp;'</span><span class=\"p\">,</span>\n            <span class=\"s1\">'|'</span><span class=\"p\">:</span> <span class=\"s1\">'|'</span>\n        <span class=\"p\">}</span>\n        <span class=\"k\">for</span> <span class=\"n\">k</span><span class=\"p\">,</span> <span class=\"n\">v</span> <span class=\"ow\">in</span> <span class=\"n\">translation_table</span><span class=\"o\">.</span><span class=\"n\">items</span><span class=\"p\">():</span>\n            <span class=\"n\">implication</span> <span class=\"o\">=</span> <span class=\"n\">implication</span><span class=\"o\">.</span><span class=\"n\">replace</span><span class=\"p\">(</span><span class=\"n\">k</span><span class=\"p\">,</span> <span class=\"n\">v</span><span class=\"p\">)</span>\n        <span class=\"k\">return</span> <span class=\"n\">implication</span>\n    <span class=\"k\">else</span><span class=\"p\">:</span>\n        <span class=\"k\">return</span> <span class=\"n\">implication</span>\n\n<span class=\"k\">def</span> <span class=\"nf\">create_prover9_input</span><span class=\"p\">(</span><span class=\"n\">implication1</span><span class=\"p\">,</span> <span class=\"n\">implication2</span><span class=\"p\">,</span> <span class=\"n\">goal</span><span class=\"p\">):</span>\n    <span class=\"n\">implication1</span> <span class=\"o\">=</span> <span class=\"n\">translate_implication</span><span class=\"p\">(</span><span class=\"n\">implication1</span><span class=\"p\">,</span> <span class=\"s1\">'prover9'</span><span class=\"p\">)</span>\n    <span class=\"n\">implication2</span> <span class=\"o\">=</span> <span class=\"n\">translate_implication</span><span class=\"p\">(</span><span class=\"n\">implication2</span><span class=\"p\">,</span> <span class=\"s1\">'prover9'</span><span class=\"p\">)</span>\n    <span class=\"n\">goal</span> <span class=\"o\">=</span> <span class=\"n\">translate_implication</span><span class=\"p\">(</span><span class=\"n\">goal</span><span class=\"p\">,</span> <span class=\"s1\">'prover9'</span><span class=\"p\">)</span>\n    <span class=\"n\">input_content</span> <span class=\"o\">=</span> <span class=\"s1\">'formulas(assumptions).</span><span class=\"se\">\\n</span><span class=\"s1\">'</span>\n    <span class=\"n\">input_content</span> <span class=\"o\">+=</span> <span class=\"sa\">f</span><span class=\"s1\">'  </span><span class=\"si\">{</span><span class=\"n\">implication1</span><span class=\"si\">}</span><span class=\"s1\">.</span><span class=\"se\">\\n</span><span class=\"s1\">'</span>\n    <span class=\"n\">input_content</span> <span class=\"o\">+=</span> <span class=\"sa\">f</span><span class=\"s1\">'  </span><span class=\"si\">{</span><span class=\"n\">implication2</span><span class=\"si\">}</span><span class=\"s1\">.</span><span class=\"se\">\\n</span><span class=\"s1\">'</span>\n    <span class=\"n\">input_content</span> <span class=\"o\">+=</span> <span class=\"s1\">'end_of_list.</span><span class=\"se\">\\n\\n</span><span class=\"s1\">'</span>\n    <span class=\"n\">input_content</span> <span class=\"o\">+=</span> <span class=\"s1\">'formulas(goals).</span><span class=\"se\">\\n</span><span class=\"s1\">'</span>\n    <span class=\"n\">input_content</span> <span class=\"o\">+=</span> <span class=\"sa\">f</span><span class=\"s1\">'  </span><span class=\"si\">{</span><span class=\"n\">goal</span><span class=\"si\">}</span><span class=\"s1\">.</span><span class=\"se\">\\n</span><span class=\"s1\">'</span>\n    <span class=\"n\">input_content</span> <span class=\"o\">+=</span> <span class=\"s1\">'end_of_list.</span><span class=\"se\">\\n</span><span class=\"s1\">'</span>\n    <span class=\"k\">return</span> <span class=\"n\">input_content</span>\n\n<span class=\"k\">def</span> <span class=\"nf\">create_mace_input</span><span class=\"p\">(</span><span class=\"n\">implication1</span><span class=\"p\">,</span> <span class=\"n\">implication2</span><span class=\"p\">,</span> <span class=\"n\">goal</span><span class=\"p\">):</span>\n    <span class=\"n\">implication1</span> <span class=\"o\">=</span> <span class=\"n\">translate_implication</span><span class=\"p\">(</span><span class=\"n\">implication1</span><span class=\"p\">,</span> <span class=\"s1\">'mace'</span><span class=\"p\">)</span>\n    <span class=\"n\">implication2</span> <span class=\"o\">=</span> <span class=\"n\">translate_implication</span><span class=\"p\">(</span><span class=\"n\">implication2</span><span class=\"p\">,</span> <span class=\"s1\">'mace'</span><span class=\"p\">)</span>\n    <span class=\"n\">goal</span> <span class=\"o\">=</span> <span class=\"n\">translate_implication</span><span class=\"p\">(</span><span class=\"n\">goal</span><span class=\"p\">,</span> <span class=\"s1\">'mace'</span><span class=\"p\">)</span>\n    <span class=\"n\">input_content</span> <span class=\"o\">=</span> <span class=\"s1\">'formulas(assumptions).</span><span class=\"se\">\\n</span><span class=\"s1\">'</span>\n    <span class=\"n\">input_content</span> <span class=\"o\">+=</span> <span class=\"sa\">f</span><span class=\"s1\">'  </span><span class=\"si\">{</span><span class=\"n\">implication1</span><span class=\"si\">}</span><span class=\"s1\">.</span><span class=\"se\">\\n</span><span class=\"s1\">'</span>\n    <span class=\"n\">input_content</span> <span class=\"o\">+=</span> <span class=\"sa\">f</span><span class=\"s1\">'  </span><span class=\"si\">{</span><span class=\"n\">implication2</span><span class=\"si\">}</span><span class=\"s1\">.</span><span class=\"se\">\\n</span><span class=\"s1\">'</span>\n    <span class=\"n\">input_content</span> <span class=\"o\">+=</span> <span class=\"sa\">f</span><span class=\"s1\">'  -(</span><span class=\"si\">{</span><span class=\"n\">goal</span><span class=\"si\">}</span><span class=\"s1\">).</span><span class=\"se\">\\n</span><span class=\"s1\">'</span>  <span class=\"c1\"># Negate the goal</span>\n    <span class=\"n\">input_content</span> <span class=\"o\">+=</span> <span class=\"s1\">'end_of_list.</span><span class=\"se\">\\n</span><span class=\"s1\">'</span>\n    <span class=\"k\">return</span> <span class=\"n\">input_content</span>\n\n<span class=\"k\">def</span> <span class=\"nf\">create_vampire_input</span><span class=\"p\">(</span><span class=\"n\">implication1</span><span class=\"p\">,</span> <span class=\"n\">implication2</span><span class=\"p\">,</span> <span class=\"n\">goal</span><span class=\"p\">):</span>\n    <span class=\"n\">implication1</span> <span class=\"o\">=</span> <span class=\"n\">translate_implication</span><span class=\"p\">(</span><span class=\"n\">implication1</span><span class=\"p\">,</span> <span class=\"s1\">'vampire'</span><span class=\"p\">)</span>\n    <span class=\"n\">implication2</span> <span class=\"o\">=</span> <span class=\"n\">translate_implication</span><span class=\"p\">(</span><span class=\"n\">implication2</span><span class=\"p\">,</span> <span class=\"s1\">'vampire'</span><span class=\"p\">)</span>\n    <span class=\"n\">goal</span> <span class=\"o\">=</span> <span class=\"n\">translate_implication</span><span class=\"p\">(</span><span class=\"n\">goal</span><span class=\"p\">,</span> <span class=\"s1\">'vampire'</span><span class=\"p\">)</span>\n    <span class=\"n\">input_content</span> <span class=\"o\">=</span> <span class=\"s1\">''</span>\n    <span class=\"n\">input_content</span> <span class=\"o\">+=</span> <span class=\"sa\">f</span><span class=\"s1\">'fof(assumption1, axiom, </span><span class=\"si\">{</span><span class=\"n\">implication1</span><span class=\"si\">}</span><span class=\"s1\">).</span><span class=\"se\">\\n</span><span class=\"s1\">'</span>\n    <span class=\"n\">input_content</span> <span class=\"o\">+=</span> <span class=\"sa\">f</span><span class=\"s1\">'fof(assumption2, axiom, </span><span class=\"si\">{</span><span class=\"n\">implication2</span><span class=\"si\">}</span><span class=\"s1\">).</span><span class=\"se\">\\n</span><span class=\"s1\">'</span>\n    <span class=\"n\">input_content</span> <span class=\"o\">+=</span> <span class=\"sa\">f</span><span class=\"s1\">'fof(goal, conjecture, </span><span class=\"si\">{</span><span class=\"n\">goal</span><span class=\"si\">}</span><span class=\"s1\">).</span><span class=\"se\">\\n</span><span class=\"s1\">'</span>\n    <span class=\"k\">return</span> <span class=\"n\">input_content</span>\n\n<span class=\"k\">def</span> <span class=\"nf\">main</span><span class=\"p\">():</span>\n    <span class=\"n\">parser</span> <span class=\"o\">=</span> <span class=\"n\">argparse</span><span class=\"o\">.</span><span class=\"n\">ArgumentParser</span><span class=\"p\">(</span><span class=\"n\">description</span><span class=\"o\">=</span><span class=\"s1\">'Run a theorem prover with two implications.'</span><span class=\"p\">)</span>\n    <span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">add_argument</span><span class=\"p\">(</span><span class=\"s1\">'implication1'</span><span class=\"p\">,</span> <span class=\"nb\">type</span><span class=\"o\">=</span><span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">help</span><span class=\"o\">=</span><span class=\"s1\">'First implication (premise)'</span><span class=\"p\">)</span>\n    <span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">add_argument</span><span class=\"p\">(</span><span class=\"s1\">'implication2'</span><span class=\"p\">,</span> <span class=\"nb\">type</span><span class=\"o\">=</span><span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">help</span><span class=\"o\">=</span><span class=\"s1\">'Second implication (premise)'</span><span class=\"p\">)</span>\n    <span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">add_argument</span><span class=\"p\">(</span><span class=\"s1\">'goal'</span><span class=\"p\">,</span> <span class=\"nb\">type</span><span class=\"o\">=</span><span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">help</span><span class=\"o\">=</span><span class=\"s1\">'Goal to prove (conclusion)'</span><span class=\"p\">)</span>\n    <span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">add_argument</span><span class=\"p\">(</span><span class=\"s1\">'--tool'</span><span class=\"p\">,</span> <span class=\"nb\">type</span><span class=\"o\">=</span><span class=\"nb\">str</span><span class=\"p\">,</span> <span class=\"n\">choices</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"s1\">'mace'</span><span class=\"p\">,</span> <span class=\"s1\">'prover9'</span><span class=\"p\">,</span> <span class=\"s1\">'vampire'</span><span class=\"p\">],</span> <span class=\"n\">required</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">,</span> <span class=\"n\">help</span><span class=\"o\">=</span><span class=\"s1\">'Tool to use'</span><span class=\"p\">)</span>\n    <span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">add_argument</span><span class=\"p\">(</span><span class=\"s1\">'--timeout'</span><span class=\"p\">,</span> <span class=\"nb\">type</span><span class=\"o\">=</span><span class=\"nb\">int</span><span class=\"p\">,</span> <span class=\"n\">default</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">help</span><span class=\"o\">=</span><span class=\"s1\">'Timeout in seconds'</span><span class=\"p\">)</span>\n\n    <span class=\"n\">args</span> <span class=\"o\">=</span> <span class=\"n\">parser</span><span class=\"o\">.</span><span class=\"n\">parse_args</span><span class=\"p\">()</span>\n\n    <span class=\"n\">implication1</span> <span class=\"o\">=</span> <span class=\"n\">args</span><span class=\"o\">.</span><span class=\"n\">implication1</span>\n    <span class=\"n\">implication2</span> <span class=\"o\">=</span> <span class=\"n\">args</span><span class=\"o\">.</span><span class=\"n\">implication2</span>\n    <span class=\"n\">goal</span> <span class=\"o\">=</span> <span class=\"n\">args</span><span class=\"o\">.</span><span class=\"n\">goal</span>\n    <span class=\"n\">tool</span> <span class=\"o\">=</span> <span class=\"n\">args</span><span class=\"o\">.</span><span class=\"n\">tool</span>\n    <span class=\"n\">timeout</span> <span class=\"o\">=</span> <span class=\"n\">args</span><span class=\"o\">.</span><span class=\"n\">timeout</span>\n\n    <span class=\"c1\"># Create input file for the tool</span>\n    <span class=\"k\">if</span> <span class=\"n\">tool</span> <span class=\"o\">==</span> <span class=\"s1\">'mace'</span><span class=\"p\">:</span>\n        <span class=\"n\">input_file_content</span> <span class=\"o\">=</span> <span class=\"n\">create_mace_input</span><span class=\"p\">(</span><span class=\"n\">implication1</span><span class=\"p\">,</span> <span class=\"n\">implication2</span><span class=\"p\">,</span> <span class=\"n\">goal</span><span class=\"p\">)</span>\n        <span class=\"n\">tool_executable</span> <span class=\"o\">=</span> <span class=\"s1\">'mace4'</span>\n        <span class=\"n\">input_filename</span> <span class=\"o\">=</span> <span class=\"s1\">'mace_input.in'</span>\n    <span class=\"k\">elif</span> <span class=\"n\">tool</span> <span class=\"o\">==</span> <span class=\"s1\">'prover9'</span><span class=\"p\">:</span>\n        <span class=\"n\">input_file_content</span> <span class=\"o\">=</span> <span class=\"n\">create_prover9_input</span><span class=\"p\">(</span><span class=\"n\">implication1</span><span class=\"p\">,</span> <span class=\"n\">implication2</span><span class=\"p\">,</span> <span class=\"n\">goal</span><span class=\"p\">)</span>\n        <span class=\"n\">tool_executable</span> <span class=\"o\">=</span> <span class=\"s1\">'prover9'</span>\n        <span class=\"n\">input_filename</span> <span class=\"o\">=</span> <span class=\"s1\">'prover9_input.in'</span>\n    <span class=\"k\">elif</span> <span class=\"n\">tool</span> <span class=\"o\">==</span> <span class=\"s1\">'vampire'</span><span class=\"p\">:</span>\n        <span class=\"n\">input_file_content</span> <span class=\"o\">=</span> <span class=\"n\">create_vampire_input</span><span class=\"p\">(</span><span class=\"n\">implication1</span><span class=\"p\">,</span> <span class=\"n\">implication2</span><span class=\"p\">,</span> <span class=\"n\">goal</span><span class=\"p\">)</span>\n        <span class=\"n\">tool_executable</span> <span class=\"o\">=</span> <span class=\"s1\">'vampire'</span>\n        <span class=\"n\">input_filename</span> <span class=\"o\">=</span> <span class=\"s1\">'vampire_input.p'</span>\n    <span class=\"k\">else</span><span class=\"p\">:</span>\n        <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s1\">'Unknown tool.'</span><span class=\"p\">)</span>\n        <span class=\"n\">sys</span><span class=\"o\">.</span><span class=\"n\">exit</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">)</span>\n\n    <span class=\"c1\"># Write input file</span>\n    <span class=\"k\">with</span> <span class=\"nb\">open</span><span class=\"p\">(</span><span class=\"n\">input_filename</span><span class=\"p\">,</span> <span class=\"s1\">'w'</span><span class=\"p\">)</span> <span class=\"k\">as</span> <span class=\"n\">f</span><span class=\"p\">:</span>\n        <span class=\"n\">f</span><span class=\"o\">.</span><span class=\"n\">write</span><span class=\"p\">(</span><span class=\"n\">input_file_content</span><span class=\"p\">)</span>\n\n    <span class=\"c1\"># Run the tool</span>\n    <span class=\"k\">try</span><span class=\"p\">:</span>\n        <span class=\"n\">start_time</span> <span class=\"o\">=</span> <span class=\"n\">time</span><span class=\"o\">.</span><span class=\"n\">time</span><span class=\"p\">()</span>\n        <span class=\"k\">if</span> <span class=\"n\">tool</span> <span class=\"o\">==</span> <span class=\"s1\">'vampire'</span><span class=\"p\">:</span>\n            <span class=\"n\">cmd</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"n\">tool_executable</span><span class=\"p\">,</span> <span class=\"n\">input_filename</span><span class=\"p\">]</span>\n        <span class=\"k\">else</span><span class=\"p\">:</span>\n            <span class=\"n\">cmd</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"n\">tool_executable</span><span class=\"p\">,</span> <span class=\"n\">input_filename</span><span class=\"p\">]</span>\n        <span class=\"n\">process</span> <span class=\"o\">=</span> <span class=\"n\">subprocess</span><span class=\"o\">.</span><span class=\"n\">Popen</span><span class=\"p\">(</span><span class=\"n\">cmd</span><span class=\"p\">,</span> <span class=\"n\">stdout</span><span class=\"o\">=</span><span class=\"n\">subprocess</span><span class=\"o\">.</span><span class=\"n\">PIPE</span><span class=\"p\">,</span> <span class=\"n\">stderr</span><span class=\"o\">=</span><span class=\"n\">subprocess</span><span class=\"o\">.</span><span class=\"n\">PIPE</span><span class=\"p\">)</span>\n        <span class=\"k\">if</span> <span class=\"n\">timeout</span> <span class=\"ow\">is</span> <span class=\"ow\">not</span> <span class=\"kc\">None</span><span class=\"p\">:</span>\n            <span class=\"n\">stdout</span><span class=\"p\">,</span> <span class=\"n\">stderr</span> <span class=\"o\">=</span> <span class=\"n\">process</span><span class=\"o\">.</span><span class=\"n\">communicate</span><span class=\"p\">(</span><span class=\"n\">timeout</span><span class=\"o\">=</span><span class=\"n\">timeout</span><span class=\"p\">)</span>\n        <span class=\"k\">else</span><span class=\"p\">:</span>\n            <span class=\"n\">stdout</span><span class=\"p\">,</span> <span class=\"n\">stderr</span> <span class=\"o\">=</span> <span class=\"n\">process</span><span class=\"o\">.</span><span class=\"n\">communicate</span><span class=\"p\">()</span>\n        <span class=\"n\">end_time</span> <span class=\"o\">=</span> <span class=\"n\">time</span><span class=\"o\">.</span><span class=\"n\">time</span><span class=\"p\">()</span>\n\n        <span class=\"c1\"># Process output</span>\n        <span class=\"n\">output</span> <span class=\"o\">=</span> <span class=\"n\">stdout</span><span class=\"o\">.</span><span class=\"n\">decode</span><span class=\"p\">()</span>\n        <span class=\"k\">if</span> <span class=\"n\">tool</span> <span class=\"o\">==</span> <span class=\"s1\">'prover9'</span><span class=\"p\">:</span>\n            <span class=\"k\">if</span> <span class=\"s1\">'THEOREM PROVED'</span> <span class=\"ow\">in</span> <span class=\"n\">output</span><span class=\"p\">:</span>\n                <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s1\">'Theorem was proved.'</span><span class=\"p\">)</span>\n            <span class=\"k\">elif</span> <span class=\"s1\">'SEARCH FAILED'</span> <span class=\"ow\">in</span> <span class=\"n\">output</span><span class=\"p\">:</span>\n                <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s1\">'Theorem was not proved.'</span><span class=\"p\">)</span>\n            <span class=\"k\">else</span><span class=\"p\">:</span>\n                <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s1\">'Unknown result.'</span><span class=\"p\">)</span>\n        <span class=\"k\">elif</span> <span class=\"n\">tool</span> <span class=\"o\">==</span> <span class=\"s1\">'mace'</span><span class=\"p\">:</span>\n            <span class=\"k\">if</span> <span class=\"s1\">'Exiting with 1 model(s) found'</span> <span class=\"ow\">in</span> <span class=\"n\">output</span><span class=\"p\">:</span>\n                <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s1\">'Model found. The assumptions are consistent, and the goal is not a logical consequence.'</span><span class=\"p\">)</span>\n            <span class=\"k\">elif</span> <span class=\"s1\">'NO MODELS'</span> <span class=\"ow\">in</span> <span class=\"n\">output</span><span class=\"p\">:</span>\n                <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s1\">'No model found. The goal is a logical consequence of the assumptions.'</span><span class=\"p\">)</span>\n            <span class=\"k\">else</span><span class=\"p\">:</span>\n                <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s1\">'Unknown result.'</span><span class=\"p\">)</span>\n        <span class=\"k\">elif</span> <span class=\"n\">tool</span> <span class=\"o\">==</span> <span class=\"s1\">'vampire'</span><span class=\"p\">:</span>\n            <span class=\"k\">if</span> <span class=\"s1\">'Refutation found. Thanks to Tanya!'</span> <span class=\"ow\">in</span> <span class=\"n\">output</span><span class=\"p\">:</span>\n                <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s1\">'Theorem was proved.'</span><span class=\"p\">)</span>\n            <span class=\"k\">elif</span> <span class=\"s1\">'Satisfiable'</span> <span class=\"ow\">in</span> <span class=\"n\">output</span><span class=\"p\">:</span>\n                <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s1\">'Theorem was not proved.'</span><span class=\"p\">)</span>\n            <span class=\"k\">else</span><span class=\"p\">:</span>\n                <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s1\">'Unknown result.'</span><span class=\"p\">)</span>\n        <span class=\"k\">else</span><span class=\"p\">:</span>\n            <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s1\">'Unknown tool output.'</span><span class=\"p\">)</span>\n        <span class=\"c1\"># Optionally, print the full output</span>\n        <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s1\">'Output:'</span><span class=\"p\">)</span>\n        <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">output</span><span class=\"p\">)</span>\n\n    <span class=\"k\">except</span> <span class=\"n\">subprocess</span><span class=\"o\">.</span><span class=\"n\">TimeoutExpired</span><span class=\"p\">:</span>\n        <span class=\"n\">process</span><span class=\"o\">.</span><span class=\"n\">kill</span><span class=\"p\">()</span>\n        <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"sa\">f</span><span class=\"s1\">'Tool timed out after </span><span class=\"si\">{</span><span class=\"n\">timeout</span><span class=\"si\">}</span><span class=\"s1\"> seconds.'</span><span class=\"p\">)</span>\n\n    <span class=\"k\">finally</span><span class=\"p\">:</span>\n        <span class=\"c1\"># Remove the input file</span>\n        <span class=\"k\">if</span> <span class=\"n\">os</span><span class=\"o\">.</span><span class=\"n\">path</span><span class=\"o\">.</span><span class=\"n\">exists</span><span class=\"p\">(</span><span class=\"n\">input_filename</span><span class=\"p\">):</span>\n            <span class=\"n\">os</span><span class=\"o\">.</span><span class=\"n\">remove</span><span class=\"p\">(</span><span class=\"n\">input_filename</span><span class=\"p\">)</span>\n\n<span class=\"k\">if</span> <span class=\"vm\">__name__</span> <span class=\"o\">==</span> <span class=\"s1\">'__main__'</span><span class=\"p\">:</span>\n    <span class=\"n\">main</span><span class=\"p\">()</span>\n</code></pre></div>",
        "id": 478463601,
        "sender_full_name": "Michael Bucko",
        "timestamp": 1729679746
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"672170\">Michael Bucko</span> <a href=\"#narrow/channel/458659-Equational/topic/Command-line.20Prover/near/478463601\">ha dicho</a>:</p>\n<blockquote>\n<p>How about turning our prover running experience into one command-line prover that could be used in our ml or algorithm development efforts?</p>\n</blockquote>\n<p>I cannot answer your question about formats, but having this tool would be amazing!</p>",
        "id": 478483727,
        "sender_full_name": "Jose Brox",
        "timestamp": 1729686548
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"761825\">Jose Brox</span> <a href=\"#narrow/channel/458659-Equational/topic/Command-line.20Prover/near/478483727\">schrieb</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"672170\">Michael Bucko</span> <a href=\"#narrow/channel/458659-Equational/topic/Command-line.20Prover/near/478463601\">ha dicho</a>:</p>\n<blockquote>\n<p>How about turning our prover running experience into one command-line prover that could be used in our ml or algorithm development efforts?</p>\n</blockquote>\n<p>I cannot answer your question about formats, but having this tool would be amazing!</p>\n</blockquote>\n<p>Thank you for this feedback. <br>\nIt's also relatively \"easy\" to do once we :</p>\n<ul>\n<li>dockerize the ATP experiences (or start from a platform), </li>\n<li>run them in the command line, </li>\n<li>have some tests in place (we need to see how each of these tools is used), </li>\n<li>design a yaml that could describe our strategy behind the proof (there is a big question here: what's the role of AI in refining the strategy; my take on this is: eventually that of a sparing partner (but depends on the person and their level of expertise (and energy)), which means Cursor for Math, or stronger plugins are needed)</li>\n</ul>\n<p>The good news is: the first version that supports tests, Vampire, strategies could be done quite fast. One dependency for me personally is that I'd love to make Vampire work for me on a macbook pro).</p>",
        "id": 478485180,
        "sender_full_name": "Michael Bucko",
        "timestamp": 1729686965
    },
    {
        "content": "<p>I have a toy version of a multitool ATP in my project, really only meant for my debugging purposes <a href=\"https://github.com/philzook58/knuckledragger/blob/main/kdrag/solvers/__main__.py\">https://github.com/philzook58/knuckledragger/blob/main/kdrag/solvers/__main__.py</a>  It's not dockerized, probably linux only. I only know it installs on collab, my computer, and github CI. If there were nice builds of these tools, I'd happily consume them. The common interface is writing z3 python expressions and using one of these <code>Solver</code> classes <a href=\"https://github.com/philzook58/knuckledragger/blob/main/kdrag/solvers/__init__.py\">https://github.com/philzook58/knuckledragger/blob/main/kdrag/solvers/__init__.py</a> instead of z3py's . Is there some other common input or output that would be more useful?</p>",
        "id": 478930483,
        "sender_full_name": "Philip Zucker",
        "timestamp": 1729866510
    },
    {
        "content": "<p>That's pretty cool! <br>\nDo you think all of these provers are necessary, or perhaps some are more important than others? <br>\nI was thinking of going \"vertical\", i.e. doubling down on transformers + vampire + z3 (for instance, Vampire alone has issues on a macbook)</p>",
        "id": 478931372,
        "sender_full_name": "Michael Bucko",
        "timestamp": 1729866821
    },
    {
        "content": "<p>vampire + z3 seems pretty dominant.</p>",
        "id": 478931481,
        "sender_full_name": "Philip Zucker",
        "timestamp": 1729866844
    },
    {
        "content": "<p>I guess this kind of installer could be nice as a VSCode (or Cursor) plugin?</p>",
        "id": 478931587,
        "sender_full_name": "Michael Bucko",
        "timestamp": 1729866879
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"255566\">Philip Zucker</span> <a href=\"#narrow/channel/458659-Equational/topic/Command-line.20Prover/near/478931481\">schrieb</a>:</p>\n<blockquote>\n<p>vampire + z3 seems pretty dominant.</p>\n</blockquote>\n<p>Yes, that was my thinking. If that's the case, then I'd probably go vertical.</p>",
        "id": 478931652,
        "sender_full_name": "Michael Bucko",
        "timestamp": 1729866904
    },
    {
        "content": "<p>I said that without thinking a little. For higher order theorems, eprover and zipperposition can work well. Twee has the best human readable proof output and can output completed equational rewrite systems. nanocopi is the only intuitionistic logic prover in my list. kissat is probably good for very  combinatorial stuff. But for typical purposes vampire + z3 is dominant.</p>",
        "id": 478932032,
        "sender_full_name": "Philip Zucker",
        "timestamp": 1729867034
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"255566\">Philip Zucker</span> <a href=\"#narrow/channel/458659-Equational/topic/Command-line.20Prover/near/478932032\">schrieb</a>:</p>\n<blockquote>\n<p>I said that without thinking a little. For higher order theorems, eprover and zipperposition can work well. Twee has the best human readable proof output. nanocopi is the only intuitionistic logic prover. kissat is probably good for very  combinatorial stuff. But for typical purposes vampire + z3 is dominant.</p>\n</blockquote>\n<p>Then I'd go vertical + agentic. See:</p>\n<p><a href=\"https://buildermath.substack.com/p/on-math-platform\">https://buildermath.substack.com/p/on-math-platform</a></p>\n<p>I was thinking of having equivalence graphs as storage, lineage, and formalized knowledge base (with layers of embeddings ofc):</p>\n<p><a href=\"https://buildermath.substack.com/p/on-implication-flow\">https://buildermath.substack.com/p/on-implication-flow</a></p>\n<p>But I am still learning what the perfect experiment would be. I am also taking the vertical approach to experiments -- I am trying to learn very deep insights first.</p>",
        "id": 478932466,
        "sender_full_name": "Michael Bucko",
        "timestamp": 1729867181
    },
    {
        "content": "<p>Just realized you made egg - love it !!!</p>",
        "id": 478940146,
        "sender_full_name": "Michael Bucko",
        "timestamp": 1729869593
    }
]