[
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"777582\">@Marco Petracci</span>, <span class=\"user-mention\" data-user-id=\"638899\">@Lorenzo Luccioli</span> and I have just started working on the task <a href=\"https://github.com/teorth/equational_theories/pull/820\">equational#820</a> and we are trying to understand as much as possible about the informal proof in the blueprint. </p>\n<p>We have a few questions: </p>\n<ol>\n<li>In the blueprint (see <a href=\"https://teorth.github.io/equational_theories/blueprint/1516-chapter.html\">here</a>) the initial construction for the base magma is done over the carrier <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">Z</mi></mrow><annotation encoding=\"application/x-tex\">\\mathbb{Z}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6889em;\"></span><span class=\"mord mathbb\">Z</span></span></span></span>. This construction has already been formalised (see the exact lines <a href=\"https://github.com/teorth/equational_theories/blob/2bce50417b21b2574c55a35e3e820b373d399edc/equational_theories/ManuallyProved/Equation1516.lean#L1241-L1291\">here</a>) with the only difference that the carrier in this case is the free group over <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">N</mi></mrow><annotation encoding=\"application/x-tex\">\\mathbb{N}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6889em;\"></span><span class=\"mord mathbb\">N</span></span></span></span> (<code>A := FreeGroup Nat</code>). Could we just proceed with the blueprint proof substituting <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">Z</mi></mrow><annotation encoding=\"application/x-tex\">\\mathbb{Z}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6889em;\"></span><span class=\"mord mathbb\">Z</span></span></span></span> with <code>A</code>?</li>\n<li>The elements of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>G</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">‚Ä≤</mo></msup></mrow><annotation encoding=\"application/x-tex\">G&#x27;</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7519em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">G</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7519em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">‚Ä≤</span></span></span></span></span></span></span></span></span></span></span></span> in the blueprint seem to be treated sometimes as triples and sometimes as quadruples. Which one   is correct? It seems to us that treating them as triples (i.e. ignoring the fourth component when present) suffices, but we are not 100% sure. </li>\n<li>In the last part of the proof of <strong>Proposition 17.5</strong> (see <a href=\"https://teorth.github.io/equational_theories/blueprint/1516-chapter.html#a0000000483\">here</a>) we find the sentence \"Iterating these procedures over a well-ordering of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>G</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">‚Ä≤</mo></msup><mo>√ó</mo><mi mathvariant=\"double-struck\">Z</mi><mo>√ó</mo><mi mathvariant=\"double-struck\">N</mi></mrow><annotation encoding=\"application/x-tex\">G&#x27; \\times \\mathbb{Z} \\times \\mathbb{N}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8352em;vertical-align:-0.0833em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">G</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7519em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">‚Ä≤</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">√ó</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7722em;vertical-align:-0.0833em;\"></span><span class=\"mord mathbb\">Z</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">√ó</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6889em;\"></span><span class=\"mord mathbb\">N</span></span></span></span> [...]\". Is this a typo? Shouldn't it be <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>G</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">‚Ä≤</mo></msup></mrow><annotation encoding=\"application/x-tex\">G&#x27;</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7519em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">G</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7519em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">‚Ä≤</span></span></span></span></span></span></span></span></span></span></span></span> or <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">Z</mi><mo>√ó</mo><mi mathvariant=\"double-struck\">Z</mi><mo>√ó</mo><mi mathvariant=\"double-struck\">N</mi></mrow><annotation encoding=\"application/x-tex\">\\mathbb{Z} \\times \\mathbb{Z} \\times \\mathbb{N}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7722em;vertical-align:-0.0833em;\"></span><span class=\"mord mathbb\">Z</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">√ó</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7722em;vertical-align:-0.0833em;\"></span><span class=\"mord mathbb\">Z</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">√ó</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6889em;\"></span><span class=\"mord mathbb\">N</span></span></span></span> instead?</li>\n</ol>",
        "id": 489541749,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1734458023
    },
    {
        "content": "<ol>\n<li>It should be fine to use <code>FreeGroup Nat</code> (with relevant changes in notation), I don't think the abelian nature of the model was particularly important for the rest of the construction.</li>\n<li>Sorry, that was a remnant of an older, more complicated construction.  You can ignore the fourth component whenever it appears.</li>\n<li>Yeah, it should just be <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>G</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">‚Ä≤</mo></msup></mrow><annotation encoding=\"application/x-tex\">G&#x27;</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7519em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">G</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7519em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">‚Ä≤</span></span></span></span></span></span></span></span></span></span></span></span> here (this is again a remnant of a previous construction.  Presumably one should use <a href=\"https://teorth.github.io/equational_theories/docs/equational_theories/Mathlib/Order/Greedy.html#exists_greedy_chain\">https://teorth.github.io/equational_theories/docs/equational_theories/Mathlib/Order/Greedy.html#exists_greedy_chain</a> to do this part of the construction (so an explicit well-ordering is not needed.)</li>\n</ol>\n<p>Feel free to update the blueprint to match the formalization as needed.</p>",
        "id": 489549699,
        "sender_full_name": "Terence Tao",
        "timestamp": 1734460786
    },
    {
        "content": "<p><strong>UPDATE:</strong> Opened <a href=\"https://github.com/teorth/equational_theories/pull/1054\">draft PR</a>. We have 3 sub-tasks left.</p>",
        "id": 494885303,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1737395963
    },
    {
        "content": "<p>Great news!  Aside from the issues raised earlier, were there any mathematical issues you encountered?  Or ways in which the blueprint proof could have been made easier to formalize?</p>",
        "id": 494917787,
        "sender_full_name": "Terence Tao",
        "timestamp": 1737409139
    },
    {
        "content": "<p>Regarding the blueprint proof of Corollary 17.7, we noticed that it requires refining the construction from Proposition 17.6. However, we realized that the construction in Proposition 17.5 already suffices to refute 255, without any explicit modifications. Specifically, we can use¬† <code>x‚ÇÄ := (*, 0, 0) ‚àà G' ‚äÜ A √ó A √ó ‚Ñï</code>, where <code>* ‚àà FreeGroup ‚Ñï = A</code> is the empty word, the first <code>0</code> is the image of <code>0</code> through the injection <code>‚Ñï ‚Üí A</code> and the second <code>0</code> is just the natural number.<br>\nBy plugging <code>x‚ÇÄ</code> into 255, we obtain the following sequence of equalities:</p>\n<p><code>((x‚ÇÄ ‚óá x‚ÇÄ) ‚óá x‚ÇÄ) ‚óá x‚ÇÄ = ((S x‚ÇÄ) ‚óá x‚ÇÄ) ‚óá x‚ÇÄ = (* ‚óá x‚ÇÄ) ‚óá x‚ÇÄ = * ‚óá x‚ÇÄ = *</code>,</p>\n<p>where¬† <code>* ‚â† x‚ÇÄ</code> . Thus, 255 is refuted without requiring further refinement. This approach seemed more straightforward to formalize.</p>\n<p>As far as Proposition 17.5 is concerned, we initially faced some challenges in mapping the informal proof to the formal structure of the greedy extension. In particular, the informal proof suggests adding infinitely many elements to the partial solution even at intermediate steps to achieve infinite surjectivity ( <code>‚àÄ b : ‚Ñ§, x : G', {y : G' | L b y = x}.Infinite</code>). However, maintaining the finiteness of the partial domain seems  crucial.</p>\n<p>To address this, here is the workaround we adopted:</p>\n<p>‚Ä¢ Define a quantity based on the current partial solution, specifically the cardinality of the set of¬† <code>a ‚àà A</code>¬† for which¬† <code>L a y</code>¬† is already defined for some¬† <code>y</code> .</p>\n<p>‚Ä¢ This quantity serves two purposes: it limits the number of elements added at each step (ensuring finiteness) and ensures that the sets¬† <code>{y : G' | L b y = x}</code> are sufficiently large. This ultimately allows us to prove their infiniteness in the limit.</p>\n<p>We incorporated this condition into the structure <code>PartialSolution</code> and used it to complete most of the proof. The main task remaining is constructing <code>Next</code>, which extends a <code>PartialSolution</code> to include a new pair¬†<code>(d, g) ‚àà A √ó G'</code>¬† where the function is not yet defined. I am actively working on this and hope to finalize it in a few days.</p>\n<p>Further details and comments about this workaround are included in a <a href=\"https://github.com/pitmonticone/EquationalTheories/blob/4d9bd955e80098e8bae232f8e1d2eaab0132c007/equational_theories/ManuallyProved/Equation1516.lean#L1416C1-L1431C3\">comment</a> in the draft PR.</p>",
        "id": 495060589,
        "sender_full_name": "Lorenzo Luccioli",
        "timestamp": 1737468924
    },
    {
        "content": "<p>Nice shortcut at the end of the argument.  Yes, you are right, the addition of infinitely many elements at each stage of the greedy algorithm is technically incompatible with our usual greedy algorithm formalism, but the workaround you found looks good to me.</p>",
        "id": 495111573,
        "sender_full_name": "Terence Tao",
        "timestamp": 1737481265
    },
    {
        "content": "<p>Quick report about the state of this task.</p>\n<p>We have good news and bad news.</p>\n<p>Good news first: the skeleton of the implementation is complete, there are a few sorries left (which are very unlikely to be problematic), and we plan to complete them in the next few days.</p>\n<p>Now for the bad news. Formalizing the proof of <a href=\"https://teorth.github.io/equational_theories/blueprint/1516-chapter.html#axiom-b\">Proposition 17.5</a> made some inconsistencies with the informal proof come to light. In particular we found 3 of them, from less to more serious:</p>\n<ol>\n<li>Around <a href=\"https://github.com/pitmonticone/EquationalTheories/blob/e8bd41697714bf07b02c3bf1e8cd749c5cc6c2bf/blueprint/src/chapter/1516.tex#L88-L89\">the middle of the proof</a> we define the image of two elements <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>c</mi><mtext>‚Äô</mtext></mrow><annotation encoding=\"application/x-tex\">c‚Äô</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\">c</span><span class=\"mord\">‚Äô</span></span></span></span> and <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>y</mi></mrow><annotation encoding=\"application/x-tex\">y</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span></span></span></span> relying on the surjectivity of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>L</mi><mi>a</mi></msub></mrow><annotation encoding=\"application/x-tex\">L_a</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">L</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">a</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>, I think there is a missing step here where we should use the surjectivity a second time. More details are in <a href=\"https://github.com/pitmonticone/EquationalTheories/blob/58cf15f56b563d9ee2493957db2e9eafc97cf0de/equational_theories/ManuallyProved/Equation1516.lean#L1513\">a small comment</a> in the code, however this is already fixed in the formalization and in the blueprint.</li>\n<li>When we add the image of a new pair to the greedy construction we need to prove that the equation 1516 (<code>L_{S y} L‚ÇìL‚Çìy = x</code>) continues to be satisfied, given that all the operations are well defined. If the pair that we are adding anew is <code>(x, y)</code> then the proof goes as intended, however if the new pair is one of <code>(x, L‚Çìy)</code> and <code>(S y, L‚ÇìL‚Çìy)</code> then I‚Äôm not sure how to proceed. More details <a href=\"https://github.com/pitmonticone/EquationalTheories/blob/58cf15f56b563d9ee2493957db2e9eafc97cf0de/equational_theories/ManuallyProved/Equation1516.lean#L1699-L1704\">here</a>.</li>\n<li>After adding the extra elements that we use for the infinite surjectivity, we need to prove again that 1516 is satisfied. In this case we already circumvented the issue found in 2., the problem is in the actual proof. In fact, in the proof it is stated that for elements of the form <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>c</mi><mrow><mi>w</mi><mo separator=\"true\">,</mo><msup><mi>c</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">‚Ä≤</mo></msup></mrow></msub></mrow><annotation encoding=\"application/x-tex\">c_{w,c&#x27;}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7167em;vertical-align:-0.2861em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">c</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.328em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02691em;\">w</span><span class=\"mpunct mtight\">,</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">c</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6828em;\"><span style=\"top:-2.786em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">‚Ä≤</span></span></span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span></span></span></span> we already have that <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>L</mi><msub><mi>c</mi><mrow><mi>w</mi><mo separator=\"true\">,</mo><msup><mi>c</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">‚Ä≤</mo></msup></mrow></msub></msub><mi>w</mi><mo>=</mo><msup><mi>c</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">‚Ä≤</mo></msup></mrow><annotation encoding=\"application/x-tex\">L_{c_{w,c&#x27;}} w = c&#x27;</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.114em;vertical-align:-0.4306em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">L</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">c</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3448em;\"><span style=\"top:-2.3448em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.6068em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02691em;\">w</span><span class=\"mpunct mtight\">,</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">c</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8496em;\"><span style=\"top:-2.8496em;margin-right:0.1em;\"><span class=\"pstrut\" style=\"height:2.5556em;\"></span><span class=\"mord mtight\"><span class=\"mord mtight\">‚Ä≤</span></span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4009em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4306em;\"><span></span></span></span></span></span></span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7519em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">c</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7519em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">‚Ä≤</span></span></span></span></span></span></span></span></span></span></span></span>. This is true if the image of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>c</mi><mrow><mi>w</mi><mo separator=\"true\">,</mo><mi>c</mi><mtext>‚Äô</mtext></mrow></msub></mrow><annotation encoding=\"application/x-tex\">c_{w,c‚Äô}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7167em;vertical-align:-0.2861em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">c</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02691em;\">w</span><span class=\"mpunct mtight\">,</span><span class=\"mord mathnormal mtight\">c</span><span class=\"mord mtight\">‚Äô</span></span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span></span></span></span> and <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>w</mi></mrow><annotation encoding=\"application/x-tex\">w</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02691em;\">w</span></span></span></span> has been added in the first part of the proof; however, it is not necessarily true if it has been added in the second part (where we add the extra elements for the infinite surjectivity). Moreover, I think that it is not even possible to enforce it during the construction, so I fear that it is not only an issue of the implementation, but the proof actually needs to be adapted somehow. More details <a href=\"https://github.com/pitmonticone/EquationalTheories/blob/58cf15f56b563d9ee2493957db2e9eafc97cf0de/equational_theories/ManuallyProved/Equation1516.lean#L2493-L2518\">here</a>.</li>\n</ol>\n<p>From tomorrow and for the rest of the week I will be unable to work on the project, and I‚Äôm not sure how much time I will be able to spend on it in the following weeks. It would be great if somebody could tackle the subtasks mentioned above.¬†</p>\n<p>PS. I added the label <code>üõë Problem üõë</code> in the code to identify where these main problems are.</p>",
        "id": 495917152,
        "sender_full_name": "Lorenzo Luccioli",
        "timestamp": 1737850906
    },
    {
        "content": "<p>Sorry about all the issues with the blueprint, I am working now on a better version, fixing a number of confusing typos and also making some tweaks to the construction.  Will keep you updated.</p>",
        "id": 495995118,
        "sender_full_name": "Terence Tao",
        "timestamp": 1737920273
    },
    {
        "content": "<p>Thanks a lot!</p>",
        "id": 495995192,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1737920301
    },
    {
        "content": "<p>OK, I have updated the blueprint to provide a clearer explanation of the greedy construction, in particular splitting the proof of what was previously Proposition 17.5 into several smaller pieces, and describing in more detail what a partial stage of the iteration looks like, and also correcting some typos.  In particular, the inductive hypothesis is set up so that one only ever needs to test the <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mi>x</mi><mo separator=\"true\">,</mo><mi>y</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(x,y)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mclose\">)</span></span></span></span> pair when verifiying <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>L</mi><mrow><mi>S</mi><mi>y</mi></mrow></msub><msub><mi>L</mi><mi>x</mi></msub><msub><mi>L</mi><mi>x</mi></msub><mi>y</mi><mo>=</mo><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">L_{Sy} L_x L_x y = x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9694em;vertical-align:-0.2861em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">L</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">y</span></span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathnormal\">L</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">x</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathnormal\">L</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">x</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">x</span></span></span></span>, because we will show that whenever <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>L</mi><mi>x</mi></msub><mi>y</mi></mrow><annotation encoding=\"application/x-tex\">L_x y</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8778em;vertical-align:-0.1944em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">L</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">x</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span></span></span></span> is well-defined, then the entirety of  <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>L</mi><mrow><mi>S</mi><mi>y</mi></mrow></msub><msub><mi>L</mi><mi>x</mi></msub><msub><mi>L</mi><mi>x</mi></msub><mi>y</mi></mrow><annotation encoding=\"application/x-tex\">L_{Sy} L_x L_x y</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9694em;vertical-align:-0.2861em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">L</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">y</span></span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathnormal\">L</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">x</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathnormal\">L</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">x</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span></span></span></span> is well-defined.</p>\n<p>I realized though that one key property of the construction, namely that <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>c</mi><mrow><mi>y</mi><mo separator=\"true\">,</mo><mi>b</mi></mrow></msub><mo mathvariant=\"normal\">‚â†</mo><mi>c</mi></mrow><annotation encoding=\"application/x-tex\">c_{y,b} \\neq c</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9805em;vertical-align:-0.2861em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">c</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">y</span><span class=\"mpunct mtight\">,</span><span class=\"mord mathnormal mtight\">b</span></span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\"><span class=\"mrel\"><span class=\"mord vbox\"><span class=\"thinbox\"><span class=\"rlap\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"inner\"><span class=\"mord\"><span class=\"mrel\">ÓÄ†</span></span></span><span class=\"fix\"></span></span></span></span></span><span class=\"mrel\">=</span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">c</span></span></span></span> for all <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\">b</span></span></span></span> and <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>y</mi><mo>=</mo><mo stretchy=\"false\">(</mo><mi>a</mi><mo separator=\"true\">,</mo><mi>c</mi><mo separator=\"true\">,</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">y=(a,c,n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">a</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">c</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">n</span><span class=\"mclose\">)</span></span></span></span>, was somehow omitted from the construction (though it was still used in a key step), which was the reason why we had the second component <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>c</mi></mrow><annotation encoding=\"application/x-tex\">c</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">c</span></span></span></span> of the triple <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mi>a</mi><mo separator=\"true\">,</mo><mi>c</mi><mo separator=\"true\">,</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(a,c,n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">a</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">c</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">n</span><span class=\"mclose\">)</span></span></span></span> in the first place (the point being that <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>L</mi><mi>c</mi></msub><mo stretchy=\"false\">(</mo><mi>a</mi><mo separator=\"true\">,</mo><mi>c</mi><mo separator=\"true\">,</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">L_c (a,c,n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">L</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">c</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">a</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">c</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">n</span><span class=\"mclose\">)</span></span></span></span> is not initially frozen by the construction, and is at one's disposal to set later in order to get the infinite surjectivity property).  In putting that in I realized that one has to strengthen the base magma axioms very slightly (so that a certain equation not only has one solution, but at least two), but as detailed in the new blueprint, it should just be a matter of enlarging the seed a little bit.</p>",
        "id": 496008649,
        "sender_full_name": "Terence Tao",
        "timestamp": 1737931211
    },
    {
        "content": "<p>The implementation of the new proof is now almost complete! <br>\nThis time, things went much more smoothly‚Äîpartly because the new proof is more detailed and formalization-friendly, and partly because I‚Äôm now more familiar with the required structures and was able to reuse parts of the old code.</p>\n<p>I found just a small thing to adjust in the proof of <a href=\"https://teorth.github.io/equational_theories/blueprint/1516-chapter.html#aux\">Lemma 17.5</a>. When constructing the useful element¬† <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>c</mi><mrow><mi>y</mi><mo separator=\"true\">,</mo><mi>b</mi></mrow></msub></mrow><annotation encoding=\"application/x-tex\">c_{y, b}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7167em;vertical-align:-0.2861em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">c</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">y</span><span class=\"mpunct mtight\">,</span><span class=\"mord mathnormal mtight\">b</span></span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span></span></span></span>, we currently require that <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>c</mi><mrow><mi>y</mi><mo separator=\"true\">,</mo><mi>b</mi></mrow></msub><mo mathvariant=\"normal\">‚â†</mo><mi>a</mi><mo separator=\"true\">,</mo><mi>b</mi><mo separator=\"true\">,</mo><mi>c</mi></mrow><annotation encoding=\"application/x-tex\">c_{y, b} \\neq a, b, c</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9805em;vertical-align:-0.2861em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">c</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">y</span><span class=\"mpunct mtight\">,</span><span class=\"mord mathnormal mtight\">b</span></span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\"><span class=\"mrel\"><span class=\"mord vbox\"><span class=\"thinbox\"><span class=\"rlap\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"inner\"><span class=\"mord\"><span class=\"mrel\">ÓÄ†</span></span></span><span class=\"fix\"></span></span></span></span></span><span class=\"mrel\">=</span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\">a</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">c</span></span></span></span>. However, to ensure we can exclude <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>c</mi></mrow><annotation encoding=\"application/x-tex\">c</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">c</span></span></span></span> as well, I think we need a stronger version of Corollary 17.4, stating that the equation <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>R</mi><mi>a</mi></msub><mi>c</mi><mo>=</mo><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">R_a c = b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0077em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">a</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord mathnormal\">c</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\">b</span></span></span></span> has at least 4 solutions (instead of just 3, as before). Fortunately, the existing implementation was easy to adapt‚Äîthis just required changing a constant.</p>\n<p>The only remaining task is updating the lemma <code>base2</code>. This is about the base magma: the previous implementation required just one solution for <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>L</mi><mi>a</mi></msub><msub><mi>R</mi><mi>a</mi></msub><mi>b</mi><mo>=</mo><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">L_a R_a b = b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">L</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">a</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0077em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">a</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord mathnormal\">b</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\">b</span></span></span></span>, but now we need two. I haven‚Äôt really looked into this yet, since I‚Äôm not too familiar with the base magma implementation, so it might be faster for someone who has already worked on it to handle this part.</p>",
        "id": 497774549,
        "sender_full_name": "Lorenzo Luccioli",
        "timestamp": 1738710766
    },
    {
        "content": "<p>That's great progress!</p>\n<p>Looking at the Lean proof of <code>base2</code> (which I think was largely done by <span class=\"user-mention\" data-user-id=\"562819\">@Bernhard Reinke</span> ), I see the setup is different from in the blueprint, in that the carrier was taken to be <code>FreeGroup Nat</code> rather than <code>‚Ñ§</code>.  But I think one just needs to add a new variable <code>x‚Çá := x 7</code>,  add <code> (x‚Çá‚Åª¬π, x‚Çá^2), (x‚Çá^3, x‚Çá)</code> to <code>E0</code>, and <code>use</code> both <code>x‚ÇÜ * a</code> and <code>x‚Çá * a</code> to get the two solutions (one has to show that <code>x‚ÇÜ * a</code> and <code>x‚Çá * a</code> are distinct, but this should be easy).</p>",
        "id": 497796720,
        "sender_full_name": "Terence Tao",
        "timestamp": 1738722915
    },
    {
        "content": "<p>Yes, I think this is the way to proceed. I could implement it if you want (but I guess I would need write access for <code>b-reinke</code> for the PR fork) but feel free to give it a shot yourself!</p>",
        "id": 497832968,
        "sender_full_name": "Bernhard Reinke",
        "timestamp": 1738743658
    },
    {
        "content": "<p>Thank you very much! With those tips, I managed to make the change myself in a matter of minutes. Now the proof is completely sorry-free!</p>",
        "id": 497843555,
        "sender_full_name": "Lorenzo Luccioli",
        "timestamp": 1738746837
    },
    {
        "content": "<p>I‚Äôll clean up the PR a bit before merging‚Äîsome golfing, merging master, and a few small tweaks to the blueprint.</p>",
        "id": 497843622,
        "sender_full_name": "Lorenzo Luccioli",
        "timestamp": 1738746847
    },
    {
        "content": "<p>I‚Äôll review the latest changes and set the PR ready to merge later today</p>",
        "id": 497896816,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1738763250
    },
    {
        "content": "<p>Done <a href=\"https://github.com/teorth/equational_theories/pull/1054\">equational#1054</a></p>",
        "id": 497988068,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1738791661
    },
    {
        "content": "<p>In hindsight this validates <span class=\"user-mention\" data-user-id=\"562819\">@Bernhard Reinke</span> 's call to work in <code>FreeGroup Nat</code> rather than ‚Ñ§; ‚Ñ§ is a conceptually simpler object for human mathematicians to understand, but from Lean's point of view, <code>FreeGroup Nat</code>is the simpler structure to work in (in particular, I see that proving <code>x‚ÇÜ * a ‚â† x‚Çá * a</code> was almost just a single <code>simp</code> call in <code>FreeGroup Nat</code>).  (The construction in the blueprint involved choosing two somewhat arbitrary integers to be the analogue of <code>x‚ÇÜ</code> and <code>x‚Çá</code>, but actually verifying all the required properties would be some tedious <code>norm_num</code> type calculation.  Still not super difficult, but it seems the <code>FreeGroup Nat</code> framework made this sort of tweaking of proof near-painless).</p>",
        "id": 497994750,
        "sender_full_name": "Terence Tao",
        "timestamp": 1738794603
    },
    {
        "content": "<p>A small observation: here it was possible for one contributor to look at a proof written by another contributor, and suggest the necessary changes to a third contributor, who could then implement them easily.  This is an ability which is quite possible for formally verified proofs, but significantly more challenging for an informal proof, because there are many more opportunities for misunderstandings, typos, or other problems to be created in this chain of communication.  So this is one aspect of the proof writing process where the formalized approach is already superior to the informal one.</p>",
        "id": 498161190,
        "sender_full_name": "Terence Tao",
        "timestamp": 1738859044
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"657719\">Terence Tao</span> <a href=\"#narrow/channel/458659-Equational/topic/GREEDY-GREEDY.20HYBRID.3A.20Refute.201516-.3E255/near/498161190\">said</a>:</p>\n<blockquote>\n<p>A small observation: here it was possible for one contributor to look at the proof written by another contributor, and suggest the necessary changes to a third contributor, who could then implement them easily.  This is an ability which is quite possible for formally verified proofs, but significantly more challenging for an informal proof, because there are many more opportunities for misunderstandings, typos, or other problems to be created in this chain of communication.  So this is one aspect of the proof writing process where the formalized approach is already superior to the informal one.</p>\n</blockquote>\n<p>I'm currently writing a section on the scale issues of formal projects. I will note this message down for this section. But I might have some questions about how the sequence of events unfolded.</p>",
        "id": 498162914,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1738859525
    },
    {
        "content": "<p>The Feb 4 comments in this thread tell most of the story, but I will try here to reconstruct the backstory, that I pieced together from the Zulip history (but perhaps <span class=\"user-mention\" data-user-id=\"562819\">@Bernhard Reinke</span> can correct any details).<br>\n)<br>\nI think <span class=\"user-mention\" data-user-id=\"562819\">@Bernhard Reinke</span> <a href=\"#narrow/channel/458659-Equational/topic/1518/near/481463545\">initially formalized</a> a refutation of 1516-&gt;1489 using a noncommutative greedy construction (originally <a href=\"user_uploads/3121/LQPPPgR1j4T1JPGAtKtDWh-g/1516NotImplies1489.pdf\">due to</a> <span class=\"user-mention\" data-user-id=\"762865\">@Pace Nielsen</span>).  At some point <a href=\"#narrow/channel/458659-Equational/topic/1516.20-.3E.20255/near/481532116\">I used this construction</a> to build a \"base model\" for a refutation of 1516-&gt;255 (which would contain Bernhard's magma as a submagma); but I decided to switch from a noncommutative construction to a commutative one for \"simplicity\" when writing the blueprint, and also I needed an additional axiom that a certain equation always had at least one solution.  But it was possible to adapt the greedy argument to do this by making the seed slightly larger, and <a href=\"#narrow/channel/458659-Equational/topic/1516.20-.3E.20255/near/482611201\">Bernhard kindly formalized all of this</a>, though keeping with the noncommutative construction rather than following the blueprint closely.</p>\n<p>Later, <span class=\"user-mention\" data-user-id=\"556875\">@Pietro Monticone</span> and <span class=\"user-mention\" data-user-id=\"638899\">@Lorenzo Luccioli</span> formalized the rest of the argument in the blueprint, where they located some moderately serious issues with the blueprint proof that, among other things, required a strengthening of the additional base model axiom so that the equation in question now had at least two solutions rather than at least one.  In principle, this was just a matter of enlarging the seed yet again, but because the formalization was not tracking the blueprint perfectly, this wasn't obvious initially.  But I was familiar with how the commutative construction related to the noncommutative one, and I could read the relevant lines of Bernhard's proof without needing to inspect the hundreds of other lines, so I could fairly quickly point out the necessary changes, even without direct access to the PR to implement them.</p>",
        "id": 498165632,
        "sender_full_name": "Terence Tao",
        "timestamp": 1738860280
    },
    {
        "content": "<p>I think overall this is a good summary. One technical detail: the two extra properties of <a href=\"https://teorth.github.io/equational_theories/blueprint/1516-chapter.html#1516-base\">Corollary 17.4</a> were dealt with in two slightly different ways:</p>\n<p>Property (ii) needed an additional extension step (basically the noncommutative version of <a href=\"https://teorth.github.io/equational_theories/blueprint/1516-chapter.html#1516-ext-var\">Lemma 17.3</a>). The generality of <a href=\"https://teorth.github.io/equational_theories/docs/equational_theories/Mathlib/Order/Greedy.html#exists_greedy_chain\"><code>exists_greedy_chain</code></a> was very convenient for this change. The new version of property (ii) requires four instead of three solutions, this was easily adjustable by changing some constants.</p>\n<p>Property (iii) could be enforced by a larger seed. For the new version, one could simply take an even larger seed as <span class=\"user-mention\" data-user-id=\"657719\">@Terence Tao</span> pointed out.</p>",
        "id": 498293760,
        "sender_full_name": "Bernhard Reinke",
        "timestamp": 1738920049
    }
]