[
    {
        "content": "<p>This is a continuation of my post here <a class=\"message-link\" href=\"/#narrow/channel/458659-Equational/topic/The.20.27extra.27.20equations/near/524693922\">#Equational &gt; The 'extra' equations @ ðŸ’¬</a> .</p>\n<p>I found 2 other ruby files where <code>find_equation_id.rb</code> could be applied instead of parsing lean files directly.</p>\n<ul>\n<li><code>equational_theories/Generated/EquationSearch/src/search.rb</code> to generate a bijective map from equation to id and back.</li>\n<li><code>scripts/generate_graphviz_graph.rb</code> to generate equation list.</li>\n</ul>\n<p>The PR <a href=\"https://github.com/teorth/equational_theories/pull/1258\">refactor: Apply find_equation_id.rb (ported from find_equation_id.py) to related files</a> addresses this.</p>\n<p><span class=\"user-mention\" data-user-id=\"773643\">@Bruno Le Floch</span> <span class=\"user-mention\" data-user-id=\"761203\">@Vlad Tsyrklevich</span></p>",
        "id": 525624156,
        "sender_full_name": "Emmanuel Osalotioman Osazuwa",
        "timestamp": 1750817645
    },
    {
        "content": "<p>For the python code which parse the lean equations files directly  I found:</p>\n<ul>\n<li><code>explore_magma.py</code></li>\n<li><code>find_dual.py</code></li>\n<li><code>generate_equation_implication_js.py</code></li>\n<li><code>generate_cadical.py</code></li>\n</ul>\n<p>They could be addressed with a separate PR to refactor.</p>",
        "id": 525624745,
        "sender_full_name": "Emmanuel Osalotioman Osazuwa",
        "timestamp": 1750818100
    },
    {
        "content": "<p>There may be some interfaces missing in <code>find_equation_id.py</code>, for instance in applications (to the full spectrum problem, and others) I often needed to get the shape+rhyme of each side separately and found myself writing <code>lhs_rhyme = eq.rhyme[:lhs_order + 1]</code> and <code>rhs_rhyme = eq.rhyme[lhs_order + 1:]</code>.  Feel free to modify <code>find_equation_id.py</code> if you find such needs, I have no upcoming changes planned.</p>",
        "id": 525645247,
        "sender_full_name": "Bruno Le Floch",
        "timestamp": 1750834241
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"903782\">Osalotioman</span> <a href=\"#narrow/channel/458659-Equational/topic/Update.20scripts.20to.20use.20Bruno's.20equation.20numbering.20code.2E/near/525624156\">said</a>:</p>\n<blockquote>\n<p>This is a continuation of my post here <a class=\"message-link\" href=\"/#narrow/channel/458659-Equational/topic/The.20.27extra.27.20equations/near/524693922\">#Equational &gt; The 'extra' equations @ ðŸ’¬</a> .</p>\n<p>I found 2 other ruby files where <code>find_equation_id.rb</code> could be applied instead of parsing lean files directly.</p>\n<ul>\n<li><code>equational_theories/Generated/EquationSearch/src/search.rb</code> to generate a bijective map from equation to id and back.</li>\n<li><code>scripts/generate_graphviz_graph.rb</code> to generate equation list.</li>\n</ul>\n<p>The PR <a href=\"https://github.com/teorth/equational_theories/pull/1258\">refactor: Apply find_equation_id.rb (ported from find_equation_id.py) to related files</a> addresses this.</p>\n</blockquote>\n<p>Neither of these scripts are used, so I'd suggest closing this instead of spending the time to check that the resulting changes work correctly</p>",
        "id": 525659599,
        "sender_full_name": "Vlad Tsyrklevich",
        "timestamp": 1750840004
    },
    {
        "content": "<p>For the python files you mentioned, I don't know about the cadical script, but the others all seem like good candidates.</p>",
        "id": 525659965,
        "sender_full_name": "Vlad Tsyrklevich",
        "timestamp": 1750840118
    },
    {
        "content": "<p>The <code>find_dual</code> file should be trivial to implement since <code>find_equation_id</code> knows how to make the dual of an equation.  The following seems equivalent (up to some parenthesizing differences):</p>\n<div class=\"codehilite\" data-code-language=\"Python\"><pre><span></span><code><span class=\"kn\">from</span><span class=\"w\"> </span><span class=\"nn\">find_equation_id</span><span class=\"w\"> </span><span class=\"kn\">import</span> <span class=\"n\">all_eqs</span>\n<span class=\"k\">for</span> <span class=\"n\">order</span> <span class=\"ow\">in</span> <span class=\"nb\">range</span><span class=\"p\">(</span><span class=\"mi\">5</span><span class=\"p\">):</span>\n    <span class=\"k\">for</span> <span class=\"n\">eq</span> <span class=\"ow\">in</span> <span class=\"n\">all_eqs</span><span class=\"p\">(</span><span class=\"n\">order</span><span class=\"p\">):</span>\n        <span class=\"n\">dual</span> <span class=\"o\">=</span> <span class=\"n\">eq</span><span class=\"o\">.</span><span class=\"n\">dual</span><span class=\"p\">()</span>\n        <span class=\"k\">if</span> <span class=\"n\">eq</span> <span class=\"o\">!=</span> <span class=\"n\">dual</span><span class=\"p\">:</span>\n            <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"sa\">f</span><span class=\"s2\">\"| Equation</span><span class=\"si\">{</span><span class=\"n\">eq</span><span class=\"o\">.</span><span class=\"n\">id</span><span class=\"si\">}</span><span class=\"s2\">[</span><span class=\"si\">{</span><span class=\"n\">eq</span><span class=\"si\">}</span><span class=\"s2\">] | Equation</span><span class=\"si\">{</span><span class=\"n\">dual</span><span class=\"o\">.</span><span class=\"n\">id</span><span class=\"si\">}</span><span class=\"s2\">[</span><span class=\"si\">{</span><span class=\"n\">dual</span><span class=\"si\">}</span><span class=\"s2\">] |\"</span><span class=\"p\">)</span>\n</code></pre></div>",
        "id": 525675562,
        "sender_full_name": "Bruno Le Floch",
        "timestamp": 1750845268
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"761203\">Vlad Tsyrklevich</span> <a href=\"#narrow/channel/458659-Equational/topic/Update.20scripts.20to.20use.20Bruno's.20equation.20numbering.20code.2E/near/525659599\">said</a>:</p>\n<blockquote>\n<p>Neither of these scripts are used, so I'd suggest closing this instead of spending the time to check that the resulting changes work correctly</p>\n</blockquote>\n<p>I have closed the pr since the scripts are no longer used. I will make sure to check where scripts are being used before making changes next time.</p>\n<p>Since the scripts are no longer being used though, could we remove them from the project?</p>\n<p>I could remove them on my next pr while working on the other scripts that need <code>find_equation_id.py</code> if needed, what do you think?</p>",
        "id": 526202277,
        "sender_full_name": "Emmanuel Osalotioman Osazuwa",
        "timestamp": 1751115249
    },
    {
        "content": "<p>Quick question: why are we porting existing and functional scripts to other languages?</p>",
        "id": 526205334,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1751118858
    },
    {
        "content": "<p>Especially at this late stage</p>",
        "id": 526205351,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1751118885
    },
    {
        "content": "<p>Also, leaving aside the question of rewriting stuff that has worked well,  porting anything from python to ruby appears to be a strict downgrade from my perspective since python is a much more widely known language</p>",
        "id": 526205399,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1751118951
    },
    {
        "content": "<p>And no we shouldnâ€™t remove scripts that are no longer used, if they were used during the project. This is not an industrial codebase. We need to keep track of what we did and how we did it. We should be able to look back and give decent answers to questions that might come up 10 years from now</p>",
        "id": 526205508,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1751119064
    },
    {
        "content": "<p>A JavaScript version of <code>find_equation_id.py</code> would be useful because it would allow the Equation Explorer (I think it's written in JavaScript?) to show higher-order equation, for which we have some commentary.  For ruby, I have no strong opinion.  No opinion either on updating old scripts.</p>",
        "id": 526226515,
        "sender_full_name": "Bruno Le Floch",
        "timestamp": 1751142126
    },
    {
        "content": "<p>Then the JavaScript version makes sense. The ruby version needs a good reason. And we do not want to delete any scripts please.</p>",
        "id": 526293317,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1751228982
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"466334\">Shreyas Srinivas</span> <a href=\"#narrow/channel/458659-Equational/topic/Update.20scripts.20to.20use.20Bruno's.20equation.20numbering.20code.2E/near/526205334\">said</a>:</p>\n<blockquote>\n<p>Quick question: why are we porting existing and functional scripts to other languages?</p>\n<p>Especially at this late stage</p>\n</blockquote>\n<p>I think this issue <a href=\"https://github.com/teorth/equational_theories/issues/1083\">Update scripts to use Bruno's equation numbering code</a> will give more insight into that.</p>",
        "id": 526352856,
        "sender_full_name": "Emmanuel Osalotioman Osazuwa",
        "timestamp": 1751274169
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"466334\">Shreyas Srinivas</span> <a href=\"#narrow/channel/458659-Equational/topic/Update.20scripts.20to.20use.20Bruno's.20equation.20numbering.20code.2E/near/526205399\">said</a>:</p>\n<blockquote>\n<p>Also, leaving aside the question of rewriting stuff that has worked well,  porting anything from python to ruby appears to be a strict downgrade from my perspective since python is a much more widely known language</p>\n</blockquote>\n<p>I won't really say its a downgrade since the ruby code does not replace something the python code was already doing.</p>",
        "id": 526352887,
        "sender_full_name": "Emmanuel Osalotioman Osazuwa",
        "timestamp": 1751274182
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"466334\">Shreyas Srinivas</span> <a href=\"#narrow/channel/458659-Equational/topic/Update.20scripts.20to.20use.20Bruno's.20equation.20numbering.20code.2E/near/526205508\">said</a>:</p>\n<blockquote>\n<p>And no we shouldnâ€™t remove scripts that are no longer used, if they were used during the project. This is not an industrial codebase. We need to keep track of what we did and how we did it. We should be able to look back and give decent answers to questions that might come up 10 years from now</p>\n</blockquote>\n<p>Removing scripts that are no longer in use now does not stop people 10 years from now from seeing those scripts as GitHub keeps a snapshot of everything on every commit. I'm not against removing/leaving them though, it was just a suggestion so our focus is only on things that are actually being used in the project.</p>",
        "id": 526352938,
        "sender_full_name": "Emmanuel Osalotioman Osazuwa",
        "timestamp": 1751274195
    },
    {
        "content": "<p>I still think we should leave the scripts we used to track progress in our project as it is.</p>",
        "id": 526420457,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1751294891
    },
    {
        "content": "<p>I can see the benefit of not parsing lean code to extract equation numbers. We can have both scripts in place. Do put a comment on top of both files explaining why there are two of them, which of them is currently being used, why the switch etc.</p>",
        "id": 526420945,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1751295028
    },
    {
        "content": "<p>It is true that github will store snapshots forever, but searching through them, even with git blame is tedious.</p>",
        "id": 526421076,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1751295066
    },
    {
        "content": "<p>Okay</p>",
        "id": 526505072,
        "sender_full_name": "Emmanuel Osalotioman Osazuwa",
        "timestamp": 1751329433
    }
]