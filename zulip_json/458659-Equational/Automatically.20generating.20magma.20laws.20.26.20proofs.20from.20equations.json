[
    {
        "content": "<p>Proving some of the non-implications using metatheorems requires operating on the <em>law</em> associated with an equation (as defined in Chapter 1 of the blueprint) and showing that a proof for the law holds for the corresponding equation.</p>\n<p>In <a href=\"https://github.com/teorth/equational_theories/pull/356\">this (in-progress) PR</a>, I've modified the <code>equation</code> command to </p>\n<ul>\n<li>automatically create a corresponding <code>MagmaLaw</code> and add it to the environment</li>\n<li>automatically generate a proof that a magma <code>G</code> satisfies the law iff the equation is true in the magma</li>\n</ul>\n<p>For example, typing in </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">equation</span><span class=\"w\"> </span><span class=\"mi\">27</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">◇</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">◇</span><span class=\"w\"> </span><span class=\"n\">z</span>\n</code></pre></div>\n<p>now automatically generates the declarations</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">#</span><span class=\"n\">print</span><span class=\"w\"> </span><span class=\"n\">Law27</span>\n<span class=\"c\">/-</span><span class=\"cm\"> @[reducible] def Law27 : Law.MagmaLaw (Fin 3) :=</span>\n<span class=\"cm\">Lf 0 ≃ Lf 0 ⋆ Lf 1 ⋆ Lf 2 -/</span>\n\n<span class=\"bp\">#</span><span class=\"n\">print</span><span class=\"w\"> </span><span class=\"n\">Law27</span><span class=\"bp\">.</span><span class=\"n\">models_iff</span>\n<span class=\"c\">/-</span><span class=\"cm\"> @[reducible] def Law27.models_iff : ∀ (G : Type) [inst : Magma G], satisfies G Law27 ↔ Equation27 G :=</span>\n<span class=\"cm\">models_iff_3 Law27 -/</span>\n</code></pre></div>\n<p><span class=\"user-mention\" data-user-id=\"435481\">@Hernan Ibarra</span>  and I plan to build on top of this framework and prove some non-implications in the graph using the invariant based metatheorems described in Chapter 8 of the blueprint.</p>\n<p>This code may be independently useful to others proving implications or non-implications from the laws.</p>",
        "id": 475080966,
        "sender_full_name": "Anand Rao Tadipatri",
        "timestamp": 1728207073
    },
    {
        "content": "<p>I just noticed an open PR (<a href=\"https://github.com/leanprover-community/mathlib4/pull/322\">#322</a>) that seems to do something similar. I'm sorry for the overlap, I didn't notice this when I started working on my code.</p>\n<p>Update: I also noticed that PR <a href=\"https://github.com/leanprover-community/mathlib4/pull/357\">#357</a> by <span class=\"user-mention\" data-user-id=\"315434\">@Andrés Goens</span> also does something similar -- I apologize for the overlap here too and I'd be happy to collaborate on merging the features into a single PR.</p>",
        "id": 475081186,
        "sender_full_name": "Anand Rao Tadipatri",
        "timestamp": 1728207307
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"303675\">@Anand Rao Tadipatri</span> it's nice that we're at least converging towards the same goal! (it looks like <a href=\"https://github.com/teorth/equational_theories/pull/357\">equational#357</a> and your code for that are very similar, for example). Maybe as a heads-up for the future: can you try and use the claim mechanism (see contributing.md), so that this overlap doesn't happen? I did <a href=\"https://github.com/teorth/equational_theories/pull/357\">equational#357</a> because the issue (<a href=\"https://github.com/teorth/equational_theories/pull/143\">equational#143</a>) was not claimed in <a href=\"https://github.com/users/teorth/projects/1\">https://github.com/users/teorth/projects/1</a> , if you claim it others will know you're working on it and not duplicate the effort</p>",
        "id": 475087682,
        "sender_full_name": "Andrés Goens",
        "timestamp": 1728211455
    },
    {
        "content": "<p>Happy to collaborate on making things consistent! I'm not sure we want to have all of it in a single PR since it's much harder to review/read, but maybe we can split it up in different PRs?</p>",
        "id": 475087826,
        "sender_full_name": "Andrés Goens",
        "timestamp": 1728211602
    },
    {
        "content": "<p>I think for the automatic generation of Laws we should for example agree on over which alphabet. In <a href=\"https://github.com/teorth/equational_theories/pull/357\">equational#357</a> I use <code>Nat</code> whereas in <a href=\"https://github.com/teorth/equational_theories/pull/356\">equational#356</a> you seem to be using <code>Fin n</code> (I think that's the main difference). I see that <code>Fin n</code> has the advantage of being minimal, but I worry it'll just make things harder to compose the proofs then, since we'll have to cast from <code>Fin n</code> to <code>Fin m</code> if the number of variables disagree, so I thought it was easier just to state everything over <code>FreeMagma Nat</code></p>",
        "id": 475088100,
        "sender_full_name": "Andrés Goens",
        "timestamp": 1728211891
    },
    {
        "content": "<p>(We should ping <span class=\"user-mention\" data-user-id=\"690858\">@Daniel Weber</span> as well, who claimed <a href=\"https://github.com/teorth/equational_theories/pull/147\">equational#147</a> and is working on it on <a href=\"https://github.com/teorth/equational_theories/pull/322\">equational#322</a>)</p>",
        "id": 475088202,
        "sender_full_name": "Andrés Goens",
        "timestamp": 1728212003
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"315434\">@Andrés Goens</span> Thanks for the message. When I started working on this, it was as a part of the broader goal of implementing the metatheorem and I didn't think to check the issue tracker. I'll make sure to do that the next time I start working on a broader subtask to avoid similar overlaps.</p>",
        "id": 475097786,
        "sender_full_name": "Anand Rao Tadipatri",
        "timestamp": 1728218751
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"315434\">@Andrés Goens</span> Thanks for the message. When I started working on this, it was as a part of the broader goal of implementing the metatheorem and I didn't think to check the issue tracker. I'll make sure to do that the next time I start working on a broader subtask to avoid similar overlaps.</p>",
        "id": 475097787,
        "sender_full_name": "Anand Rao Tadipatri",
        "timestamp": 1728218751
    },
    {
        "content": "<p>The way I currently generate equivalence proofs like</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kd\">@[</span><span class=\"n\">reducible</span><span class=\"kd\">]</span><span class=\"w\"> </span><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Law27</span><span class=\"bp\">.</span><span class=\"n\">models_iff</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">inst</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Magma</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">],</span><span class=\"w\"> </span><span class=\"n\">satisfies</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"n\">Law27</span><span class=\"w\"> </span><span class=\"bp\">↔</span><span class=\"w\"> </span><span class=\"n\">Equation27</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"n\">models_iff_3</span><span class=\"w\"> </span><span class=\"n\">Law27</span>\n</code></pre></div>\n<p>relies on the number of variables to call the appropriate lemma, so I would prefer to keep <code>Fin n</code>.</p>\n<p>However, I agree that it would be a nuisance to cast around equations with different numbers of variables. I was thinking this could be dealt with some API that transports a <code>MagmaLaw A</code> to a <code>MagmaLaw B</code> along a function <code>f : A -&gt; B</code> together with a function that takes in a <code>MagmaLaw (Fin n)</code> and a <code>MagmaLaw (Fin m)</code> and gives <code>MagmaLaw (Fin (max m n)) x MagmaLaw (Fin (max m n))</code>.</p>",
        "id": 475098219,
        "sender_full_name": "Anand Rao Tadipatri",
        "timestamp": 1728219167
    },
    {
        "content": "<p>The way I currently generate equivalence proofs like</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kd\">@[</span><span class=\"n\">reducible</span><span class=\"kd\">]</span><span class=\"w\"> </span><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Law27</span><span class=\"bp\">.</span><span class=\"n\">models_iff</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">inst</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Magma</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">],</span><span class=\"w\"> </span><span class=\"n\">satisfies</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"n\">Law27</span><span class=\"w\"> </span><span class=\"bp\">↔</span><span class=\"w\"> </span><span class=\"n\">Equation27</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"n\">models_iff_3</span><span class=\"w\"> </span><span class=\"n\">Law27</span>\n</code></pre></div>\n<p>relies on the number of variables to call the appropriate lemma, so I would prefer to keep <code>Fin n</code>.</p>\n<p>However, I agree that it would be a nuisance to cast around equations with different numbers of variables. I was thinking this could be dealt with some API that transports a <code>MagmaLaw A</code> to a <code>MagmaLaw B</code> along a function <code>f : A -&gt; B</code> together with a function that takes in a <code>MagmaLaw (Fin n)</code> and a <code>MagmaLaw (Fin m)</code> and gives <code>MagmaLaw (Fin (max m n)) x MagmaLaw (Fin (max m n))</code>.</p>",
        "id": 475098262,
        "sender_full_name": "Anand Rao Tadipatri",
        "timestamp": 1728219218
    },
    {
        "content": "<p>FWIW, this \"just works\" with my version in <a href=\"https://github.com/teorth/equational_theories/pull/357\">equational#357</a> (over <code>Nat</code>) and <span class=\"user-mention\" data-user-id=\"690858\">@Daniel Weber</span> 's tactics:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">Law2_leq_Law3</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Law2</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">Law3</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"n\">h</span>\n<span class=\"w\">  </span><span class=\"n\">equation_to_law</span>\n<span class=\"w\">  </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">Equation2_implies_Equation3</span><span class=\"w\"> </span><span class=\"n\">G</span>\n<span class=\"w\">  </span><span class=\"n\">law_to_equation</span>\n<span class=\"w\">  </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">h</span>\n</code></pre></div>\n<p>and that proof doesn't rely on the number of specific variables (although it just goes in the one direction, the other should also be simple too)</p>",
        "id": 475100183,
        "sender_full_name": "Andrés Goens",
        "timestamp": 1728221321
    },
    {
        "content": "<p>I'll have a look at how your PR needs the <code>Fin n</code>, I wonder if we could generate these proofs by keeping track of the number in the meta code but still produce them over <code>Nat</code>?</p>",
        "id": 475100216,
        "sender_full_name": "Andrés Goens",
        "timestamp": 1728221374
    },
    {
        "content": "<p>ohh, I see, you explicitly proved stuff for <code>Fin 1</code> up to <code>Fin 6</code> <span aria-label=\"grinning\" class=\"emoji emoji-1f600\" role=\"img\" title=\"grinning\">:grinning:</span></p>",
        "id": 475100322,
        "sender_full_name": "Andrés Goens",
        "timestamp": 1728221475
    },
    {
        "content": "<p>I wonder if we can have it both ways, proving that an implication ov <code>FreeMagma Nat</code> implies it over <code>FreeMagma (Fin n)</code></p>",
        "id": 475100549,
        "sender_full_name": "Andrés Goens",
        "timestamp": 1728221726
    },
    {
        "content": "<p>I'll give that a try a bit later</p>",
        "id": 475100560,
        "sender_full_name": "Andrés Goens",
        "timestamp": 1728221741
    },
    {
        "content": "<p>I see, that's quite neat.</p>",
        "id": 475101590,
        "sender_full_name": "Anand Rao Tadipatri",
        "timestamp": 1728222729
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"315434\">Andrés Goens</span> <a href=\"#narrow/stream/458659-Equational/topic/Automatically.20generating.20magma.20laws.20.26.20proofs.20from.20equations/near/475100322\">said</a>:</p>\n<blockquote>\n<p>ohh, I see, you explicitly proved stuff for <code>Fin 1</code> up to <code>Fin 6</code> <span aria-label=\"grinning\" class=\"emoji emoji-1f600\" role=\"img\" title=\"grinning\">:grinning:</span></p>\n</blockquote>\n<p>Yes, it's not the most principled approach <span aria-label=\"smiley\" class=\"emoji emoji-1f603\" role=\"img\" title=\"smiley\">:smiley:</span>, but since we're interested in only a specific subset of equations anyway, I thought this wouldn't be too bad a way to generate those lemmas.</p>",
        "id": 475101655,
        "sender_full_name": "Anand Rao Tadipatri",
        "timestamp": 1728222816
    },
    {
        "content": "<p>yeah, absolutely, I think it's a clever solution</p>",
        "id": 475103091,
        "sender_full_name": "Andrés Goens",
        "timestamp": 1728224177
    },
    {
        "content": "<p>Btw, since the claims process came up, it is important to know that if you make a PR without following the claims process, it won't appear on the task board and this means it likely doesn't get seen. From the maintainers side, the claims process not only makes the  contribution process fair, but also makes our job simpler.</p>",
        "id": 475103331,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1728224428
    },
    {
        "content": "<p>Also, I question the need for any of the changes in MagmaLaw.lean</p>",
        "id": 475103588,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1728224678
    },
    {
        "content": "<p>These are cosmetic name changes and replace defs with abbrevs</p>",
        "id": 475103596,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1728224694
    },
    {
        "content": "<p>These are fairly upstream files and might cause a lot of merge conflicts for downstream contributors, so such name changes should have a very good justification. Also changing all defs to reducible is not a good idea.</p>",
        "id": 475103723,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1728224814
    },
    {
        "content": "<p>I proved the equivalence of implications over <code>Fin n</code> and <code>Nat</code>, except for <code>n = 0</code>, I think that maybe holds vacuously but I wasn't sure how to construct the empty function over an uninhabited type (<code>Fin 0</code> is uninhabited, right?) not sure that this even works in type theory. While I'm curious about that, I think the case <code>n = 0</code> is not very interesting for us and that should be able to get us to use both approaches</p>",
        "id": 475106875,
        "sender_full_name": "Andrés Goens",
        "timestamp": 1728227431
    },
    {
        "content": "<p>it's in <a href=\"https://github.com/teorth/equational_theories/pull/368\">equational#368</a></p>",
        "id": 475106888,
        "sender_full_name": "Andrés Goens",
        "timestamp": 1728227449
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"466334\">Shreyas Srinivas</span> <a href=\"#narrow/stream/458659-Equational/topic/Automatically.20generating.20magma.20laws.20.26.20proofs.20from.20equations/near/475103331\">said</a>:</p>\n<blockquote>\n<p>Btw, since the claims process came up, it is important to know that if you make a PR without following the claims process, it won't appear on the task board and this means it likely doesn't get seen. From the maintainers side, the claims process not only makes the  contribution process fair, but also makes our job simpler.</p>\n</blockquote>\n<p>Thanks, that sounds reasonable to me.</p>",
        "id": 475107317,
        "sender_full_name": "Anand Rao Tadipatri",
        "timestamp": 1728227808
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"303675\">@Anand Rao Tadipatri</span> maybe we can merge this and then merge/rebase you PR on that. That way we can use your proof generation mera code and generate proofs over fin which we can also in meta code lift to nat using <a href=\"https://github.com/teorth/equational_theories/pull/368\">equational#368</a>?</p>",
        "id": 475107440,
        "sender_full_name": "Andrés Goens",
        "timestamp": 1728227940
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"466334\">Shreyas Srinivas</span> <a href=\"#narrow/stream/458659-Equational/topic/Automatically.20generating.20magma.20laws.20.26.20proofs.20from.20equations/near/475103596\">said</a>:</p>\n<blockquote>\n<p>These are cosmetic name changes and replace defs with abbrevs</p>\n</blockquote>\n<p>I agree, the <code>abbrev</code>s can be turned back to <code>def</code>s. The change from <code>evalInMagma</code> to <code>evalHom</code> was to use homomorphisms instead of the underlying functions.</p>",
        "id": 475107465,
        "sender_full_name": "Anand Rao Tadipatri",
        "timestamp": 1728227971
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"315434\">Andrés Goens</span> <a href=\"#narrow/stream/458659-Equational/topic/Automatically.20generating.20magma.20laws.20.26.20proofs.20from.20equations/near/475106875\">said</a>:</p>\n<blockquote>\n<p>I proved the equivalence of implications over <code>Fin n</code> and <code>Nat</code>, except for <code>n = 0</code>, I think that maybe holds vacuously but I wasn't sure how to construct the empty function over an uninhabited type (<code>Fin 0</code> is uninhabited, right?) not sure that this even works in type theory. While I'm curious about that, I think the case <code>n = 0</code> is not very interesting for us and that should be able to get us to use both approaches</p>\n</blockquote>\n<p>Thank you! The map from <code>Fin 0</code> is called <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Fin.elim0#doc\">docs#Fin.elim0</a>.</p>",
        "id": 475107493,
        "sender_full_name": "Anand Rao Tadipatri",
        "timestamp": 1728227998
    },
    {
        "content": "<p>I don't think homomorphisms are even defined that far up in the file tree</p>",
        "id": 475107537,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1728228010
    },
    {
        "content": "<p>Also, this is just a name change</p>",
        "id": 475107556,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1728228026
    },
    {
        "content": "<p>Basically it triggers too many downstream changes. At least, refactors should not be mixed with feature PRs. The way to do that is to propose a separate task and claim it, and then before merging, check how other PRs are affected.</p>",
        "id": 475107614,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1728228101
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"315434\">Andrés Goens</span> <a href=\"#narrow/stream/458659-Equational/topic/Automatically.20generating.20magma.20laws.20.26.20proofs.20from.20equations/near/475107440\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"303675\">Anand Rao Tadipatri</span> maybe we can merge this and then merge/rebase you PR on that. That way we can use your proof generation mera code and generate proofs over fin which we can also in meta code lift to nat using <a href=\"https://github.com/teorth/equational_theories/pull/368\">equational#368</a>?</p>\n</blockquote>\n<p>That sounds good to me!</p>",
        "id": 475107619,
        "sender_full_name": "Anand Rao Tadipatri",
        "timestamp": 1728228109
    },
    {
        "content": "<p>One extra consideration in this project compared to normal lean projects is how should the automatic proof scripts be updated and lemmas regenerated</p>",
        "id": 475107681,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1728228154
    },
    {
        "content": "<p>I would advise against such refactors</p>",
        "id": 475107691,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1728228160
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"466334\">Shreyas Srinivas</span> <a href=\"#narrow/stream/458659-Equational/topic/Automatically.20generating.20magma.20laws.20.26.20proofs.20from.20equations/near/475107614\">said</a>:</p>\n<blockquote>\n<p>Basically it triggers too many downstream changes. At least, refactors should not be mixed with feature PRs. The way to do that is to propose a separate task and claim it, and then before merging, check how other PRs are affected.</p>\n</blockquote>\n<p>That sounds reasonable. The <code>evalHom</code> function was already defined in an earlier file, and I was using it in place of <code>evalInMagma</code>, which is its underlying function.</p>",
        "id": 475107712,
        "sender_full_name": "Anand Rao Tadipatri",
        "timestamp": 1728228192
    },
    {
        "content": "<p>Yeah but I'd suggest switching back the theory files to evalInMagma and keeping defs as they are, not abbrevs</p>",
        "id": 475107877,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1728228348
    },
    {
        "content": "<p>At least in this PR. Further if there are parts of your PR not overlapping with <span class=\"user-mention\" data-user-id=\"315434\">@Andrés Goens</span>, I suggest requesting  a task (for example posting an issue and linking it in zulip) that only covers those parts. After discussion, one of the maintainers can make it a project task that you can then claim. Our current model is that the claimer's proposed PR closes issues.</p>",
        "id": 475108114,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1728228555
    },
    {
        "content": "<p>I know this might all sound bureaucratic, but it just makes the outstanding tasks process of PFR simpler all around as long as we all stick to it, and ensures that every contribution is considered properly.</p>",
        "id": 475108272,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1728228680
    },
    {
        "content": "<p>Thanks, I'll do that. I appreciate the effort of the maintainers in making the contribution process smooth and streamlined!</p>",
        "id": 475109158,
        "sender_full_name": "Anand Rao Tadipatri",
        "timestamp": 1728229458
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"303675\">@Anand Rao Tadipatri</span> what's the current plan on <a href=\"https://github.com/teorth/equational_theories/pull/356\">equational#356</a>? It would be nice to have the proofs of equivalence of laws and equations, which would allow us to use duality to prove some of the missing implications. Would it make sense to split that and do a PR just introducing these proofs of equivalence first?</p>",
        "id": 475323917,
        "sender_full_name": "Andrés Goens",
        "timestamp": 1728314946
    },
    {
        "content": "<p>Okay, that sounds good to me. I'm currently working on creating an environment extension that stores all the laws created, I'll update the PR or open a new one once I've done that.</p>",
        "id": 475324466,
        "sender_full_name": "Anand Rao Tadipatri",
        "timestamp": 1728315072
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"303675\">@Anand Rao Tadipatri</span> <a href=\"#narrow/stream/458659-Equational/topic/Automatically.20generating.20magma.20laws.20.26.20proofs.20from.20equations/near/475324466\">said</a>:</p>\n<blockquote>\n<p>Okay, that sounds good to me. I'm currently working on creating an environment extension that stores all the laws created, I'll update the PR or open a new one once I've done that.</p>\n</blockquote>\n<p>Do you want to claim <a href=\"https://github.com/teorth/equational_theories/pull/142\">equational#142</a>? I haven't started to work on it yet, I can disclaim it</p>",
        "id": 475325081,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1728315167
    },
    {
        "content": "<p>I'm not operating on the syntax of the equations in this PR, so I'd be fine if you went ahead and worked on it. I don't mind picking it up later though, once I've properly generated some of the invariants-related conjectures.</p>",
        "id": 475326356,
        "sender_full_name": "Anand Rao Tadipatri",
        "timestamp": 1728315394
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"315434\">@Andrés Goens</span> Is it fine if my PR generates the laws over <code>Fin n</code> and we use the machinery of <a href=\"https://github.com/teorth/equational_theories/pull/368\">equational#368</a> to then cast to equations over <code>Nat</code>?</p>",
        "id": 475327073,
        "sender_full_name": "Anand Rao Tadipatri",
        "timestamp": 1728315504
    },
    {
        "content": "<p>I guess the idea is that this would literally just be outputing the enviroment extension you're generating into a string, right?</p>",
        "id": 475327092,
        "sender_full_name": "Andrés Goens",
        "timestamp": 1728315506
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"303675\">Anand Rao Tadipatri</span> <a href=\"#narrow/stream/458659-Equational/topic/Automatically.20generating.20magma.20laws.20.26.20proofs.20from.20equations/near/475327073\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"315434\">Andrés Goens</span> Is it fine if my PR generates the laws over <code>Fin n</code> and we use the machinery of <a href=\"https://github.com/teorth/equational_theories/pull/368\">equational#368</a> to then cast to equations over <code>Nat</code>?</p>\n</blockquote>\n<p>absolutely, I thought that was the idea! (wouldn't be sure how else you'd do it)</p>",
        "id": 475327239,
        "sender_full_name": "Andrés Goens",
        "timestamp": 1728315530
    },
    {
        "content": "<p>Okay, that's what I understood too, but I just wanted to make sure before going ahead :)</p>",
        "id": 475327594,
        "sender_full_name": "Anand Rao Tadipatri",
        "timestamp": 1728315619
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"315434\">Andrés Goens</span> <a href=\"#narrow/stream/458659-Equational/topic/Automatically.20generating.20magma.20laws.20.26.20proofs.20from.20equations/near/475327092\">said</a>:</p>\n<blockquote>\n<p>I guess the idea is that this would literally just be outputing the enviroment extension you're generating into a string, right?</p>\n</blockquote>\n<p>Oh, I see. Yes, I think I understand now. I was planning to store the laws and not the equations, so do you reckon that an output like <code>[0 1] = [1 0]</code> would be reasonable? (instead of <code>x * y = y * x</code>) If not, I can try to configure the extension to also keep track of the original equations with the variable names while printing.</p>",
        "id": 475329335,
        "sender_full_name": "Anand Rao Tadipatri",
        "timestamp": 1728316005
    },
    {
        "content": "<p>I could first create a PR without the printing feature and follow up with another one that addresses <a href=\"https://github.com/teorth/equational_theories/pull/142\">equational#142</a>, just to keep things separate and self-contained.</p>",
        "id": 475329512,
        "sender_full_name": "Anand Rao Tadipatri",
        "timestamp": 1728316054
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"303675\">Anand Rao Tadipatri</span> <a href=\"#narrow/stream/458659-Equational/topic/Automatically.20generating.20magma.20laws.20.26.20proofs.20from.20equations/near/475329512\">said</a>:</p>\n<blockquote>\n<p>I could first create a PR without the printing feature and follow up with another one that addresses <a href=\"https://github.com/teorth/equational_theories/pull/142\">equational#142</a>, just to keep things separate and self-contained.</p>\n</blockquote>\n<p>sounds reasonable to me!</p>",
        "id": 475330269,
        "sender_full_name": "Andrés Goens",
        "timestamp": 1728316282
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"315434\">@Andrés Goens</span> I've generalized your result for casting laws from <code>Fin n</code> to <code>Nat</code> to omit the <code>n != 0</code> hypothesis. My PR for automatically adding the satisfiability equivalence proofs is at <a href=\"https://github.com/teorth/equational_theories/pull/427\">equational#427</a>.</p>",
        "id": 475529988,
        "sender_full_name": "Anand Rao Tadipatri",
        "timestamp": 1728383438
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"690858\">@Daniel Weber</span> I'd be happy to now claim <a href=\"https://github.com/teorth/equational_theories/pull/142\">equational#142</a> to add the export feature.</p>",
        "id": 475531316,
        "sender_full_name": "Anand Rao Tadipatri",
        "timestamp": 1728383948
    },
    {
        "content": "<p>Alright, I disclaimed it</p>",
        "id": 475534680,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1728385270
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"303675\">Anand Rao Tadipatri</span> <a href=\"#narrow/stream/458659-Equational/topic/Automatically.20generating.20magma.20laws.20.26.20proofs.20from.20equations/near/475529988\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"315434\">Andrés Goens</span> I've generalized your result for casting laws from <code>Fin n</code> to <code>Nat</code> to omit the <code>n != 0</code> hypothesis. My PR for automatically adding the satisfiability equivalence proofs is at <a href=\"https://github.com/teorth/equational_theories/pull/427\">equational#427</a>.</p>\n</blockquote>\n<p>nice, thanks!</p>",
        "id": 475534762,
        "sender_full_name": "Andrés Goens",
        "timestamp": 1728385300
    },
    {
        "content": "<p>I'm not sure where to post this, but I seem to be facing some strange build error with one of the generated files:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">✖</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">3337</span><span class=\"bp\">/</span><span class=\"mi\">3343</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Building</span><span class=\"w\"> </span><span class=\"n\">equational_theories</span><span class=\"bp\">.</span><span class=\"n\">Generated</span><span class=\"bp\">.</span><span class=\"n\">EquationSearch</span><span class=\"bp\">.</span><span class=\"n\">theorems</span><span class=\"bp\">.</span><span class=\"n\">Run5</span>\n<span class=\"n\">trace</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">.&gt;</span><span class=\"w\"> </span><span class=\"n\">LEAN_PATH</span><span class=\"bp\">=././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">batteries</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"o\">:</span><span class=\"bp\">././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">Qq</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"o\">:</span><span class=\"bp\">././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">aesop</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"o\">:</span><span class=\"bp\">././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">proofwidgets</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"o\">:</span><span class=\"bp\">././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">Cli</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"o\">:</span><span class=\"bp\">././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">importGraph</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"o\">:</span><span class=\"bp\">././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">LeanSearchClient</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"o\">:</span><span class=\"bp\">././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">mathlib</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"o\">:</span><span class=\"bp\">././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">checkdecls</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"o\">:</span><span class=\"bp\">././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">MD4Lean</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"o\">:</span><span class=\"bp\">././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">UnicodeBasic</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"o\">:</span><span class=\"bp\">././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">BibtexQuery</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"o\">:</span><span class=\"bp\">././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">doc</span><span class=\"bp\">-</span><span class=\"n\">gen4</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"o\">:</span><span class=\"bp\">././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"w\"> </span><span class=\"n\">LD_LIBRARY_PATH</span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">art</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.13.0-rc3/bin/lean -Dpp.unicode.fun=true -DautoImplicit=false -DrelaxedAutoImplicit=false ././././equational_theories/Generated/EquationSearch/theorems/Run5.lean -R ./././. -o ././.lake/build/lib/equational_theories/Generated/EquationSearch/theorems/Run5.olean -i ././.lake/build/lib/equational_theories/Generated/EquationSearch/theorems/Run5.ilean -c ././.lake/build/ir/equational_theories/Generated/EquationSearch/theorems/Run5.c --json</span>\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"w\"> </span><span class=\"n\">exited</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"n\">code</span><span class=\"w\"> </span><span class=\"mi\">137</span>\n<span class=\"n\">Some</span><span class=\"w\"> </span><span class=\"n\">required</span><span class=\"w\"> </span><span class=\"n\">builds</span><span class=\"w\"> </span><span class=\"n\">logged</span><span class=\"w\"> </span><span class=\"n\">failures</span><span class=\"o\">:</span>\n<span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">equational_theories</span><span class=\"bp\">.</span><span class=\"n\">Generated</span><span class=\"bp\">.</span><span class=\"n\">EquationSearch</span><span class=\"bp\">.</span><span class=\"n\">theorems</span><span class=\"bp\">.</span><span class=\"n\">Run5</span>\n</code></pre></div>\n<p>Has anyone else encountered this issue before?</p>",
        "id": 475614466,
        "sender_full_name": "Anand Rao Tadipatri",
        "timestamp": 1728405564
    },
    {
        "content": "<p>That file (and indeed the entire project) builds for me on <code>a326d6dfda7f6da2e5f350d4eb4cda214b52d899</code> (current main)</p>",
        "id": 475643233,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1728413635
    },
    {
        "content": "<p>Related question here: <a class=\"stream-topic\" data-stream-id=\"458659\" href=\"/#narrow/stream/458659-Equational/topic/Do.20we.20need.20to.20build.20EquationalSearch.20files.3F\">#Equational &gt; Do we need to build EquationalSearch files?</a></p>",
        "id": 475644569,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1728413956
    },
    {
        "content": "<p>Oh -- exit code 137 could be an out-of-memory issue. The machine I built it on had 32G of ram!</p>",
        "id": 475650449,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1728415646
    },
    {
        "content": "<p>The \"Compile Blueprint\" action takes a very long time in those specific PRs</p>\n<p><a href=\"/user_uploads/3121/qVUIp8CXyXlK-zAC0D3hQ5sL/Screenshot-2024-10-08-at-21.31.33.png\">Screenshot 2024-10-08 at 21.31.33.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/qVUIp8CXyXlK-zAC0D3hQ5sL/Screenshot-2024-10-08-at-21.31.33.png\" title=\"Screenshot 2024-10-08 at 21.31.33.png\"><img data-original-dimensions=\"2032x966\" src=\"/user_uploads/thumbnail/3121/qVUIp8CXyXlK-zAC0D3hQ5sL/Screenshot-2024-10-08-at-21.31.33.png/840x560.webp\"></a></div>",
        "id": 475651713,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1728415926
    },
    {
        "content": "<p>Still working towards getting all the dual proofs, we're making more progress! In <a href=\"https://github.com/teorth/equational_theories/pull/459\">equational#459</a> I'm \"lifting\" an implication on equations (deep embedding) <code>EquationN =&gt; EquationM</code> into a proof for the laws: <code>LawN.implies LawM</code>. I'm building these proofs in the meta code, when adding the tag <code>@[equational_result]</code>. So, now the following \"just works\":</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kd\">@[</span><span class=\"n\">equational_result</span><span class=\"kd\">]</span>\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">Equation2_implies_Equation3</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">G</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Magma</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Equation2</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Equation3</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">_</span>\n\n<span class=\"bp\">#</span><span class=\"n\">print</span><span class=\"w\"> </span><span class=\"n\">Law2_implies_Law3</span><span class=\"w\"> </span><span class=\"c1\">-- theorem Law2_implies_Law3 : Law.MagmaLaw.implies Law2 Law3 := fun G inst h ↦ (Law3.models_iff G).mpr (Equation2_implies_Equation3 G ((Law2.models_iff G).mp h)</span>\n</code></pre></div>",
        "id": 475852129,
        "sender_full_name": "Andrés Goens",
        "timestamp": 1728478117
    },
    {
        "content": "<p>From these it should be simple to build the proofs of duality now!</p>",
        "id": 475853695,
        "sender_full_name": "Andrés Goens",
        "timestamp": 1728478412
    },
    {
        "content": "<p>Don't you also need <a href=\"https://github.com/teorth/equational_theories/pull/186\">equational#186</a> for the other direction? That's what's currently blocking my <code>equation_to_law</code> and <code>law_to_equation</code> tactics</p>",
        "id": 475860527,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1728479703
    },
    {
        "content": "<p>ah, yeah I'm just ignoring that for now <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span></p>",
        "id": 475860648,
        "sender_full_name": "Andrés Goens",
        "timestamp": 1728479741
    },
    {
        "content": "<p>but you're right, I do need it for the other direction</p>",
        "id": 475860711,
        "sender_full_name": "Andrés Goens",
        "timestamp": 1728479754
    },
    {
        "content": "<p>at least at the laws level it works!</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kd\">@[</span><span class=\"n\">equational_result</span><span class=\"kd\">]</span>\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">Equation2_implies_Equation8</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">G</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Magma</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Equation2</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Equation8</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">_</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">Law2_implies_Law8_dual</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Law2</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">Law23</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">Law</span><span class=\"bp\">.</span><span class=\"n\">MagmaLaw</span><span class=\"bp\">.</span><span class=\"n\">implies_iff_op</span><span class=\"bp\">.</span><span class=\"n\">mpr</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">Law2op_eq_Law2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Law2</span><span class=\"bp\">.</span><span class=\"n\">op</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Law2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">decide</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">Law23op_eq_Law8</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Law23</span><span class=\"bp\">.</span><span class=\"n\">op</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Law8</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">decide</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Law2op_eq_Law2</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Law23op_eq_Law8</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">Law2_implies_Law8</span>\n</code></pre></div>\n<p>These should also be able to be generated automatically</p>",
        "id": 475862255,
        "sender_full_name": "Andrés Goens",
        "timestamp": 1728480160
    },
    {
        "content": "<p>I guess a question here is what we should name them, should we have a separate theorem for the duals (called <code>LawN_implies_LawM_dual</code>), or should we compute the dual and generate that theorem? In the latter case, the <code>@[equational_result]</code> tag would complain when you're trying to prove a theorem where you've already proved the dual</p>",
        "id": 475862584,
        "sender_full_name": "Andrés Goens",
        "timestamp": 1728480249
    },
    {
        "content": "<p>Maybe this is worth a poll?</p>",
        "id": 475862692,
        "sender_full_name": "Andrés Goens",
        "timestamp": 1728480280
    },
    {
        "content": "<p>/poll How should we generate dual theorems<br>\nNew names (not colliding with existing names)<br>\nName collisions (so that the tag would complain if you're proving something where you've proved the dual)</p>",
        "id": 475862849,
        "sender_full_name": "Andrés Goens",
        "timestamp": 1728480327
    },
    {
        "content": "<p>I'm still confused why we prove the any implications here explicitly. I can understand that we may want explicit proofs that say the dual of 2 is 2, and the dual of 8 is 23, to have trust in that “database” . So roughly 2000  simple autogenerated proofs, and an entry for that information in the equational_result attribute.</p>\n<p>But the (trivial) inference that then, if we have 2 implies 8, we also have 2 implies 23, why not do that when calculating the closure? Why is that more interesting than applying transitivity?</p>",
        "id": 476057027,
        "sender_full_name": "Joachim Breitner",
        "timestamp": 1728544583
    },
    {
        "content": "<p>that's a good point, I don't think they're fundamentally any different. I like that suggestion</p>",
        "id": 476057871,
        "sender_full_name": "Andrés Goens",
        "timestamp": 1728544734
    },
    {
        "content": "<p>there's something to be said about both cases, in that we're trusting the code that computed these closures if we're not building explicit proofs and having the kernel check them, but we could do that only \"just in time\" when checking a specific implication</p>",
        "id": 476058655,
        "sender_full_name": "Andrés Goens",
        "timestamp": 1728544859
    },
    {
        "content": "<p>(I haven't looked at the script generating the closure carefully, but IIRC it's not building those, admittedly trivial, proofs)</p>",
        "id": 476060017,
        "sender_full_name": "Andrés Goens",
        "timestamp": 1728545090
    },
    {
        "content": "<p>It's not, unless someone has added that since I wrote it. It might be good to formally verify that it correctly computes the closure, though</p>",
        "id": 476061067,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1728545278
    }
]