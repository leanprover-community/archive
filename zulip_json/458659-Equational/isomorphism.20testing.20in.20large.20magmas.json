[
    {
        "content": "<p>In the eqn 1485 thread we have some size 18 models that I don't currently have a \"fast\" algorithm for detecting isomorphic operation tables.</p>\n<p>In the other investigations, has there already been a tool developed that can exploit known structure to speed up the check?</p>\n<p>If not, then:<br>\nThere is some structure in the known finite examples, and I'd like to brainstorm an algorithm to exploit this.</p>\n<p>Structure of 'weak' central groupoids (that are not central groupoids) in all finite examples seen so far.</p>\n<ol>\n<li>squaring is surjective</li>\n<li>has an even number of elements</li>\n<li>for 2n elements, table can be permuted so that there is an nxn block structure:<p>* let A = the set of the first n elements, let B = the set of the second n elements.<br>\n  * for all x,y in A, (x ◇ y) is in B<br>\n  * for all x,y in B, (x ◇ y) is in A</p>\n</li>\n</ol>\n<p>This problem likely has no truly efficient algorithm, but if we could get this to work for size 16 and size 18 models, that would be sufficient for our current use case.</p>\n<p>We could potentially even get away with heuristics with \"rare\" false negatives, as long as there are no false positives of isomorphism.</p>",
        "id": 479960267,
        "sender_full_name": "Kevin M",
        "timestamp": 1730409186
    },
    {
        "content": "<p>There appears to be some kind of \"semi-direct product\" like thing that can occur with eqn 1485.<br>\nSo even if we cannot fully simplify our collection of models, the hope would be to reduce them to a manageable number, to allow investigation of these examples.</p>",
        "id": 479960831,
        "sender_full_name": "Kevin M",
        "timestamp": 1730409493
    },
    {
        "content": "<p>Could Nauty be used here?</p>\n<p><a href=\"https://users.cecs.anu.edu.au/~bdm/nauty/\">https://users.cecs.anu.edu.au/~bdm/nauty/</a></p>\n<p><a href=\"https://www3.cs.stonybrook.edu/~algorith/implement/nauty/implement.shtml\">https://www3.cs.stonybrook.edu/~algorith/implement/nauty/implement.shtml</a></p>\n<p>Don't remember it working as easy as I hoped when I used a few years ago but do remember that it was accurate and fast, really fast.</p>",
        "id": 479961188,
        "sender_full_name": "Eric Taucher",
        "timestamp": 1730409725
    },
    {
        "content": "<p>That's a good idea if we can find a \"faithful\" graph to represent the magma, since the graph problem is almost linear in the \"average case\".</p>\n<p>The natural graph here is the directed graph,  where there is an edge x to y iff there is some element z such that x ◇ z = y. Unfortunately, if there are multiple paths of length two between vertices, it is unclear how to \"recover\" the magma. So this is lossy.</p>\n<p>Is there another graph choice?</p>",
        "id": 479962119,
        "sender_full_name": "Kevin M",
        "timestamp": 1730410305
    },
    {
        "content": "<p>I guess we could \"color\" the edges, to make the correct length two paths obvious.</p>",
        "id": 479962228,
        "sender_full_name": "Kevin M",
        "timestamp": 1730410352
    },
    {
        "content": "<p>I wonder if nauty supports that. If not it could in principle be done by adding more vertices and little graph \"widgets\" to stand for the color.</p>",
        "id": 479962312,
        "sender_full_name": "Kevin M",
        "timestamp": 1730410411
    },
    {
        "content": "<p>No wait, that would not work, because we'd want the \"colors\" to be allowed to be permuted as well. So we cannot just tack on distinct widgets.</p>",
        "id": 479962539,
        "sender_full_name": "Kevin M",
        "timestamp": 1730410556
    },
    {
        "content": "<p>Somehow extra structure needs to be added such that the \"good\" length 2 paths are clear, and this added structure looks the same for all \"good\" paths.</p>",
        "id": 479962672,
        "sender_full_name": "Kevin M",
        "timestamp": 1730410615
    },
    {
        "content": "<p>From what I saw in a skim of the manual, nauty does not support colored edges.</p>",
        "id": 479963880,
        "sender_full_name": "Kevin M",
        "timestamp": 1730411310
    },
    {
        "content": "<p>== Idea ==<br>\nWhat if each (x ◇ y) = z is encoded by adding two vertices a, b with edges: x -&gt; a -&gt; y -&gt; b -&gt; z  and a -&gt; b.<br>\nThe n vertices encoding magma elements will then have at least an out degree  of n. So as long as n&gt;2, the \"coloring\" vertices a,b will then be structurally distinct from the magma elements.</p>\n<p>An <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">n</span></span></span></span> element magma would result in an <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi><mo>+</mo><mn>2</mn><msup><mi>n</mi><mn>2</mn></msup></mrow><annotation encoding=\"application/x-tex\">n + 2 n^2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6667em;vertical-align:-0.0833em;\"></span><span class=\"mord mathnormal\">n</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\">2</span><span class=\"mord\"><span class=\"mord mathnormal\">n</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span> vertex graph, with <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>5</mn><msup><mi>n</mi><mn>2</mn></msup></mrow><annotation encoding=\"application/x-tex\">5 n^2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\">5</span><span class=\"mord\"><span class=\"mord mathnormal\">n</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span> edges.  While I do not have much experience with graph algorithms, I think this might still be reasonable for graph comparisons.</p>\n<p>This graph is then faithful to the magma, correct?</p>",
        "id": 479965462,
        "sender_full_name": "Kevin M",
        "timestamp": 1730412147
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"768939\">Kevin M</span> <a href=\"#narrow/channel/458659-Equational/topic/isomorphism.20testing.20in.20large.20magmas/near/479965462\">said</a>:</p>\n<blockquote>\n<p>This graph is then faithful to the magma, correct?</p>\n</blockquote>\n<p>Before we get to far, please realize that I am software developer with a BS in Computer Science so I do get some of the math in this topic but much of it is still past my understanding. However graphs with vertices and edges I tend to get.</p>\n<p>Just before you noted that statement I posted this to ChatGPT 40 model</p>\n<p>Prompt</p>\n<blockquote>\n<p>Can nauty by Brendan McKay support colored edges? Is so can you demonstrate with an example?</p>\n</blockquote>\n<p>Reply</p>\n<p>Nauty, developed by Brendan McKay, is a software package designed to compute automorphism groups of graphs and determine graph isomorphism. While Nauty primarily handles vertex-colored graphs, it does not natively support edge-colored graphs. However, you can represent edge-colored graphs by transforming them into vertex-colored graphs, enabling Nauty to process them.</p>\n<p><strong>Transforming Edge-Colored Graphs for Nauty</strong></p>\n<p>To handle edge-colored graphs with Nauty, you can convert each edge into a vertex, effectively transforming the original graph into a bipartite graph. Here's how:</p>\n<ol>\n<li>\n<p><strong>Original Graph</strong>: Start with a graph where edges have assigned colors.</p>\n</li>\n<li>\n<p><strong>Transformation</strong>:</p>\n<ul>\n<li>For each edge in the original graph, introduce a new vertex representing that edge.</li>\n<li>Connect this new vertex to the two original vertices that the edge was incident upon.</li>\n<li>Assign a unique color to each new vertex corresponding to the original edge's color.</li>\n</ul>\n</li>\n</ol>\n<p>This transformation results in a bipartite graph where one set of vertices represents the original vertices, and the other set represents the edges, now treated as vertices with specific colors. Nauty can then process this vertex-colored bipartite graph to analyze automorphisms or test for isomorphism.</p>\n<p><strong>Example</strong></p>\n<p>Consider a simple graph with vertices \\( A \\) and \\( B \\) connected by an edge colored 'red'.</p>\n<ul>\n<li>\n<p><strong>Original Graph</strong>:</p>\n<ul>\n<li>Vertices: \\( A \\), \\( B \\)</li>\n<li>Edge: \\( (A, B) \\) with color 'red'</li>\n</ul>\n</li>\n<li>\n<p><strong>Transformed Graph</strong>:</p>\n<ul>\n<li>Vertices: \\( A \\), \\( B \\), \\( E_{AB} \\)<ul>\n<li>\\( E_{AB} \\) is a new vertex representing the edge \\( (A, B) \\)</li>\n</ul>\n</li>\n<li>Edges:<ul>\n<li>\\( (A, E_{AB}) \\)</li>\n<li>\\( (B, E_{AB}) \\)</li>\n</ul>\n</li>\n<li>Vertex Colors:<ul>\n<li>\\( A \\): uncolored or assigned a default color</li>\n<li>\\( B \\): uncolored or assigned a default color</li>\n<li>\\( E_{AB} \\): color 'red'</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<p>In this transformed graph, \\( E_{AB} \\) connects to \\( A \\) and \\( B \\), and its color reflects the original edge's color. This structure allows Nauty to process the graph, considering the vertex colors to account for the original edge colors.</p>\n<p><strong>Alternative Approach</strong></p>\n<p>Another method involves using multiple layers to represent different edge colors. Each layer corresponds to a specific color, and an edge's presence in a layer indicates its color. This approach is discussed in the context of graph isomorphism with colored edges. citeturn0search1</p>\n<p><strong>Note</strong>: While these transformations enable Nauty to handle edge-colored graphs, they may increase the graph's size and complexity. It's essential to consider the implications on performance and feasibility for large graphs. </p>\n<p>ChatGPT <a href=\"https://chatgpt.com/share/6724002f-6e74-8013-8527-ace177a693af\">shared link</a> </p>\n<hr>\n<hr>\n<p>Also a <a href=\"https://en.wikipedia.org/wiki/Hypergraph\">hypergraph</a> might be of value either for this or some other problems in this topic. In particular this diagram pops into mind during reading some of the descriptions.</p>\n<div class=\"message_inline_image\"><a href=\"https://upload.wikimedia.org/wikipedia/commons/thumb/3/3b/PAOH_hypergraph_representation.png/220px-PAOH_hypergraph_representation.png\"><img src=\"https://uploads.zulipusercontent.net/57729b61b58da0a4c00c130e37877db5473cecdb/68747470733a2f2f75706c6f61642e77696b696d656469612e6f72672f77696b6970656469612f636f6d6d6f6e732f7468756d622f332f33622f50414f485f687970657267726170685f726570726573656e746174696f6e2e706e672f32323070782d50414f485f687970657267726170685f726570726573656e746174696f6e2e706e67\"></a></div><p>Image from Wikipedia article.</p>\n<p>I will note that I have no experience with hypergraphs but not afraid to tackle the challenge if needed.</p>",
        "id": 479966947,
        "sender_full_name": "Eric Taucher",
        "timestamp": 1730412989
    },
    {
        "content": "<p>To answer the question: yes, encoding magma isomorphism as graph isomorphism is a fairly \"standard\" and \"solved\" problem. Mostly people talk about group isomorphism, of which magma isomorphism is of course a special case. (At least for this case, where the input is the multiplication table). There's a nice picture+proof here: <a href=\"https://www.cs.cmu.edu/~glmiller/Publications/Papers/Mi79.pdf\">https://www.cs.cmu.edu/~glmiller/Publications/Papers/Mi79.pdf</a></p>\n<p>The exact same approach works here with Nauty.</p>",
        "id": 479988902,
        "sender_full_name": "Alex Meiburg",
        "timestamp": 1730430644
    },
    {
        "content": "<p>The overhead is pretty minimal (~O(n) extra vertices), and conversely graph isomorphism can be recast as magma isomorphism (with O(1) overhead), so these really are very closely equivalent. And I think you will have a hard time finding something that does _better_ than Nauty on this encoding, even if you try to write a custom magma isomorphism checker. The encoding is that efficient and Nauty is that good.</p>",
        "id": 479989030,
        "sender_full_name": "Alex Meiburg",
        "timestamp": 1730430767
    },
    {
        "content": "<p><code>nauty</code> is really lovely and awesome, and I would <em>love</em> to see generic Lean bindings for it. It does a number of things, but one basic thing that could be read back into Lean and cheaply verified is to produce the isomorphism between two given graphs.</p>\n<p>It will also produce generators for the automorphism group of the graph. One could read that into Lean and cheaply verify that that group of permutations <em>injects</em> into the automorphism group of the graph. But for the fact that you've found all the automorphisms, you just have to trust nauty (i.e. it doesn't obviously help you construct that proof).</p>",
        "id": 480003052,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1730442076
    }
]