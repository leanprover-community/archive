[
    {
        "content": "<p>Okay, so, we obviously don't have a finite counterexample for all non-implications, but an interesting data-investigation tool along the lines of the equation explorer would be some kind of database of what pairs of equations have finite counterexamples, along with providing explicitly the finite counterexample.  I'm interested in such a database (potentially integrated with the equation explorer) in the hope of completing more of these (admittedly necessarily very large number of) statements.  </p>\n<p>I would like to contribute towards this goal but unfortunately there's not much I can do other than rather naive approaches of looking for particularly powerful counter-implications.  For instance, I could pick out an equation, then look for the non-implied equations that are highest on the implication graph and plug them into Mace4 to try to produce a counterexample for everything in that implication chain.  Does anyone have any partial data to put forth, or an idea on how to turn any data into a database?</p>",
        "id": 522862107,
        "sender_full_name": "Fox Room",
        "timestamp": 1749257158
    },
    {
        "content": "<p>We know exactly which implications have finite counterexamples: this is (the complement of) the finite implication graph.  The script extra_implications can be used to list all implications.  Running <code>lake exe extract_implications --finite-only --closure &gt; /tmp/implications.txt</code> in the top directory of the project gives a 22 million line file, with nonimplications written as <code>¬ (Equation1 → Equation2)</code>.  Without <code>--closure</code> the file is only half a million lines and is mostly the reduced graph, but it might not be complete (<a href=\"http://github.com/teorth/equational_theories#1245\">github.com/teorth/equational_theories#1245</a>).</p>",
        "id": 522880347,
        "sender_full_name": "Bruno Le Floch",
        "timestamp": 1749282587
    },
    {
        "content": "<blockquote>\n<p>Okay, so, we obviously don't have a finite counterexample for all non-implications</p>\n</blockquote>\n<p>I'm not sure I understand this, for all non-implications with a finite counter-example (except for the one unknown) we do have an explicit counter-example. It is not directly shown in the equation explorer, but you can find it by looking at 'Show proof'</p>",
        "id": 522887018,
        "sender_full_name": "Vlad Tsyrklevich",
        "timestamp": 1749291936
    },
    {
        "content": "<p>I just re-read this comment and noticed that I should have specified that for this to work you should be on the <code>Display the finite graph</code> view of the explorer</p>",
        "id": 522902135,
        "sender_full_name": "Vlad Tsyrklevich",
        "timestamp": 1749310152
    },
    {
        "content": "<p>Oh, huh?<br>\nHold on</p>",
        "id": 522902328,
        "sender_full_name": "Fox Room",
        "timestamp": 1749310370
    },
    {
        "content": "<p>Hm, I can't figure out how to find them.<br>\nI just get a list of implications. I know we know which HAVE a finite counterexample but I can't actually find the counterexamples!  If these are actually accessible, how do I get to them?</p>",
        "id": 522902475,
        "sender_full_name": "Fox Room",
        "timestamp": 1749310530
    },
    {
        "content": "<p>You click on show proof, and the steps in the proof will link you to where they are proven. One of these (the anti-implication arrow in particular) will be the counterexample.</p>",
        "id": 522902789,
        "sender_full_name": "Matthew Bolan",
        "timestamp": 1749310868
    },
    {
        "content": "<p>I just get a long string of numbers that are definitely not encoding a magma's multiplication table.</p>",
        "id": 522903518,
        "sender_full_name": "Fox Room",
        "timestamp": 1749311825
    },
    {
        "content": "<p>I may just not know how to read what I'm looking at, but it seems to me to just be equation numbers.</p>",
        "id": 522903563,
        "sender_full_name": "Fox Room",
        "timestamp": 1749311880
    },
    {
        "content": "<p>Well, the different files are laid out differently, but my guess is that you are looking at an implication falsified by a 2x2 magma, in which case if you scroll to the top of the file you'll find the corresponding magma.</p>",
        "id": 522903851,
        "sender_full_name": "Matthew Bolan",
        "timestamp": 1749312104
    },
    {
        "content": "<p>I can't find a single one laid out in that manner.</p>",
        "id": 522903920,
        "sender_full_name": "Fox Room",
        "timestamp": 1749312171
    },
    {
        "content": "<p>Which two laws are you currently looking at</p>",
        "id": 522903975,
        "sender_full_name": "Matthew Bolan",
        "timestamp": 1749312224
    },
    {
        "content": "<p>I just looked at commutativity (43) does not imply associativity (4512) but as I said, nothing I've randomly clicked on has any magma I can recognize as such.  This one at least has a polynomial which presumably can be translated into a magma in some manner I'm not familiar with.</p>",
        "id": 522904065,
        "sender_full_name": "Fox Room",
        "timestamp": 1749312338
    },
    {
        "content": "<p>Yes, this is saying that <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mi mathvariant=\"double-struck\">Z</mi><mi mathvariant=\"normal\">/</mi><mn>3</mn><mi mathvariant=\"double-struck\">Z</mi><mo separator=\"true\">,</mo><mo>⋄</mo><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(\\mathbb Z / 3 \\mathbb Z, \\diamond)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathbb\">Z</span><span class=\"mord\">/3</span><span class=\"mord mathbb\">Z</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">⋄</span><span class=\"mclose\">)</span></span></span></span> where <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mo>⋄</mo><mi>y</mi><mo>:</mo><mo>=</mo><msup><mi>x</mi><mn>2</mn></msup><mo>+</mo><msup><mi>y</mi><mn>2</mn></msup><mo>+</mo><mn>2</mn><mi>x</mi><mo>+</mo><mn>2</mn><mi>y</mi><mo>+</mo><mi>x</mi><mi>y</mi><mspace></mspace><mspace width=\"0.4444em\"/><mo stretchy=\"false\">(</mo><mrow><mi mathvariant=\"normal\">m</mi><mi mathvariant=\"normal\">o</mi><mi mathvariant=\"normal\">d</mi></mrow><mspace width=\"0.3333em\"/><mn>3</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">x \\diamond y := x^2 + y^2 + 2x + 2y + xy \\pmod 3</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4445em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">⋄</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">:=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8974em;vertical-align:-0.0833em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0085em;vertical-align:-0.1944em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7278em;vertical-align:-0.0833em;\"></span><span class=\"mord\">2</span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8389em;vertical-align:-0.1944em;\"></span><span class=\"mord\">2</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace allowbreak\"></span><span class=\"mspace\" style=\"margin-right:0.4444em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathrm\">mod</span></span></span><span class=\"mspace\" style=\"margin-right:0.3333em;\"></span><span class=\"mord\">3</span><span class=\"mclose\">)</span></span></span></span> is a counterexample.</p>",
        "id": 522904165,
        "sender_full_name": "Matthew Bolan",
        "timestamp": 1749312442
    },
    {
        "content": "<p>oh, okay, that's easy enough to construct.  Oh, and I've just figured out what you meant by the 2x2 ones.</p>",
        "id": 522904306,
        "sender_full_name": "Fox Room",
        "timestamp": 1749312614
    },
    {
        "content": "<p>So it seems like the data is, in fact, there, but it'd still be worthwhile to explicitly construct the magma in question in each case since this involves some nontrivial algebraic work</p>",
        "id": 522904365,
        "sender_full_name": "Fox Room",
        "timestamp": 1749312690
    },
    {
        "content": "<p>I envisioned it directly linking to the magma in finite magma explorer, actually</p>",
        "id": 522904392,
        "sender_full_name": "Fox Room",
        "timestamp": 1749312718
    },
    {
        "content": "<p>It would be worth it to have everything in the same format, currently there are maybe 4/5 different formats. The finite magma explorer sounds nice.</p>",
        "id": 522904467,
        "sender_full_name": "Matthew Bolan",
        "timestamp": 1749312836
    },
    {
        "content": "<p>I am tempted to just start manually collating a list, but considering I know there's about six million nonimplications there's no real point doing that.</p>",
        "id": 522904601,
        "sender_full_name": "Fox Room",
        "timestamp": 1749313014
    },
    {
        "content": "<p>Well, most of those are falsified by the same magmas. I don't expect you'll need more than a few thousand individual magmas.</p>",
        "id": 522904879,
        "sender_full_name": "Matthew Bolan",
        "timestamp": 1749313343
    },
    {
        "content": "<p>Oh, yeah, true, like I noted already.  I should just look for those \"heavy-hitting\" counterexamples.</p>",
        "id": 522905678,
        "sender_full_name": "Fox Room",
        "timestamp": 1749314347
    },
    {
        "content": "<p>It’ll probably just be the smallest ones given that they’re the most likely to both satisfy and not satisfy many laws at once</p>",
        "id": 522906402,
        "sender_full_name": "Vlad Tsyrklevich",
        "timestamp": 1749315186
    },
    {
        "content": "<p>What's the smallest number of finite magmas which you need to falsify every false implication? :-)</p>",
        "id": 522922235,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1749335546
    },
    {
        "content": "<p>The smallest \"separating set\" for the 4000-or-so equations?</p>",
        "id": 522922267,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1749335597
    },
    {
        "content": "<p>At most 1414: there are 1415 equations, up to equivalence relation, and you can separate each equation from an arbitrary number of non-implications with a single finite magma. (Take the counter examples that A-/-&gt;B1, A-/-&gt;B2, etc. and take their direct product. This still obeys A and does not obey any of the Bi.)</p>",
        "id": 522979489,
        "sender_full_name": "Alex Meiburg",
        "timestamp": 1749391850
    },
    {
        "content": "<p>That's cheating though, since you still have to find the factors<br>\nAlso that seems like a basic fact I really should know but didn't.  Proof?</p>",
        "id": 522986416,
        "sender_full_name": "Fox Room",
        "timestamp": 1749399414
    },
    {
        "content": "<p>I don't know what you mean by cheating. It would be very easy to construct these 1414 counterexamples from what is already in the equational_theories repo.</p>",
        "id": 523127366,
        "sender_full_name": "Alex Meiburg",
        "timestamp": 1749486188
    },
    {
        "content": "<p>For each A, take each Bi that it doesn't imply; there is some counterexample in the repo that shows A -/-&gt; Bi. Then take the direct product of these.</p>",
        "id": 523127483,
        "sender_full_name": "Alex Meiburg",
        "timestamp": 1749486236
    },
    {
        "content": "<p>(This could even be verified efficiently in Lean: not by providing the explicit multiplication table, but by describing abstractly \"these k-tuples that operate coordinate-wise according to these tables\", and then studying that.)</p>",
        "id": 523127605,
        "sender_full_name": "Alex Meiburg",
        "timestamp": 1749486280
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"448405\">Alex Meiburg</span> <a href=\"#narrow/channel/458659-Equational/topic/Constructing.20a.20database.20of.20finite.20counterexamples/near/523127366\">said</a>:</p>\n<blockquote>\n<p>I don't know what you mean by cheating. It would be very easy to construct these 1414 counterexamples from what is already in the equational_theories repo.</p>\n</blockquote>\n<p>Well I suppose it depends on your motivation for considering the \"smallest separating set\", but my motivation for considering 'heavy hitting counterexamples' was for ease of information and having to explicitly calculate less, so if you have to calculate two factors it doesn't really matter if they can be combined into a single model.  But it's true that it does technically make the list of counterexamples smaller, so if that's all you cared about then sure.</p>",
        "id": 523131855,
        "sender_full_name": "Fox Room",
        "timestamp": 1749487749
    },
    {
        "content": "<p>In any case, I assume it's a well known result, but it isn't obvious to me as a non-mathematician that a product magma preserves all 1415 equations, that's what I meant by proof.</p>",
        "id": 523132704,
        "sender_full_name": "Fox Room",
        "timestamp": 1749487891
    },
    {
        "content": "<p>I agree that it's not a construction that gives small, or illuminating, proofs. I was just thinking about Kevin Buzzard's question. :)</p>\n<p>The fact is not hard to prove: if M1 and M2 satisfy an equation E, then their direct product also satisfies E. This is because everything (the magma operation, and the definition of equality) goes compnent-wise.</p>\n<p>And, conversely, if M1 does not satisfy an equation E, then (regardless of whether M2 does or not) the direct product of M1 and M2 doesn't satisfy E either. Simply take any assignment of values x, y, z from M1 that fail to obey E, and an arbitrary element t from M2, and check the equation on the pairs (x,t), (y,t), (z,t). If the equation held, then it would also hold on the first coordinate, which we know it doesn't.</p>\n<p>(This requires M2 to be non-empty; obviously if it is empty, then the direct product is empty, and it obeys all equations.)</p>",
        "id": 523135682,
        "sender_full_name": "Alex Meiburg",
        "timestamp": 1749489019
    },
    {
        "content": "<p>Oh, right, duh, because we're talking specifically about equational laws so there's no first order existential quantification nonsense.  Yes, that is actually somewhat obvious, I'm just slow.</p>",
        "id": 523136009,
        "sender_full_name": "Fox Room",
        "timestamp": 1749489128
    }
]