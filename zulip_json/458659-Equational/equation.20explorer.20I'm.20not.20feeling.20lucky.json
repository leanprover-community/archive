[
    {
        "content": "<p>I was showing equational theories to a friend and noticed that the \"I'm feeling lucky\" button on <a href=\"https://teorth.github.io/equational_theories/implications/\">https://teorth.github.io/equational_theories/implications/</a> didn't seem to do anything. Is this a known issue? Can anyone else reproduce? I thought there were two questions left?</p>",
        "id": 482815207,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1731803994
    },
    {
        "content": "<p>I think there is only one implication left from the original batch. Could be a result of that.</p>",
        "id": 482817814,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1731806793
    },
    {
        "content": "<p>Actually I can narrow it down a bit further. The equation explorer is likely getting slightly incorrect data at this function:</p>\n<div class=\"codehilite\" data-code-language=\"JavaScript\"><pre><span></span><code><span class=\"kd\">function</span><span class=\"w\"> </span><span class=\"nx\">findRandom8</span><span class=\"p\">(</span><span class=\"nx\">implications</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">  </span><span class=\"c1\">// Find all coordinates with value 8</span>\n<span class=\"w\">  </span><span class=\"kd\">const</span><span class=\"w\"> </span><span class=\"nx\">eights</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"p\">[];</span>\n\n<span class=\"w\">  </span><span class=\"k\">for</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"nx\">i</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mf\">0</span><span class=\"p\">;</span><span class=\"w\"> </span><span class=\"nx\">i</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"w\"> </span><span class=\"nx\">implications</span><span class=\"p\">.</span><span class=\"nx\">length</span><span class=\"p\">;</span><span class=\"w\"> </span><span class=\"nx\">i</span><span class=\"o\">++</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">    </span><span class=\"k\">for</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"nx\">j</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mf\">0</span><span class=\"p\">;</span><span class=\"w\"> </span><span class=\"nx\">j</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"w\"> </span><span class=\"nx\">implications</span><span class=\"p\">[</span><span class=\"nx\">i</span><span class=\"p\">].</span><span class=\"nx\">length</span><span class=\"p\">;</span><span class=\"w\"> </span><span class=\"nx\">j</span><span class=\"o\">++</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">      </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"nx\">implications</span><span class=\"p\">[</span><span class=\"nx\">i</span><span class=\"p\">][</span><span class=\"nx\">j</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"o\">===</span><span class=\"w\"> </span><span class=\"s2\">\"unknown\"</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">        </span><span class=\"nx\">eights</span><span class=\"p\">.</span><span class=\"nx\">push</span><span class=\"p\">([</span><span class=\"nx\">i</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"nx\">j</span><span class=\"p\">]);</span>\n<span class=\"w\">      </span><span class=\"p\">}</span>\n<span class=\"w\">    </span><span class=\"p\">}</span>\n<span class=\"w\">  </span><span class=\"p\">}</span>\n\n<span class=\"w\">  </span><span class=\"c1\">// If no 8s found, return null</span>\n<span class=\"w\">  </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"nx\">eights</span><span class=\"p\">.</span><span class=\"nx\">length</span><span class=\"w\"> </span><span class=\"o\">===</span><span class=\"w\"> </span><span class=\"mf\">0</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">    </span><span class=\"k\">return</span><span class=\"w\"> </span><span class=\"kc\">null</span><span class=\"p\">;</span>\n<span class=\"w\">  </span><span class=\"p\">}</span>\n\n<span class=\"w\">  </span><span class=\"c1\">// Pick a random coordinate from the found 8s</span>\n<span class=\"w\">  </span><span class=\"kd\">const</span><span class=\"w\"> </span><span class=\"nx\">randomIndex</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"nb\">Math</span><span class=\"p\">.</span><span class=\"nx\">floor</span><span class=\"p\">(</span><span class=\"nb\">Math</span><span class=\"p\">.</span><span class=\"nx\">random</span><span class=\"p\">()</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"w\"> </span><span class=\"nx\">eights</span><span class=\"p\">.</span><span class=\"nx\">length</span><span class=\"p\">);</span>\n<span class=\"w\">  </span><span class=\"k\">return</span><span class=\"w\"> </span><span class=\"nx\">eights</span><span class=\"p\">[</span><span class=\"nx\">randomIndex</span><span class=\"p\">];</span>\n<span class=\"p\">}</span>\n</code></pre></div>\n<p>If I had to guess, it's  an off by one error that is triggered because there is only one implication left</p>",
        "id": 482818557,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1731807543
    },
    {
        "content": "<p>Hmm, when I inspect it locally it looks like the implications array has the numerical values, not the string values, so === \"unknown\" is never going to work.  If I override it to be === 8, I get more sensible eights entries, and then go to either 1729-&gt;817 or  1898-&gt;2644 for lean.</p>\n<p>Maybe a side effect of the recent finite extensions to the explorer left implications in a different state than this function was expecting.</p>",
        "id": 482820814,
        "sender_full_name": "Douglas McNeil",
        "timestamp": 1731809920
    },
    {
        "content": "<p>CC: <span class=\"user-mention\" data-user-id=\"761203\">@Vlad Tsyrklevich</span></p>",
        "id": 482843163,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1731832518
    },
    {
        "content": "<p>I also wasn't sure whether I expected it to jump to something whose status was unknown, or more generally something whose proof hasn't been formalised yet</p>",
        "id": 482845509,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1731834658
    },
    {
        "content": "<p>Is it worth keeping now that there's 1 unknown left? I can investigate fixing it later, but maybe it has also passed the point where it makes sense</p>",
        "id": 482857322,
        "sender_full_name": "Vlad Tsyrklevich",
        "timestamp": 1731845866
    },
    {
        "content": "<p>I only wanted to use it to find out what the unknown question was because it's easier than reading 10000 messages in this channel</p>",
        "id": 482859948,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1731847957
    },
    {
        "content": "<p>Yeah it's maybe not clear that the way to find that is to 1) click \"Hide fully-solved equations\" and 2) unclick \"Treat conjectures as unknown\"</p>",
        "id": 482860541,
        "sender_full_name": "Vlad Tsyrklevich",
        "timestamp": 1731848503
    },
    {
        "content": "<p>Douglas had the correct root cause, this was broken by me in dc57f2db8d10c0dbc8c4fb4beea01d3589ceff3a when I sped up equation explorer loads by using integer values instead of strings in that array. Fixed in <a href=\"https://github.com/teorth/equational_theories/pull/842\">equational#842</a></p>",
        "id": 482885013,
        "sender_full_name": "Vlad Tsyrklevich",
        "timestamp": 1731868060
    },
    {
        "content": "<p>I noticed this: <br>\n<a href=\"/user_uploads/3121/8YTb-fOFggDNxyN5sCsyO_tt/image.png\">image.png</a><br>\nWhen looking at the <code>randomProof</code> function but I'm not sure where it is being called from.</p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/8YTb-fOFggDNxyN5sCsyO_tt/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"942x133\" src=\"/user_uploads/thumbnail/3121/8YTb-fOFggDNxyN5sCsyO_tt/image.png/840x560.webp\"></a></div>",
        "id": 562880560,
        "sender_full_name": "Emmanuel Osalotioman Osazuwa",
        "timestamp": 1765350722
    },
    {
        "content": "<p>Based on this <a class=\"message-link\" href=\"/#narrow/channel/458659-Equational/topic/Writing.20the.20paper/near/562804920\">#Equational &gt; Writing the paper @ ðŸ’¬</a> , I was thinking of employing the pop-up in the equation explorer to display a message like: <code>No more implications left to prove</code></p>",
        "id": 562880960,
        "sender_full_name": "Emmanuel Osalotioman Osazuwa",
        "timestamp": 1765350869
    },
    {
        "content": "<p>Since randomProof is also being called here in <code>im-feeling-lucky.html</code>, I think it would make more sense to use the default javascript <code>alert</code>.<br>\nLike this:</p>\n<div class=\"codehilite\" data-code-language=\"JavaScript\"><pre><span></span><code><span class=\"k\">if</span><span class=\"p\">(</span><span class=\"nx\">idx</span><span class=\"w\"> </span><span class=\"o\">!=</span><span class=\"w\"> </span><span class=\"kc\">null</span><span class=\"p\">){</span>\n<span class=\"w\">    </span><span class=\"nb\">window</span><span class=\"p\">.</span><span class=\"nx\">location</span><span class=\"p\">.</span><span class=\"nx\">href</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"nx\">gen_proof_url</span><span class=\"p\">(</span><span class=\"nx\">idx</span><span class=\"p\">[</span><span class=\"mf\">0</span><span class=\"p\">],</span><span class=\"w\"> </span><span class=\"nx\">idx</span><span class=\"p\">[</span><span class=\"mf\">1</span><span class=\"p\">]);</span>\n<span class=\"p\">}</span><span class=\"k\">else</span><span class=\"p\">{</span>\n<span class=\"w\">    </span><span class=\"nx\">alert</span><span class=\"p\">(</span><span class=\"s2\">\"No more implications left to prove\"</span><span class=\"p\">);</span>\n<span class=\"p\">}</span>\n</code></pre></div>\n<p>originally:</p>\n<div class=\"codehilite\" data-code-language=\"JavaScript\"><pre><span></span><code><span class=\"nb\">window</span><span class=\"p\">.</span><span class=\"nx\">location</span><span class=\"p\">.</span><span class=\"nx\">href</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"nx\">gen_proof_url</span><span class=\"p\">(</span><span class=\"nx\">idx</span><span class=\"p\">[</span><span class=\"mf\">0</span><span class=\"p\">],</span><span class=\"w\"> </span><span class=\"nx\">idx</span><span class=\"p\">[</span><span class=\"mf\">1</span><span class=\"p\">]);</span>\n</code></pre></div>\n<p>which errors out when idx is null.</p>",
        "id": 562881549,
        "sender_full_name": "Emmanuel Osalotioman Osazuwa",
        "timestamp": 1765351120
    },
    {
        "content": "<p><a href=\"/user_uploads/3121/YomayEnkL49W61g-rCGBPBqz/Screencast-From-2025-12-10-08-20-07.mp4\">Screencast From 2025-12-10 08-20-07.mp4</a></p>\n<div class=\"message_inline_image message_inline_video\"><a href=\"/user_uploads/3121/YomayEnkL49W61g-rCGBPBqz/Screencast-From-2025-12-10-08-20-07.mp4\" title=\"Screencast From 2025-12-10 08-20-07.mp4\"><video preload=\"metadata\" src=\"/user_uploads/3121/YomayEnkL49W61g-rCGBPBqz/Screencast-From-2025-12-10-08-20-07.mp4\"></video></a></div>",
        "id": 562881891,
        "sender_full_name": "Emmanuel Osalotioman Osazuwa",
        "timestamp": 1765351251
    },
    {
        "content": "<p>It does not look nice this way though, I'll just use the explorer's pop-up, and try to use it in such a way that it does not affect someone being redirected to <code>im-feeling-lucky.html</code></p>",
        "id": 562882170,
        "sender_full_name": "Emmanuel Osalotioman Osazuwa",
        "timestamp": 1765351355
    },
    {
        "content": "<p>Using the pop up in the explorer:</p>\n<p><a href=\"/user_uploads/3121/EqiPzYDd5UXT7ZP9riw22flh/Screencast-From-2025-12-10-08-36-38.mp4\">Screencast From 2025-12-10 08-36-38.mp4</a></p>\n<div class=\"message_inline_image message_inline_video\"><a href=\"/user_uploads/3121/EqiPzYDd5UXT7ZP9riw22flh/Screencast-From-2025-12-10-08-36-38.mp4\" title=\"Screencast From 2025-12-10 08-36-38.mp4\"><video preload=\"metadata\" src=\"/user_uploads/3121/EqiPzYDd5UXT7ZP9riw22flh/Screencast-From-2025-12-10-08-36-38.mp4\"></video></a></div>",
        "id": 562885452,
        "sender_full_name": "Emmanuel Osalotioman Osazuwa",
        "timestamp": 1765352279
    },
    {
        "content": "<p><a href=\"https://github.com/teorth/equational_theories/pull/1413\">https://github.com/teorth/equational_theories/pull/1413</a></p>",
        "id": 562886539,
        "sender_full_name": "Emmanuel Osalotioman Osazuwa",
        "timestamp": 1765352684
    }
]