[
    {
        "content": "<p>I am testing prover9 from karaml with Python (and some other options for Python). I'll be sharing the results.  <br>\n<a href=\"https://colab.research.google.com/drive/1HcUVydoW3RJerC4uD9K5mgrGKU_uDEiw\">https://colab.research.google.com/drive/1HcUVydoW3RJerC4uD9K5mgrGKU_uDEiw</a></p>",
        "id": 480308767,
        "sender_full_name": "Michael Bucko",
        "timestamp": 1730641756
    },
    {
        "content": "<p>My prover9 script is as follows:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">ASSUMPTIONS</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"s2\">\"\"\"</span>\n<span class=\"s2\">all x all y all z (x = x * ((y * z) * (x * z))).</span>\n<span class=\"s2\">\"\"\"</span>\n\n<span class=\"n\">GOAL</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"s2\">\"\"\"</span>\n<span class=\"s2\">exists x exists y (x != x * (x * (x * (y * x)))).</span>\n<span class=\"s2\">\"\"\"</span>\n\n<span class=\"n\">Prover9</span><span class=\"bp\">.</span><span class=\"n\">prove</span><span class=\"o\">(</span><span class=\"n\">ASSUMPTIONS</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">GOAL</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">timeout</span><span class=\"bp\">=</span><span class=\"mi\">5</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>and the colab link is here:<br>\n<a href=\"https://colab.research.google.com/drive/1lJan8mmeEFHiqVB8KGPD8YOJ4gp8GHe_#scrollTo=rc0vTmtgIRnC\">https://colab.research.google.com/drive/1lJan8mmeEFHiqVB8KGPD8YOJ4gp8GHe_#scrollTo=rc0vTmtgIRnC</a></p>",
        "id": 480310710,
        "sender_full_name": "Michael Bucko",
        "timestamp": 1730643512
    },
    {
        "content": "<p>Apparently (I didn't know that), Prover9 can work in colab, which is great news. Not sure about the pip package.</p>\n<p>Also, someone made <a href=\"https://github.com/philzook58/pyvampire\">https://github.com/philzook58/pyvampire</a>, but I haven't tested it yet.</p>",
        "id": 480310982,
        "sender_full_name": "Michael Bucko",
        "timestamp": 1730643756
    },
    {
        "content": "<p>Ok, just found <a href=\"https://colab.research.google.com/github/philzook58/philzook58.github.io/blob/master/pynb/2024-03-24-knuckledrag2.ipynb\">https://colab.research.google.com/github/philzook58/philzook58.github.io/blob/master/pynb/2024-03-24-knuckledrag2.ipynb</a> from <span class=\"user-mention\" data-user-id=\"255566\">@Philip Zucker</span> </p>\n<p>That looks promising.</p>",
        "id": 480311394,
        "sender_full_name": "Michael Bucko",
        "timestamp": 1730644119
    },
    {
        "content": "<p>An example (using <span class=\"user-mention\" data-user-id=\"255566\">@Philip Zucker</span> 's script) for 854N413.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">#</span><span class=\"w\"> </span><span class=\"n\">Declare</span><span class=\"w\"> </span><span class=\"n\">variables</span><span class=\"w\"> </span><span class=\"n\">and</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">binary</span><span class=\"w\"> </span><span class=\"n\">operation</span><span class=\"w\"> </span><span class=\"bp\">*</span>\n<span class=\"n\">X</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Y</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Z</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Vars</span><span class=\"o\">(</span><span class=\"s2\">\"X Y Z\"</span><span class=\"o\">)</span>\n<span class=\"n\">star</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Function</span><span class=\"o\">(</span><span class=\"s2\">\"*\"</span><span class=\"o\">)</span><span class=\"w\">  </span><span class=\"bp\">#</span><span class=\"w\"> </span><span class=\"n\">Using</span><span class=\"w\"> </span><span class=\"bp\">'*'</span><span class=\"w\"> </span><span class=\"n\">as</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">placeholder</span><span class=\"w\"> </span><span class=\"n\">for</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">operation</span>\n\n<span class=\"bp\">#</span><span class=\"w\"> </span><span class=\"n\">Initialize</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">proof</span><span class=\"w\"> </span><span class=\"n\">database</span>\n<span class=\"n\">db</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">ProofDB</span><span class=\"o\">()</span>\n\n<span class=\"n\">Equation854</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">db</span><span class=\"bp\">.</span><span class=\"k\">assume</span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">==</span><span class=\"w\"> </span><span class=\"n\">star</span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">star</span><span class=\"o\">(</span><span class=\"n\">star</span><span class=\"o\">(</span><span class=\"n\">Y</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Z</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">star</span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Z</span><span class=\"o\">))))</span>\n<span class=\"n\">print</span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"s2\">\"{Equation854=}\"</span><span class=\"o\">)</span>\n\n<span class=\"n\">Equation413</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">==</span><span class=\"w\"> </span><span class=\"n\">star</span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">star</span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">star</span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">star</span><span class=\"o\">(</span><span class=\"n\">Y</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">))))</span>\n\n<span class=\"n\">try</span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">result</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">db</span><span class=\"bp\">.</span><span class=\"n\">infer</span><span class=\"o\">([</span><span class=\"n\">Equation854</span><span class=\"o\">],</span><span class=\"w\"> </span><span class=\"n\">Equation413</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"n\">print</span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"s2\">\"Inference successful: {result=}\"</span><span class=\"o\">)</span>\n<span class=\"n\">except</span><span class=\"w\"> </span><span class=\"n\">Exception</span><span class=\"w\"> </span><span class=\"n\">as</span><span class=\"w\"> </span><span class=\"n\">e</span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">print</span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"s2\">\"Inference failed: {e}\"</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>but getting </p>\n<p><code>Inference failed: ('Proof failed \\n[Theorem([] |- [*(X, *(*(Y, Z), *(X, Z))) = X])]\\n----------------(eprover)\\n[] |- [*(X, *(X, *(X, *(Y, X)))) = X]\\n', '')</code></p>\n<p>Has anyone used this version of packaged eprover in Python?</p>",
        "id": 480312723,
        "sender_full_name": "Michael Bucko",
        "timestamp": 1730645349
    },
    {
        "content": "<p>The current version is here. <a href=\"https://github.com/philzook58/knuckledragger\">https://github.com/philzook58/knuckledragger</a> The <a href=\"http://install.sh\">install.sh</a> script just pulls eprover's repo (amongst others) and builds it locally. <code>kdrag.solvers</code> has various solvers that pretty print out of z3's ast to eprover, vampire, twee, and some others. I reverted back to piggy backing on z3's ast since that post was written. <a href=\"https://www.philipzucker.com/state_o_knuck/\">https://www.philipzucker.com/state_o_knuck/</a> I'm still adding solvers, figuring out what I want this thing to be and how to do it. I lost speed at a certain point because basic analysis proofs were so painful and have reverted to tinkering mode.</p>",
        "id": 480314531,
        "sender_full_name": "Philip Zucker",
        "timestamp": 1730646945
    },
    {
        "content": "<p>The packaged version of eprover of that post was built using cosmopolitan. Maybe that's a good way to go <a href=\"https://github.com/jart/cosmopolitan\">https://github.com/jart/cosmopolitan</a> . It didn't take that many changes to the build scripts</p>",
        "id": 480314599,
        "sender_full_name": "Philip Zucker",
        "timestamp": 1730646999
    },
    {
        "content": "<p>I noticed that vampire added a cosmopolitan branch after I wrote that post<br>\n<a href=\"https://github.com/vprover/vampire/wiki/Cosmopolitan-Build\">https://github.com/vprover/vampire/wiki/Cosmopolitan-Build</a></p>",
        "id": 480314730,
        "sender_full_name": "Philip Zucker",
        "timestamp": 1730647095
    },
    {
        "content": "<p>The changes seem very minimal <a href=\"https://github.com/vprover/vampire/commit/cf529bc421f6635050d1fda1bac4c3fa1870376e\">https://github.com/vprover/vampire/commit/cf529bc421f6635050d1fda1bac4c3fa1870376e</a></p>",
        "id": 480314864,
        "sender_full_name": "Philip Zucker",
        "timestamp": 1730647206
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"255566\">@Philip Zucker</span>  Love your approach to this problem.</p>\n<p>Refactored one of my z3 scripts:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">class</span><span class=\"w\"> </span><span class=\"n\">OperationTableSolver</span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"bp\">__</span><span class=\"n\">init__</span><span class=\"o\">(</span><span class=\"n\">self</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">size</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">int</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">initial_table</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"o\">[</span><span class=\"n\">List</span><span class=\"o\">[</span><span class=\"n\">int</span><span class=\"o\">]]):</span>\n<span class=\"w\">        </span><span class=\"n\">self</span><span class=\"bp\">.</span><span class=\"n\">size</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">size</span>\n<span class=\"w\">        </span><span class=\"n\">self</span><span class=\"bp\">.</span><span class=\"n\">initial_table</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">initial_table</span>\n<span class=\"w\">        </span><span class=\"n\">self</span><span class=\"bp\">.</span><span class=\"n\">proofs</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"o\">[</span><span class=\"n\">Proof</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">[]</span>\n<span class=\"w\">        </span><span class=\"n\">self</span><span class=\"bp\">.</span><span class=\"n\">solver</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Solver</span><span class=\"o\">()</span>\n<span class=\"w\">        </span><span class=\"n\">self</span><span class=\"bp\">.</span><span class=\"n\">op_table_vars</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">[[</span><span class=\"n\">Int</span><span class=\"o\">(</span><span class=\"n\">f'op_</span><span class=\"o\">{</span><span class=\"n\">i</span><span class=\"o\">}</span><span class=\"bp\">_</span><span class=\"o\">{</span><span class=\"n\">j</span><span class=\"o\">}</span><span class=\"bp\">'</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">for</span><span class=\"w\"> </span><span class=\"n\">j</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">range</span><span class=\"o\">(</span><span class=\"n\">size</span><span class=\"o\">)]</span><span class=\"w\"> </span><span class=\"n\">for</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">range</span><span class=\"o\">(</span><span class=\"n\">size</span><span class=\"o\">)]</span>\n<span class=\"w\">        </span><span class=\"n\">self</span><span class=\"bp\">.</span><span class=\"n\">op</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Function</span><span class=\"o\">(</span><span class=\"bp\">'</span><span class=\"n\">op'</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">IntSort</span><span class=\"o\">(),</span><span class=\"w\"> </span><span class=\"n\">IntSort</span><span class=\"o\">(),</span><span class=\"w\"> </span><span class=\"n\">IntSort</span><span class=\"o\">())</span>\n<span class=\"w\">        </span><span class=\"n\">self</span><span class=\"bp\">.</span><span class=\"n\">final_table</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Optional</span><span class=\"o\">[</span><span class=\"n\">List</span><span class=\"o\">[</span><span class=\"n\">List</span><span class=\"o\">[</span><span class=\"n\">int</span><span class=\"o\">]]]</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">None</span>\n</code></pre></div>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">#</span><span class=\"w\"> </span><span class=\"n\">Define</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">Proof</span><span class=\"w\"> </span><span class=\"n\">dataclass</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">represent</span><span class=\"w\"> </span><span class=\"n\">logical</span><span class=\"w\"> </span><span class=\"n\">proofs</span>\n<span class=\"bp\">@</span><span class=\"n\">dataclass</span>\n<span class=\"kn\">class</span><span class=\"w\"> </span><span class=\"n\">Proof</span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">thm</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">BoolRef</span>\n<span class=\"w\">    </span><span class=\"n\">reasons</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"o\">[</span><span class=\"s2\">\"Proof\"</span><span class=\"o\">]</span>\n\n<span class=\"bp\">#</span><span class=\"w\"> </span><span class=\"n\">Functions</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">create</span><span class=\"w\"> </span><span class=\"n\">axioms</span><span class=\"w\"> </span><span class=\"n\">and</span><span class=\"w\"> </span><span class=\"n\">lemmas</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"kn\">axiom</span><span class=\"o\">(</span><span class=\"n\">thm</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">BoolRef</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-&gt;</span><span class=\"w\"> </span><span class=\"n\">Proof</span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"s2\">\"\"\"Create an axiom with no reasons.\"\"\"</span>\n<span class=\"w\">    </span><span class=\"n\">return</span><span class=\"w\"> </span><span class=\"n\">Proof</span><span class=\"o\">(</span><span class=\"n\">thm</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"o\">[])</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"kn\">lemma</span><span class=\"o\">(</span><span class=\"n\">thm</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">BoolRef</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"o\">[</span><span class=\"n\">Proof</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">[])</span><span class=\"w\"> </span><span class=\"bp\">-&gt;</span><span class=\"w\"> </span><span class=\"n\">Proof</span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"s2\">\"\"\"</span>\n<span class=\"s2\">    Create a lemma derived from existing proofs.</span>\n\n<span class=\"s2\">    Args:</span>\n<span class=\"s2\">        thm (BoolRef): The theorem to prove.</span>\n<span class=\"s2\">        by (List[Proof]): List of proofs that justify this lemma.</span>\n\n<span class=\"s2\">    Returns:</span>\n<span class=\"s2\">        Proof: The resulting proof object.</span>\n<span class=\"s2\">    \"\"\"</span>\n<span class=\"w\">    </span><span class=\"n\">assert</span><span class=\"w\"> </span><span class=\"n\">all</span><span class=\"o\">(</span><span class=\"n\">isinstance</span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Proof</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">for</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"s2\">\"All reasons must be Proof instances.\"</span>\n<span class=\"w\">    </span><span class=\"bp\">#</span><span class=\"w\"> </span><span class=\"n\">Here</span><span class=\"w\"> </span><span class=\"n\">you</span><span class=\"w\"> </span><span class=\"n\">can</span><span class=\"w\"> </span><span class=\"n\">integrate</span><span class=\"w\"> </span><span class=\"n\">additional</span><span class=\"w\"> </span><span class=\"n\">logic</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">handle</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">proof</span><span class=\"w\"> </span><span class=\"n\">steps</span><span class=\"w\"> </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">needed</span>\n<span class=\"w\">    </span><span class=\"n\">return</span><span class=\"w\"> </span><span class=\"n\">Proof</span><span class=\"o\">(</span><span class=\"n\">thm</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>Used the same proof dataclass that you are using in the WIP tutorial (thank you for that!)</p>\n<p>Here's the colab:<br>\n<a href=\"https://colab.research.google.com/drive/17ZJSD31HIfOsQJnDD0qA3XwVGw3xcuiy#scrollTo=swxilZgQxgM0\">https://colab.research.google.com/drive/17ZJSD31HIfOsQJnDD0qA3XwVGw3xcuiy#scrollTo=swxilZgQxgM0</a></p>",
        "id": 480319468,
        "sender_full_name": "Michael Bucko",
        "timestamp": 1730651132
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 480319576,
        "sender_full_name": "Michael Bucko",
        "timestamp": 1730651193
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"255566\">Philip Zucker</span> <a href=\"#narrow/channel/458659-Equational/topic/Testing.20karaml.20w.2F.20p9.2C.20packaged.20eprover/near/480314599\">schrieb</a>:</p>\n<blockquote>\n<p>The packaged version of eprover of that post was built using cosmopolitan. Maybe that's a good way to go <a href=\"https://github.com/jart/cosmopolitan\">https://github.com/jart/cosmopolitan</a> . It didn't take that many changes to the build scripts</p>\n</blockquote>\n<p>Cosmopolitan seems great. Didn't know about the cosmopolitan branch. Will try it out too.</p>",
        "id": 480322883,
        "sender_full_name": "Michael Bucko",
        "timestamp": 1730653594
    },
    {
        "content": "<p>Thank you for pointing that out (the cosmopolitan branch). It worked perfectly for me.</p>",
        "id": 480431022,
        "sender_full_name": "Michael Bucko",
        "timestamp": 1730722630
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"672170\">Michael Bucko</span> has marked this topic as resolved.</p>",
        "id": 480433075,
        "sender_full_name": "Notification Bot",
        "timestamp": 1730723365
    }
]