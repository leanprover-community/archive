[
    {
        "content": "<p>I want to run some automated theorem provers at a larger scale, but running it on all unknown implications is both impractical and a waste of resources - as implications are proven/refuted, they will imply many other currently unknown ones.<br>\nOptimally I think we want some API, which interactively gives an unknown implication, and then receives one of true, false or unknown, and then updates the closure based on that and again gives an new unknown implication, and so on and so forth. Perhaps it could generate a file with <code>conjecture</code>s at the end.<br>\nThis raises a technological problem: how do we implement this kind of interactive API?<br>\nThis also raises an algorithmic problem, of what this API will do. It could run an incremental dynamic transitive closure algorithm (there are algorithms with <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">n</span><span class=\"mclose\">)</span></span></span></span> amortized time per addition, which is great for our <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi><mo>≈</mo><mn>5000</mn></mrow><annotation encoding=\"application/x-tex\">n \\approx 5000</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4831em;\"></span><span class=\"mord mathnormal\">n</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">≈</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">5000</span></span></span></span>, compared to the time it will likely take to decide an implication), but I'm really not sure how one finds the \"best\" implication to consider. What measure should that even use?</p>",
        "id": 474178112,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1727839102
    },
    {
        "content": "<p>One quick and dirty solution is to prune the equation list only every N implications tested for some intermediate value of N, eg N=1000.  While the birthday paradox will mean that some redundant implications will be proven this way, the percentage of redundancies is quite small and not worth overoptimizing. It will help to have the outstanding implications sorted in a canonical way, eg lexicographic ordering, so that when one resumes testing after each reduction of the outstanding implications one can quickly recover one’s place in the new list of implications.</p>",
        "id": 474185860,
        "sender_full_name": "Terence Tao",
        "timestamp": 1727842235
    },
    {
        "content": "<p>That would mean only taking advantage of transitivity incidentally, not intentionally choosing implications which use it, right?</p>",
        "id": 474188268,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1727842970
    },
    {
        "content": "<p>Well, the implications that would transitively imply a lot of other implications are likely to also be the ones that are hardest to prove, so focusing on them may actually be the incorrect strategy since your automated theorem prover will presumably take a lot more time to solve them (or fail to do so after such a long time).   So it's not obvious to me that there is a surefire way to optimize.  </p>\n<p>One could take an empirical approach: first sample some random number of implications, say 1000 of the outstanding implications, run each one through your automated theorem prover and record the success rate and run time, and also record how many further implications each of the 1000 implications yield.  Then some simple math would lead to a prediction of what type of implication yields the biggest expected \"payoff\", and then one could focus subsequent searches on that \"demographic\" of implication first.  [One could be more advanced and use neural nets instead of \"simple math\" to do some machine learning here, but this approach could consume more CPU than it saves.]</p>",
        "id": 474191203,
        "sender_full_name": "Terence Tao",
        "timestamp": 1727844425
    },
    {
        "content": "<p>Such an empirical approach can also inform which automated theorem prover you want to try first (or what timeout parameters you want to assign to the ATP).</p>",
        "id": 474191799,
        "sender_full_name": "Terence Tao",
        "timestamp": 1727844836
    },
    {
        "content": "<p>Running vampire on 1000 implications with a timeout of 0.1 seconds, it proved 495 of them, refuted 218, and didn't manage the other 287, in about a minute. I'll try to run it with a larger timeout (on the same problemset) and see how much that improves, and then I'll compute what each yields by transitivity</p>",
        "id": 474195024,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1727846782
    },
    {
        "content": "<p>Well, using 24x time, it managed to prove 1 more implication and disprove 2 more implications</p>",
        "id": 474197489,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1727848372
    },
    {
        "content": "<p>Perhaps moving in the other direction (shortening the timeout) is actually better?  0.1 seconds x 3 million implications is like 83 hours, though presumably implementing transitivity reduction every so often could chip away at that.</p>",
        "id": 474197568,
        "sender_full_name": "Terence Tao",
        "timestamp": 1727848441
    },
    {
        "content": "<p>Presumably the optimal strategy is some staggered approach where one first sets the timeout low to cut down the number of outstanding implications by a significant factor, then raises the timeout and starts again, though the math of optimization becomes quite complex and it may be better to work with rules of thumb and gut feeling after some point</p>",
        "id": 474197864,
        "sender_full_name": "Terence Tao",
        "timestamp": 1727848610
    },
    {
        "content": "<p>Something interesting is that when running the prover in refutation mode it managed to refute a lot more implications, 428, although it took more time</p>",
        "id": 474199724,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1727849262
    },
    {
        "content": "<p>By the way, the open implications whose converse is already proven true are particularly high yield because if proven true they reduce the number of laws up to equivalence by one and potentially remove thousands of implications from the outstanding list. It might be worth brute forcing over those first (disabling refutations as these would not be high yield).  EDIT: <a href=\"https://github.com/teorth/equational_theories/pull/188\">equational#188</a></p>",
        "id": 474200915,
        "sender_full_name": "Terence Tao",
        "timestamp": 1727849670
    },
    {
        "content": "<p>1000-495-428=77 is more than a 10x reduction, which would be fantastic</p>",
        "id": 474201536,
        "sender_full_name": "Terence Tao",
        "timestamp": 1727849882
    },
    {
        "content": "<p>Before running this in a large scale it'll probably be good to create a custom schedule for vampire for these kinds of problems</p>",
        "id": 474203438,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1727850512
    },
    {
        "content": "<p>I wonder if trying to create a simple neural network to guess whether a given implication is true or false would be good, as it can then direct the ATP</p>",
        "id": 474230994,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1727857704
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"690858\">Daniel Weber</span> <a href=\"#narrow/stream/458659-Equational/topic/Dynamically.20detecting.20useful.20implications.20to.20decide/near/474203438\">said</a>:</p>\n<blockquote>\n<p>Before running this in a large scale it'll probably be good to create a custom schedule for vampire for these kinds of problems</p>\n</blockquote>\n<p>I managed to configure it such that it can solve 948/1000 implications in 50 seconds, which I think is really good</p>",
        "id": 474258061,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1727865981
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"690858\">Daniel Weber</span> <a href=\"#narrow/stream/458659-Equational/topic/Dynamically.20detecting.20useful.20implications.20to.20decide/near/474178112\">said</a>:</p>\n<blockquote>\n<p>I want to run some automated theorem provers at a larger scale, but running it on all unknown implications is both impractical and a waste of resources - as implications are proven/refuted, they will imply many other currently unknown ones.<br>\nOptimally I think we want some API, which interactively gives an unknown implication, and then receives one of true, false or unknown, and then updates the closure based on that and again gives an new unknown implication, and so on and so forth. Perhaps it could generate a file with <code>conjecture</code>s at the end.<br>\nThis raises a technological problem: how do we implement this kind of interactive API?<br>\nThis also raises an algorithmic problem, of what this API will do. It could run an incremental dynamic transitive closure algorithm (there are algorithms with <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">n</span><span class=\"mclose\">)</span></span></span></span> amortized time per addition, which is great for our <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi><mo>≈</mo><mn>5000</mn></mrow><annotation encoding=\"application/x-tex\">n \\approx 5000</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4831em;\"></span><span class=\"mord mathnormal\">n</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">≈</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">5000</span></span></span></span>, compared to the time it will likely take to decide an implication), but I'm really not sure how one finds the \"best\" implication to consider. What measure should that even use?</p>\n</blockquote>\n<p>Ah finally an algorithmic challenge. You want to check the literature for dynamic and local algorithms for reachability. Deletions are the challenging aspect, but insertions alone shouldn't be a challenge.</p>",
        "id": 474258997,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1727866338
    },
    {
        "content": "<p>There shouldn't be any deletions - we only generate implications, don't we?</p>",
        "id": 474259062,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1727866362
    },
    {
        "content": "<p>Yeah then it shouldn't be tough. A union find structure should do the trick</p>",
        "id": 474259117,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1727866384
    },
    {
        "content": "<p>This is a directed graph</p>",
        "id": 474259142,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1727866395
    },
    {
        "content": "<p>One neat trick to sidestep implementation complexity is to use a good SQL database, because their implementations have good dynamic algorithms for join</p>",
        "id": 474259417,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1727866486
    },
    {
        "content": "<p>Currently at a talk. Once I am on a machine, I will try to find a more concrete answer</p>",
        "id": 474259519,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1727866518
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"690858\">Daniel Weber</span> <a href=\"#narrow/stream/458659-Equational/topic/Dynamically.20detecting.20useful.20implications.20to.20decide/near/474258061\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"690858\">Daniel Weber</span> <a href=\"#narrow/stream/458659-Equational/topic/Dynamically.20detecting.20useful.20implications.20to.20decide/near/474203438\">said</a>:</p>\n<blockquote>\n<p>Before running this in a large scale it'll probably be good to create a custom schedule for vampire for these kinds of problems</p>\n</blockquote>\n<p>I managed to configure it such that it can solve 948/1000 implications in 50 seconds, which I think is really good</p>\n</blockquote>\n<p>Apparently after using transitivity on this there are only 2640882 unknown implications remaining out of the previous 3209693, which I find a bit hard to believe <span aria-label=\"thinking\" class=\"emoji emoji-1f914\" role=\"img\" title=\"thinking\">:thinking:</span></p>",
        "id": 474260289,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1727866715
    },
    {
        "content": "<p>This paper : <a href=\"https://arxiv.org/abs/2002.00813\">https://arxiv.org/abs/2002.00813</a></p>\n<p>Do check its related version section which cites a number of papers on variants of this problem</p>",
        "id": 474261057,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1727866894
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"690858\">Daniel Weber</span> <a href=\"#narrow/stream/458659-Equational/topic/Dynamically.20detecting.20useful.20implications.20to.20decide/near/474260289\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"690858\">Daniel Weber</span> <a href=\"#narrow/stream/458659-Equational/topic/Dynamically.20detecting.20useful.20implications.20to.20decide/near/474258061\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"690858\">Daniel Weber</span> <a href=\"#narrow/stream/458659-Equational/topic/Dynamically.20detecting.20useful.20implications.20to.20decide/near/474203438\">said</a>:</p>\n<blockquote>\n<p>Before running this in a large scale it'll probably be good to create a custom schedule for vampire for these kinds of problems</p>\n</blockquote>\n<p>I managed to configure it such that it can solve 948/1000 implications in 50 seconds, which I think is really good</p>\n</blockquote>\n<p>Apparently after using transitivity on this there are only 2640882 unknown implications remaining out of the previous 3209693, which I find a bit hard to believe <span aria-label=\"thinking\" class=\"emoji emoji-1f914\" role=\"img\" title=\"thinking\">:thinking:</span></p>\n</blockquote>\n<p>Easy to believe if it further fills out the Equation 2 equivalence class.</p>",
        "id": 474261585,
        "sender_full_name": "Vlad Tsyrklevich",
        "timestamp": 1727867021
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"690858\">Daniel Weber</span> <a href=\"#narrow/stream/458659-Equational/topic/Dynamically.20detecting.20useful.20implications.20to.20decide/near/474258061\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"690858\">Daniel Weber</span> <a href=\"#narrow/stream/458659-Equational/topic/Dynamically.20detecting.20useful.20implications.20to.20decide/near/474203438\">said</a>:</p>\n<blockquote>\n<p>Before running this in a large scale it'll probably be good to create a custom schedule for vampire for these kinds of problems</p>\n</blockquote>\n<p>I managed to configure it such that it can solve 948/1000 implications in 50 seconds, which I think is really good</p>\n</blockquote>\n<p>I ran this iteratively and computed the closure every so often as suggested, and it's supposed to finish in a few hours — I think I should have <code>conjecture</code> statements leaving only a few tens of thousands of implications completely unknown</p>",
        "id": 474326081,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1727882272
    },
    {
        "content": "<p>If we are down to say 50,000 remaining equations then there may be no further need for dynamic optimization of these tools.  (Though once the big expensive AI tools come online, it may still be worth thinking about how to allocate their queries most efficiently.  I guess we should basically throw all of our cheap tools at that remaining set first.)</p>",
        "id": 474328230,
        "sender_full_name": "Terence Tao",
        "timestamp": 1727882626
    },
    {
        "content": "<p><a href=\"https://github.com/teorth/equational_theories/pull/206\">equational#206</a></p>",
        "id": 474375514,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1727895888
    },
    {
        "content": "<p>Cool! Are you working on converting these proofs to Lean? I'm asking to see if it's time to change tack on what I'm working on, or perhaps I simply misunderstand the results.</p>",
        "id": 474379650,
        "sender_full_name": "Vlad Tsyrklevich",
        "timestamp": 1727897066
    },
    {
        "content": "<p>For the non-implications found by vampire, is it feasible to extract the counter example magma from the vampire output?</p>",
        "id": 474390264,
        "sender_full_name": "Joachim Breitner",
        "timestamp": 1727900507
    },
    {
        "content": "<p>Also, I noticed just a few <code>_not_implies_Equation1</code> conjectures in there, is that expected?</p>",
        "id": 474398151,
        "sender_full_name": "Vlad Tsyrklevich",
        "timestamp": 1727903589
    },
    {
        "content": "<p>There's a bug there I just noticed, the equations numbers aren't being decremented by 1 before indexing to the array</p>",
        "id": 474432475,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1727916664
    },
    {
        "content": "<p>I think this should be reverted for now and I'll rerun it</p>",
        "id": 474432509,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1727916680
    },
    {
        "content": "<p>Oof.  Unfortunately the PR is too deep now to revert.  Can you make a placeholder PR to remove the relevant files perhaps?</p>",
        "id": 474434626,
        "sender_full_name": "Terence Tao",
        "timestamp": 1727917977
    },
    {
        "content": "<p>In retrospect the condensation to 7999 implications was too good to be true... projections suggested 50K was more reasonable</p>",
        "id": 474434700,
        "sender_full_name": "Terence Tao",
        "timestamp": 1727918027
    },
    {
        "content": "<p><a href=\"https://github.com/teorth/equational_theories/pull/219\">equational#219</a></p>",
        "id": 474434792,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1727918066
    },
    {
        "content": "<p>The good news is that this sort of issue isn't impacting the rest of the project significantly.  But it's good to be reminded that errors can still abound outside of the Lean-verified space (and I guess in principle there could also still be some issues within Lean in case our interpretation of the Lean results are not quite right, though this seems extremely remote given the basic nature of our proof statements).</p>",
        "id": 474436170,
        "sender_full_name": "Terence Tao",
        "timestamp": 1727918465
    },
    {
        "content": "<p>I very nearly did this exact thing with the off-by-one for my 4x4 tables and even committed it but caught it before I pushed... If someone knows how to make the CI break that would be helpful to catch things like this (raised in <a href=\"https://github.com/teorth/equational_theories/pull/217\">equational#217</a>)</p>",
        "id": 474437848,
        "sender_full_name": "Nicholas Carlini",
        "timestamp": 1727918851
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"761294\">Nicholas Carlini</span> <a href=\"#narrow/stream/458659-Equational/topic/Dynamically.20detecting.20useful.20implications.20to.20decide/near/474437848\">said</a>:</p>\n<blockquote>\n<p>I very nearly did this exact thing with the off-by-one for my 4x4 tables and even committed it but caught it before I pushed... If someone knows how to make the CI break that would be helpful to catch things like this (raised in <a href=\"https://github.com/teorth/equational_theories/pull/217\">equational#217</a>)</p>\n</blockquote>\n<p><a href=\"https://github.com/teorth/equational_theories/pull/218\">equational#218</a> makes <code>extract_impications</code> error if there are inconsistent conjectures, but I now see that it errors even after removing vampire</p>",
        "id": 474438094,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1727918903
    },
    {
        "content": "<p>It was, funnily enough, a different off-by-one. I fixed it</p>",
        "id": 474438435,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1727919067
    },
    {
        "content": "<p>It's now claiming to prove 99% of these implications, but I'm a bit suspicious of it, perhaps I'll try it on a few implications whose status is proven as a sanity check</p>",
        "id": 474438976,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1727919423
    },
    {
        "content": "<p>One of my dreams with this project was to make research mathematics more closely resemble modern software engineering.  I guess I should be careful what I wish for <span aria-label=\"joy\" class=\"emoji emoji-1f602\" role=\"img\" title=\"joy\">:joy:</span></p>",
        "id": 474438997,
        "sender_full_name": "Terence Tao",
        "timestamp": 1727919440
    },
    {
        "content": "<p>Most of software engineering is like working in a factory producing Mona Lisas</p>",
        "id": 474443722,
        "sender_full_name": "Cody Roux",
        "timestamp": 1727921915
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"690858\">Daniel Weber</span> <a href=\"#narrow/stream/458659-Equational/topic/Dynamically.20detecting.20useful.20implications.20to.20decide/near/474438976\">said</a>:</p>\n<blockquote>\n<p>It's now claiming to prove 99% of these implications, but I'm a bit suspicious of it, perhaps I'll try it on a few implications whose status is proven as a sanity check</p>\n</blockquote>\n<p>It seems to work correctly <span aria-label=\"thinking\" class=\"emoji emoji-1f914\" role=\"img\" title=\"thinking\">:thinking:</span></p>",
        "id": 474450083,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1727923633
    },
    {
        "content": "<p>I rerun it for all implications, and I made <a href=\"https://github.com/teorth/equational_theories/pull/230\">equational#230</a> and it's consistent. However, someone should scrutinize it more before merging, I'm not all that confident about it now</p>",
        "id": 474595542,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1727963445
    },
    {
        "content": "<p>It is stuck on a merge conflict</p>",
        "id": 474604489,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1727965790
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"690858\">Daniel Weber</span> <a href=\"#narrow/stream/458659-Equational/topic/Dynamically.20detecting.20useful.20implications.20to.20decide/near/474595542\">said</a>:</p>\n<blockquote>\n<p>I rerun it for all implications, and I made <a href=\"https://github.com/teorth/equational_theories/pull/230\">equational#230</a> and it's consistent. However, someone should scrutinize it more before merging, I'm not all that confident about it now</p>\n</blockquote>\n<p>If it helps, I ran equation search with your conjectures in the implications list for a couple of minutes and it did not hit a contradiction (yesterday when I tried it, it hit a contradiction very quickly)</p>",
        "id": 474608513,
        "sender_full_name": "Vlad Tsyrklevich",
        "timestamp": 1727966759
    },
    {
        "content": "<p>I also managed to generate models for many of the non-implications, which also increases my confidence in them</p>",
        "id": 474608985,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1727966840
    },
    {
        "content": "<p>Ah yes I should also have specified, I actually explicitly did not check the conjectured non-implications as I don't have good tooling for this.</p>",
        "id": 474609706,
        "sender_full_name": "Vlad Tsyrklevich",
        "timestamp": 1727966946
    },
    {
        "content": "<p>In some cases vampire outputs a model in a strange form. For <code>Equation3994_not_implies_Equation3588</code>, for instance (<code>Not (x ∘ y = (z ∘ (x ∘ y)) ∘ z -&gt; x ∘ y = z ∘ ((x ∘ y) ∘ z))</code>), the model it outputs is:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">%</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"w\"> </span><span class=\"n\">SZS</span><span class=\"w\"> </span><span class=\"n\">output</span><span class=\"w\"> </span><span class=\"n\">start</span><span class=\"w\"> </span><span class=\"n\">Saturation</span><span class=\"bp\">.</span>\n<span class=\"n\">cnf</span><span class=\"o\">(</span><span class=\"n\">u12</span><span class=\"o\">,</span><span class=\"kn\">axiom</span><span class=\"o\">,</span>\n<span class=\"w\">    </span><span class=\"n\">mul</span><span class=\"o\">(</span><span class=\"n\">X0</span><span class=\"o\">,</span><span class=\"n\">X1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">mul</span><span class=\"o\">(</span><span class=\"n\">mul</span><span class=\"o\">(</span><span class=\"n\">X2</span><span class=\"o\">,</span><span class=\"n\">X3</span><span class=\"o\">),</span><span class=\"n\">mul</span><span class=\"o\">(</span><span class=\"n\">mul</span><span class=\"o\">(</span><span class=\"n\">X0</span><span class=\"o\">,</span><span class=\"n\">X1</span><span class=\"o\">),</span><span class=\"n\">mul</span><span class=\"o\">(</span><span class=\"n\">X2</span><span class=\"o\">,</span><span class=\"n\">X3</span><span class=\"o\">))))</span><span class=\"bp\">.</span>\n\n<span class=\"n\">cnf</span><span class=\"o\">(</span><span class=\"n\">u9</span><span class=\"o\">,</span><span class=\"kn\">axiom</span><span class=\"o\">,</span>\n<span class=\"w\">    </span><span class=\"n\">mul</span><span class=\"o\">(</span><span class=\"n\">X0</span><span class=\"o\">,</span><span class=\"n\">X1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">mul</span><span class=\"o\">(</span><span class=\"n\">mul</span><span class=\"o\">(</span><span class=\"n\">X2</span><span class=\"o\">,</span><span class=\"n\">mul</span><span class=\"o\">(</span><span class=\"n\">X0</span><span class=\"o\">,</span><span class=\"n\">X1</span><span class=\"o\">)),</span><span class=\"n\">X2</span><span class=\"o\">))</span><span class=\"bp\">.</span>\n\n<span class=\"n\">cnf</span><span class=\"o\">(</span><span class=\"n\">u10</span><span class=\"o\">,</span><span class=\"n\">negated_conjecture</span><span class=\"o\">,</span>\n<span class=\"w\">    </span><span class=\"n\">mul</span><span class=\"o\">(</span><span class=\"n\">sK0</span><span class=\"o\">,</span><span class=\"n\">sK1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">!=</span><span class=\"w\"> </span><span class=\"n\">mul</span><span class=\"o\">(</span><span class=\"n\">sK2</span><span class=\"o\">,</span><span class=\"n\">mul</span><span class=\"o\">(</span><span class=\"n\">mul</span><span class=\"o\">(</span><span class=\"n\">sK0</span><span class=\"o\">,</span><span class=\"n\">sK1</span><span class=\"o\">),</span><span class=\"n\">sK2</span><span class=\"o\">)))</span><span class=\"bp\">.</span>\n\n<span class=\"bp\">%</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"w\"> </span><span class=\"n\">SZS</span><span class=\"w\"> </span><span class=\"n\">output</span><span class=\"w\"> </span><span class=\"kn\">end</span><span class=\"w\"> </span><span class=\"n\">Saturation</span><span class=\"bp\">.</span>\n</code></pre></div>\n<p>from what I'm reading from the documentation that's supposed to be \"A Herbrand model expressed as a saturated set of formulae.\" but I'm not sure what that means, and there's no further explanation. Does anybody know how this describes a model?</p>",
        "id": 474611767,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1727967251
    },
    {
        "content": "<p>I think it might mean I'm supposed to use something along the lines of this:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">MagmaOp</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">FreeMagma</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">FreeMagma</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">FreeMagma</span><span class=\"w\"> </span><span class=\"n\">Nat</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">x2</span><span class=\"w\"> </span><span class=\"bp\">⋆</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x0</span><span class=\"w\"> </span><span class=\"bp\">⋆</span><span class=\"w\"> </span><span class=\"n\">x1</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">x2</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">MagmaOp</span><span class=\"w\"> </span><span class=\"n\">x0</span><span class=\"w\"> </span><span class=\"n\">x1</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">⋆</span><span class=\"w\"> </span><span class=\"n\">y</span>\n</code></pre></div>\n<p>but lean warns that I'm not allowed to repeat a variable. Is there a good workaround for that?</p>",
        "id": 474636484,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1727973553
    },
    {
        "content": "<p>Actually, no, that won't work anyway</p>",
        "id": 474636665,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1727973609
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"690858\">Daniel Weber</span> <a href=\"#narrow/stream/458659-Equational/topic/Dynamically.20detecting.20useful.20implications.20to.20decide/near/474636484\">said</a>:</p>\n<blockquote>\n<p>I think it might mean I'm supposed to use something along the lines of this:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">MagmaOp</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">FreeMagma</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">FreeMagma</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">FreeMagma</span><span class=\"w\"> </span><span class=\"n\">Nat</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">x2</span><span class=\"w\"> </span><span class=\"bp\">⋆</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x0</span><span class=\"w\"> </span><span class=\"bp\">⋆</span><span class=\"w\"> </span><span class=\"n\">x1</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">x2</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">MagmaOp</span><span class=\"w\"> </span><span class=\"n\">x0</span><span class=\"w\"> </span><span class=\"n\">x1</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">⋆</span><span class=\"w\"> </span><span class=\"n\">y</span>\n</code></pre></div>\n<p>but lean warns that I'm not allowed to repeat a variable. Is there a good workaround for that?</p>\n</blockquote>\n<p>(FWIW in general, a workaround is using different variables and checking if they agree), so something like this works:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"w\">  </span><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">MagmaOp</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">FreeMagma</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">FreeMagma</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">FreeMagma</span><span class=\"w\"> </span><span class=\"n\">Nat</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"bp\">@</span><span class=\"o\">(</span><span class=\"n\">x3</span><span class=\"w\"> </span><span class=\"bp\">⋆</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x1</span><span class=\"w\"> </span><span class=\"bp\">⋆</span><span class=\"w\"> </span><span class=\"n\">x2</span><span class=\"o\">)),</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">x3</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"n\">MagmaOp</span><span class=\"w\"> </span><span class=\"n\">x1</span><span class=\"w\"> </span><span class=\"n\">x2</span><span class=\"w\"> </span><span class=\"k\">else</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">⋆</span><span class=\"w\"> </span><span class=\"n\">y</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">⋆</span><span class=\"w\"> </span><span class=\"n\">y</span>\n</code></pre></div>",
        "id": 474638612,
        "sender_full_name": "Andrés Goens",
        "timestamp": 1727974263
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"690858\">Daniel Weber</span> <a href=\"#narrow/stream/458659-Equational/topic/Dynamically.20detecting.20useful.20implications.20to.20decide/near/474611767\">said</a>:</p>\n<blockquote>\n<p>In some cases vampire outputs a model in a strange form. For <code>Equation3994_not_implies_Equation3588</code>, for instance (<code>Not (x ∘ y = (z ∘ (x ∘ y)) ∘ z -&gt; x ∘ y = z ∘ ((x ∘ y) ∘ z))</code>), the model it outputs is:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">%</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"w\"> </span><span class=\"n\">SZS</span><span class=\"w\"> </span><span class=\"n\">output</span><span class=\"w\"> </span><span class=\"n\">start</span><span class=\"w\"> </span><span class=\"n\">Saturation</span><span class=\"bp\">.</span>\n<span class=\"n\">cnf</span><span class=\"o\">(</span><span class=\"n\">u12</span><span class=\"o\">,</span><span class=\"kn\">axiom</span><span class=\"o\">,</span>\n<span class=\"w\">    </span><span class=\"n\">mul</span><span class=\"o\">(</span><span class=\"n\">X0</span><span class=\"o\">,</span><span class=\"n\">X1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">mul</span><span class=\"o\">(</span><span class=\"n\">mul</span><span class=\"o\">(</span><span class=\"n\">X2</span><span class=\"o\">,</span><span class=\"n\">X3</span><span class=\"o\">),</span><span class=\"n\">mul</span><span class=\"o\">(</span><span class=\"n\">mul</span><span class=\"o\">(</span><span class=\"n\">X0</span><span class=\"o\">,</span><span class=\"n\">X1</span><span class=\"o\">),</span><span class=\"n\">mul</span><span class=\"o\">(</span><span class=\"n\">X2</span><span class=\"o\">,</span><span class=\"n\">X3</span><span class=\"o\">))))</span><span class=\"bp\">.</span>\n\n<span class=\"n\">cnf</span><span class=\"o\">(</span><span class=\"n\">u9</span><span class=\"o\">,</span><span class=\"kn\">axiom</span><span class=\"o\">,</span>\n<span class=\"w\">    </span><span class=\"n\">mul</span><span class=\"o\">(</span><span class=\"n\">X0</span><span class=\"o\">,</span><span class=\"n\">X1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">mul</span><span class=\"o\">(</span><span class=\"n\">mul</span><span class=\"o\">(</span><span class=\"n\">X2</span><span class=\"o\">,</span><span class=\"n\">mul</span><span class=\"o\">(</span><span class=\"n\">X0</span><span class=\"o\">,</span><span class=\"n\">X1</span><span class=\"o\">)),</span><span class=\"n\">X2</span><span class=\"o\">))</span><span class=\"bp\">.</span>\n\n<span class=\"n\">cnf</span><span class=\"o\">(</span><span class=\"n\">u10</span><span class=\"o\">,</span><span class=\"n\">negated_conjecture</span><span class=\"o\">,</span>\n<span class=\"w\">    </span><span class=\"n\">mul</span><span class=\"o\">(</span><span class=\"n\">sK0</span><span class=\"o\">,</span><span class=\"n\">sK1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">!=</span><span class=\"w\"> </span><span class=\"n\">mul</span><span class=\"o\">(</span><span class=\"n\">sK2</span><span class=\"o\">,</span><span class=\"n\">mul</span><span class=\"o\">(</span><span class=\"n\">mul</span><span class=\"o\">(</span><span class=\"n\">sK0</span><span class=\"o\">,</span><span class=\"n\">sK1</span><span class=\"o\">),</span><span class=\"n\">sK2</span><span class=\"o\">)))</span><span class=\"bp\">.</span>\n\n<span class=\"bp\">%</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"w\"> </span><span class=\"n\">SZS</span><span class=\"w\"> </span><span class=\"n\">output</span><span class=\"w\"> </span><span class=\"kn\">end</span><span class=\"w\"> </span><span class=\"n\">Saturation</span><span class=\"bp\">.</span>\n</code></pre></div>\n<p>from what I'm reading from the documentation that's supposed to be \"A Herbrand model expressed as a saturated set of formulae.\" but I'm not sure what that means, and there's no further explanation. Does anybody know how this describes a model?</p>\n</blockquote>\n<p>I think I managed to understand how this is supposed to be used --- we want to say that these (except <code>u10</code>) are exactly what you can prove from Equation3994 (up to substituting values in X0, X1, ...), I think simply by checking all possible derivations, and therefore we can't prove <code>3588</code>.</p>\n<p>Does this seem correct? Is there a good way to check all possible derivations? Is there a less meta way to make this argument?</p>",
        "id": 474641139,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1727975089
    },
    {
        "content": "<p>No, I don't think this is correct either. I think the correct argument is some kind of formalizing of KB completion, and that seems really hard</p>",
        "id": 474647383,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1727976642
    },
    {
        "content": "<p>I wrote a PR that does this dynamic detection of useful theorems. It's fairly fast if you don't need to re-run lake, ~1.5 seconds to initialize +2ms per time you want to get the next theorem to prove.</p>\n<p>If you'd like to be able to update the graph in realtime and have it give you the next best one after you've tried one, that's a fairly easy change to make, if it would be useful. <a href=\"https://github.com/teorth/equational_theories/pull/270\">equational#270</a></p>",
        "id": 474737401,
        "sender_full_name": "Nicholas Carlini",
        "timestamp": 1728018975
    },
    {
        "content": "<p>You say it currently suggests looking at equations that might imply Eq2. According to <a href=\"https://nicholas.carlini.com/tmp/view.html\">https://nicholas.carlini.com/tmp/view.html</a> all equations for which this is undecided are of the form <code>x = f(x, y, ...)</code>. So the techniques from <a class=\"stream-topic\" data-stream-id=\"458659\" href=\"/#narrow/stream/458659-Equational/topic/Presentations.20of.20the.20form.20x.20.3D.20f.28x.2Cy.2C.2E.2E.2E.29.20are.20simple\">#Equational &gt; Presentations of the form x = f(x,y,...) are simple</a>  might apply.</p>",
        "id": 474740714,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1728021072
    },
    {
        "content": "<p>Aah, but none of those equations seem to have only two variables. So my idea in the other thread doesn't apply</p>",
        "id": 474741063,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1728021283
    },
    {
        "content": "<p>I'm making some progress in Leanifying Vampire proofs:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">Equation262_implies_Equation4676</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Magma</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Equation262</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Equation4676</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">by_contra</span><span class=\"w\"> </span><span class=\"n\">nh</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"n\">only</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">not_forall</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">nh</span>\n<span class=\"w\">  </span><span class=\"k\">obtain</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">sk0</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">sk1</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">sk2</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">sk3</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">sk4</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">nh</span><span class=\"bp\">⟩</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">nh</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">eq9</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X0</span><span class=\"w\"> </span><span class=\"n\">X1</span><span class=\"w\"> </span><span class=\"n\">X2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"n\">X0</span><span class=\"w\"> </span><span class=\"bp\">∘</span><span class=\"w\"> </span><span class=\"n\">X1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">∘</span><span class=\"w\"> </span><span class=\"n\">X0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">∘</span><span class=\"w\"> </span><span class=\"n\">X2</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">X0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"bp\">..</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">symm</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">eq10</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">sk0</span><span class=\"w\"> </span><span class=\"bp\">∘</span><span class=\"w\"> </span><span class=\"n\">sk1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">∘</span><span class=\"w\"> </span><span class=\"n\">sk2</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">sk0</span><span class=\"w\"> </span><span class=\"bp\">∘</span><span class=\"w\"> </span><span class=\"n\">sk3</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">∘</span><span class=\"w\"> </span><span class=\"n\">sk4</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">nh</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">eq12</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X3</span><span class=\"w\"> </span><span class=\"n\">X4</span><span class=\"w\"> </span><span class=\"n\">X5</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X3</span><span class=\"w\"> </span><span class=\"bp\">∘</span><span class=\"w\"> </span><span class=\"n\">X4</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">X3</span><span class=\"w\"> </span><span class=\"bp\">∘</span><span class=\"w\"> </span><span class=\"n\">X5</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">superpose</span><span class=\"w\"> </span><span class=\"n\">eq9</span><span class=\"w\"> </span><span class=\"n\">eq9</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">eq20</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X0</span><span class=\"w\"> </span><span class=\"n\">X1</span><span class=\"w\"> </span><span class=\"n\">X2</span><span class=\"w\"> </span><span class=\"n\">X3</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"n\">X0</span><span class=\"w\"> </span><span class=\"bp\">∘</span><span class=\"w\"> </span><span class=\"n\">X1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">∘</span><span class=\"w\"> </span><span class=\"n\">X2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">∘</span><span class=\"w\"> </span><span class=\"n\">X3</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">X0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">superpose</span><span class=\"w\"> </span><span class=\"n\">eq12</span><span class=\"w\"> </span><span class=\"n\">eq9</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">eq22</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">sk0</span><span class=\"w\"> </span><span class=\"bp\">∘</span><span class=\"w\"> </span><span class=\"n\">sk1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">∘</span><span class=\"w\"> </span><span class=\"n\">sk2</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">sk0</span><span class=\"w\"> </span><span class=\"bp\">∘</span><span class=\"w\"> </span><span class=\"n\">sk3</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">∘</span><span class=\"w\"> </span><span class=\"n\">X0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">superpose</span><span class=\"w\"> </span><span class=\"n\">eq12</span><span class=\"w\"> </span><span class=\"n\">eq10</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">eq54</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X0</span><span class=\"w\"> </span><span class=\"n\">X1</span><span class=\"w\"> </span><span class=\"n\">X2</span><span class=\"w\"> </span><span class=\"n\">X4</span><span class=\"w\"> </span><span class=\"n\">X5</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X0</span><span class=\"w\"> </span><span class=\"bp\">∘</span><span class=\"w\"> </span><span class=\"n\">X1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">∘</span><span class=\"w\"> </span><span class=\"n\">X2</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X0</span><span class=\"w\"> </span><span class=\"bp\">∘</span><span class=\"w\"> </span><span class=\"n\">X4</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">∘</span><span class=\"w\"> </span><span class=\"n\">X5</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">superpose</span><span class=\"w\"> </span><span class=\"n\">eq20</span><span class=\"w\"> </span><span class=\"n\">eq20</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">eq76</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X0</span><span class=\"w\"> </span><span class=\"n\">X1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">sk0</span><span class=\"w\"> </span><span class=\"bp\">∘</span><span class=\"w\"> </span><span class=\"n\">sk1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">∘</span><span class=\"w\"> </span><span class=\"n\">sk2</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">sk0</span><span class=\"w\"> </span><span class=\"bp\">∘</span><span class=\"w\"> </span><span class=\"n\">X0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">∘</span><span class=\"w\"> </span><span class=\"n\">X1</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">superpose</span><span class=\"w\"> </span><span class=\"n\">eq12</span><span class=\"w\"> </span><span class=\"n\">eq22</span>\n<span class=\"w\">  </span><span class=\"n\">subsumption</span><span class=\"w\"> </span><span class=\"n\">eq76</span><span class=\"w\"> </span><span class=\"n\">eq54</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">Equation1350_implies_Equation654</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Magma</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Equation1350</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Equation654</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">by_contra</span><span class=\"w\"> </span><span class=\"n\">nh</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"n\">only</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">not_forall</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">nh</span>\n<span class=\"w\">  </span><span class=\"k\">obtain</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">sk0</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">sk1</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">sk2</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">nh</span><span class=\"bp\">⟩</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">nh</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">eq9</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X0</span><span class=\"w\"> </span><span class=\"n\">X1</span><span class=\"w\"> </span><span class=\"n\">X2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X1</span><span class=\"w\"> </span><span class=\"bp\">∘</span><span class=\"w\"> </span><span class=\"o\">(((</span><span class=\"n\">X2</span><span class=\"w\"> </span><span class=\"bp\">∘</span><span class=\"w\"> </span><span class=\"n\">X0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">∘</span><span class=\"w\"> </span><span class=\"n\">X0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">∘</span><span class=\"w\"> </span><span class=\"n\">X1</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">X0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"bp\">..</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">symm</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">eq10</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">sk0</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">sk0</span><span class=\"w\"> </span><span class=\"bp\">∘</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">sk1</span><span class=\"w\"> </span><span class=\"bp\">∘</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"n\">sk2</span><span class=\"w\"> </span><span class=\"bp\">∘</span><span class=\"w\"> </span><span class=\"n\">sk1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">∘</span><span class=\"w\"> </span><span class=\"n\">sk1</span><span class=\"o\">)))</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">nh</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">eq12</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X0</span><span class=\"w\"> </span><span class=\"n\">X1</span><span class=\"w\"> </span><span class=\"n\">X2</span><span class=\"w\"> </span><span class=\"n\">X3</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(((</span><span class=\"n\">X2</span><span class=\"w\"> </span><span class=\"bp\">∘</span><span class=\"w\"> </span><span class=\"n\">X3</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">∘</span><span class=\"w\"> </span><span class=\"n\">X3</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">∘</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"n\">X0</span><span class=\"w\"> </span><span class=\"bp\">∘</span><span class=\"w\"> </span><span class=\"n\">X1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">∘</span><span class=\"w\"> </span><span class=\"n\">X1</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"bp\">∘</span><span class=\"w\"> </span><span class=\"n\">X3</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">X1</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">superpose</span><span class=\"w\"> </span><span class=\"n\">eq9</span><span class=\"w\"> </span><span class=\"n\">eq9</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">eq19</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X1</span><span class=\"w\"> </span><span class=\"n\">X2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X2</span><span class=\"w\"> </span><span class=\"bp\">∘</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"n\">X1</span><span class=\"w\"> </span><span class=\"bp\">∘</span><span class=\"w\"> </span><span class=\"n\">X2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">∘</span><span class=\"w\"> </span><span class=\"n\">X2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">X2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">superpose</span><span class=\"w\"> </span><span class=\"n\">eq12</span><span class=\"w\"> </span><span class=\"n\">eq12</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">eq27</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X1</span><span class=\"w\"> </span><span class=\"n\">X3</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X1</span><span class=\"w\"> </span><span class=\"bp\">∘</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X3</span><span class=\"w\"> </span><span class=\"bp\">∘</span><span class=\"w\"> </span><span class=\"n\">X1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">X1</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">superpose</span><span class=\"w\"> </span><span class=\"n\">eq12</span><span class=\"w\"> </span><span class=\"n\">eq19</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">eq61</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X0</span><span class=\"w\"> </span><span class=\"n\">X2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X0</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">X2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">superpose</span><span class=\"w\"> </span><span class=\"n\">eq9</span><span class=\"w\"> </span><span class=\"n\">eq27</span>\n<span class=\"w\">  </span><span class=\"n\">subsumption</span><span class=\"w\"> </span><span class=\"n\">eq10</span><span class=\"w\"> </span><span class=\"n\">eq61</span>\n</code></pre></div>",
        "id": 474809951,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1728043974
    },
    {
        "content": "<p>I also created some finite models at <a href=\"https://github.com/teorth/equational_theories/pull/276\">equational#276</a></p>",
        "id": 474811359,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1728044502
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"112680\">Johan Commelin</span> <a href=\"#narrow/stream/458659-Equational/topic/Dynamically.20detecting.20useful.20implications.20to.20decide/near/474741063\">said</a>:</p>\n<blockquote>\n<p>Aah, but none of those equations seem to have only two variables. So my idea in the other thread doesn't apply</p>\n</blockquote>\n<p>I just presented some heuristics at <a class=\"stream-topic\" data-stream-id=\"458659\" href=\"/#narrow/stream/458659-Equational/topic/visualization.20of.20graph.20closure\">#Equational &gt; visualization of graph closure</a>  that suggest that the behavior of 1-variable equations, 2-variable equations, and &gt;2-variable equations in the graph are in fact extremely different, and just proposed <a href=\"https://github.com/teorth/equational_theories/pull/278\">equational#278</a> to explore this.  This may help improve our theoretical intuition as to what to expect in the different regimes.</p>",
        "id": 474840680,
        "sender_full_name": "Terence Tao",
        "timestamp": 1728053707
    },
    {
        "content": "<p>I made <a href=\"https://github.com/teorth/equational_theories/pull/281\">equational#281</a> with a bunch of proofs created by Vampire</p>",
        "id": 474846278,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1728055456
    },
    {
        "content": "<p>After your change (checking if my local implications survived):</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">$</span><span class=\"w\"> </span><span class=\"n\">wc</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">l</span><span class=\"w\"> </span><span class=\"n\">new_theorems_to_include</span><span class=\"bp\">.</span><span class=\"n\">csv</span>\n<span class=\"w\">       </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"n\">new_theorems_to_include</span><span class=\"bp\">.</span><span class=\"n\">csv</span>\n</code></pre></div>",
        "id": 474857199,
        "sender_full_name": "Vlad Tsyrklevich",
        "timestamp": 1728058670
    }
]