[
    {
        "content": "<p>Today I chose issue <a href=\"https://github.com/leanprover-community/mathlib4/pull/5025\">#5025</a> for discussion!</p>\n<p><strong><a href=\"https://github.com/leanprover-community/mathlib4/issues/5025\"><code>simp</code> does not try applying <code>@[refl]</code> lemmas to close the goal</a></strong><br>\nCreated by <span class=\"user-mention\" data-user-id=\"110087\">@Kim Morrison</span> (@kim-em) on 2023-06-14<br>\nLabels: lean4-change-in-behaviour</p>\n<p>Is this issue still relevant? Any recent updates? Anyone making progress?</p>",
        "id": 511423069,
        "sender_full_name": "Random Issue Bot",
        "timestamp": 1744294496
    },
    {
        "content": "<p>Still relevant as far as I'm aware</p>",
        "id": 511423832,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1744294655
    },
    {
        "content": "<p>What's the issue here? Is it that <code>simp</code> doesn't use the <code>rfl</code> tactic to close goals? Or that we should tag <code>@[refl]</code> lemmas as <code>@[simp]</code> too?</p>",
        "id": 511465199,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1744305185
    },
    {
        "content": "<p>My understanding is that lean 3 <code>simp</code> used something like <code>rfl</code> at the end, yeah. I guess we could just tag all the <code>refl</code> lemmas with <code>simp</code> as well, but that seems annoying</p>",
        "id": 511466090,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1744305464
    },
    {
        "content": "<p>It's stronger having every <code>@[refl]</code> lemma be a <code>@[simp]</code> lemma, since the proposition could appear somewhere within the goal.</p>",
        "id": 511468377,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1744305742
    },
    {
        "content": "<p>That's true</p>",
        "id": 511477227,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1744307516
    },
    {
        "content": "<p>That's stronger, but wouldn't it be a pretty bad performance hit, since the discrimination key could be super general?</p>",
        "id": 511483212,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1744309578
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"246273\">@Bhavik Mehta</span> <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=eq_self#doc\">docs#eq_self</a> and <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=iff_self#doc\">docs#iff_self</a> are simp lemmas (and they're ones that always appear in every simp set via <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Lean.Elab.Tactic.simpOnlyBuiltins#doc\">docs#Lean.Elab.Tactic.simpOnlyBuiltins</a>, even if you use <code>simp only</code>). The performance impact would be similar; the key for a relation <code>R</code> would be <code>R * *</code> and would apply wherever <code>R</code> appears.</p>",
        "id": 511487972,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1744311011
    },
    {
        "content": "<p>Hmm, okay. I suppose I shouldn't really complain about potential performance hits without seeing benchmarks anyway :)</p>",
        "id": 511488311,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1744311143
    }
]