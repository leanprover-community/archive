[
    {
        "content": "<p>The <a href=\"https://github.com/sinhp/Poly\">polynomial functor project</a>  includes a formalization of locally cartesian closed categories (lccc). In the next week, I am going to PR some code from the polynomial functors project to mathlib. </p>\n<p>Where would be a good place in mathlib for lcccs? <code>Closed.LocallyCartesian</code> is one candidate. Another option would be to have a separate subdir <code>LocallyCartesianClosed</code> in <code>CategoryTheory</code>.</p>",
        "id": 456202359,
        "sender_full_name": "Sina Hazratpour ð“ƒµ",
        "timestamp": 1722709565
    },
    {
        "content": "<p>BTW, can we agree that LCCC has 3 C's in it?</p>",
        "id": 456219867,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1722717241
    },
    {
        "content": "<p>I think we should rather have a <code>Cartesian</code> subdirectory in <code>CategoryTheory</code> where stuff like this should go. But that would involve some reorganizing of existing files, so itâ€™s probably worth adding LCCCs and only later doing the reorganization</p>",
        "id": 456238466,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1722727945
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"420917\">@Sina Hazratpour</span> Locally cartesian closed categories were mentioned in <a href=\"https://github.com/leanprover-community/mathlib4/pull/28908\">#28908</a>, where <span class=\"user-mention\" data-user-id=\"459699\">@JoÃ«l Riou</span> essentially proves that <code>Type _</code> is locally cartesian closed.<br>\nDo you still plan to upstream this work?</p>",
        "id": 538211041,
        "sender_full_name": "Robin Carlier",
        "timestamp": 1757334296
    },
    {
        "content": "<p>yes, i plan to. They are currently in the mathlib PR queue, and there is a merge conflict that needs to be resolved. But I can do it this week.</p>",
        "id": 538220804,
        "sender_full_name": "Sina Hazratpour",
        "timestamp": 1757336708
    },
    {
        "content": "<p>I also have proved the locally cartesian closedness of <code>Type</code> in the Poly repo mentioned above. The strategy is as follows: I showed that in the category of types the slices <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>T</mi><mi>y</mi><mi>p</mi><mi>e</mi><mi>s</mi><mi mathvariant=\"normal\">/</mi><mi>X</mi></mrow><annotation encoding=\"application/x-tex\">Types/X</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mord mathnormal\">p</span><span class=\"mord mathnormal\">es</span><span class=\"mord\">/</span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span></span></span></span> are the same as functor categories <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>X</mi><mo>â†’</mo><mi>T</mi><mi>y</mi><mi>p</mi><mi>e</mi></mrow><annotation encoding=\"application/x-tex\">X \\to Type</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">â†’</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8778em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mord mathnormal\">p</span><span class=\"mord mathnormal\">e</span></span></span></span> which is shown to be cartesian closed in mathlib</p>",
        "id": 538221294,
        "sender_full_name": "Sina Hazratpour",
        "timestamp": 1757336805
    },
    {
        "content": "<p>We then obtain the explicit right adjoints to the pullback functor from the definition of locally cartesian closed.</p>",
        "id": 538221815,
        "sender_full_name": "Sina Hazratpour",
        "timestamp": 1757336923
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/21525\">#21525</a> for reference.</p>\n<p>Do you also plan on upstreaming cartesian closedness of <code>Type</code>? I believe <span class=\"user-mention\" data-user-id=\"459699\">@JoÃ«l Riou</span> is a bit in a hurry to have that the base change functors preserve colimits for his applications.</p>",
        "id": 538221970,
        "sender_full_name": "Robin Carlier",
        "timestamp": 1757336962
    },
    {
        "content": "<p>i feel this proof is better than constructing the right adjoints explicitly, since it uses the bundle classifier pointed Types to Types and this kind of proofs scale better</p>",
        "id": 538222101,
        "sender_full_name": "Sina Hazratpour",
        "timestamp": 1757336989
    },
    {
        "content": "<p>i will upstream both lccc and the cartesian closedness ofÂ <code>Type</code>. I also have the preservation of  colimits.</p>",
        "id": 538222406,
        "sender_full_name": "Sina Hazratpour",
        "timestamp": 1757337053
    },
    {
        "content": "<p>ok, let me see if i can finish this tonight.</p>",
        "id": 538222539,
        "sender_full_name": "Sina Hazratpour",
        "timestamp": 1757337083
    },
    {
        "content": "<p>No, no, I am not at all in a hurry. This will be used in some of the last steps on the construction of the Quillen model category structure on simplicial sets, which shall need 35k extra lines of code.</p>",
        "id": 538222555,
        "sender_full_name": "JoÃ«l Riou",
        "timestamp": 1757337087
    },
    {
        "content": "<p>Oh, then we have time! Then no hurry <span class=\"user-mention\" data-user-id=\"420917\">@Sina Hazratpour</span></p>",
        "id": 538222875,
        "sender_full_name": "Robin Carlier",
        "timestamp": 1757337162
    },
    {
        "content": "<p>(sorry to have assumed the hurry!)</p>",
        "id": 538222990,
        "sender_full_name": "Robin Carlier",
        "timestamp": 1757337188
    },
    {
        "content": "<p>no problem, i think i will do it tonight anyway, it's a good excuse to get this past the PR queue.</p>",
        "id": 538223127,
        "sender_full_name": "Sina Hazratpour",
        "timestamp": 1757337223
    },
    {
        "content": "<p>Feel free to assign it (and related PRs) on GitHub when they're ready!</p>",
        "id": 538223373,
        "sender_full_name": "Robin Carlier",
        "timestamp": 1757337289
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"286014\">@Robin Carlier</span> <span class=\"user-mention\" data-user-id=\"459699\">@JoÃ«l Riou</span> <br>\nComing back to this, I have started to push LCCC work to mathlib. Since the write-access thing on mathlib has changed, and one needs to PR from a fork of mathlib, I am opening new PRs from my fork of mathlib than using the ones with merge conflict from back in February. It seems cleaner this way. I have so far pushed <code>lccc-prelim</code> (<a href=\"https://github.com/leanprover-community/mathlib4/pull/30366\">#30366</a>), <code>lccc-section</code> (<a href=\"https://github.com/leanprover-community/mathlib4/pull/30373\">#30373</a>) and <code>lccc-basic</code> (<a href=\"https://github.com/leanprover-community/mathlib4/pull/30375\">#30375</a>), each depending on the previous one. <code>lccc-basic</code> defines locally cartesian closed categories. Then there will be <code>lccc-types</code>, <code>lccc-presheaf</code>, <code>lccc-beck-chevalley</code>. I will however only open PRs for the last three ones once the first three PRs get merged (though all six of them are on my fork of mathlib), since otherwise i would create a lot more extra work with <code>merge</code>, <code>rebase</code>, etc during the review process. Does this sound good to you? Let me know if you have suggestions.</p>",
        "id": 544046717,
        "sender_full_name": "Sina Hazratpour",
        "timestamp": 1760043848
    }
]