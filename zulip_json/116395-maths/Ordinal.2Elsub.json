[
    {
        "content": "<p>Out of all of my planned refactors on ordinals, the <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Ordinal.lsub#doc\">docs#Ordinal.lsub</a> refactor is the one I'm the most iffy about.</p>",
        "id": 476871125,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1728953452
    },
    {
        "content": "<p>There's a few issues with <code>lsub</code>. One is the name, which is a bit obscure without the docstring (it stands for least strict upper bound). Of course, there's also the issue with universes - if we are to keep this function, we should not restrict the universes of the indexing family.</p>",
        "id": 476871261,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1728953540
    },
    {
        "content": "<p>But the greater issue is that using <code>lsub</code> instead of writing its definition down explicitly means we can't use the vast API that already exists for suprema.</p>",
        "id": 476871295,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1728953595
    },
    {
        "content": "<p>On the other hand... this is definitely a useful definition to have. It appears most prominently in cofinality: the cofinality of an ordinal <code>o</code> is the smallest cardinal of an indexing family <code>f : ι → Ordinal</code> with <code>lsub f = o</code>.</p>",
        "id": 476871392,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1728953671
    },
    {
        "content": "<p>What should be done? I see three options here:</p>",
        "id": 476871478,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1728953761
    },
    {
        "content": "<p>/poll What to do with <code>lsub</code>?<br>\nDeprecate <code>lsub</code>, use <code>iSup</code><br>\nKeep <code>lsub</code> (but generalize its universes)<br>\nGeneralize <code>lsub</code> to appropriate typeclasses</p>",
        "id": 476871630,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1728953877
    },
    {
        "content": "<p>The generalization option would be really cool, but it comes with a high maintenance cost. And there's the issue of whether we should also have a set version...</p>",
        "id": 476871737,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1728953965
    },
    {
        "content": "<p>I'm pretty much 50/50 on deprecating or keeping it.</p>",
        "id": 476871824,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1728954017
    },
    {
        "content": "<p>(In any case, <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Ordinal.blsub#doc\">docs#Ordinal.blsub</a> has to go)</p>",
        "id": 476871836,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1728954026
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"387244\">@Yaël Dillies</span> <span class=\"user-mention\" data-user-id=\"565854\">@Nir Paz</span></p>",
        "id": 476871987,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1728954163
    },
    {
        "content": "<p>Adding an explicit <code>succ ∘</code> in the characterization of cofinality isn't that bad, especially since for limits it's equivalent to <code>iSup</code>. This is always the interesting case so I assume the clumsier  <code>iSup (succ ∘ f)</code> won't even be used often.</p>",
        "id": 476979868,
        "sender_full_name": "Nir Paz",
        "timestamp": 1728995984
    },
    {
        "content": "<p>Not quite, every nonzero ordinal is the supremum of a singleton (namely the one consisting of itself)</p>",
        "id": 477062968,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1729022970
    },
    {
        "content": "<p>On the other hand, it's true that you can just characterize the cofinality of a limit ordinal as the size of the least set of <em>smaller</em> ordinals whose supremum equals it</p>",
        "id": 477063206,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1729023065
    },
    {
        "content": "<p>Well the poll clearly shows we don't want this haha</p>",
        "id": 477092647,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1729037543
    },
    {
        "content": "<p>I'll try to refactor the cofinality file to not use <code>lsub</code> in the coming weeks</p>",
        "id": 477092688,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1729037565
    },
    {
        "content": "<p>Its other uses are somewhat more minor - after getting rid of those we can deprecate the function altogether</p>",
        "id": 477092717,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1729037590
    }
]