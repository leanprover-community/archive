[
    {
        "content": "<p>Are there any results on complex dynamics (in one variable) and potential theory (e.g. Julia sets, equilibrium measures) in mathlib? A cursory search shows that there was work done on e.g. the Mandelbrot set <a href=\"#narrow/channel/116395-maths/topic/Mandelbrot.20-.20Lean.204.20version\">here</a> but I am not sure what is the status in mathlib.</p>",
        "id": 533635620,
        "sender_full_name": "Bryan Wang",
        "timestamp": 1754815139
    },
    {
        "content": "<p>No, it's not in mathlib, but it would be great if it were! Maybe you would be interested in upstreaming some of <span class=\"user-mention\" data-user-id=\"514145\">@Geoffrey Irving</span>'s code?</p>",
        "id": 533635832,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1754815327
    },
    {
        "content": "<p>The full repo is <a href=\"https://github.com/girving/ray\">https://github.com/girving/ray</a></p>",
        "id": 533644420,
        "sender_full_name": "Geoffrey Irving",
        "timestamp": 1754824216
    },
    {
        "content": "<p>sure, I would be happy to do so! Are there any parts of the repo which have (effectively) already been upstreamed? E.g. I see a file named <code>HolomorphicUpstream</code> which seems like it has been upstreamed to mathlib. Also what would you say is the best place(s) to start currently?</p>",
        "id": 533739669,
        "sender_full_name": "Bryan Wang",
        "timestamp": 1754903044
    },
    {
        "content": "<p>The first thing to do then is try to delete that file and use the Mathlib versions instead. I would love to review PRs!</p>\n<p>After that, I would suggest trying to upstream some of the utilities to get some experience doing upstreaming; good places to start would be Topology.lean, Manifold.lean or Manifold/Analytic.lean.</p>\n<p>For bigger stuff, there are two routes:</p>\n<ol>\n<li>Start with Hartogs.lean and dependencies, including subharmonic functions. These are upstreamable separate from any complex dynamics considerations.</li>\n<li>Remove the dependency of the complex dynamics stuff on Hartogs, then focus only complex dynamics. This is fairly straightforward: it just means threading some multidimensional analyticity through more lemmas in BottcherNear.lean, instead of doing the stunt of proving separate analyticity and invoking Hartogs theorem.</li>\n</ol>",
        "id": 533755976,
        "sender_full_name": "Geoffrey Irving",
        "timestamp": 1754908324
    },
    {
        "content": "<p>Also, worth saying explicitly that the typical route is to pick some leaf lemmas and definitions, upstream then to Mathlib without changing Ray, then do an update PR to Ray to depend on the new Mathlib versions and remove the local versions.</p>",
        "id": 533759332,
        "sender_full_name": "Geoffrey Irving",
        "timestamp": 1754909246
    },
    {
        "content": "<p>I don't have time to work on the upstreaming, but I'd be excited to see this happen. I'll be happy to review any differential geometry changes you'll PR.</p>",
        "id": 533763337,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1754910654
    },
    {
        "content": "<p>(I may also have time to review more, but cannot promise that right now.)</p>",
        "id": 533763468,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1754910693
    },
    {
        "content": "<p>Thank you very much! I should have some time to work on this over the next few weeks, so hopefully there will be some PRs coming your way <span aria-label=\"smile\" class=\"emoji emoji-1f604\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 533781979,
        "sender_full_name": "Bryan Wang",
        "timestamp": 1754915199
    },
    {
        "content": "<p>That's great! I may be on holiday in the coming weeks (in which case I'll update my zulip, and reviews will take correspondingly longer).</p>",
        "id": 533783358,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1754915642
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"514145\">@Geoffrey Irving</span> I've opened a <a href=\"https://github.com/girving/ray/pull/4\">PR</a> to delete <code>HolomorphicUpstream.lean</code>!</p>",
        "id": 533928506,
        "sender_full_name": "Bryan Wang",
        "timestamp": 1754986183
    },
    {
        "content": "<p>Merged, thank you! Since the mathematical parts of <code>ray</code> build and then rendering parts do not (due to a compiler bug), I might split out the latter into a separate repo so that the mathematical repo has a clean build.</p>",
        "id": 533939232,
        "sender_full_name": "Geoffrey Irving",
        "timestamp": 1754990101
    },
    {
        "content": "<p>^ Done, <a href=\"https://github.com/girving/ray\">https://github.com/girving/ray</a> just has the math now (and builds), and <a href=\"https://github.com/girving/ray-render\">https://github.com/girving/ray-render</a> has the interval arithmetic-based rendering.</p>",
        "id": 533945725,
        "sender_full_name": "Geoffrey Irving",
        "timestamp": 1754992489
    },
    {
        "content": "<p>Thanks!</p>",
        "id": 534732076,
        "sender_full_name": "Bryan Wang",
        "timestamp": 1755311035
    },
    {
        "content": "<p>Just to clarify something mathematical, when you say to remove the dependency of BottcherNear on Hartogs, you mean do something like the proof of the corollary in the attached picture? <br>\n<a href=\"/user_uploads/3121/y9EGIm7qbpGIzJJX4B4-1PXl/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/y9EGIm7qbpGIzJJX4B4-1PXl/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"907x706\" src=\"/user_uploads/thumbnail/3121/y9EGIm7qbpGIzJJX4B4-1PXl/image.png/840x560.webp\"></a></div>",
        "id": 534732108,
        "sender_full_name": "Bryan Wang",
        "timestamp": 1755311082
    },
    {
        "content": "<p>By the way, <a href=\"https://github.com/leanprover-community/mathlib4/pull/28286\">#28286</a> and <a href=\"https://github.com/leanprover-community/mathlib4/pull/28292\">#28292</a> upstream most of the results from Manifold/Analytic.lean that aren't already in mathlib.</p>",
        "id": 534732183,
        "sender_full_name": "Bryan Wang",
        "timestamp": 1755311185
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"934803\">@Bryan Wang</span> Roughly, but concretely what it would mean is making all results in <code>BottcherNear.lean</code> account for <code>c</code> from the start. Currently the top half of the file operates at fixed <code>c</code>, then <a href=\"https://github.com/girving/ray/blob/62df108da25af730ab82442b69027e861648d111/Ray/Dynamics/BottcherNear.lean#L535\">https://github.com/girving/ray/blob/62df108da25af730ab82442b69027e861648d111/Ray/Dynamics/BottcherNear.lean#L535</a> applies Hartogs' theorem. The alternative is always having <code>f : ℂ → ℂ → ℂ</code> throughout.</p>\n<p>But there are some obstacles: <a href=\"https://github.com/girving/ray/blob/62df108da25af730ab82442b69027e861648d111/Ray/Dynamics/BottcherNear.lean#L139\">https://github.com/girving/ray/blob/62df108da25af730ab82442b69027e861648d111/Ray/Dynamics/BottcherNear.lean#L139</a> applies <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Complex.differentiableOn_compl_singleton_and_continuousAt_iff#doc\">docs#Complex.differentiableOn_compl_singleton_and_continuousAt_iff</a> to remove a singularity, and I don't know if Mathlib has a 2D version of this.</p>",
        "id": 534746361,
        "sender_full_name": "Geoffrey Irving",
        "timestamp": 1755330054
    },
    {
        "content": "<p>Somehow it feels like it would be slightly complicated to show analyticity in two variables directly (for example, <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Complex.analyticOnNhd_iff_differentiableOn#doc\">docs#Complex.analyticOnNhd_iff_differentiableOn</a> is also used in line 117 of BottcherNear). Do you think it would make sense to say use continuity and apply Osgood instead? Based on the import graph it seems that Osgood is pretty separate from the rest of Hartogs (and a few other things also depend on Osgood).</p>",
        "id": 534907184,
        "sender_full_name": "Bryan Wang",
        "timestamp": 1755509099
    },
    {
        "content": "<p>Yes, using Osgood is a reasonable path!</p>",
        "id": 534925715,
        "sender_full_name": "Geoffrey Irving",
        "timestamp": 1755515509
    },
    {
        "content": "<p>Regarding Hartogs itself, the definition of harmonic functions was recently added to mathlib <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=InnerProductSpace.HarmonicAt#doc\">docs#InnerProductSpace.HarmonicAt</a> using vanishing of the Laplacian, so we would probably want to have the equivalence between harmonicity and the mean-value property in mathlib (I probably won't have time for this, but this is certainly important to have anyway).</p>",
        "id": 535462853,
        "sender_full_name": "Bryan Wang",
        "timestamp": 1755768065
    }
]