[
    {
        "content": "<p>I noticed that <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Subgroup.mem_closure_singleton_iff_existsUnique_zpow#doc\">docs#Subgroup.mem_closure_singleton_iff_existsUnique_zpow</a> assumes a <code>LinearOrderedCommGroup</code> while actually it needs <code>a ^ m = 1 → a = 1 ∨ m = 0</code>. Should we add <code>NoRoots</code>, a multiplicative version of <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=NoZeroSMulDivisors#doc\">docs#NoZeroSMulDivisors</a> ?</p>",
        "id": 471364820,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1726701489
    },
    {
        "content": "<p>Or <code>NoRootsOfUnity</code>?</p>",
        "id": 471424433,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1726731939
    },
    {
        "content": "<p>As <span class=\"user-mention\" data-user-id=\"631684\">@Yongle Hu</span> pointed on Github, we already have this for <code>Nat</code> (the only relevant case, as we don't have typeclasses for <code>a ^ (x + y) = a ^ x * a ^ y</code> etc), and it's called <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Monoid.IsTorsionFree#doc\">docs#Monoid.IsTorsionFree</a></p>",
        "id": 472734950,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1727281655
    },
    {
        "content": "<p>Unless someone comes with a better plan, I'm going to</p>\n<ul>\n<li>move the definition of <code>Monoid.IsTorsionFree</code> to a separate file (or to <code>Group/Defs</code>);</li>\n<li>reformulate the definition without without <code>periodicPts</code>;</li>\n<li>add instances from <code>AddMonoid.IsTorsionFree M</code> to <code>NoZeroSMulDivisors Nat M</code> and <code>NoZeroSMulDivisors Int M</code>;</li>\n<li>assume <code>AddMoonoid.IsTorsionFree M</code> instead of <code>NoZeroSMulDivisors (Nat|Int) M</code></li>\n<li>reformulate <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=zpow_right_inj#doc\">docs#zpow_right_inj</a> etc for <code>Monoid.IsTorsionFree</code>, as I did in <a href=\"https://github.com/leanprover-community/mathlib4/pull/17133\">#17133</a> with <code>NoRootsOfUnity</code>.</li>\n</ul>",
        "id": 472735686,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1727281895
    },
    {
        "content": "<p>Since <code>Monoid.IsTorsionFree</code> is an existing typeclass, it will be easier to split this refactor into steps.</p>",
        "id": 472735741,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1727281917
    },
    {
        "content": "<p>BTW, should we use <code>Monoid.IsTorsionFree</code>/<code>AddMonoid.IsTorsionFree</code> or <code>IsMulTorsionFree</code>/<code>IsAddTorsionFree</code>?</p>",
        "id": 472788186,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1727306818
    },
    {
        "content": "<p>I much prefer the latter</p>",
        "id": 472833799,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1727336676
    }
]