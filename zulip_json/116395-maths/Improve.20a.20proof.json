[
    {
        "content": "<p>Hi everyone.</p>\n<p>I've defined the following:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">IsProjection</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">P</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">â†’</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">):</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"bp\">âˆ˜</span><span class=\"w\"> </span><span class=\"n\">P</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">IsComplemented</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"n\">ğ•‚</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">RCLike</span><span class=\"w\"> </span><span class=\"n\">ğ•‚</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">NormedAddCommGroup</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">NormedSpace</span><span class=\"w\"> </span><span class=\"n\">ğ•‚</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Y</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Subspace</span><span class=\"w\"> </span><span class=\"n\">ğ•‚</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"bp\">âˆƒ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">P</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">â†’</span><span class=\"n\">L</span><span class=\"o\">[</span><span class=\"n\">ğ•‚</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">IsProjection</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"bp\">âˆ§</span><span class=\"w\"> </span><span class=\"n\">LinearMap</span><span class=\"bp\">.</span><span class=\"n\">range</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Y</span>\n</code></pre></div>\n<p>And I want to prove this result:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">complemented_closed</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"n\">ğ•‚</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">RCLike</span><span class=\"w\"> </span><span class=\"n\">ğ•‚</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">NormedAddCommGroup</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">NormedSpace</span><span class=\"w\"> </span><span class=\"n\">ğ•‚</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Y</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Subspace</span><span class=\"w\"> </span><span class=\"n\">ğ•‚</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">  </span><span class=\"n\">IsComplemented</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"n\">ğ•‚</span><span class=\"w\"> </span><span class=\"n\">Y</span><span class=\"w\"> </span><span class=\"bp\">â†’</span><span class=\"w\"> </span><span class=\"bp\">@</span><span class=\"n\">IsClosed</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"n\">Y</span>\n</code></pre></div>\n<p>To do so, I've done this:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">complemented_closed</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"n\">ğ•‚</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">RCLike</span><span class=\"w\"> </span><span class=\"n\">ğ•‚</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">NormedAddCommGroup</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">NormedSpace</span><span class=\"w\"> </span><span class=\"n\">ğ•‚</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Y</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Subspace</span><span class=\"w\"> </span><span class=\"n\">ğ•‚</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">  </span><span class=\"n\">IsComplemented</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"n\">ğ•‚</span><span class=\"w\"> </span><span class=\"n\">Y</span><span class=\"w\"> </span><span class=\"bp\">â†’</span><span class=\"w\"> </span><span class=\"bp\">@</span><span class=\"n\">IsClosed</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"n\">Y</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">    </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">Ycomp</span>\n<span class=\"w\">    </span><span class=\"n\">rcases</span><span class=\"w\"> </span><span class=\"n\">Ycomp</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"bp\">âŸ¨</span><span class=\"n\">P</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Pproj</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">ranPeqY</span><span class=\"bp\">âŸ©</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">eqran</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">LinearMap</span><span class=\"bp\">.</span><span class=\"n\">range</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">LinearMap</span><span class=\"bp\">.</span><span class=\"n\">range</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">P</span><span class=\"bp\">.</span><span class=\"n\">toLinearMap</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">      </span><span class=\"n\">rfl</span>\n<span class=\"w\">    </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">â†</span><span class=\"w\"> </span><span class=\"n\">ranPeqY</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">eqran</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">range_of_projection_eq_ker</span><span class=\"w\"> </span><span class=\"n\">Pproj</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">ker_closed</span>\n<span class=\"w\">    </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"bp\">@</span><span class=\"n\">sub_continuous</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"n\">ğ•‚</span>\n<span class=\"w\">    </span><span class=\"bp\">Â·</span><span class=\"w\"> </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">id_continuous</span>\n<span class=\"w\">    </span><span class=\"bp\">Â·</span><span class=\"w\"> </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"bp\">.</span><span class=\"n\">continuous</span>\n</code></pre></div>\n<p>Where the proofs of the theorems <code>range_of_projection_eq_ker</code>, <code>sub_continuous</code> and <code>id_continuous</code> are <a href=\"https://live.lean-lang.org/#codez=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\">here</a></p>\n<p>However, I fell like all I've used is already proven but I can't find it or make it work properly. How can I improve this proof?</p>\n<p>Thanks in advance</p>",
        "id": 474597846,
        "sender_full_name": "Esteban MartÃ­nez VaÃ±Ã³",
        "timestamp": 1727964069
    },
    {
        "content": "<p><code>sub_continuous</code> is <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Continuous.sub#doc\">docs#Continuous.sub</a>, <code>id_continuous</code> can be obtained with <code>continuous_id</code>, and <code>fun_prop</code> can be used to prove some of these things (although it seems to want eta-expanded versions). Also, it's a bit strange to assume that <code>M N</code> are <code>AddCommGroup</code>s but, <code>R</code> is only a <code>Semiring</code>.</p>",
        "id": 474603568,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1727965560
    },
    {
        "content": "<p>Also, we have <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=LinearMap.IsProj#doc\">docs#LinearMap.IsProj</a></p>",
        "id": 474605340,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1727966036
    },
    {
        "content": "<p>Thanks for the documentation, that simplifies a lot what I was doing.</p>",
        "id": 474613772,
        "sender_full_name": "Esteban MartÃ­nez VaÃ±Ã³",
        "timestamp": 1727967564
    }
]