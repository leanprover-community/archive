[
    {
        "content": "<p>I've encountered a problem while defining a topology on CommRingCat^op, that <code>[Algebra R S]</code> is mathematically equivalent to a ring hom <code>R -&gt;+* S</code>, but in Lean they are not defeq-equivalent, because there is a <code>SMul R S</code> instance that is not always defeq to <code>algebraMap R S r * s</code></p>\n<p>Then I realised that I might need to canonicalise an algebra to \"fix\" this problem, so my current solution is to make a type synonym <code>Canon R S</code> with an algebra instance where the SMul has been \"fixed\".</p>\n<p>I haven't tested it yet (I just came up with this idea), but I'll see if it works, and I'm also posting it here to get further advice.</p>",
        "id": 529437447,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1752835616
    },
    {
        "content": "<p>\"fixed\" is of course very much relative to the context. Because in a different setting, <code>S</code> might already have a module structure over <code>R</code>, and you want to preserve that for some reason. For example if <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>R</mi><mo>=</mo><mi mathvariant=\"double-struck\">Z</mi></mrow><annotation encoding=\"application/x-tex\">R= \\Z</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6889em;\"></span><span class=\"mord mathbb\">Z</span></span></span></span>.</p>",
        "id": 529440749,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1752836808
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"112680\">@Johan Commelin</span> yes, which is why it's a type synonym here to solve a very specific problem that I encountered</p>",
        "id": 529441458,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1752837113
    },
    {
        "content": "<p>to elaborate more, <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/CategoryTheory/Sites/Sieves.html#CategoryTheory.Presieve\">CategoryTheory.Presieve</a> says <code>(⦃Y : C⦄ → Set (Y ⟶ X))</code> so this already forces the ring hom to be the algebra</p>",
        "id": 529441604,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1752837179
    },
    {
        "content": "<p>This type synonym already exists as <code>(R.mkUnder S). right</code></p>",
        "id": 529445982,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1752839256
    },
    {
        "content": "<p>thanks!</p>",
        "id": 529446036,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1752839277
    },
    {
        "content": "<p>ok, I successfully solved my problem using Canon, so this is good news</p>",
        "id": 529446446,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1752839462
    },
    {
        "content": "<p>I don't think I should change Canon to mkUnder because mkUnder requires CommRing and requires the two rings to be in the same universe</p>",
        "id": 529447370,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1752839875
    },
    {
        "content": "<p>It seems a little odd to me to create a synonym to only change defeq</p>",
        "id": 529676471,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1753004974
    }
]