[
    {
        "content": "<p>Currently the type of the normal closure, <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/FieldTheory/Normal/Closure.html#IntermediateField.normalClosure\">IntermediateField.normalClosure</a> is</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">noncomputable</span><span class=\"w\"> </span><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">IntermediateField</span><span class=\"bp\">.</span><span class=\"n\">normalClosure</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">F</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u_1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">K</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u_2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">L</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u_3</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"o\">[</span><span class=\"n\">Field</span><span class=\"w\"> </span><span class=\"n\">F</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Field</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Field</span><span class=\"w\"> </span><span class=\"n\">L</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Algebra</span><span class=\"w\"> </span><span class=\"n\">F</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Algebra</span><span class=\"w\"> </span><span class=\"n\">F</span><span class=\"w\"> </span><span class=\"n\">L</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">  </span><span class=\"n\">IntermediateField</span><span class=\"w\"> </span><span class=\"n\">F</span><span class=\"w\"> </span><span class=\"n\">L</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">...</span>\n</code></pre></div>\n<p>In particular there are three fields <code>F</code>, <code>K</code> and <code>L</code> and two extensions <code>K/F</code> and <code>L/F</code>. The result is an <code>IntermediateField F L</code>. Note that we don't require <code>L</code> to be an <code>K</code>-algebra.</p>\n<p>Do we really want such a generality rather than having a tower of fields <code>L/K/F</code>? I am asking because in this case the normal closure could be an <code>IntermediateField K L</code>, something that looks more reasonable to me. I <em>suspect</em> that the current generality is one the cause of the slowness of <a href=\"https://github.com/leanprover-community/mathlib4/pull/28797\">#28797</a>: indeed the definition of <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/FieldTheory/Normal/Closure.html#normalClosure.algebra\">normalClosure.algebra</a> (that requires to have a tower) is rather indirect and would be automatic if the normal closure is an <code>IntermediateField K L</code>.</p>",
        "id": 543516421,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1759839482
    },
    {
        "content": "<p>Another possibility is to just forget all this <code>IntermediateField</code> and defining the normal closure as a type with the required instances (as we did for the ring of integers), but I don't know how much work is needed.</p>",
        "id": 543518381,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1759840027
    },
    {
        "content": "<p>Concerning having it only as an <code>IntermediateField K L</code> I think that this would not be a good idea, because as it is now you can claim that <code>IntermediateField.normalClosure</code>is Galois over <code>F</code> but if you throw it away you lose some mathematical information. On the other hand, I do not see any counterargument for adding that <code>L</code> be a <code>K</code>-algebra.</p>",
        "id": 543567688,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1759852420
    },
    {
        "content": "<p>Ah yes, for Galois considerations it is actually better as it is.</p>",
        "id": 543577295,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1759855106
    }
]