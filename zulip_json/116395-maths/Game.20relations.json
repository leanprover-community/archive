[
    {
        "content": "<p>Combinatorial games are a preorder. To my knowledge, they're the only ordered structure in Mathlib, where the ordering is a main object of study, that is not also a partial order.</p>\n<p>This has given rise to some unorthodox notation. I'm particularly interested in bringing up <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=SetTheory.PGame.LF#doc\">docs#SetTheory.PGame.LF</a> and <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=SetTheory.PGame.Fuzzy#doc\">docs#SetTheory.PGame.Fuzzy</a></p>",
        "id": 484720041,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1732713820
    },
    {
        "content": "<p><code>x ⧏ y</code> is the same thing as <code>¬ y ≤ x</code>, while <code>x ‖ y</code> is just the incomparable relation.</p>",
        "id": 484720741,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1732714031
    },
    {
        "content": "<p>The former had historical reason for existing, as it had to be defined through simultaneous induction alongside the <code>≤</code> relation. But this hasn't been the case ever since we defined <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Sym2.GameAdd#doc\">docs#Sym2.GameAdd</a>.</p>",
        "id": 484721667,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1732714303
    },
    {
        "content": "<p>I propose we refactor it out.</p>",
        "id": 484721789,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1732714332
    },
    {
        "content": "<p>As for <code>‖</code>, I think we should create <code>IncompRel</code> for a general partial order (if it doesn't already exist under another name) and make it scoped notation for that.</p>",
        "id": 484721889,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1732714369
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"387244\">@Yaël Dillies</span></p>",
        "id": 484722874,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1732714632
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"459227\">Violeta Hernández</span> <a href=\"#narrow/stream/116395-maths/topic/Game.20relations/near/484721789\">said</a>:</p>\n<blockquote>\n<p>I propose we refactor it out.</p>\n</blockquote>\n<p>I think the notation should remain, and perhaps even the definition, just as an <code>abbrev</code></p>",
        "id": 484727937,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1732716067
    },
    {
        "content": "<p>I don't think the less or fuzzy relation on games is any better behaved in games than in any other preorders or partial orders</p>",
        "id": 484729597,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1732716496
    },
    {
        "content": "<p>From experience, it's common to talk about fuzzy games, but this less or fuzzy relation seems much rarer</p>",
        "id": 484730099,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1732716621
    },
    {
        "content": "<p>I've only seen it used by Conway</p>",
        "id": 484730130,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1732716632
    },
    {
        "content": "<p>Besides this, we have a lot of order lemmas throughout Mathlib stated in terms of \"not ≤\", and having a notation for this would just make it harder to find them</p>",
        "id": 484730351,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1732716704
    },
    {
        "content": "<p>Alright</p>",
        "id": 484732408,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1732717253
    },
    {
        "content": "<p>Oh yeah and if we're going to deprecate <code>LF</code>, we can recover Yaël's keybind <code>\\lf</code> for <code>⌊</code></p>",
        "id": 484778913,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1732732682
    },
    {
        "content": "<p>I remember them complaining about this <span aria-label=\"stuck out tongue\" class=\"emoji emoji-1f61b\" role=\"img\" title=\"stuck out tongue\">:stuck_out_tongue:</span></p>",
        "id": 484778948,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1732732687
    },
    {
        "content": "<p>Adding to this. We could also deprecate <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=SetTheory.PGame.Equiv#doc\">docs#SetTheory.PGame.Equiv</a> and instead make it local notation for <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=AntisymmRel#doc\">docs#AntisymmRel</a></p>",
        "id": 484808672,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1732746446
    },
    {
        "content": "<p>These three changes combined will probably cut the length of the <code>PGame</code> file in half</p>",
        "id": 484808820,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1732746518
    },
    {
        "content": "<p>Unrelated question, but why does <code>AntisymmRel</code> take in a relation argument? Is there any situation where we want to use it with a relation that isn't <code>≤</code>?</p>",
        "id": 484808989,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1732746611
    },
    {
        "content": "<p>Oh and also</p>",
        "id": 484813412,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1732749401
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"387244\">@Yaël Dillies</span> Do you remember if I ever made an <code>IncompRel</code> PR back in Mathlib3? I couldn't find it but I'm pretty sure I did</p>",
        "id": 484813426,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1732749417
    },
    {
        "content": "<p>If not it shouldn't be hard to make one from scratch</p>",
        "id": 484813463,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1732749447
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 484814616,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1732750242
    },
    {
        "content": "<p>Dug out from my inbox: <a href=\"https://github.com/leanprover-community/mathlib3/pull/15168\">https://github.com/leanprover-community/mathlib3/pull/15168</a></p>",
        "id": 484814954,
        "sender_full_name": "Junyan Xu",
        "timestamp": 1732750464
    },
    {
        "content": "<p>Another question: would it make sense to create notations for <code>AntisymmRel</code> and <code>IncompRel</code>? Typing both of them out explicitly is quite annoying when we can just write <code>≤</code> or <code>&lt;</code></p>",
        "id": 484815154,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1732750597
    },
    {
        "content": "<p>It might be silly, but I'm thinking we could use <code>⋚</code> for <code>AntisymmRel</code>. Of course, if there's any other established notation it'd be better to just use that.</p>",
        "id": 484815415,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1732750786
    },
    {
        "content": "<p>We currently use <code>≈</code> for <code>Equiv</code>, but this clashes with the <code>Setoid.r</code> symbol.</p>",
        "id": 484815479,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1732750808
    },
    {
        "content": "<p>For <code>IncompRel</code> we can just reuse <code>‖</code>, I think. We can make it a scoped notation so it doesn't clash with norms.</p>",
        "id": 484815502,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1732750839
    },
    {
        "content": "<p><a href=\"#narrow/channel/116395-maths/topic/Well-founded.20recursion.20for.20pgames/near/290692735\">previous</a> <a href=\"#narrow/channel/116395-maths/topic/Surreal.20numbers/near/281237362\">proposals</a></p>",
        "id": 484815665,
        "sender_full_name": "Junyan Xu",
        "timestamp": 1732750983
    },
    {
        "content": "<p>Oh that explains why this all felt familiar</p>",
        "id": 484815798,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1732751084
    },
    {
        "content": "<p>I'm currently proposing to make this notation more general, rather than just keeping it for games. I can't imagine they're the only partial order for which we care about these relations.</p>",
        "id": 484815842,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1732751123
    },
    {
        "content": "<p>Forgot to link to <a href=\"https://github.com/leanprover-community/mathlib4/pull/19554\">#19554</a></p>",
        "id": 484958520,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1732812598
    },
    {
        "content": "<p>This PR introduces the <code>⋚</code> notation for <code>AntisymmRel</code>. It'd be great to hear opinions on whether this is the best notation possible, or whether we should scope it, etc.</p>",
        "id": 484959235,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1732812849
    },
    {
        "content": "<p>I've opened <a href=\"https://github.com/leanprover-community/mathlib4/pull/19588\">#19588</a> to keep track of order refactors to the <code>PGame</code> file</p>",
        "id": 484997403,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1732836522
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"459227\">Violeta Hernández</span> <a href=\"#narrow/channel/116395-maths/topic/Game.20relations/near/484730130\">said</a>:</p>\n<blockquote>\n<p>I've only seen it used by Conway</p>\n</blockquote>\n<p>It is pretty commonly used in CGT. For example, it is used in <a href=\"https://books.google.com/books/about/Lessons_in_Play.html?id=U5qfDwAAQBAJ\">Lessons in Play</a> as well as Siegel's <a href=\"https://www.google.com/books/edition/Combinatorial_Game_Theory/VUVrAAAAQBAJ?hl=en&amp;gbpv=0\">Combinatorial Game Theory</a>.  </p>\n<p>I hope we at least retain the notation as an <code>abbrev</code>, as suggested by <span class=\"user-mention\" data-user-id=\"690858\">@Daniel Weber</span></p>",
        "id": 485255573,
        "sender_full_name": "Ted Hwa",
        "timestamp": 1732995067
    },
    {
        "content": "<p>I find results like the following more intuitive when stated with the ⧏ notation:<br>\n<code>x ⧏ y</code> and <code>y ≤ z</code> implies <code>x ⧏ z</code> </p>\n<p>It looks like a sort of transitive property, or in terms of games, \"the sum of a winning game and a losing game is a winning game\".</p>",
        "id": 485414499,
        "sender_full_name": "Ted Hwa",
        "timestamp": 1732995393
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"459227\">Violeta Hernández</span> <a href=\"#narrow/channel/116395-maths/topic/Game.20relations/near/484730351\">said</a>:</p>\n<blockquote>\n<p>Besides this, we have a lot of order lemmas throughout Mathlib stated in terms of \"not ≤\", and having a notation for this would just make it harder to find them</p>\n</blockquote>\n<p>Would using an <code>abbrev</code> allow Lean to \"see through\" the notation and use the order lemmas stated in terms of \"not ≤\"  ?  If not, is there some other mechanism that would allow it? It would be great to be able to use the standard CGT notation <code>⧏</code> without having to restate lemmas.</p>",
        "id": 485414961,
        "sender_full_name": "Ted Hwa",
        "timestamp": 1732995790
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"715872\">Ted Hwa</span> <a href=\"#narrow/stream/116395-maths/topic/Game.20relations/near/485414499\">said</a>:</p>\n<blockquote>\n<p>I find results like the following more intuitive when stated with the ⧏ notation:<br>\n<code>x ⧏ y</code> and <code>y ≤ z</code> implies <code>x ⧏ z</code> </p>\n<p>It looks like a sort of transitive property, or in terms of games, \"the sum of a winning game and a losing game is a winning game\".</p>\n</blockquote>\n<p>Conversely, I find it's easier to find proofs for these results when stated in terms of ≤. For instance, this is just <code>fun hzx =&gt; hyx (hyz.trans hzx)</code>.</p>",
        "id": 485419314,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1732999796
    },
    {
        "content": "<p>I definitely think it'd be suboptimal to prove <code>PGame.lf_of_lf_of_le</code> when we could prove <code>not_le_of_not_le_of_le</code> for general preorders</p>",
        "id": 485419415,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1732999873
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"715872\">Ted Hwa</span> <a href=\"#narrow/stream/116395-maths/topic/Game.20relations/near/485414961\">said</a>:</p>\n<blockquote>\n<p>Would using an <code>abbrev</code> allow Lean to \"see through\" the notation and use the order lemmas stated in terms of \"not ≤\"  ?  If not, is there some other mechanism that would allow it? It would be great to be able to use the standard CGT notation <code>⧏</code> without having to restate lemmas.</p>\n</blockquote>\n<p>Using abbrev is definitely not the answer since it won't work in <code>rw</code> (and setting the simp normal form of not LE to LF seems very questionable to me). We could just keep this as a notation, but I feel like it'd just make things less intuitive for everyone else who isn't super familiar with CGT.</p>",
        "id": 485419555,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1733000018
    },
    {
        "content": "<p>Frankly even I, having some familiarity with CGT, find Conway's conventions perplexing. For the longest time I assumed being \"fuzzy\" or \"confused\" with 0 implied being at some sort of infinitesimal distance. Just using the term \"incomparable\" would have gotten things across better.</p>",
        "id": 485419791,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1733000232
    },
    {
        "content": "<p>If the goal of Mathlib is interoperability, we should be speaking in the language of preorders rather than the dialect of games.</p>",
        "id": 485419890,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1733000326
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"715872\">Ted Hwa</span> <a href=\"#narrow/channel/116395-maths/topic/Game.20relations/near/485414499\">said</a>:</p>\n<blockquote>\n<p>I find results like the following more intuitive when stated with the ⧏ notation:<br>\n<code>x ⧏ y</code> and <code>y ≤ z</code> implies <code>x ⧏ z</code> </p>\n<p>It looks like a sort of transitive property, or in terms of games, \"the sum of a winning game and a losing game is a winning game\".</p>\n</blockquote>\n<p>This isn't quite right? I think it means: if a player wins moving first in A (= y - x), and wins moving second in B (= z - y), then they wins moving first in A + B (= z - x). It's weird to call B a losing game because the player may also win when moving first in B (i.e. if B &gt; 0).</p>",
        "id": 485482595,
        "sender_full_name": "Junyan Xu",
        "timestamp": 1733060633
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"224323\">Junyan Xu</span> <a href=\"#narrow/channel/116395-maths/topic/Game.20relations/near/485482595\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"715872\">Ted Hwa</span> <a href=\"#narrow/channel/116395-maths/topic/Game.20relations/near/485414499\">said</a>:</p>\n<blockquote>\n<p>I find results like the following more intuitive when stated with the ⧏ notation:<br>\n<code>x ⧏ y</code> and <code>y ≤ z</code> implies <code>x ⧏ z</code> </p>\n<p>It looks like a sort of transitive property, or in terms of games, \"the sum of a winning game and a losing game is a winning game\".</p>\n</blockquote>\n<p>This isn't quite right? I think it means: if a player wins moving first in A (= y - x), and wins moving second in B (= z - y), then they wins moving first in A + B (= z - x). It's weird to call B a losing game because the player may also win when moving first in B (i.e. if B &gt; 0).</p>\n</blockquote>\n<p>Yes, you are right.  I was really thinking of impartial games when I said \"winning game\" and \"losing game\".  It should be \"wins moving first\" and \"wins moving second\" for general games.</p>",
        "id": 485505922,
        "sender_full_name": "Ted Hwa",
        "timestamp": 1733079575
    },
    {
        "content": "<p>Impartial games are either <code>=</code> or <code>‖</code>, and the <code>&lt;</code> case never happens, so you probably won't use the symbols <code>⧏</code> and <code>≤</code> for them :)</p>",
        "id": 485508261,
        "sender_full_name": "Junyan Xu",
        "timestamp": 1733081476
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"224323\">Junyan Xu</span> <a href=\"#narrow/channel/116395-maths/topic/Game.20relations/near/485508261\">said</a>:</p>\n<blockquote>\n<p>Impartial games are either <code>=</code> or <code>‖</code>, and the <code>&lt;</code> case never <code>‖</code>, and the <code>&lt;</code> case never happens, so you probably won't use the symbols <code>⧏</code> and <code>≤</code> for them :)</p>\n</blockquote>\n<p>Yes, I know. For impartial games, the sum of two losing games is a losing game, and the sum of a winning game and a losing game is a winning game. It's just the way I remind myself of the general results for <code>⧏</code> and <code>≤</code> - the impartial \"losing game\" becomes <code>≤</code> and the impartial \"winning game\" corresponds to <code>⧏</code>.</p>",
        "id": 485510097,
        "sender_full_name": "Ted Hwa",
        "timestamp": 1733083022
    },
    {
        "content": "<p>To get back to the original topic of the thread - I still like the idea of keeping the CGT standard notation <code>⧏</code>. Maybe you could leave the notation in <code>PGame</code> rather than <code>Mathlib.Order</code> if you feel it's too nonstandard outside of CGT.   I did this <a href=\"https://live.lean-lang.org/#codez=JYWwDg9gTgLgBAWQIYwBYBtgCMB0B5KAEwFMocARYgMwGccAFJWYJdAkqAKE+ADsrgAD3QAuAKwAGOACI4gecoZcALwA+OFQCuvOILgBPZWoA1+uIBMiHdzTFoxEHF4QYAfXTFnEKq/efnjl25wANr0UDZEpHCAjcAAunAA3roGAF5wItEAvnAAFKiAgQRpOub6AJQ5qIBBBIUmqRZ6Zek1xboiSnBYepxwcDTQUJ2c1rb26F6+bh5eo8Gh4RzRcYmmqelRWbkF6bp1ZblV6QYKyQ1FR2ltHV1wxIJIAMbw/t6Tz75PgflwlZxAA\">little experiement</a> with the notation. Maybe it's too naive, but it seems to work okay.</p>\n<p>Another nice thing about <code>⧏</code> is that we have suitable <code>Trans</code> <a href=\"https://github.com/leanprover-community/mathlib4/blob/65cc54340c823eff8861b7d448c2755bbc87bae8/Mathlib/SetTheory/Game/PGame.lean#L643\">instances</a> defined so that <code>calc</code> sequences with <code>⧏</code>and <code>≤</code> work correctly.</p>",
        "id": 485510497,
        "sender_full_name": "Ted Hwa",
        "timestamp": 1733083436
    },
    {
        "content": "<p>Eh, sure. We can keep it as notation. But most if not all of the API that currently exists for it should exist in the generality of ≤ for preorders instead.</p>",
        "id": 485511956,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1733084833
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"715872\">Ted Hwa</span> <a href=\"#narrow/stream/116395-maths/topic/Game.20relations/near/485510497\">said</a>:</p>\n<blockquote>\n<p>Another nice thing about <code>⧏</code> is that we have suitable <code>Trans</code> <a href=\"https://github.com/leanprover-community/mathlib4/blob/65cc54340c823eff8861b7d448c2755bbc87bae8/Mathlib/SetTheory/Game/PGame.lean#L643\">instances</a> defined so that <code>calc</code> sequences with <code>⧏</code>and <code>≤</code> work correctly.</p>\n</blockquote>\n<p>Do we even do this as of right now?</p>",
        "id": 485522272,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1733094945
    },
    {
        "content": "<p>Also, I'm curious, would registering a <code>Trans ≤ (≥)^C (≥)^C</code> instance have the same effect?</p>",
        "id": 485522353,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1733094998
    }
]