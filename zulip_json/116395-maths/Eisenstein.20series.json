[
    {
        "content": "<p>So I have now finished porting some Eisenstein series things I had in Lean 3. The new repo is <a href=\"https://github.com/CBirkbeck/ModularForms_Lean4\">here</a>. So now the task is to start moving this to mathlib. Currently the definition of Eisenstein series is quite basic: </p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"sd\">/-- The function on `ℤ × ℤ` whose sum defines an Eisenstein series.-/</span>\n<span class=\"kd\">def</span> <span class=\"n\">eise</span> <span class=\"o\">(</span><span class=\"n\">k</span> <span class=\"o\">:</span> <span class=\"n\">ℤ</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">z</span> <span class=\"o\">:</span> <span class=\"n\">ℍ</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">ℤ</span> <span class=\"bp\">×</span> <span class=\"n\">ℤ</span> <span class=\"bp\">→</span> <span class=\"n\">ℂ</span> <span class=\"o\">:=</span> <span class=\"k\">fun</span> <span class=\"n\">x</span> <span class=\"bp\">=&gt;</span> <span class=\"mi\">1</span> <span class=\"bp\">/</span> <span class=\"o\">(</span><span class=\"n\">x.1</span> <span class=\"bp\">*</span> <span class=\"n\">z.1</span> <span class=\"bp\">+</span> <span class=\"n\">x.2</span><span class=\"o\">)</span> <span class=\"bp\">^</span> <span class=\"n\">k</span>\n\n<span class=\"sd\">/-- The function defining the Eisenstein series of weight `k : ℤ` -/</span>\n<span class=\"kd\">def</span> <span class=\"n\">Eisenstein_tsum</span> <span class=\"o\">(</span><span class=\"n\">k</span> <span class=\"o\">:</span> <span class=\"n\">ℤ</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">ℍ</span> <span class=\"bp\">→</span> <span class=\"n\">ℂ</span> <span class=\"o\">:=</span> <span class=\"k\">fun</span> <span class=\"n\">z</span> <span class=\"bp\">=&gt;</span> <span class=\"bp\">∑'</span> <span class=\"n\">x</span> <span class=\"o\">:</span> <span class=\"n\">ℤ</span> <span class=\"bp\">×</span> <span class=\"n\">ℤ</span><span class=\"o\">,</span> <span class=\"n\">eise</span> <span class=\"n\">k</span> <span class=\"n\">z</span> <span class=\"n\">x</span>\n</code></pre></div>\n<p>For these definitions I can show that it defines a modular form (of level 1), have the expected q-expansion and <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>G</mi><mn>4</mn></msub></mrow><annotation encoding=\"application/x-tex\">G_4</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">G</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">4</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> is not identically zero. The question is, what should mathlibs definition of Eisenstein series be? This is far from the most general definition, but a realistic generalization would be as a function on lattices in <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">C</mi></mrow><annotation encoding=\"application/x-tex\">\\mathbb{C}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6889em;\"></span><span class=\"mord mathbb\">C</span></span></span></span>, but I don't know the best way to define these lattices (and I'm not sure if we already have them for say, complex elliptic curves). </p>\n<p>There is another issue, which is that defined like this, for weight 2, the function you get is the zero function (because the infinite sum is not absolutely convergent (i.e. summable in Lean )). But <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>G</mi><mn>2</mn></msub></mrow><annotation encoding=\"application/x-tex\">G_2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">G</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> is a non-trivial  interesting function. So if we defined them via the q-expansions the definition would work for weight 2 (but at weight 2 would not define a modular form (of level 1)).</p>\n<p>So I wanted to see what opinions/ideas people here have. Should the definition be (1) in terms of lattices (or something even more general?) (2) keep the current one (with <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>G</mi><mn>2</mn></msub></mrow><annotation encoding=\"application/x-tex\">G_2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">G</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> needing to be a special case), or (3) instead use q-expansions (and be happy that with this definition not all Eisenstein series are modular forms). (sorry I don't know how to make a poll)</p>",
        "id": 390295793,
        "sender_full_name": "Chris Birkbeck",
        "timestamp": 1694433897
    },
    {
        "content": "<p>These are only level 1 Eisenstein series; more generally people sum over x in some congruence class modulo N.</p>",
        "id": 390300753,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1694435664
    },
    {
        "content": "<p>Yes that's a good point. For other levels, I was thinking of using subseries of the definition above.</p>",
        "id": 390303212,
        "sender_full_name": "Chris Birkbeck",
        "timestamp": 1694436514
    },
    {
        "content": "<p>I think <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>G</mi><mn>2</mn></msub></mrow><annotation encoding=\"application/x-tex\">G_2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">G</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> as a separate definition seems sensible; this seems more extensible to other levels. Why not just start with some more general definition (e.g. I found <a href=\"https://math.stackexchange.com/questions/51375/eisenstein-series-associated-with-the-cusps-of-a-congruence-subgroup\">this</a> in math​.se, not sure if it's \"the\" most general defn) and maybe make an abbrev for the level 1 case? It doesn't seem to me that proving basic things about this specific more general notion are much harder, for example.</p>\n<p>Defining things via the q-expansion doesn't seem the greatest, IMO, unless there's a very generalised way to arrive at the q-expansion</p>",
        "id": 390307412,
        "sender_full_name": "Eric Rodriguez",
        "timestamp": 1694437845
    },
    {
        "content": "<p>Do you mean as relating to cusps? If so that's like what Kevin suggested, which I think is a reasonable generalization (and hopefully not too much work given what I've done)</p>",
        "id": 390323670,
        "sender_full_name": "Chris Birkbeck",
        "timestamp": 1694442609
    },
    {
        "content": "<p>If you care about forms with character then another approach is having <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>χ</mi></mrow><annotation encoding=\"application/x-tex\">\\chi</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\">χ</span></span></span></span> and <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>ψ</mi></mrow><annotation encoding=\"application/x-tex\">\\psi</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">ψ</span></span></span></span> Dirichlet characters of level <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>L</mi></mrow><annotation encoding=\"application/x-tex\">L</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\">L</span></span></span></span> and <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>M</mi></mrow><annotation encoding=\"application/x-tex\">M</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span></span></span></span>, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>k</mi><mo>≥</mo><mn>3</mn></mrow><annotation encoding=\"application/x-tex\">k\\geq3</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8304em;vertical-align:-0.136em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03148em;\">k</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">≥</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">3</span></span></span></span> an integer, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>t</mi></mrow><annotation encoding=\"application/x-tex\">t</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6151em;\"></span><span class=\"mord mathnormal\">t</span></span></span></span> a positive integer, and then defining <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>E</mi><mi>k</mi></msub><mo stretchy=\"false\">(</mo><mi>z</mi><mo separator=\"true\">;</mo><mi>χ</mi><mo separator=\"true\">,</mo><mi>ψ</mi><mo separator=\"true\">,</mo><mi>t</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">E_k(z;\\chi,\\psi,t)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span><span class=\"mpunct\">;</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">χ</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">ψ</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">t</span><span class=\"mclose\">)</span></span></span></span> to be the sum of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>χ</mi><mo stretchy=\"false\">(</mo><mi>c</mi><mo stretchy=\"false\">)</mo><mover accent=\"true\"><mi>ψ</mi><mo stretchy=\"true\">‾</mo></mover><mo stretchy=\"false\">(</mo><mi>d</mi><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">(</mo><mi>c</mi><mi>M</mi><mi>t</mi><mi>z</mi><mo>+</mo><mi>d</mi><msup><mo stretchy=\"false\">)</mo><mrow><mo>−</mo><mi>k</mi></mrow></msup></mrow><annotation encoding=\"application/x-tex\">\\chi(c)\\overline{\\psi}(d)(cMtz+d)^{-k}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.1444em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">χ</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">c</span><span class=\"mclose\">)</span><span class=\"mord overline\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8944em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">ψ</span></span></span><span style=\"top:-3.8144em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"overline-line\" style=\"border-bottom-width:0.04em;\"></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1944em;\"><span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">d</span><span class=\"mclose\">)</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">c</span><span class=\"mord mathnormal\">Mt</span><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0991em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">d</span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8491em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">−</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span></span></span></span></span></span></span></span></span> over all <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mi>c</mi><mo separator=\"true\">,</mo><mi>d</mi><mo stretchy=\"false\">)</mo><mo>≠</mo><mo stretchy=\"false\">(</mo><mn>0</mn><mo separator=\"true\">,</mo><mn>0</mn><mo stretchy=\"false\">)</mo><mi mathvariant=\"normal\">.</mi></mrow><annotation encoding=\"application/x-tex\">(c,d)\\not=(0,0).</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">c</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">d</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\"><span class=\"mord vbox\"><span class=\"thinbox\"><span class=\"rlap\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"inner\"><span class=\"mord\"><span class=\"mrel\"></span></span></span><span class=\"fix\"></span></span></span></span></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.3669em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">0</span><span class=\"mclose\">)</span><span class=\"mord\">.</span></span></span></span>  You get a basis for Eisenstein series of level <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi mathvariant=\"normal\">Γ</mi><mn>1</mn></msub><mo stretchy=\"false\">(</mo><mi>N</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\Gamma_1(N)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord\">Γ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">N</span><span class=\"mclose\">)</span></span></span></span> with these (restrict to <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>χ</mi><mo separator=\"true\">,</mo><mi>ψ</mi></mrow><annotation encoding=\"application/x-tex\">\\chi,\\psi</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\">χ</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">ψ</span></span></span></span> primitive and <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>M</mi><mi>L</mi><mi>t</mi><mo>∣</mo><mi>N</mi><mi mathvariant=\"normal\">.</mi></mrow><annotation encoding=\"application/x-tex\">MLt\\mid N.</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span><span class=\"mord mathnormal\">L</span><span class=\"mord mathnormal\">t</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">∣</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">N</span><span class=\"mord\">.</span></span></span></span>)</p>",
        "id": 390341247,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1694447383
    },
    {
        "content": "<p>Do we have Riemann-Roch? How feasible might it be to define the cuspidal subspace of modular forms of any given weight/level/character? (In which case the Eisenstein series could be defined as things spanning the non-cuspidal space... Of course it would be better to also have explicit access to their Fourier coefficients...) Do we also have non-holomorphic Eisenstein series? (Which in many ways are more useful, e.g., in Rankin-Selberg, converse theorems, etc.) I really struggled with this when I thought about it a while ago, because mathlib really wants the most general form of everything, so you can't even get started. You wouldn't want to do, say, the GL(2) level 1 non-holomorphic Eisenstein series (and all the applications that would come as a result...), because you should really be doing Langlands Eisenstein series with arbitrary parabolics twisted by Maass forms, etc etc...?</p>",
        "id": 390345475,
        "sender_full_name": "Alex Kontorovich",
        "timestamp": 1694448623
    },
    {
        "content": "<p>We don't even have algebraic curves and whilst we have Riemann surfaces we don't really have any theorems about them. So no Riemann-Rochs yet (there are two Riemann-Roch theorems, an algebraic geometry one and a differential geometry one).</p>",
        "id": 390345630,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1694448679
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"252920\">Alex Kontorovich</span> <a href=\"#narrow/stream/116395-maths/topic/Eisenstein.20series/near/390345475\">said</a>:</p>\n<blockquote>\n<p>Do we have Riemann-Roch?</p>\n</blockquote>\n<p>No <span aria-label=\"sad\" class=\"emoji emoji-2639\" role=\"img\" title=\"sad\">:sad:</span> . But people have been talking about it for a while <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 390345649,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1694448685
    },
    {
        "content": "<p>I've heard \"Riemann-Roch\" quite a few times here on zulip, but I don't know what happened in the end</p>",
        "id": 390345667,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1694448691
    },
    {
        "content": "<p>I'm under the impression that formalizing the proof in Serre's book on class fields is very doable with current mathlib.</p>",
        "id": 390345861,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1694448742
    },
    {
        "content": "<p>Regarding \"correct generality\" -- I realised a while ago that \"correct generality\" doesn't necessarily mean \"some mathematician wrote down a more general object so we can't have the special object\". For example one would then argue that we can't have elliptic curves until we have abelian varieties, which we can't have until we have group varieties etc etc. But something is fishy about this argument: it's well known that proving associativity for elliptic curves is hard but proving associativity for abelian varieties is trivial because they're group varieties. So something funny is going on :-) I interpret \"correct generality\" now as \"if the object has a user base then make that object, and who cares if it's a special case of a much more general object\". In particular we're allowed to make modular forms even though they're a special case of automorphic forms on a connected reductive group over a global field.</p>",
        "id": 390346336,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1694448900
    },
    {
        "content": "<p>Ok I'm really glad to hear this perspective! :)</p>",
        "id": 390347071,
        "sender_full_name": "Alex Kontorovich",
        "timestamp": 1694449129
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"252920\">Alex Kontorovich</span> <a href=\"#narrow/stream/116395-maths/topic/Eisenstein.20series/near/390345475\">said</a>:</p>\n<blockquote>\n<p>Do we have Riemann-Roch? How feasible might it be to define the cuspidal subspace of modular forms of any given weight/level/character? (In which case the Eisenstein series could be defined as things spanning the non-cuspidal space... Of course it would be better to also have explicit access to their Fourier coefficients...) Do we also have non-holomorphic Eisenstein series? (Which in many ways are more useful, e.g., in Rankin-Selberg, converse theorems, etc.) I really struggled with this when I thought about it a while ago, because mathlib really wants the most general form of everything, so you can't even get started. You wouldn't want to do, say, the GL(2) level 1 non-holomorphic Eisenstein series (and all the applications that would come as a result...), because you should really be doing Langlands Eisenstein series with arbitrary parabolics twisted by Maass forms, etc etc...?</p>\n</blockquote>\n<p>We'll we do have the space of cuspforms, but we don't have any finite dimensionality results for any of the spaces (which we could do without RR, but is still annoying). I agree that its hard to decide and what the level of generality to use is, but as Kevin says, we already didn't define general automorphic forms. That said, I think we definitely should define them for more general levels at least!</p>",
        "id": 390347193,
        "sender_full_name": "Chris Birkbeck",
        "timestamp": 1694449170
    },
    {
        "content": "<p>I'm assuming we have nothing approximating a trace formula, is that right? So no Maass forms... (Even on SL(2,Z)...)</p>",
        "id": 390347967,
        "sender_full_name": "Alex Kontorovich",
        "timestamp": 1694449447
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"252920\">Alex Kontorovich</span> <a href=\"#narrow/stream/116395-maths/topic/Eisenstein.20series/near/390347967\">said</a>:</p>\n<blockquote>\n<p>I'm assuming we have nothing approximating a trace formula, is that right? So no Maass forms... (Even on SL(2,Z)...)</p>\n</blockquote>\n<p>Not that I'm aware of.</p>",
        "id": 390348121,
        "sender_full_name": "Chris Birkbeck",
        "timestamp": 1694449520
    },
    {
        "content": "<p>I think Maass forms would be an excellent test of the multivariable calculus library because you'll have to write down \"...is an eigenvalue for the Laplacian\" and the analysts are very reluctant to give people access to things like partial d/dx because they don't like picking a basis  :-) Everything else will be the same as for the modular form case.</p>",
        "id": 390358078,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1694453418
    },
    {
        "content": "<p>But for the Laplacian it would be better to work more conceptually and this might involve some Lie algebras etc.</p>",
        "id": 390358149,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1694453448
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/stream/116395-maths/topic/Eisenstein.20series/near/390346336\">said</a>:</p>\n<blockquote>\n<p>Regarding \"correct generality\" -- I realised a while ago that \"correct generality\" doesn't necessarily mean \"some mathematician wrote down a more general object so we can't have the special object\". For example one would then argue that we can't have elliptic curves until we have abelian varieties, which we can't have until we have group varieties etc etc.</p>\n</blockquote>\n<p>There is another term I like to use for this, which is \"trivial generalization\". The idea is, if you can remove a hypothesis to the theorem without breaking the proof, do so; if you can weaken a typeclass assumption without any proof changes, do it. If it can be proven in a more general setting with a more complicated proof (non-trivial generalization), you are allowed but not required to do it. If the more general theorem statement is not <em>directly</em> usable in all cases where the original was, then consider adding the specific theorem statement anyway. (This last sentence explains most large scale \"generalizations\" like \"elliptic curves are abelian varieties\".)</p>",
        "id": 390364630,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1694456083
    },
    {
        "content": "<p>The case of elliptic curves is a bit misleading because a crucial point is there are several equivalent definitions whose equivalence is highly non obvious. As Kevin pointed out, associativity of the group law is trivial if you get to choose the definition.</p>",
        "id": 390364959,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1694456238
    },
    {
        "content": "<p>Sounds like a good time to mention Riemann-Roch again. If we mention it enough times maybe someone will prove it :-)</p>",
        "id": 390365232,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1694456358
    },
    {
        "content": "<p>There's also a heavy imports argument to the generality story: many combinatorial inequalities can be generalised to continuous ones but:</p>\n<ol>\n<li>If we deduced them from the continuous ones, we would introduce very heavy imports in a theory which is otherwise elementary (and which is possibly itself fed into other theories)</li>\n<li>We want to develop the tools needed for the elementary proof anyway, as those will likely get reused later</li>\n</ol>",
        "id": 390375069,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1694460543
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/stream/116395-maths/topic/Eisenstein.20series/near/390358078\">said</a>:</p>\n<blockquote>\n<p>I think Maass forms would be an excellent test of the multivariable calculus library because you'll have to write down \"...is an eigenvalue for the Laplacian\" and the analysts are very reluctant to give people access to things like partial d/dx because they don't like picking a basis  :-) Everything else will be the same as for the modular form case.</p>\n</blockquote>\n<p>For the Laplacian you really don't need partial derivatives. I would guess that the most natural definition is <code>Δ = d^* d</code> (for functions), but that relies on a bunch of differential geometry that we don't have yet. For the hyperbolic plane you can easily just write the Laplacian by hand with the things we already have. For eigenvalues there is no big issue with the domain (thanks to elliptic regularity all eigenvectors are smooth), but if you want to do actual spectral theory, then you need Sobolev spaces to say that the Laplacian is self-adjoint and this will be a huge pain.</p>",
        "id": 390406652,
        "sender_full_name": "Moritz Doll",
        "timestamp": 1694474954
    },
    {
        "content": "<p>technically speaking one has that the Laplacian on complete manifolds is essentially self-adjoint, which means that there is exactly one self-adjoint extension (you start with compactly supported smooth functions), but without Sobolev spaces one has no good characterization of the domain.</p>",
        "id": 390407137,
        "sender_full_name": "Moritz Doll",
        "timestamp": 1694475161
    },
    {
        "content": "<p>I heard rumors that Sobolev spaced are coming.</p>",
        "id": 390408370,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1694475613
    }
]