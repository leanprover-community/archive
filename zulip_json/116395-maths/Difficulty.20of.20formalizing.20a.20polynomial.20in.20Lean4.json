[
    {
        "content": "<p>Hello! I want to formalize the following Polynomial:<br>\n<code>(x^(-3) + x^(-2) + ... + x^2 + x^3) ^ 4</code></p>\n<p>This is my <a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a></p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">Icc</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">-</span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"mi\">3</span>\n\n<span class=\"kn\">noncomputable</span><span class=\"w\"> </span><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">tset</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Polynomial</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"bp\">∑</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"n\">Polynomial</span><span class=\"bp\">.</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">i</span><span class=\"bp\">.</span><span class=\"n\">toNat</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"k\">else</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"n\">Polynomial</span><span class=\"bp\">.</span><span class=\"n\">X</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"bp\">-</span><span class=\"n\">i</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">toNat</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>Is it right? Or maybe it has another way to formalize this.</p>",
        "id": 545204120,
        "sender_full_name": "Brisal",
        "timestamp": 1760601484
    },
    {
        "content": "<p>Maybe it should ues <code>PowerSeries</code>? <span aria-label=\"thinking\" class=\"emoji emoji-1f914\" role=\"img\" title=\"thinking\">:thinking:</span></p>",
        "id": 545205552,
        "sender_full_name": "Brisal",
        "timestamp": 1760601738
    },
    {
        "content": "<p>Indeed! This is not a polynomial</p>",
        "id": 545206009,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1760601818
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"387244\">Yaël Dillies</span> <a href=\"#narrow/channel/116395-maths/topic/Difficulty.20of.20formalizing.20Polynomial.20.20in.20Lean4.2E/near/545206009\">said</a>:</p>\n<blockquote>\n<p>Indeed! This is not a polynomial</p>\n</blockquote>\n<p>I'm really sorry, but I'm not quite sure how to formalize this. Could you please write an example for this one?</p>",
        "id": 545210005,
        "sender_full_name": "Brisal",
        "timestamp": 1760602480
    },
    {
        "content": "<p>It's impossible to formlize \"the polynomial <code>(x^(-3) + x^(-2) + ... + x^2 + x^3) ^ 4</code>\" because that's not a polynomial (the <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>x</mi><mrow><mo>−</mo><mn>3</mn></mrow></msup></mrow><annotation encoding=\"application/x-tex\">x^{-3}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">−</span><span class=\"mord mtight\">3</span></span></span></span></span></span></span></span></span></span></span></span> term is not allowed in a polynomial, by definition of polynomial). So you have to formalize something else. There are power series, Hahn series, rational functions, meromorphic functions and even occasionally-junk-valued functions all called  <code>(x^(-3) + x^(-2) + ... + x^2 + x^3) ^ 4</code> but until you say what the question is very precisely, it's difficult to answer it.</p>",
        "id": 545210686,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1760602596
    },
    {
        "content": "<p>A theorem prover is an extremely pedantic thing. Even if you were to come here asking how to formalize 37, there would be the same question: do you mean the natural number 37, the integer 37, the real number 37, the p-adic number 37, the quaternion 37 etc etc.</p>\n<p>In fact one of the subquestions here is: when you say <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>x</mi><mn>2</mn></msup></mrow><annotation encoding=\"application/x-tex\">x^2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span> you really mean <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn><mo>×</mo><msup><mi>x</mi><mn>2</mn></msup></mrow><annotation encoding=\"application/x-tex\">1\\times x^2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7278em;vertical-align:-0.0833em;\"></span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span>. Which 1 is that?</p>",
        "id": 545211748,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1760602753
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/channel/116395-maths/topic/Difficulty.20of.20formalizing.20Polynomial.20.20in.20Lean4.2E/near/545210686\">said</a>:</p>\n<blockquote>\n<p>It's impossible to formlize \"the polynomial <code>(x^(-3) + x^(-2) + ... + x^2 + x^3) ^ 4</code>\" because that's not a polynomial (the <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>x</mi><mrow><mo>−</mo><mn>3</mn></mrow></msup></mrow><annotation encoding=\"application/x-tex\">x^{-3}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">−</span><span class=\"mord mtight\">3</span></span></span></span></span></span></span></span></span></span></span></span> term is not allowed in a polynomial, by definition of polynomial). So you have to formalize something else. There are power series, Hahn series, rational functions, meromorphic functions and even occasionally-junk-valued functions all called  <code>(x^(-3) + x^(-2) + ... + x^2 + x^3) ^ 4</code> but until you say what the question is very precisely, it's difficult to answer it.</p>\n</blockquote>\n<p>I indeed didn't state the requirements clearly. Actually, I'm formalizing an exercise problem:</p>\n<p>\"Build a generating function for $a_{r}$, the number of integer solutions to <code>e_1 + e_2 + e_3 + e_4 = r, -3 \\leq e_j \\leq 3</code>.\"</p>\n<p>The answer is $<code>x^{-3} + x^{-2} + \\cdots + x^2 + x^3)^4</code>.</p>",
        "id": 545213223,
        "sender_full_name": "Brisal",
        "timestamp": 1760602982
    },
    {
        "content": "<p>Can I ask you another question? Can you build a generating function for <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>b</mi><mi>r</mi></msub></mrow><annotation encoding=\"application/x-tex\">b_{r}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">b</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">r</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>, where <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>b</mi><mi>r</mi></msub></mrow><annotation encoding=\"application/x-tex\">b_{r}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">b</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">r</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> is always 37? What would your answer to that be?</p>",
        "id": 545214411,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1760603165
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/channel/116395-maths/topic/Difficulty.20of.20formalizing.20Polynomial.20.20in.20Lean4.2E/near/545214411\">said</a>:</p>\n<blockquote>\n<p>Can I ask you another question? Can you build a generating function for <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>b</mi><mi>r</mi></msub></mrow><annotation encoding=\"application/x-tex\">b_{r}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">b</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">r</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>, where <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>b</mi><mi>r</mi></msub></mrow><annotation encoding=\"application/x-tex\">b_{r}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">b</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">r</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> is always 37? What would your answer to that be?</p>\n</blockquote>\n<p>Like</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">PowerSeries</span><span class=\"bp\">.</span><span class=\"n\">mk</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">37</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">))</span>\n</code></pre></div>\n<p>? Not for sure.</p>",
        "id": 545216172,
        "sender_full_name": "Brisal",
        "timestamp": 1760603431
    },
    {
        "content": "<p>If you want to take formal finite sums of integer powers of an indeterminate (which looks like this is what you want to do), Mathlib has <code>LaurentPolynomial</code> (of course power series by themselves won't do the trick). It also has <code>LaurentSeries</code> (finite support in the negative integers).</p>\n<p>I don't think Mathlib has very good support for generating functions (in the enumerative combinatorics sense) at the moment, even when the solutions are \"just\" power series; going with negative exponents is only making it more complex.</p>",
        "id": 545217053,
        "sender_full_name": "Philippe Duchon",
        "timestamp": 1760603553
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"726077\">Philippe Duchon</span> <a href=\"#narrow/channel/116395-maths/topic/Difficulty.20of.20formalizing.20Polynomial.20.20in.20Lean4.2E/near/545217053\">said</a>:</p>\n<blockquote>\n<p>If you want to take formal finite sums of integer powers of an indeterminate (which looks like this is what you want to do), Mathlib has <code>LaurentPolynomial</code> (of course power series by themselves won't do the trick). It also has <code>LaurentSeries</code> (finite support in the negative integers).</p>\n<p>I don't think Mathlib has very good support for generating functions (in the enumerative combinatorics sense) at the moment, even when the solutions are \"just\" power series; going with negative exponents is only making it more complex.</p>\n</blockquote>\n<p>I got that. I fact I've tried to use <code>LaurentPolynomial</code> and <code>LaurentSeries</code> to solve this problem., but finally I found that is difficult.</p>",
        "id": 545217622,
        "sender_full_name": "Brisal",
        "timestamp": 1760603673
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"816127\">Risal</span> <a href=\"#narrow/channel/116395-maths/topic/Difficulty.20of.20formalizing.20Polynomial.20.20in.20Lean4.2E/near/545216172\">said</a>:</p>\n<blockquote>\n<p>Like</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">PowerSeries</span><span class=\"bp\">.</span><span class=\"n\">mk</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">37</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">))</span>\n</code></pre></div>\n<p>? Not for sure.</p>\n</blockquote>\n<p>why R?</p>",
        "id": 545223792,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1760604672
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110064\">Kenny Lau</span> <a href=\"#narrow/channel/116395-maths/topic/Difficulty.20of.20formalizing.20Polynomial.20.20in.20Lean4.2E/near/545223792\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"816127\">Risal</span> <a href=\"#narrow/channel/116395-maths/topic/Difficulty.20of.20formalizing.20Polynomial.20.20in.20Lean4.2E/near/545216172\">said</a>:</p>\n<blockquote>\n<p>Like</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">PowerSeries</span><span class=\"bp\">.</span><span class=\"n\">mk</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">37</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">))</span>\n</code></pre></div>\n<p>? Not for sure.</p>\n</blockquote>\n<p>why R?</p>\n</blockquote>\n<p>I'm more accustomed to adding R, so this works: <code>PowerSeries.mk (fun _ =&gt; 37)</code></p>",
        "id": 545226723,
        "sender_full_name": "Brisal",
        "timestamp": 1760605166
    },
    {
        "content": "<p>the point of Kevin's question is to ask you what type <code>37</code> should be, and in your new answer you've left out its type</p>",
        "id": 545270438,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1760612601
    },
    {
        "content": "<p>well the default is <code>Nat</code></p>",
        "id": 545271803,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1760612813
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"816127\">@Risal</span> what we are trying to say is that the problem here is mathematical before being about Lean. You say you are interested in <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>x</mi><mrow><mo>−</mo><mn>3</mn></mrow></msup><mo>+</mo><msup><mi>x</mi><mrow><mo>−</mo><mn>2</mn></mrow></msup><mo>+</mo><mo>⋯</mo></mrow><annotation encoding=\"application/x-tex\">x^{-3} + x^{-2} + \\cdots</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8974em;vertical-align:-0.0833em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">−</span><span class=\"mord mtight\">3</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8974em;vertical-align:-0.0833em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">−</span><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.313em;\"></span><span class=\"minner\">⋯</span></span></span></span>: but what kind of object is this <em>for you</em>? We don't want a super precise answer (Lean will want this, but we can help), but you cannot say \"it's a polynomial\", as polynomials don't have monomial of negative degree. You may want:</p>\n<ul>\n<li><a href=\"https://en.wikipedia.org/wiki/Laurent_polynomial\">Laurent polynomials</a></li>\n<li><a href=\"https://en.wikipedia.org/wiki/Laurent_series\">Laurent series</a></li>\n<li><a href=\"https://en.wikipedia.org/wiki/Puiseux_series\">Puiseux series</a></li>\n<li><a href=\"https://en.wikipedia.org/wiki/Meromorphic_function\">Meromorphic functions</a> if you are more analytical than algebraic</li>\n<li>more exotic things</li>\n</ul>",
        "id": 545272930,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1760613025
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=LaurentPolynomial#doc\">docs#LaurentPolynomial</a> indeed seems like a good fit here</p>",
        "id": 545273113,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1760613062
    },
    {
        "content": "<p>Another point is this (which I was going to get to later). I wanted to let <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>r</mi></mrow><annotation encoding=\"application/x-tex\">r</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span></span></span></span> be an <em>integer</em>, because that seems to be what's happening in the original question. So the answer to my question must be something like <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mo>∑</mo><mrow><mi>n</mi><mo>∈</mo><mi mathvariant=\"double-struck\">Z</mi></mrow></msub><mn>37</mn><msup><mi>x</mi><mi>n</mi></msup></mrow><annotation encoding=\"application/x-tex\">\\sum_{n\\in\\Z}37x^n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0771em;vertical-align:-0.3271em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:0em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1825em;\"><span style=\"top:-2.4003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span><span class=\"mrel mtight\">∈</span><span class=\"mord mathbb mtight\">Z</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3271em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">37</span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span></span></span></span></span></span></span></span>. But the original question has a <code>^4</code> in which means that the target type must have exponentiation by a positive natural. But what the heck does <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><msub><mo>∑</mo><mrow><mi>n</mi><mo>∈</mo><mi mathvariant=\"double-struck\">Z</mi></mrow></msub><mn>37</mn><msup><mi>x</mi><mi>n</mi></msup><msup><mo stretchy=\"false\">)</mo><mn>4</mn></msup></mrow><annotation encoding=\"application/x-tex\">(\\sum_{n\\in\\Z}37x^n)^4</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.1412em;vertical-align:-0.3271em;\"></span><span class=\"mopen\">(</span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:0em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1825em;\"><span style=\"top:-2.4003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span><span class=\"mrel mtight\">∈</span><span class=\"mord mathbb mtight\">Z</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3271em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">37</span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span></span></span></span></span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">4</span></span></span></span></span></span></span></span></span></span></span> mean? This involves non-convergent sums 37+37+37+37+... .</p>",
        "id": 545273622,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1760613148
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"726077\">Philippe Duchon</span> <a href=\"#narrow/channel/116395-maths/topic/Difficulty.20of.20formalizing.20a.20polynomial.20in.20Lean4/near/545217053\">said</a>:</p>\n<blockquote>\n<p>I don't think Mathlib has very good support for generating functions (in the enumerative combinatorics sense) at the moment, even when the solutions are \"just\" power series; going with negative exponents is only making it more complex.</p>\n</blockquote>\n<p>On a related note, I started working on some of these in <a href=\"https://github.com/leanprover-community/mathlib4/pull/30567\">#30567</a></p>",
        "id": 545297716,
        "sender_full_name": "Weiyi Wang",
        "timestamp": 1760617303
    },
    {
        "content": "<p>Thank for everyone's advice. I'm going to learn how to formalize it in <code>Laurent ploynomials</code>,</p>",
        "id": 545495374,
        "sender_full_name": "Brisal",
        "timestamp": 1760683845
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"130384\">Riccardo Brasca</span> <a href=\"#narrow/channel/116395-maths/topic/Difficulty.20of.20formalizing.20a.20polynomial.20in.20Lean4/near/545272930\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"816127\">Risal</span> what we are trying to say is that the problem here is mathematical before being about Lean. You say you are interested in <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>x</mi><mrow><mo>−</mo><mn>3</mn></mrow></msup><mo>+</mo><msup><mi>x</mi><mrow><mo>−</mo><mn>2</mn></mrow></msup><mo>+</mo><mo>⋯</mo></mrow><annotation encoding=\"application/x-tex\">x^{-3} + x^{-2} + \\cdots</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8974em;vertical-align:-0.0833em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">−</span><span class=\"mord mtight\">3</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8974em;vertical-align:-0.0833em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">−</span><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.313em;\"></span><span class=\"minner\">⋯</span></span></span></span>: but what kind of object is this <em>for you</em>? We don't want a super precise answer (Lean will want this, but we can help), but you cannot say \"it's a polynomial\", as polynomials don't have monomial of negative degree. You may want:</p>\n<ul>\n<li><a href=\"https://en.wikipedia.org/wiki/Laurent_polynomial\">Laurent polynomials</a></li>\n<li><a href=\"https://en.wikipedia.org/wiki/Laurent_series\">Laurent series</a></li>\n<li><a href=\"https://en.wikipedia.org/wiki/Puiseux_series\">Puiseux series</a></li>\n<li><a href=\"https://en.wikipedia.org/wiki/Meromorphic_function\">Meromorphic functions</a> if you are more analytical than algebraic</li>\n<li>more exotic things</li>\n</ul>\n</blockquote>\n<p>Thank you for your help. In fact, I am indeed unfamiliar with the mathematics in this field. I will look into it.</p>",
        "id": 545495680,
        "sender_full_name": "Brisal",
        "timestamp": 1760683988
    },
    {
        "content": "<p>In enumerative combinatorics, one is usually interested in a formal power series ring such as</p>\n<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi mathvariant=\"double-struck\">Q</mi><mo stretchy=\"false\">[</mo><mo stretchy=\"false\">[</mo><mi>x</mi><mo stretchy=\"false\">]</mo><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">\\mathbb{Q}[[x]]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathbb\">Q</span><span class=\"mopen\">[[</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">]]</span></span></span></span></span></p>\n<p>or maybe a formal Laurent series ring when (as here) one wants negative exponents. But one complication is that when the coefficients don't grow too fast, one often wants to treat the series as a holomorphic function, and apply complex-analytic techniques to estimate the growth rate of the coefficients. Of course all this is overkill for the original question which involves only a Laurent polynomial, but maybe one should be prepared for the possibility that the next few exercises will involve power series.</p>",
        "id": 545750765,
        "sender_full_name": "Timothy Chow",
        "timestamp": 1760788308
    }
]