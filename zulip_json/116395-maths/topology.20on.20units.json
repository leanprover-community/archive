[
    {
        "content": "<p>We have <a href=\"https://leanprover-community.github.io/mathlib_docs/find/units.topological_space\">docs#units.topological_space</a> and <a href=\"https://leanprover-community.github.io/mathlib_docs/find/topological_space_units\">docs#topological_space_units</a>/docs#induced_units. Which of these two instances is better for which applications? Currently, the first one is an instance while the other one isn't. Should both of them be non-instances? Am I right that they're equal in a <code>division_monoid</code> such that <code>has_inv.inv</code> is continuous at any unit?</p>",
        "id": 324188800,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1674864178
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110031\">@Patrick Massot</span> <span class=\"user-mention\" data-user-id=\"110087\">@Scott Morrison</span> <span class=\"user-mention\" data-user-id=\"260507\">@Heather Macbeth</span> <span class=\"user-mention\" data-user-id=\"110050\">@Sebastien Gouezel</span> <span aria-label=\"up\" class=\"emoji emoji-2b06\" role=\"img\" title=\"up\">:up:</span></p>",
        "id": 324188863,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1674864223
    },
    {
        "content": "<p>There is an argument of this style at <a href=\"https://leanprover-community.github.io/mathlib_docs/find/units.open_embedding_coe\">docs#units.open_embedding_coe</a>, showing that in a complete normed ring, the inverse function is continuous at units, and as a consequence that the coercion from units of <code>R</code> (with the current <code>topological_space</code> instance) into <code>R</code> is an open embedding.</p>",
        "id": 324189388,
        "sender_full_name": "Heather Macbeth",
        "timestamp": 1674864523
    },
    {
        "content": "<p>I'm not sure that the other topology, <a href=\"https://leanprover-community.github.io/mathlib_docs/find/topological_ring.topological_space_units\">docs#topological_ring.topological_space_units</a>, has any uses.  My impression had been that the <a href=\"https://leanprover-community.github.io/mathlib_docs/find/units.topological_space\">docs#units.topological_space</a> is the useful one, that in some cases the <a href=\"https://leanprover-community.github.io/mathlib_docs/find/topological_ring.topological_space_units\">docs#topological_ring.topological_space_units</a> topology agrees with it and in other cases that topology is nonsense.</p>",
        "id": 324189494,
        "sender_full_name": "Heather Macbeth",
        "timestamp": 1674864593
    },
    {
        "content": "<p>Happy to learn that I'm wrong here!</p>",
        "id": 324189558,
        "sender_full_name": "Heather Macbeth",
        "timestamp": 1674864614
    },
    {
        "content": "<p>Isn't the correct topology always the one induced by embedding the units in <code>M x M</code> via <code>u |--&gt; (u,u^{-1})</code> where the product has the usual product topology? IIRC this gives the right answer for ideles in number theory.</p>",
        "id": 324192098,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1674865228
    },
    {
        "content": "<p>I guess this is exactly what Heather said too ;)</p>",
        "id": 324192370,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1674865300
    },
    {
        "content": "<p>It's a little tough to come up with examples where the topologies don't coincide (for example they coincide for <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>G</mi><msub><mi>L</mi><mi>n</mi></msub><mo stretchy=\"false\">(</mo><mi mathvariant=\"double-struck\">R</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">GL_n(\\R)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">G</span><span class=\"mord\"><span class=\"mord mathnormal\">L</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathbb\">R</span><span class=\"mclose\">)</span></span></span></span> and <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>G</mi><msub><mi>L</mi><mi>n</mi></msub><mo stretchy=\"false\">(</mo><mi mathvariant=\"double-struck\">C</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">GL_n(\\mathbb{C})</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">G</span><span class=\"mord\"><span class=\"mord mathnormal\">L</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathbb\">C</span><span class=\"mclose\">)</span></span></span></span>,  the units in <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi><mo>×</mo><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n\\times n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6667em;vertical-align:-0.0833em;\"></span><span class=\"mord mathnormal\">n</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">n</span></span></span></span> matrices), but as Adam says they don't coincide for <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>G</mi><msub><mi>L</mi><mi>n</mi></msub><mo stretchy=\"false\">(</mo><mi mathvariant=\"double-struck\">A</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">GL_n(\\mathbb{A})</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">G</span><span class=\"mord\"><span class=\"mord mathnormal\">L</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathbb\">A</span><span class=\"mclose\">)</span></span></span></span> where <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">A</mi></mrow><annotation encoding=\"application/x-tex\">\\mathbb{A}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6889em;\"></span><span class=\"mord mathbb\">A</span></span></span></span> is the adeles of a global field, and automorphic forms are continuous functions on <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>G</mi><msub><mi>L</mi><mi>n</mi></msub><mo stretchy=\"false\">(</mo><mi mathvariant=\"double-struck\">A</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">GL_n(\\mathbb{A})</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">G</span><span class=\"mord\"><span class=\"mord mathnormal\">L</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathbb\">A</span><span class=\"mclose\">)</span></span></span></span> with the correct topology (the one Adam explicitly writes above). The problem with the subspace topology is that it does not always make the units into a topological group because inversion might not be continuous (this is what happens with <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>G</mi><msub><mi>L</mi><mi>n</mi></msub><mo stretchy=\"false\">(</mo><mi mathvariant=\"double-struck\">A</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">GL_n(\\mathbb{A})</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">G</span><span class=\"mord\"><span class=\"mord mathnormal\">L</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathbb\">A</span><span class=\"mclose\">)</span></span></span></span>).</p>",
        "id": 324196818,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1674866609
    },
    {
        "content": "<p>Let's wait for <span class=\"user-mention\" data-user-id=\"110031\">@Patrick Massot</span> and <span class=\"user-mention\" data-user-id=\"110087\">@Scott Morrison</span> who are listed as the authors of the file that adds <a href=\"https://leanprover-community.github.io/mathlib_docs/find/topological_space_units\">docs#topological_space_units</a>. Should we drop this definition&amp;TC?</p>",
        "id": 324197269,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1674866811
    },
    {
        "content": "<p>A related question: should we replace <code>has_continuous_inv₀</code> with <code>has_continuous_inv_units : ∀ x, is_unit x → continuous_at has_inv.inv x</code>?</p>",
        "id": 324197737,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1674866901
    },
    {
        "content": "<p>(not sure)</p>",
        "id": 324197842,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1674866926
    },
    {
        "content": "<p>To be honest I don't remember the details. This was during the perfectoid spaces project. I think the key target was <a href=\"https://leanprover-community.github.io/mathlib_docs/find/topological_division_ring.units_top_group\">docs#topological_division_ring.units_top_group</a></p>",
        "id": 324259026,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1674901856
    },
    {
        "content": "<p>From the context of the perfectoid spaces project, it is clear this was intended to be used around <a href=\"https://leanprover-community.github.io/mathlib_docs/find/uniform_space.completion.hat_inv_extends\">docs#uniform_space.completion.hat_inv_extends</a> (completion of topological fields).</p>",
        "id": 324259818,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1674902149
    },
    {
        "content": "<p>I think this is all I have to say: if you think this def is harmful or confusing or pointless and you can remove it without breaking uniform_field.lean then I'm ok.</p>",
        "id": 324260017,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1674902227
    },
    {
        "content": "<p>The adeles are very very far from being a field -- they have many zero divisors. I don't know if it's true that if K is a topological field (or maybe a uniform field) then the two topologies coincide. I do remember from discussions with Patrick at that time that the theory of topological fields and in particular the theory of completion of uniform fields is far more subtle than I had imagined. Completions of uniform fields have played a key role in recent work of Maria Ines in p-adic Hodge theory</p>",
        "id": 324271300,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1674906032
    }
]