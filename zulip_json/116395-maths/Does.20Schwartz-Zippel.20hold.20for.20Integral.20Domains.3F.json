[
    {
        "content": "<p>This is blowing my mind right now. I replaced my <code>Field F</code> instance with <code>CommRing F</code> in my Schwartz-Zippel proof just to see what would break, and it came back complaining about <code>IsDomain F</code>. I added that and the proof just ... worked. Does S-Z not require a field as the <a href=\"https://en.wikipedia.org/wiki/Schwartz%E2%80%93Zippel_lemma\">Wikipedia article</a>,  implies?</p>",
        "id": 390859331,
        "sender_full_name": "Bolton Bailey",
        "timestamp": 1694671747
    },
    {
        "content": "<p>I guess not, the <a href=\"https://dl.acm.org/doi/pdf/10.1145/322217.322225\">original paper</a> confirms in the intro.</p>",
        "id": 390859497,
        "sender_full_name": "Bolton Bailey",
        "timestamp": 1694671835
    },
    {
        "content": "<p>It‚Äôs cool that you found out about that by formalizing the result üòä</p>",
        "id": 390859628,
        "sender_full_name": "Flo (Florent Schaffhauser)",
        "timestamp": 1694671916
    },
    {
        "content": "<p>(to be clear, I had no idea about any of this myself: I just find it interesting that we can advance our own understanding of math by explaining stuff to a computer)</p>",
        "id": 390859756,
        "sender_full_name": "Flo (Florent Schaffhauser)",
        "timestamp": 1694671977
    },
    {
        "content": "<p>I should edit Wikipedia to clarify this.</p>",
        "id": 390859957,
        "sender_full_name": "Bolton Bailey",
        "timestamp": 1694672100
    },
    {
        "content": "<p>Now I want to go further. Can we weaken to semirings?</p>",
        "id": 390860565,
        "sender_full_name": "Bolton Bailey",
        "timestamp": 1694672404
    },
    {
        "content": "<p>Does the Finset version of <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Polynomial.card_roots%27#doc\">docs#Polynomial.card_roots'</a> hold for <code>CommSemiring</code>?</p>",
        "id": 390860667,
        "sender_full_name": "Bolton Bailey",
        "timestamp": 1694672451
    },
    {
        "content": "<p>Hmm, I actually don‚Äôt know.</p>",
        "id": 390860740,
        "sender_full_name": "Flo (Florent Schaffhauser)",
        "timestamp": 1694672489
    },
    {
        "content": "<p>I just find it funny because of the whole discussion we had yesterday and the days before on <a href=\"#narrow/stream/116395-maths/topic/LinearOrderedSemiring\">linearly ordered semirings</a> <span aria-label=\"smiling face\" class=\"emoji emoji-263a\" role=\"img\" title=\"smiling face\">:smiling_face:</span>Ô∏è</p>",
        "id": 390860880,
        "sender_full_name": "Flo (Florent Schaffhauser)",
        "timestamp": 1694672550
    },
    {
        "content": "<p>No, you need domains. x(x-2) has 0,2,4 as roots in z/8z for an example. I think cancellative semirings aren't enough either, but I can't remember</p>",
        "id": 390881862,
        "sender_full_name": "Eric Rodriguez",
        "timestamp": 1694680911
    },
    {
        "content": "<p>and 6</p>",
        "id": 390882523,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1694681125
    },
    {
        "content": "<p>From a math point of view, the case of a field and the case of a domain are equivalent because you can embed any domain into a field, its field of fractions, and knowing the result there suffices.</p>",
        "id": 390906951,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1694690028
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"284160\">Eric Rodriguez</span> <a href=\"#narrow/stream/116395-maths/topic/Does.20Schwartz-Zippel.20hold.20for.20Integral.20Domains.3F/near/390881862\">said</a>:</p>\n<blockquote>\n<p>No, you need domains. x(x-2) has 0,2,4 as roots in z/8z for an example. I think cancellative semirings aren't enough either, but I can't remember</p>\n</blockquote>\n<p>Well yes, but what about comm semirings that are domains, like Nat?</p>",
        "id": 391036714,
        "sender_full_name": "Bolton Bailey",
        "timestamp": 1694736365
    },
    {
        "content": "<p>I don't see why it would be true, as there's no euclidean algorithm, which usually means it's false, but I've been shocked before. I tried to make counterexamplea for a bit but it's actually quite hard to make a polynomial that has roots in a strict semiring</p>",
        "id": 391086662,
        "sender_full_name": "Eric Rodriguez",
        "timestamp": 1694757662
    },
    {
        "content": "<p>(domain isn't the right condition, you need cancellative - no zero divisors does not imply cancellative in semirings)</p>",
        "id": 391086724,
        "sender_full_name": "Eric Rodriguez",
        "timestamp": 1694757684
    },
    {
        "content": "<p>jumping in very late here: indeed, we found the same thing out in our formalization of Schwartz-Zippel for the AFP (changed field -&gt; idom in Isabelle and it just worked)</p>",
        "id": 432419055,
        "sender_full_name": "Yong Kiam",
        "timestamp": 1712730593
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"282271\">Bolton Bailey</span> <a href=\"#narrow/stream/116395-maths/topic/Does.20Schwartz-Zippel.20hold.20for.20Integral.20Domains.3F/near/390859331\">said</a>:</p>\n<blockquote>\n<p>reak, and it came back complaining about <code>IsDomain F</code>. I added that and the proof just ... worked. Does S-Z not r</p>\n</blockquote>\n<p>The Schwartz-Zippel theorem says something about the probability that a <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">n</span></span></span></span>-tuple <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mo>‚Ä¶</mo><mo separator=\"true\">,</mo><msub><mi>x</mi><mi>n</mi></msub><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(x_1,\\dots,x_n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">‚Ä¶</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span> randomly sampled from a set <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi></mrow><annotation encoding=\"application/x-tex\">S</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span></span></span></span> is a root of a given multivariate polynomial <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi><mo>‚àà</mo><mi>F</mi><mo stretchy=\"false\">[</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mo>‚Ä¶</mo><mo separator=\"true\">,</mo><msub><mi>x</mi><mi>n</mi></msub><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">f \\in F[x_1,\\dots,x_n]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">‚àà</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">F</span><span class=\"mopen\">[</span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">‚Ä¶</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">]</span></span></span></span>. Your question is about whether <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>F</mi></mrow><annotation encoding=\"application/x-tex\">F</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">F</span></span></span></span> has to be a field <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>F</mi></mrow><annotation encoding=\"application/x-tex\">F</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">F</span></span></span></span> or whether the assumption can be relaxed to integral domain. Lean told you the latter was enough, because it is the hypothesis needed by the standard proof. Actually, if you happen to know the case for fields and ask about what happens for an integral domain <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>R</mi></mrow><annotation encoding=\"application/x-tex\">R</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span></span></span></span>, you can always embed <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>R</mi></mrow><annotation encoding=\"application/x-tex\">R</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span></span></span></span> into its field of fractions <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>F</mi></mrow><annotation encoding=\"application/x-tex\">F</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">F</span></span></span></span>. It is plain that the statement for a subset <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi></mrow><annotation encoding=\"application/x-tex\">S</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span></span></span></span> in <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>R</mi></mrow><annotation encoding=\"application/x-tex\">R</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span></span></span></span> is the same as the statement for <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi></mrow><annotation encoding=\"application/x-tex\">S</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span></span></span></span> viewed in <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>F</mi></mrow><annotation encoding=\"application/x-tex\">F</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">F</span></span></span></span>, hence it holds.</p>",
        "id": 432637087,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1712817579
    },
    {
        "content": "<p>FYI, <a href=\"https://github.com/leanprover-community/mathlib4/pull/5297\">#5297</a> (the PR proving Schwartz-Zippel) is now ready for review!</p>",
        "id": 474980978,
        "sender_full_name": "Ya√´l Dillies",
        "timestamp": 1728134525
    },
    {
        "content": "<p>... and <a href=\"https://github.com/leanprover-community/mathlib4/pull/5297\">#5297</a> is ready for review again, hopefully for the last time</p>",
        "id": 484950772,
        "sender_full_name": "Ya√´l Dillies",
        "timestamp": 1732809693
    }
]