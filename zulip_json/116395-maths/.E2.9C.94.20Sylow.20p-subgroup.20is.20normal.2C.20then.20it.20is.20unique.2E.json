[
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n<span class=\"sd\">/--If Sylow p-subgroup of G is normal, then |Syl_p(G)|=1.-/</span>\n<span class=\"kd\">lemma</span><span class=\"w\"> </span><span class=\"n\">unique</span>\n<span class=\"o\">{</span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Group</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">]{</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Fact</span><span class=\"w\"> </span><span class=\"n\">p.Prime</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Finite</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Sylow</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">)]</span>\n<span class=\"o\">(</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Sylow</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">P.Normal</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"n\">Nat.card</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Sylow</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">)</span><span class=\"bp\">=</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span>\n<span class=\"w\">  </span><span class=\"c1\">-- By Sylow's second theorem, all Sylow p-subgroups are conjugate. Since P is normal, all conjugates of P are P itself.</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Sylow.unique_of_normal</span><span class=\"o\">]</span>\n</code></pre></div>\n<p>I can't let lean simplify the result by <code>Sylow.unique_of_normal</code>, since the result of <code>Sylow.unique_of_normal</code> is   <code>Unique (Sylow  p  G)</code>. I want to know how can I prove it by lean 4. Has anyone thought about this question?</p>",
        "id": 518895828,
        "sender_full_name": "Move fast",
        "timestamp": 1747552960
    },
    {
        "content": "<p>There will surely be a theorem of the form <code>Unique X -&gt; card X = 1</code> somewhere, so apply that first</p>",
        "id": 518896667,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1747553698
    },
    {
        "content": "<p>Thank you very much, I got it.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n<span class=\"sd\">/--If Sylow p-subgroup of G is normal, then |Syl_p(G)|=1.-/</span>\n<span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">unique</span>\n<span class=\"o\">{</span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Group</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">]{</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Fact</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">Prime</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Finite</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Sylow</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">)]</span>\n<span class=\"o\">(</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Sylow</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"bp\">.</span><span class=\"n\">Normal</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">card</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Sylow</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">)</span><span class=\"bp\">=</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"c1\">-- By Sylow's second theorem, all Sylow p-subgroups are conjugate. Since P is normal, all conjugates of P are P itself.</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"n\">Unique</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Sylow</span><span class=\"w\">  </span><span class=\"n\">p</span><span class=\"w\">  </span><span class=\"n\">G</span><span class=\"o\">):=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">    </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">Sylow</span><span class=\"bp\">.</span><span class=\"n\">unique_of_normal</span><span class=\"w\"> </span><span class=\"n\">P</span>\n<span class=\"w\">    </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">h</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">Fintype</span><span class=\"bp\">.</span><span class=\"n\">card_eq_one_iff_nonempty_unique</span><span class=\"o\">]</span>\n</code></pre></div>",
        "id": 518897410,
        "sender_full_name": "Move fast",
        "timestamp": 1747554288
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"898187\">Move fast</span> has marked this topic as resolved.</p>",
        "id": 518898403,
        "sender_full_name": "Notification Bot",
        "timestamp": 1747555142
    },
    {
        "content": "<p>Tangential but<br>\nIs there a better spelling than <code>Nonempty Unique</code>?</p>",
        "id": 525761096,
        "sender_full_name": "Artie Khovanov",
        "timestamp": 1750872982
    },
    {
        "content": "<p>Not sure if [Nonempty] [Subsingleton] is better or worse ...</p>",
        "id": 525762594,
        "sender_full_name": "Junyan Xu",
        "timestamp": 1750873669
    },
    {
        "content": "<p><code>[Nonempty α] [Subsingleton α]</code> is certainly more common</p>",
        "id": 525762818,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1750873761
    },
    {
        "content": "<p>I like that one even less<br>\nI found <code>ExistsUnique</code> which works nicely given that my application is a Subtype</p>",
        "id": 525763700,
        "sender_full_name": "Artie Khovanov",
        "timestamp": 1750874112
    },
    {
        "content": "<p>I guess you can have <code>ExistsUnique (fun (_ : T) =&gt; True)</code> lol</p>",
        "id": 525763810,
        "sender_full_name": "Artie Khovanov",
        "timestamp": 1750874157
    },
    {
        "content": "<p>but it won't be inferred by typeclass</p>",
        "id": 525763854,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1750874172
    },
    {
        "content": "<p>True. In my use case I have a nontrivial subtype (linear orderings satisfying <code>IsOrderedRing</code>), so the typeclass inference is pretty useless anyway I guess</p>",
        "id": 525764172,
        "sender_full_name": "Artie Khovanov",
        "timestamp": 1750874302
    },
    {
        "content": "<p>I thought <code>Unique</code> is supposed to mean both nonempty and subsingleton (at least that's what the real <code>Unique</code> typeclass means)</p>",
        "id": 525764443,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1750874424
    },
    {
        "content": "<p><code>Unique</code> means <code>Inhabited</code> and <code>Subsingleton</code></p>",
        "id": 525764577,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1750874472
    },
    {
        "content": "<p>This means you get a <code>default</code>, but from <code>Nonempty</code> you need to use choice to get anything</p>",
        "id": 525764630,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1750874495
    },
    {
        "content": "<p>Yeah <code>Unique</code> is data</p>",
        "id": 525781384,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1750882059
    },
    {
        "content": "<p>I guess we have choice so data vs prop doesn't really matter?</p>",
        "id": 525783133,
        "sender_full_name": "Artie Khovanov",
        "timestamp": 1750882645
    },
    {
        "content": "<p>It does matter, because props are always equal, but with data you have variety</p>",
        "id": 525783364,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1750882724
    },
    {
        "content": "<p>so if you try to apply a theorem stated about different data, it fails to unify</p>",
        "id": 525783418,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1750882744
    },
    {
        "content": "<p>yeah as in I may as well stick to prop</p>",
        "id": 525783653,
        "sender_full_name": "Artie Khovanov",
        "timestamp": 1750882823
    }
]