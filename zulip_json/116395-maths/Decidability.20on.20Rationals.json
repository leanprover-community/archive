[
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℚ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">rfl</span><span class=\"w\"> </span><span class=\"c1\">-- fails</span>\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℚ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">decide</span><span class=\"w\"> </span><span class=\"c1\">-- fails</span>\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℚ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">decide</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"n\">kernel</span><span class=\"w\"> </span><span class=\"c1\">-- works</span>\n</code></pre></div>\n<p>It seems like the usual strategies fail because <code>mul</code> and <code>inv</code> are <a href=\"https://github.com/leanprover-community/batteries/blob/e5ffc6bd73d63d22e0f2ea9c4b3fa1d9761266b8/Batteries/Data/Rat/Basic.lean#L147\">marked as irreducible</a>? What is the \"idiomatic\" way to prove things like this then?</p>",
        "id": 521489133,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1748738551
    },
    {
        "content": "<p><code>norm_num</code>?</p>",
        "id": 521489245,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1748738676
    },
    {
        "content": "<p>or just <code>simp</code></p>",
        "id": 521491296,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1748740864
    },
    {
        "content": "<p>I prove this by <code>with_unfolding_all decide</code>.</p>",
        "id": 521514309,
        "sender_full_name": "Miyahara Kō",
        "timestamp": 1748757439
    },
    {
        "content": "<p>norm_num and simp are no good if this is part of a larger expression that decide can handle</p>",
        "id": 522202926,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1748979828
    }
]