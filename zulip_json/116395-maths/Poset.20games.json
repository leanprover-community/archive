[
    {
        "content": "<p>I think we have all the necessary tools in Mathlib to start formalizing some concrete families of games. Perhaps the simplest one to begin with would be <a href=\"https://en.wikipedia.org/wiki/Poset_game\">poset games</a>.</p>",
        "id": 484998565,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1732837605
    },
    {
        "content": "<p>Two well-known examples of Poset games are chomp and Hackenbush with only green edges</p>",
        "id": 484998589,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1732837628
    },
    {
        "content": "<p>I have a question about this definition though, what would the required conditions on the poset be in order to have a finite game?</p>",
        "id": 484998627,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1732837677
    },
    {
        "content": "<p>I think (but I'm not 100% sure) that they'd be that the order is a <a href=\"https://en.wikipedia.org/wiki/Well-quasi-ordering\">well quasi-order</a></p>",
        "id": 484998683,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1732837700
    },
    {
        "content": "<p>Do we already have wqos in Mathlib? If not, what would be the easiest way to define them?</p>",
        "id": 484998720,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1732837755
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"387244\">@Yaël Dillies</span> Do we perhaps have something like \"all antichains are finite\"? If so, we can define a wqo as just <code>Preorder α + WellFoundedLT α + FiniteAntichains α</code></p>",
        "id": 484998814,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1732837835
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"767695\">@Tristan Figueroa-Reid</span> you were interested in this too</p>",
        "id": 485001040,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1732839785
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"459227\">Violeta Hernández</span> <a href=\"#narrow/stream/116395-maths/topic/Poset.20games/near/484998720\">said</a>:</p>\n<blockquote>\n<p>Do we already have wqos in Mathlib? If not, what would be the easiest way to define them?</p>\n</blockquote>\n<p>I think it's <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Set.PartiallyWellOrderedOn#doc\">docs#Set.PartiallyWellOrderedOn</a></p>",
        "id": 485016803,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1732852249
    },
    {
        "content": "<p>It seems potentially annoying that this is a predicate on sets rather than a predicate on types</p>",
        "id": 485017112,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1732852529
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"459227\">Violeta Hernández</span> <a href=\"#narrow/channel/116395-maths/topic/Poset.20games/near/484998683\">said</a>:</p>\n<blockquote>\n<p>I think (but I'm not 100% sure) that they'd be that the order is a <a href=\"https://en.wikipedia.org/wiki/Well-quasi-ordering\">well quasi-order</a></p>\n</blockquote>\n<p>I believe so as well. I was also interested in applying the strategy stealing argument for posets with an infimum to show that the left player always wins those games.</p>",
        "id": 485020819,
        "sender_full_name": "Tristan Figueroa-Reid",
        "timestamp": 1732855460
    },
    {
        "content": "<p>\"posets with an infimum\" is that the same as an <code>OrderBot</code>?</p>",
        "id": 485021818,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1732856352
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"459227\">Violeta Hernández</span> <a href=\"#narrow/channel/116395-maths/topic/Poset.20games/near/485017112\">said</a>:</p>\n<blockquote>\n<p>It seems potentially annoying that this is a predicate on sets rather than a predicate on types</p>\n</blockquote>\n<p>Yes, I encountered the same thing a long time back. (Something Grobner basis related...?)</p>",
        "id": 485025421,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1732858688
    },
    {
        "content": "<p>I guess that turning predicates on subtypes into predicates of sets are a common enough pattern, e.g. <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Set.Countable#doc\">docs#Set.Countable</a></p>",
        "id": 485026315,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1732859324
    },
    {
        "content": "<p>But <code>PartiallyWellFoundedOn</code> is a set predicate without a corresponding type predicate</p>",
        "id": 485026392,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1732859398
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"459227\">Violeta Hernández</span> <a href=\"#narrow/stream/116395-maths/topic/Poset.20games/near/485021818\">said</a>:</p>\n<blockquote>\n<p>\"posets with an infimum\" is that the same as an <code>OrderBot</code>?</p>\n</blockquote>\n<p>Isn't that <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=SemilatticeInf#doc\">docs#SemilatticeInf</a> ?</p>",
        "id": 485026491,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1732859466
    },
    {
        "content": "<p>Perhaps that can be a first PR? Defining <code>PartiallyWellFounded</code> for types and copying over the API</p>",
        "id": 485026540,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1732859511
    },
    {
        "content": "<p>To then redefine <code>PartiallyWellFoundedOn</code> as the predicate on the subtype</p>",
        "id": 485026589,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1732859526
    },
    {
        "content": "<p>Please request my review when you make this PR, as I'm working with <code>PartiallyWellFoundedOn</code> for Kruskal's theorem</p>",
        "id": 485026773,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1732859657
    },
    {
        "content": "<p>The Nim game was formalized in Coq:<br>\n<a href=\"https://yubocai-poly.github.io/project/203/\">https://yubocai-poly.github.io/project/203/</a></p>\n<p>You might also enjoy Coqoban, a Coq version of Sokoban, which Jasper did some twenty years ago. <br>\n<a href=\"https://github.com/coq-community/coqoban\">https://github.com/coq-community/coqoban</a><br>\n<a href=\"https://en.wikipedia.org/wiki/Sokoban\">https://en.wikipedia.org/wiki/Sokoban</a></p>\n<p>We used it as a basis for a graphical calculator in Coq.<br>\nRussell O’Connor. A Computer Verified Theory of Compact Sets. SCSS 2008, RISC-Linz Report Series 08–08: 148–162, Jul 2008, Proceedings<br>\n<a href=\"http://www.risc.uni-linz.ac.at/publications/download/risc_3448/SCSS2008_Proceedings.pdf\">http://www.risc.uni-linz.ac.at/publications/download/risc_3448/SCSS2008_Proceedings.pdf</a></p>",
        "id": 485043779,
        "sender_full_name": "Bas Spitters",
        "timestamp": 1732868366
    },
    {
        "content": "<p>On the topic of different games, after poset games, it may be valuable to formalize:</p>\n<ul>\n<li>Red-Blue-Green Hackenbush for its (potential?) construction of every game</li>\n<li>Octal games and Wythoff's game for their expanded theory within combinatorial game theory</li>\n</ul>\n<p>It would also be interesting to formalize games that are already weakly solved, like Cram. There are some strongly solved positional games, but I don't believe we have the theory to formalize them yet.</p>",
        "id": 485157125,
        "sender_full_name": "Tristan Figueroa-Reid",
        "timestamp": 1732912216
    },
    {
        "content": "<p>We already have Nim and Sprague-Grundy in Mathlib too: <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=SetTheory.PGame.nim#doc\">docs#SetTheory.PGame.nim</a></p>",
        "id": 485164854,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1732917065
    },
    {
        "content": "<p>It's one-pile nim, though obviously multiple-pile nim is just a sum of one-pile nim games. I've also formalized the fact that <code>nim a + nim b ≈ nim (∗a + ∗b)</code> (the nim sum of piles is the nimber sum)</p>",
        "id": 485164982,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1732917132
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"690858\">Daniel Weber</span> <a href=\"#narrow/channel/116395-maths/topic/Poset.20games/near/485026773\">said</a>:</p>\n<blockquote>\n<p>Please request my review when you make this PR, as I'm working with <code>PartiallyWellFoundedOn</code> for Kruskal's theorem</p>\n</blockquote>\n<p>Will do!</p>",
        "id": 485165287,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1732917328
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 485165574,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1732917521
    },
    {
        "content": "<p>I have to admit that I'm a bit suspicious of the current <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=PartiallyWellOrderedOn#doc\">docs#PartiallyWellOrderedOn</a> definition. Like, it's mathematically correct, but it's a very different definition in nature to the one that we use for <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=WellFounded#doc\">docs#WellFounded</a>.</p>\n<p>Is there no way to come up with some inductive predicate that captures partial well-orders in the same way <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Acc#doc\">docs#Acc</a> captures well-foundedness? That might potentially make proofs a bit easier, or at least more homologous with well-foundedness proofs.</p>",
        "id": 485166210,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1732917907
    },
    {
        "content": "<p>(of course, the current definition should be a theorem no matter what we end up doing with the PWF API)</p>",
        "id": 485166240,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1732917941
    },
    {
        "content": "<p>Actually, I think I'm a bit confused. <a href=\"https://en.wikipedia.org/wiki/Well-quasi-ordering#Examples\">Wikipedia</a> says ℤ is not a PWO because it's not well-founded. But Lean proves as <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=partiallyWellOrderedOn_iff_finite_antichains#doc\">docs#partiallyWellOrderedOn_iff_finite_antichains</a> that a set is PWO iff all its antichains are finite. So shouldn't any linear order be PWO?</p>",
        "id": 485167423,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1732918768
    },
    {
        "content": "<p>Oh of course the Lean lemma assumes a symmetric relation (so, not an order relation)</p>",
        "id": 485167541,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1732918850
    },
    {
        "content": "<p>I think I need to play a bit with the concept and the API. I'll be back once I have a more informed opinion on all of this</p>",
        "id": 485167768,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1732919026
    },
    {
        "content": "<p>Also new thread for PWOs: <a href=\"#narrow/channel/116395-maths/topic/Partial.20well-orders/near/485168962\">https://leanprover.zulipchat.com/#narrow/channel/116395-maths/topic/Partial.20well-orders/near/485168962</a></p>",
        "id": 485168983,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1732919953
    },
    {
        "content": "<p>I just realized the name <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Set.PartiallyWellOrderedOn#doc\">docs#Set.PartiallyWellOrderedOn</a> isn't even correct! A well partial-order (not a partial well-order) is a partial well quasi-order, whereas this definition does not require antisymmetry.</p>",
        "id": 491123756,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1735423541
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"767695\">Tristan Figueroa-Reid</span> <a href=\"#narrow/channel/116395-maths/topic/Poset.20games/near/485157125\">said</a>:</p>\n<blockquote>\n<p>On the topic of different games, after poset games, it may be valuable to formalize:</p>\n<ul>\n<li>Red-Blue-Green Hackenbush for its (potential?) construction of every game</li>\n<li>Octal games and Wythoff's game for their expanded theory within combinatorial game theory</li>\n</ul>\n<p>It would also be interesting to formalize games that are already weakly solved, like Cram. There are some strongly solved positional games, but I don't believe we have the theory to formalize them yet.</p>\n</blockquote>\n<p>Hi, I would be interested in the formalization of Octal games (or slightly more generally, Impartial take and break games), but I am not sure whether it would be good to start now of wait a bit until the <code>IGame</code> vs <code>PGame</code> issue has been settled. Or did somebody else already start working on this?</p>",
        "id": 494171430,
        "sender_full_name": "Bernhard Reinke",
        "timestamp": 1737040551
    },
    {
        "content": "<p>I don't think anyone else is working on it. I would say it's safe to work on as long as you work with Game, but there's still a good chance you might have to refactor a little after the IGame PR is merged.</p>",
        "id": 494177580,
        "sender_full_name": "Tristan Figueroa-Reid",
        "timestamp": 1737042136
    },
    {
        "content": "<p>Hm, I think one way to proceed would be to go into a similar direction as <code>State.lean</code>, but introduce one more level of <code>Finset</code> in the options. In that file, the target is <code>PGame</code>. If I want to work with <code>Finset</code>, it would be nice if a finite summation of games with indexing set is possible. It is not clear to my if this works nicely on the <code>PGame</code> level</p>",
        "id": 494193083,
        "sender_full_name": "Bernhard Reinke",
        "timestamp": 1737046527
    },
    {
        "content": "<p>Right - I forgot that the theory of <code>State</code> is built on <code>PGame</code> (though it really shouldn't..)</p>",
        "id": 494206676,
        "sender_full_name": "Tristan Figueroa-Reid",
        "timestamp": 1737051122
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"562819\">Bernhard Reinke</span> <a href=\"#narrow/channel/116395-maths/topic/Poset.20games/near/494193083\">said</a>:</p>\n<blockquote>\n<p>Hm, I think one way to proceed would be to go into a similar direction as <code>State.lean</code>, but introduce one more level of <code>Finset</code> in the options. In that file, the target is <code>PGame</code>. If I want to work with <code>Finset</code>, it would be nice if a finite summation of games with indexing set is possible. It is not clear to my if this works nicely on the <code>PGame</code> level</p>\n</blockquote>\n<p>Are you looking for something like <code>IGame.Short</code> or <code>Game.Short</code>? I'm a little confused by the notion of introducing <code>Finset</code> in the options.</p>",
        "id": 494206830,
        "sender_full_name": "Tristan Figueroa-Reid",
        "timestamp": 1737051165
    },
    {
        "content": "<p>Thinking a bit about it, I should have said <code>Multiset</code> and not Finset, but the point stands. I envision something like this:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">class</span><span class=\"w\"> </span><span class=\"n\">BreakState</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">height</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℕ</span>\n<span class=\"w\">  </span><span class=\"n\">l</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Multiset</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Multiset</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"n\">left_bound</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">},</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">l</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">height</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"n\">height</span><span class=\"w\"> </span><span class=\"n\">s</span>\n<span class=\"w\">  </span><span class=\"n\">right_bound</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">},</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">height</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"n\">height</span><span class=\"w\"> </span><span class=\"n\">s</span>\n</code></pre></div>\n<p>that would model an abstract \"breaking game\", positions would be given by <code>Multiset S</code>. For octal games one can take <code>S = ℕ</code> and <code>l = r</code> to be the allowed partitions of a heap of a given height.</p>\n<p>Written like this it should be still a short game</p>",
        "id": 494231866,
        "sender_full_name": "Bernhard Reinke",
        "timestamp": 1737061281
    },
    {
        "content": "<p>I had forgotten to respond to this!</p>\n<p>I'm wary of this being finite by definition (given that <code>l</code> returns a <code>Finset</code> of broken down heaps, and <code>height</code> isn't an <code>Ordinal</code>), but:</p>\n<ul>\n<li>I've yet to see a developed theory of transfinite heap games (other than Nim)</li>\n<li>For a finite definition, this seems fine.</li>\n</ul>",
        "id": 494717137,
        "sender_full_name": "Tristan Figueroa-Reid",
        "timestamp": 1737348441
    },
    {
        "content": "<p>I would make this definition transfinite mainly to have <code>Nim</code> be related to <code>BreakState</code> in some way.</p>",
        "id": 494719577,
        "sender_full_name": "Tristan Figueroa-Reid",
        "timestamp": 1737349845
    },
    {
        "content": "<p>An update on this. I've been a bit busy bikeshedding some stuff related to the <code>PartiallyWellOrdered</code> API. But in the meanwhile I think I can just copy over my new <code>WellQuasiOrderedLE</code> typeclass and build a basic definition for poset games.</p>",
        "id": 495540920,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1737650040
    },
    {
        "content": "<p>The main relevant result is the following. We can define a <code>posetMove</code> relation on <code>Set \\a</code> by <code>posetMove s t</code> when there exists <code>a \\in s</code> with <code>s = t \\ Ici a</code>. In a wqo, this relation is well-founded.</p>",
        "id": 495541593,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1737650205
    },
    {
        "content": "<p>To prove this, we can first show this is a subrelation of <code>\\ssubset</code>. Which means its transitive closure is too.</p>\n<p>Suppose there were an infinite decreasing sequence <code>f</code>. Let <code>g</code> be the sequence of elements <code>a</code> you take at each step. By the wqo condition there are <code>m &lt; n</code> with <code>g m ≤ g n</code>, and in particular <code>g n</code> must be in <code>f n</code> and thus <code>f m</code>. But this can't be so since <code>f (m + 1) = f m \\ Icc (g m)</code> and thus doesn't contain <code>g n</code>.</p>",
        "id": 495543479,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1737650709
    },
    {
        "content": "<p>And once you have this, you can simply define a position in a poset game for a set <code>s</code> recursively, as the game whose left and right sets are both the positions corresponding to sets related by <code>posetMove</code> to <code>s</code>.</p>",
        "id": 495544879,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1737651092
    },
    {
        "content": "<p>The next steps from here would be to prove that this is an impartial game, and to then prove via a strategy stealing argument that any poset with a top element is won by the first player (i.e. the game is fuzzy with <code>0</code>). I do currently have a lot of my metaphorical plate though, so I think I'll let someone else take over at that point <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 495546916,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1737651693
    },
    {
        "content": "<p>Even though this is a strategy stealing argument, I don't think we actually need to formalize strategies to prove it. The basic idea should be \"if <code>s ≈ 0</code>, then <code>s \\ top ≈ 0</code>, which is absurd since <code>s \\ top</code> is subsequent to <code>s</code>\".</p>",
        "id": 495547334,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1737651830
    },
    {
        "content": "<p>I managed to define poset games! Was a bit easier than expected.</p>",
        "id": 495589066,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1737667910
    },
    {
        "content": "<p>This has a bunch of dependencies and auxiliary lemmas that have to be PR'd first; which is not to mention that we don't even know if this belongs in Mathlib... But for the moment we can work on the branch.</p>",
        "id": 495589232,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1737667969
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/21003\">#21003</a></p>",
        "id": 495589234,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1737667969
    },
    {
        "content": "<p>By the way, this seems as good a time as any to bring this issue back up. Should we make <code>Impartial</code> into a normal predicate instead of a typeclass?</p>",
        "id": 495606289,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1737676572
    },
    {
        "content": "<p>I just split the Impartial refactor into a <a href=\"https://github.com/leanprover-community/mathlib4/pull/21006\">separate PR #21006</a>, so this is actually a wonderful time to ask!</p>",
        "id": 495606391,
        "sender_full_name": "Tristan Figueroa-Reid",
        "timestamp": 1737676646
    },
    {
        "content": "<p>It's compositional, in the sense that <code>Impartial x → Impartial y → Impartial (x + y)</code>. But there's a few problems:<br>\na) this is a class on terms, not types, and we've previously established these are somewhat more frowned upon.<br>\nb) we're only ever going to have a handful of \"basic\" instances, like <code>Impartial 0</code> or <code>Impartial (nim o)</code>, so the usefulness is a bit limited.<br>\nc) having this as a typeclass argument means that we often have to provide the term explicitly, which hampers the convenience of composability.</p>",
        "id": 495606871,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1737676860
    },
    {
        "content": "<p>I think it would be better to instead have this as a <code>def</code>, and provide dot notation <code>Impartial.add</code> in order to do composition instead.</p>",
        "id": 495607048,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1737676920
    },
    {
        "content": "<p>(I've brought this up a bunch of times before, but at that point I think I was the only person actively working in this part of the library, so my PR <a href=\"https://github.com/leanprover-community/mathlib4/pull/16054\">#16054</a> fell through the cracks)</p>",
        "id": 495607222,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1737677004
    },
    {
        "content": "<p>I agree with those points - I also see no reason for it to stay as a typeclass.</p>",
        "id": 495607293,
        "sender_full_name": "Tristan Figueroa-Reid",
        "timestamp": 1737677039
    },
    {
        "content": "<p>I'll revive the PR then <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 495607357,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1737677054
    },
    {
        "content": "<p>Once you update the PR, I'll base <a href=\"https://github.com/leanprover-community/mathlib4/pull/21006\">#21006</a> off of <a href=\"https://github.com/leanprover-community/mathlib4/pull/16054\">#16054</a> <span aria-label=\"+1\" class=\"emoji emoji-1f44d\" role=\"img\" title=\"+1\">:+1:</span></p>",
        "id": 495607452,
        "sender_full_name": "Tristan Figueroa-Reid",
        "timestamp": 1737677116
    },
    {
        "content": "<p>It'll take a bit for me to get it compiling again, since I did some breaking changes on the nim file since I last merged master. I'll let you know when it's ready.</p>",
        "id": 495607825,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1737677345
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"767695\">Tristan Figueroa-Reid</span> <a href=\"#narrow/channel/116395-maths/topic/Poset.20games/near/495607452\">said</a>:</p>\n<blockquote>\n<p>Once you update the PR, I'll base <a href=\"https://github.com/leanprover-community/mathlib4/pull/21006\">#21006</a> off of <a href=\"https://github.com/leanprover-community/mathlib4/pull/16054\">#16054</a> <span aria-label=\"+1\" class=\"emoji emoji-1f44d\" role=\"img\" title=\"+1\">:+1:</span></p>\n</blockquote>\n<p>I really do think we make a great team <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 495608312,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1737677656
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"767695\">@Tristan Figueroa-Reid</span> Wait a sec, what's going on in <a href=\"https://github.com/leanprover-community/mathlib4/pull/21006\">#21006</a>? Those two definitions aren't equivalent!</p>",
        "id": 495609382,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1737678349
    },
    {
        "content": "<p>Under our current definition, <code>{∗1 + ∗2 | ∗3}</code> is an impartial game, whereas it wouldn't be impartial under your definition!</p>",
        "id": 495609460,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1737678386
    },
    {
        "content": "<p>I think the docstring should make this a bit clearer, our definition of an impartial game is slightly broader than in the literature, since the weaker assumptions are still enough to prove Sprague-Grundy.</p>",
        "id": 495609670,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1737678521
    },
    {
        "content": "<blockquote>\n<p>since the weaker assumptions are still enough to prove Sprague-Grundy.</p>\n</blockquote>\n<p>Right! I got misled by this. This change was bundled in with the <a href=\"https://github.com/leanprover-community/mathlib4/pull/7162\">#7162</a> pull request, and I justified it by noticing that the Sprague-Grundy theorem still held, but I forgot it holds if Impartial has a weaker condition.</p>",
        "id": 495609948,
        "sender_full_name": "Tristan Figueroa-Reid",
        "timestamp": 1737678694
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/16054\">#16054</a> is once again ready for review.</p>",
        "id": 495611674,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1737679852
    },
    {
        "content": "<p>You know, if I'm being honest, I'm no longer sure this is an improvement.</p>",
        "id": 495613119,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1737680721
    },
    {
        "content": "<p>I first raised this issue back in Lean 3, where working with typeclasses as assumptions was much more painful involved using <code>haveI</code> all over the place. In Lean 4, this isn't nearly as problematic anymore.</p>",
        "id": 495613254,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1737680793
    },
    {
        "content": "<p>And, even though these are typeclasses on terms, the terms themselves behave a lot like types, in the sense that they're almost never composed in any nontrivial ways. There's a lot of ways to write down <code>37</code> but there's not a lot of ways to write down \"the poset game on <code>ℕ × ℕ</code>\".</p>",
        "id": 495613491,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1737680950
    },
    {
        "content": "<p>I think I'll close that PR, and port my miscellaneous golfs to other smaller PRs.</p>",
        "id": 495613842,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1737681153
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/21007\">#21007</a></p>",
        "id": 495614827,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1737681788
    },
    {
        "content": "<p>Oops, I realized I had my definition for poset games wrong! The relation I was proving well-founded was actually just the empty relation...</p>",
        "id": 495619714,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1737684922
    },
    {
        "content": "<p>I've fixed my mistake and pushed to the branch. I also added some boilerplate API and proved that poset games are impartial.</p>",
        "id": 495619742,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1737684943
    },
    {
        "content": "<p>Oh and also, I managed to prove</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">poset_fuzzy_zero</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">PartialOrder</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">WellQuasiOrderedLE</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">OrderTop</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">poset</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">‖</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n</code></pre></div>",
        "id": 495623058,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1737687235
    },
    {
        "content": "<p>This was surprisingly easy, and only took 8 lines of code</p>",
        "id": 495623110,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1737687250
    },
    {
        "content": "<p>Goes to show that strategy stealing doesn't require strategies at all!</p>",
        "id": 495623119,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1737687260
    },
    {
        "content": "<p>In fact, I think we can turn strategy stealing into a Mathlib theorem proper. </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Impartial</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">\\</span><span class=\"n\">ex</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">\\</span><span class=\"k\">forall</span><span class=\"w\"> </span><span class=\"n\">j</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">\\</span><span class=\"n\">ex</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"bp\">.</span><span class=\"n\">moveLeft</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">moveLeft</span><span class=\"w\"> </span><span class=\"n\">j</span><span class=\"w\"> </span><span class=\"bp\">≈</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"bp\">.</span><span class=\"n\">moveLeft</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">||</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n</code></pre></div>",
        "id": 495799150,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1737755720
    },
    {
        "content": "<p>If there's some initial move such that any subsequent move could've also been made by the first player, then the game is won by the first player.</p>",
        "id": 495799294,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1737755784
    },
    {
        "content": "<p>Actually, I suspect that impartiality isn't too relevant here. Is there a version of this for any game?</p>",
        "id": 495799453,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1737755870
    },
    {
        "content": "<p>Hex is partizan and is susceptible to the strategy stealing argument.</p>",
        "id": 495807921,
        "sender_full_name": "Tristan Figueroa-Reid",
        "timestamp": 1737760239
    },
    {
        "content": "<p>I believe the Hex argument relies on an extra move never being a disadvantage.</p>",
        "id": 495808111,
        "sender_full_name": "Tristan Figueroa-Reid",
        "timestamp": 1737760347
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"767695\">@Tristan Figueroa-Reid</span> how exactly would having the intermediate lemma you mention on <a href=\"https://github.com/leanprover-community/mathlib4/pull/21073#issuecomment-2614310964\">GitHub</a> help?</p>",
        "id": 495954202,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1737886671
    },
    {
        "content": "<p>Morally, the mathematical argument is \"left moves and right moves in an impartial game are exactly the same\". But I think even <code>G ≡ -G</code> is too weak of a condition for Lean to understand this in a verbatim sense.</p>",
        "id": 495954280,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1737886712
    },
    {
        "content": "<p>Yeah, the actual working proof would be different, but I still think you can use the BiTotal nature of Identical to make the left move corresponding to the right in the <code>fuzzy_zero_of_forall_exists_moveRight</code> proof - it wouldn't be exactly the same, but you should be able to construct a left move with the extra Identical constraint.</p>",
        "id": 495992398,
        "sender_full_name": "Tristan Figueroa-Reid",
        "timestamp": 1737918121
    },
    {
        "content": "<p>Though, that would be out of scope for the PR, as to constructively make an impartial game where <code>G ≡ -G</code> from <code>G ≈ -G</code> would require being able to construct the canonical form of a game.</p>",
        "id": 495992485,
        "sender_full_name": "Tristan Figueroa-Reid",
        "timestamp": 1737918167
    },
    {
        "content": "<p>Would it make sense to have a new typeclass <code>StronglyImpartial</code> or something like that for <code>G</code> identical to <code>-G</code>? </p>\n<p>On the one hand this might make it easier, given extra API, to translate statements on left moves of impartial games to right moves. On the other, I really don't think this definition would give us many new theorems, and it comes at some generally cost that could come back to bite us.</p>",
        "id": 496003845,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1737927139
    },
    {
        "content": "<p>I think a new typeclass is too much, as it's just something that would be invoked in proofs. I'm unfamiliar with the best lean practices for that specific construction, but I agree that a new type class would cost more than what it would bring. </p>\n<p>My best guess would be to have a definitional theorem that proves that <code>canonical G</code> for a <code>(G : PGame) [Impartial G]</code> is equivalent to the impartial definition with Identical instead of Equiv, that way you can rewrite the goal in <code>fuzzy_zero_of_forall_exists_moveRight</code> from <code>G || 0</code> to <code>canonical G || 0</code>.</p>",
        "id": 496006409,
        "sender_full_name": "Tristan Figueroa-Reid",
        "timestamp": 1737929321
    },
    {
        "content": "<p>I don't think we have any best practice for introducing auxiliary definitions whose sole purpose is to be used in proofs. Generally those sorts of things would be hidden behind a tactic.</p>",
        "id": 496018702,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1737940160
    },
    {
        "content": "<p>And if that's what we're going to do, why not go the extra mile, and show that any impartial game is equivalent to one where both the left and right types and indexing functions are <em>equal</em>?</p>",
        "id": 496018779,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1737940205
    },
    {
        "content": "<p>That would be a better idea and it's something we could do now!</p>",
        "id": 496018870,
        "sender_full_name": "Tristan Figueroa-Reid",
        "timestamp": 1737940318
    },
    {
        "content": "<p>Though alternatively, we could just do nothing. The impartial file is only about 200 lines long, and we're unlikely to get any substantial golfs that don't just end up taking as much code as is saved.</p>",
        "id": 496018941,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1737940349
    },
    {
        "content": "<p>Are we likely to expand the current API further in a way that requires us to duplicate theorems between left and right variants?</p>",
        "id": 496018995,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1737940413
    },
    {
        "content": "<p>Or actually, do we even gain anything by having both left and right versions of our theorems instead of sticking to one always?</p>",
        "id": 496019060,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1737940454
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"459227\">Violeta Hernández</span> <a href=\"#narrow/channel/116395-maths/topic/Poset.20games/near/496019060\">said</a>:</p>\n<blockquote>\n<p>Or actually, do we even gain anything by having both left and right versions of our theorems instead of sticking to one always?</p>\n</blockquote>\n<p>We wouldn't gain much if we had the backing information that an impartial game G is equivalent to a game G' where G' = -G', but it's currently useful as is.</p>",
        "id": 496019164,
        "sender_full_name": "Tristan Figueroa-Reid",
        "timestamp": 1737940535
    },
    {
        "content": "<p>Perhaps there is a good reason to have more API surrounding a 'strongly impartial' game using heterogeneous? equality - we haven't formalized heap games.</p>",
        "id": 496019270,
        "sender_full_name": "Tristan Figueroa-Reid",
        "timestamp": 1737940586
    },
    {
        "content": "<p>Wait! Don't we already have this!</p>",
        "id": 496019279,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1737940595
    },
    {
        "content": "<p>This has a name: Sprague-Grundy</p>",
        "id": 496019283,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1737940600
    },
    {
        "content": "<p>Right!</p>",
        "id": 496019292,
        "sender_full_name": "Tristan Figueroa-Reid",
        "timestamp": 1737940612
    },
    {
        "content": "<p>And in fact, our definition of <code>nim</code> serendipitously satisfies <code>- nim x = nim x</code></p>",
        "id": 496019324,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1737940640
    },
    {
        "content": "<p>Let me see if I can use this in order to golf the theorem</p>",
        "id": 496019406,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1737940692
    },
    {
        "content": "<p>Hmm... I don't think this will actually work. Strategy stealing relies on us being able to give a specific move for which the strategy can be stolen. But moves don't transfer over equivalences.</p>",
        "id": 496019631,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1737940882
    },
    {
        "content": "<p>This idea might still work in order to golf other theorems, but I think it won't work for this one.</p>",
        "id": 496019651,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1737940898
    },
    {
        "content": "<p>Maybe we're thinking about this wrong? It's not too hard to get the goal state to this:<br>\n<a href=\"/user_uploads/3121/eG3UWJhlHQ0_WPEstspvKzJx/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/eG3UWJhlHQ0_WPEstspvKzJx/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"390x234\" src=\"/user_uploads/thumbnail/3121/eG3UWJhlHQ0_WPEstspvKzJx/image.png/840x560.webp\"></a></div>",
        "id": 496019881,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1737941061
    },
    {
        "content": "<p>The goal should be the same as <code>H</code>, modulo some equivalences</p>",
        "id": 496019941,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1737941124
    },
    {
        "content": "<p>Maybe we could add some lemma like <code>(∀ i : (-x).LeftMoves, p i) ↔ (∀ i : x.RightMoves, p (toLeftMovesNeg i))</code></p>",
        "id": 496020061,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1737941218
    },
    {
        "content": "<p>In fact, I suspect we can already get this through some lemma on equivalences.</p>",
        "id": 496020109,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1737941278
    },
    {
        "content": "<p>I got it!</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">fuzzy_zero_of_forall_exists_moveRight</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"bp\">.</span><span class=\"n\">RightMoves</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">H</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">j</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">G</span><span class=\"bp\">.</span><span class=\"n\">moveRight</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">moveRight</span><span class=\"w\"> </span><span class=\"n\">j</span><span class=\"w\"> </span><span class=\"bp\">≈</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"bp\">.</span><span class=\"n\">moveRight</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"bp\">‖</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">neg_fuzzy_zero_iff</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">fuzzy_zero_of_forall_exists_moveLeft</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">-</span><span class=\"n\">G</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">toLeftMovesNeg</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">moveLeft_neg_toLeftMovesNeg</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">simpa</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">toLeftMovesNeg</span><span class=\"bp\">.</span><span class=\"n\">forall_congr_right</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">toLeftMovesNeg</span><span class=\"bp\">.</span><span class=\"n\">exists_congr_right</span><span class=\"o\">]</span>\n</code></pre></div>",
        "id": 496020325,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1737941448
    },
    {
        "content": "<p>I think we could add these specializations of <code>Equiv.forall_congr_right</code>, etc. to our <code>simp</code> set. That is, any statement about the left/right moves of a negative should get turned into a statement about the right/left moves of a game, with the appropriate casts inserted.</p>",
        "id": 496020450,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1737941558
    },
    {
        "content": "<p>This should hopefully then make it so that we can prove more theorems by simply passing to the negative.</p>",
        "id": 496020459,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1737941572
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"459227\">Violeta Hernández</span> <a href=\"#narrow/channel/116395-maths/topic/Poset.20games/near/496020450\">said</a>:</p>\n<blockquote>\n<p>I think we could add these specializations of <code>Equiv.forall_congr_right</code>, etc. to our <code>simp</code> set. That is, any statement about the left/right moves of a negative should get turned into a statement about the right/left moves of a game, with the appropriate casts inserted.</p>\n</blockquote>\n<p>I can't think of any place where proving the negative of games is more useful <span aria-label=\"+1\" class=\"emoji emoji-1f44d\" role=\"img\" title=\"+1\">:+1:</span></p>",
        "id": 496021046,
        "sender_full_name": "Tristan Figueroa-Reid",
        "timestamp": 1737942029
    },
    {
        "content": "<p>I opened PR <a href=\"https://github.com/leanprover-community/mathlib4/pull/21110\">#21110</a> which combines a bunch of improvements I've made to the impartial file. Most notably, I managed to scrape off some 15-odd lines using these new <code>simp</code> lemmas.</p>",
        "id": 496024120,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1737944380
    },
    {
        "content": "<p>...actually nvm, there were even simpler proofs of the theorems I golfed!</p>",
        "id": 496029264,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1737948202
    },
    {
        "content": "<p>Still, I can attest that the new simp lemmas work and are useful.</p>",
        "id": 496029269,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1737948210
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"459227\">Violeta Hernández</span> <a href=\"#narrow/channel/116395-maths/topic/Poset.20games/near/496029264\">said</a>:</p>\n<blockquote>\n<p>...actually nvm, there were even simpler proofs of the theorems I golfed!</p>\n</blockquote>\n<p>Interesting - are the newly golfed changes currently on any PRs?</p>",
        "id": 496029288,
        "sender_full_name": "Tristan Figueroa-Reid",
        "timestamp": 1737948227
    },
    {
        "content": "<p>They're on the latest version of the PR I linked.</p>",
        "id": 496029411,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1737948309
    },
    {
        "content": "<p>Specifically: <a href=\"/user_uploads/3121/70gBBxGEYlPRkSberqDEH_Ja/fb495f86-6b37-4ee3-8012-2dd1d9468479.jpg\">fb495f86-6b37-4ee3-8012-2dd1d9468479.jpg</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/70gBBxGEYlPRkSberqDEH_Ja/fb495f86-6b37-4ee3-8012-2dd1d9468479.jpg\" title=\"fb495f86-6b37-4ee3-8012-2dd1d9468479.jpg\"><img data-original-content-type=\"image/jpeg\" data-original-dimensions=\"1080x1546\" src=\"/user_uploads/thumbnail/3121/70gBBxGEYlPRkSberqDEH_Ja/fb495f86-6b37-4ee3-8012-2dd1d9468479.jpg/840x560.webp\"></a></div><p><a href=\"/user_uploads/3121/Yi8WoZvs-9I7baktbFEVnbJO/8498b66f-9d30-4ae1-8252-f192169793c8.jpg\">8498b66f-9d30-4ae1-8252-f192169793c8.jpg</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/Yi8WoZvs-9I7baktbFEVnbJO/8498b66f-9d30-4ae1-8252-f192169793c8.jpg\" title=\"8498b66f-9d30-4ae1-8252-f192169793c8.jpg\"><img data-original-content-type=\"image/jpeg\" data-original-dimensions=\"1080x754\" src=\"/user_uploads/thumbnail/3121/Yi8WoZvs-9I7baktbFEVnbJO/8498b66f-9d30-4ae1-8252-f192169793c8.jpg/840x560.webp\"></a></div>",
        "id": 496029429,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1737948326
    },
    {
        "content": "<p>I've got an unrelated question. Now that I've formalized poset games, what's next?</p>",
        "id": 496029698,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1737948530
    },
    {
        "content": "<p>Are there any more interesting kinds of games that can be (nontrivially) considered as special cases of them?</p>",
        "id": 496029724,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1737948549
    },
    {
        "content": "<p>If not, what other families of games are worth formalizing, and how should we go about doing it?</p>",
        "id": 496029876,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1737948650
    },
    {
        "content": "<ul>\n<li>Hackenbush would be a good game to formalize in general</li>\n<li>(n-dimensional) Chomp is an excellent special-case poset game </li>\n<li>Heap games would have the biggest theory out of any impartial game.</li>\n</ul>",
        "id": 496029884,
        "sender_full_name": "Tristan Figueroa-Reid",
        "timestamp": 1737948656
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"459227\">Violeta Hernández</span> <a href=\"#narrow/channel/116395-maths/topic/Poset.20games/near/496029876\">said</a>:</p>\n<blockquote>\n<p>If not, what other families of games are worth formalizing, and how should we go about doing it?</p>\n</blockquote>\n<p>I think Hackenbush and Heap games would be the two biggest game families worth formalizing - Chomp and Hackenbush have two very nice connections to algorithmic combinatorial game theory that we can formalize.</p>",
        "id": 496029948,
        "sender_full_name": "Tristan Figueroa-Reid",
        "timestamp": 1737948711
    },
    {
        "content": "<p>It would also be nice to prove that red/blue Hackenbush forms the Surreals/is cold, and red/blue/green Hackenbush forms the cold and tepid games.</p>",
        "id": 496030042,
        "sender_full_name": "Tristan Figueroa-Reid",
        "timestamp": 1737948767
    },
    {
        "content": "<p>Is there anything that can be said about Chomp that can't be said about general poset games?</p>\n<p>We are currently missing the results that a finite product  of WQOs is a WQO, and that a subtype of a WQO is a WQO too. But other than that Chomp is very directly just the poset game on a finite product of well-orders minus their bottom element.</p>",
        "id": 496030050,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1737948773
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"459227\">Violeta Hernández</span> <a href=\"#narrow/channel/116395-maths/topic/Poset.20games/near/496030050\">said</a>:</p>\n<blockquote>\n<p>Is there anything that can be said about Chomp that can't be said about general poset games?</p>\n</blockquote>\n<p>Very little - I believe even PSPACE-completeness can be proven for poset games in general.</p>",
        "id": 496030196,
        "sender_full_name": "Tristan Figueroa-Reid",
        "timestamp": 1737948880
    },
    {
        "content": "<p>Hackenbush would definitely be worth formalizing. We could also formalize a version of strategy stealing on all-green Hackenbush (which is just a poset game in disguise).</p>",
        "id": 496030258,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1737948929
    },
    {
        "content": "<p>What are heap games?</p>",
        "id": 496030446,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1737949026
    },
    {
        "content": "<p>Something else I think might be worth is formalizing/reformalizing IMO game problems in terms of <code>PGame</code>, as a way to stress-test the API and show that it's actually practical in \"real world\" scenarios.</p>",
        "id": 496030566,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1737949114
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"459227\">Violeta Hernández</span> <a href=\"#narrow/channel/116395-maths/topic/Poset.20games/near/496030446\">said</a>:</p>\n<blockquote>\n<p>What are heap games?</p>\n</blockquote>\n<p>They are a special type of impartial game with (I believe) the most theory built on them other than Nim.</p>\n<p>I believe they were designed as a generalization of Nim (to represent 'heaps' with different rules)</p>\n<p>Heap games have 8 rules, and heap games are represented both by their actual state and a number (I believe it is a real number, but I don't think that conjecture holds for transfinite heap games) that represents the rules at each number of tokens starting at 0.</p>\n<p>For example, rule 3 states, \"It is legal to remove $i$ tokens always (but the remaining tokens must be left in a single heap),\" rule 0 states, \"It is never legal to remove $i$ tokens,\" and Nim is represented as 0.3333333...</p>",
        "id": 496030778,
        "sender_full_name": "Tristan Figueroa-Reid",
        "timestamp": 1737949283
    },
    {
        "content": "<p>Do you have a link to that?</p>",
        "id": 496030866,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1737949349
    },
    {
        "content": "<p>(The 0 at the start is there because you can't remove 0 tokens: you can't make an empty move)</p>\n<p>I went to send a reference article, and I'm surprised there's no Wikipedia article on this; I'll probably write one later. (edit: just wrote a stub.)</p>\n<p>My information is from Aaron Siegel's book, but I'll see if I can find what it references <span aria-label=\"+1\" class=\"emoji emoji-1f44d\" role=\"img\" title=\"+1\">:+1:</span></p>",
        "id": 496030941,
        "sender_full_name": "Tristan Figueroa-Reid",
        "timestamp": 1737949417
    },
    {
        "content": "<p>It makes sense why I was having trouble finding a reference - I made a mistake. I confused the general class of heap games for the class of octal games.</p>",
        "id": 496031376,
        "sender_full_name": "Tristan Figueroa-Reid",
        "timestamp": 1737949734
    },
    {
        "content": "<p>If there's one thing I've learned these past few months is that Aaron Siegel should be our canonical referent for all CGT</p>",
        "id": 496031382,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1737949743
    },
    {
        "content": "<p><a href=\"https://en.wikipedia.org/wiki/Octal_game\">Octal games are already written about</a>, but heap games are much more generic: singe-heap games are impartial games that are naturally represented by a heap of tokens, and a game is played on them. Heap games are the disjunctive sums of these single-heap games.</p>",
        "id": 496031810,
        "sender_full_name": "Tristan Figueroa-Reid",
        "timestamp": 1737950065
    },
    {
        "content": "<p>Speaking of special impartial games, Wythoff's game might also be worth formalizing.</p>",
        "id": 496031961,
        "sender_full_name": "Tristan Figueroa-Reid",
        "timestamp": 1737950187
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"767695\">Tristan Figueroa-Reid</span> <a href=\"#narrow/channel/116395-maths/topic/Poset.20games/near/496031810\">said</a>:</p>\n<blockquote>\n<p><a href=\"https://en.wikipedia.org/wiki/Octal_game\">Octal games are already written about</a>, but heap games are much more generic: singe-heap games are impartial games that are naturally represented by a heap of tokens, and a game is played on them. Heap games are the disjunctive sums of these single-heap games.</p>\n</blockquote>\n<p>I think someone earlier had a definition for a generic (finite) heap game.</p>",
        "id": 496031984,
        "sender_full_name": "Tristan Figueroa-Reid",
        "timestamp": 1737950212
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"562819\">Bernhard Reinke</span> <a href=\"#narrow/channel/116395-maths/topic/Poset.20games/near/494231866\">said</a>:</p>\n<blockquote>\n<p>Thinking a bit about it, I should have said <code>Multiset</code> and not Finset, but the point stands. I envision something like this:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">class</span><span class=\"w\"> </span><span class=\"n\">BreakState</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">height</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℕ</span>\n<span class=\"w\">  </span><span class=\"n\">l</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Multiset</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Multiset</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"n\">left_bound</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">},</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">l</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">height</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"n\">height</span><span class=\"w\"> </span><span class=\"n\">s</span>\n<span class=\"w\">  </span><span class=\"n\">right_bound</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">},</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">height</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"n\">height</span><span class=\"w\"> </span><span class=\"n\">s</span>\n</code></pre></div>\n<p>that would model an abstract \"breaking game\", positions would be given by <code>Multiset S</code>. For octal games one can take <code>S = ℕ</code> and <code>l = r</code> to be the allowed partitions of a heap of a given height.</p>\n<p>Written like this it should be still a short game</p>\n</blockquote>\n<p>Yes - in this thread, too! I did have some complaints about it being restricted to finite games, but that conversation ended shortly after.</p>",
        "id": 496032013,
        "sender_full_name": "Tristan Figueroa-Reid",
        "timestamp": 1737950238
    },
    {
        "content": "<p>By the way, we can probably generalize Poset games to restrict what players can take what elements, make the current definition of poset games an impartial version of the generic poset game, and define Hackenbush as the special poset game with a top element.</p>",
        "id": 496203337,
        "sender_full_name": "Tristan Figueroa-Reid",
        "timestamp": 1738008410
    },
    {
        "content": "<p>Doing this raises an important question though: what conditions would be necessary for the game to terminate?</p>",
        "id": 496268420,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1738047427
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"459227\">Violeta Hernández</span> <a href=\"#narrow/channel/116395-maths/topic/Poset.20games/near/496268420\">said</a>:</p>\n<blockquote>\n<p>Doing this raises an important question though: what conditions would be necessary for the game to terminate?</p>\n</blockquote>\n<p>The literature says all non-transfinite games terminate, which should be true of IGame. IGame.Short should probably be defined as: some IGame I is IGame.Short if there is an instance of a PGame P such that P is PGame.Short, and P is identical to the original IGame. This should probably not be an existential quantifier because we want to be able to compute the outcome of <code>IGame</code>s and <code>Game</code>s.</p>",
        "id": 496268692,
        "sender_full_name": "Tristan Figueroa-Reid",
        "timestamp": 1738047599
    },
    {
        "content": "<p>I'm pretty sure the WQO condition is both necessary and sufficient in the impartial case, but in the general case it's trivial to see that the condition is too strong. Take a non-wqo with a bottom element like <code>WithBot ℤ</code>, and make the only valid move for player 2 to take the bottom element.</p>",
        "id": 496268814,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1738047637
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"767695\">Tristan Figueroa-Reid</span> <a href=\"#narrow/channel/116395-maths/topic/Poset.20games/near/496268692\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"459227\">Violeta Hernández</span> <a href=\"#narrow/channel/116395-maths/topic/Poset.20games/near/496268420\">said</a>:</p>\n<blockquote>\n<p>Doing this raises an important question though: what conditions would be necessary for the game to terminate?</p>\n</blockquote>\n<p>The literature says all non-transfinite games terminate, which should be true of IGame. IGame.Short should probably be defined as: some IGame I is IGame.Short if there is an instance of a PGame P such that P is PGame.Short, and P is identical to the original IGame. This should probably not be an existential quantifier because we want to be able to compute the outcome of <code>IGame</code>s and <code>Game</code>s.</p>\n</blockquote>\n<p>I did not notice this was a different thread.</p>",
        "id": 496268845,
        "sender_full_name": "Tristan Figueroa-Reid",
        "timestamp": 1738047659
    },
    {
        "content": "<p>Oh yeah, any <code>PGame</code> / <code>IGame</code> always terminates. But poset games on a general poset don't always, e.g. consider the poset game on <code>ℕ</code> with the empty relation</p>",
        "id": 496269060,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1738047773
    },
    {
        "content": "<p>Hm. I hoped that a quick re-look at some of the more creative Hackenbush games in the Winning Ways series would be enlightening, but I can't think of any good condition, either.</p>",
        "id": 496270444,
        "sender_full_name": "Tristan Figueroa-Reid",
        "timestamp": 1738048563
    },
    {
        "content": "<p>I mean, we could still require poset games to be wqos for the sake of simplicity, even if it's too strong of a condition in some weird edge cases.</p>",
        "id": 496270709,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1738048713
    },
    {
        "content": "<p>It might work if one could partition the left/right/impartial parts of the poset into their own poset transitively and show that at least one is a WQO.</p>",
        "id": 496270716,
        "sender_full_name": "Tristan Figueroa-Reid",
        "timestamp": 1738048716
    },
    {
        "content": "<p>Though I can't think of a good concrete definition for the 'transitively' part.</p>",
        "id": 496270799,
        "sender_full_name": "Tristan Figueroa-Reid",
        "timestamp": 1738048771
    },
    {
        "content": "<p>Isn't the idea that any element can be taken by one or both of the players?</p>",
        "id": 496270826,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1738048794
    },
    {
        "content": "<p>So speaking of the red/blue poset should be completely well-defined</p>",
        "id": 496270896,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1738048813
    },
    {
        "content": "<p>Even that is still too strong of a condition in some really weird edge cases, though</p>",
        "id": 496271224,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1738048993
    },
    {
        "content": "<p>Consider <code>{x} ⊕ₗ ℤ ⊕ₗ ℤ</code> where the middle <code>ℤ</code> is blue and everything else is red. After blue's first turn, red is forced to remove <code>x</code>, and then the game immediately terminates, even though none of the red/blue parts are wqos on their own.</p>",
        "id": 496271393,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1738049072
    },
    {
        "content": "<p>Are there any situations where a game terminates without both left/right posets being WQOs, <del>or either player having a 'partial', or a disjunctively added WQO?</del> - that was weirdly worded.</p>",
        "id": 496271717,
        "sender_full_name": "Tristan Figueroa-Reid",
        "timestamp": 1738049231
    },
    {
        "content": "<p>In my example, the full poset isn't a wqo either.</p>",
        "id": 496271845,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1738049285
    },
    {
        "content": "<p>Every subset of a wqo is a wqo</p>",
        "id": 496271858,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1738049291
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"459227\">Violeta Hernández</span> <a href=\"#narrow/channel/116395-maths/topic/Poset.20games/near/496271393\">said</a>:</p>\n<blockquote>\n<p>Consider <code>{x} ⊕ ℤ ⊕ ℤ</code> where the middle <code>ℤ</code> is blue and everything else is red. After blue's first turn, red is forced to remove <code>x</code>, and then the game immediately terminates, even though none of the red/blue parts are wqos on their own.</p>\n</blockquote>\n<p>Wait - could red continue playing on the rightmost  <code>ℤ</code> in this example? I think that's where my misunderstanding is from.</p>",
        "id": 496272153,
        "sender_full_name": "Tristan Figueroa-Reid",
        "timestamp": 1738049436
    },
    {
        "content": "<p>Oh, it's supposed to represent <code>ℤ ⊕ ℤ</code> being green. I should have caught that <span aria-label=\"+1\" class=\"emoji emoji-1f44d\" role=\"img\" title=\"+1\">:+1:</span></p>",
        "id": 496272232,
        "sender_full_name": "Tristan Figueroa-Reid",
        "timestamp": 1738049477
    },
    {
        "content": "<p>No, I actually meant for the order to be lexicographic</p>",
        "id": 496272273,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1738049495
    },
    {
        "content": "<p>Forgot that this isn't the default order on a sum type</p>",
        "id": 496272294,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1738049504
    },
    {
        "content": "<p><a href=\"/user_uploads/3121/VtPlUxfoealtkwbwfUzcJrLv/image.png\">image.png</a><br>\nhere's a quick MS Paint drawing</p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/VtPlUxfoealtkwbwfUzcJrLv/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"86x250\" src=\"/user_uploads/thumbnail/3121/VtPlUxfoealtkwbwfUzcJrLv/image.png/840x560.webp\"></a></div>",
        "id": 496272432,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1738049560
    },
    {
        "content": "<p>This game can last at most 3 turns</p>",
        "id": 496272455,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1738049575
    },
    {
        "content": "<p>Right! Okay!</p>",
        "id": 496272484,
        "sender_full_name": "Tristan Figueroa-Reid",
        "timestamp": 1738049594
    },
    {
        "content": "<p>But wait, is this even a valid combinatorial game?</p>",
        "id": 496272607,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1738049644
    },
    {
        "content": "<p>This has the odd property that the game tree, if you don't require the players to alternate, is not well-founded</p>",
        "id": 496272642,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1738049675
    },
    {
        "content": "<p>I had never considered the possibility that a game that is always finite, isn't in fact a game in Conway's formalism!</p>",
        "id": 496272708,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1738049708
    },
    {
        "content": "<p>I believe I've seen a game like this before, but I'll recheck.</p>",
        "id": 496272709,
        "sender_full_name": "Tristan Figueroa-Reid",
        "timestamp": 1738049709
    },
    {
        "content": "<p>In fact, I think this implies the most general condition for Hackenbush to be a CGT is the same as for a poset game: it has to be a wqo.</p>",
        "id": 496273175,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1738049920
    },
    {
        "content": "<p>Follow-up question: is the partizan variant of a poset game you describe not completely isomorphic to Hackenbush?</p>",
        "id": 496273227,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1738049957
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"459227\">Violeta Hernández</span> <a href=\"#narrow/channel/116395-maths/topic/Poset.20games/near/496273175\">said</a>:</p>\n<blockquote>\n<p>In fact, I think this implies the most general condition for Hackenbush to be a CGT is the same as for a combinatorial game: it has to be a wqo.</p>\n</blockquote>\n<p>It seems so! I agree that that construction isn't well-founded <span aria-label=\"+1\" class=\"emoji emoji-1f44d\" role=\"img\" title=\"+1\">:+1:</span></p>",
        "id": 496273258,
        "sender_full_name": "Tristan Figueroa-Reid",
        "timestamp": 1738049979
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"459227\">Violeta Hernández</span> <a href=\"#narrow/channel/116395-maths/topic/Poset.20games/near/496273227\">said</a>:</p>\n<blockquote>\n<p>Follow-up question: is the partizan variant of a poset game you describe not completely isomorphic to Hackenbush?</p>\n</blockquote>\n<p>I was hoping there would be some slightly extra generalization, but I don't think it can form any hot game, so I think it is.</p>",
        "id": 496273349,
        "sender_full_name": "Tristan Figueroa-Reid",
        "timestamp": 1738050014
    },
    {
        "content": "<p>In fact, this has the silly implication that Chomp is just a particular Hackenbush game</p>",
        "id": 496273637,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1738050173
    },
    {
        "content": "<p><a href=\"/user_uploads/3121/7MxVyMiu7gmavoRSU12id7Hj/image.png\">image.png</a><br>\n3 × 4 chomp as an example</p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/7MxVyMiu7gmavoRSU12id7Hj/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"277x228\" src=\"/user_uploads/thumbnail/3121/7MxVyMiu7gmavoRSU12id7Hj/image.png/840x560.webp\"></a></div>",
        "id": 496273829,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1738050251
    },
    {
        "content": "<p>Wait - I do get the main point, but I don't think that's true for that particular case.</p>",
        "id": 496273887,
        "sender_full_name": "Tristan Figueroa-Reid",
        "timestamp": 1738050288
    },
    {
        "content": "<p>Wait, you're right. Hackenbush is about deleting segments, not deleting points</p>",
        "id": 496274264,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1738050483
    },
    {
        "content": "<p>3 by 4 chomp would correspond to Schuh's game with two primes, i.e., 7 and 3, with exponentiation 7^2 and 3^3. Drawing that out seems annoying, but absolutely possible <span aria-label=\"+1\" class=\"emoji emoji-1f44d\" role=\"img\" title=\"+1\">:+1:</span></p>",
        "id": 496274347,
        "sender_full_name": "Tristan Figueroa-Reid",
        "timestamp": 1738050529
    },
    {
        "content": "<p>Yeah, now I'm not so sure anymore about my conjecture</p>",
        "id": 496274992,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1738050806
    },
    {
        "content": "<p>It'd be nice if there were some simple/canonical way to convert poset games into Hackenbush and/or the other way around. The less formalisms we need to build from scratch, the better.</p>",
        "id": 496275049,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1738050838
    },
    {
        "content": "<p>But it's entirely possible these are just two separate constructions.</p>",
        "id": 496275105,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1738050847
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"459227\">Violeta Hernández</span> <a href=\"#narrow/channel/116395-maths/topic/Poset.20games/near/496274992\">said</a>:</p>\n<blockquote>\n<p>Yeah, now I'm not so sure anymore about my conjecture</p>\n</blockquote>\n<p>I think it is true both *by an explicit construction and by the proof of Hackenbush's temperature <span aria-label=\"+1\" class=\"emoji emoji-1f44d\" role=\"img\" title=\"+1\">:+1:</span>. Making an explicit construction doesn't seem too complex but not too trivial either.</p>",
        "id": 496275184,
        "sender_full_name": "Tristan Figueroa-Reid",
        "timestamp": 1738050881
    },
    {
        "content": "<p>Chomp is still a type of Poset game, but the Poset is based on divisors which is more annoying to construct by hand.</p>",
        "id": 496275300,
        "sender_full_name": "Tristan Figueroa-Reid",
        "timestamp": 1738050942
    },
    {
        "content": "<p>Chomp is just the poset game on a product of ordinals, minus the bottom element</p>",
        "id": 496275390,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1738050965
    },
    {
        "content": "<p>Just so happens that the poset for a product of naturals n_k is also the poset for the divisors of the product p_k^(n_k - 1)</p>",
        "id": 496275535,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1738051041
    },
    {
        "content": "<p>That's also why I don't think it's worth formalizing separately from poset games.</p>",
        "id": 496275715,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1738051113
    },
    {
        "content": "<p>Agreed - all of the interesting Chomp results can be generalized to any impartial Poset game.</p>",
        "id": 496275817,
        "sender_full_name": "Tristan Figueroa-Reid",
        "timestamp": 1738051159
    }
]