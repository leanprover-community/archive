[
    {
        "content": "<p>Having defined total variation for complex measures (PR in queue: <a href=\"https://github.com/leanprover-community/mathlib4/pull/25442\">#25442</a>) one could write a complex measure as the combination of angular part and total variation measure. In such a way we can write the integral with respect to a complex measure. On the other hand, what is the mathlib way to do this? Maybe there is instead an elegant way to define the integral with respect to a large class of <code>VectorMeasure</code>?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">MeasureTheory</span><span class=\"w\"> </span><span class=\"n\">ENNReal</span>\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">MeasurableSpace</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">]</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">MeasureTheory</span><span class=\"bp\">.</span><span class=\"n\">VectorMeasure</span><span class=\"bp\">.</span><span class=\"n\">variation</span>\n<span class=\"w\">    </span><span class=\"o\">{</span><span class=\"n\">V</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">TopologicalSpace</span><span class=\"w\"> </span><span class=\"n\">V</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">ENormedAddCommMonoid</span><span class=\"w\"> </span><span class=\"n\">V</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">T2Space</span><span class=\"w\"> </span><span class=\"n\">V</span><span class=\"o\">]</span><span class=\"w\">  </span><span class=\"o\">[</span><span class=\"n\">T2Space</span><span class=\"w\"> </span><span class=\"n\">V</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">μ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">VectorMeasure</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"n\">V</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">VectorMeasure</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"bp\">≥</span><span class=\"mi\">0</span><span class=\"bp\">∞</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"c1\">-- This is the definition from PR #25442.</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n\n<span class=\"sd\">/-- The variation measure part in the polar decomposition of a complex measure. -/</span>\n<span class=\"kn\">noncomputable</span><span class=\"w\"> </span><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">MeasureTheory</span><span class=\"bp\">.</span><span class=\"n\">VectorMeasure</span><span class=\"bp\">.</span><span class=\"n\">var</span>\n<span class=\"w\">     </span><span class=\"o\">(</span><span class=\"n\">μ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ComplexMeasure</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">μ</span><span class=\"bp\">.</span><span class=\"n\">variation</span><span class=\"bp\">.</span><span class=\"n\">ennrealToMeasure</span>\n\n<span class=\"sd\">/-- The angular part (density function) in the polar decomposition of a complex measure. -/</span>\n<span class=\"kn\">noncomputable</span><span class=\"w\"> </span><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">MeasureTheory</span><span class=\"bp\">.</span><span class=\"n\">VectorMeasure</span><span class=\"bp\">.</span><span class=\"n\">ang</span>\n<span class=\"w\">     </span><span class=\"o\">(</span><span class=\"n\">μ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ComplexMeasure</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">μ</span><span class=\"bp\">.</span><span class=\"n\">rnDeriv</span><span class=\"w\"> </span><span class=\"n\">μ</span><span class=\"bp\">.</span><span class=\"n\">var</span>\n\n<span class=\"kn\">noncomputable</span><span class=\"w\"> </span><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">ComplexMeasure</span><span class=\"bp\">.</span><span class=\"n\">integral</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">μ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ComplexMeasure</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℂ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"bp\">∫</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">μ</span><span class=\"bp\">.</span><span class=\"n\">ang</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">∂</span><span class=\"o\">(</span><span class=\"n\">μ</span><span class=\"bp\">.</span><span class=\"n\">var</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 523498031,
        "sender_full_name": "Oliver Butterley",
        "timestamp": 1749627667
    },
    {
        "content": "<p>Or, define integration with respect to a signed measure using the Hahn-Jordan decomposition and then integration with respect to a complex measure but integrating separately the real and imaginary parts. <br>\nIn summary, three approaches come to mind for integration with respect to a complex measure:</p>\n<ul>\n<li>Use variation and polar rep of complex measure</li>\n<li>Separately integrate real and imaginary parts and use Hahn-Jordan decomposition to integrate with respect to signed measure</li>\n<li>Directly define the integral via simple functions, etc. This could work for a larger class of VectorMeasure.</li>\n</ul>",
        "id": 523517602,
        "sender_full_name": "Oliver Butterley",
        "timestamp": 1749634001
    },
    {
        "content": "<p>Can’t you define total variation for a larger class of vector measures?</p>",
        "id": 523518155,
        "sender_full_name": "Etienne Marion",
        "timestamp": 1749634194
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"703970\">Etienne Marion</span> <a href=\"#narrow/channel/116395-maths/topic/Integral.20with.20respect.20to.20a.20complex.20measure/near/523518155\">said</a>:</p>\n<blockquote>\n<p>Can’t you define total variation for a larger class of vector measures?</p>\n</blockquote>\n<p>We did for all <code>(μ : VectorMeasure X V) </code> where <code>[TopologicalSpace V] [ENormedAddCommMonoid V] [T2Space V] </code>. <br>\nDo you mean that some of these assumptions on <code>V</code> could be dropped?</p>",
        "id": 523518505,
        "sender_full_name": "Oliver Butterley",
        "timestamp": 1749634302
    },
    {
        "content": "<p>Oh sorry you wrote complex measures so I assumed that you only did it for C</p>",
        "id": 523518954,
        "sender_full_name": "Etienne Marion",
        "timestamp": 1749634430
    },
    {
        "content": "<p>Ah! I see what you mean. Yes, my comment gave a certain impression that was inaccurate.</p>\n<p>For the project at hand we needed variation and integration for complex measures.  We defined variation for all <code>VectorMeasure</code> since that was natural. Now turning our attention to the integral and wondering how best to proceed.</p>",
        "id": 523519384,
        "sender_full_name": "Oliver Butterley",
        "timestamp": 1749634550
    },
    {
        "content": "<p>I think it would be nice to define the integral of vector measure, perhaps Banach space-valued ones. We will need it to define the resolution of the identity (the spectral measure) of self-adjoint operators.</p>\n<p>Does anyone has a suggestion for literature?</p>",
        "id": 524122107,
        "sender_full_name": "Yoh Tanimoto",
        "timestamp": 1749984498
    }
]