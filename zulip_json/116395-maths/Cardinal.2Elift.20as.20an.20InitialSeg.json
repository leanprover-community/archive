[
    {
        "content": "<p>In <a href=\"https://github.com/leanprover-community/mathlib4/pull/16347\">#16347</a>, I make <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Cardinal.lift#doc\">docs#Cardinal.lift</a> an <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=InitialSeg#doc\">docs#InitialSeg</a>. This is a structure that sees little use in the current API, but I believe doing this has a lot of advantages. I'll paraphrase what I said in that PR.</p>\n<p>Most crucially, being an initial segment embedding from <code>Cardinal.{u}</code> into <code>Cardinal.{max u v}</code> is <em>precisely</em> the property that characterizes <code>lift</code>, as it essentially encodes the mathematical intuition that one is \"just a subset of the other\". As such, most of the order properties of <code>lift</code>, such as <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Cardinal.lift_lt#doc\">docs#Cardinal.lift_lt</a>, <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Cardinal.lift_succ#doc\">docs#Cardinal.lift_succ</a>, <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Cardinal.lift_iSup#doc\">docs#Cardinal.lift_iSup</a>, as well as some others like <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Cardinal.lift_lift#doc\">docs#Cardinal.lift_lift</a> and the (to be added) <code>Cardinal.lift_aleph</code>, all follow from this initial segment structure (even if most of these lemmas are still missing in that generality).</p>\n<p>The only cons I can see for this change is that dot notation breaks (in exactly two lines of code, mind you), and that the <code>InitialSeg</code> structure might be unfamiliar to people using the API (though conversely, using the structure more should alleviate that).</p>",
        "id": 471098568,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1726608213
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"387244\">@Yaël Dillies</span></p>",
        "id": 471098702,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1726608241
    },
    {
        "content": "<p>To be clear, if this refactor goes through, I also plan on doing the same with <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Ordinal.lift#doc\">docs#Ordinal.lift</a></p>",
        "id": 471099035,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1726608304
    },
    {
        "content": "<p>A pattern sometimes used here is to keep <code>foo</code> around as the simp-normal form, but introduce a <code>fooHom</code> (or here, fooInitialSeg`) to use when building proofs of those theorems</p>",
        "id": 471372563,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1726706211
    },
    {
        "content": "<p>I think that pattern is successful when the bundled structure isn't something you necessarily care about, or when it's hard to build it up all at once. I'm arguing this is not one of those cases.</p>",
        "id": 471372706,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1726706296
    },
    {
        "content": "<p>Often the reason for preferring that pattern is \"there are multiple incompatible bundlings possible, so to avoid having to pick a preferred one we prefer the unbundled spelling\"</p>",
        "id": 471444581,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1726738021
    },
    {
        "content": "<p>I do admit there's one other possible bundling that makes sense, which is a ring homomorphism</p>",
        "id": 471448557,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1726739433
    },
    {
        "content": "<p>Or, when the target universe is strictly larger, a principal segment embedding</p>",
        "id": 471570093,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1726783376
    },
    {
        "content": "<p>Alright, maybe it does make sense to have the unbundled version separate</p>",
        "id": 471570771,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1726783754
    },
    {
        "content": "<p>Should it just be called <code>Cardinal.lift.initialSeg</code>?</p>",
        "id": 471572239,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1726784637
    },
    {
        "content": "<p><code>liftInitialSeg</code> is slightly more common</p>",
        "id": 471572959,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1726785013
    },
    {
        "content": "<p>I should note <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Ordinal.lift.initialSeg#doc\">docs#Ordinal.lift.initialSeg</a> exists</p>",
        "id": 471585864,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1726794221
    },
    {
        "content": "<p>Should that be renamed at some point?</p>",
        "id": 471585875,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1726794239
    },
    {
        "content": "<p>Also, here's another question: what about <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Ordinal.typein#doc\">docs#Ordinal.typein</a> ?</p>",
        "id": 471664797,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1726821885
    },
    {
        "content": "<p>I think that has a much stronger case for being made into a <code>PrincipalSeg</code></p>",
        "id": 471664880,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1726821901
    },
    {
        "content": "<p>There is no other reasonable structure to give it. No one is using dot notation with this. And also, we didn't have any problem with making <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Ordinal.enum#doc\">docs#Ordinal.enum</a> into a <code>RelIso</code> a month or so ago.</p>",
        "id": 471665843,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1726822152
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"459227\">Violeta Hernández</span> <a href=\"#narrow/stream/116395-maths/topic/Cardinal.2Elift.20as.20an.20InitialSeg/near/471585864\">said</a>:</p>\n<blockquote>\n<p>I should note <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Ordinal.lift.initialSeg#doc\">docs#Ordinal.lift.initialSeg</a> exists</p>\n</blockquote>\n<p>In that case being locally consistent is fine.</p>",
        "id": 471681856,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1726826248
    }
]