[
    {
        "content": "<p>Is <code>a ∉ interior (Ici a)</code> true under <a href=\"https://leanprover-community.github.io/mathlib_docs/find/order_closed_topology\">docs#order_closed_topology</a> alone? I'm pretty sure it's true for <code>r : ℝ</code> <code>a : ℝ × ℝ</code> or <code>v : fin n → ℝ</code>, but I can only see how to prove it for the first case (<a href=\"https://leanprover-community.github.io/mathlib_docs/find/interior_Ici\">docs#interior_Ici</a>) where the order is a linear_order</p>",
        "id": 352824200,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1682520299
    },
    {
        "content": "<p>It's not true for <code>nnreal</code> and <code>a = 0</code>, because then <code>Ici a</code> is everything. It's not true in a discrete order either.</p>",
        "id": 352826425,
        "sender_full_name": "Sebastien Gouezel",
        "timestamp": 1682520588
    },
    {
        "content": "<p>Am I right in saying <code>[densely_ordered α] [no_min_order α]</code> resolves both of those objections?</p>",
        "id": 352827225,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1682520690
    },
    {
        "content": "<p>Yes. Under these assumptions, the interior of <code>Ici a</code> is <code>Ioi a</code>. This should already be in mathlib. <a href=\"https://leanprover-community.github.io/mathlib_docs/find/interior_Ici\">docs#interior_Ici</a>, maybe?</p>",
        "id": 352830225,
        "sender_full_name": "Sebastien Gouezel",
        "timestamp": 1682521039
    },
    {
        "content": "<p>Yes. Our naming convention works pretty well :-)</p>",
        "id": 352830770,
        "sender_full_name": "Sebastien Gouezel",
        "timestamp": 1682521110
    },
    {
        "content": "<p>You added the extra assumption that there was a linear order!</p>",
        "id": 352832921,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1682521346
    },
    {
        "content": "<p>Yes, of course. I never think of the order topology on orders which are not linearly ordered :-)</p>",
        "id": 352843655,
        "sender_full_name": "Sebastien Gouezel",
        "timestamp": 1682522643
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/stream/116395-maths/topic/.60a.20.E2.88.89.20interior.20.28Ici.20a.29.60.20for.20partial.20orders/near/352827225\">said</a>:</p>\n<blockquote>\n<p>Am I right in saying <code>[densely_ordered α] [no_min_order α]</code> resolves both of those objections?</p>\n</blockquote>\n<p>Usually, <em>densely ordered</em> also conveys total order (but perhaps it's just my bias).</p>",
        "id": 352844893,
        "sender_full_name": "Pedro Sánchez Terraf",
        "timestamp": 1682522779
    },
    {
        "content": "<p>Naively I want to change the definition of <code>order_closed_topology </code> to</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">class</span> <span class=\"n\">order_closed_topology</span> <span class=\"o\">(</span><span class=\"n\">α</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">)</span> <span class=\"o\">[</span><span class=\"n\">topological_space</span> <span class=\"n\">α</span><span class=\"o\">]</span> <span class=\"o\">[</span><span class=\"n\">preorder</span> <span class=\"n\">α</span><span class=\"o\">]</span> <span class=\"o\">:</span> <span class=\"kt\">Prop</span> <span class=\"o\">:=</span>\n<span class=\"o\">(</span><span class=\"n\">is_closed_le'</span> <span class=\"o\">:</span> <span class=\"n\">is_closed</span> <span class=\"o\">{</span><span class=\"n\">p</span> <span class=\"o\">:</span> <span class=\"n\">α</span> <span class=\"bp\">×</span> <span class=\"n\">α</span> <span class=\"bp\">|</span> <span class=\"n\">p.1</span> <span class=\"bp\">≤</span> <span class=\"n\">p.2</span><span class=\"o\">})</span>\n<span class=\"o\">(</span><span class=\"n\">interior_le_subset_lt</span> <span class=\"o\">:</span> <span class=\"n\">interior</span> <span class=\"o\">{</span><span class=\"n\">p</span> <span class=\"o\">:</span> <span class=\"n\">α</span> <span class=\"bp\">×</span> <span class=\"n\">α</span> <span class=\"bp\">|</span> <span class=\"n\">p.1</span> <span class=\"bp\">≤</span> <span class=\"n\">p.2</span><span class=\"o\">}</span> <span class=\"bp\">⊆</span> <span class=\"o\">{</span><span class=\"n\">p</span> <span class=\"o\">:</span> <span class=\"n\">α</span> <span class=\"bp\">×</span> <span class=\"n\">α</span> <span class=\"bp\">|</span> <span class=\"n\">p.1</span> <span class=\"bp\">&lt;</span> <span class=\"n\">p.2</span><span class=\"o\">})</span>\n</code></pre></div>",
        "id": 352851804,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1682523649
    },
    {
        "content": "<p>I was able to prove the prod instance for this, and it's hopefully obviously true for linear orders</p>\n<div class=\"spoiler-block\"><div class=\"spoiler-header\">\n<p>prod instance</p>\n</div><div class=\"spoiler-content\" aria-hidden=\"true\">\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">instance</span> <span class=\"o\">[</span><span class=\"n\">preorder</span> <span class=\"n\">α</span><span class=\"o\">]</span> <span class=\"o\">[</span><span class=\"n\">topological_space</span> <span class=\"n\">α</span><span class=\"o\">]</span> <span class=\"o\">[</span><span class=\"n\">order_closed_topology</span> <span class=\"n\">α</span><span class=\"o\">]</span>\n  <span class=\"o\">[</span><span class=\"n\">preorder</span> <span class=\"n\">β</span><span class=\"o\">]</span> <span class=\"o\">[</span><span class=\"n\">topological_space</span> <span class=\"n\">β</span><span class=\"o\">]</span> <span class=\"o\">[</span><span class=\"n\">order_closed_topology</span> <span class=\"n\">β</span><span class=\"o\">]</span> <span class=\"o\">:</span>\n  <span class=\"n\">order_closed_topology</span> <span class=\"o\">(</span><span class=\"n\">α</span> <span class=\"bp\">×</span> <span class=\"n\">β</span><span class=\"o\">)</span> <span class=\"o\">:=</span>\n<span class=\"o\">⟨(</span><span class=\"n\">is_closed_le</span> <span class=\"o\">(</span><span class=\"n\">continuous_fst.comp</span> <span class=\"n\">continuous_fst</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">continuous_fst.comp</span> <span class=\"n\">continuous_snd</span><span class=\"o\">))</span><span class=\"bp\">.</span><span class=\"n\">inter</span>\n  <span class=\"o\">(</span><span class=\"n\">is_closed_le</span> <span class=\"o\">(</span><span class=\"n\">continuous_snd.comp</span> <span class=\"n\">continuous_fst</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">continuous_snd.comp</span> <span class=\"n\">continuous_snd</span><span class=\"o\">)),</span> <span class=\"kd\">begin</span>\n    <span class=\"k\">have</span> <span class=\"n\">ha</span> <span class=\"o\">:=</span> <span class=\"bp\">@</span><span class=\"n\">order_closed_topology.interior_le_subset_lt</span> <span class=\"n\">α</span> <span class=\"n\">_</span> <span class=\"n\">_</span> <span class=\"n\">_</span><span class=\"o\">,</span>\n    <span class=\"k\">have</span> <span class=\"n\">hb</span> <span class=\"o\">:=</span> <span class=\"bp\">@</span><span class=\"n\">order_closed_topology.interior_le_subset_lt</span> <span class=\"n\">β</span> <span class=\"n\">_</span> <span class=\"n\">_</span> <span class=\"n\">_</span><span class=\"o\">,</span>\n    <span class=\"n\">replace</span> <span class=\"n\">ha</span> <span class=\"o\">:=</span> <span class=\"bp\">@</span><span class=\"n\">preimage_mono</span> <span class=\"n\">_</span> <span class=\"n\">_</span> <span class=\"o\">(</span><span class=\"bp\">λ</span> <span class=\"n\">p</span> <span class=\"o\">:</span> <span class=\"o\">(</span><span class=\"n\">α</span> <span class=\"bp\">×</span> <span class=\"n\">β</span><span class=\"o\">)</span> <span class=\"bp\">×</span> <span class=\"o\">(</span><span class=\"n\">α</span> <span class=\"bp\">×</span> <span class=\"n\">β</span><span class=\"o\">),</span> <span class=\"o\">(</span><span class=\"n\">p.1.1</span><span class=\"o\">,</span> <span class=\"n\">p.2.1</span><span class=\"o\">))</span> <span class=\"n\">_</span> <span class=\"n\">_</span> <span class=\"n\">ha</span><span class=\"o\">,</span>\n    <span class=\"n\">replace</span> <span class=\"n\">hb</span> <span class=\"o\">:=</span> <span class=\"bp\">@</span><span class=\"n\">preimage_mono</span> <span class=\"n\">_</span> <span class=\"n\">_</span> <span class=\"o\">(</span><span class=\"bp\">λ</span> <span class=\"n\">p</span> <span class=\"o\">:</span> <span class=\"o\">(</span><span class=\"n\">α</span> <span class=\"bp\">×</span> <span class=\"n\">β</span><span class=\"o\">)</span> <span class=\"bp\">×</span> <span class=\"o\">(</span><span class=\"n\">α</span> <span class=\"bp\">×</span> <span class=\"n\">β</span><span class=\"o\">),</span> <span class=\"o\">(</span><span class=\"n\">p.1.2</span><span class=\"o\">,</span> <span class=\"n\">p.2.2</span><span class=\"o\">))</span> <span class=\"n\">_</span> <span class=\"n\">_</span> <span class=\"n\">hb</span><span class=\"o\">,</span>\n    <span class=\"n\">simp_rw</span> <span class=\"o\">[</span><span class=\"n\">preimage_set_of_eq</span><span class=\"o\">]</span> <span class=\"n\">at</span> <span class=\"n\">ha</span> <span class=\"n\">hb</span><span class=\"o\">,</span>\n    <span class=\"n\">rw</span> <span class=\"n\">is_open_map.preimage_interior_eq_interior_preimage</span> <span class=\"n\">at</span> <span class=\"n\">ha</span> <span class=\"n\">hb</span><span class=\"o\">,</span>\n    <span class=\"o\">{</span> <span class=\"k\">have</span> <span class=\"o\">:=</span> <span class=\"n\">inter_subset_inter</span> <span class=\"n\">ha</span> <span class=\"n\">hb</span><span class=\"o\">,</span>\n      <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"n\">interior_inter</span><span class=\"o\">,</span> <span class=\"n\">preimage_set_of_eq</span><span class=\"o\">,</span> <span class=\"n\">preimage_set_of_eq</span><span class=\"o\">,</span> <span class=\"bp\">←</span><span class=\"n\">set_of_and</span><span class=\"o\">,</span> <span class=\"bp\">←</span><span class=\"n\">set_of_and</span><span class=\"o\">]</span> <span class=\"n\">at</span> <span class=\"n\">this</span><span class=\"o\">,</span>\n      <span class=\"n\">refine</span> <span class=\"n\">subset.trans</span> <span class=\"n\">this</span> <span class=\"n\">_</span><span class=\"o\">,</span>\n      <span class=\"n\">rw</span> <span class=\"n\">set_of_subset_set_of</span><span class=\"o\">,</span>\n      <span class=\"n\">intro</span> <span class=\"n\">a</span><span class=\"o\">,</span>\n      <span class=\"n\">rw</span> <span class=\"n\">prod.lt_iff</span><span class=\"o\">,</span>\n      <span class=\"n\">intro</span> <span class=\"n\">ha</span><span class=\"o\">,</span>\n      <span class=\"n\">left</span><span class=\"o\">,</span>\n      <span class=\"n\">refine</span> <span class=\"n\">ha.imp_right</span> <span class=\"n\">le_of_lt</span> <span class=\"o\">},</span>\n    <span class=\"o\">{</span> <span class=\"n\">exact</span> <span class=\"n\">is_open_map_fst.prod</span> <span class=\"n\">is_open_map_fst</span> <span class=\"o\">},</span>\n    <span class=\"o\">{</span> <span class=\"n\">continuity</span> <span class=\"o\">},</span>\n    <span class=\"o\">{</span> <span class=\"n\">exact</span> <span class=\"n\">is_open_map_snd.prod</span> <span class=\"n\">is_open_map_snd</span> <span class=\"o\">},</span>\n    <span class=\"o\">{</span> <span class=\"n\">continuity</span> <span class=\"o\">},</span>\n  <span class=\"kd\">end</span><span class=\"o\">⟩</span>\n</code></pre></div>\n</div></div>",
        "id": 352852324,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1682523711
    },
    {
        "content": "<p>Probably I've forgotten <code>[densely_ordered α] [no_min_order α]</code> again</p>",
        "id": 352852868,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1682523777
    },
    {
        "content": "<p>I think <code>interior_le_subset_lt</code> for linear orders just requires <code>densely_ordered</code>.</p>",
        "id": 352856439,
        "sender_full_name": "Felix Weilacher",
        "timestamp": 1682524229
    },
    {
        "content": "<p>I guess the above forbids the discrete topology, but maybe that doesn't matter</p>",
        "id": 352859289,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1682524601
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"464202\">Felix Weilacher</span> <a href=\"#narrow/stream/116395-maths/topic/.60a.20.E2.88.89.20interior.20.28Ici.20a.29.60.20for.20partial.20orders/near/352856439\">said</a>:</p>\n<blockquote>\n<p>I think <code>interior_le_subset_lt</code> for linear orders just requires <code>densely_ordered</code>.</p>\n</blockquote>\n<p>No... the implication fails for the order with 1 point...</p>",
        "id": 352866388,
        "sender_full_name": "Felix Weilacher",
        "timestamp": 1682525476
    },
    {
        "content": "<p>It seems like that might be the only counterexample though</p>",
        "id": 352867755,
        "sender_full_name": "Felix Weilacher",
        "timestamp": 1682525646
    }
]