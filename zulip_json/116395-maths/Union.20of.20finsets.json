[
    {
        "content": "<p>Hi all, i cant make the union of two finsets hset1 and hset2, why ? <span aria-label=\"sob\" class=\"emoji emoji-1f62d\" role=\"img\" title=\"sob\">:sob:</span> Here the code</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">inter_politopes</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">plt1</span><span class=\"w\"> </span><span class=\"n\">plt2</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Polytope</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ğ•œ</span><span class=\"o\">:=</span><span class=\"n\">ğ•œ</span><span class=\"o\">)):</span>\n<span class=\"w\">      </span><span class=\"n\">isPolytope</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ğ•œ</span><span class=\"o\">:=</span><span class=\"n\">ğ•œ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">V</span><span class=\"o\">:=</span><span class=\"n\">V</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">plt1</span><span class=\"bp\">.</span><span class=\"n\">carrier</span><span class=\"w\"> </span><span class=\"bp\">âˆ©</span><span class=\"w\"> </span><span class=\"n\">plt2</span><span class=\"bp\">.</span><span class=\"n\">carrier</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">isp1</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">isPolytope</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ğ•œ</span><span class=\"o\">:=</span><span class=\"n\">ğ•œ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">plt1</span><span class=\"bp\">.</span><span class=\"n\">carrier</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">      </span><span class=\"n\">use</span><span class=\"w\"> </span><span class=\"n\">plt1</span><span class=\"bp\">.</span><span class=\"n\">vertices</span>\n<span class=\"w\">      </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">plt1</span><span class=\"bp\">.</span><span class=\"n\">is_convex</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">isp2</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">isPolytope</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ğ•œ</span><span class=\"o\">:=</span><span class=\"n\">ğ•œ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">plt2</span><span class=\"bp\">.</span><span class=\"n\">carrier</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">      </span><span class=\"n\">use</span><span class=\"w\"> </span><span class=\"n\">plt2</span><span class=\"bp\">.</span><span class=\"n\">vertices</span>\n<span class=\"w\">      </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">plt2</span><span class=\"bp\">.</span><span class=\"n\">is_convex</span>\n\n<span class=\"w\">  </span><span class=\"n\">rcases</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"n\">poly_iff_inter</span><span class=\"w\"> </span><span class=\"n\">plt1</span><span class=\"bp\">.</span><span class=\"n\">carrier</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">mp</span><span class=\"w\"> </span><span class=\"n\">isp1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"bp\">âŸ¨</span><span class=\"n\">hset1</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">hp1</span><span class=\"bp\">âŸ©</span>\n<span class=\"w\">  </span><span class=\"n\">rcases</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"n\">poly_iff_inter</span><span class=\"w\"> </span><span class=\"n\">plt2</span><span class=\"bp\">.</span><span class=\"n\">carrier</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">mp</span><span class=\"w\"> </span><span class=\"n\">isp2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"bp\">âŸ¨</span><span class=\"n\">hset2</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">hp2</span><span class=\"bp\">âŸ©</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">is_inter</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">âˆƒ</span><span class=\"o\">(</span><span class=\"n\">Hset3</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">V</span><span class=\"o\">)),</span><span class=\"w\"> </span><span class=\"bp\">âˆ€</span><span class=\"n\">hsp</span><span class=\"w\"> </span><span class=\"bp\">âˆˆ</span><span class=\"w\"> </span><span class=\"n\">Hset3</span><span class=\"o\">,</span>\n<span class=\"w\">                  </span><span class=\"n\">isHalfSpace</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ğ•œ</span><span class=\"o\">:=</span><span class=\"n\">ğ•œ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">hsp</span><span class=\"w\"> </span><span class=\"bp\">âˆ§</span>\n<span class=\"w\">                  </span><span class=\"n\">plt1</span><span class=\"bp\">.</span><span class=\"n\">carrier</span><span class=\"w\"> </span><span class=\"bp\">âˆ©</span><span class=\"w\"> </span><span class=\"n\">plt2</span><span class=\"bp\">.</span><span class=\"n\">carrier</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">â‹‚</span><span class=\"w\"> </span><span class=\"n\">hsp</span><span class=\"w\"> </span><span class=\"bp\">âˆˆ</span><span class=\"w\"> </span><span class=\"n\">Hset3</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">hsp</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n\n<span class=\"w\">      </span><span class=\"c1\">-- lean says failed to synthetize (Finset (Set V)), WHY ?</span>\n<span class=\"w\">      </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">hset3</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">hset1</span><span class=\"w\"> </span><span class=\"bp\">âˆª</span><span class=\"w\"> </span><span class=\"n\">hset2</span>\n\n\n<span class=\"w\">  </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">poly_iff_inter</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">plt1</span><span class=\"bp\">.</span><span class=\"n\">carrier</span><span class=\"w\"> </span><span class=\"bp\">âˆ©</span><span class=\"w\"> </span><span class=\"n\">plt2</span><span class=\"bp\">.</span><span class=\"n\">carrier</span><span class=\"o\">))</span><span class=\"bp\">.</span><span class=\"n\">mpr</span><span class=\"w\"> </span><span class=\"n\">is_inter</span>\n<span class=\"bp\">```</span>\n\n<span class=\"bp\">```</span>\n</code></pre></div>",
        "id": 547149471,
        "sender_full_name": "GENNARO PORPORA",
        "timestamp": 1761502078
    },
    {
        "content": "<p>could you post a <a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a>?</p>\n<p>also what are the types of <code>hset1</code> and <code>hset2</code>?</p>",
        "id": 547150101,
        "sender_full_name": "Matt Diamond",
        "timestamp": 1761502686
    },
    {
        "content": "<p>one gotcha with Finset unions is that they require decidable equality (see <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Finset.instUnion#doc\">docs#Finset.instUnion</a>)</p>",
        "id": 547150186,
        "sender_full_name": "Matt Diamond",
        "timestamp": 1761502789
    },
    {
        "content": "<p>this isn't a big deal though... you can just write <code>classical let hset3 := hset1 âˆª hset2</code></p>",
        "id": 547150245,
        "sender_full_name": "Matt Diamond",
        "timestamp": 1761502831
    },
    {
        "content": "<p><span aria-label=\"astonished\" class=\"emoji emoji-1f632\" role=\"img\" title=\"astonished\">:astonished:</span> with classical it wooorks ! Thank you so much !! <span aria-label=\"yellow heart\" class=\"emoji emoji-1f49b\" role=\"img\" title=\"yellow heart\">:yellow_heart:</span></p>",
        "id": 547150340,
        "sender_full_name": "GENNARO PORPORA",
        "timestamp": 1761502971
    },
    {
        "content": "<p>5 messages were moved here from <a class=\"stream-topic\" data-stream-id=\"116395\" href=\"/#narrow/channel/116395-maths/topic/Piecewise.20linear.20maps/with/521811996\">#maths &gt; Piecewise linear maps</a> by <span class=\"user-mention silent\" data-user-id=\"307953\">Ruben Van de Velde</span>.</p>",
        "id": 547155952,
        "sender_full_name": "Notification Bot",
        "timestamp": 1761508643
    }
]