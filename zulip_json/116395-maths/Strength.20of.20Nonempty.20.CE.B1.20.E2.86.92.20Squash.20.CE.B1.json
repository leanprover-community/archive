[
    {
        "content": "<p>What are the consequences of <code>Nonempty α → Squash α</code> as an axiom, compared to choice (<code>Nonempty α → α</code>)? I can see it's equivalent to choice for subsingletons (<code>Nonempty α → Subsingleton α → α</code>). Is it a well known axiom?</p>",
        "id": 448110294,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1719749808
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Squash#doc\">docs#Squash</a></p>",
        "id": 448111545,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1719750921
    },
    {
        "content": "<p>Ooh, this was <code>trunc</code> in lean 3 IIRC</p>",
        "id": 448111592,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1719750963
    },
    {
        "content": "<p>Huh, there's still <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Trunc#doc\">docs#Trunc</a></p>",
        "id": 448111642,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1719750998
    },
    {
        "content": "<p>This is an axiom knows as \"unique choice\". It is a much safer version of choice. Mathematically, it is nicer, since you cannot use it to define \"unknowable objects,\" e.g. a natural number for which it is impossible (even in principle) to know whether it is 0 or not. From a type-theoretic view, there are variants of type theory where (a version of) unique choice is provable (e.g. HoTT) or even computable (e.g. cubical type theory).</p>",
        "id": 448112851,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1719752073
    },
    {
        "content": "<p>Interesting. Thanks</p>",
        "id": 448113082,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1719752259
    },
    {
        "content": "<p>I've also heard the claim that this function is available in ZF set theory with no extra axioms (and this sounds reasonable, because this is kind of the definition of a function in ZF set theory)</p>",
        "id": 448116900,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1719755404
    },
    {
        "content": "<p>The duplication Squash vs Truc is probably a porting accident that should be fixed by deleting the Mathlib version (probably keeping lemmas that are not in Core).</p>",
        "id": 448195703,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1719795718
    },
    {
        "content": "<p>Would someone be able to delete <code>Trunc</code>?</p>",
        "id": 448198726,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1719797582
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110087\">Kim Morrison</span> <a href=\"#narrow/stream/116395-maths/topic/Strength.20of.20Nonempty.20.CE.B1.20.E2.86.92.20Squash.20.CE.B1/near/448198726\">said</a>:</p>\n<blockquote>\n<p>Would someone be able to delete <code>Trunc</code>?</p>\n</blockquote>\n<p>I'm working on it on <a href=\"https://github.com/leanprover-community/mathlib4/pull/14619\">#14619</a>, but it's used in quite a few places</p>",
        "id": 450501211,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1720628465
    },
    {
        "content": "<p>Is there any reason for <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=CategoryTheory.Groupoid.ofTruncSplitMono#doc\">docs#CategoryTheory.Groupoid.ofTruncSplitMono</a> to use <code>Trunc</code>? <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=CategoryTheory.IsSplitMono#doc\">docs#CategoryTheory.IsSplitMono</a> is a <code>Prop</code>... Is it supposed to be <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=SplitMono#doc\">docs#SplitMono</a> ?</p>",
        "id": 450501925,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1720628625
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"690858\">@Daniel Weber</span>, I'm pretty sure this is an incomplete refactor, and we can remove the <code>Trunc</code> here.</p>",
        "id": 450506164,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1720629679
    },
    {
        "content": "<p>There's also a problem with <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Fintype.truncRecEmptyOption#doc\">docs#Fintype.truncRecEmptyOption</a>, which presumably we want for <code>Sort</code>s but <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Squash#doc\">docs#Squash</a> is defined only for <code>Type</code>s. Is there any possible problem with making <code>Squash</code> take <code>Sort</code> instead of <code>Type</code>?</p>",
        "id": 450507444,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1720630195
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"690858\">Daniel Weber</span> <a href=\"#narrow/stream/116395-maths/topic/Strength.20of.20Nonempty.20.CE.B1.20.E2.86.92.20Squash.20.CE.B1/near/450507444\">said</a>:</p>\n<blockquote>\n<p>There's also a problem with <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Fintype.truncRecEmptyOption#doc\">docs#Fintype.truncRecEmptyOption</a>, which presumably we want for <code>Sort</code>s</p>\n</blockquote>\n<p><del><code>Option</code> and <code>Fintype</code> don't exist for <code>Sort*</code>, so I doubt we want this</del></p>",
        "id": 450507685,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1720630269
    },
    {
        "content": "<p>It does seem possibly problematic that <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Trunc#doc\">docs#Trunc</a> takes <code>Sort u</code> and <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Squash#doc\">docs#Squash</a> takes <code>Type u</code> though</p>",
        "id": 450507842,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1720630325
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/stream/116395-maths/topic/Strength.20of.20Nonempty.20.CE.B1.20.E2.86.92.20Squash.20.CE.B1/near/450507685\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"690858\">Daniel Weber</span> <a href=\"#narrow/stream/116395-maths/topic/Strength.20of.20Nonempty.20.CE.B1.20.E2.86.92.20Squash.20.CE.B1/near/450507444\">said</a>:</p>\n<blockquote>\n<p>There's also a problem with <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Fintype.truncRecEmptyOption#doc\">docs#Fintype.truncRecEmptyOption</a>, which presumably we want for <code>Sort</code>s</p>\n</blockquote>\n<p><code>Option</code> and <code>Fintype</code> don't exist for <code>Sort*</code>, so I doubt we want this</p>\n</blockquote>\n<p>What? Currently <code>P : Type u → Sort v</code>, and it returns <code>Trunc (P α)</code>, which is <code>Sort v</code>. <code>Option</code> is only used in <code>P (Option α)</code>, where it's a <code>Type u</code>.</p>",
        "id": 450508031,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1720630385
    },
    {
        "content": "<p>In fact <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Fintype.induction_empty_option#doc\">docs#Fintype.induction_empty_option</a> uses it with <code>P : Type u → Prop</code></p>",
        "id": 450508510,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1720630557
    },
    {
        "content": "<p>Apologies, I misread the types there, you're right indeed.</p>",
        "id": 450843376,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1720745299
    },
    {
        "content": "<p>What's the significance of <code>Trunc p</code> for <code>p : Prop</code>? Isn't this just another <code>Prop</code> equivalent to it?</p>",
        "id": 476500432,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1728716390
    },
    {
        "content": "<p>It is, but it can be used on a <code>Sort*</code></p>",
        "id": 476500492,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1728716411
    },
    {
        "content": "<p>Oh, I see</p>",
        "id": 476500528,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1728716444
    },
    {
        "content": "<p>Would it make sense to do a core PR generalizing <code>Squash</code> to <code>Sort*</code>?</p>",
        "id": 476500620,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1728716513
    },
    {
        "content": "<p>Have you had a chance to do that? I'm attempting to do this again, but this time I'll just deprecate it and disable the linter in places I don't manage to fix</p>",
        "id": 482094796,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1731477251
    },
    {
        "content": "<p>Well, my message was meant as somewhat of a hypothetical. But sure, I can take it up.</p>",
        "id": 482305620,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1731556903
    },
    {
        "content": "<p>Huh, just changing <code>Type</code> into <code>Sort</code> seems to not break anything</p>",
        "id": 482312779,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1731562229
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover/lean4/pull/6074\">lean4#6074</a></p>",
        "id": 482312783,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1731562234
    },
    {
        "content": "<p>So, surely we can just drop and replace <code>Squash</code> into Mathlib, right?</p>",
        "id": 493354905,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1736775857
    },
    {
        "content": "<p>We can even redefine <code>Trunc</code> to be def-eq to it before deprecating it</p>",
        "id": 493355106,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1736775907
    },
    {
        "content": "<p>It is defeq already</p>",
        "id": 493356479,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1736776263
    },
    {
        "content": "<p>Feel free to take over <a href=\"https://github.com/leanprover-community/mathlib4/pull/18952\">#18952</a> (which deprecates <code>Trunc</code> to <code>Squash</code>), I haven't had time to work on it</p>",
        "id": 493356781,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1736776331
    },
    {
        "content": "<p>I'm running into a weird issue with <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Trunc.finChoice#doc\">docs#Trunc.finChoice</a>. The definition works just fine as is, but if I replace <code>Trunc</code> by <code>Squash</code> it breaks despite the def-eq. What's going on?</p>",
        "id": 493584589,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1736861018
    },
    {
        "content": "<p>I think the issue is that <code>Squash α</code> is defined in terms of <code>Quot</code> rather than <code>Quotient</code>, and so the setoid argument can't be inferred</p>",
        "id": 493584917,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1736861116
    },
    {
        "content": "<p>That seems a bit silly, given that <code>Squash</code> is actually defined after <code>Quotient</code> in <code>Init.Core</code></p>",
        "id": 493585780,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1736861377
    },
    {
        "content": "<p>Opened <a href=\"https://github.com/leanprover/lean4/pull/6642\">lean4#6642</a> which should take care of that</p>",
        "id": 493589458,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1736862518
    }
]