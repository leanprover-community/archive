[
    {
        "content": "<p>I've always been a bit conflicted about the <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/SetTheory/Ordinal/Notation.html#ONote\"><code>SetTheory.Ordinal.Notation</code></a> file. I find what it does really cool: it's essentially a formally-verified calculator for ordinal arithmetic below <code>ε₀</code>. But on the other hand, the chances this gets used elsewhere in Mathlib are basically zero. Not to mention that the proofs in the file are quite finicky and have the annoying habit of breaking as refactors come along...</p>\n<p>I guess my question is: is this a one-off file? The fact that the file is named <code>Notation</code>, and the main type defined in it is just <code>Note</code>, sort of imply this to be the <em>one</em> ordinal notation we have in Mathlib. But like, this is the most basic ordinal notation out there! </p>\n<p>I'm currently working on getting the <a href=\"https://github.com/leanprover-community/mathlib4/pull/17802\">Veblen hierarchy</a> into Mathlib, and that would allow us to define an ordinal notation (also with computable arithmetic) all the way up to the Feferman-Schütte ordinal <code>Γ₀</code>. There's <a href=\"https://en.wikipedia.org/wiki/Ordinal_notation#List_of_limits_of_various_ordinal_notations_and_collapsing_functions\">dozens more</a> ordinal notations - admittedly most of these aren't very relevant or interesting, but the more well-known ones like Bachmann's psi and maybe Kleene's O might be fun to formalize.</p>",
        "id": 477400748,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1729157957
    },
    {
        "content": "<p>Still, I can't shake the feeling that there's little of mathematical value here.</p>",
        "id": 477401418,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1729158150
    },
    {
        "content": "<p>Kleene's O sounds really cool to formalize! Connecting this to computability by showing that Kleene's O is the supremum of definable well orders on N (I think? This isn't my specialty) is also an interesting goal.</p>\n<p>In general I think we should be very careful applying any subjective reasoning to what counts as \"interesting\". This subject is well known in the literature, maybe that's enough.</p>",
        "id": 477507520,
        "sender_full_name": "Nir Paz",
        "timestamp": 1729192031
    },
    {
        "content": "<p>Although I know this is easy for me to say as someone who doesn't often need to maintain the file</p>",
        "id": 477507631,
        "sender_full_name": "Nir Paz",
        "timestamp": 1729192071
    },
    {
        "content": "<p>Well, in that case. I'll work to clean up the notation file and I'll try to at least PR the Veblen notation once I have all the tools for it <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 477538438,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1729207175
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"459227\">@Violeta Hernández</span> <a href=\"#narrow/channel/116395-maths/topic/Ordinal.20notations/near/477400748\">said</a>:</p>\n<blockquote>\n<p>I guess my question is: is this a one-off file? The fact that the file is named <code>Notation</code>, and the main type defined in it is just <code>Note</code>, sort of imply this to be the <em>one</em> ordinal notation we have in Mathlib. But like, this is the most basic ordinal notation out there!</p>\n</blockquote>\n<p>If you want to add more complicated computable ordinal notations, I think it would be fine to rename this one to be more specific.</p>",
        "id": 477741005,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1729289234
    },
    {
        "content": "<p>You are correct that this is mainly intended as a leaf file. I think it is good for demonstrations, and also for just getting your head around how ordinal operations work, to be able to work with concrete objects and compute with them. I wish we had more of this kind of thing in mathlib (polynomials are another area that can benefit from this, for multiple reasons)</p>",
        "id": 477741270,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1729289370
    },
    {
        "content": "<blockquote>\n<p>have the annoying habit of breaking as refactors come along...</p>\n</blockquote>\n<p>I think this is literally the case with any code that uses the stuff you are refactoring. I think it's good to remember that mathlib is a library and intended for uses beyond just its own borders, and refactors do have costs</p>",
        "id": 477741568,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1729289534
    },
    {
        "content": "<p>Since getting ordinal stuff into Mathlib is pretty slow, I'll start a separate Lean repo as a dump of sorts for ordinal notation things. I'll start by refactoring/expanding on the existing <code>Notation</code> file and I'll build up from there.</p>",
        "id": 479047926,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1729946330
    },
    {
        "content": "<p><a href=\"https://github.com/vihdzp/ordinal-notation\">https://github.com/vihdzp/ordinal-notation</a></p>",
        "id": 479061484,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1729959282
    },
    {
        "content": "<p>Just revamped the Cantor Normal Form notation file in my own branch! There were a few issues with the file in its Mathlib state which I believe I've nicely addressed.</p>\n<ul>\n<li>Comparison on <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=ONote#doc\">docs#ONote</a> is non-computable, since it relies on <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=ONote.repr#doc\">docs#ONote.repr</a>. I redefined this to simply be the lexicographic ordering (which of course coincides with the standard ordering for normal forms). This has the advantage of being a linear order, which means we can mostly dispose of <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=ONote.cmp#doc\">docs#ONote.cmp</a> in favor of <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=cmp#doc\">docs#cmp</a>.</li>\n<li>The definitions of the operations <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=ONote.add#doc\">docs#ONote.add</a> and <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=ONote.sub#doc\">docs#ONote.sub</a> are tweaked and simplified slightly. The definition of <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=ONote.opow#doc\">docs#ONote.opow</a> is simplified quite substantially, now only requiring one auxiliary function instead of six.</li>\n<li>Golfing! I got rid of all the non-terminal simps from the original file, and separated the more complicated parts of the arithmetical arguments into new lemmas I plan on PRing to Mathlib soon. The file is overall about 100 lines shorter, and the proofs should now be much more maintainable.</li>\n</ul>",
        "id": 479176803,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1730074468
    },
    {
        "content": "<p>There's just one part of the file I haven't touched, which is the stuff on <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=ONote.fundamentalSequence#doc\">docs#ONote.fundamentalSequence</a>. The issue is, if we plan on having more than one ordinal notation on Mathlib, it doesn't make sense to make a new definition of fundamental sequences for each. But on the other hand, we already have a \"general\" non-computable version of this in <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Ordinal.IsFundamentalSequence#doc\">docs#Ordinal.IsFundamentalSequence</a></p>",
        "id": 479176965,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1730074590
    },
    {
        "content": "<p>I think it could be useful to separate both notions. Since fundamental sequences are almost always assumed to be countable (and computable), we could rename the version in the cofinality file to something like <code>CofinalSequence</code></p>",
        "id": 479177111,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1730074727
    },
    {
        "content": "<p>We could then define the fast-growing hierarchy for any given system of fundamental sequences.</p>",
        "id": 479177417,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1730074956
    },
    {
        "content": "<p>I think this could be a general definition for the countable notion of a fundamental sequence:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Sequence</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">u</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">Option</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">⊕</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Sequence</span><span class=\"bp\">.</span><span class=\"n\">StrictMono</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">LinearOrder</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Sequence</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"kt\">Prop</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">Sum</span><span class=\"bp\">.</span><span class=\"n\">inl</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">true</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">Sum</span><span class=\"bp\">.</span><span class=\"n\">inr</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"n\">root_</span><span class=\"bp\">.</span><span class=\"n\">StrictMono</span><span class=\"w\"> </span><span class=\"n\">f</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Sequence</span><span class=\"bp\">.</span><span class=\"n\">IsLimit</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">LinearOrder</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Sequence</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"kt\">Prop</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">Sum</span><span class=\"bp\">.</span><span class=\"n\">inl</span><span class=\"w\"> </span><span class=\"n\">none</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">IsMin</span><span class=\"w\"> </span><span class=\"n\">x</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">Sum</span><span class=\"bp\">.</span><span class=\"n\">inl</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">some</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">⋖</span><span class=\"w\"> </span><span class=\"n\">y</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">Sum</span><span class=\"bp\">.</span><span class=\"n\">inr</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">↔</span><span class=\"w\"> </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">n</span>\n\n<span class=\"kn\">structure</span><span class=\"w\"> </span><span class=\"n\">FundamentalSequence</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">u</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">LinearOrder</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">top</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">sequence</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Sequence</span><span class=\"w\"> </span><span class=\"n\">α</span>\n<span class=\"w\">  </span><span class=\"n\">strictMono</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">sequence</span><span class=\"bp\">.</span><span class=\"n\">StrictMono</span>\n<span class=\"w\">  </span><span class=\"n\">limit_eq</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">sequence</span><span class=\"bp\">.</span><span class=\"n\">IsLimit</span><span class=\"w\"> </span><span class=\"n\">top</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">FundamentalSequenceSystem</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">u</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">LinearOrder</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">top</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">FundamentalSequence</span><span class=\"w\"> </span><span class=\"n\">top</span>\n</code></pre></div>",
        "id": 479178532,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1730075780
    },
    {
        "content": "<p>I'm inclined to use <code>FS</code> instead of the <code>FundamentalSequence</code> mouthful, but even though I've seen that abbreviation a lot I don't know if a) it's standard and b) if it'll be understandable at first glance</p>",
        "id": 479179365,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1730076534
    },
    {
        "content": "<p>Something nice about this approach is that we wouldn't need to separate <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=ONote.fastGrowing#doc\">docs#ONote.fastGrowing</a> and <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=ONote#doc\">docs#ONote</a>.fastGrowingε₀. Every <code>FundamentalSequenceSystem</code> can be used to create its own fast-growing hierarchy, and <code>fastGrowingε₀</code> just uses the fundamental sequence system for <code>WithTop (NONote)</code>.</p>",
        "id": 479179769,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1730076902
    },
    {
        "content": "<p>Here's how the definition of the FGH looks like, btw:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">fastGrowing</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">FundamentalSequenceSystem</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">WellFoundedLT</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"k\">match</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"k\">with</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">Sum</span><span class=\"bp\">.</span><span class=\"n\">inl</span><span class=\"w\"> </span><span class=\"n\">none</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">_⟩</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">Sum</span><span class=\"bp\">.</span><span class=\"n\">inl</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">some</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"bp\">⟩</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"bp\">.</span><span class=\"n\">lt</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">fastGrowing</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">)</span><span class=\"bp\">^</span><span class=\"o\">[</span><span class=\"n\">n</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">n</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">Sum</span><span class=\"bp\">.</span><span class=\"n\">inr</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">hs</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">hl</span><span class=\"bp\">⟩</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">lt_of_strictMono_of_isLimit</span><span class=\"w\"> </span><span class=\"n\">hs</span><span class=\"w\"> </span><span class=\"n\">hl</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">fastGrowing</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">n</span>\n<span class=\"n\">termination_by</span><span class=\"w\"> </span><span class=\"n\">wellFounded_lt</span><span class=\"bp\">.</span><span class=\"n\">wrap</span><span class=\"w\"> </span><span class=\"n\">x</span>\n</code></pre></div>",
        "id": 479182349,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1730079107
    },
    {
        "content": "<p><a href=\"https://github.com/vihdzp/ordinal-notation/blob/master/OrdinalNotation/FundamentalSequence.lean\">https://github.com/vihdzp/ordinal-notation/blob/master/OrdinalNotation/FundamentalSequence.lean</a></p>",
        "id": 479182794,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1730079546
    },
    {
        "content": "<p>This is much more Mathilb-ready than my huge <code>ONote</code> refactor, all that's really missing is an answer to \"what do we do about <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=IsFundamentalSequence#doc\">docs#IsFundamentalSequence</a>\"</p>",
        "id": 479182892,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1730079617
    },
    {
        "content": "<p>which note: is also an important concept in its own right</p>",
        "id": 479182901,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1730079627
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"459227\">Violeta Hernández</span> <a href=\"#narrow/channel/116395-maths/topic/Ordinal.20notations/near/479179365\">said</a>:</p>\n<blockquote>\n<p>I'm inclined to use <code>FS</code> instead of the <code>FundamentalSequence</code> mouthful</p>\n</blockquote>\n<p>What about <code>FundamentalSeq</code>?</p>",
        "id": 479212090,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1730101004
    },
    {
        "content": "<p>I like that middle ground</p>",
        "id": 479212118,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1730101021
    },
    {
        "content": "<p>What about <code>FundamentalSequenceSystem</code>? Does <code>FundamentalSystem</code> work as a shortening?</p>",
        "id": 479214845,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1730102295
    },
    {
        "content": "<p>Well, my refactor/enhancement of the Cantor Normal Form ordinal notation is pretty much done.</p>",
        "id": 479620318,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1730273168
    },
    {
        "content": "<p>There's still two sorries left in the proof that <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=NONote.repr#doc\">docs#NONote.repr</a> is a principal segment embedding - this is because the top of said embedding is <code>ε₀</code>, whose (most natural) definition depends on the Veblen hierarchy.</p>",
        "id": 479620409,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1730273223
    },
    {
        "content": "<p>The thing is, I legitimately have no idea if it's even feasible for this to make it into Mathlib.</p>",
        "id": 479620745,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1730273370
    },
    {
        "content": "<p>I stand by all the changes I made, but they required basically everything to be reproven from scratch. If I did a PR, it'd be 1200 lines long with no way to split it.</p>",
        "id": 479620847,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1730273403
    },
    {
        "content": "<p>This is on top of 400 lines or so of API for fundamental sequences. That could more easily make it into Mathlib, but without tweaking the Notation and Cofinality files first it'd put us in the awkward position of having three unconnected notions of fundamental sequences.</p>",
        "id": 479621284,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1730273606
    },
    {
        "content": "<p>I also accumulated about 100 lines of auxiliary lemmas that should be in Mathlib, so for now I'll just work on getting those in</p>",
        "id": 479621447,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1730273669
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"459227\">Violeta Hernández</span> <a href=\"#narrow/channel/116395-maths/topic/Ordinal.20notations/near/479620847\">said</a>:</p>\n<blockquote>\n<p>I stand by all the changes I made, but they required basically everything to be reproven from scratch. If I did a PR, it'd be 1200 lines long with no way to split it.</p>\n</blockquote>\n<p>Big unsplittable PRs are sometimes the way of life. We can still review them</p>",
        "id": 479633503,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1730278673
    },
    {
        "content": "<p>Alright then!</p>",
        "id": 479633657,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1730278717
    },
    {
        "content": "<p>I'll PR the fundamental sequence stuff first, which can fortunately be neatly split into two or even three small PRs. Then I'll PR the big CNF refactor.</p>",
        "id": 479633752,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1730278751
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/18463\">#18463</a> (+189 -1) defines the type of fundamental sequences and establishes its basic API.</p>",
        "id": 479760053,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1730320407
    },
    {
        "content": "<p>I'd like to start work on Veblen's ordinal notation, but that depends on <a href=\"https://github.com/leanprover-community/mathlib4/pull/17751\">#17751</a></p>",
        "id": 479788326,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1730337143
    },
    {
        "content": "<p>Once that goes through I can provisionally copy the veblen PR to my repo and start working on that</p>",
        "id": 479788343,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1730337170
    },
    {
        "content": "<p>Something perhaps obvious but quite nice I just realized: being able to construct a fundamental sequence system for a type immediately implies decidability of <code>IsSuccLimit</code> and <code>IsSuccPrelimit</code></p>",
        "id": 479991342,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1730432729
    },
    {
        "content": "<p>Since you can just check the length of the corresponding fundamental sequence</p>",
        "id": 479991355,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1730432740
    }
]