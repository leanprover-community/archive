[
    {
        "content": "<p>Does anyone have any thoughts on how these objects should be set up? I've tried several configurations for coalgebras and bialgebras and there's always something a little ugly. I've settled on making them classes and I'm keen to get bialgebra to extend coalgebra, for no reason other than personal taste. I'm just messing around with this stuff; I want to mention them in a talk on Thursday.</p>",
        "id": 338622223,
        "sender_full_name": "Amelia Livingston",
        "timestamp": 1677599362
    },
    {
        "content": "<p>I can imagine it quickly gets ugly. On paper we very quickly suggest to a very suggestive notation.</p>",
        "id": 338622505,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1677599431
    },
    {
        "content": "<p><a href=\"https://en.wikipedia.org/wiki/Coalgebra#Sweedler_notation\">https://en.wikipedia.org/wiki/Coalgebra#Sweedler_notation</a></p>",
        "id": 338623274,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1677599624
    },
    {
        "content": "<p>But this seems very hard to mimic in Lean.</p>",
        "id": 338623334,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1677599639
    },
    {
        "content": "<p>Sweedler's notation is indeed very useful, and looks scary for formalization.</p>\n<p>But is that absolutely horrible to mimick in Lean? Sweedler's notation of course amounts to choosing non-canonical expressions for the coproducts of all elements (indexed collections of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>a</mi><mrow><mo stretchy=\"false\">(</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow></msub></mrow><annotation encoding=\"application/x-tex\">a_{(1)}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7858em;vertical-align:-0.3552em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3448em;\"><span style=\"top:-2.5198em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">(</span><span class=\"mord mtight\">1</span><span class=\"mclose mtight\">)</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3552em;\"><span></span></span></span></span></span></span></span></span></span>'s and <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>a</mi><mrow><mo stretchy=\"false\">(</mo><mn>2</mn><mo stretchy=\"false\">)</mo></mrow></msub></mrow><annotation encoding=\"application/x-tex\">a_{(2)}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7858em;vertical-align:-0.3552em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3448em;\"><span style=\"top:-2.5198em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">(</span><span class=\"mord mtight\">2</span><span class=\"mclose mtight\">)</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3552em;\"><span></span></span></span></span></span></span></span></span></span>'s for every <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi></mrow><annotation encoding=\"application/x-tex\">a</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">a</span></span></span></span>), but maybe even <code>choice</code> can do that. Lemmas are true for the appropriate <em>sums</em> of such non-canonical choices, so that doesn't look too bad as such. And one certainly wants separate non-canonical representations for iterated coproducts, but still one can set up lemmas to translate between these. (In the worst case one will then have to juggle such coassociativity lemmas just like one would do with associativity lemmas without <code>ring</code>, which would indeed be bad. Do we need a <code>coring</code> tactic?)</p>\n<p>I of course haven't tried, but I'm optimistically hoping that it looks even scarier than it ends up being. <span aria-label=\"big smile\" class=\"emoji emoji-1f604\" role=\"img\" title=\"big smile\">:big_smile:</span></p>",
        "id": 338627179,
        "sender_full_name": "Kalle Kytölä",
        "timestamp": 1677600542
    },
    {
        "content": "<p>Maybe you can get quite far with appropriate induction lemmas? But it would need some engineering to get a usable system, I guess.</p>",
        "id": 338631086,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1677601454
    },
    {
        "content": "<p>I also expect that a lot of engineering would be needed.</p>\n<p>Probably one anyway wants to avoid working with elements as much as possible (and therefore avoid Sweedler notation as much as possible). (Sure, at times Sweedler's notation might really be the easiest way, but other times it is just used out of habit.) So in parallel to engineering Sweedler's notation, maybe this area would also benefit from engineering for good ways to compose multilinear maps in flexibly specified (diagrammatic?) ways?</p>",
        "id": 338637107,
        "sender_full_name": "Kalle Kytölä",
        "timestamp": 1677602815
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"414458\">@Vasily Ilin</span> tried to construct the Hopf algebra structure on K[X] last April-May, <del>but seemed to give up (due to timeouts/slowness?)</del> and apparently then switched to defining affine group schemes using representable functors. Not sure what lessons came out of it ... here are some relevant threads:</p>\n<p><a href=\"#narrow/stream/113489-new-members/topic/.E2.9C.94.20structure.20vs.20class/near/282163086\">https://leanprover.zulipchat.com/#narrow/stream/113489-new-members/topic/.E2.9C.94.20structure.20vs.20class/near/282163086</a><br>\n<a href=\"#narrow/stream/113489-new-members/topic/refactoring.20proofs\">https://leanprover.zulipchat.com/#narrow/stream/113489-new-members/topic/refactoring.20proofs</a><br>\n<a href=\"#narrow/stream/113489-new-members/topic/get.20the.20two.20maps.20from.20an.20isomorphism\">https://leanprover.zulipchat.com/#narrow/stream/113489-new-members/topic/get.20the.20two.20maps.20from.20an.20isomorphism</a></p>\n<p><a href=\"#narrow/stream/113489-new-members/topic/.E2.9C.94.20algebra.20maps.20takes.201.20to.201\">https://leanprover.zulipchat.com/#narrow/stream/113489-new-members/topic/.E2.9C.94.20algebra.20maps.20takes.201.20to.201</a><br>\n<a href=\"#narrow/stream/113489-new-members/topic/.E2.9C.94.20.60calc.60.20block\">https://leanprover.zulipchat.com/#narrow/stream/113489-new-members/topic/.E2.9C.94.20.60calc.60.20block</a><br>\n<a href=\"#narrow/stream/113489-new-members/topic/deterministic.20timeout.20on.20definition.20of.20structure\">https://leanprover.zulipchat.com/#narrow/stream/113489-new-members/topic/deterministic.20timeout.20on.20definition.20of.20structure</a></p>",
        "id": 338740279,
        "sender_full_name": "Junyan Xu",
        "timestamp": 1677644867
    },
    {
        "content": "<p><a href=\"https://github.com/leomayer1/Hopf/tree/master/src\">https://github.com/leomayer1/Hopf/tree/master/src</a><br>\nHere is the repo with our attempt!</p>",
        "id": 338740756,
        "sender_full_name": "Vasily Ilin",
        "timestamp": 1677645325
    },
    {
        "content": "<p>Oh nice! You did finish checking K[X]'s Hopf algebra structure without sorries.</p>",
        "id": 338741214,
        "sender_full_name": "Junyan Xu",
        "timestamp": 1677645720
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"118107\">@Amelia Livingston</span> what did you not like about that approach? Like sheaves of modules I can quite believe that each approach has advantages and disadvantages.</p>",
        "id": 338772695,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1677660413
    },
    {
        "content": "<p>I had just seen Scott Morrison's comment that coalgebras and bialgebras should be defined first so was having a go at that. But I hadn't read all of these threads so thank you! And I've been using the functor definition too - wanted to compare them and show they're equivalent</p>\n<p>I've had a little go at using Sweedler notation because I think it might improve organisation in my coalgebra/bialgebra stuff, but I haven't finished setting it up.</p>",
        "id": 338774512,
        "sender_full_name": "Amelia Livingston",
        "timestamp": 1677660997
    },
    {
        "content": "<p>FWIW Vasily if you do want to PR your work, I'm not looking to PR mine  - just wanted to roll my own (for a talk I'm now too ill to give) and so I know what's going on, and then use it for more specific things, which I maybe would PR.</p>",
        "id": 338776078,
        "sender_full_name": "Amelia Livingston",
        "timestamp": 1677661373
    },
    {
        "content": "<p>I would like to see group schemes in mathlib because they're a huge source of very nice results and you don't need any of the theory of varieties to set them up</p>",
        "id": 338777892,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1677661891
    },
    {
        "content": "<p>I think Joël Riou has some cool work on internal objects in categories <a href=\"https://github.com/leanprover-community/mathlib/compare/master...group-object\">here</a> I was hoping might get PR'ed someday, as explained <a href=\"#narrow/stream/116395-maths/topic/Algebraic.20geometry.20development/near/306654505\">here</a></p>",
        "id": 338779104,
        "sender_full_name": "Amelia Livingston",
        "timestamp": 1677662235
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"118107\">Amelia Livingston</span> <a href=\"#narrow/stream/116395-maths/topic/Coalgebras.2Fbialgebras.2FHopf.20algebras/near/338774512\">said</a>:</p>\n<blockquote>\n<p>I had just seen Scott Morrison's comment that coalgebras and bialgebras should be defined first so was having a go at that.</p>\n</blockquote>\n<p>One (most probably superfluous) remark: There's a bunch of \"general coalgebra\" stuff (as in \"general/universal algebra\") in CS, so I understand the classical coalgebra will be under some appropriate namespace.</p>",
        "id": 338808225,
        "sender_full_name": "Pedro Sánchez Terraf",
        "timestamp": 1677669841
    },
    {
        "content": "<p>I doubt that will be the case; <code>coalgebra</code> would probably end up in the root namespace like <code>algebra</code> is.</p>",
        "id": 338809899,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1677670233
    },
    {
        "content": "<p>Thanks to <span class=\"user-mention\" data-user-id=\"462808\">@Ali Ramsey</span>, we now have <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Coalgebra#doc\">docs#Coalgebra</a> !</p>",
        "id": 406545087,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1701956744
    },
    {
        "content": "<p>So bialgebras next and then Hopf algebras?</p>",
        "id": 406553594,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1701959193
    },
    {
        "content": "<p>Is it really called \"conunitality\" in the literature?</p>",
        "id": 406553715,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1701959227
    },
    {
        "content": "<p>That must be a typo</p>",
        "id": 406555921,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1701959865
    },
    {
        "content": "<p>fixed the typo: <a href=\"https://github.com/leanprover-community/mathlib4/pull/8874\">#8874</a></p>",
        "id": 406572134,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1701964546
    },
    {
        "content": "<p>It looks like you based it on the version that the docs were built from and not master, and picked up a merge conflict as a result.</p>",
        "id": 406576112,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1701965562
    },
    {
        "content": "<p>Oops. I tried doing this quickly by using the github interface rather than pulling mathlib locally...</p>",
        "id": 406576434,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1701965669
    },
    {
        "content": "<p>Was there any progress on the Sweedler notation in Lean question?</p>",
        "id": 518753800,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1747432853
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"699016\">@Edison Xie</span> ?</p>",
        "id": 518754670,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1747433398
    },
    {
        "content": "<p>(who is doing exams right now)</p>",
        "id": 518754726,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1747433411
    },
    {
        "content": "<p>Hi! Yes I’ve got sweeter notation in my project (on a branch in FLT) but it’s super old and recently someone pointed out that my work is not yet in mathlib so I might spend some time clean it up and PR it after Big Proof 2025</p>",
        "id": 518761989,
        "sender_full_name": "Edison Xie",
        "timestamp": 1747438451
    },
    {
        "content": "<p>(Sorry was revising didn’t check Zulip messages)</p>",
        "id": 518762035,
        "sender_full_name": "Edison Xie",
        "timestamp": 1747438482
    },
    {
        "content": "<p>Edison's Sweedler notation will be used in Toric soon</p>",
        "id": 518787935,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1747461380
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"699016\">@Edison Xie</span> could you share a link to your code? It doesn’t matter that it’s not ready, I only want to see how it looks like.</p>",
        "id": 518807678,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1747478907
    },
    {
        "content": "<p>you mean something like this?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n<span class=\"n\">suppress_compilation</span>\n\n<span class=\"kn\">section</span><span class=\"w\"> </span><span class=\"n\">Coalgebra</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">CommSemiring</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">]</span>\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">AddCommMonoid</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Module</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Coalgebra</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"o\">]</span>\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">TensorProduct</span><span class=\"w\"> </span><span class=\"n\">Coalgebra</span>\n\n<span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">exists_repr</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">⊗</span><span class=\"o\">[</span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">⊗</span><span class=\"o\">[</span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">⊗</span><span class=\"o\">[</span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"o\">),</span>\n<span class=\"w\">    </span><span class=\"n\">Coalgebra</span><span class=\"bp\">.</span><span class=\"n\">comul</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">∑</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">x1</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">⊗ₜ</span><span class=\"o\">[</span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">x2</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">classical</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">mem1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">comul</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">⊤</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Submodule</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">⊗</span><span class=\"o\">[</span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">⟨⟩</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">TensorProduct</span><span class=\"bp\">.</span><span class=\"n\">span_tmul_eq_top</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Submodule</span><span class=\"bp\">.</span><span class=\"n\">mem_span_set</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">mem1</span>\n<span class=\"w\">  </span><span class=\"k\">obtain</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">r</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">hr</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">eq1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∑</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"bp\">.</span><span class=\"n\">support</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">•</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"o\">)</span><span class=\"bp\">⟩</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">mem1</span>\n<span class=\"w\">  </span><span class=\"n\">choose</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">a'</span><span class=\"w\"> </span><span class=\"n\">haa'</span><span class=\"w\"> </span><span class=\"kn\">using</span><span class=\"w\"> </span><span class=\"n\">hr</span>\n<span class=\"w\">  </span><span class=\"n\">replace</span><span class=\"w\"> </span><span class=\"n\">eq1</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">calc</span><span class=\"w\"> </span><span class=\"bp\">_</span>\n<span class=\"w\">    </span><span class=\"n\">comul</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">∑</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"bp\">.</span><span class=\"n\">support</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">•</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">eq1</span><span class=\"bp\">.</span><span class=\"n\">symm</span>\n<span class=\"w\">    </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">∑</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"bp\">.</span><span class=\"n\">support</span><span class=\"bp\">.</span><span class=\"n\">attach</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">•</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"bp\">.</span><span class=\"m\">1</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">sum_attach</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">|&gt;.</span><span class=\"n\">symm</span>\n<span class=\"w\">    </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">∑</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"bp\">.</span><span class=\"n\">support</span><span class=\"bp\">.</span><span class=\"n\">attach</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">•</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"bp\">.</span><span class=\"m\">2</span><span class=\"w\"> </span><span class=\"bp\">⊗ₜ</span><span class=\"o\">[</span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">a'</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"bp\">.</span><span class=\"m\">2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">        </span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">sum_congr</span><span class=\"w\"> </span><span class=\"n\">rfl</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"n\">congr</span><span class=\"o\">(</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"bp\">.</span><span class=\"m\">1</span><span class=\"w\"> </span><span class=\"bp\">•</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"o\">(</span><span class=\"n\">haa'</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"bp\">.</span><span class=\"m\">2</span><span class=\"o\">))</span><span class=\"bp\">.</span><span class=\"n\">symm</span>\n<span class=\"w\">    </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">∑</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"bp\">.</span><span class=\"n\">support</span><span class=\"bp\">.</span><span class=\"n\">attach</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">•</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"bp\">.</span><span class=\"m\">2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">⊗ₜ</span><span class=\"o\">[</span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">a'</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"bp\">.</span><span class=\"m\">2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">        </span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">sum_congr</span><span class=\"w\"> </span><span class=\"n\">rfl</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"n\">TensorProduct</span><span class=\"bp\">.</span><span class=\"n\">smul_tmul'</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">_</span>\n<span class=\"w\">  </span><span class=\"n\">refine</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">r</span><span class=\"bp\">.</span><span class=\"n\">support</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"bp\">.</span><span class=\"n\">support</span><span class=\"w\"> </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">•</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"k\">else</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">,</span>\n<span class=\"w\">    </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"bp\">.</span><span class=\"n\">support</span><span class=\"w\"> </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"n\">a'</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"k\">else</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">eq1</span><span class=\"w\"> </span><span class=\"bp\">▸</span><span class=\"w\"> </span><span class=\"bp\">?_⟩</span>\n<span class=\"w\">  </span><span class=\"n\">conv_rhs</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">sum_attach</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">sum_congr</span><span class=\"w\"> </span><span class=\"n\">rfl</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">aesop</span><span class=\"o\">)</span>\n\n<span class=\"sd\">/-- an arbitrarily chosen indexing set for comul(a) = ∑ a₁ ⊗ a₂. -/</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">ℐ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">⊗</span><span class=\"o\">[</span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">exists_repr</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">|&gt;.</span><span class=\"n\">choose</span>\n\n<span class=\"sd\">/-- an arbitrarily chosen first coordinate for comul(a) = ∑ a₁ ⊗ a₂. -/</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Δ₁</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">⊗</span><span class=\"o\">[</span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">exists_repr</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">|&gt;.</span><span class=\"n\">choose_spec</span><span class=\"bp\">.</span><span class=\"n\">choose</span>\n\n<span class=\"sd\">/-- an arbitrarily chosen second coordinate for comul(a) = ∑ a₁ ⊗ a₂. -/</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Δ₂</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">⊗</span><span class=\"o\">[</span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">exists_repr</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">|&gt;.</span><span class=\"n\">choose_spec</span><span class=\"bp\">.</span><span class=\"n\">choose_spec</span><span class=\"bp\">.</span><span class=\"n\">choose</span>\n\n<span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">comul_repr</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">Coalgebra</span><span class=\"bp\">.</span><span class=\"n\">comul</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">∑</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">ℐ</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Δ₁</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">⊗ₜ</span><span class=\"o\">[</span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Δ₂</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">exists_repr</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">|&gt;.</span><span class=\"n\">choose_spec</span><span class=\"bp\">.</span><span class=\"n\">choose_spec</span><span class=\"bp\">.</span><span class=\"n\">choose_spec</span>\n\n<span class=\"kn\">end</span><span class=\"w\"> </span><span class=\"n\">Coalgebra</span>\n</code></pre></div>",
        "id": 518902100,
        "sender_full_name": "Edison Xie",
        "timestamp": 1747558295
    },
    {
        "content": "<p>Could this just be an induction principle for tensor products?</p>",
        "id": 518935528,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1747585238
    },
    {
        "content": "<p><code>induction h : comul a using TensorProduct.sum_induction</code> or similar?</p>",
        "id": 518935571,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1747585265
    },
    {
        "content": "<p>I thought you meant the Sweedler notation without sums. But I’ll check with the people who are actually interested in this (I was asked this question by people in Hamburg).</p>",
        "id": 519172954,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1747674552
    },
    {
        "content": "<p>I thought we already have some Sweedler’s notation in mathlib, but yes it uses sums. See <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Coalgebra.Repr#doc\">docs#Coalgebra.Repr</a></p>",
        "id": 519476135,
        "sender_full_name": "Michał Mrugała",
        "timestamp": 1747775896
    },
    {
        "content": "<p>Now I’m rather confused, but it’s probably coming from the fact I don’t know anything about Hopf algebras. What is the relation between <span class=\"user-mention\" data-user-id=\"699016\">@Edison Xie</span> ’s code and <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Coalgebra.Repr.arbitrary#doc\">docs#Coalgebra.Repr.arbitrary</a> ?</p>",
        "id": 519476737,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1747776227
    },
    {
        "content": "<p>Unless I'm misuderstanding something, they seem like essentially the same thing. My impresssion was that <code>Repr</code> was introduced in Edison and Amelia's work to function as Sweedler's notation. I think there is some confusion about what did and didn't make it to mathlib from their work (for example anticommutativity of the antipode didn't make it).</p>",
        "id": 519477188,
        "sender_full_name": "Michał Mrugała",
        "timestamp": 1747776458
    },
    {
        "content": "<p>That would explain why I’m confused.</p>",
        "id": 519477355,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1747776522
    },
    {
        "content": "<p>Maybe I’ll get more information if I ask more specific questions and write some code. <span class=\"user-mention\" data-user-id=\"260071\">@Ingo Runkel</span> in Hamburg was telling me he really needed something called Sweedler’s notation and that I’ve never heard of. I search zulip and found this thread. Then I asked Ingo to give one example of an easy computation using this notation. He said that in a Hopf algebra you have, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">∀</mi><mi>h</mi><mo separator=\"true\">,</mo><mi>ε</mi><mo stretchy=\"false\">(</mo><mi>S</mi><mo stretchy=\"false\">(</mo><mi>h</mi><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">)</mo><mo>=</mo><mi>ε</mi><mo stretchy=\"false\">(</mo><mi>h</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">∀ h, ε(S(h)) = ε(h)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">∀</span><span class=\"mord mathnormal\">h</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">ε</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">h</span><span class=\"mclose\">))</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">ε</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">h</span><span class=\"mclose\">)</span></span></span></span>, and provided a very short proof. I didn’t find this lemma in Mathlib, but I was able to write:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">RingTheory</span><span class=\"bp\">.</span><span class=\"n\">HopfAlgebra</span><span class=\"bp\">.</span><span class=\"n\">Basic</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">CommRing</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">]</span>\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Ring</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">HopfAlgebra</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"o\">]</span>\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">TensorProduct</span><span class=\"w\"> </span><span class=\"n\">Coalgebra</span><span class=\"w\"> </span><span class=\"n\">HopfAlgebra</span><span class=\"w\"> </span><span class=\"n\">Bialgebra</span>\n\n<span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">sum_counit_mul_eq</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"bp\">∑</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ℛ</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">index</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">counit</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"n\">ℛ</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">left</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">•</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ℛ</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">right</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">sum_counit_tmul_eq</span><span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ℛ</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"n\">apply_fun</span><span class=\"w\"> </span><span class=\"n\">lift</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">LinearMap</span><span class=\"bp\">.</span><span class=\"n\">lsmul</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">this</span>\n<span class=\"w\">  </span><span class=\"n\">simp_rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">map_sum</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">this</span>\n<span class=\"w\">  </span><span class=\"n\">convert</span><span class=\"w\"> </span><span class=\"n\">this</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span>\n\n<span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">antipode_counit</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">counit</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">antipode</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">counit</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">sum_mul_antipode_eq_smul</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ℛ</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"n\">apply_fun</span><span class=\"w\"> </span><span class=\"n\">counit</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">this</span>\n<span class=\"w\">  </span><span class=\"n\">simp_rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">map_smul</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">counit_one</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">smul_eq_mul</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">mul_one</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">map_sum</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">counit_mul</span><span class=\"o\">,</span>\n<span class=\"w\">           </span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">smul_eq_mul</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">map_smul</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">map_sum</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">sum_counit_mul_eq</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">this</span>\n<span class=\"w\">  </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">this</span>\n</code></pre></div>",
        "id": 519478088,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1747776849
    },
    {
        "content": "<p>This is really close to the proof  Ingo sent me. So maybe the conclusion is that some workable version of Sweedler is indeed already in Mathlib, although it would be nice to have something lighter than <code>(ℛ R h).left</code>.</p>",
        "id": 519478231,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1747776928
    },
    {
        "content": "<p>Now here is my question: how are we meant to use Hopf algebra without all those <code>(R := R)</code>? If this isn’t possible, why is <code>R</code> an implicit argument to <code>counit</code> and <code>antipode</code>?</p>",
        "id": 519478377,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1747776969
    },
    {
        "content": "<p>Other question: is my first lemma really missing? Is <code>lift (LinearMap.lsmul R A)</code> really missing?</p>",
        "id": 519478475,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1747777015
    },
    {
        "content": "<p>The later is the scalar multiplication as a linear map from <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>R</mi><mo>⊗</mo><mi>A</mi></mrow><annotation encoding=\"application/x-tex\">R \\otimes A</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7667em;vertical-align:-0.0833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">⊗</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\">A</span></span></span></span> to <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>A</mi></mrow><annotation encoding=\"application/x-tex\">A</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\">A</span></span></span></span>.</p>",
        "id": 519478532,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1747777040
    },
    {
        "content": "<p>On a side note, it’s worth mentioning that we’re developing some API for Hopf algebras as part of Toric, which the people from Hamburg might be interested in (it’s hard to say more without knowing what they’re trying to do).</p>",
        "id": 519478711,
        "sender_full_name": "Michał Mrugała",
        "timestamp": 1747777112
    },
    {
        "content": "<p>I don’t know what Ingo wants to do. I think he simply tried this as a Lean exercise.</p>",
        "id": 519479811,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1747777634
    },
    {
        "content": "<p>He may tell us more later.</p>",
        "id": 519479834,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1747777644
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110031\">Patrick Massot</span> <a href=\"#narrow/channel/116395-maths/topic/Coalgebras.2Fbialgebras.2FHopf.20algebras/near/519478475\">said</a>:</p>\n<blockquote>\n<p>Other question: is my first lemma really missing? Is <code>lift (LinearMap.lsmul R A)</code> really missing?</p>\n</blockquote>\n<p><del>I think the latter map is expressed as <code>(TensorProduct.mk R A R).flip 1</code> in <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Coalgebra#doc\">docs#Coalgebra</a></del> My bad this is the map in the other direction. Best I could find is <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Algebra.TensorProduct.lid#doc\">docs#Algebra.TensorProduct.lid</a></p>",
        "id": 519479964,
        "sender_full_name": "Michał Mrugała",
        "timestamp": 1747777704
    },
    {
        "content": "<p>As far as I can tell the first lemma is not in mathlib. The second lemma <a href=\"https://github.com/YaelDillies/Toric/blob/master/Toric/Hopf/CoalgToAlg.lean#L135\">is proved in Toric</a> using a different method (convolution products). In general there are still a lot of fundamental results missing from mathlib.</p>",
        "id": 519482952,
        "sender_full_name": "Michał Mrugała",
        "timestamp": 1747779289
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110031\">Patrick Massot</span> <a href=\"#narrow/channel/116395-maths/topic/Coalgebras.2Fbialgebras.2FHopf.20algebras/near/519478377\">said</a>:</p>\n<blockquote>\n<p>If this isn’t possible, why is <code>R</code> an implicit argument to <code>counit</code> and <code>antipode</code>?</p>\n</blockquote>\n<p>My guess is that this predates the lean 4 feature that lets us make the argument explicit</p>",
        "id": 519483414,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1747779592
    },
    {
        "content": "<p>And I think in review I might have said it would be simpler just to wait rather than duplicating the API with implicit and explicit arguments</p>",
        "id": 519483491,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1747779625
    },
    {
        "content": "<p>Should <code>antipode</code> take an <code>R</code> argument at all? (edit: I guess <code>TensorProduct.antipode_def</code> is troublesome otherwise)</p>",
        "id": 519483589,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1747779694
    },
    {
        "content": "<p>There must be a way to write a command <code>set_base_ring R</code> and then some tactic magic can fill in all <code>R</code> with the same <code>R</code>. But I'm guessing we don't want this on the same basis that we didn't like <code>parameter</code> in lean3?</p>",
        "id": 519483732,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1747779788
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/25060\">#25060</a> makes the <code>R</code> argument to <code>antipode</code> explicit</p>",
        "id": 519484451,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1747780190
    },
    {
        "content": "<p>For <code>comul</code> and <code>counit</code> it's not so clear cut, since the type can usually be inferred</p>",
        "id": 519484802,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1747780381
    },
    {
        "content": "<p>Then again, we seem to have survived with two unecessarily explicit type arguments to <code>algebraMap</code> for a long time</p>",
        "id": 519484818,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1747780399
    },
    {
        "content": "<p>A message was moved from this topic to <a class=\"stream-topic\" data-stream-id=\"287929\" href=\"/#narrow/channel/287929-mathlib4/topic/Universe.20polymorphic.20Coalgebra.20instance.20for.20tensor.20products/with/519378763\">#mathlib4 &gt; Universe polymorphic Coalgebra instance for tensor products</a> by <span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span>.</p>",
        "id": 519484938,
        "sender_full_name": "Notification Bot",
        "timestamp": 1747780472
    },
    {
        "content": "<p>Oh I definitely want two explicit arguments to algebraMap, I use them all the time</p>",
        "id": 519492416,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1747785252
    },
    {
        "content": "<p>Sure, but what fraction of your uses could be <code>algebraMap _ A</code> or <code>algebraMap _ _</code>?</p>",
        "id": 519493977,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1747786253
    },
    {
        "content": "<p>Most of my <code>algebraMap</code>s appear unapplied (in algebraic geometry). It would be quite bad if the type of it is not shown in the infoview and I need to hover on each of them to check.<br>\nEven if Lean can figure it out, my feeble human brain cannot.</p>",
        "id": 519494500,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1747786589
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"439483\">Andrew Yang</span> <a href=\"#narrow/channel/116395-maths/topic/Coalgebras.2Fbialgebras.2FHopf.20algebras/near/519483732\">said</a>:</p>\n<blockquote>\n<p>There must be a way to write a command <code>set_base_ring R</code> and then some tactic magic can fill in all <code>R</code> with the same <code>R</code>. But I'm guessing we don't want this on the same basis that we didn't like <code>parameter</code> in lean3?</p>\n</blockquote>\n<p>That would be really really nice.</p>",
        "id": 519609721,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1747833312
    },
    {
        "content": "<p>Note you can already do</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">set_option</span><span class=\"w\"> </span><span class=\"n\">quotPrecheck</span><span class=\"w\"> </span><span class=\"n\">false</span>\n<span class=\"kn\">notation</span><span class=\"w\"> </span><span class=\"s2\">\"ε\"</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">counit</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>but then you don’t get a delaborator for free.</p>",
        "id": 519609896,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1747833359
    },
    {
        "content": "<p>I've been using this quotPrecheck trick in FLT:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">set_option</span><span class=\"w\"> </span><span class=\"n\">quotPrecheck</span><span class=\"w\"> </span><span class=\"n\">false</span><span class=\"w\"> </span><span class=\"k\">in</span>\n<span class=\"sd\">/-- `D_𝔸` is notation for `D ⊗[K] 𝔸_K`. -/</span>\n<span class=\"kn\">notation</span><span class=\"w\"> </span><span class=\"s2\">\"D_𝔸\"</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">D</span><span class=\"w\"> </span><span class=\"bp\">⊗</span><span class=\"o\">[</span><span class=\"n\">K</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">AdeleRing</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">𝓞</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>i.e. \"I can't be bothered to write <code>D_𝔸 D K</code> everywhere, it just looks silly, in the LaTeX I just write let <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>D</mi><mi mathvariant=\"double-struck\">A</mi></msub><mo>:</mo><mo>=</mo><mi>D</mi><msub><mo>⊗</mo><mi>K</mi></msub><msub><mi mathvariant=\"double-struck\">A</mi><mi>K</mi></msub></mrow><annotation encoding=\"application/x-tex\">D_{\\mathbb{A}}:=D\\otimes_K\\mathbb{A}_K</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3322em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathbb mtight\">A</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">:=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\"><span class=\"mbin\">⊗</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.07153em;\">K</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8389em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">A</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.07153em;\">K</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> and I want to do this here too and write <code>D_𝔸</code>\" and I've not run into problems with this yet.</p>",
        "id": 519644097,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1747841646
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110031\">@Patrick Massot</span>, Ingo might be interested in the last few commits to Toric:</p>\n<ul>\n<li><a href=\"https://github.com/YaelDillies/Toric/commit/395b7897af77f9f45191c259731572201dfc9663\">https://github.com/YaelDillies/Toric/commit/395b7897af77f9f45191c259731572201dfc9663</a>: Sweedler notation lemmas</li>\n<li><a href=\"https://github.com/YaelDillies/Toric/commit/ef54079fb1c93a04a427d217163b253ac8c90d0b\">https://github.com/YaelDillies/Toric/commit/ef54079fb1c93a04a427d217163b253ac8c90d0b</a>: The antipode antidistributes over multiplication</li>\n</ul>",
        "id": 520271698,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1748160435
    },
    {
        "content": "<p>I've also added your proof of <code>antipode_counit</code> to Toric in <a href=\"https://github.com/YaelDillies/Toric/commit/4c9712ba94ed08ce407900e3b6d2f295cde61396\">https://github.com/YaelDillies/Toric/commit/4c9712ba94ed08ce407900e3b6d2f295cde61396</a></p>",
        "id": 520272381,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1748161036
    },
    {
        "content": "<p>Thanks, but you can directly ping <span class=\"user-mention\" data-user-id=\"260071\">@Ingo Runkel</span>, especially since my visit to Hamburg ended.</p>",
        "id": 520326868,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1748208082
    }
]