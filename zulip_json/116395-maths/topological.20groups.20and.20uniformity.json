[
    {
        "content": "<p>What is the reason that <a href=\"https://leanprover-community.github.io/mathlib_docs/find/topological_group.to_uniform_space\">docs#topological_group.to_uniform_space</a> is not an instance? I am trying to prove some things about uniform boundedness/Cauchy sequences in topological vector spaces and it is extremely annoying to specify all the uniformity classes by hand.</p>",
        "id": 277555522,
        "sender_full_name": "Moritz Doll",
        "timestamp": 1648938640
    },
    {
        "content": "<p>Surely the issue will be that topological group -&gt; uniform space -&gt; topological space will be different to topological group -&gt; topological space in general (I mean the two topologies will be equal but not definitionally equal, which will mess up type class inference). Is there a way around this though?</p>",
        "id": 277557631,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1648941629
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib_docs/find/uniform_space\">docs#uniform_space</a></p>",
        "id": 277557638,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1648941648
    },
    {
        "content": "<p>Yeah, uniform space extends topological space so I don't immediately see why one can't make the triangle commute. Is the issue simply that the authors didn't want to assume in the non abelian case that you wanted the left or right uniformity? What happens if you make the def a local instance? Does anything break in your file? Here the group is abelian so I can't see any issues (but then again it is getting late here...)</p>",
        "id": 277557728,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1648941770
    },
    {
        "content": "<p>ah I think you are not supposed to use <code>[topological_space E] [topological_group E]</code>, but <code>[uniform_space E] [uniform_group E]</code>, then everything works just fine. The documentation in <code>topology.algebra.group</code> and <code>topology.algebra.uniform_group</code> is not really mentioning it though.</p>",
        "id": 277561162,
        "sender_full_name": "Moritz Doll",
        "timestamp": 1648946829
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib_docs/find/uniform_group\">docs#uniform_group</a></p>",
        "id": 277561271,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1648947007
    },
    {
        "content": "<p>Oh nice. My students also had this sort of problem -- \"how do you make a Banach space?\". There are all these typeclasses but perhaps less documentation about how to use them, and it's got a lot more complicated since back in the day when it was just <code>[topological_space]</code></p>",
        "id": 277561349,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1648947126
    },
    {
        "content": "<p>Yes, the answer is almost surely that you want to use <code>[uniform_space E] [uniform_group E]</code>.</p>",
        "id": 277596428,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1648974645
    },
    {
        "content": "<p>Is there any reason to use <code>[topological_space E] [topological_group E]</code> at all? Even in the case that you don't need the uniform structure?</p>",
        "id": 277601649,
        "sender_full_name": "Moritz Doll",
        "timestamp": 1648977544
    },
    {
        "content": "<p>Not really. I also know I should make a big refactor at some point to also allow using the uniform structure on non-commutative groups, but I've been postponing this forever since nobody ever needed it.</p>",
        "id": 277602034,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1648977751
    },
    {
        "content": "<p>For my purposes everything is fine, it is just a bit unintuitive. Before Lean I have never heard of uniformity and <code>topological_add_group</code> looks like the thing one needs for topological vector spaces. I will write some documentation for this today.</p>",
        "id": 277602615,
        "sender_full_name": "Moritz Doll",
        "timestamp": 1648978052
    },
    {
        "content": "<p>I have a related question. I will soon define the strong topology/uniform structure on <code>E ‚ÜíL F</code>, using the general setup in <a href=\"https://github.com/leanprover-community/mathlib/pull/13073\">#13073</a>. In the linear case, one can define the topology directly from the topology on <code>F</code> without referencing the uniform structure. Is this worth doing in Lean, or do we assume that any topological vector space has a <code>uniform_space</code> instance anyway ? Would it have better definitional properties ?</p>",
        "id": 277630188,
        "sender_full_name": "Anatole Dedecker",
        "timestamp": 1648993302
    },
    {
        "content": "<p>I am not really qualified to answer that, but I would use the uniform structure. As Heather pointed out the uniform structure might not be defeq to the one coming from the topological group, so if you need uniformities you might run into annoying issues if you don't use <code>uniform_space</code>.</p>",
        "id": 277937506,
        "sender_full_name": "Moritz Doll",
        "timestamp": 1649189673
    },
    {
        "content": "<p>I am working with a non-commutative group. I am butting against the issue<br>\n<span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/channel/116395-maths/topic/topological.20groups.20and.20uniformity/near/277557631\">said</a>:</p>\n<blockquote>\n<p>topological group -&gt; uniform space -&gt; topological space will be different to topological group -&gt; topological space</p>\n</blockquote>\n<p>Here is a minimal example.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">namespace</span><span class=\"w\"> </span><span class=\"n\">foo</span>\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Group</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">iT</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">TopologicalSpace</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">IsTopologicalGroup</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">]</span>\n\n<span class=\"kn\">scoped</span><span class=\"w\"> </span><span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"n\">iU</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">UniformSpace</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">IsTopologicalGroup</span><span class=\"bp\">.</span><span class=\"n\">toUniformSpace</span><span class=\"w\"> </span><span class=\"n\">G</span>\n<span class=\"kn\">scoped</span><span class=\"w\"> </span><span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"n\">iUT</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">TopologicalSpace</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">iU</span><span class=\"bp\">.</span><span class=\"n\">toTopologicalSpace</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">iT</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">iUT</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">rfl</span><span class=\"w\"> </span><span class=\"c1\">-- works fine</span>\n<span class=\"kn\">end</span><span class=\"w\"> </span><span class=\"n\">foo</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Group</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">iT</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">TopologicalSpace</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">IsTopologicalGroup</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">False</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">iU</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">IsTopologicalGroup</span><span class=\"bp\">.</span><span class=\"n\">toUniformSpace</span><span class=\"w\"> </span><span class=\"n\">G</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">iUT</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">iU</span><span class=\"bp\">.</span><span class=\"n\">toTopologicalSpace</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">iT</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">iUT</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">rfl</span><span class=\"w\"> </span><span class=\"c1\">-- Type mismatch</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>I do not understand why the example in the foo namespace works and not the one outside of the namespace. I also do not understand why the equality does not hold definitionally since <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Topology/Algebra/IsUniformGroup/Defs.html#IsTopologicalGroup.toUniformSpace\">IsTopologicalGroup.toUniformSpace</a> seems to be defined using the TopologicalSpace instance on the group.</p>",
        "id": 554264753,
        "sender_full_name": "Lara Toledano",
        "timestamp": 1762504677
    },
    {
        "content": "<p>You should not use <code>have</code> for data if you care about the definition within a proof. Instead you should use <code>let</code></p>",
        "id": 554269913,
        "sender_full_name": "Ya√´l Dillies",
        "timestamp": 1762506268
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"387244\">@Ya√´l Dillies</span>  thank you for the tip</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">namespace</span><span class=\"w\"> </span><span class=\"n\">foo</span>\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Group</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">iT</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">TopologicalSpace</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">IsTopologicalGroup</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">]</span>\n\n<span class=\"kn\">scoped</span><span class=\"w\"> </span><span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"n\">iU</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">UniformSpace</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">IsTopologicalGroup</span><span class=\"bp\">.</span><span class=\"n\">toUniformSpace</span><span class=\"w\"> </span><span class=\"n\">G</span>\n<span class=\"kn\">scoped</span><span class=\"w\"> </span><span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"n\">iUT</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">TopologicalSpace</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">iU</span><span class=\"bp\">.</span><span class=\"n\">toTopologicalSpace</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">iT</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">iUT</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">rfl</span><span class=\"w\"> </span><span class=\"c1\">-- works fine</span>\n<span class=\"kn\">end</span><span class=\"w\"> </span><span class=\"n\">foo</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Group</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">iT</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">TopologicalSpace</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">IsTopologicalGroup</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">False</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">iU</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">IsTopologicalGroup</span><span class=\"bp\">.</span><span class=\"n\">toUniformSpace</span><span class=\"w\"> </span><span class=\"n\">G</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">iUT</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">iU</span><span class=\"bp\">.</span><span class=\"n\">toTopologicalSpace</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">iT</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">iUT</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">rfl</span><span class=\"w\"> </span><span class=\"c1\">-- now working too</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n</code></pre></div>",
        "id": 554271639,
        "sender_full_name": "Lara Toledano",
        "timestamp": 1762506808
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"987033\">@Lara Toledano</span> You may be well aware of this but I might mention that this corner of the library is under active development, and that we merged <a href=\"https://github.com/leanprover-community/mathlib4/pull/30029\">#30029</a> just yesterday.</p>",
        "id": 554297848,
        "sender_full_name": "Oliver Nash",
        "timestamp": 1762514408
    },
    {
        "content": "<p>Additionally (and again you may be well aware of all this) when formalising you will need to be mindful that the following are all different statements:</p>\n<ol>\n<li>Let <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>G</mi></mrow><annotation encoding=\"application/x-tex\">G</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\">G</span></span></span></span> be a topological group, now take the right (say) uniformity and ...</li>\n<li>Let <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>G</mi></mrow><annotation encoding=\"application/x-tex\">G</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\">G</span></span></span></span> be a uniform group for which the left and right uniformities coincide, and moreover suppose that this is the group's uniformity</li>\n<li>Let <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>G</mi></mrow><annotation encoding=\"application/x-tex\">G</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\">G</span></span></span></span> be a uniform group with the left uniformity</li>\n<li>Let <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>G</mi></mrow><annotation encoding=\"application/x-tex\">G</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\">G</span></span></span></span> be a uniform group with the right uniformity</li>\n</ol>",
        "id": 554298274,
        "sender_full_name": "Oliver Nash",
        "timestamp": 1762514544
    },
    {
        "content": "<p>After <a href=\"https://github.com/leanprover-community/mathlib4/pull/30029\">#30029</a> we can state each of these in Lean as follows:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"c1\">-- Let `G` be a topological group</span>\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Group</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">TopologicalSpace</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">IsTopologicalGroup</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">]</span>\n\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">uniformity</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"c1\">-- Correctly fails: we have not given `G` a canonical uniform space structure</span>\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">IsTopologicalGroup</span><span class=\"bp\">.</span><span class=\"n\">toUniformSpace</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">))</span><span class=\"bp\">.</span><span class=\"n\">uniformity</span><span class=\"w\"> </span><span class=\"c1\">-- The right uniformity</span>\n</code></pre></div>",
        "id": 554298660,
        "sender_full_name": "Oliver Nash",
        "timestamp": 1762514674
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"c1\">-- Let `G` be a uniform group for which the left and right uniformities coincide, and moreover</span>\n<span class=\"c1\">-- suppose that this is the group's uniformity.</span>\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Group</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">UniformSpace</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">IsUniformGroup</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">]</span>\n\n<span class=\"bp\">#</span><span class=\"n\">synth</span><span class=\"w\"> </span><span class=\"n\">IsLeftUniformGroup</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"c1\">-- The uniform structure is the left uniformity</span>\n<span class=\"bp\">#</span><span class=\"n\">synth</span><span class=\"w\"> </span><span class=\"n\">IsRightUniformGroup</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"c1\">-- The uniform structure is the right uniformity</span>\n</code></pre></div>",
        "id": 554298819,
        "sender_full_name": "Oliver Nash",
        "timestamp": 1762514718
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"c1\">-- Let `G` be a uniform group with the left uniformity</span>\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Group</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">UniformSpace</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">IsLeftUniformGroup</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">]</span>\n</code></pre></div>",
        "id": 554298851,
        "sender_full_name": "Oliver Nash",
        "timestamp": 1762514732
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"c1\">-- Let `G` be a uniform group with the right uniformity</span>\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Group</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">UniformSpace</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">IsRightUniformGroup</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">]</span>\n\n<span class=\"c1\">-- Indeed this is what is given by docs#IsTopologicalGroup.toUniformSpace</span>\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">IsTopologicalGroup</span><span class=\"bp\">.</span><span class=\"n\">toUniformSpace</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">))</span><span class=\"bp\">.</span><span class=\"n\">uniformity</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">uniformity</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">simp_rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">IsRightUniformGroup</span><span class=\"bp\">.</span><span class=\"n\">uniformity_eq</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">‚Üê</span><span class=\"w\"> </span><span class=\"n\">div_eq_mul_inv</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">‚Üê</span><span class=\"w\"> </span><span class=\"n\">uniformity_eq_comap_nhds_one'</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">rfl</span>\n</code></pre></div>",
        "id": 554298984,
        "sender_full_name": "Oliver Nash",
        "timestamp": 1762514771
    },
    {
        "content": "<p>The only thing missing really is that we can't do \"endow this topological group with its left uniform structure\" right now. The first step on that road would be <a href=\"https://github.com/leanprover-community/mathlib4/pull/30009\">#30009</a>, renaming <code>IsTopologicalGroup.toUniformSpace</code> to <code>IsTopologicalGroup.rightUniformSpace</code>. This might be slightly controversial for everyone working with commutative groups, but I tend to think that a comment saying \"just use the right one when in doubt\" would be enough?</p>",
        "id": 554332099,
        "sender_full_name": "Anatole Dedecker",
        "timestamp": 1762524732
    },
    {
        "content": "<p>Hmm, but in other(/most?) parts of mathlib we instead say \"use the left one when in doubt\". How is a user supposed to discover which side they should fall onto when in doubt?</p>",
        "id": 554373319,
        "sender_full_name": "Ya√´l Dillies",
        "timestamp": 1762535260
    },
    {
        "content": "<p>This could be written in the docstrings of the declarations, is that not enough? Btw, the reason right makes more sense here is simply that <code>x - y = x + (-y)</code> and not <code>-y + x</code>.</p>",
        "id": 554377849,
        "sender_full_name": "Anatole Dedecker",
        "timestamp": 1762536453
    },
    {
        "content": "<p>A slightly meaner option would be to argue that the litterature is not consistent about which one is the left or the right uniformity, so we can pick the one we want x) But I'd rather stay with Bourbaki's convention by default.</p>",
        "id": 554378224,
        "sender_full_name": "Anatole Dedecker",
        "timestamp": 1762536546
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 555580127,
        "sender_full_name": "Lara Toledano",
        "timestamp": 1763124847
    },
    {
        "content": "<p>One could generalize <code>IsTopologicalGroup.rightUniformSpace</code> to the following situation.<br>\nGiven <code>[IsTopologicalGroup G] [MulAction G X]</code>, we obtain a <code>UniformSpace.Core X</code> through</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"o\">(</span><span class=\"n\">ùìù</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">))</span><span class=\"bp\">.</span><span class=\"n\">lift'</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">‚Ü¶</span><span class=\"w\"> </span><span class=\"o\">{(</span><span class=\"n\">x</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">√ó</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">‚àÉ</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"bp\">‚àà</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"bp\">‚Ä¢</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">}</span>\n</code></pre></div>\n<p>In the special case <code>X = G</code>, this is precisely the right uniformity of the topological group.</p>\n<p>This uniformity on <code>X</code> satisfies <code>ùìù (g ‚Ä¢ x) = g ‚Ä¢ ùìù x</code> as well as the following universal properties:</p>\n<ul>\n<li>Its topology is the finest topology such that <code>g ‚Ü¶  g ‚Ä¢ x</code> is  continuous for each <code>x : X</code></li>\n<li>It is the finest uniformity such that <code>g ‚Ü¶  g ‚Ä¢ x</code> is uniformly continuous for each <code>x : X</code></li>\n<li>Its topology is the coarsest topology such that <code>g ‚Ü¶  g ‚Ä¢ x</code> is open for each <code>x : X</code></li>\n</ul>",
        "id": 569110130,
        "sender_full_name": "Lara Toledano",
        "timestamp": 1768936867
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"987033\">Lara Toledano</span> <a href=\"#narrow/channel/116395-maths/topic/topological.20groups.20and.20uniformity/near/569110130\">said</a>:</p>\n<blockquote>\n<ul>\n<li>It is the finest uniformity such that <code>g ‚Ü¶  g ‚Ä¢ x</code> is uniformly continuous for each <code>x : X</code></li>\n</ul>\n</blockquote>\n<p>wrt which uniformity on <code>G</code>?</p>",
        "id": 569114729,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1768938402
    },
    {
        "content": "<p>Great question. With respect to the right uniformity.</p>",
        "id": 569122931,
        "sender_full_name": "Lara Toledano",
        "timestamp": 1768941352
    }
]