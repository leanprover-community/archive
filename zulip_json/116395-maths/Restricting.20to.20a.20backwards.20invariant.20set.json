[
    {
        "content": "<p>A bit off-topic, but in case anyone reading knows: given an invariant <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>s</mi><mo>=</mo><msup><mi>f</mi><mrow><mo>−</mo><mn>1</mn></mrow></msup><mo stretchy=\"false\">(</mo><mi>s</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">s = f^{-1}(s)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">s</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0641em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">s</span><span class=\"mclose\">)</span></span></span></span>, is there a canonical way to write the restriction <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi><msub><mi mathvariant=\"normal\">∣</mi><mi>s</mi></msub><mspace></mspace><mspace width=\"0.1111em\"/><mo lspace=\"0em\" rspace=\"0.17em\"></mo><mtext> ⁣</mtext><mo lspace=\"0em\" rspace=\"0em\">:</mo><mspace width=\"0.3333em\"/><mi>s</mi><mo>→</mo><mi>s</mi></mrow><annotation encoding=\"application/x-tex\">f|_s \\colon s \\to s</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mord\"><span class=\"mord\">∣</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">s</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace nobreak\"></span><span class=\"mspace\" style=\"margin-right:0.1111em;\"></span><span class=\"mpunct\"></span><span class=\"mspace\" style=\"margin-right:-0.1667em;\"></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mrel\">:</span></span><span class=\"mspace\" style=\"margin-right:0.3333em;\"></span><span class=\"mord mathnormal\">s</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">s</span></span></span></span>? There is <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Set.restrictPreimage#doc\">docs#Set.restrictPreimage</a> but it doesn't use the invariance hypothesis right away so you get <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>f</mi><mrow><mo>−</mo><mn>1</mn></mrow></msup><mo stretchy=\"false\">(</mo><mi>s</mi><mo stretchy=\"false\">)</mo><mo>→</mo><mi>s</mi></mrow><annotation encoding=\"application/x-tex\">f^{-1}(s) \\to s</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0641em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">s</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">s</span></span></span></span>. I imagine something bundled would be useful for dynamics in general.</p>",
        "id": 558550790,
        "sender_full_name": "Lua Viana Reis",
        "timestamp": 1763682610
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Set.MapsTo.restrict#doc\">docs#Set.MapsTo.restrict</a></p>",
        "id": 558551382,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1763682951
    },
    {
        "content": "<p>Would it make sense to have a <code>def IsInvariant : (a → a) → Set a → Prop</code>, so that things could be stated in terms of that? Then it would be possible to have <code>IsInvariant.restrict f : s → s</code>, and so on. Perhaps also easier to search in Loogle?</p>",
        "id": 558551487,
        "sender_full_name": "Lua Viana Reis",
        "timestamp": 1763683023
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> <a href=\"#narrow/channel/116395-maths/topic/Weak-Mixing.20.28Ergodic.20Theory.29/near/558551382\">said</a>:</p>\n<blockquote>\n<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Set.MapsTo.restrict#doc\">docs#Set.MapsTo.restrict</a></p>\n</blockquote>\n<p>Note this is the same of what I linked, just one step behind.</p>",
        "id": 558551544,
        "sender_full_name": "Lua Viana Reis",
        "timestamp": 1763683061
    },
    {
        "content": "<p>It gives you <code>s -&gt; s</code></p>",
        "id": 558551589,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1763683089
    },
    {
        "content": "<p>Ah, so have <code>MapsTo f s s</code> as hypothesis</p>",
        "id": 558551663,
        "sender_full_name": "Lua Viana Reis",
        "timestamp": 1763683141
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"571941\">Lua Viana Reis</span> <a href=\"#narrow/channel/116395-maths/topic/Weak-Mixing.20.28Ergodic.20Theory.29/near/558551487\">said</a>:</p>\n<blockquote>\n<p>Would it make sense to have a <code>def IsInvariant : (a → a) → Set a → Prop</code>, so that things could be stated in terms of that?</p>\n</blockquote>\n<p>What's the definition? Are there many theorems that have this specific combination of hypotheses?</p>",
        "id": 558551711,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1763683171
    },
    {
        "content": "<p>I think <code>MapsTo f s s</code> is still not ideal, because it is not equivalent to <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>s</mi><mo>=</mo><msup><mi>f</mi><mrow><mo>−</mo><mn>1</mn></mrow></msup><mo stretchy=\"false\">(</mo><mi>s</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">s = f^{-1}(s)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">s</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0641em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">s</span><span class=\"mclose\">)</span></span></span></span> and in ergodic theory we really want the latter</p>",
        "id": 558551793,
        "sender_full_name": "Lua Viana Reis",
        "timestamp": 1763683211
    },
    {
        "content": "<p>I guess you can add on <code>MapsTo f sᶜ sᶜ</code> if you really want</p>",
        "id": 558552050,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1763683323
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> said:</p>\n<blockquote>\n<p>What's the definition? Are there many theorems that have this specific combination of hypotheses?</p>\n</blockquote>\n<p>The definition would be <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>s</mi><mo>=</mo><msup><mi>f</mi><mrow><mo>−</mo><mn>1</mn></mrow></msup><mo stretchy=\"false\">(</mo><mi>s</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">s = f^{-1}(s)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">s</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0641em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">s</span><span class=\"mclose\">)</span></span></span></span>. Many things in ergodic theory would have it. <a href=\"https://loogle.lean-lang.org/?q=%3Ff+%E2%81%BB%C2%B9%27+%3Ft+%3D+%3Ft\">Loogle</a> returns 19 matches</p>",
        "id": 558552072,
        "sender_full_name": "Lua Viana Reis",
        "timestamp": 1763683331
    },
    {
        "content": "<p>(sorry, I had a hard time to quote your message <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span>)</p>",
        "id": 558552316,
        "sender_full_name": "Lua Viana Reis",
        "timestamp": 1763683481
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"644391\">@loogle</span> ?f ⁻¹' ?t = ?t</p>",
        "id": 558552429,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1763683547
    },
    {
        "content": "<p><span aria-label=\"search\" class=\"emoji emoji-1f50d\" role=\"img\" title=\"search\">:search:</span> <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Data/Set/Image.html#Set.preimage_id\">Set.preimage_id</a>, <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Data/Set/Image.html#Set.preimage_id%27\">Set.preimage_id'</a>, and <a href=\"https://loogle.lean-lang.org/?q=%3Ff%20%E2%81%BB%C2%B9%27%20%3Ft%20%3D%20%3Ft\">17 more</a></p>",
        "id": 558552434,
        "sender_full_name": "loogle",
        "timestamp": 1763683549
    },
    {
        "content": "<p>nineteen, did you maybe miscount?</p>",
        "id": 558552471,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1763683563
    },
    {
        "content": "<p>(and apparently I also don't know how to read)</p>",
        "id": 558552473,
        "sender_full_name": "Lua Viana Reis",
        "timestamp": 1763683563
    },
    {
        "content": "<p>yes, 19</p>",
        "id": 558552494,
        "sender_full_name": "Lua Viana Reis",
        "timestamp": 1763683568
    },
    {
        "content": "<p>/poll So, should it be...<br>\n<code>my_theorem (h : f ⁻¹ s = s) : Ergodic (MapsTo.of_invariant h |&gt;.restrict _ _ _) μ</code><br>\n<code>my_theorem (h : s.IsInvariantFor f) : Ergodic h.restrict μ</code><br>\nother</p>",
        "id": 558554779,
        "sender_full_name": "Lua Viana Reis",
        "timestamp": 1763684655
    },
    {
        "content": "<p>(modulo better names for things, etc. <code>MapsTo.of_invariant</code> is also a suggestion and does not exist)</p>",
        "id": 558555275,
        "sender_full_name": "Lua Viana Reis",
        "timestamp": 1763684935
    },
    {
        "content": "<p>By the way, is there a good reason for all four arguments of <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Set.MapsTo.restrict#doc\">Set.MapsTo.restrict</a> being explicit, given the first three could be inferred from the fourth?</p>",
        "id": 558556059,
        "sender_full_name": "Lua Viana Reis",
        "timestamp": 1763685337
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"644391\">@loogle</span> ?f ⁻¹' ?s =ᵐ[?μ] ?s</p>",
        "id": 558557199,
        "sender_full_name": "Lua Viana Reis",
        "timestamp": 1763685964
    },
    {
        "content": "<p><span aria-label=\"search\" class=\"emoji emoji-1f50d\" role=\"img\" title=\"search\">:search:</span> <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/MeasureTheory/Measure/QuasiMeasurePreserving.html#MeasureTheory.Measure.QuasiMeasurePreserving.preimage_iterate_ae_eq\">MeasureTheory.Measure.QuasiMeasurePreserving.preimage_iterate_ae_eq</a>, <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/MeasureTheory/Measure/QuasiMeasurePreserving.html#MeasureTheory.Measure.QuasiMeasurePreserving.exists_preimage_eq_of_preimage_ae\">MeasureTheory.Measure.QuasiMeasurePreserving.exists_preimage_eq_of_preimage_ae</a>, and <a href=\"https://loogle.lean-lang.org/?q=%3Ff%20%E2%81%BB%C2%B9%27%20%3Fs%20%3D%E1%B5%90%5B%3F%CE%BC%5D%20%3Fs\">16 more</a></p>",
        "id": 558557204,
        "sender_full_name": "loogle",
        "timestamp": 1763685965
    },
    {
        "content": "<p>And there is also this a.e. form</p>",
        "id": 558557272,
        "sender_full_name": "Lua Viana Reis",
        "timestamp": 1763686011
    },
    {
        "content": "<p>22 messages were moved here from <a class=\"stream-topic\" data-stream-id=\"116395\" href=\"/#narrow/channel/116395-maths/topic/Weak-Mixing.20.28Ergodic.20Theory.29/with/558548955\">#maths &gt; Weak-Mixing (Ergodic Theory)</a> by <span class=\"user-mention silent\" data-user-id=\"571941\">Lua Viana Reis</span>.</p>",
        "id": 558558083,
        "sender_full_name": "Notification Bot",
        "timestamp": 1763686472
    },
    {
        "content": "<p>I think the correct assumption for most theorems should be the <code>MapsTo</code> one, not the stronger one where the preimage is equal to the set. Do you have examples where the stronger one is important?</p>",
        "id": 558584001,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1763705847
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110050\">Sébastien Gouëzel</span> <a href=\"#narrow/channel/116395-maths/topic/Restricting.20to.20a.20backwards.20invariant.20set/near/558584001\">said</a>:</p>\n<blockquote>\n<p>I think the correct assumption for most theorems should be the <code>MapsTo</code> one, not the stronger one where the preimage is equal to the set. Do you have examples where the stronger one is important?</p>\n</blockquote>\n<p>Hmm, sorry, this was in the context of <a class=\"stream-topic\" data-stream-id=\"116395\" href=\"/#narrow/channel/116395-maths/topic/Weak-Mixing.20.28Ergodic.20Theory.29/with/558558085\">#maths &gt; Weak-Mixing (Ergodic Theory)</a>.</p>\n<p>I don't see how this could work for <code>Ergodic</code> in general, even more so for <code>PreErgodic</code> and <code>QuasiErgodic</code> (unless the definition is changed). <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Ergodic.ae_empty_or_univ_of_image_ae_le%27#doc\">docs#Ergodic.ae_empty_or_univ_of_image_ae_le'</a> take a hypothesis that the set has finite measure, and don't exist for the other two.</p>\n<p>The counterexample I can think of now is <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>X</mi><mo>=</mo><msub><mi mathvariant=\"double-struck\">Z</mi><mrow><mo>&lt;</mo><mn>0</mn></mrow></msub><mo>⊔</mo><mi mathvariant=\"double-struck\">Z</mi></mrow><annotation encoding=\"application/x-tex\">X= \\Z_{&lt;0} \\sqcup \\Z</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8663em;vertical-align:-0.1774em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">Z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mrel mtight\">&lt;</span><span class=\"mord mtight\">0</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1774em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">⊔</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6889em;\"></span><span class=\"mord mathbb\">Z</span></span></span></span> (the integers with an extra copy of the negative numbers), with the shift <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>σ</mi><mo stretchy=\"false\">(</mo><mi>i</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>i</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">\\sigma(i)=i+1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">σ</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">i</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7429em;vertical-align:-0.0833em;\"></span><span class=\"mord mathnormal\">i</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">1</span></span></span></span> on each copy, but sending both copies of -1 to 0. This would be measure-preserving and ergodic for the measure that is half the counting measure on the negative part, and the counting measure on the nonnegative side. But <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">Z</mi></mrow><annotation encoding=\"application/x-tex\">\\Z</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6889em;\"></span><span class=\"mord mathbb\">Z</span></span></span></span> is a forward-invariant set that is not almost empty nor full.</p>",
        "id": 558644180,
        "sender_full_name": "Lua Viana Reis",
        "timestamp": 1763726880
    },
    {
        "content": "<p>Or perhaps, you mean that if the map is <code>{Pre,Quasi,}Ergodic</code> and <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi></mrow><annotation encoding=\"application/x-tex\">S</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span></span></span></span> is forward invariant, then the restriction to <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi></mrow><annotation encoding=\"application/x-tex\">S</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span></span></span></span> is also <code>{Pre,Quasi,}Ergodic</code>?</p>",
        "id": 558645244,
        "sender_full_name": "Lua Viana Reis",
        "timestamp": 1763727224
    },
    {
        "content": "<p>In my example, the restriction not ergodic, because it's not measure-preserving anymore.</p>",
        "id": 558645422,
        "sender_full_name": "Lua Viana Reis",
        "timestamp": 1763727284
    },
    {
        "content": "<p>What's the theorem here?</p>",
        "id": 558646196,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1763727597
    },
    {
        "content": "<p>I agree that this is a very sensible assumption in the context of noninvertible ergodic theory (and also dynamics). But I think we already have way too much restriction operators so I would say that the restriction should still be spelled using <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Set.MapsTo.restrict#doc\">docs#Set.MapsTo.restrict</a>, eventually with some API to make it easier to use here.</p>",
        "id": 558646424,
        "sender_full_name": "Anatole Dedecker",
        "timestamp": 1763727674
    },
    {
        "content": "<p>So, <code>(MapsTo.of_invariant h |&gt;.restrict f s s)</code>? Where <code>MapsTo.of_invariant : (f ⁻¹' s = s) → MapsTo f s s</code> could be added.</p>",
        "id": 558646981,
        "sender_full_name": "Lua Viana Reis",
        "timestamp": 1763727845
    },
    {
        "content": "<p>And I think I came up with an explanation for <code>MapsTo</code> being explicit in its four parameters, it makes it easier to search with Loogle via pattern matching.</p>",
        "id": 558648983,
        "sender_full_name": "Lua Viana Reis",
        "timestamp": 1763728462
    }
]