[
    {
        "content": "<p>Has there been any progress on this?</p>",
        "id": 528004148,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1752125591
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"330967\">@Wrenna Robson</span> Is it ok if I adapt your code for Mathlib 4 and PR it?</p>",
        "id": 528005603,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1752126736
    },
    {
        "content": "<p>Crack on, I'm not going to. Let me know and I'll have a look at the PR though.</p>",
        "id": 528006388,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752127270
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Order/Concept.html\">https://leanprover-community.github.io/mathlib4_docs/Mathlib/Order/Concept.html</a></p>",
        "id": 528027625,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752136415
    },
    {
        "content": "<p>I think this is the rest of the Concept stuff, which iirc this basically is.</p>",
        "id": 528027671,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752136431
    },
    {
        "content": "<p>(So you may not want to entirely duplicate it.)</p>",
        "id": 528028027,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752136553
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"387244\">@Yaël Dillies</span> what exactly did you end up doing with this?</p>",
        "id": 528028036,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752136556
    },
    {
        "content": "<p>It looks to me like we are missing 3.7-3.9 from Davey &amp; Priestley</p>",
        "id": 528031216,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752137638
    },
    {
        "content": "<p><a class=\"stream-topic\" data-stream-id=\"113488\" href=\"/#narrow/channel/113488-general/topic/conditional.20lattice.20refactor/with/286879641\">#general &gt; conditional lattice refactor</a> </p>\n<p><span class=\"user-mention\" data-user-id=\"459227\">@Violeta Hernández</span> you may want to see this thread if you haven't already which was from a little later in 2022.</p>",
        "id": 528032153,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752137905
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"330967\">Wrenna Robson</span> <a href=\"#narrow/channel/116395-maths/topic/Dedekind-MacNeille.20completion.2E/near/528027671\">said</a>:</p>\n<blockquote>\n<p>I think this is the rest of the Concept stuff, which iirc this basically is.</p>\n</blockquote>\n<p>Oh oops. Would've done me good to read this two hours ago.</p>",
        "id": 528049254,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1752143398
    },
    {
        "content": "<p>;_;</p>",
        "id": 528049295,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752143410
    },
    {
        "content": "<p>sorry, I realised it as soon as I got into work</p>",
        "id": 528049310,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752143417
    },
    {
        "content": "<p>there is still work to do (which I am now noodling at...)</p>",
        "id": 528049333,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752143426
    },
    {
        "content": "<p>I'm refactoring Yael's work somewhat to taste and aiming for the fundamental theorem. Then we just need the &lt;= special case :)</p>",
        "id": 528049443,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752143465
    },
    {
        "content": "<p>So, just to make sure I understand, the Dedekind-MacNeille completion is just the concept lattice of the <code>≤</code> relation of an order?</p>",
        "id": 528049648,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1752143542
    },
    {
        "content": "<p>Yes.</p>",
        "id": 528049668,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752143549
    },
    {
        "content": "<p>huh</p>",
        "id": 528049717,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1752143567
    },
    {
        "content": "<p>Which stated kind of another way, is: any complete lattice is the concept lattice of ≤ (so all complete lattices are isomorphic to a concept lattice).</p>",
        "id": 528049883,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752143633
    },
    {
        "content": "<p>What does the fundamental theorem of concept lattices say?</p>",
        "id": 528049936,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1752143656
    },
    {
        "content": "<p>My PR had a proof that every embedding into a complete lattice factored through the Dedekind completion; does that have a concept lattice analog?</p>",
        "id": 528050036,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1752143688
    },
    {
        "content": "<p>Yes: \"The concepts of a given context form a complete lattice into which the original objects and attributes embed.\"</p>",
        "id": 528050153,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752143725
    },
    {
        "content": "<p>Well, what I'm saying is a bit stronger, isn't it? The Dedekind completion of <code>α</code> is a complete lattice <code>β</code> with an order embedding <code>α ↪o β</code>, but it also has the property that for any other complete lattice <code>γ</code> with an embedding <code>α ↪o γ</code>, you can construct the embedding <code>β ↪o γ</code> such that the triangle commutes.</p>",
        "id": 528050676,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1752143926
    },
    {
        "content": "<p>I think this does have an analogue but I'm not yet sure we have it in the Concept stuff (which is certainly incomplete), and it might not be in the book.</p>",
        "id": 528050816,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752143971
    },
    {
        "content": "<p>(I'm trying to read up on concept theory, but the <a href=\"https://en.wikipedia.org/wiki/Formal_concept_analysis\">Wikipedia article</a> is genuinely incomprehensible...)</p>",
        "id": 528050937,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1752144014
    },
    {
        "content": "<p>see your DMs :)</p>",
        "id": 528050958,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752144022
    },
    {
        "content": "<p>I feel like at the very least we should add some sort of docstring somewhere in the file containing the substring \"Dedekind-MacNeille\".</p>",
        "id": 528051918,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1752144383
    },
    {
        "content": "<p>Yes.</p>",
        "id": 528051938,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752144392
    },
    {
        "content": "<p>I don't think it would be BAD to have a separate file which essentially contains the Dedekind-MacNeille completion, even if it's ultimately defined in terms of concepts.</p>",
        "id": 528052077,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752144445
    },
    {
        "content": "<p>Maybe we can define <code>DedekindCut α</code> as an abbreviation for <code>Concept α α (· ≤ ·)</code>, and add the theorems linking the intent/extent closure to the lower/upper bounds of a set?</p>",
        "id": 528052454,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1752144577
    },
    {
        "content": "<p>Yes, though they are near immediate:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">upperBounds_eq_upperPolar</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">LE</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">upperBounds</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">upperPolar</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"bp\">·</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">rfl</span>\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">lowerBounds_eq_lowerPolar</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">LE</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">lowerBounds</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">lowerPolar</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"bp\">·</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">rfl</span>\n</code></pre></div>\n<p>(I've renamed the closures but you can see the point.)</p>",
        "id": 528052515,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752144604
    },
    {
        "content": "<p>Hmm, that's a bit too immediate for my taste if I'm being honest</p>",
        "id": 528052612,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1752144643
    },
    {
        "content": "<p>Maybe we can add the abbreviation and keep it at that?</p>",
        "id": 528052628,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1752144650
    },
    {
        "content": "<p>In what sense?</p>",
        "id": 528052631,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752144652
    },
    {
        "content": "<p>Oh as in it is Just There</p>",
        "id": 528052663,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752144664
    },
    {
        "content": "<p>yes, I did think this.</p>",
        "id": 528052686,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752144672
    },
    {
        "content": "<p>I am going to keep noodling at this refactor and extension for enrichment, thanks for reminding me of it, I'll let you know when I have something. I think we're both keen to get this in in some form.</p>",
        "id": 528052728,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752144688
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"459227\">Violeta Hernández</span> <a href=\"#narrow/channel/116395-maths/topic/Dedekind-MacNeille.20completion.2E/near/528052628\">said</a>:</p>\n<blockquote>\n<p>Maybe we can add the abbreviation and keep it at that?</p>\n</blockquote>\n<p>Actually, on second thought. What do you think about having a file that defines the abbreviation, but also proves the minimality theorem I mentioned?</p>",
        "id": 528053197,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1752144853
    },
    {
        "content": "<p>I think that would be great (though the minimality theorem might apply for concepts in which case we should have it).</p>",
        "id": 528053332,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752144887
    },
    {
        "content": "<p>But basically I think we should have a file that requires people to know NOTHING about concepts that gives the Dedekind-MacNeille completion.</p>",
        "id": 528053417,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752144910
    },
    {
        "content": "<p>Even if, ohoho, it is a simple thin layer over a different file that is the Concept one.</p>",
        "id": 528053498,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752144927
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"330967\">@Wrenna Robson</span> Opened a new PR defining <code>DedekindCut α = Concept α α (· ≤ ·)</code>. I'm pleasantly surprised at how little work it took to port the minimality theorem.</p>\n<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/26966\">#26966</a></p>",
        "id": 528061469,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1752147590
    },
    {
        "content": "<p>Oh very nice</p>",
        "id": 528061585,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752147634
    },
    {
        "content": "<p>I imagine we also want to show the Dedekind completion of a complete lattice is isomorphic to itself, surely this theorem doesn't have a concept analog either?</p>",
        "id": 528064553,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1752148662
    },
    {
        "content": "<p>Uh that is sort of one end of the fundamental theorem.</p>",
        "id": 528064636,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752148687
    },
    {
        "content": "<p>Oh, nice!</p>",
        "id": 528064729,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1752148712
    },
    {
        "content": "<p>Then it's a good thing I haven't done that yet</p>",
        "id": 528064762,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1752148722
    },
    {
        "content": "<p>I'll go read the paper you sent me</p>",
        "id": 528064786,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1752148728
    },
    {
        "content": "<p>Like in the sense that any complete lattice is isomorphic to the concept lattice of its &lt;=, which IS the completion, essentially.</p>",
        "id": 528064830,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752148745
    },
    {
        "content": "<p>Hmm... I mean, surely we can just state this in terms of <code>DedekindCut</code>?</p>",
        "id": 528064974,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1752148804
    },
    {
        "content": "<p>Quite probably!</p>",
        "id": 528065017,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752148817
    },
    {
        "content": "<p>Certainly I think it's a good reason to have DedekindCut as a name.</p>",
        "id": 528065124,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752148846
    },
    {
        "content": "<p><code>DedekindCut.ofElement</code> would provide one half of the isomorphism, the other half should simply be <code>sSup x.fst</code></p>",
        "id": 528065434,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1752148928
    },
    {
        "content": "<p>That sounds right to me!</p>",
        "id": 528065502,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752148939
    },
    {
        "content": "<p>It's a really neat construction really.</p>",
        "id": 528065541,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752148949
    },
    {
        "content": "<p>I am gonna finish what I am doing I think, but it's alright, I'm sure we can bring it all together.</p>",
        "id": 528065626,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752148970
    },
    {
        "content": "<p>Just finished the proof! Put it in my own branch: <a href=\"https://github.com/vihdzp/mathlib4/blob/vi.ddk2/Mathlib/Order/Dedekind.lean\">https://github.com/vihdzp/mathlib4/blob/vi.ddk2/Mathlib/Order/Dedekind.lean</a></p>",
        "id": 528072162,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1752150974
    },
    {
        "content": "<p>Oh that's quite lovely :)</p>",
        "id": 528072253,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752151007
    },
    {
        "content": "<p>Not sure if I should add this to my original PR, or if I should put this as a separate PR. What do you think?</p>",
        "id": 528072276,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1752151014
    },
    {
        "content": "<p>Hmm.</p>",
        "id": 528072300,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752151023
    },
    {
        "content": "<p>Probably a separate dependent PR? Your first should ideally be as close to <em>just</em> adding the abbrev as possible I think (so possibly the factor theorem goes in the second one too).</p>",
        "id": 528072398,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752151058
    },
    {
        "content": "<p>I'm not sure if I agree with that. The point of doing the factor theorem together with the abbrev is that it serves as battle-testing; specifically, it shows you don't have to go through any complicated <code>Concept</code> API to work with <code>DedekindCut</code>.</p>",
        "id": 528072667,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1752151150
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"330967\">Wrenna Robson</span> <a href=\"#narrow/stream/116395-maths/topic/Dedekind-MacNeille.20completion.2E/near/528028036\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"387244\">Yaël Dillies</span> what exactly did you end up doing with this?</p>\n</blockquote>\n<p>Everything I did is in mathlib</p>",
        "id": 528072812,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1752151209
    },
    {
        "content": "<p>Cool :)</p>",
        "id": 528072833,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752151221
    },
    {
        "content": "<p>Note that somewhat recently <span class=\"user-mention\" data-user-id=\"263407\">@Laurent Bartholdi</span> accidentally duplicated part of the concept file in <code>Order.Rel.GaloisConnection</code>. I reviewed his PR but failed to spot that it was a duplicate. If you are cleaning things up, then you could look at removing (most of) <code>Order.Rel.GaloisConnection</code></p>",
        "id": 528073108,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1752151320
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"459227\">Violeta Hernández</span> <a href=\"#narrow/stream/116395-maths/topic/Dedekind-MacNeille.20completion.2E/near/528049254\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"330967\">Wrenna Robson</span> <a href=\"#narrow/channel/116395-maths/topic/Dedekind-MacNeille.20completion.2E/near/528027671\">said</a>:</p>\n<blockquote>\n<p>I think this is the rest of the Concept stuff, which iirc this basically is.</p>\n</blockquote>\n<p>Oh oops. Would've done me good to read this two hours ago.</p>\n</blockquote>\n<p>Please add \"Dedekind-MacNeille completion\" in the tags of <code>Order.Concept</code> so as to minimise the likelihood that this happens again</p>",
        "id": 528073383,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1752151417
    },
    {
        "content": "<p>Oops.</p>",
        "id": 528073662,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752151514
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"330967\">Wrenna Robson</span> <a href=\"#narrow/channel/116395-maths/topic/Dedekind-MacNeille.20completion.2E/near/528072398\">said</a>:</p>\n<blockquote>\n<p>Probably a separate dependent PR? Your first should ideally be as close to <em>just</em> adding the abbrev as possible I think (so possibly the factor theorem goes in the second one too).</p>\n</blockquote>\n<p>The way I see it, the factor theorem is <em>proving</em> that the definition of <code>DedekindCut</code> as a concept lattice is correct.</p>",
        "id": 528074817,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1752151885
    },
    {
        "content": "<p>I could just add the alias and the <code>upperBounds_fst</code>/<code>lowerBounds_snd</code> theorems, but then the PR would be five lines long and not very interesting.</p>",
        "id": 528074891,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1752151909
    },
    {
        "content": "<p>Hmm. I gotta dash to lunch and then I have a meeting but I will try to think more later.</p>",
        "id": 528075013,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752151945
    },
    {
        "content": "<p>Is it just the one branch you have?</p>",
        "id": 528105797,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752160329
    },
    {
        "content": "<p>The other branch is the one in the PR</p>",
        "id": 528105947,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1752160377
    },
    {
        "content": "<p>Right right</p>",
        "id": 528107543,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752160845
    },
    {
        "content": "<p>I actually made a second PR, but that's just a few results on <code>Concept</code> itself I felt were missing</p>",
        "id": 528107678,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1752160886
    },
    {
        "content": "<p>Hmm, what is the definition of join-dense and meet-dense in Lean?</p>",
        "id": 528108270,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752161090
    },
    {
        "content": "<p>I don't know. What is their definition in general? <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span></p>",
        "id": 528108819,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1752161273
    },
    {
        "content": "<p>\"a subset Q of an ordered set P is called join-<br>\ndense if every element of P is the join of a subset of Q.\"</p>",
        "id": 528108857,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752161288
    },
    {
        "content": "<p>Haven't seen something like that</p>",
        "id": 528109280,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1752161432
    },
    {
        "content": "<p>Basically looking at this:<br>\n3.8 Theorem. Let (G, M, I) be a context and L = B(G, M, I) the<br>\nassociated complete lattice of concepts. Then the mappings γ : G → L<br>\nand μ : M → L are such that the set γ(G) is join-dense in L,the set<br>\nμ(M ) is meet-dense in L,and gIm is equivalent to γ(g) &lt;= μ(m) for<br>\neach g ∈ G and m ∈ M .</p>",
        "id": 528109391,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752161468
    },
    {
        "content": "<p>Unless we have yet another tagging situation I don't think join-dense or meet-dense sets are in Mathlib</p>",
        "id": 528110241,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1752161756
    },
    {
        "content": "<p>Hmm!</p>",
        "id": 528110290,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752161770
    },
    {
        "content": "<p>Are there any interesting results about them we could formalize?</p>",
        "id": 528110373,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1752161797
    },
    {
        "content": "<p>I think elsewhere in the same textbook the concepts are in, but in chapter 2. It would definitely be good to look at formalising them (possibly not in the same way the textbook does, as ever).</p>",
        "id": 528110498,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752161833
    },
    {
        "content": "<p><a href=\"https://github.com/linesthatinterlace/mathlib4/tree/concept_work\">https://github.com/linesthatinterlace/mathlib4/tree/concept_work</a></p>",
        "id": 528123430,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752166019
    },
    {
        "content": "<p>So this is the branch I've been working on</p>",
        "id": 528123444,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752166024
    },
    {
        "content": "<p>Bit different to yours!</p>",
        "id": 528123454,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752166028
    },
    {
        "content": "<p>rel_iff_ofObject_le_ofAttribute is interesting to look at!</p>",
        "id": 528123484,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752166043
    },
    {
        "content": "<p>I've been refactoring the existing file to make the API a bit better in terms of names etc.</p>",
        "id": 528123532,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752166064
    },
    {
        "content": "<p>Are <code>lowerPolar</code> and <code>upperPolar</code> the names in the literature?</p>",
        "id": 528123739,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1752166157
    },
    {
        "content": "<p>They appear to be, or rather they are called \"polars\"</p>",
        "id": 528123780,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752166173
    },
    {
        "content": "<p>And given <code>lowerPolar</code> is <code>lowerBounds</code> in the special case of &lt;=, etc., that is why I chose those names.</p>",
        "id": 528123859,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752166204
    },
    {
        "content": "<p>Similarly, \"extent\" and \"intent\" come from the literature.</p>",
        "id": 528124035,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752166268
    },
    {
        "content": "<p>I like what you've done!</p>",
        "id": 528124120,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1752166293
    },
    {
        "content": "<p>Thanks! It would be good to work with you and bring our stuff together.</p>",
        "id": 528124173,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752166310
    },
    {
        "content": "<p>I notice that <code>ofObject</code> and <code>ofAttribute</code> seem to be the generalizations of my single <code>ofElement</code> map</p>",
        "id": 528124245,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1752166337
    },
    {
        "content": "<p>That is correct.</p>",
        "id": 528124269,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752166348
    },
    {
        "content": "<p>I can put my PR on draft. In a weird twist of events it turns out I don't even need it anymore!</p>",
        "id": 528124339,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1752166373
    },
    {
        "content": "<p>Isn't that always the way!</p>",
        "id": 528124389,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752166384
    },
    {
        "content": "<p>(I wanted to define gaps of surreal numbers as <code>Concept _ _ (· ≤ ·)</code>, but oddly enough it turns out the correct definition is <code>Concept _ _ (· &lt; ·)</code> which is slightly different)</p>",
        "id": 528124485,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1752166418
    },
    {
        "content": "<p>But I will have time on and off to work on this and I think we could make some improvements by incorporating what I've done and then layering on top and around the DedkindCut stuff you've done, and the corresponding results.</p>",
        "id": 528124511,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752166427
    },
    {
        "content": "<p>Aha! Good to have the concept language, isn't it?</p>",
        "id": 528124563,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752166443
    },
    {
        "content": "<p>Truly is!</p>",
        "id": 528124597,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1752166453
    },
    {
        "content": "<p>There is an argument that you could define the set of sets which are IsExtent/IIsIntent (invariant under <code>lowerPolar r (upperPolar r s) = s</code> and vice vera`), as in give them a name, and then essentially both of those set of sets has a complete lattice structure on it that is isomorphic to the concept lattice.</p>",
        "id": 528124917,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752166545
    },
    {
        "content": "<p>This is similar happening with <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=LowerSet#doc\">docs#LowerSet</a> and <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=UpperSet#doc\">docs#UpperSet</a> right now and I don't like it (which one do I use?)</p>",
        "id": 528125048,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1752166587
    },
    {
        "content": "<p>(Notably the joins/meets are not quite the same as the ambient ones from Set - there is an interesting subtlety.)</p>",
        "id": 528125052,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752166590
    },
    {
        "content": "<p>I opened <a href=\"https://github.com/leanprover-community/mathlib4/pull/26968\">#26968</a> with some results that are still useful for talking about surreal gaps. I've drafted the Dedekind cut PR in anticipation for the concept API to expand a bit first.</p>",
        "id": 528125154,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1752166626
    },
    {
        "content": "<p><code>LowerSet</code> is different I think - <code>lowerPolar</code> is analgous to <code>lowerBounds</code> instead.</p>",
        "id": 528125164,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752166631
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> <a href=\"#narrow/channel/116395-maths/topic/Dedekind-MacNeille.20completion.2E/near/528125048\">said</a>:</p>\n<blockquote>\n<p>This is similar happening with <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=LowerSet#doc\">docs#LowerSet</a> and <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=UpperSet#doc\">docs#UpperSet</a> right now and I don't like it (which one do I use?)</p>\n</blockquote>\n<p>Ah but my putative thing above would be the corresponding thing... yeah.</p>",
        "id": 528125329,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752166701
    },
    {
        "content": "<p>It's difficult because basically LowerSet is only special because it has &lt;= associated with it.</p>",
        "id": 528125363,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752166715
    },
    {
        "content": "<p>But that's just some particular relation.</p>",
        "id": 528125380,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752166722
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"330967\">Wrenna Robson</span> <a href=\"#narrow/channel/116395-maths/topic/Dedekind-MacNeille.20completion.2E/near/528124917\">said</a>:</p>\n<blockquote>\n<p>There is an argument that you could define the set of sets which are IsExtent/IIsIntent (invariant under <code>lowerPolar r (upperPolar r s) = s</code> and vice vera`), as in give them a name, and then essentially both of those set of sets has a complete lattice structure on it that is isomorphic to the concept lattice.</p>\n</blockquote>\n<p>I prefer defining both at once. Lower sets and upper sets often appear on their own, but surely intents and extents are something you only ever talk about together.</p>",
        "id": 528125449,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1752166752
    },
    {
        "content": "<p>I don't disagree, which ultimately is why <code>Concept</code> is right I think.</p>",
        "id": 528125524,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752166777
    },
    {
        "content": "<p>It has a good symmetry to it.</p>",
        "id": 528125547,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752166785
    },
    {
        "content": "<p>Right I gotta go home for now and then I will try not to fall down a concept hole tomorrow (but thanks Violeta for pushing me down one ;))</p>",
        "id": 528125577,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752166796
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"330967\">Wrenna Robson</span> <a href=\"#narrow/channel/116395-maths/topic/Dedekind-MacNeille.20completion.2E/near/528125547\">said</a>:</p>\n<blockquote>\n<p>It has a good symmetry to it.</p>\n</blockquote>\n<p>It also leads to better def-eqs!</p>",
        "id": 528125680,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1752166833
    },
    {
        "content": "<p>Yes!</p>",
        "id": 528125748,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752166850
    },
    {
        "content": "<p>Basically the funny thing is that you generally have two choices of \"correct\" ext/injection style lemma in a proof - some constructions will want to use the extent and some will want to use the intent, and you need to move between them.</p>",
        "id": 528125894,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752166903
    },
    {
        "content": "<p>That's why good API is really important here I think.</p>",
        "id": 528125924,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752166914
    },
    {
        "content": "<p>I think it'd be nice to get the <code>intentClosure → lowerPolar</code> rename done quickly, or we'll end up with more and more theorems to rename.</p>",
        "id": 528127538,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1752167557
    },
    {
        "content": "<p>Agreed. Possibly the thing there is a rename PR that doesn't change anything else</p>",
        "id": 528127825,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752167687
    },
    {
        "content": "<p>I.e. no new defs or theorems</p>",
        "id": 528127859,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752167702
    },
    {
        "content": "<p>Agreed</p>",
        "id": 528127886,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1752167709
    },
    {
        "content": "<p>I can get that done rn if you want <span aria-label=\"slight smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"slight smile\">:slight_smile:</span></p>",
        "id": 528127907,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1752167718
    },
    {
        "content": "<p>Opened <a href=\"https://github.com/leanprover-community/mathlib4/pull/26976\">#26976</a> for the rename</p>",
        "id": 528139576,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1752172590
    },
    {
        "content": "<p>Thanks, sorry I'm still commuting home</p>",
        "id": 528139678,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752172632
    },
    {
        "content": "<p>I feel like <code>extends Set α × Set β</code> is really weird, it gives a <code>Concept.toProd</code> projection</p>",
        "id": 528139750,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1752172664
    },
    {
        "content": "<p>No worries!</p>",
        "id": 528139751,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1752172665
    },
    {
        "content": "<p>Yes I agree, I think we should also get rid of that as in my branch above. Think we could do that in the rename one</p>",
        "id": 528139841,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752172697
    },
    {
        "content": "<p>I don't really see the issue, this projection is basically invisible.</p>",
        "id": 528139893,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1752172722
    },
    {
        "content": "<p>Basically I would rather have initialize_simps_projections Concept (fst -&gt; extent, snd -&gt; intent).</p>",
        "id": 528140144,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752172812
    },
    {
        "content": "<p>Oh wait you're right, we can in fact choose better names for these fields</p>",
        "id": 528140227,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1752172844
    },
    {
        "content": "<p>I'm not sure the intent closure is what you say it is in the PR. I guess that's as good a name as any though.</p>",
        "id": 528140236,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752172848
    },
    {
        "content": "<p>Yeah, look in my branch to see what I do :)</p>",
        "id": 528140257,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752172858
    },
    {
        "content": "<p>The intent closure is just the smallest intent containing a set, isn't it?</p>",
        "id": 528140293,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1752172872
    },
    {
        "content": "<p>Wikipedia says as much</p>",
        "id": 528140315,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1752172880
    },
    {
        "content": "<p>Ah, yes.</p>",
        "id": 528140328,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752172885
    },
    {
        "content": "<p>Yes indeed.</p>",
        "id": 528140352,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752172895
    },
    {
        "content": "<p>Sorry, train maths.</p>",
        "id": 528140364,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752172900
    },
    {
        "content": "<p>So that's another thing we should probably define.</p>",
        "id": 528140444,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752172934
    },
    {
        "content": "<p>I don't think it needs a definition. Writing <code>lowerPolar r (upperPolar r s)</code> is straightforward enough.</p>",
        "id": 528140517,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1752172963
    },
    {
        "content": "<p>Yeah I don't disagree.</p>",
        "id": 528140558,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752172978
    },
    {
        "content": "<p>We could add a theorem stating <code>IsIntent t → s ⊆ t → lowerPolar r (upperPolar r s) ⊆ t</code>. Can't be very dificult to prove.</p>",
        "id": 528140655,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1752173022
    },
    {
        "content": "<p>No that must be pretty obvious. But not in this PR!</p>",
        "id": 528140744,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752173051
    },
    {
        "content": "<p>I would be happy with a notation for it by the way.</p>",
        "id": 528140782,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752173066
    },
    {
        "content": "<p>But I can't think of one.</p>",
        "id": 528140802,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752173076
    },
    {
        "content": "<p>It'd be nice if we could use <code>A'</code> notation, but I suspect the inherent ambiguity won't let us</p>",
        "id": 528140904,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1752173113
    },
    {
        "content": "<p>By the way, do I do the <code>fst → intent</code> rename in the <code>intentClosure → lowerPolar</code> PR? Or do I make a separate one?</p>",
        "id": 528141055,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1752173168
    },
    {
        "content": "<p>I feel like there's a case for both options</p>",
        "id": 528141074,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1752173172
    },
    {
        "content": "<p>Yeah, you need to specify the relation. And that's sufficient, technically, because you could instead of lowerPolar and upperPolar use swap r</p>",
        "id": 528141082,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752173174
    },
    {
        "content": "<p>I think do that in the same PR. Let's try and capture all renames of existing things in one PR.</p>",
        "id": 528141181,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752173213
    },
    {
        "content": "<p>oh whoops, the first set is actually the extent! glad i caught that</p>",
        "id": 528142764,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1752173845
    },
    {
        "content": "<p>Yeah!</p>",
        "id": 528142824,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752173872
    },
    {
        "content": "<p>Somehow you expect it to be the other way round</p>",
        "id": 528142845,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752173884
    },
    {
        "content": "<p>The first set is the objects, the extent of things to which the attributes apply. The second set is the intent, the attributes that are intended by the choice of objects</p>",
        "id": 528142978,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752173949
    },
    {
        "content": "<p>That's how I remember</p>",
        "id": 528142982,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752173950
    },
    {
        "content": "<p>Just updated the PR</p>",
        "id": 528145544,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1752175141
    },
    {
        "content": "<p>LGTM :)</p>",
        "id": 528147506,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752176039
    },
    {
        "content": "<p>I think the instances might change a bit. And I'm not sure about those lemmas with \"inf\" in the name as I think we're now spelling that \"min\", etc.? But that can be a future piece of work.</p>",
        "id": 528147604,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752176091
    },
    {
        "content": "<p>Do we perhaps want to make a thread in #PR Reviews for this work? It can stay here but people might not see it in maths.</p>",
        "id": 528147708,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752176133
    },
    {
        "content": "<p>I thought we were still using <code>inf</code> and <code>sup</code> for lattices</p>",
        "id": 528147873,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1752176209
    },
    {
        "content": "<p>Sure, we can make a PR reviews thread</p>",
        "id": 528147894,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1752176223
    },
    {
        "content": "<p>I thought this but I'm not sure. It's certainly not what you get out of simps.</p>",
        "id": 528148219,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752176389
    },
    {
        "content": "<p>We have <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=bot_inf_eq#doc\">docs#bot_inf_eq</a> but no <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=bot_min_eq#doc\">docs#bot_min_eq</a></p>",
        "id": 528148437,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1752176487
    },
    {
        "content": "<p>Fair enough then.</p>",
        "id": 528149374,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752176897
    },
    {
        "content": "<p>Incidentally, the completion of the rationals under this gives the extended reals, right? Is there some similar construction that doesn't give you a bounded order if you already have it but otherwise suffices - i.e. gives a conditionally complete order? </p>\n<p>Also - I think this follows from the order embedding stuff, but: if you have a linear order on the original type, the completed order is also linear, right?</p>",
        "id": 528149684,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752177039
    },
    {
        "content": "<p>Might be a useful instance</p>",
        "id": 528149714,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752177055
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"330967\">Wrenna Robson</span> <a href=\"#narrow/channel/116395-maths/topic/Dedekind-MacNeille.20completion.2E/near/528149684\">said</a>:</p>\n<blockquote>\n<p>Incidentally, the completion of the rationals under this gives the extended reals, right? Is there some similar construction that doesn't give you a bounded order if you already have it but otherwise suffices - i.e. gives a conditionally complete order? </p>\n<p>Also - I think this follows from the order embedding stuff, but: if you have a linear order on the original type, the completed order is also linear, right?</p>\n</blockquote>\n<p>You can just take out the top and bottom elements. That's what you generally do when you define real numbers as Dedekind cuts, you have to explicitly exclude the cases where either set is empty.</p>",
        "id": 528149859,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1752177137
    },
    {
        "content": "<p>Ahhhh</p>",
        "id": 528149873,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752177147
    },
    {
        "content": "<p>And yeah, the completion of a linear order is linear.</p>",
        "id": 528150511,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1752177426
    },
    {
        "content": "<p>Not sure what the easiest way to prove this is</p>",
        "id": 528150790,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1752177541
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"459227\">Violeta Hernández</span> <a href=\"#narrow/channel/116395-maths/topic/Dedekind-MacNeille.20completion/near/528150790\">said</a>:</p>\n<blockquote>\n<p>Not sure what the easiest way to prove this is</p>\n</blockquote>\n<p>try having an order embedding into <code>LowerSet</code> or <code>UpperSet</code>, and pull back <code>le_total</code> from there, is what I would do</p>",
        "id": 528151903,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1752178045
    },
    {
        "content": "<p>Oh of course, the linear order instance on <code>LowerSet</code> is basically exactly what you want</p>",
        "id": 528153884,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1752179031
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">LinearOrder</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IsTotal</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">DedekindCut</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"bp\">·</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">total</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">@</span><span class=\"n\">le_total</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">LowerSet</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">⟨_</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"bp\">.</span><span class=\"n\">isLowerSet_fst</span><span class=\"bp\">⟩</span><span class=\"w\"> </span><span class=\"bp\">⟨_</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"bp\">.</span><span class=\"n\">isLowerSet_fst</span><span class=\"bp\">⟩</span>\n\n<span class=\"kn\">noncomputable</span><span class=\"w\"> </span><span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">LinearOrder</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">LinearOrder</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">DedekindCut</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">classical</span><span class=\"w\"> </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">Lattice</span><span class=\"bp\">.</span><span class=\"n\">toLinearOrder</span><span class=\"w\"> </span><span class=\"bp\">_</span>\n\n<span class=\"kn\">noncomputable</span><span class=\"w\"> </span><span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">LinearOrder</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">CompleteLinearOrder</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">DedekindCut</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"bp\">__</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">instCompleteLattice</span>\n<span class=\"w\">  </span><span class=\"bp\">__</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">instLinearOrder</span>\n<span class=\"w\">  </span><span class=\"bp\">__</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">LinearOrder</span><span class=\"bp\">.</span><span class=\"n\">toBiheytingAlgebra</span>\n</code></pre></div>",
        "id": 528153921,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1752179049
    },
    {
        "content": "<p>Very nice.</p>",
        "id": 528156922,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752180490
    },
    {
        "content": "<p>What does <code>LowerSet</code> correspond to in the concept lingo?</p>",
        "id": 528156950,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752180506
    },
    {
        "content": "<p>(I have actually splurged and bought the Wille book on concept analysis so quite excited for that.)</p>",
        "id": 528157157,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752180624
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"330967\">Wrenna Robson</span> <a href=\"#narrow/channel/116395-maths/topic/Dedekind-MacNeille.20completion/near/528156950\">said</a>:</p>\n<blockquote>\n<p>What does <code>LowerSet</code> correspond to in the concept lingo?</p>\n</blockquote>\n<p>In a preorder <code>α</code>, a complementary pair of a lower set and an upper set corresponds to a <code>Concept α α fun a b =&gt; ¬b ≤ a</code></p>",
        "id": 528167108,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1752186051
    },
    {
        "content": "<p>Furthermore, this correspondence is an order isomorphism</p>",
        "id": 528167327,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1752186199
    },
    {
        "content": "<p>Right, so LowerSet is quite like an extent.</p>",
        "id": 528174118,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752190564
    },
    {
        "content": "<p>Having looked into it, we also have <code>ClosureOperator</code> which is quite closely linked to some of these topics.</p>",
        "id": 528174181,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752190608
    },
    {
        "content": "<p>it's a galois connection, sometimes an insertion, sometimes a coinsertion</p>",
        "id": 528174243,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1752190640
    },
    {
        "content": "<p>Oh: Chapter 7 of \"Introduction to Lattices and Order\" actually has the discussion of the Dedekind–MacNeille completion.</p>",
        "id": 528307780,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752229464
    },
    {
        "content": "<p>Here's the order iso</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">universe</span><span class=\"w\"> </span><span class=\"n\">u</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Preorder</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"o\">{</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">LowerSet</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">×</span><span class=\"w\"> </span><span class=\"n\">UpperSet</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">//</span><span class=\"w\"> </span><span class=\"n\">IsCompl</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"bp\">.</span><span class=\"m\">1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"bp\">.</span><span class=\"m\">2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)}</span><span class=\"w\"> </span><span class=\"bp\">≃</span><span class=\"n\">o</span>\n<span class=\"w\">    </span><span class=\"n\">Concept</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">toFun</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">{</span>\n<span class=\"w\">    </span><span class=\"n\">extent</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"bp\">.</span><span class=\"m\">1</span><span class=\"bp\">.</span><span class=\"m\">1</span>\n<span class=\"w\">    </span><span class=\"n\">intent</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"bp\">.</span><span class=\"m\">1</span><span class=\"bp\">.</span><span class=\"m\">2</span>\n<span class=\"w\">    </span><span class=\"n\">upperPolar_extent</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">      </span><span class=\"n\">ext</span><span class=\"w\"> </span><span class=\"n\">x</span>\n<span class=\"w\">      </span><span class=\"n\">constructor</span>\n<span class=\"w\">      </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">hx</span>\n<span class=\"w\">        </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"bp\">.</span><span class=\"n\">prop</span><span class=\"bp\">.</span><span class=\"n\">compl_eq</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">mem_compl_iff</span><span class=\"o\">]</span>\n<span class=\"w\">        </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">h</span>\n<span class=\"w\">        </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">hx</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"n\">le_rfl</span>\n<span class=\"w\">      </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">hx</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"n\">hy</span><span class=\"w\"> </span><span class=\"n\">hxy</span>\n<span class=\"w\">        </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"bp\">.</span><span class=\"n\">prop</span><span class=\"bp\">.</span><span class=\"n\">disjoint</span><span class=\"bp\">.</span><span class=\"n\">notMem_of_mem_left</span><span class=\"w\"> </span><span class=\"n\">hy</span>\n<span class=\"w\">        </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"bp\">.</span><span class=\"m\">1</span><span class=\"bp\">.</span><span class=\"m\">2</span><span class=\"bp\">.</span><span class=\"n\">upper</span><span class=\"w\"> </span><span class=\"n\">hxy</span><span class=\"w\"> </span><span class=\"n\">hx</span>\n<span class=\"w\">    </span><span class=\"n\">lowerPolar_intent</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">      </span><span class=\"n\">ext</span><span class=\"w\"> </span><span class=\"n\">x</span>\n<span class=\"w\">      </span><span class=\"n\">constructor</span>\n<span class=\"w\">      </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">hx</span>\n<span class=\"w\">        </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">s</span><span class=\"bp\">.</span><span class=\"n\">prop</span><span class=\"bp\">.</span><span class=\"n\">eq_compl</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">mem_compl_iff</span><span class=\"o\">]</span>\n<span class=\"w\">        </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">h</span>\n<span class=\"w\">        </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">hx</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"n\">le_rfl</span>\n<span class=\"w\">      </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">hx</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"n\">hy</span><span class=\"w\"> </span><span class=\"n\">hxy</span>\n<span class=\"w\">        </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"bp\">.</span><span class=\"n\">prop</span><span class=\"bp\">.</span><span class=\"n\">disjoint</span><span class=\"bp\">.</span><span class=\"n\">notMem_of_mem_right</span><span class=\"w\"> </span><span class=\"n\">hy</span>\n<span class=\"w\">        </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"bp\">.</span><span class=\"m\">1</span><span class=\"bp\">.</span><span class=\"m\">1</span><span class=\"bp\">.</span><span class=\"n\">lower</span><span class=\"w\"> </span><span class=\"n\">hxy</span><span class=\"w\"> </span><span class=\"n\">hx</span>\n<span class=\"w\">  </span><span class=\"o\">}</span>\n<span class=\"w\">  </span><span class=\"n\">invFun</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">    </span><span class=\"n\">refine</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"o\">(</span><span class=\"bp\">⟨</span><span class=\"n\">s</span><span class=\"bp\">.</span><span class=\"n\">extent</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">?_⟩</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">s</span><span class=\"bp\">.</span><span class=\"n\">intent</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">?_⟩</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"bp\">?_</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">?_⟩</span>\n<span class=\"w\">    </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"n\">hyx</span><span class=\"w\"> </span><span class=\"n\">hx</span>\n<span class=\"w\">      </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"bp\">.</span><span class=\"n\">lowerPolar_intent</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">hx</span><span class=\"w\"> </span><span class=\"bp\">⊢</span>\n<span class=\"w\">      </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">z</span><span class=\"w\"> </span><span class=\"n\">hz</span><span class=\"w\"> </span><span class=\"n\">hzy</span>\n<span class=\"w\">      </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">hx</span><span class=\"w\"> </span><span class=\"n\">hz</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hzy</span><span class=\"bp\">.</span><span class=\"n\">trans</span><span class=\"w\"> </span><span class=\"n\">hyx</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"n\">hxy</span><span class=\"w\"> </span><span class=\"n\">hx</span>\n<span class=\"w\">      </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"bp\">.</span><span class=\"n\">upperPolar_extent</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">hx</span><span class=\"w\"> </span><span class=\"bp\">⊢</span>\n<span class=\"w\">      </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">z</span><span class=\"w\"> </span><span class=\"n\">hz</span><span class=\"w\"> </span><span class=\"n\">hyz</span>\n<span class=\"w\">      </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">hx</span><span class=\"w\"> </span><span class=\"n\">hz</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hxy</span><span class=\"bp\">.</span><span class=\"n\">trans</span><span class=\"w\"> </span><span class=\"n\">hyz</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">disjoint_iff</span><span class=\"o\">]</span>\n<span class=\"w\">      </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">hxl</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">hxr</span><span class=\"bp\">⟩</span>\n<span class=\"w\">      </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"n\">only</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">LowerSet</span><span class=\"bp\">.</span><span class=\"n\">coe_mk</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">UpperSet</span><span class=\"bp\">.</span><span class=\"n\">coe_mk</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">hxl</span><span class=\"w\"> </span><span class=\"n\">hxr</span>\n<span class=\"w\">      </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"bp\">.</span><span class=\"n\">upperPolar_extent</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">hxr</span>\n<span class=\"w\">      </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">hxr</span><span class=\"w\"> </span><span class=\"n\">hxl</span><span class=\"w\"> </span><span class=\"n\">le_rfl</span>\n<span class=\"w\">    </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">codisjoint_iff_le_sup</span><span class=\"o\">]</span>\n<span class=\"w\">      </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">_</span>\n<span class=\"w\">      </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"n\">only</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">LowerSet</span><span class=\"bp\">.</span><span class=\"n\">coe_mk</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">UpperSet</span><span class=\"bp\">.</span><span class=\"n\">coe_mk</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">sup_eq_union</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">mem_union</span><span class=\"o\">]</span>\n<span class=\"w\">      </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">or_iff_not_imp_left</span><span class=\"o\">]</span>\n<span class=\"w\">      </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">hx</span>\n<span class=\"w\">      </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"bp\">.</span><span class=\"n\">lowerPolar_intent</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">hx</span>\n<span class=\"w\">      </span><span class=\"n\">simp_rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">lowerPolar</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">mem_setOf</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">not_forall</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">not_not</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">hx</span>\n<span class=\"w\">      </span><span class=\"k\">obtain</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">y</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">hy</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">hyx</span><span class=\"bp\">⟩</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">hx</span>\n<span class=\"w\">      </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"bp\">.</span><span class=\"n\">upperPolar_extent</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">hy</span><span class=\"w\"> </span><span class=\"bp\">⊢</span>\n<span class=\"w\">      </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">z</span><span class=\"w\"> </span><span class=\"n\">hz</span><span class=\"w\"> </span><span class=\"n\">hxz</span>\n<span class=\"w\">      </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">hy</span><span class=\"w\"> </span><span class=\"n\">hz</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hyx</span><span class=\"bp\">.</span><span class=\"n\">trans</span><span class=\"w\"> </span><span class=\"n\">hxz</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"n\">left_inv</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">rfl</span>\n<span class=\"w\">  </span><span class=\"n\">right_inv</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">rfl</span>\n<span class=\"w\">  </span><span class=\"n\">map_rel_iff'</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">    </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span>\n<span class=\"w\">    </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"n\">only</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Equiv</span><span class=\"bp\">.</span><span class=\"n\">coe_fn_mk</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">and_self_iff</span><span class=\"bp\">.</span><span class=\"n\">symm</span><span class=\"bp\">.</span><span class=\"n\">trans</span>\n<span class=\"w\">    </span><span class=\"n\">conv_lhs</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">      </span><span class=\"n\">congr</span>\n<span class=\"w\">      </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">Concept</span><span class=\"bp\">.</span><span class=\"n\">extent_subset_extent_iff</span><span class=\"o\">]</span>\n<span class=\"w\">      </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">Concept</span><span class=\"bp\">.</span><span class=\"n\">intent_subset_intent_iff</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">Prod</span><span class=\"bp\">.</span><span class=\"n\">le_def</span><span class=\"o\">]</span>\n</code></pre></div>",
        "id": 528462575,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1752330573
    },
    {
        "content": "<p>Been doing some work on API improvements, started a different branch just to spread out the work a bit.</p>",
        "id": 528813998,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752570788
    },
    {
        "content": "<p>Broadly some analogous types to LowerSet and UpperSet and that.</p>",
        "id": 528814808,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752571106
    },
    {
        "content": "<p>Though I have managed to leave that branch on my home computer</p>",
        "id": 528815389,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1752571299
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"330967\">Wrenna Robson</span> <a href=\"#narrow/channel/116395-maths/topic/Dedekind-MacNeille.20completion/near/528157157\">said</a>:</p>\n<blockquote>\n<p>(I have actually splurged and bought the Wille book on concept analysis so quite excited for that.)</p>\n</blockquote>\n<p>My copy of the Wille book arrived. Gonna try touching concepts again soon.</p>",
        "id": 531817664,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1753875013
    },
    {
        "content": "<p>I do find myself wishing we a) had some concept of an order-reversing map, b) had a clear spelling for \"Galois connection but it reverses the order\".</p>",
        "id": 531817754,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1753875046
    },
    {
        "content": "<p>I know that you can use the dual, of course.</p>",
        "id": 531817869,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1753875075
    },
    {
        "content": "<p>But I don't like this as an option myself. For one thing - is the natural type of order-reversing maps <code>Aᵒᵈ →o B</code> or <code>A →o Bᵒᵈ</code>?</p>",
        "id": 531818086,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1753875132
    },
    {
        "content": "<p>Personally I would like to see a world where we have <code>A →oᵒᵈ B</code> to mean \"order-reversing map from A to B\", and then an appropriate equivalence between <code>A →oᵒᵈ B</code> and <code>Aᵒᵈ →o B</code> and <code>A →o Bᵒᵈ</code>.</p>",
        "id": 531818406,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1753875220
    },
    {
        "content": "<p>But I'm not sure if there's any appetite for this amongst contributors or maintainers.</p>",
        "id": 531818509,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1753875251
    },
    {
        "content": "<p>Might make this its own thread.</p>",
        "id": 531840076,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1753881240
    },
    {
        "content": "<p>The reason we don't have order-reversing maps, not contravariant functors, is <a href=\"https://xkcd.com/927/\">https://xkcd.com/927/</a></p>",
        "id": 531858995,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1753885989
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"330967\">Wrenna Robson</span> <a href=\"#narrow/channel/116395-maths/topic/Dedekind-MacNeille.20completion/near/531840076\">said</a>:</p>\n<blockquote>\n<p>Might make this its own thread.</p>\n</blockquote>\n<p>(linking for future reference: the new thread is at <a class=\"message-link\" href=\"/#narrow/channel/116395-maths/topic/Order-reversing.20maps/near/531841341\">#maths &gt; Order-reversing maps @ 💬</a>)</p>",
        "id": 531864828,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1753887529
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"387244\">Yaël Dillies</span> <a href=\"#narrow/channel/116395-maths/topic/Dedekind-MacNeille.20completion/near/531858995\">said</a>:</p>\n<blockquote>\n<p>The reason we don't have order-reversing maps, not contravariant functors, is <a href=\"https://xkcd.com/927/\">https://xkcd.com/927/</a></p>\n</blockquote>\n<p>The would feel true if we had <em>any</em> standard.</p>",
        "id": 531888761,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1753894757
    },
    {
        "content": "<p>What is the status of your project of constructing the Dedekind-MacNeille completion?</p>",
        "id": 541553293,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1758839203
    },
    {
        "content": "<p>God I can't even remember where we got to. I think I got lost down an order whole. I really need a better way of tracking my Mathlib and Lean projects.</p>",
        "id": 541560758,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758844549
    },
    {
        "content": "<p>I completely forgot about this. Once I was able to use concepts to define surreal gaps i didn't really continue working on this.</p>",
        "id": 541583084,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1758862022
    },
    {
        "content": "<p>There should be an open PR of mine defining an alias for the DM completion, I'll see if I can resurrect it.</p>",
        "id": 541583131,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1758862049
    },
    {
        "content": "<p>Ah yes, <a href=\"https://github.com/leanprover-community/mathlib4/pull/26966\">#26966</a></p>",
        "id": 541585452,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1758863624
    },
    {
        "content": "<p>Note that if you want to work with the DM completion right now, you already can:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">abbrev</span><span class=\"w\"> </span><span class=\"n\">DedekindCut</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Preorder</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Concept</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"bp\">·</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 541585475,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1758863640
    },
    {
        "content": "<p>I think what stopped me was <span class=\"user-mention\" data-user-id=\"330967\">@Wrenna Robson</span> figuring out that some of my definitions could be generalized</p>",
        "id": 541585546,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1758863698
    },
    {
        "content": "<p>Ah! I'm glad I left a comment about this:</p>\n<blockquote>\n<p>As a sidenote, the PR actually got drafted because it turns out this is not the most general definition! In any concept lattice, you can define two maps <code>ofObject</code> and <code>ofAttribute</code>; these just happen to give the same map in this special case.</p>\n</blockquote>",
        "id": 541585915,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1758863966
    },
    {
        "content": "<p>I'm not currently in the middle of any other major projects, so I think I can get this one over the finish line</p>",
        "id": 541586211,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1758864212
    },
    {
        "content": "<p>Happy to review it btw</p>",
        "id": 541588302,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758865564
    },
    {
        "content": "<p>I notice your branch defines <code>ofObjects</code> and <code>ofAttributes</code>, for a set rather than a single element</p>",
        "id": 541588961,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1758866088
    },
    {
        "content": "<p>Do you think it's worth having both the set/element versions, or should we stick to one (or the other?)</p>",
        "id": 541588979,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1758866102
    },
    {
        "content": "<p>I think there was a reason I did that certainly! But I can't remember what it was.</p>",
        "id": 541589195,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758866251
    },
    {
        "content": "<p>I probably need to read the document you sent me in full</p>",
        "id": 541589353,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1758866387
    },
    {
        "content": "<p>I'm sorry ;_;. I really got quite keen for this but then life happened.</p>",
        "id": 541589506,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758866469
    },
    {
        "content": "<p>Ah, don't worry</p>",
        "id": 541589523,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1758866479
    },
    {
        "content": "<p>And I just kept finding stuff that I wanted to change</p>",
        "id": 541589539,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758866487
    },
    {
        "content": "<p>I also am juggling like five Lean projects at any given point</p>",
        "id": 541589541,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1758866489
    },
    {
        "content": "<p>Mood</p>",
        "id": 541591892,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758867934
    },
    {
        "content": "<p>I just tend to get bogged down in reviews or whatever</p>",
        "id": 541591914,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758867947
    },
    {
        "content": "<p>And then never have time to get stuff finished</p>",
        "id": 541591926,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758867956
    },
    {
        "content": "<p>yeah, I get you</p>",
        "id": 541591932,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1758867959
    },
    {
        "content": "<p>A lot of my work is kind of niche and so it often gets trapped in review hell</p>",
        "id": 541591959,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1758867970
    },
    {
        "content": "<p>Just opened <a href=\"https://github.com/leanprover-community/mathlib4/pull/29995\">#29995</a> and <a href=\"https://github.com/leanprover-community/mathlib4/pull/29996\">#29996</a>. The former just adds a few lemmas I needed in the CGT repo, and the latter is just some small stylistic changes to the file.</p>",
        "id": 541608820,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1758874360
    },
    {
        "content": "<p>Ah nvm, I see that the work on your branch actually allows much simpler definitions for the instances! I think I'll replace <a href=\"https://github.com/leanprover-community/mathlib4/pull/29996\">#29996</a> with that.</p>",
        "id": 541613604,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1758875714
    },
    {
        "content": "<p>I'm glad that past me was smart and cool or whatever</p>",
        "id": 541613883,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758875805
    },
    {
        "content": "<p>Specifically, I think I'll replace <a href=\"https://github.com/leanprover-community/mathlib4/pull/29996\">#29996</a> with a PR that defines <code>IsIntent</code> / <code>IsExtent</code> and uses them to golf the definitions of the lattice structure on concepts</p>",
        "id": 541614050,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1758875864
    },
    {
        "content": "<p>(You don't mind me opening the PR and adding you as a coauthor, do you?)</p>",
        "id": 541614080,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1758875879
    },
    {
        "content": "<p>I do not.</p>",
        "id": 541614684,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758876081
    },
    {
        "content": "<p>I think you'll do good work here and I'm enthusiastic about contributing if I can, I just know I can't commit to it right now</p>",
        "id": 541614765,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758876107
    },
    {
        "content": "<p>The new and improved <a href=\"https://github.com/leanprover-community/mathlib4/pull/29996\">#29996</a> is ready!</p>",
        "id": 541618400,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1758877299
    },
    {
        "content": "<p>Your usage of <code>simps!</code> was really clever, I was able to get rid of a huge block of lemmas which are now autogenerated</p>",
        "id": 541618492,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1758877327
    },
    {
        "content": "<p>Oh nice</p>",
        "id": 541620036,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758877823
    },
    {
        "content": "<p>Should I look at <a href=\"https://github.com/leanprover-community/mathlib4/pull/29995\">#29995</a> first?</p>",
        "id": 541620477,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758877966
    },
    {
        "content": "<p>It's quite smaller, so it might be easier to start there yeah</p>",
        "id": 541620534,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1758877990
    },
    {
        "content": "<p>Even smaller now that I realize I can use <code>simps!</code> there too</p>",
        "id": 541620952,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1758878117
    },
    {
        "content": "<p>Just made a commend to that extent! One sec while I finish</p>",
        "id": 541621002,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758878132
    },
    {
        "content": "<p>Some comments added</p>",
        "id": 541622040,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758878473
    },
    {
        "content": "<p>In general I would say that we do NOT here use the same approach that LowerSet and UpperSet use (where they have structure types that essentially correspond to upper and lower sets, which then use the predicate). I think that is fine - I just want to note the difference of approach.</p>",
        "id": 541622902,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758878746
    },
    {
        "content": "<p>BUT having said this</p>",
        "id": 541622981,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758878773
    },
    {
        "content": "<p>if you define an <code>Extent</code> and <code>Intent</code> type, the point is that they are order-isomorphic with the <code>Concept</code> lattice.</p>",
        "id": 541623031,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758878793
    },
    {
        "content": "<p>i.e. I think it is true that a Concept is uniquely determined by its extent and its intent.</p>",
        "id": 541623174,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758878826
    },
    {
        "content": "<p>Do we have a definition of the upper and lower closure? i.e. analogous to <code>upperClosure</code> and <code>lowerClosure</code>?</p>",
        "id": 541624142,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758879115
    },
    {
        "content": "<p>I remember that I was playing around with this, and I am not sure I had found my favoured description.</p>",
        "id": 541624254,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758879146
    },
    {
        "content": "<p>But all these concepts stuff is quite closely tied into closure operators and the like.</p>",
        "id": 541624286,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758879160
    },
    {
        "content": "<p>I don't really think we should define an <code>Extent</code>/<code>Intent</code> type. In an ideal world, I don't believe we would have defined separate <code>UpperSet</code>/<code>LowerSet</code> types either.</p>",
        "id": 541624592,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1758879252
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"330967\">Wrenna Robson</span> <a href=\"#narrow/channel/116395-maths/topic/Dedekind-MacNeille.20completion/near/541624142\">said</a>:</p>\n<blockquote>\n<p>Do we have a definition of the upper and lower closure? i.e. analogous to <code>upperClosure</code> and <code>lowerClosure</code>?</p>\n</blockquote>\n<p>Isn't that just <code>upperBounds</code> and <code>lowerBounds</code>?</p>",
        "id": 541624645,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1758879269
    },
    {
        "content": "<p>So in this context I mean like \"the smallest extent that contains a set\" or whatever</p>",
        "id": 541624809,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758879309
    },
    {
        "content": "<p>I guess these was the <code>ofObjects</code> or <code>ofAttributes</code> thing, right?</p>",
        "id": 541624908,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758879337
    },
    {
        "content": "<p>Like if I have a set <code>s</code>, <code>lowerPolar r (upperPolar r s)</code> is the extent closure of it.</p>",
        "id": 541625093,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758879389
    },
    {
        "content": "<p>That set is an extent.</p>",
        "id": 541625122,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758879399
    },
    {
        "content": "<p>So a set whose extent closure is equal to itself is an extent</p>",
        "id": 541625161,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758879411
    },
    {
        "content": "<p>same (dual) for intents</p>",
        "id": 541625196,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758879417
    },
    {
        "content": "<p>Hm you're right, the upper closure would be <code>upperBounds (lowerBounds s)</code></p>",
        "id": 541625249,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1758879433
    },
    {
        "content": "<p>No, I don't believe we have a definition for that</p>",
        "id": 541625268,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1758879439
    },
    {
        "content": "<p><a href=\"https://en.wikipedia.org/wiki/Closure_operator\">https://en.wikipedia.org/wiki/Closure_operator</a></p>",
        "id": 541625385,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758879459
    },
    {
        "content": "<p>Oh wait I'm sorry I completely misunderstood your question</p>",
        "id": 541625982,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1758879685
    },
    {
        "content": "<p>You're asking whether we should have <code>upperClosure r s = upperPolar r (lowerPolar r s)</code> as a definition?</p>",
        "id": 541626057,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1758879710
    },
    {
        "content": "<p>Yep!</p>",
        "id": 541626095,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758879721
    },
    {
        "content": "<p>btw I agree about the separate types I think.</p>",
        "id": 541626167,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758879741
    },
    {
        "content": "<p>Well you would call it the <code>extentClosure</code> probably.</p>",
        "id": 541626233,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758879768
    },
    {
        "content": "<p>Obviously we had <code>extentClosure</code> previously, but the definition was not correct as we know</p>",
        "id": 541626297,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758879792
    },
    {
        "content": "<p>Like if you look at the \"formal contexts and concepts\" heading here: <a href=\"https://en.wikipedia.org/wiki/Formal_concept_analysis\">https://en.wikipedia.org/wiki/Formal_concept_analysis</a></p>",
        "id": 541626370,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758879817
    },
    {
        "content": "<p>hmm... it's a tough call. I feel like it might be too simple of an object to have, considering it's just the composition of two other functions with extensive API</p>",
        "id": 541626390,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1758879821
    },
    {
        "content": "<p>basically taking two primes is a closure</p>",
        "id": 541626398,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758879824
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"459227\">Violeta Hernández</span> <a href=\"#narrow/channel/116395-maths/topic/Dedekind-MacNeille.20completion/near/541626390\">said</a>:</p>\n<blockquote>\n<p>hmm... it's a tough call. I feel like it might be too simple of an object to have, considering it's just the composition of two other functions with extensive API</p>\n</blockquote>\n<p>I somewhat suspect this. It should probably be an <code>abbrev</code> if it is defined.</p>",
        "id": 541626497,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758879852
    },
    {
        "content": "<p>What about instead having <code>extentClosure</code> be a <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=ClosureOperator#doc\">docs#ClosureOperator</a> on <code>Set α</code>?</p>",
        "id": 541626507,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1758879855
    },
    {
        "content": "<p>I think that would make sense (and it... is that, I think?)</p>",
        "id": 541626592,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758879882
    },
    {
        "content": "<p>(Yes.)</p>",
        "id": 541626610,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758879888
    },
    {
        "content": "<p>We have the GaloisConnection between upperPolar and lowerPolar, right?</p>",
        "id": 541626705,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758879919
    },
    {
        "content": "<p>that way it's not just the composition of these two functions</p>",
        "id": 541626707,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1758879920
    },
    {
        "content": "<p>We do, yes</p>",
        "id": 541626725,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1758879926
    },
    {
        "content": "<p>(Possibly you need to stickl some duals in there IDK).</p>",
        "id": 541626750,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758879933
    },
    {
        "content": "<p>Because I think the closure operator will have a way of being made from the Galois Connection</p>",
        "id": 541626800,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758879949
    },
    {
        "content": "<p><code>GaloisConnection.closureOperator</code></p>",
        "id": 541626876,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758879972
    },
    {
        "content": "<p>It's probably easy enough to construct it directly with the API we already have</p>",
        "id": 541626879,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1758879973
    },
    {
        "content": "<p>Ah, nice</p>",
        "id": 541626910,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1758879983
    },
    {
        "content": "<p>If we're lucky that will even be nicely defeq when applied to the obvious thing.</p>",
        "id": 541627077,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758880043
    },
    {
        "content": "<p>It's a really neat construction really - you go from this set with an arbitrary relation. and use that relation to construct this particular sublattice of the power set (the extents/the intents).</p>",
        "id": 541627209,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758880092
    },
    {
        "content": "<p>which is complete!</p>",
        "id": 541627318,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758880131
    },
    {
        "content": "<p>And then in particular if your original relation was &lt;=... then when your original type embeds into this lattice, that is the completion and everything is respected.</p>",
        "id": 541627515,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758880205
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"330967\">Wrenna Robson</span> <a href=\"#narrow/channel/116395-maths/topic/Dedekind-MacNeille.20completion/near/541626497\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"459227\">Violeta Hernández</span> <a href=\"#narrow/channel/116395-maths/topic/Dedekind-MacNeille.20completion/near/541626390\">said</a>:</p>\n<blockquote>\n<p>hmm... it's a tough call. I feel like it might be too simple of an object to have, considering it's just the composition of two other functions with extensive API</p>\n</blockquote>\n<p>I somewhat suspect this. It should probably be an <code>abbrev</code> if it is defined.</p>\n</blockquote>\n<p>I've learned the hard way that <code>abbrev</code> isn't nearly as nice as you'd want it to be</p>",
        "id": 541628153,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1758880426
    },
    {
        "content": "<p>It certainly isn't a catch-all solution.</p>",
        "id": 541628215,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758880445
    },
    {
        "content": "<p>I just opened <a href=\"https://github.com/leanprover-community/mathlib4/pull/30001\">#30001</a> defining <code>ofObjects</code> and <code>ofAttributes</code>. This depends on <a href=\"https://github.com/leanprover-community/mathlib4/pull/29996\">#29996</a> for some lemmas, though.</p>",
        "id": 541636894,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1758883291
    },
    {
        "content": "<p>I think with that, everything on your branch has a PR now <span aria-label=\"slight smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"slight smile\">:slight_smile:</span></p>",
        "id": 541637160,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1758883384
    },
    {
        "content": "<p>I would change <code>ofObjects_extent</code> to <code>ofObjects_apply_extent</code> maybe (which lets you use simps?)</p>",
        "id": 541637217,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758883398
    },
    {
        "content": "<p>Really though it feels like maybe simps should generate it as a prefix (extent_ofObjects)</p>",
        "id": 541637356,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758883448
    },
    {
        "content": "<p>It's the eternal debate of dot notation</p>",
        "id": 541637410,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1758883463
    },
    {
        "content": "<p>Indeed</p>",
        "id": 541637426,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758883468
    },
    {
        "content": "<p>Did you define that closure operator?</p>",
        "id": 541637458,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758883479
    },
    {
        "content": "<p>I think the majority opinion is that <code>foo.bar</code> should be written down as <code>bar_foo</code>, but unfortunately <code>simps</code> disagrees with us</p>",
        "id": 541637460,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1758883480
    },
    {
        "content": "<p>I added the closure operator to <a href=\"https://github.com/leanprover-community/mathlib4/pull/30001\">#30001</a>, though I don't really use it at all</p>",
        "id": 541637497,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1758883494
    },
    {
        "content": "<p>I note that <code>(ofObjects r s).extent</code> is a shorter spelling of it.</p>",
        "id": 541637500,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758883495
    },
    {
        "content": "<p>I did have some comments on the other ones I can see you've not done? In particular I think it would be good to explictly have both sup and inf when defining the Lattice.</p>",
        "id": 541637697,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758883549
    },
    {
        "content": "<p>i.e. as well as <code>  sup := (· ⊔ ·)</code>, also explictly give <code>inf</code>.</p>",
        "id": 541637761,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758883569
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"330967\">Wrenna Robson</span> <a href=\"#narrow/channel/116395-maths/topic/Dedekind-MacNeille.20completion/near/541637697\">said</a>:</p>\n<blockquote>\n<p>I did have some comments on the other ones I can see you've not done? In particular I think it would be good to explictly have both sup and inf when defining the Lattice.</p>\n</blockquote>\n<p>I did respond to it, I mentioned that the <code>SemilatticeInf</code> instance already takes care of <code>inf</code></p>",
        "id": 541637895,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1758883609
    },
    {
        "content": "<p>No I know.</p>",
        "id": 541637918,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758883617
    },
    {
        "content": "<p>I'm saying you shouldn't leave it to that, it's often good in such cases to expressly define it.</p>",
        "id": 541637958,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758883632
    },
    {
        "content": "<p>So that it is definitely defeq to the thing you want.</p>",
        "id": 541637982,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758883639
    },
    {
        "content": "<p>you mean, add a field <code>inf := (· ⊓ ·)</code>?</p>",
        "id": 541638031,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1758883656
    },
    {
        "content": "<p>Ohh except - right</p>",
        "id": 541638041,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758883659
    },
    {
        "content": "<p>Yes</p>",
        "id": 541638080,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758883671
    },
    {
        "content": "<p>that feels a bit silly, since the inf instance that's inferred is in fact def-eq to the inf instance that's inferred</p>",
        "id": 541638083,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1758883674
    },
    {
        "content": "<p>Doesn't hurt to make it explict</p>",
        "id": 541638122,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758883685
    },
    {
        "content": "<p>Arguably <code>instSemilatticeInfConcept</code> adds very little.</p>",
        "id": 541638146,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758883696
    },
    {
        "content": "<p>It gets all three <code>inf</code> fields from the <code>Lattice</code> instance done at once</p>",
        "id": 541638206,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1758883716
    },
    {
        "content": "<p>As well as giving the <code>PartialOrder</code> instance</p>",
        "id": 541638279,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1758883738
    },
    {
        "content": "<p>Yes but you could just directly define the lattice. It isn't like it only exists under a certain constraint</p>",
        "id": 541638301,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758883747
    },
    {
        "content": "<p>the <code>Lattice</code> instance uses some auxiliary theorems that we need the <code>PartialOrder</code> instance to even state</p>",
        "id": 541638450,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1758883797
    },
    {
        "content": "<p>also not quite sure about <code>theorem ext'</code> - again I just don't like primes! But extExtent and extIntent wouldn't be very ergonomic. It's just that I am not sure about breaking the symmetry</p>",
        "id": 541638495,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758883807
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"459227\">Violeta Hernández</span> <a href=\"#narrow/channel/116395-maths/topic/Dedekind-MacNeille.20completion/near/541638450\">said</a>:</p>\n<blockquote>\n<p>the <code>Lattice</code> instance uses some auxiliary theorems that we need the <code>PartialOrder</code> instance to even state</p>\n</blockquote>\n<p>Ahhh fair</p>",
        "id": 541638518,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758883814
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"330967\">Wrenna Robson</span> <a href=\"#narrow/channel/116395-maths/topic/Dedekind-MacNeille.20completion/near/541638495\">said</a>:</p>\n<blockquote>\n<p>also not quite sure about <code>theorem ext'</code> - again I just don't like primes! But extExtent and extIntent wouldn't be very ergonomic. It's just that I am not sure about breaking the symmetry</p>\n</blockquote>\n<p>Agree, that's why I instead added the docstrings</p>",
        "id": 541638578,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1758883834
    },
    {
        "content": "<p>I would probably use <code>PartialOrder.lift</code> to create the partial order</p>",
        "id": 541638647,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758883855
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"330967\">Wrenna Robson</span> <a href=\"#narrow/channel/116395-maths/topic/Dedekind-MacNeille.20completion/near/541638122\">said</a>:</p>\n<blockquote>\n<p>Doesn't hurt to make it explict</p>\n</blockquote>\n<p>Making the <code>inf</code> field explicit makes it so that the other fields <code>inf_le_left</code>, <code>inf_le_right</code>, <code>le_inf</code> can no longer be inferred</p>",
        "id": 541638796,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1758883894
    },
    {
        "content": "<p>Alas.</p>",
        "id": 541638839,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758883907
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"330967\">Wrenna Robson</span> <a href=\"#narrow/channel/116395-maths/topic/Dedekind-MacNeille.20completion/near/541638647\">said</a>:</p>\n<blockquote>\n<p>I would probably use <code>PartialOrder.lift</code> to create the partial order</p>\n</blockquote>\n<p>Well, but then we'd have to prove those three theorems instead of just getting them for free</p>",
        "id": 541638851,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1758883910
    },
    {
        "content": "<p>No, true...</p>",
        "id": 541638885,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758883918
    },
    {
        "content": "<p>Btw do we have the theorem that c &lt;= d (c d concepts) iff c.extent &lt;= d.extent and iff d.intent &lt;= c.intent?</p>",
        "id": 541639024,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758883950
    },
    {
        "content": "<p>of course</p>",
        "id": 541639084,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1758883969
    },
    {
        "content": "<p>I can't see them</p>",
        "id": 541639119,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758883976
    },
    {
        "content": "<p>but I thought we must do</p>",
        "id": 541639130,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758883980
    },
    {
        "content": "<p>what are they called?</p>",
        "id": 541639143,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758883982
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Concept.extent_subset_extent_iff#doc\">docs#Concept.extent_subset_extent_iff</a></p>",
        "id": 541639144,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1758883983
    },
    {
        "content": "<p>That... doesn't seem to exist?</p>",
        "id": 541639224,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758884010
    },
    {
        "content": "<p>In either file?</p>",
        "id": 541639232,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758884013
    },
    {
        "content": "<p>edited</p>",
        "id": 541639275,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1758884027
    },
    {
        "content": "<p>aha!</p>",
        "id": 541639313,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758884039
    },
    {
        "content": "<p>yes I always forget that we tend to use <code>subset</code> here</p>",
        "id": 541639364,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758884061
    },
    {
        "content": "<p>How are <code>Concept α β r</code> and <code>Concept α β (fun a b =&gt; ¬r a b)</code> related btw? Are they at all?</p>",
        "id": 541639570,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758884141
    },
    {
        "content": "<p>Oh also, where actually is the definition of the Dedekind-MacNeille completion in all this?</p>",
        "id": 541640572,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758884403
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"330967\">Wrenna Robson</span> <a href=\"#narrow/channel/116395-maths/topic/Dedekind-MacNeille.20completion/near/541639570\">said</a>:</p>\n<blockquote>\n<p>How are <code>Concept α β r</code> and <code>Concept α β (fun a b =&gt; ¬r a b)</code> related btw? Are they at all?</p>\n</blockquote>\n<p>If <code>s</code> is an extent in the former, then I think <code>sᶜ</code> should be an extent in the latter? likewise with the intent.</p>",
        "id": 541640770,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1758884461
    },
    {
        "content": "<p>That feels right.</p>",
        "id": 541640834,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758884479
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"330967\">Wrenna Robson</span> <a href=\"#narrow/channel/116395-maths/topic/Dedekind-MacNeille.20completion/near/541640572\">said</a>:</p>\n<blockquote>\n<p>Oh also, where actually is the definition of the Dedekind-MacNeille completion in all this?</p>\n</blockquote>\n<p>That's a completely different PR, which I want to remake using <a href=\"https://github.com/leanprover-community/mathlib4/pull/30001\">#30001</a></p>",
        "id": 541640897,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1758884500
    },
    {
        "content": "<p>Got it.</p>",
        "id": 541640912,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758884507
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"459227\">Violeta Hernández</span> <a href=\"#narrow/channel/116395-maths/topic/Dedekind-MacNeille.20completion/near/541640770\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"330967\">Wrenna Robson</span> <a href=\"#narrow/channel/116395-maths/topic/Dedekind-MacNeille.20completion/near/541639570\">said</a>:</p>\n<blockquote>\n<p>How are <code>Concept α β r</code> and <code>Concept α β (fun a b =&gt; ¬r a b)</code> related btw? Are they at all?</p>\n</blockquote>\n<p>If <code>s</code> is an extent in the former, then I think <code>sᶜ</code> should be an extent in the latter? likewise with the intent.</p>\n</blockquote>\n<p>It basically just occured to me that the link between the Concept for &lt; and the concept for &lt;= might be a combination of this plus the swap one.</p>",
        "id": 541641000,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758884543
    },
    {
        "content": "<p>In the linear order case, maybe</p>",
        "id": 541641106,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1758884586
    },
    {
        "content": "<p>Yes.</p>",
        "id": 541641125,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758884595
    },
    {
        "content": "<p>I might be wrong about this, but I think that in any partial order, the <code>&lt;</code>-concept lattice looks like the Dedekind completion, except that every element in the original order is associated to two elements that cover each other, instead of just one</p>",
        "id": 541641357,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1758884685
    },
    {
        "content": "<p>Hmm interesting.</p>",
        "id": 541641413,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758884707
    },
    {
        "content": "<p>At least that happens in the linear order case</p>",
        "id": 541641437,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1758884716
    },
    {
        "content": "<p>I don't see a reason why it shouldn't happen in the partial order case too</p>",
        "id": 541641477,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1758884729
    },
    {
        "content": "<p>To be more specific, to embed an element of a poset into its Dedekind completion, you use the map <code>fun x ↦ (Iic x, Ici x)</code></p>",
        "id": 541642011,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1758884931
    },
    {
        "content": "<p>but in the <code>&lt;</code>-concept lattice, you can use either of <code>fun x ↦ (Iio x, Ici x)</code> or <code>fun x ↦ (Iic x, Ioi x)</code></p>",
        "id": 541642058,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1758884950
    },
    {
        "content": "<p>Yeah that makes sense.</p>",
        "id": 541642092,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758884967
    },
    {
        "content": "<p>Man that feels the wrong way round</p>",
        "id": 541642112,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758884975
    },
    {
        "content": "<p>like it feels like it should be (Ici x, Iic x)</p>",
        "id": 541642142,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758884991
    },
    {
        "content": "<p>But then you'd have to reverse intent and extent I guess</p>",
        "id": 541642156,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758884997
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"459227\">Violeta Hernández</span> <a href=\"#narrow/channel/116395-maths/topic/Dedekind-MacNeille.20completion/near/541641357\">said</a>:</p>\n<blockquote>\n<p>I might be wrong about this, but I think that in any partial order, the <code>&lt;</code>-concept lattice looks like the Dedekind completion, except that every element in the original order is associated to two elements that cover each other, instead of just one</p>\n</blockquote>\n<p>Remember linear orders are automatically a lot of things</p>",
        "id": 541643092,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758885392
    },
    {
        "content": "<p>I have a four element poset whose <code>&lt;</code>-concept lattice is a three element chain</p>",
        "id": 541643796,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758885649
    },
    {
        "content": "<p>and it's not always true for linear orders either since if it has a top or bot</p>",
        "id": 541644065,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758885743
    },
    {
        "content": "<p>In my work on Hader-Narasimhan theory, I implemented the Dedekind-MacNeille completion DM(X) of any partially ordered set X (the minimal complete lattice containing a given partially ordered set), and showed that</p>\n<ol>\n<li>If the order on X is linear, then the order on DM(X) is also linear.</li>\n<li>The universal property of DM(X): any order embedding X→Y, with Y a complete lattice, factors through the canonical embedding X→DM(X).</li>\n</ol>\n<p>What I do not formalize: The denseness of X in DM(X) (meet-dense, join-dense...)</p>\n<p>I don't know if this is helpful</p>\n<p>Code: <a href=\"https://github.com/YijunYuan/HarderNarasimhan/blob/master/HarderNarasimhan/OrderTheory/DedekindMacNeilleCompletion.lean\">https://github.com/YijunYuan/HarderNarasimhan/blob/master/HarderNarasimhan/OrderTheory/DedekindMacNeilleCompletion.lean</a></p>\n<p>When working on this project, I'm not aware of this thread <span aria-label=\"rolling on the floor laughing\" class=\"emoji emoji-1f923\" role=\"img\" title=\"rolling on the floor laughing\">:rolling_on_the_floor_laughing:</span></p>",
        "id": 541644732,
        "sender_full_name": "Yijun Yuan",
        "timestamp": 1758886006
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 541644842,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1758886049
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> <a href=\"#narrow/channel/116395-maths/topic/Dedekind-MacNeille.20completion/near/541643796\">said</a>:</p>\n<blockquote>\n<p>I have a four element poset whose <code>&lt;</code>-concept lattice is a three element chain</p>\n</blockquote>\n<p>How come?</p>",
        "id": 541645260,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1758886216
    },
    {
        "content": "<p>it just is</p>",
        "id": 541645371,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758886251
    },
    {
        "content": "<p>I calculated it</p>",
        "id": 541645377,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758886254
    },
    {
        "content": "<p>Everything is finite so</p>",
        "id": 541645407,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758886263
    },
    {
        "content": "<p>Ok, let me rephrase, what's your example?</p>",
        "id": 541645414,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1758886265
    },
    {
        "content": "<p>uhm</p>",
        "id": 541645583,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758886337
    },
    {
        "content": "<p>how do I describe this</p>",
        "id": 541645597,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758886342
    },
    {
        "content": "<p>it's the specialization order on the pseudocircle</p>",
        "id": 541645646,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758886363
    },
    {
        "content": "<p>Hey, wait, stop, wait a second</p>",
        "id": 541645685,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1758886376
    },
    {
        "content": "<p>Isn't the Dedekind-MacNeille completion of <code>α</code> literally just <code>LowerSet α</code>?</p>",
        "id": 541645775,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1758886403
    },
    {
        "content": "<p>That seems like it would be isomorphic. But morally all that stuff is kinda a special case of the concept stuff.</p>",
        "id": 541645946,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758886463
    },
    {
        "content": "<p>no</p>",
        "id": 541645950,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758886464
    },
    {
        "content": "<p>it's not</p>",
        "id": 541645982,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758886473
    },
    {
        "content": "<p>ok thank goodness</p>",
        "id": 541646068,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1758886500
    },
    {
        "content": "<p>Oh yeah the implication is the other way round.</p>",
        "id": 541646147,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758886522
    },
    {
        "content": "<p>counting argument the dedekind completion of singleton is singleton but lower sets is two-chain</p>",
        "id": 541646230,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758886547
    },
    {
        "content": "<p>What is two-chain?</p>",
        "id": 541646322,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758886577
    },
    {
        "content": "<p>linear order with two elements</p>",
        "id": 541646354,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758886588
    },
    {
        "content": "<p>Right.</p>",
        "id": 541646369,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758886592
    },
    {
        "content": "<p>Yeah I think <code>LowerSet</code> is not minimal in that sense. You can presumably embed into it?</p>",
        "id": 541646433,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758886620
    },
    {
        "content": "<p>if the order is linear</p>",
        "id": 541646556,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758886657
    },
    {
        "content": "<p>Right</p>",
        "id": 541646576,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758886665
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"330967\">Wrenna Robson</span> <a href=\"#narrow/channel/116395-maths/topic/Dedekind-MacNeille.20completion/near/541645946\">said</a>:</p>\n<blockquote>\n<p>That seems like it would be isomorphic. But morally all that stuff is kinda a special case of the concept stuff.</p>\n</blockquote>\n<p>It is a special case not just morally but literally</p>",
        "id": 541646858,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758886766
    },
    {
        "content": "<p>Well it isn't in terms of how it is defined.</p>",
        "id": 541646900,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758886790
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> <a href=\"#narrow/channel/116395-maths/topic/Dedekind-MacNeille.20completion/near/528462575\">said</a>:</p>\n<blockquote>\n<p>Here's the order iso</p>\n<p><div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">universe</span><span class=\"w\"> </span><span class=\"n\">u</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Preorder</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"o\">{</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">LowerSet</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">×</span><span class=\"w\"> </span><span class=\"n\">UpperSet</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">//</span><span class=\"w\"> </span><span class=\"n\">IsCompl</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"bp\">.</span><span class=\"m\">1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"bp\">.</span><span class=\"m\">2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)}</span><span class=\"w\"> </span><span class=\"bp\">≃</span><span class=\"n\">o</span>\n<span class=\"w\">    </span><span class=\"n\">Concept</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">toFun</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">{</span>\n<span class=\"w\">    </span><span class=\"n\">extent</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"bp\">.</span><span class=\"m\">1</span><span class=\"bp\">.</span><span class=\"m\">1</span>\n<span class=\"w\">    </span><span class=\"n\">intent</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"bp\">.</span><span class=\"m\">1</span><span class=\"bp\">.</span><span class=\"m\">2</span>\n<span class=\"w\">    </span><span class=\"n\">upperPolar_extent</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">      </span><span class=\"n\">ext</span><span class=\"w\"> </span><span class=\"n\">x</span>\n<span class=\"w\">      </span><span class=\"n\">constructor</span>\n<span class=\"w\">      </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">hx</span>\n<span class=\"w\">        </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"bp\">.</span><span class=\"n\">prop</span><span class=\"bp\">.</span><span class=\"n\">compl_eq</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">mem_compl_iff</span><span class=\"o\">]</span>\n<span class=\"w\">        </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">h</span>\n<span class=\"w\">        </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">hx</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"n\">le_rfl</span>\n<span class=\"w\">      </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">hx</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"n\">hy</span><span class=\"w\"> </span><span class=\"n\">hxy</span>\n<span class=\"w\">        </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"bp\">.</span><span class=\"n\">prop</span><span class=\"bp\">.</span><span class=\"n\">disjoint</span><span class=\"bp\">.</span><span class=\"n\">notMem_of_mem_left</span><span class=\"w\"> </span><span class=\"n\">hy</span>\n<span class=\"w\">        </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"bp\">.</span><span class=\"m\">1</span><span class=\"bp\">.</span><span class=\"m\">2</span><span class=\"bp\">.</span><span class=\"n\">upper</span><span class=\"w\"> </span><span class=\"n\">hxy</span><span class=\"w\"> </span><span class=\"n\">hx</span>\n<span class=\"w\">    </span><span class=\"n\">lowerPolar_intent</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">      </span><span class=\"n\">ext</span><span class=\"w\"> </span><span class=\"n\">x</span>\n<span class=\"w\">      </span><span class=\"n\">constructor</span>\n<span class=\"w\">      </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">hx</span>\n<span class=\"w\">        </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">s</span><span class=\"bp\">.</span><span class=\"n\">prop</span><span class=\"bp\">.</span><span class=\"n\">eq_compl</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">mem_compl_iff</span><span class=\"o\">]</span>\n<span class=\"w\">        </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">h</span>\n<span class=\"w\">        </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">hx</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"n\">le_rfl</span>\n<span class=\"w\">      </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">hx</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"n\">hy</span><span class=\"w\"> </span><span class=\"n\">hxy</span>\n<span class=\"w\">        </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"bp\">.</span><span class=\"n\">prop</span><span class=\"bp\">.</span><span class=\"n\">disjoint</span><span class=\"bp\">.</span><span class=\"n\">notMem_of_mem_right</span><span class=\"w\"> </span><span class=\"n\">hy</span>\n<span class=\"w\">        </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"bp\">.</span><span class=\"m\">1</span><span class=\"bp\">.</span><span class=\"m\">1</span><span class=\"bp\">.</span><span class=\"n\">lower</span><span class=\"w\"> </span><span class=\"n\">hxy</span><span class=\"w\"> </span><span class=\"n\">hx</span>\n<span class=\"w\">  </span><span class=\"o\">}</span>\n<span class=\"w\">  </span><span class=\"n\">invFun</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">    </span><span class=\"n\">refine</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"o\">(</span><span class=\"bp\">⟨</span><span class=\"n\">s</span><span class=\"bp\">.</span><span class=\"n\">extent</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">?_⟩</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">s</span><span class=\"bp\">.</span><span class=\"n\">intent</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">?_⟩</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"bp\">?_</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">?_⟩</span>\n<span class=\"w\">    </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"n\">hyx</span><span class=\"w\"> </span><span class=\"n\">hx</span>\n<span class=\"w\">      </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"bp\">.</span><span class=\"n\">lowerPolar_intent</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">hx</span><span class=\"w\"> </span><span class=\"bp\">⊢</span>\n<span class=\"w\">      </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">z</span><span class=\"w\"> </span><span class=\"n\">hz</span><span class=\"w\"> </span><span class=\"n\">hzy</span>\n<span class=\"w\">      </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">hx</span><span class=\"w\"> </span><span class=\"n\">hz</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hzy</span><span class=\"bp\">.</span><span class=\"n\">trans</span><span class=\"w\"> </span><span class=\"n\">hyx</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"n\">hxy</span><span class=\"w\"> </span><span class=\"n\">hx</span>\n<span class=\"w\">      </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"bp\">.</span><span class=\"n\">upperPolar_extent</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">hx</span><span class=\"w\"> </span><span class=\"bp\">⊢</span>\n<span class=\"w\">      </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">z</span><span class=\"w\"> </span><span class=\"n\">hz</span><span class=\"w\"> </span><span class=\"n\">hyz</span>\n<span class=\"w\">      </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">hx</span><span class=\"w\"> </span><span class=\"n\">hz</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hxy</span><span class=\"bp\">.</span><span class=\"n\">trans</span><span class=\"w\"> </span><span class=\"n\">hyz</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">disjoint_iff</span><span class=\"o\">]</span>\n<span class=\"w\">      </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">hxl</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">hxr</span><span class=\"bp\">⟩</span>\n<span class=\"w\">      </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"n\">only</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">LowerSet</span><span class=\"bp\">.</span><span class=\"n\">coe_mk</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">UpperSet</span><span class=\"bp\">.</span><span class=\"n\">coe_mk</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">hxl</span><span class=\"w\"> </span><span class=\"n\">hxr</span>\n<span class=\"w\">      </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"bp\">.</span><span class=\"n\">upperPolar_extent</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">hxr</span>\n<span class=\"w\">      </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">hxr</span><span class=\"w\"> </span><span class=\"n\">hxl</span><span class=\"w\"> </span><span class=\"n\">le_rfl</span>\n<span class=\"w\">    </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">codisjoint_iff_le_sup</span><span class=\"o\">]</span>\n<span class=\"w\">      </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">_</span>\n<span class=\"w\">      </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"n\">only</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">LowerSet</span><span class=\"bp\">.</span><span class=\"n\">coe_mk</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">UpperSet</span><span class=\"bp\">.</span><span class=\"n\">coe_mk</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">sup_eq_union</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">mem_union</span><span class=\"o\">]</span>\n<span class=\"w\">      </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">or_iff_not_imp_left</span><span class=\"o\">]</span>\n<span class=\"w\">      </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">hx</span>\n<span class=\"w\">      </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"bp\">.</span><span class=\"n\">lowerPolar_intent</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">hx</span>\n<span class=\"w\">      </span><span class=\"n\">simp_rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">lowerPolar</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">mem_setOf</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">not_forall</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">not_not</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">hx</span>\n<span class=\"w\">      </span><span class=\"k\">obtain</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">y</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">hy</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">hyx</span><span class=\"bp\">⟩</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">hx</span>\n<span class=\"w\">      </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"bp\">.</span><span class=\"n\">upperPolar_extent</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">hy</span><span class=\"w\"> </span><span class=\"bp\">⊢</span>\n<span class=\"w\">      </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">z</span><span class=\"w\"> </span><span class=\"n\">hz</span><span class=\"w\"> </span><span class=\"n\">hxz</span>\n<span class=\"w\">      </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">hy</span><span class=\"w\"> </span><span class=\"n\">hz</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hyx</span><span class=\"bp\">.</span><span class=\"n\">trans</span><span class=\"w\"> </span><span class=\"n\">hxz</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"n\">left_inv</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">rfl</span>\n<span class=\"w\">  </span><span class=\"n\">right_inv</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">rfl</span>\n<span class=\"w\">  </span><span class=\"n\">map_rel_iff'</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">    </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span>\n<span class=\"w\">    </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"n\">only</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Equiv</span><span class=\"bp\">.</span><span class=\"n\">coe_fn_mk</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">and_self_iff</span><span class=\"bp\">.</span><span class=\"n\">symm</span><span class=\"bp\">.</span><span class=\"n\">trans</span>\n<span class=\"w\">    </span><span class=\"n\">conv_lhs</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">      </span><span class=\"n\">congr</span>\n<span class=\"w\">      </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">Concept</span><span class=\"bp\">.</span><span class=\"n\">extent_subset_extent_iff</span><span class=\"o\">]</span>\n<span class=\"w\">      </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">Concept</span><span class=\"bp\">.</span><span class=\"n\">intent_subset_intent_iff</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">Prod</span><span class=\"bp\">.</span><span class=\"n\">le_def</span><span class=\"o\">]</span>\n</code></pre></div><br>\n</p>\n</blockquote>",
        "id": 541646903,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758886791
    },
    {
        "content": "<p>But yes.</p>",
        "id": 541646905,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758886791
    },
    {
        "content": "<p>Sorry to interrupt,  but what's the theme of the current discussion?</p>",
        "id": 541647136,
        "sender_full_name": "Yijun Yuan",
        "timestamp": 1758886862
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"903800\">@Yijun Yuan</span> Just checked your branch. I think everything in there is covered by my PR (with much simpler proofs)</p>",
        "id": 541647500,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1758886979
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"459227\">Violeta Hernández</span> <a href=\"#narrow/channel/116395-maths/topic/Dedekind-MacNeille.20completion/near/541647500\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"903800\">Yijun Yuan</span> Just checked your branch. I think everything in there is covered by my PR (with much simpler proofs)</p>\n</blockquote>\n<p>Great!</p>",
        "id": 541647592,
        "sender_full_name": "Yijun Yuan",
        "timestamp": 1758887010
    },
    {
        "content": "<p>Then maybe another remark is needed in my preprint <span aria-label=\"rolling on the floor laughing\" class=\"emoji emoji-1f923\" role=\"img\" title=\"rolling on the floor laughing\">:rolling_on_the_floor_laughing:</span></p>",
        "id": 541647654,
        "sender_full_name": "Yijun Yuan",
        "timestamp": 1758887031
    },
    {
        "content": "<p>Just updated <a href=\"https://github.com/leanprover-community/mathlib4/pull/26966\">#26966</a>. This now contains a <code>CompleteLinearOrder (DedekindCut α)</code> instance.</p>",
        "id": 541649403,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1758887641
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"816344\">@Aaron Liu</span> Ah, that explains it. So the modified Dedekind cut construction of surreals is really the <code>⧏</code>-concept lattice, which happens to match the <code>&lt;</code>-concept lattice in the linear order case.</p>",
        "id": 541649908,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1758887807
    },
    {
        "content": "<p>Have you got that <code>DedekindCut.of</code> is surjective on a Complete Lattice?</p>",
        "id": 541649971,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758887826
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"459227\">Violeta Hernández</span> <a href=\"#narrow/channel/116395-maths/topic/Dedekind-MacNeille.20completion/near/541649908\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> Ah, that explains it. So the modified Dedekind cut construction of surreals is really the <code>⧏</code>-concept lattice, which happens to match the <code>&lt;</code>-concept lattice in the linear order case.</p>\n</blockquote>\n<p><em>that's what I said</em></p>",
        "id": 541650131,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758887881
    },
    {
        "content": "<p>Or related things - like, if the underlying type is a <code>CompleteSemilatticeSup</code>, then the sSup operations are compatible (or whatever is true).</p>",
        "id": 541650299,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758887930
    },
    {
        "content": "<p>The <code>&lt;</code>-concept lattice doesn't seem to be anything I know in the case of a non-linear order</p>",
        "id": 541650315,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758887935
    },
    {
        "content": "<p>I guess of( sSup {s}) </p>\n<p><span class=\"user-mention silent\" data-user-id=\"330967\">Wrenna Robson</span> <a href=\"#narrow/channel/116395-maths/topic/Dedekind-MacNeille.20completion/near/541650299\">said</a>:</p>\n<blockquote>\n<p>Or related things - like, if the underlying type is a <code>CompleteSemilatticeSup</code>, then the sSup operations are compatible (or whatever is true).</p>\n</blockquote>\n<p>Maybe this simply follows from it being an order embedding, IDK.</p>",
        "id": 541650702,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758888042
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"330967\">Wrenna Robson</span> <a href=\"#narrow/channel/116395-maths/topic/Dedekind-MacNeille.20completion/near/541649971\">said</a>:</p>\n<blockquote>\n<p>Have you got that <code>DedekindCut.of</code> is surjective on a Complete Lattice?</p>\n</blockquote>\n<p>I can add that, it follows directly from the factor theorem</p>",
        "id": 541650818,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1758888069
    },
    {
        "content": "<p>Surjective order embedding is order iso?</p>",
        "id": 541650843,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758888076
    },
    {
        "content": "<p>Basically \"if sup, inf, bot, top, sSup, sInf have sensible definitions, those definitions are compatible with the completion\", that kind of thing.</p>",
        "id": 541650852,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758888078
    },
    {
        "content": "<p>For me that is kind of the key final property - \"if these things mean </p>\n<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> <a href=\"#narrow/channel/116395-maths/topic/Dedekind-MacNeille.20completion/near/541650843\">said</a>:</p>\n<blockquote>\n<p>Surjective order embedding is order iso?</p>\n</blockquote>\n<p>Yeah I am not sure I can see \"when it's a Complete Lattice already this is an order iso\", though it surely follows!</p>",
        "id": 541651467,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758888235
    },
    {
        "content": "<p>I think of this as \"adjoining\" a sSup and sInf for every set in a way that makes it a complete lattice so if a set already has a sup or inf then it's \"forced\" to be the same as the existing one</p>",
        "id": 541652023,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758888394
    },
    {
        "content": "<p>Aye</p>",
        "id": 541652060,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758888408
    },
    {
        "content": "<p>Probably translates to a statement involving <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=IsGLB#doc\">docs#IsGLB</a> and a statement involving <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=IsLUB#doc\">docs#IsLUB</a></p>",
        "id": 541652168,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758888442
    },
    {
        "content": "<p>You could define a map <code>universal_sSup</code> for instance (bad name) which is basically \"take the sSup of a set into the Dedekind completion\".</p>",
        "id": 541652399,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758888512
    },
    {
        "content": "<p>And one could imagine some map on the Dedekind completion which is essentially the \"go back to the original type if you can (because it is in the range of <code>DedekindCut.of</code>)\".</p>",
        "id": 541652636,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758888588
    },
    {
        "content": "<p>I think this is something like \"the map into the completion is bicontinuous\"</p>",
        "id": 541652722,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758888610
    },
    {
        "content": "<p>Which reminds me: I think <code>DedekindCut.of</code> should be protected.</p>",
        "id": 541652742,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758888618
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=FreeGroup.of#doc\">docs#FreeGroup.of</a> and co. aren't protected so I think we should be fine</p>",
        "id": 541653074,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1758888734
    },
    {
        "content": "<p>Ah OK</p>",
        "id": 541653100,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758888742
    },
    {
        "content": "<p>Just added <code>of</code> as an order isomorphism to the PR</p>",
        "id": 541653702,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1758888912
    },
    {
        "content": "<p>Nice.</p>",
        "id": 541653839,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758888951
    },
    {
        "content": "<p>There's probably more stuff to be done, but I'd rather not be trapped in scope creep.</p>",
        "id": 541654384,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1758889126
    },
    {
        "content": "<p>Aye</p>",
        "id": 541654505,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758889165
    },
    {
        "content": "<p>Question: does <code>ofIso</code> count as a proof of the fundamental theorem of concept lattices?</p>",
        "id": 541654817,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1758889264
    },
    {
        "content": "<p>what's the fundamental theorem</p>",
        "id": 541654931,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758889298
    },
    {
        "content": "<p>I feel like you would need a proof that if something is isomorphic to its Dedekind Cut, it is a complete lattice, but given the dedekind cut is a complete lattice that is surely a one-line proof.</p>",
        "id": 541655097,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758889348
    },
    {
        "content": "<p>As I understand it, the fundamental theorem of concept lattices is \"every concept lattice is a complete lattice, and every complete lattice is isomorphic to a concept lattice\"</p>",
        "id": 541655167,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1758889371
    },
    {
        "content": "<p>we have in fact now proved both</p>",
        "id": 541655286,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1758889417
    },
    {
        "content": "<p>Depends on the statement I think but I would say it's basically there</p>",
        "id": 541655404,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758889457
    },
    {
        "content": "<p><a href=\"/user_uploads/3121/cy4CqMn3h0jCiHRBfigu5DM3/image.png\">image.png</a><br>\nThis seems to be what I'm saying</p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/cy4CqMn3h0jCiHRBfigu5DM3/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"801x194\" src=\"/user_uploads/thumbnail/3121/cy4CqMn3h0jCiHRBfigu5DM3/image.png/840x560.webp\"></a></div>",
        "id": 541655697,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1758889542
    },
    {
        "content": "<p>Aye</p>",
        "id": 541655731,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758889553
    },
    {
        "content": "<p>There is some stuff about infimum-dense and supremum-dense stuff that are in some statements of it I think</p>",
        "id": 541655802,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758889572
    },
    {
        "content": "<p>Theorem 3.9 does seem to be a bit more detailed<br>\n<a href=\"/user_uploads/3121/R1qCmwO71thx-zCuxHUTe84U/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/R1qCmwO71thx-zCuxHUTe84U/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"801x231\" src=\"/user_uploads/thumbnail/3121/R1qCmwO71thx-zCuxHUTe84U/image.png/840x560.webp\"></a></div>",
        "id": 541656149,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1758889682
    },
    {
        "content": "<p>Yes I think you have the \"in particular\".</p>",
        "id": 541656205,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758889700
    },
    {
        "content": "<p>I don't think mathlib contains concept of join-dense and meet-dense so that feels like a future PR</p>",
        "id": 541656265,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758889718
    },
    {
        "content": "<p>Reading the statement from 3.10 I don't really get the impression that the entirety of 3.9 is part of the fundamental theorem</p>",
        "id": 541656410,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1758889757
    },
    {
        "content": "<p>It seems that the fundamental theorem is the characterization of concept lattices, rather</p>",
        "id": 541656435,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1758889767
    },
    {
        "content": "<p>Basically what I'm asking is whether I can get rid of the todo on the module docstring</p>",
        "id": 541656508,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1758889789
    },
    {
        "content": "<p>Right! I feel like morally yes but expect to justify that to reviewers so do make a note.</p>",
        "id": 541656640,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758889822
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"816344\">@Aaron Liu</span> Wait, isn't <code>LowerSet Surreal</code> the same as <code>Cut</code>?</p>",
        "id": 541670744,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1758893803
    },
    {
        "content": "<p>I think that's what your order iso proves</p>",
        "id": 541670770,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1758893811
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"459227\">Violeta Hernández</span> <a href=\"#narrow/channel/116395-maths/topic/Dedekind-MacNeille.20completion/near/541670744\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> Wait, isn't <code>LowerSet Surreal</code> the same as <code>Cut</code>?</p>\n</blockquote>\n<p>Yes???</p>",
        "id": 541673810,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758894780
    },
    {
        "content": "<p>What's the confusion here</p>",
        "id": 541673841,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758894789
    },
    {
        "content": "<p>that I got into concepts for nothing</p>",
        "id": 541673876,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1758894802
    },
    {
        "content": "<p>no it's for the defeqs</p>",
        "id": 541674865,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758895089
    },
    {
        "content": "<p>oh yeah this is in the concept lattice PDF <br>\n<a href=\"/user_uploads/3121/PCy_muf81q2V82Xt5pTD-wr7/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/PCy_muf81q2V82Xt5pTD-wr7/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"826x333\" src=\"/user_uploads/thumbnail/3121/PCy_muf81q2V82Xt5pTD-wr7/image.png/840x560.webp\"></a></div>",
        "id": 541683757,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1758897478
    },
    {
        "content": "<p>neat</p>",
        "id": 541683849,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758897501
    }
]