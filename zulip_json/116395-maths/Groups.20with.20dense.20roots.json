[
    {
        "content": "<p>Is there a nicer description (or a nicer sufficient condition) for compact topological groups with the following properties?</p>\n<ul>\n<li><code>x ↦ x^n</code> is surjective for <code>n &gt; 0</code> (I know about <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=RootableBy#doc\">docs#RootableBy</a>)</li>\n<li>for all <code>n &gt; 1</code>, the set <code>⋃ k, {x | x^{n^k} = 1}</code> is dense</li>\n</ul>\n<p><a href=\"https://en.wikipedia.org/wiki/XY_problem\">#xy</a>: These are sufficient conditions for <code>x ↦ x^n</code>, <code>n &gt; 1</code>, to be ergodic, generalizing <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=AddCircle.ergodic_nsmul#doc\">docs#AddCircle.ergodic_nsmul</a> formalized by <span class=\"user-mention\" data-user-id=\"240862\">@Oliver Nash</span>, see <code>MonoidHom.ergodic_of_dense_iUnion_preimage_one</code> in <a href=\"https://github.com/leanprover-community/mathlib4/pull/16577\">#16577</a></p>",
        "id": 468470810,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1725740907
    },
    {
        "content": "<p>Neat! I have a pretty full day tomorrow but I will have some time to catch up with my review in the evening so I'll look closely then.</p>",
        "id": 468475637,
        "sender_full_name": "Oliver Nash",
        "timestamp": 1725745360
    },
    {
        "content": "<p>There's actually a related lemma I've been meaning to generalise for 18 months or something. Namely: <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=AddCircle.ae_empty_or_univ_of_forall_vadd_ae_eq_self#doc\">docs#AddCircle.ae_empty_or_univ_of_forall_vadd_ae_eq_self</a></p>",
        "id": 468475751,
        "sender_full_name": "Oliver Nash",
        "timestamp": 1725745454
    },
    {
        "content": "<p>The assumption <code>hu₁ : ∀ i, (u i +ᵥ s : Set _) =ᵐ[volume] s</code> is stronger than necessary. One can allow some positive measure for the symmetric difference between <code>u i +ᵥ s</code> and <code>s</code> as long as the measure of this discrepancy tends to zero along quadratically wrt <code>addOrderOf ∘ u</code>.</p>\n<p>(I pestered Sébastien about this in Leiden and he showed me a proof and I've felt guilty ever since that I haven't formalised it.)</p>",
        "id": 468475938,
        "sender_full_name": "Oliver Nash",
        "timestamp": 1725745650
    },
    {
        "content": "<p>For the original (non-generalized) lemma, another proof is: the subgroup generated by these <code>u i</code> is dense, hence <code>aeconst_of_dense_setOf_preimage_vadd_ae</code> from my PR applies.</p>",
        "id": 468476686,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1725746188
    },
    {
        "content": "<p>I think that the generalized lemma can be proved using my machinery too. I'll double check tonight, then post more details.</p>",
        "id": 468481976,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1725748901
    },
    {
        "content": "<p>Here is the proof (in multiplicative notation):</p>\n<ul>\n<li>Due to <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=MeasureTheory.tendsto_measure_symmDiff_preimage_nhds_zero#doc\">docs#MeasureTheory.tendsto_measure_symmDiff_preimage_nhds_zero</a>, <code>μ (((g • ·) ⁻¹' s) ∆ s)</code> is continuous in <code>g</code>.</li>\n<li>Thus it suffices to show that <code>{g | μ (((g • ·) ⁻¹' s) ∆ s) &lt; ε}</code> is dense for all <code>ε &gt; 0</code>.</li>\n<li>Now assume that there exists a sequence <code>g n</code> such that <code>orderOf (g n) → ∞</code> and <code>orderOf (g n) * μ (((g n • ·) ⁻¹' s) ∆ s) → 0</code> as <code>n → ∞</code>.</li>\n<li>Take <code>ε &gt; 0</code> and a nonempty open set <code>U</code>.</li>\n<li>Take <code>n</code> such that <code>orderOf (g n) * μ (((g n • ·) ⁻¹' s) ∆ s) &lt; ε</code>, then take <code>k &lt; orderOf (g n)</code> such that <code>(g n) ^ k ∈ U</code>.</li>\n<li>By triangle inequality, <code>μ ((((g n) ^ k • ·) ⁻¹' s) ∆ s) ≤ orderOf (g n) * μ (((g n • ·) ⁻¹' s) ∆ s) &lt; ε</code>. q.e.d.</li>\n</ul>",
        "id": 468498048,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1725762063
    },
    {
        "content": "<p>Note that the assumption <code>orderOf (g n) * μ (((g n • ·) ⁻¹' s) ∆ s) → 0</code> is weaker than \"tends to zero quadratically\".</p>",
        "id": 468498252,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1725762223
    },
    {
        "content": "<p>BTW, ergodicity of an irrational rotation is formalized in <a href=\"https://github.com/leanprover-community/mathlib4/pull/16603\">#16603</a> (needs a lot of polishing before marking as ready for review).</p>",
        "id": 468585274,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1725808765
    }
]