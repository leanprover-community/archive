[
    {
        "content": "<p>I've been thinking about formalizing evaluation of power series over nonarchimedean rings, following Gouvea and <a href=\"https://kconrad.math.uconn.edu/blurbs/gradnumthy/infseriespadic.pdf\">KConrad's notes</a>. To do this, one needs to set up lemmas about the topology of balls (they're clopen) on nonarchimedean spaces, and lemmas about how finset sums and tsums behave and commute under norms.</p>\n<p>We have several ways of referring to nonarchimedean rings in mathlib currently.</p>\n<ul>\n<li>Topologically nonarchimedean (<a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=NonarchimedeanRing#doc\">docs#NonarchimedeanRing</a>), that is, continuous ring ops and that neighborhoods of 0 contains open additive subgroups; evident that nonarchimedean norm implies this, not obvious (to me) the reverse implication</li>\n<li><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=IsNonarchimedean#doc\">docs#IsNonarchimedean</a>, a proposition on arbitrary functions to the reals, used in <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=NormedField.toValued#doc\">docs#NormedField.toValued</a></li>\n<li><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Valued#doc\">docs#Valued</a>, a typeclass that extends <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=UnformAddGroup#doc\">docs#UnformAddGroup</a></li>\n<li><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=WithIdeal#doc\">docs#WithIdeal</a> (a typeclass) which installs a UniformAddGroup and NonarchimedeanRing via <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Ideal.adicTopology#doc\">docs#Ideal.adicTopology</a></li>\n<li><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=NonarchAddGroupNorm#doc\">docs#NonarchAddGroupNorm</a>, which is a structure bundling the strong triangle inequality etc</li>\n</ul>\n<p>I've also started a PR <a href=\"https://github.com/leanprover-community/mathlib4/pull/14433\">#14433</a> adding <code>IsUltrametricDist</code>, a mixin on (pseudo)metric spaces asserting the strong triangle inequality, and further, a local branch where that mixin on <code>NormedAddCommGroup</code> and friends allows for statements like that the image of Z are norm &lt;= 1.</p>\n<p>There are also papers on <a href=\"https://arxiv.org/abs/2111.09722\">generalizing a nonarchimedean nature to uniform spaces</a> and that under the right assumptions, <a href=\"https://arxiv.org/abs/1010.5987\">topological nonarchimedean groups imply an ultrametric in metrizable spaces</a>.</p>\n<p>Given our general propensity of setting things up in the right generality and having one consistent way to set things up, what is the desired way to specify a type such that something like <a href=\"https://en.wikipedia.org/wiki/Strassmann%27s_theorem\">Strassman's theorem</a> can be stated and proved? Gouvea provides a proof that doesn't require the p-adic Weierstrass preparation theorem.</p>\n<p>Some of these options evidently imply another one, but possibly with the need to set up some general theory linking them. So, if one wants to state and prove that two formal series over a nonarchimedean foo that have the same derivative on a disk of convergence must differ only by a constant on that disk, what should the typeclass on the type be?</p>",
        "id": 451359673,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1720968439
    },
    {
        "content": "<p>/poll Ultrametric / nonarchimedean typeclass<br>\nNonarchimedeanUniformity (mixin on UniformSpace)<br>\nIsUltrametricDist (mixin on Dist)<br>\nNonarchimedeanNormed (mixin on Norm)<br>\nFact (IsNonarchimedean (norm : K -&gt; R))</p>",
        "id": 451359782,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1720968536
    },
    {
        "content": "<p>cc <span class=\"user-mention\" data-user-id=\"300245\">@Filippo A. E. Nuccio</span> , <span class=\"user-mention\" data-user-id=\"406490\">@María Inés de Frutos Fernández</span> , <span class=\"user-mention\" data-user-id=\"695266\">@Mitchell Lee</span> who have done a lot of work setting up the existing classes.</p>",
        "id": 451360171,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1720968642
    },
    {
        "content": "<p>I think IsUltrametricDist is right, but that NonarchimedeanUniformity should also exist.</p>",
        "id": 451362789,
        "sender_full_name": "Mitchell Lee",
        "timestamp": 1720970589
    },
    {
        "content": "<p>Also, I think that a normed group can be nonarchimedean as a uniform space without the norm being nonarchimedean.</p>",
        "id": 451362911,
        "sender_full_name": "Mitchell Lee",
        "timestamp": 1720970715
    },
    {
        "content": "<p>cc <span class=\"user-mention\" data-user-id=\"130609\">@Antoine Chambert-Loir</span> who already did a bunch on evaluation of power series</p>",
        "id": 451420802,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1721025239
    },
    {
        "content": "<p>Yes, <span class=\"user-mention\" data-user-id=\"406490\">@María Inés de Frutos Fernández</span> and I have formalized evaluation maps to complete Hausdorff linearly topologized algebras , following Bourbaki, Algebra, chapter IV, §4. This is not yet PRed to Mathlib but can be found in the GitHub repository for our Divided power project.</p>",
        "id": 451429968,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1721028869
    },
    {
        "content": "<p>Then we do substitution of power series.</p>",
        "id": 451430229,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1721028958
    },
    {
        "content": "<p>(In fact we slightly differ from Bourbaki because we consider a different, possibly stronger, topology on power series which takes into account a given topology on the ring of coefficients. Bourbaki takes the discrete topology.)</p>",
        "id": 451430557,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1721029053
    },
    {
        "content": "<p>Cool! Is it here? <a href=\"https://github.com/AntoineChambert-Loir/divided_powers\">https://github.com/AntoineChambert-Loir/divided_powers</a></p>",
        "id": 451453478,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1721035945
    },
    {
        "content": "<p>Can I work on moving some of the mv_power_series topology to mathlib? And include a specialization to plain power series? Do you have a preference for how to indicate the nonarchimedean nature of the ring of coefficients?</p>",
        "id": 451455622,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1721036583
    },
    {
        "content": "<p>Let me also ping <span class=\"user-mention\" data-user-id=\"318709\">@Sophie Morel</span> who worked on this in Lyon.</p>",
        "id": 451498249,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1721049923
    },
    {
        "content": "<p>Its at <a href=\"https://github.com/AntoineChambert-Loir/DividedPowers4\">https://github.com/AntoineChambert-Loir/DividedPowers4</a><br>\nRegarding moving this to mathlib, why not, if <span class=\"user-mention\" data-user-id=\"406490\">@María Inés de Frutos Fernández</span> agrees.</p>",
        "id": 451498311,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1721049937
    },
    {
        "content": "<p>The topological condition on the target ring that allows for the evaluation is <code>IsLinearTopology</code>.</p>",
        "id": 451499134,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1721050156
    },
    {
        "content": "<p>Regarding defining eval via a topology on the mv power series itself and inducing from polynomial eval, how does that contrast vs showing that they're a completion first? Or ever defining it directly as a tsum of coeff n * x ^ n instead of that being propositionally equal?</p>",
        "id": 451516474,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1721054338
    },
    {
        "content": "<p>Then you're preparing yourself to redo all the classic job of extending partial maps which are uniformly continuous, etc</p>",
        "id": 451517988,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1721054754
    }
]