[
    {
        "content": "<p>I want to start formalizing combinatorial maps (aka hypermaps), as the first step to formalize planar graphs. My question is, should the set of darts be a set of <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=SimpleGraph.Dart#doc\">docs#SimpleGraph.Dart</a>, or is this too limiting, and I should instead define them over general sets first then consider the darts case when defining planar graphs?<br>\nAnother question sometimes authors define hypermaps using 3 permutations, and sometimes using 2 permutations (because the 3rd one could be deduced from the other 2). Which one is better for mathlib?<br>\nUseful linked:<br>\n<a href=\"https://ncatlab.org/nlab/show/combinatorial+map#idea\">definition in nlab</a><br>\n<a href=\"https://github.com/coq-community/fourcolor/blob/c028f9bbed175407c23ee86ef2c70592c1caeaf5/theories/hypermap.v#L111\">definition in coq for the verification of four color theorem</a></p>",
        "id": 462832296,
        "sender_full_name": "Rida Hamadani",
        "timestamp": 1723830628
    },
    {
        "content": "<p>Oops, I meant to send this in mathlib4 channel but zulip changed the channel colors for me, can a moderator please move this topic there?</p>",
        "id": 462832500,
        "sender_full_name": "Rida Hamadani",
        "timestamp": 1723830751
    },
    {
        "content": "<p>I would move this to <a class=\"stream\" data-stream-id=\"116395\" href=\"/#narrow/stream/116395-maths\">#maths</a></p>",
        "id": 462834592,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1723831657
    },
    {
        "content": "<p>I would use the three maps definition.</p>",
        "id": 462835220,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1723831931
    },
    {
        "content": "<p>Also, cc <span class=\"user-mention\" data-user-id=\"373986\">@Kalle Kytölä</span> !</p>",
        "id": 462835228,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1723831936
    },
    {
        "content": "<p>In case it's useful, I did a little bit with combinatorial maps here: <a href=\"https://github.com/kmill/lean-graphs/blob/master/src/maps.lean\">https://github.com/kmill/lean-graphs/blob/master/src/maps.lean</a></p>\n<p>Over in graphs.lean there's also a related definition, of multigraphs. It also has things like the degree-sum formula for them. This is all from before mathlib had any graph theory.</p>",
        "id": 462837107,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1723832840
    },
    {
        "content": "<p>This topic was moved here from <a class=\"stream-topic\" data-stream-id=\"217875\" href=\"/#narrow/stream/217875-Is-there-code-for-X.3F/topic/Combinatorial.20maps\">#Is there code for X? &gt; Combinatorial maps</a> by <span class=\"user-mention silent\" data-user-id=\"110087\">Kim Morrison</span>.</p>",
        "id": 462954325,
        "sender_full_name": "Notification Bot",
        "timestamp": 1723883626
    },
    {
        "content": "<p>/poll What do you think is the best name for combinatorial maps in mathlib?<br>\ncombinatorialMap<br>\ncombinatorialEmbedding<br>\nhypermap<br>\nrotationSystem</p>",
        "id": 463386744,
        "sender_full_name": "Rida Hamadani",
        "timestamp": 1724069859
    },
    {
        "content": "<p>I've followed the definition on nLab and got the following:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">structure</span><span class=\"w\"> </span><span class=\"n\">hypermap</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">D</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Equiv</span><span class=\"bp\">.</span><span class=\"n\">Perm</span><span class=\"w\"> </span><span class=\"n\">D</span>\n<span class=\"w\">  </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Equiv</span><span class=\"bp\">.</span><span class=\"n\">Perm</span><span class=\"w\"> </span><span class=\"n\">D</span>\n<span class=\"w\">  </span><span class=\"n\">φ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Equiv</span><span class=\"bp\">.</span><span class=\"n\">Perm</span><span class=\"w\"> </span><span class=\"n\">D</span>\n<span class=\"w\">  </span><span class=\"n\">transitivity</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">D</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Subgroup</span><span class=\"bp\">.</span><span class=\"n\">closure</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">σ</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">φ</span><span class=\"o\">},</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"bp\">•</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">y</span>\n<span class=\"w\">  </span><span class=\"n\">composition</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">φ</span><span class=\"w\"> </span><span class=\"bp\">∘</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"bp\">∘</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">id</span>\n<span class=\"w\">  </span><span class=\"n\">alpha_involution</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Function</span><span class=\"bp\">.</span><span class=\"n\">Involutive</span><span class=\"w\"> </span><span class=\"n\">α</span>\n<span class=\"w\">  </span><span class=\"n\">alpha_fixedPoints_isEmpty</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IsEmpty</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Function</span><span class=\"bp\">.</span><span class=\"n\">fixedPoints</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>But maybe these are too many conditions? The Wikipedia definition seems more relaxed, what do you think?<br>\nAlso do the last 2 names follow the naming convention?</p>",
        "id": 463532871,
        "sender_full_name": "Rida Hamadani",
        "timestamp": 1724108291
    },
    {
        "content": "<p>I just realized that I can use the definition from Kyle's code.</p>",
        "id": 463658108,
        "sender_full_name": "Rida Hamadani",
        "timestamp": 1724149242
    },
    {
        "content": "<p>No need for alpha in the field names. And involutive instead of involution.</p>",
        "id": 463895540,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1724198369
    },
    {
        "content": "<p>Your <code>composition</code> axiom might be better-stated with <code>Equiv.trans</code> instead of <code>Function.comp</code>; or even with <code>*</code> and <code>1</code>!</p>",
        "id": 463896658,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1724198608
    },
    {
        "content": "<p>I'd be interested to know if the three permutation definition can lead to nice defeqs (like could double dual be defeq to op? I think not, but worth verifying)</p>",
        "id": 463898840,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1724199477
    },
    {
        "content": "<p>Thanks for the notes, I'll keep them in mind!<br>\nI will develop both versions so that we can compare and see which one seems more promising. I will push both versions to a branch after providing a minimal API covering duals, ops and basic lemmas.</p>",
        "id": 463902334,
        "sender_full_name": "Rida Hamadani",
        "timestamp": 1724201393
    },
    {
        "content": "<p>I've ported parts of Kyle's code into lean4 at <a href=\"https://github.com/leanprover-community/mathlib4/pull/16074\">#16074</a>, and under it I wrote the definition that uses 3 permutations, with the goal to try and mimic the lemmas proved above but using this new definition.<br>\nNote that I decided to go with <code>CombinatorialMap</code> instead of <code>hypermap</code>, because it turns out a <code>hypermap</code> is a a more general structure where α is allowed to have fixed points. Perhaps it could be a good idea to define hypermaps and make combinatorial maps extend them, but if this isn't important, I prefer skipping it for now.</p>",
        "id": 464506177,
        "sender_full_name": "Rida Hamadani",
        "timestamp": 1724370302
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"306601\">@Kyle Miller</span> it turns out that using the definition with 3 permutations, double duals defeq to the original map, not the opposite map. I've pushed that to <a href=\"https://github.com/leanprover-community/mathlib4/pull/16074\">#16074</a>. Does this mean that we should continue with the 3 permutations definition?</p>",
        "id": 465055569,
        "sender_full_name": "Rida Hamadani",
        "timestamp": 1724631567
    },
    {
        "content": "<p>I'm struggling to understand how to relate a <code>SimpleGraph</code> to a <code>CombinatorialMap</code>. It seems that in the coq formalization, they just worked with hypermaps, without really relating it to a predefined graph type (maybe they did somewhere and I missed it, I haven't read all the proof of the 4 color theorem). Does anybody have advice on how to approach this?</p>",
        "id": 465305039,
        "sender_full_name": "Rida Hamadani",
        "timestamp": 1724724617
    },
    {
        "content": "<p>Given a combinatorial map, do you know already how to extract the vertex type for the corresponding graph (i.e., IIRC, the collection of cycles of the first permutation)?</p>",
        "id": 465821397,
        "sender_full_name": "Vincent Beffara",
        "timestamp": 1724867114
    },
    {
        "content": "<p>Yes!</p>",
        "id": 465821700,
        "sender_full_name": "Rida Hamadani",
        "timestamp": 1724867182
    },
    {
        "content": "<p>Perhaps I need to formalize <a href=\"https://ncatlab.org/nlab/show/child%27s+drawing\">this</a> in order to be able to represent a <code>SimpleGraph</code> as a hypermap, but the issue here is that it works only for finite graphs?</p>",
        "id": 466110991,
        "sender_full_name": "Rida Hamadani",
        "timestamp": 1724964779
    }
]