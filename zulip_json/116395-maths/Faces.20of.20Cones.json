[
    {
        "content": "<p>Olivia (<span class=\"user-mention\" data-user-id=\"768262\">@ooovi</span> ) and me are implementing faces for <code>PointedCone</code>. Plenty thought went into choosing the right definition. For example, we are now confident that we cannot base our definition on the existing <code>IsExtreme</code> for reasons I can elaborate below. Instead, we will likely go for one of the following: given two pointed cones <code>F</code> and <code>C</code>, <code>F</code> is a face of <code>C</code> if it is contained in <code>C</code> and satisfies either</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">&gt;</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">&gt;</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">•</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">•</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">F</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">F</span>\n</code></pre></div>\n<p>or</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">F</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">F</span>\n</code></pre></div>\n<p>Here we want to ask the community to help decide which of these we should go for.</p>\n<p>First, note that we work over a general ordered <code>Ring</code> (and for most part even over <code>Semiring</code>). The first definition is closer to the textbook definition, but  the second one is obviously more convenient to work with (it is essentially a reverse <code>add_mem</code>).<br>\nVery conveniently, we proved that both definitions are equivalent in many of the usual applications, in particular, if <code>R</code> is a field or an Archimedean ring (such as <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">Z</mi></mrow><annotation encoding=\"application/x-tex\">\\Bbb Z</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6889em;\"></span><span class=\"mord mathbb\">Z</span></span></span></span>). The precise statement is that the definitions are equivalent if and only if the ring satisfies <code>∀ ε &gt; 0, ∃ ω, 1 ≤ ω * ε</code>.</p>\n<p>Even over general rings, both definitions yield all basic properties of faces one expects. Most relevant, faces form a complete lattice, with the cone itself as the top face and the lineality space as the bottom face.</p>\n<p>There is one main difference we noticed between the definitions that we believe should be the basis for making the decision for one or the other. Consider a non-Archimedean ring <code>R</code> obtain from <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">Z</mi></mrow><annotation encoding=\"application/x-tex\">\\Bbb Z</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6889em;\"></span><span class=\"mord mathbb\">Z</span></span></span></span> by adjoining an infinitesimal element <code>ε</code>.  Consider the positive elements of the ring as a <code>PointedCone R R</code>. </p>\n<ul>\n<li>Using the first definition this cone has precisely two faces: top and bot. </li>\n<li>Using the second definition there are infinitely many more faces: the ideals <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>ϵ</mi><mi>n</mi></msup><msub><mi>R</mi><mo>+</mo></msub></mrow><annotation encoding=\"application/x-tex\">\\epsilon^n R_+</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8917em;vertical-align:-0.2083em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">ϵ</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2583em;\"><span style=\"top:-2.55em;margin-left:-0.0077em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mbin mtight\">+</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2083em;\"><span></span></span></span></span></span></span></span></span></span> of positive infinitesimals.</li>\n</ul>\n<p>We are not aware of any \"right\" answer to the question what the faces should be, but perhaps someone cares about this and can give some input.</p>",
        "id": 554130936,
        "sender_full_name": "Martin Winter",
        "timestamp": 1762445224
    },
    {
        "content": "<p>Regarding why we cannot base faces on <code>IsExtreme</code>. A first conceptual/aesthetic reason is that the existing definition of <code>IsExtreme</code> (and same for <code>IsExposed</code>) is an \"affine\" notion rather than \"linear\" one. This means that it uses convex combinations rather than positive combinations (and affine subspaces rather than linear subspaces for <code>IsExposed</code>).  I would make the point that these definition should be stated on an affine space rather than on submodules.</p>\n<p>But leaving this aside, we found the following concrete problem: A valid use case for pointed cones that we envision is the positive integer lattice which is a <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">Z</mi></mrow><annotation encoding=\"application/x-tex\">\\Bbb Z</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6889em;\"></span><span class=\"mord mathbb\">Z</span></span></span></span>-cone. There is a clear understanding of what the faces of that cone should be. However, <code>IsExposed</code> is based on open segments and the open segment <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mn>0</mn><mo separator=\"true\">,</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(0,1)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">)</span></span></span></span> is empty over <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">Z</mi></mrow><annotation encoding=\"application/x-tex\">\\Bbb Z</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6889em;\"></span><span class=\"mord mathbb\">Z</span></span></span></span>. This leads to no subcone of the positive grid being considered a face. The definitions given above do however work correctly.</p>",
        "id": 554133245,
        "sender_full_name": "Martin Winter",
        "timestamp": 1762445788
    },
    {
        "content": "<p>Lastly, we wonder whether anyone knows what these rings <code>R</code> with the property <code>∀ ε &gt; 0, ∃ ω, 1 ≤ ω * ε</code> are, whether there is a name for them or a preexisting way to express them as a typeclass. If we are going for the second definition one might want to use the equivalence to the first definition when it holds. Since both fields and Archimedean rings such as <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">Z</mi></mrow><annotation encoding=\"application/x-tex\">\\Bbb Z</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6889em;\"></span><span class=\"mord mathbb\">Z</span></span></span></span> are valid use cases for our theory, we would need to write all lemmas twice (once for field, once for Archimedean ring). Ideally there is a single typeclass that triggers for both cases. And if not, would it be fine to implement one specifically for this reason?</p>\n<p>I also asked <a href=\"https://mathoverflow.net/q/503555/108884\">on MO</a> about these rings, without much success.</p>",
        "id": 554135179,
        "sender_full_name": "Martin Winter",
        "timestamp": 1762446248
    }
]