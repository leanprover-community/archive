[
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110049\">Mario Carneiro</span> <a href=\"#narrow/channel/116395-maths/topic/Cardinality.20of.20.60ZFSet.60/near/488151601\">said</a>:</p>\n<blockquote>\n<p>(This is unlike the situation for <code>Type u</code>, which you cannot prove is the same cardinality as those three types because <code>Type u</code> is not a quotient, e.g. there could be a very large number of empty types in it and the axioms don't rule this possibility out.)</p>\n</blockquote>\n<p>... Huh.</p>\n<p>So, I think I'm in a scenario where I would like to be able to talk about <code>k</code>-filtered categories, where <code>k</code> is here not a cardinality but rather just a universe level. (This is mainly for convenience, as all of our existing category HasFooOfSize is also written for universe levels.) I got most of the way through proving that <code>k</code>-filtered categories are in fact a well-defined thing that have cocones for <code>k</code>-sized diagrams and generally behave as you'd expect them to as if <code>k</code> was a regular cardinal <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>κ</mi></mrow><annotation encoding=\"application/x-tex\">\\kappa</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">κ</span></span></span></span>, though I hadn't quite gotten to proving the key \"<code>k</code>-filtered colimits commute with <code>k</code>-small limits\" theorem before noticing that <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=CategoryTheory.IsCardinalFiltered#doc\">docs#CategoryTheory.IsCardinalFiltered</a> existed and giving it up under the assumption that it already existed.</p>\n<p>And then I started trying to use it, couldn't find an existing proof that <code>#(Type k)</code> is regular, and ran across this post while trying to figure out if one should exist. So, it sounds like it'd be nontrivial to use <code>IsCardinalFiltered</code> in the case where <code>κ = #(Type k)</code>, because <code>#(Type k)</code> isn't something we can pin down to begin with?</p>",
        "id": 507634862,
        "sender_full_name": "Robert Maxton",
        "timestamp": 1742784081
    },
    {
        "content": "<p>That being the case, would <code>IsKFiltered.{k}</code> be worth separately implementing after all? Assuming that the last proof goes through, but I would imagine it should since whatever size <code>Type k</code> is it's the same size in the filtering condition and the limit...</p>",
        "id": 507634954,
        "sender_full_name": "Robert Maxton",
        "timestamp": 1742784126
    },
    {
        "content": "<p>(Alternatively, someone can toss me a proof of <code>#(Type k).IsRegular</code> and the point becomes moot, but sadly my education in theory of cardinals is completely nonextant :p )</p>",
        "id": 507635038,
        "sender_full_name": "Robert Maxton",
        "timestamp": 1742784185
    },
    {
        "content": "<p>I think this needs some <a href=\"https://en.wikipedia.org/wiki/XY_problem\">#xy</a>. Where is <code>#(Type k)</code> arising? You can certainly make use of a universe level to measure sizes, but the correct way to turn that into a cardinal is to use <code>#Cardinal.{k}</code> rather than <code>#(Type k)</code>.</p>",
        "id": 507636840,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1742785235
    },
    {
        "content": "<p><code>#(Type k)</code> is not necessarily a regular cardinal</p>",
        "id": 507636919,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1742785265
    },
    {
        "content": "<p>the only thing one can prove about it is that it's a cardinal and it's larger than <code>#Cardinal.{k}</code> which is a strong inaccessible</p>",
        "id": 507636984,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1742785303
    },
    {
        "content": "<p>it may well be cofinality omega</p>",
        "id": 507637017,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1742785317
    },
    {
        "content": "<p>it's easy to produce non-regular cardinals above an inaccessible <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>κ</mi></mrow><annotation encoding=\"application/x-tex\">\\kappa</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">κ</span></span></span></span>, just take <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi mathvariant=\"normal\">ℵ</mi><mrow><mi>κ</mi><mo>+</mo><mi>ω</mi></mrow></msub></mrow><annotation encoding=\"application/x-tex\">\\aleph_{\\kappa+\\omega}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9028em;vertical-align:-0.2083em;\"></span><span class=\"mord\"><span class=\"mord\">ℵ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2583em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">κ</span><span class=\"mbin mtight\">+</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">ω</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2083em;\"><span></span></span></span></span></span></span></span></span></span></p>",
        "id": 507637189,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1742785406
    },
    {
        "content": "<p>Wonderful.  :wry:</p>\n<p><a href=\"https://en.wikipedia.org/wiki/XY_problem\">#xy</a> : I'm (hopefully) finishing up my implementation of colimits in <code>Quiv.{v, u}</code> where <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>v</mi><mo mathvariant=\"normal\">≠</mo><mi>u</mi></mrow><annotation encoding=\"application/x-tex\">v \\neq u</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\"><span class=\"mrel\"><span class=\"mord vbox\"><span class=\"thinbox\"><span class=\"rlap\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"inner\"><span class=\"mord\"><span class=\"mrel\"></span></span></span><span class=\"fix\"></span></span></span></span></span><span class=\"mrel\">=</span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">u</span></span></span></span>. <code>Quiv.{v, u}</code> is no longer an entire presheaf category, it's now a full subcategory, so definitionally it's missing some of its colimits. I'm trying to pin down exactly which colimits it's missing; after flailing at trying to make filtered colimits work I'm now pretty sure that I need <code>u</code>-filtered colimits, because among other reasons I have a handwavey argument that says that <code>Quiv.{v, u}</code> can still be implemented as a limit over a diagram of size <code>u</code> (by 'hard-coding' the type of the vertices)</p>",
        "id": 507637315,
        "sender_full_name": "Robert Maxton",
        "timestamp": 1742785468
    },
    {
        "content": "<p>(Also because if I have <code>u</code>-filteredness then I can say that any collection of vertices of size <code>u</code> are identified in the colimit iff they were already identified somewhere in the base of the cocone, and since everything in the base of the cocone is <code>v, u</code>-small by assumption then the colimit also has to be <code>v, u</code> small)</p>",
        "id": 507637424,
        "sender_full_name": "Robert Maxton",
        "timestamp": 1742785551
    },
    {
        "content": "<p>The question is, at what point does a <code>#</code> meet a <code>Type u</code>. When you talk about \"<code>u</code>-small\" with regard to <code>Type u</code> it's not about cardinality, it's about various type families coming from the appropriate universes</p>",
        "id": 507637586,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1742785637
    },
    {
        "content": "<p>Right. The point where <code>#</code> meets <code>Type u</code> is the point where I want to use existing API, specifically <code>IsCardinalFiltered</code>, instead of inventing my own and duplicating a bunch of code. If that's not possible then of course I can just redo everything with universe levels from the start.</p>",
        "id": 507637694,
        "sender_full_name": "Robert Maxton",
        "timestamp": 1742785690
    },
    {
        "content": "<p>How exactly are you using <code>IsCardinalFiltered</code>?</p>",
        "id": 507637716,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1742785713
    },
    {
        "content": "<p>you should certainly be able to use it</p>",
        "id": 507637746,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1742785735
    },
    {
        "content": "<p>I think you are just instantiating it incorrectly</p>",
        "id": 507637773,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1742785755
    },
    {
        "content": "<p>I think you just need to pass in <code>Cardinal.univ</code> to that function</p>",
        "id": 507637877,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1742785811
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Cardinal</span><span class=\"w\"> </span><span class=\"k\">in</span>\n<span class=\"sd\">/--A `k`-filtered category is one which `IsCardinalFiltered C #(Type k)`-/</span>\n<span class=\"kn\">abbrev</span><span class=\"w\"> </span><span class=\"n\">IsKFiltered</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">k</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Category</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">v</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">IsCardinalFiltered</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"o\">(</span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"o\">)</span>\n\n<span class=\"sd\">/--For a `k`-filtered colimit, any `k`-sized collection of vertices in the colimit</span>\n<span class=\"sd\">are identified iff they are already identified in some quiver in the base of the cone.-/</span>\n<span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">kFilteredColimit_iInj</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">k</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">UnivLE</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">w</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"o\">}]</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">J</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">w</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Category</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">w</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"n\">J</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"o\">[</span><span class=\"n\">IsKFiltered</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">k</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"n\">J</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">ι</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"o\">}</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">F</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">J</span><span class=\"w\"> </span><span class=\"bp\">⥤</span><span class=\"w\"> </span><span class=\"n\">WalkingQuiver</span><span class=\"w\"> </span><span class=\"bp\">⥤</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ColimitCocone</span><span class=\"w\"> </span><span class=\"n\">F</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">q₀</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">WalkingQuiver</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"o\">{</span><span class=\"n\">j</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ι</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">J</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ι</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\">  </span><span class=\"n\">F</span><span class=\"bp\">.</span><span class=\"n\">obj</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">|&gt;.</span><span class=\"n\">obj</span><span class=\"w\"> </span><span class=\"n\">q₀</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">i₁</span><span class=\"w\"> </span><span class=\"n\">i₂</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ι</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">c</span><span class=\"bp\">.</span><span class=\"m\">1</span><span class=\"bp\">.</span><span class=\"n\">ι</span><span class=\"bp\">.</span><span class=\"n\">app</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">j</span><span class=\"w\"> </span><span class=\"n\">i₁</span><span class=\"o\">))</span><span class=\"bp\">.</span><span class=\"n\">app</span><span class=\"w\"> </span><span class=\"n\">q₀</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"n\">i₁</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">c</span><span class=\"bp\">.</span><span class=\"m\">1</span><span class=\"bp\">.</span><span class=\"n\">ι</span><span class=\"bp\">.</span><span class=\"n\">app</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">j</span><span class=\"w\"> </span><span class=\"n\">i₂</span><span class=\"o\">))</span><span class=\"bp\">.</span><span class=\"n\">app</span><span class=\"w\"> </span><span class=\"n\">q₀</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"n\">i₂</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"bp\">↔</span>\n<span class=\"w\">      </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">J</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ι</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">j</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">⟶</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">i₁</span><span class=\"w\"> </span><span class=\"n\">i₂</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ι</span><span class=\"o\">),</span>\n<span class=\"w\">        </span><span class=\"o\">(</span><span class=\"n\">F</span><span class=\"bp\">.</span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">i₁</span><span class=\"o\">))</span><span class=\"bp\">.</span><span class=\"n\">app</span><span class=\"w\"> </span><span class=\"n\">q₀</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"n\">i₁</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">F</span><span class=\"bp\">.</span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">i₂</span><span class=\"o\">))</span><span class=\"bp\">.</span><span class=\"n\">app</span><span class=\"w\"> </span><span class=\"n\">q₀</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"n\">i₂</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n</code></pre></div>",
        "id": 507638056,
        "sender_full_name": "Robert Maxton",
        "timestamp": 1742785924
    },
    {
        "content": "<p>If I just pass <code>Cardinal.univ.{k}</code> instead, will that get me the ability to take maxima in <code>J</code> of collections of size <code>k</code>?</p>",
        "id": 507638159,
        "sender_full_name": "Robert Maxton",
        "timestamp": 1742786000
    },
    {
        "content": "<p>yes</p>",
        "id": 507638196,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1742786028
    },
    {
        "content": "<p>mk<br>\nI'll go with that then, thanks</p>",
        "id": 507638213,
        "sender_full_name": "Robert Maxton",
        "timestamp": 1742786040
    },
    {
        "content": "<p>I think there is still some subtlety here though, because the <code>HasCardinalLT (Arrow A) κ</code> assumption is measuring the size of a category of arrows, and so I can imagine that if <code>A</code> is <code>Type u</code> then this will also implicate <code>#(Type u)</code> in some fashion</p>",
        "id": 507638375,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1742786129
    },
    {
        "content": "<p>You don't need to change the definition, but in such a case you would want to show that the category has a small skeleton (or something along those lines), even if it has a lot of redundant objects that push up the raw size of the category</p>",
        "id": 507638466,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1742786177
    },
    {
        "content": "<p>hm<br>\n<em>nods</em> <br>\nAlright, lemme start elaborating this and see where it goes</p>",
        "id": 507638525,
        "sender_full_name": "Robert Maxton",
        "timestamp": 1742786233
    }
]