[
    {
        "content": "<p>While working on decomposition fields and inertia fields, I need to consider rings <code>S</code> such that <code>S ⧸ I</code> is finite for a nonzero ideal <code>I</code>. In the case where <code>S</code> is a finite <code>ℤ</code>-module, we have <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Ideal.finiteQuotientOfFreeOfNeBot#doc\">docs#Ideal.finiteQuotientOfFreeOfNeBot</a>, but there are certainly more cases when this is true. What is the right generality for that? Maybe we need something like <code>Ring.hasFiniteQuotient</code></p>",
        "id": 574463657,
        "sender_full_name": "Xavier Roblot",
        "timestamp": 1771407296
    },
    {
        "content": "<p>You presumably also don't allow <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>I</mi><mo>=</mo><mi>S</mi></mrow><annotation encoding=\"application/x-tex\">I=S</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">I</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span></span></span></span>? But you do allow <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">Z</mi><mi mathvariant=\"normal\">/</mi><mn>4</mn><mi mathvariant=\"double-struck\">Z</mi></mrow><annotation encoding=\"application/x-tex\">\\Z/4\\Z</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathbb\">Z</span><span class=\"mord\">/4</span><span class=\"mord mathbb\">Z</span></span></span></span>? Why can't this just be a condition on the prime ideal you're making the decomposition and inertia field for? It's not just the existence of I you need, presumably?</p>",
        "id": 574484839,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1771414140
    },
    {
        "content": "<p>Do you want every quotient by a nonzero ideal to be finite? (That's the conclusion of the theorem you linked)</p>",
        "id": 574485034,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1771414200
    },
    {
        "content": "<p>Sorry, I meant <code>S ⧸ I</code> is finite for all nonzero ideals <code>I</code></p>",
        "id": 574485268,
        "sender_full_name": "Xavier Roblot",
        "timestamp": 1771414284
    },
    {
        "content": "<p>So probably 1-dimensional, maybe finite rings and S-integers in local and global fields are going to be the main examples</p>",
        "id": 574485449,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1771414344
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"130609\">@Antoine Chambert-Loir</span> I think we discussed if there was a reasonable typeclass for this, but I don't remember our conclusion.</p>",
        "id": 574485529,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1771414372
    },
    {
        "content": "<p><code>class ClassFieldTheoryWorksForMe</code></p>",
        "id": 574485640,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1771414412
    },
    {
        "content": "<p>Oh and of course all fields ;-)</p>",
        "id": 574485735,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1771414447
    },
    {
        "content": "<p>Anyway if this is the literal condition you need I don't see any problem in making it a class.</p>",
        "id": 574485936,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1771414510
    },
    {
        "content": "<p>To be more precise, here is the situation that I have: let <code>R ⊆ S</code> be a extension of rings (in most cases that I consider, they are actually Dedekind domains) such that <code>Module.Finite R S</code> and let <code>P</code> be a maximal ideal of <code>S</code> above the maximal ideal <code>p</code> of <code>R</code>, then I need to know that <code>IsGalois (R ⧸ p) (S ⧸ P)</code>.</p>\n<p>If <code>R ⧸ p</code> and <code>S ⧸ P</code> are finite, this follows directly by <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=GaloisField.instIsGaloisOfFinite#doc\">docs#GaloisField.instIsGaloisOfFinite</a> (and <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Ideal.Quotient.field#doc\">docs#Ideal.Quotient.field</a>).</p>",
        "id": 574502854,
        "sender_full_name": "Xavier Roblot",
        "timestamp": 1771419980
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110038\">@Kevin Buzzard</span> <a href=\"#narrow/channel/116395-maths/topic/Rings.20with.20finite.20quotients/near/574485449\">said</a>:</p>\n<blockquote>\n<p>So probably 1-dimensional, maybe finite rings and S-integers in local and global fields are going to be the main examples</p>\n</blockquote>\n<p>Wait, are you sure 1-dimensional rings have finite quotients? If so, then <code>HasFiniteQuotient</code> is equivalent to <code>DimensionLEOne</code> since the other direction is easily proved.</p>",
        "id": 574527822,
        "sender_full_name": "Xavier Roblot",
        "timestamp": 1771426491
    },
    {
        "content": "<p>I think polynomials over an infinite field definitely fail this condition, but</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">K</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Field</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"o\">]</span>\n\n<span class=\"bp\">#</span><span class=\"n\">synth</span><span class=\"w\"> </span><span class=\"n\">Ring</span><span class=\"bp\">.</span><span class=\"n\">DimensionLEOne</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Polynomial</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 574529190,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1771426786
    },
    {
        "content": "<p>I think that what Kevin means is that an infinite ring has this property then it is 1-dimensional (not sure if this is true without any other assumption, but it looks reasonable).</p>",
        "id": 574544379,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1771430393
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"130384\">Riccardo Brasca</span> <a href=\"#narrow/channel/116395-maths/topic/Rings.20with.20finite.20quotients/near/574544379\">said</a>:</p>\n<blockquote>\n<p>I think that what Kevin means is that an infinite ring has this property then is 1-dimensional (not sure if this is true without any other assumption, but it looks reasonable).</p>\n</blockquote>\n<p>Yes, I proved that. Well, actually I proved that <code>HasFiniteQuotient</code> implies <code>DimensionLEOne</code></p>",
        "id": 574544966,
        "sender_full_name": "Xavier Roblot",
        "timestamp": 1771430536
    },
    {
        "content": "<p>Yeah, the difference between \"a 1-d Dedekind domain\" and \"a 1-d Dedekind domain for which class field theory applies to its field of fractions\" is precisely some kind of finiteness hypothesis which implies, but might not be equivalent to, finiteness of all residue fields.</p>",
        "id": 574545199,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1771430586
    },
    {
        "content": "<p>This is why I think of Dedekind domains as algebra but integers of local and global fields as arithmetic.</p>",
        "id": 574545317,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1771430612
    },
    {
        "content": "<p>I was once hoping it was as simple as \"finite residue fields\" but then someone pointed me to some paper which gave some much more subtle conditions. Here's a question I don't know the answer to: if a 1-d integral domain has finite residue fields, is its class group finite? Maybe a careful reading of the proof will prove this but I'm not sure, I think you might need a bit more.</p>",
        "id": 574545767,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1771430713
    },
    {
        "content": "<p>Oh I guess orders in global fields also satisfy this finiteness hypothesis, i.e. the curve doesn't have to be smooth.</p>",
        "id": 574546090,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1771430783
    },
    {
        "content": "<p>I've asked chatGPT about the finiteness of the class group and it answered \"What I’m less confident about <em>off the top of my head</em> is whether Claborn-style realizations can always be arranged while also forcing <em>all</em> residue fields to be finite; many can, but I don’t want to assert “always” without checking\". I think it's the first time I see an LLM saying \"I don't know\" without trying to cheat. Maybe it's a good sign.</p>",
        "id": 574551314,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1771432055
    },
    {
        "content": "<p>What are Claborn-style realizations?</p>",
        "id": 574551759,
        "sender_full_name": "Xavier Roblot",
        "timestamp": 1771432147
    },
    {
        "content": "<p>But nonconnected Dedekind rings with co-finite maximal ideals won't satisfy the property.</p>",
        "id": 574551870,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1771432176
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"488648\">Xavier Roblot</span> <a href=\"#narrow/channel/116395-maths/topic/Rings.20with.20finite.20quotients/near/574551759\">said</a>:</p>\n<blockquote>\n<p>What are Claborn-style realizations?</p>\n</blockquote>\n<p>The fact that any abelian group is the class group of a Dedekind domain.</p>",
        "id": 574552463,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1771432314
    },
    {
        "content": "<p>On the other hand I found <a href=\"https://mathoverflow.net/questions/42430/two-questions-about-finiteness-of-ideal-classes-in-abstract-number-rings\">this</a> mathoverflow question that is relevant.</p>",
        "id": 574554387,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1771432801
    },
    {
        "content": "<p>In particular is seems there are Dedekind domains with infinite class group and finite residue fields.</p>",
        "id": 574554760,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1771432907
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/35530\">#35530</a></p>",
        "id": 574687624,
        "sender_full_name": "Xavier Roblot",
        "timestamp": 1771494965
    }
]