[
    {
        "content": "<p>Are there idiomatic ways to state the following:</p>\n<ul>\n<li>scheme over a field k</li>\n<li>base change of this scheme to a field extension L of k</li>\n</ul>\n<p>From what I can see, getting a statement is not the problem, I'm just wondering if there is a standard or if one should maybe make a definition.</p>",
        "id": 538380862,
        "sender_full_name": "Bryan Wang",
        "timestamp": 1757406989
    },
    {
        "content": "<p>It depends on the context: The options we use are:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">universe</span><span class=\"w\"> </span><span class=\"n\">u</span>\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">AlgebraicGeometry</span><span class=\"w\"> </span><span class=\"n\">CategoryTheory</span><span class=\"w\"> </span><span class=\"n\">Limits</span>\n<span class=\"kn\">noncomputable</span><span class=\"w\"> </span><span class=\"kn\">section</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Scheme</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">u</span><span class=\"o\">})</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"n\">L</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Field</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Field</span><span class=\"w\"> </span><span class=\"n\">L</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Algebra</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"n\">L</span><span class=\"o\">]</span>\n\n<span class=\"c1\">-- should be the default option</span>\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">⟶</span><span class=\"w\"> </span><span class=\"n\">Spec</span><span class=\"o\">(</span><span class=\"n\">k</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">pullback</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Spec</span><span class=\"bp\">.</span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">CommRingCat</span><span class=\"bp\">.</span><span class=\"n\">ofHom</span><span class=\"w\"> </span><span class=\"bp\">&lt;|</span><span class=\"w\"> </span><span class=\"n\">algebraMap</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"n\">L</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"bp\">⟶</span><span class=\"w\"> </span><span class=\"n\">Spec</span><span class=\"o\">(</span><span class=\"n\">L</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">pullback</span><span class=\"bp\">.</span><span class=\"n\">snd</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">_</span>\n\n<span class=\"c1\">-- sometimes a good choice</span>\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">Over</span><span class=\"w\"> </span><span class=\"n\">Spec</span><span class=\"o\">(</span><span class=\"n\">k</span><span class=\"o\">)]</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">pullback</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">↘</span><span class=\"w\"> </span><span class=\"n\">Spec</span><span class=\"o\">(</span><span class=\"n\">k</span><span class=\"o\">))</span>\n<span class=\"w\">      </span><span class=\"o\">(</span><span class=\"n\">Spec</span><span class=\"bp\">.</span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">CommRingCat</span><span class=\"bp\">.</span><span class=\"n\">ofHom</span><span class=\"w\"> </span><span class=\"bp\">&lt;|</span><span class=\"w\"> </span><span class=\"n\">algebraMap</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"n\">L</span><span class=\"o\">)))</span><span class=\"bp\">.</span><span class=\"n\">Over</span><span class=\"w\"> </span><span class=\"n\">Spec</span><span class=\"o\">(</span><span class=\"n\">L</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"bp\">⟨</span><span class=\"n\">pullback</span><span class=\"bp\">.</span><span class=\"n\">snd</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">_⟩</span>\n\n<span class=\"c1\">-- only if really needed</span>\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Over</span><span class=\"w\"> </span><span class=\"n\">Spec</span><span class=\"o\">(</span><span class=\"n\">k</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Over</span><span class=\"w\"> </span><span class=\"n\">Spec</span><span class=\"o\">(</span><span class=\"n\">L</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">Over</span><span class=\"bp\">.</span><span class=\"n\">pullback</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Spec</span><span class=\"bp\">.</span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">CommRingCat</span><span class=\"bp\">.</span><span class=\"n\">ofHom</span><span class=\"w\"> </span><span class=\"bp\">&lt;|</span><span class=\"w\"> </span><span class=\"n\">algebraMap</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"n\">L</span><span class=\"o\">)))</span><span class=\"bp\">.</span><span class=\"n\">obj</span><span class=\"w\"> </span><span class=\"n\">X</span>\n</code></pre></div>\n<p>I admit this does not look great, but the main problem here is the <code>Spec.map (CommRingCat.ofHom &lt;| algebraMap k L)))</code>. There are two ways to fix this:</p>\n<ul>\n<li>rename <code>CommRingCat.ofHom</code> to <code>CommRingCat.Hom.of</code>, this would turn this into <code>Spec.map (.of &lt;| algebraMap k L)</code>.</li>\n<li>add a notation <code>Spec.map(f)</code> elaborating to <code>Spec.map (CommRingCat.ofHom f)</code>.</li>\n</ul>",
        "id": 538388820,
        "sender_full_name": "Christian Merten",
        "timestamp": 1757409418
    },
    {
        "content": "<p>If you give me a more concrete setting, I can also give a more explicit recommendation.</p>",
        "id": 538389229,
        "sender_full_name": "Christian Merten",
        "timestamp": 1757409545
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"648495\">Christian Merten</span> <a href=\"#narrow/channel/116395-maths/topic/Schemes.20over.20fields.20and.20base.20change/near/538388820\">said</a>:</p>\n<blockquote>\n<ul>\n<li>rename <code>CommRingCat.ofHom</code> to <code>CommRingCat.Hom.of</code></li>\n</ul>\n</blockquote>\n<p><span aria-label=\"+1\" class=\"emoji emoji-1f44d\" role=\"img\" title=\"+1\">:+1:</span></p>",
        "id": 538541840,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1757457039
    },
    {
        "content": "<p>Thank you very much! I was thinking along the lines of e.g. for elliptic curves there is <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=WeierstrassCurve.baseChange#doc\">docs#WeierstrassCurve.baseChange</a>, so perhaps we could have something similar for k-schemes</p>",
        "id": 538550557,
        "sender_full_name": "Bryan Wang",
        "timestamp": 1757464275
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"648495\">@Christian Merten</span> , would you insert these lines in the docstring of the relevant mathlib file? (probably the one definining schemes)</p>",
        "id": 539118865,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1757694856
    },
    {
        "content": "<p>I can do that, but I am wondering about the right place. Should we use the theory documentation section of the website for that? I.e. add a section \"AlgebraicGeometry\" here: <a href=\"https://leanprover-community.github.io/theories\">https://leanprover-community.github.io/theories</a>?</p>",
        "id": 539120494,
        "sender_full_name": "Christian Merten",
        "timestamp": 1757695111
    },
    {
        "content": "<p>That would be great but doesn't forbid the other way. For example, is there a way to link files in the mathlib library to a companion page for the relevant theory?</p>",
        "id": 539121222,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1757695261
    },
    {
        "content": "<p>We can just put a link to the website in the module docstring.</p>",
        "id": 539122264,
        "sender_full_name": "Christian Merten",
        "timestamp": 1757695472
    }
]