[
    {
        "content": "<p>The following came up in reviewing <a href=\"https://github.com/leanprover-community/mathlib4/pull/13349\">#13349</a>. </p>\n<p>Any linear order automatically has a topology. Is there some way of naturally \"promoting\" this topological-space structure to a uniform-space structure in such a way that sets of the form <code>{(a, b) | X &lt; a ‚à® b &lt; Y}</code>, for <code>X &lt; Y</code>, are entourages? [Edited to clarify statement]</p>",
        "id": 507863624,
        "sender_full_name": "David Loeffler",
        "timestamp": 1742845780
    },
    {
        "content": "<p>(If the space has a uniform-group structure that interacts well with the order, then this is true, but it seems strange to require a group structure as a hypothesis when the group operation isn't mentioned in the  statement.)</p>",
        "id": 507864712,
        "sender_full_name": "David Loeffler",
        "timestamp": 1742846164
    },
    {
        "content": "<p>The thing is, taking <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">R</mi></mrow><annotation encoding=\"application/x-tex\">\\mathbb{R}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6889em;\"></span><span class=\"mord mathbb\">R</span></span></span></span> as an example, I don't see how you could refer to all the balls of radius at least <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>Œµ</mi></mrow><annotation encoding=\"application/x-tex\">\\varepsilon</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">Œµ</span></span></span></span> without mentioning the length of an interval (or the distance, of course)</p>",
        "id": 507866725,
        "sender_full_name": "Anatole Dedecker",
        "timestamp": 1742846857
    },
    {
        "content": "<p>Put another way: I don't see how you would imagine a definition of uniform convergence of functions based only on some order structure on the codomain.</p>",
        "id": 507867326,
        "sender_full_name": "Anatole Dedecker",
        "timestamp": 1742847116
    },
    {
        "content": "<p>OK fair enough, probably asking to actually construct the uniformity from the order would be too much. For the PR review, it would be nice to have some sufficient condition (on a uniformity) for this family of sets to be entourages; but maybe there is no condition nicer than that one itself.</p>",
        "id": 507867753,
        "sender_full_name": "David Loeffler",
        "timestamp": 1742847275
    },
    {
        "content": "<p>By the way I realize my message my messages sound too much like \"I've thought about this there's no hope\". I <em>think</em> there's no hope for something like \"a purely order-theoretic construction of the uniform structure on <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">R</mi></mrow><annotation encoding=\"application/x-tex\">\\mathbb{R}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6889em;\"></span><span class=\"mord mathbb\">R</span></span></span></span>\", but there are a bunch of interactions between uniformity/order/groups structure that I don't understand here, even after thinking about them a bit with <span class=\"user-mention\" data-user-id=\"197836\">@Jireh Loreaux</span>, so if anyone has any reference or idea of what could be done (maybe a version of <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=OrderClosedTopology#doc\">docs#OrderClosedTopology</a> ?) that would be wonderful.</p>",
        "id": 507868403,
        "sender_full_name": "Anatole Dedecker",
        "timestamp": 1742847505
    },
    {
        "content": "<p>So I played around with this a bit and convinced myself that if we define </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">class</span><span class=\"w\"> </span><span class=\"n\">OrderClosedUniformity</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Œ±</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">UniformSpace</span><span class=\"w\"> </span><span class=\"n\">Œ±</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">LinearOrder</span><span class=\"w\"> </span><span class=\"n\">Œ±</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">mem_uniformity'</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Œ±</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Œ±</span><span class=\"w\"> </span><span class=\"bp\">√ó</span><span class=\"w\"> </span><span class=\"n\">Œ±</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"m\">1</span><span class=\"w\"> </span><span class=\"bp\">‚à®</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"m\">2</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"bp\">‚àà</span><span class=\"w\"> </span><span class=\"n\">ùì§</span><span class=\"w\"> </span><span class=\"n\">Œ±</span>\n</code></pre></div>\n<p>then we can show that it is satisfied assuming <em>either</em></p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"w\">    </span><span class=\"o\">[</span><span class=\"n\">Group</span><span class=\"w\"> </span><span class=\"n\">Œ±</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">UniformSpace</span><span class=\"w\"> </span><span class=\"n\">Œ±</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">UniformGroup</span><span class=\"w\"> </span><span class=\"n\">Œ±</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">LinearOrder</span><span class=\"w\"> </span><span class=\"n\">Œ±</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">OrderClosedTopology</span><span class=\"w\"> </span><span class=\"n\">Œ±</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"o\">[</span><span class=\"n\">MulLeftMono</span><span class=\"w\"> </span><span class=\"n\">Œ±</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">MulRightMono</span><span class=\"w\"> </span><span class=\"n\">Œ±</span><span class=\"o\">]</span>\n</code></pre></div>\n<p>or its add-group analogue. Any thoughts on whether this is a worthwhile addition to mathlib? Opinions on the name, if so?</p>",
        "id": 507874982,
        "sender_full_name": "David Loeffler",
        "timestamp": 1742849965
    },
    {
        "content": "<p>It would be nice if we had some justification for a class like that beyond: \"it seems to do the trick\". I'm not complaining about your efforts (indeed, thanks!), I'm just hesitant to add some one-off class.</p>",
        "id": 507877847,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1742851041
    },
    {
        "content": "<p>I'm sorry, I wish I had more time to think about this deeply, but I'm very busy at the moment.</p>",
        "id": 507877878,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1742851057
    },
    {
        "content": "<p>Sorry, I've just caught up with this. I'm happy to add this class if people want it, but I sort of agree with Jireh as to the justification. If this is only to fix the <code>to_additive</code> name issue, then I don't think its worth it.</p>",
        "id": 507878664,
        "sender_full_name": "Chris Birkbeck",
        "timestamp": 1742851337
    },
    {
        "content": "<p>Also, thanks for the review and opening this thread!</p>",
        "id": 507879183,
        "sender_full_name": "Chris Birkbeck",
        "timestamp": 1742851559
    },
    {
        "content": "<p>I don't think this has anything to do with <code>to_additive</code>. The naming issue is not a problem.</p>",
        "id": 507879957,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1742851823
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"389019\">@Chris Birkbeck</span> just to check, the original lemma from your PR was mostly intended to be applied to <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">R</mi></mrow><annotation encoding=\"application/x-tex\">\\mathbb{R}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6889em;\"></span><span class=\"mord mathbb\">R</span></span></span></span> anyway, wasn't it?</p>",
        "id": 507880206,
        "sender_full_name": "David Loeffler",
        "timestamp": 1742851925
    },
    {
        "content": "<p>Yes, its only <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">R</mi></mrow><annotation encoding=\"application/x-tex\">\\mathbb{R}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6889em;\"></span><span class=\"mord mathbb\">R</span></span></span></span> that I need it for.</p>",
        "id": 507880325,
        "sender_full_name": "Chris Birkbeck",
        "timestamp": 1742851980
    },
    {
        "content": "<p>OK, maybe this is a rather silly degree of excess generality then.</p>",
        "id": 507880744,
        "sender_full_name": "David Loeffler",
        "timestamp": 1742852149
    },
    {
        "content": "<p>We could just do additive groups and leave it there I guess. I was just being greedy and trying to use to_additive to get it in both cases.</p>",
        "id": 507880934,
        "sender_full_name": "Chris Birkbeck",
        "timestamp": 1742852223
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"481963\">David Loeffler</span> <a href=\"#narrow/channel/116395-maths/topic/Ordered.20uniform.20spaces.3F/near/507863624\">said</a>:</p>\n<blockquote>\n<p>The following came up in reviewing <a href=\"https://github.com/leanprover-community/mathlib4/pull/13349\">#13349</a>. </p>\n<p>Any linear order automatically has a topology. Is there some way of naturally \"promoting\" this topological-space structure to a uniform-space structure in such a way that sets of the form <code>{(a, b) | X &lt; a ‚à® b &lt; Y}</code>, for <code>X &lt; Y</code>, are entourages? [Edited to clarify statement]</p>\n</blockquote>\n<p>Try taking the fine uniformity? It should generate the same topology since linear order topologies are <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=CompletelyRegularSpace#doc\">docs#CompletelyRegularSpace</a>. Not sure if this satisfies your condition though.</p>",
        "id": 507885408,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1742854329
    },
    {
        "content": "<p>The fine uniformity is <code>‚®Ö (u : UniformSpace Œ±) (_ : instTopologicalSpace ‚â§¬†u.toTopologicalSpace), u</code></p>",
        "id": 507885847,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1742854559
    },
    {
        "content": "<p>It's also free in that it's left adjoint to the forgetful functor</p>",
        "id": 507888333,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1742855735
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"816344\">@Aaron Liu</span> Thanks for this interesting suggestion, I didn't know about the fine uniformity.</p>",
        "id": 507943794,
        "sender_full_name": "David Loeffler",
        "timestamp": 1742886977
    },
    {
        "content": "<p>The open interval <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\" lspace=\"0em\" rspace=\"0em\">]</mo><mn>0</mn><mo separator=\"true\">;</mo><mn>1</mn><mo stretchy=\"false\" lspace=\"0em\" rspace=\"0em\">[</mo></mrow><annotation encoding=\"application/x-tex\">\\mathopen]0;1\\mathclose[</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\"><span class=\"mclose\">]</span></span><span class=\"mord\">0</span><span class=\"mpunct\">;</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1</span><span class=\"mclose\"><span class=\"mopen\">[</span></span></span></span></span> is not complete for the standard distance, but it has a strictly increasing homeomorphism to <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"bold\">R</mi></mrow><annotation encoding=\"application/x-tex\">\\mathbf R</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6861em;\"></span><span class=\"mord mathbf\">R</span></span></span></span> which gives him a complete distance. Hence I don't believe there is a reasonable notion.</p>",
        "id": 508903153,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1743238604
    },
    {
        "content": "<p>A similar example exists in Polish spaces: any open subset of a Polish space is Polish, meaning it has a distance which induces the same topology and for which it is complete.</p>",
        "id": 508903191,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1743238653
    }
]