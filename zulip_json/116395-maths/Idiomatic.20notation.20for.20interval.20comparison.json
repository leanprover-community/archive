[
    {
        "content": "<p>Say I have an <a href=\"https://github.com/girving/interval/blob/f7fa6fc315698cc7cbef0c15401803fa5c3535b4/Interval/Interval/Basic.lean#L29\"><code>Interval</code></a> type representing intervals of real numbers. I’d like to define a partial order on <code>Interval</code> where &lt; or &lt;= are true if we know that the approximated real numbers satisfy that comparison. For example, we’d have <code>[0,1] &lt;= [1,2]</code>.</p>\n<p>The problem is that then &lt;= is not reflexive: it is not the case that <code>[a,b] &lt;= [a,b]</code> unless <code>a = b</code>. As far as I can tell, this means I can’t register any instances for this order, even though it has some nice properties (transitivity, antisymmetry).</p>\n<p>What’s the best way to proceed in terms of idiomatic use of mathlib? Should I just define &lt; and &lt;= and prove <code>Interval.le_trans</code> and such without trying to link into the instance hierarchy?</p>",
        "id": 472570107,
        "sender_full_name": "Geoffrey Irving",
        "timestamp": 1727210406
    },
    {
        "content": "<p>You could register the unbundled versions <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=IsTrans#doc\">docs#IsTrans</a> and <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=IsAntisymm#doc\">docs#IsAntisymm</a></p>",
        "id": 472576792,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1727213407
    },
    {
        "content": "<p>Of course, these are significantly less useful.</p>",
        "id": 472576991,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1727213472
    },
    {
        "content": "<p>A simpler idea might be to just make the relation reflexive, and prove theorems about <code>x ≤ y</code> with the hypothesis <code>x ≠ y</code> whenever needed.</p>",
        "id": 472577079,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1727213513
    },
    {
        "content": "<p>So, <code>x &lt; y</code></p>",
        "id": 472577152,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1727213532
    },
    {
        "content": "<p>Yep, both of those make sense. Though it feels like they’re less good than <code>Interval.le_trans</code>, alas, so I may just do the non-instance thing.</p>",
        "id": 472579072,
        "sender_full_name": "Geoffrey Irving",
        "timestamp": 1727214714
    },
    {
        "content": "<p>You should definitely do the instance thing, but also having the non-instance lemmas for convenience is fine too</p>",
        "id": 472581710,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1727216194
    }
]