[
    {
        "content": "<p>Does any know any troubleshooting suggestions for the case that the downloaded mathlib <code>.olean</code>s are just ignored and everytime <code>leanpkg</code> starts to rebuild mathlib instead?</p>",
        "id": 305771457,
        "sender_full_name": "Jakob von Raumer",
        "timestamp": 1666600780
    },
    {
        "content": "<p>Is that in mathlib itself or a project depending on mathlib?</p>",
        "id": 305771555,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1666600809
    },
    {
        "content": "<p>A project depending on it. Freshly cloned and equipped with oleans by <code>leanproject get-mathlib-cache</code></p>",
        "id": 305771706,
        "sender_full_name": "Jakob von Raumer",
        "timestamp": 1666600899
    },
    {
        "content": "<p>Then the simplest thing is probably to get rid of <code>_target</code> and start over without investigating</p>",
        "id": 305772228,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1666601128
    },
    {
        "content": "<p>Did that already <span aria-label=\"confused\" class=\"emoji emoji-1f615\" role=\"img\" title=\"confused\">:confused:</span></p>",
        "id": 305772514,
        "sender_full_name": "Jakob von Raumer",
        "timestamp": 1666601268
    },
    {
        "content": "<p>I'll try changing the mathlib rev</p>",
        "id": 305772786,
        "sender_full_name": "Jakob von Raumer",
        "timestamp": 1666601371
    },
    {
        "content": "<p>That doesn't help either. It seems to believe that the current mathlib is older, for some reason:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"n\">mathlib</span><span class=\"o\">:</span> <span class=\"n\">trying</span> <span class=\"n\">to</span> <span class=\"n\">update</span> <span class=\"n\">_target</span><span class=\"bp\">/</span><span class=\"n\">deps</span><span class=\"bp\">/</span><span class=\"n\">mathlib</span> <span class=\"n\">to</span> <span class=\"n\">revision</span> <span class=\"n\">a923261c6eb9e0b179ccaff22effe33e491a7cbc</span>\n<span class=\"bp\">&gt;</span> <span class=\"n\">git</span> <span class=\"n\">checkout</span> <span class=\"c1\">--detach a923261c6eb9e0b179ccaff22effe33e491a7cbc    # in directory _target/deps/mathlib</span>\n<span class=\"n\">Previous</span> <span class=\"n\">HEAD</span> <span class=\"n\">position</span> <span class=\"n\">was</span> <span class=\"mi\">3</span><span class=\"n\">c0061266f</span> <span class=\"n\">feat</span><span class=\"o\">(</span><span class=\"n\">data</span><span class=\"bp\">/</span><span class=\"o\">{</span><span class=\"n\">seq</span><span class=\"o\">,</span><span class=\"n\">stream</span><span class=\"o\">}):</span> <span class=\"n\">cons_injective2</span> <span class=\"o\">(</span><span class=\"bp\">#</span><span class=\"mi\">15832</span><span class=\"o\">)</span>\n<span class=\"n\">HEAD</span> <span class=\"n\">is</span> <span class=\"n\">now</span> <span class=\"n\">at</span> <span class=\"n\">a923261c6e</span> <span class=\"n\">feat</span><span class=\"o\">(</span><span class=\"n\">data</span><span class=\"bp\">/</span><span class=\"n\">complex</span><span class=\"bp\">/</span><span class=\"n\">module</span><span class=\"o\">):</span> <span class=\"n\">add</span> <span class=\"kd\">instance</span> <span class=\"bp\">`</span><span class=\"n\">complex.distrib_smul</span><span class=\"bp\">`</span> <span class=\"o\">(</span><span class=\"bp\">#</span><span class=\"mi\">17115</span><span class=\"o\">)</span>\n<span class=\"bp\">&gt;</span> <span class=\"n\">lean</span> <span class=\"c1\">--make src</span>\n</code></pre></div>",
        "id": 305773258,
        "sender_full_name": "Jakob von Raumer",
        "timestamp": 1666601547
    },
    {
        "content": "<p>What do you mean by current?</p>",
        "id": 305773387,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1666601610
    },
    {
        "content": "<p>That looks like the update was successful to me</p>",
        "id": 305773518,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1666601652
    },
    {
        "content": "<p>After those lines it proceeds to build mathlib from scratch instead of using the oleans</p>",
        "id": 305774705,
        "sender_full_name": "Jakob von Raumer",
        "timestamp": 1666602111
    },
    {
        "content": "<p>If you run lean from the command line, which file does it build first?</p>",
        "id": 305774871,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1666602177
    },
    {
        "content": "<p>You mean <code>leanpkg build</code>?</p>",
        "id": 305775016,
        "sender_full_name": "Jakob von Raumer",
        "timestamp": 1666602237
    },
    {
        "content": "<p>Or <code>lean --make one_of_your_files</code></p>",
        "id": 305775119,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1666602265
    },
    {
        "content": "<p><code>mathlib/src/tactic/core.lean</code> is the first that gets built</p>",
        "id": 305775186,
        "sender_full_name": "Jakob von Raumer",
        "timestamp": 1666602298
    },
    {
        "content": "<p>For some reason it look like it's skipping the \"get mathlib olean cache\" step. You should get some output</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"n\">Looking</span> <span class=\"n\">for</span> <span class=\"n\">mathlib</span> <span class=\"n\">oleans</span> <span class=\"n\">for</span> <span class=\"n\">a923261c6e</span>\n  <span class=\"n\">locally...</span>\n  <span class=\"n\">remotely...</span>\n  <span class=\"n\">Found</span> <span class=\"n\">remote</span> <span class=\"n\">mathlib</span> <span class=\"n\">oleans</span>\n</code></pre></div>\n<p>Try running <code>pip install -U mathlibtools</code>?</p>",
        "id": 305775256,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1666602326
    },
    {
        "content": "<p>In the worst case, you can do <code>cd _target/deps/mathlib/</code>, make sure you're on the correct commit, <code>leanproject get-cache</code> and <code>cd ../../..</code>. I've done that on old versions of <code>leanproject</code> to work around an issue it had.</p>",
        "id": 305775476,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1666602406
    },
    {
        "content": "<p>What command is the output above from?</p>",
        "id": 305776458,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1666602769
    },
    {
        "content": "<p>In my case it was</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"n\">vandoorn</span><span class=\"bp\">@</span><span class=\"n\">pc93</span><span class=\"bp\">-</span><span class=\"mi\">178</span><span class=\"o\">:</span><span class=\"bp\">~/</span><span class=\"n\">projects</span><span class=\"bp\">/</span><span class=\"n\">sphere</span><span class=\"bp\">-</span><span class=\"n\">eversion</span><span class=\"o\">(</span><span class=\"n\">manifold_proper</span><span class=\"o\">)</span><span class=\"bp\">$</span> <span class=\"n\">leanproject</span> <span class=\"n\">up</span>\n<span class=\"n\">mathlib</span><span class=\"o\">:</span> <span class=\"n\">trying</span> <span class=\"n\">to</span> <span class=\"n\">update</span> <span class=\"n\">_target</span><span class=\"bp\">/</span><span class=\"n\">deps</span><span class=\"bp\">/</span><span class=\"n\">mathlib</span> <span class=\"n\">to</span> <span class=\"n\">revision</span> <span class=\"mi\">3</span><span class=\"n\">b6552e051629f68c08f02b32339a8f53076a016</span>\n<span class=\"bp\">&gt;</span> <span class=\"n\">git</span> <span class=\"n\">checkout</span> <span class=\"c1\">--detach 3b6552e051629f68c08f02b32339a8f53076a016    # in directory _target/deps/mathlib</span>\n<span class=\"n\">Previous</span> <span class=\"n\">HEAD</span> <span class=\"n\">position</span> <span class=\"n\">was</span> <span class=\"mi\">34</span><span class=\"n\">c70db665</span> <span class=\"n\">feat</span><span class=\"o\">(</span><span class=\"n\">geometry</span><span class=\"bp\">/</span><span class=\"n\">euclidean</span><span class=\"bp\">/</span><span class=\"n\">oriented_angle</span><span class=\"o\">):</span> <span class=\"n\">oriented</span> <span class=\"n\">angles</span> <span class=\"n\">and</span> <span class=\"n\">betweenness</span> <span class=\"o\">(</span><span class=\"bp\">#</span><span class=\"mi\">16824</span><span class=\"o\">)</span>\n<span class=\"n\">HEAD</span> <span class=\"n\">is</span> <span class=\"n\">now</span> <span class=\"n\">at</span> <span class=\"mi\">3</span><span class=\"n\">b6552e051</span> <span class=\"n\">chore</span><span class=\"o\">(</span><span class=\"n\">linear_algebra</span><span class=\"bp\">/</span><span class=\"n\">alternating</span><span class=\"o\">):</span> <span class=\"n\">more</span> <span class=\"n\">lemmas</span> <span class=\"n\">about</span> <span class=\"bp\">`</span><span class=\"n\">curry_left</span><span class=\"bp\">`</span> <span class=\"o\">(</span><span class=\"bp\">#</span><span class=\"mi\">14844</span><span class=\"o\">)</span>\n<span class=\"n\">remote</span><span class=\"o\">:</span> <span class=\"n\">Enumerating</span> <span class=\"n\">objects</span><span class=\"o\">:</span> <span class=\"mi\">9954</span><span class=\"o\">,</span> <span class=\"n\">done.</span>\n<span class=\"n\">remote</span><span class=\"o\">:</span> <span class=\"n\">Counting</span> <span class=\"n\">objects</span><span class=\"o\">:</span> <span class=\"mi\">100</span><span class=\"bp\">%</span> <span class=\"o\">(</span><span class=\"mi\">7075</span><span class=\"bp\">/</span><span class=\"mi\">7075</span><span class=\"o\">),</span> <span class=\"n\">done.</span>\n<span class=\"n\">remote</span><span class=\"o\">:</span> <span class=\"n\">Compressing</span> <span class=\"n\">objects</span><span class=\"o\">:</span> <span class=\"mi\">100</span><span class=\"bp\">%</span> <span class=\"o\">(</span><span class=\"mi\">709</span><span class=\"bp\">/</span><span class=\"mi\">709</span><span class=\"o\">),</span> <span class=\"n\">done.</span>\n<span class=\"n\">remote</span><span class=\"o\">:</span> <span class=\"n\">Total</span> <span class=\"mi\">9954</span> <span class=\"o\">(</span><span class=\"n\">delta</span> <span class=\"mi\">6591</span><span class=\"o\">),</span> <span class=\"n\">reused</span> <span class=\"mi\">6701</span> <span class=\"o\">(</span><span class=\"n\">delta</span> <span class=\"mi\">6363</span><span class=\"o\">),</span> <span class=\"n\">pack</span><span class=\"bp\">-</span><span class=\"n\">reused</span> <span class=\"mi\">2879</span>\n<span class=\"n\">Receiving</span> <span class=\"n\">objects</span><span class=\"o\">:</span> <span class=\"mi\">100</span><span class=\"bp\">%</span> <span class=\"o\">(</span><span class=\"mi\">9954</span><span class=\"bp\">/</span><span class=\"mi\">9954</span><span class=\"o\">),</span> <span class=\"mi\">6</span><span class=\"bp\">.</span><span class=\"mi\">02</span> <span class=\"n\">MiB</span> <span class=\"bp\">|</span> <span class=\"mi\">11</span><span class=\"bp\">.</span><span class=\"mi\">90</span> <span class=\"n\">MiB</span><span class=\"bp\">/</span><span class=\"n\">s</span><span class=\"o\">,</span> <span class=\"n\">done.</span>\n<span class=\"n\">Resolving</span> <span class=\"n\">deltas</span><span class=\"o\">:</span> <span class=\"mi\">100</span><span class=\"bp\">%</span> <span class=\"o\">(</span><span class=\"mi\">7861</span><span class=\"bp\">/</span><span class=\"mi\">7861</span><span class=\"o\">),</span> <span class=\"n\">completed</span> <span class=\"k\">with</span> <span class=\"mi\">1754</span> <span class=\"kn\">local</span> <span class=\"n\">objects.</span>\n<span class=\"n\">From</span> <span class=\"n\">github.com</span><span class=\"o\">:</span><span class=\"n\">leanprover</span><span class=\"bp\">-</span><span class=\"n\">community</span><span class=\"bp\">/</span><span class=\"n\">mathlib</span>\n   <span class=\"mi\">40730</span><span class=\"n\">f6ba8..97568f98eb</span>  <span class=\"n\">AD_barrels</span>              <span class=\"bp\">-&gt;</span> <span class=\"n\">origin</span><span class=\"bp\">/</span><span class=\"n\">AD_barrels</span>\n<span class=\"o\">[</span><span class=\"n\">many</span> <span class=\"n\">lines</span> <span class=\"n\">of</span> <span class=\"n\">output</span> <span class=\"n\">omitted</span><span class=\"o\">]</span>\n <span class=\"bp\">*</span> <span class=\"o\">[</span><span class=\"n\">new</span> <span class=\"n\">branch</span><span class=\"o\">]</span>            <span class=\"n\">zorn_Ici</span>                <span class=\"bp\">-&gt;</span> <span class=\"n\">origin</span><span class=\"bp\">/</span><span class=\"n\">zorn_Ici</span>\n<span class=\"n\">configuring</span> <span class=\"n\">sphere_eversion</span> <span class=\"mi\">0</span><span class=\"bp\">.</span><span class=\"mi\">1</span>\n<span class=\"n\">mathlib</span><span class=\"o\">:</span> <span class=\"n\">trying</span> <span class=\"n\">to</span> <span class=\"n\">update</span> <span class=\"n\">_target</span><span class=\"bp\">/</span><span class=\"n\">deps</span><span class=\"bp\">/</span><span class=\"n\">mathlib</span> <span class=\"n\">to</span> <span class=\"n\">revision</span> <span class=\"n\">a923261c6eb9e0b179ccaff22effe33e491a7cbc</span>\n<span class=\"bp\">&gt;</span> <span class=\"n\">git</span> <span class=\"n\">checkout</span> <span class=\"c1\">--detach a923261c6eb9e0b179ccaff22effe33e491a7cbc    # in directory _target/deps/mathlib</span>\n<span class=\"n\">Previous</span> <span class=\"n\">HEAD</span> <span class=\"n\">position</span> <span class=\"n\">was</span> <span class=\"mi\">3</span><span class=\"n\">b6552e051</span> <span class=\"n\">chore</span><span class=\"o\">(</span><span class=\"n\">linear_algebra</span><span class=\"bp\">/</span><span class=\"n\">alternating</span><span class=\"o\">):</span> <span class=\"n\">more</span> <span class=\"n\">lemmas</span> <span class=\"n\">about</span> <span class=\"bp\">`</span><span class=\"n\">curry_left</span><span class=\"bp\">`</span> <span class=\"o\">(</span><span class=\"bp\">#</span><span class=\"mi\">14844</span><span class=\"o\">)</span>\n<span class=\"n\">HEAD</span> <span class=\"n\">is</span> <span class=\"n\">now</span> <span class=\"n\">at</span> <span class=\"n\">a923261c6e</span> <span class=\"n\">feat</span><span class=\"o\">(</span><span class=\"n\">data</span><span class=\"bp\">/</span><span class=\"n\">complex</span><span class=\"bp\">/</span><span class=\"n\">module</span><span class=\"o\">):</span> <span class=\"n\">add</span> <span class=\"kd\">instance</span> <span class=\"bp\">`</span><span class=\"n\">complex.distrib_smul</span><span class=\"bp\">`</span> <span class=\"o\">(</span><span class=\"bp\">#</span><span class=\"mi\">17115</span><span class=\"o\">)</span>\n<span class=\"n\">Looking</span> <span class=\"n\">for</span> <span class=\"n\">mathlib</span> <span class=\"n\">oleans</span> <span class=\"n\">for</span> <span class=\"n\">a923261c6e</span>\n  <span class=\"n\">locally...</span>\n  <span class=\"n\">remotely...</span>\n  <span class=\"n\">Found</span> <span class=\"n\">remote</span> <span class=\"n\">mathlib</span> <span class=\"n\">oleans</span>\n<span class=\"n\">Located</span> <span class=\"n\">matching</span> <span class=\"n\">cache</span>\n  <span class=\"n\">a923261c6e</span><span class=\"o\">:</span> <span class=\"mi\">100</span><span class=\"bp\">%|███████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████|</span> <span class=\"mi\">80</span><span class=\"bp\">.</span><span class=\"mi\">6</span><span class=\"n\">M</span><span class=\"bp\">/</span><span class=\"mi\">80</span><span class=\"bp\">.</span><span class=\"mi\">6</span><span class=\"n\">M</span> <span class=\"o\">[</span><span class=\"mi\">00</span><span class=\"o\">:</span><span class=\"mi\">18</span><span class=\"bp\">&lt;</span><span class=\"mi\">00</span><span class=\"o\">:</span><span class=\"mi\">00</span><span class=\"o\">,</span> <span class=\"mi\">4</span><span class=\"bp\">.</span><span class=\"mi\">67</span><span class=\"n\">MB</span><span class=\"bp\">/</span><span class=\"n\">s</span><span class=\"o\">]</span>\n<span class=\"n\">Applying</span> <span class=\"n\">cache</span>\n  <span class=\"n\">files</span> <span class=\"n\">extracted</span><span class=\"o\">:</span> <span class=\"mi\">2783</span> <span class=\"o\">[</span><span class=\"mi\">00</span><span class=\"o\">:</span><span class=\"mi\">05</span><span class=\"o\">,</span> <span class=\"mi\">519</span><span class=\"bp\">.</span><span class=\"mi\">62</span><span class=\"bp\">/</span><span class=\"n\">s</span><span class=\"o\">]</span>\n</code></pre></div>",
        "id": 305776740,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1666602863
    },
    {
        "content": "<p>Thanks for the help, I'll try that after lunch <span aria-label=\"food\" class=\"emoji emoji-1f372\" role=\"img\" title=\"food\">:food:</span></p>",
        "id": 305781236,
        "sender_full_name": "Jakob von Raumer",
        "timestamp": 1666604584
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"111080\">Floris van Doorn</span> <a href=\"#narrow/stream/116395-maths/topic/project.20doesn't.20accept.20mathlib.20oleans/near/305775476\">said</a>:</p>\n<blockquote>\n<p>In the worst case, you can do <code>cd _target/deps/mathlib/</code>, make sure you're on the correct commit, <code>leanproject get-cache</code> and <code>cd ../../..</code>. I've done that on old versions of <code>leanproject</code> to work around an issue it had.</p>\n</blockquote>\n<p>That doesn't help either, it does the <code>get-cache</code> without issues and then in the base directory still wants to build <code>mathlib</code> whenever I open a file or do <code>leanproject build</code></p>",
        "id": 305781815,
        "sender_full_name": "Jakob von Raumer",
        "timestamp": 1666604795
    },
    {
        "content": "<p>Are you on the most recent elan and leanproject? Do you see the \"looking for mathlib oleans locally...remotely...\" message? If they're being fetched locally then there's a chance they're corrupted; you can just remove the tar.xz file in ~/.mathlib and try again to get them remotely. If this still doesn't solve the problem there's a chance you accidentally edited core Lean; you can delete the version of Lean you're using in ~/.elan (this involves deleting two things) and then use elan to redownload lean and then leanproject to get mathlib ones.</p>",
        "id": 305787558,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1666607167
    },
    {
        "content": "<p>I see the \"looking for ...\" when doing <code>leanproject get-mathlib-cache</code> or <code>leanproject get-cache</code> but not on <code>leanproject build</code></p>",
        "id": 305789698,
        "sender_full_name": "Jakob von Raumer",
        "timestamp": 1666608013
    },
    {
        "content": "<p><code>elan update</code> doesn't help either</p>",
        "id": 305790011,
        "sender_full_name": "Jakob von Raumer",
        "timestamp": 1666608133
    },
    {
        "content": "<p>You wouldn't expect it on <code>leanproject build</code>, that's just doing <code>lean --make src</code>.</p>",
        "id": 305790667,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1666608399
    },
    {
        "content": "<p><code>elan self update</code> updates elan, and some python command which I never remember updates leanproject.</p>",
        "id": 305790768,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1666608445
    },
    {
        "content": "<p>If you think the problem is with your Lean version then you have to nuke things both in <code>~/.elan/toolchains</code> and <code>~/.elan/update-hashes</code></p>",
        "id": 305791065,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1666608558
    },
    {
        "content": "<p>If you accidentally add a space into a core Lean file then the main symptoms are what you are seeing by the way, and the fix is to delete the relevant files in those elan directories and then just open a file in VS Code in the project and it will redownload an uncorrupted Lean.</p>",
        "id": 305791246,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1666608642
    },
    {
        "content": "<p><code>lean --make src</code> doesn't show the \"looking for...\" either <span aria-label=\"thinking\" class=\"emoji emoji-1f914\" role=\"img\" title=\"thinking\">:thinking:</span>  I already tried deleting <code>_target</code> entirely, so it's not changed core files.</p>",
        "id": 305793020,
        "sender_full_name": "Jakob von Raumer",
        "timestamp": 1666609272
    },
    {
        "content": "<p>I don't understand why you would expect <code>lean --make src</code>, a command which builds lean files directly and has nothing to do with python, to print out a message which a python program prints out when attempting to access the internet to find olean files.</p>",
        "id": 305795381,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1666610214
    },
    {
        "content": "<p>I am conjecturing that you have borked your lean installation</p>",
        "id": 305795481,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1666610253
    },
    {
        "content": "<p>The \"looking for\" stuff is what the python front end <code>leanproject</code> is doing</p>",
        "id": 305795625,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1666610306
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/stream/116395-maths/topic/project.20doesn't.20accept.20mathlib.20oleans/near/305795381\">said</a>:</p>\n<blockquote>\n<p>I don't understand why you would expect <code>lean --make src</code>, a command which builds lean files directly and has nothing to do with python, to print out a message which a python program prints out when attempting to access the internet to find olean files.</p>\n</blockquote>\n<p>I didn't expect that, sorry. I just completely misunderstood your above post, I think</p>",
        "id": 305799469,
        "sender_full_name": "Jakob von Raumer",
        "timestamp": 1666611744
    },
    {
        "content": "<p>Sorry :-)</p>",
        "id": 305799567,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1666611790
    },
    {
        "content": "<p>Let me know if you have any questions, I'm standing in a queue in a bank right now</p>",
        "id": 305799598,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1666611807
    },
    {
        "content": "<p>What I'm conjecturing is that you were working on some other lean project using the same version of lean, accidentally corrupted it and then this causes mathlib oleans to be rejected</p>",
        "id": 305799824,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1666611886
    },
    {
        "content": "<p>So nuke the version of lean stored in .elan corresponding to the version being used by your project</p>",
        "id": 305799910,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1666611916
    },
    {
        "content": "<p>Thanks, will try that</p>",
        "id": 305800052,
        "sender_full_name": "Jakob von Raumer",
        "timestamp": 1666611965
    },
    {
        "content": "<p>You have to nuke two things</p>",
        "id": 305800109,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1666611993
    },
    {
        "content": "<p>Thanks, that solved it!! <span aria-label=\"tada\" class=\"emoji emoji-1f389\" role=\"img\" title=\"tada\">:tada:</span></p>",
        "id": 305800874,
        "sender_full_name": "Jakob von Raumer",
        "timestamp": 1666612357
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110789\">Jakob von Raumer</span> has marked this topic as resolved.</p>",
        "id": 305800878,
        "sender_full_name": "Notification Bot",
        "timestamp": 1666612360
    },
    {
        "content": "<p>Sorry for not being clearer earlier</p>",
        "id": 305803274,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1666613183
    },
    {
        "content": "<p>I somehow didn'r really expect it a lean version issue, and I still don't get exactly how this happens</p>",
        "id": 305806066,
        "sender_full_name": "Jakob von Raumer",
        "timestamp": 1666613858
    },
    {
        "content": "<p>If you hadn't nuked those lean directories you could have diffed them against what's there now and discovered what you accidentally did when you sneezed, jumped to a definition in core and pressed the space bar</p>",
        "id": 305902004,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1666640791
    },
    {
        "content": "<p>It's usually harder than just sneezing: the files in core the elan has provided are all read-only.</p>",
        "id": 305924451,
        "sender_full_name": "Scott Morrison",
        "timestamp": 1666651006
    },
    {
        "content": "<p>I'm a strong sneezer, though</p>",
        "id": 305968053,
        "sender_full_name": "Jakob von Raumer",
        "timestamp": 1666681587
    },
    {
        "content": "<p>That's true of core, but not mathlib</p>",
        "id": 305968143,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1666681630
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/stream/116395-maths/topic/.E2.9C.94.20project.20doesn't.20accept.20mathlib.20oleans/near/305968143\">said</a>:</p>\n<blockquote>\n<p>That's true of core, but not mathlib</p>\n</blockquote>\n<p>Yes, but I had already nuked the <code>_target</code> mathlib  and the problem persisted, so it coulnd't have been mathlib <span aria-label=\"shrug\" class=\"emoji emoji-1f937\" role=\"img\" title=\"shrug\">:shrug:</span></p>",
        "id": 305968901,
        "sender_full_name": "Jakob von Raumer",
        "timestamp": 1666682013
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110087\">Scott Morrison</span> <a href=\"#narrow/stream/116395-maths/topic/.E2.9C.94.20project.20doesn't.20accept.20mathlib.20oleans/near/305924451\">said</a>:</p>\n<blockquote>\n<p>It's usually harder than just sneezing: the files in core the elan has provided are all read-only.</p>\n</blockquote>\n<p>That's not true for my set-up! Is this working for other people? I can edit core Lean 3.48 just fine on Ubuntu 20.04 with VS Code when working on e.g. mathlib (I right click, I add a space, I save, I break everything)</p>",
        "id": 306000847,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1666694734
    },
    {
        "content": "<p>Just checked, and it's also writable for me.</p>",
        "id": 306013887,
        "sender_full_name": "Jakob von Raumer",
        "timestamp": 1666699999
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Text only\"><pre><span></span><code>buzzard@bob:~/.elan/toolchains/leanprover-community--lean---3.48.0/lib/lean/library/init$ ls -la\ntotal 840\ndrwxr-xr-x  6 buzzard buzzard   4096 Oct 23 18:48 .\ndrwxr-xr-x  7 buzzard buzzard   4096 Sep  1 22:45 ..\ndrwxr-xr-x  2 buzzard buzzard   4096 Oct 23 18:48 algebra\n-rw-r--r--  1 buzzard buzzard   4653 Aug 30 12:14 cc_lemmas.lean\n-rw-r--r--  1 buzzard buzzard   6382 Aug 30 12:20 cc_lemmas.olean\n-rw-r--r--  1 buzzard buzzard   5556 Aug 30 12:14 classical.lean\n-rw-r--r--  1 buzzard buzzard  13061 Aug 30 12:20 classical.olean\n-rw-r--r--  1 buzzard buzzard   7601 Aug 30 12:14 coe.lean\n-rw-r--r--  1 buzzard buzzard  46052 Aug 30 12:20 coe.olean\ndrwxr-xr-x  2 buzzard buzzard   4096 Oct 23 18:48 control\n-rw-r--r--  1 buzzard buzzard  18729 Aug 30 12:14 core.lean\n-rw-r--r--  1 buzzard buzzard 178898 Aug 30 12:20 core.olean\ndrwxr-xr-x 16 buzzard buzzard   4096 Oct 23 18:48 data\n-rw-r--r--  1 buzzard buzzard    645 Aug 30 12:14 default.lean\n-rw-r--r--  1 buzzard buzzard   1409 Aug 30 12:21 default.olean\n-rw-r--r--  1 buzzard buzzard   6628 Aug 30 12:14 function.lean\n-rw-r--r--  1 buzzard buzzard  20354 Aug 30 12:20 function.olean\n-rw-r--r--  1 buzzard buzzard   2408 Aug 30 12:14 funext.lean\n-rw-r--r--  1 buzzard buzzard   5045 Aug 30 12:20 funext.olean\n-rw-r--r--  1 buzzard buzzard   1367 Aug 30 12:14 init.md\n-rw-r--r--  1 buzzard buzzard    898 Aug 30 12:14 ite_simp.lean\n-rw-r--r--  1 buzzard buzzard   4062 Aug 30 12:21 ite_simp.olean\n-rw-r--r--  1 buzzard buzzard  38948 Aug 30 12:14 logic.lean\n-rw-r--r--  1 buzzard buzzard 130351 Aug 30 12:20 logic.olean\ndrwxr-xr-x  6 buzzard buzzard  20480 Oct 23 18:48 meta\n-rw-r--r--  1 buzzard buzzard   1387 Aug 30 12:14 propext.lean\n-rw-r--r--  1 buzzard buzzard   1631 Aug 30 12:20 propext.olean\n-rw-r--r--  1 buzzard buzzard   2218 Aug 30 12:14 util.lean\n-rw-r--r--  1 buzzard buzzard   3766 Aug 30 12:20 util.olean\n-rw-r--r--  1 buzzard buzzard    332 Aug 30 12:14 version.lean\n-rw-r--r--  1 buzzard buzzard   1439 Aug 30 12:20 version.olean\n-rw-r--r--  1 buzzard buzzard   7103 Aug 30 12:14 wf.lean\n-rw-r--r--  1 buzzard buzzard  29319 Aug 30 12:20 wf.olean\nbuzzard@bob:~/.elan/toolchains/leanprover-community--lean---3.48.0/lib/lean/library/init$\n</code></pre></div>",
        "id": 306014248,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1666700136
    },
    {
        "content": "<p>Weird, not writeable for me:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"n\">scott</span><span class=\"bp\">@</span><span class=\"n\">idaeus</span> <span class=\"n\">lib</span> <span class=\"bp\">%</span> <span class=\"n\">cd</span> <span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">library</span><span class=\"bp\">/</span><span class=\"n\">init</span><span class=\"bp\">/</span><span class=\"kd\">meta</span>\n<span class=\"n\">scott</span><span class=\"bp\">@</span><span class=\"n\">idaeus</span> <span class=\"kd\">meta</span> <span class=\"bp\">%</span> <span class=\"n\">ls</span> <span class=\"bp\">-</span><span class=\"n\">al</span>\n<span class=\"n\">total</span> <span class=\"mi\">3888</span>\n<span class=\"n\">drwxr</span><span class=\"bp\">-</span><span class=\"n\">xr</span><span class=\"bp\">-</span><span class=\"n\">x</span>  <span class=\"mi\">116</span> <span class=\"n\">scott</span>  <span class=\"n\">staff</span>    <span class=\"mi\">3712</span> <span class=\"mi\">26</span> <span class=\"n\">Oct</span> <span class=\"mi\">07</span><span class=\"o\">:</span><span class=\"mi\">33</span> <span class=\"bp\">.</span>\n<span class=\"n\">drwxr</span><span class=\"bp\">-</span><span class=\"n\">xr</span><span class=\"bp\">-</span><span class=\"n\">x</span>   <span class=\"mi\">33</span> <span class=\"n\">scott</span>  <span class=\"n\">staff</span>    <span class=\"mi\">1056</span> <span class=\"mi\">26</span> <span class=\"n\">Oct</span> <span class=\"mi\">07</span><span class=\"o\">:</span><span class=\"mi\">33</span> <span class=\"bp\">..</span>\n<span class=\"bp\">-</span><span class=\"n\">r</span><span class=\"c1\">--r--r--    1 scott  staff     496 30 Aug 21:14 ac_tactics.lean</span>\n<span class=\"bp\">-</span><span class=\"n\">r</span><span class=\"c1\">--r--r--    1 scott  staff     281 30 Aug 21:28 ac_tactics.olean</span>\n<span class=\"bp\">-</span><span class=\"n\">r</span><span class=\"c1\">--r--r--    1 scott  staff    1903 30 Aug 21:14 async_tactic.lean</span>\n<span class=\"bp\">-</span><span class=\"n\">r</span><span class=\"c1\">--r--r--    1 scott  staff    4589 30 Aug 21:29 async_tactic.olean</span>\n<span class=\"bp\">-</span><span class=\"n\">r</span><span class=\"c1\">--r--r--    1 scott  staff    5895 30 Aug 21:14 attribute.lean</span>\n<span class=\"bp\">-</span><span class=\"n\">r</span><span class=\"c1\">--r--r--    1 scott  staff   17422 30 Aug 21:29 attribute.olean</span>\n</code></pre></div>",
        "id": 306117247,
        "sender_full_name": "Scott Morrison",
        "timestamp": 1666730099
    }
]