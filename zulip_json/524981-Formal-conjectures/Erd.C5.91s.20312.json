[
    {
        "content": "<h3>What is the conjecture</h3>\n<p><a href=\"https://www.erdosproblems.com/312\">https://www.erdosproblems.com/312</a></p>\n<p>Does there exist some c&gt;0 such that, for any K&gt;1, whenever A is a sufficiently large finite multiset of integers with ∑n∈A1n&gt;K there exists some S⊆A such that<br>\n1−e−cK&lt;∑n∈S1n≤1?</p>\n<p>how do I approach this issue? I have been assigned this issue</p>",
        "id": 540174153,
        "sender_full_name": "AYUSH DEBNATH",
        "timestamp": 1758183773
    },
    {
        "content": "<p>Thanks for taking a stab at the issue! Where are you stuck at? I would start with something like the following:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">FormalConjectures</span><span class=\"bp\">.</span><span class=\"n\">Util</span><span class=\"bp\">.</span><span class=\"n\">ProblemImports</span>\n\n<span class=\"c\">/-</span><span class=\"cm\">!</span>\n<span class=\"cm\"># Erdős Problem 312</span>\n\n<span class=\"cm\">*Reference:* [erdosproblems.com/312](https://www.erdosproblems.com/312)</span>\n<span class=\"cm\">-/</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Filter</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"kn\">scoped</span><span class=\"w\"> </span><span class=\"n\">Topology</span><span class=\"w\"> </span><span class=\"n\">Real</span>\n\n<span class=\"kn\">namespace</span><span class=\"w\"> </span><span class=\"n\">Erdos312</span>\n\n<span class=\"sd\">/--</span>\n<span class=\"sd\">...</span>\n<span class=\"sd\">-/</span>\n<span class=\"kd\">@[</span><span class=\"n\">category</span><span class=\"w\"> </span><span class=\"n\">research</span><span class=\"w\"> </span><span class=\"n\">open</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">AMS</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"w\"> </span><span class=\"mi\">11</span><span class=\"kd\">]</span>\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">erdos_312</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">∃ᵉ</span><span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">∧</span>\n<span class=\"w\">  </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">K</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"w\"> </span><span class=\"bp\">→</span>\n<span class=\"w\">    </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">N₀</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">),</span>\n<span class=\"w\">      </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Multiset</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">),</span>\n<span class=\"w\">        </span><span class=\"o\">(</span><span class=\"n\">A</span><span class=\"bp\">.</span><span class=\"n\">card</span><span class=\"w\"> </span><span class=\"bp\">≥</span><span class=\"w\"> </span><span class=\"n\">N₀</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">A</span><span class=\"bp\">.</span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"bp\">⁻¹</span><span class=\"o\">))</span><span class=\"bp\">.</span><span class=\"n\">sum</span><span class=\"w\"> </span><span class=\"bp\">&gt;</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">→</span>\n<span class=\"w\">          </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Multiset</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"bp\">⊆</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">∧</span>\n<span class=\"w\">          </span><span class=\"bp\">...</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">↔</span><span class=\"w\"> </span><span class=\"n\">answer</span><span class=\"o\">(</span><span class=\"gr\">sorry</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n\n<span class=\"kn\">end</span><span class=\"w\"> </span><span class=\"n\">Erdos312</span>\n</code></pre></div>",
        "id": 540176775,
        "sender_full_name": "Moritz Firsching",
        "timestamp": 1758184493
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"313038\">@Moritz Firsching</span>, using subset on multiset is incorrect here. What about using a family indexed by a fintype instead?</p>",
        "id": 540179752,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1758185259
    },
    {
        "content": "<p>import FormalConjectures.Util.ProblemImports</p>\n<p>/-!</p>\n<h1>Erdős Problem 312 — Fintype Formulation</h1>\n<p><em>Reference:</em> <a href=\"https://www.erdosproblems.com/312\">https://www.erdosproblems.com/312</a></p>\n<p>We state a version of the problem using <code>Fin n → ℕ</code> families and <code>Finset (Fin n)</code> subsets<br>\ninstead of multisets. This makes multiplicities explicit by indexing the family with <code>Fin n</code>.<br>\n-/</p>\n<p>open scoped BigOperators Topology Real<br>\nopen Filter</p>\n<p>namespace Erdos312<br>\nnoncomputable section</p>\n<p>/-- <br>\n<code>hsumIdx a S</code> is the harmonic sum of the entries of the indexed family <code>a : Fin n → ℕ</code><br>\nrestricted to a subset of indices <code>S : Finset (Fin n)</code>.<br>\n-/<br>\ndef hsumIdx {n : ℕ} (a : Fin n → ℕ) (S : Finset (Fin n)) : ℝ :=<br>\n  ∑ i in S, (a i : ℝ)⁻¹</p>\n<p>/--<br>\n<code>hsumAll a</code> is the total harmonic sum of all entries of <code>a : Fin n → ℕ</code>.<br>\nThis is just the sum over all indices <code>Fin n</code>.<br>\n-/<br>\ndef hsumAll {n : ℕ} (a : Fin n → ℕ) : ℝ :=<br>\n  ∑ i : Fin n, (a i : ℝ)⁻¹</p>\n<p>@[simp]<br>\nlemma hsumIdx_empty {n} (a : Fin n → ℕ) : hsumIdx a ∅ = 0 := by<br>\n  simp [hsumIdx]</p>\n<p>@[simp]<br>\nlemma hsumAll_eq_univ_sum {n} (a : Fin n → ℕ) :<br>\n  hsumAll a = ∑ i in (Finset.univ : Finset (Fin n)), (a i : ℝ)⁻¹ := by<br>\n  classical<br>\n  simp [hsumAll]</p>\n<p>/-!</p>\n<h3>Main theorem (fintype version)</h3>\n<p>The problem asks: does there exist a constant <code>c &gt; 0</code> such that for every <code>K &gt; 1</code>,<br>\nwhenever <code>a : Fin n → ℕ</code> is large enough and has harmonic sum <code>&gt; K</code>,<br>\nwe can choose a subfamily (given by <code>S : Finset (Fin n)</code>) whose harmonic sum lies<br>\nin the interval <code>(1 - exp(-c*K), 1]</code>?<br>\n-/</p>\n<p>/-- <br>\nFintype-indexed version of Erdős Problem 312.</p>\n<ul>\n<li><code>c</code> is a positive universal constant.</li>\n<li>For each <code>K &gt; 1</code>, there exists an <code>N₀</code> such that:<ul>\n<li>For all sufficiently large <code>n ≥ N₀</code> and families <code>a : Fin n → ℕ</code>,</li>\n<li>If the total harmonic sum <code>hsumAll a &gt; K</code>,</li>\n<li>Then there exists a subset of indices <code>S : Finset (Fin n)</code> with<br>\n<code>1 - exp(-(c*K)) &lt; hsumIdx a S ≤ 1</code>.</li>\n</ul>\n</li>\n</ul>\n<p>This statement mirrors the original problem, but is easier to handle formally<br>\nbecause it avoids the subtlety of multiset-subset with multiplicities.<br>\n-/<br>\n@[category research open, AMS 5 11]<br>\ntheorem erdos_312_fintype :<br>\n  (∃ᵉ (c : ℝ), 0 &lt; c ∧<br>\n    ∀ (K : ℝ), 1 &lt; K →<br>\n      ∃ (N₀ : ℕ),<br>\n        ∀ (n : ℕ) (a : Fin n → ℕ),<br>\n          (n ≥ N₀ ∧ hsumAll a &gt; K) →<br>\n            ∃ (S : Finset (Fin n)),<br>\n              1 - Real.exp (-(c * K)) &lt; hsumIdx a S ∧<br>\n              hsumIdx a S ≤ 1)<br>\n  ↔ answer (sorry) := by<br>\n  /-<br>\n  Proof sketch (to be filled):</p>\n<p>1. Fix <code>K &gt; 1</code>, set ε := exp(-c*K).<br>\n  2. Randomly thin the family with Bernoulli choices (probabilistic method).<br>\n  3. Tune parameters so that the expected harmonic sum is ≈ 1 - ε/2.<br>\n  4. Bound the variance (≲ 1/K) and apply Chebyshev/Hoeffding.<br>\n  5. Conclude that some outcome gives a subset with harmonic sum in (1 - ε, 1].<br>\n  6. Extract the corresponding <code>Finset</code> of indices.<br>\n  -/<br>\n  sorry</p>\n<p>end Erdos312</p>",
        "id": 540194018,
        "sender_full_name": "AYUSH DEBNATH",
        "timestamp": 1758189544
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"387244\">Yaël Dillies</span> <a href=\"#narrow/channel/524981-Formal-conjectures/topic/Erd.C5.91s.20312/near/540179752\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"313038\">Moritz Firsching</span>, using subset on multiset is incorrect here. What about using a family indexed by a fintype instead?</p>\n</blockquote>\n<p>Thanks for pointing this out! Family indexed by fintype sounds like a good idea. Now I'm trying to understand if <code>LE.le</code>, so \"≤ \" would do the correct thing...</p>",
        "id": 540195155,
        "sender_full_name": "Moritz Firsching",
        "timestamp": 1758189894
    },
    {
        "content": "<p>This characterization seems to imply it is doing the right thing:<br>\n<a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Multiset.le_iff_count#doc\">https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Multiset.le_iff_count#doc</a><br>\nso, perhaps it would be more elegant to use Multiset here and instead of \"subset\" use \"le\"?</p>",
        "id": 540196548,
        "sender_full_name": "Moritz Firsching",
        "timestamp": 1758190409
    },
    {
        "content": "<p>It does the right thing, yes. But as always, I heavily discourage indexing sums by a multiset. It is harder to work with (eg properly filtering is impossible) for no benefit. Indexing by an arbitrary indexing type is almost always better</p>",
        "id": 540201400,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1758192279
    },
    {
        "content": "<p>Added the copyright header and made changes to the code can we run it again</p>",
        "id": 540201650,
        "sender_full_name": "AYUSH DEBNATH",
        "timestamp": 1758192385
    },
    {
        "content": "<p>/-</p>\n<p>Proof sketch (to be filled):</p>\n<ol>\n<li>\n<p>Fix <code>K &gt; 1</code>, set ε := exp(-c*K).</p>\n</li>\n<li>\n<p>Randomly thin the family with Bernoulli choices (probabilistic method).</p>\n</li>\n<li>\n<p>Tune parameters so that the expected harmonic sum is ≈ 1 - ε/2.</p>\n</li>\n<li>\n<p>Bound the variance (≲ 1/K) and apply Chebyshev/Hoeffding.</p>\n</li>\n<li>\n<p>Conclude that some outcome gives a subset with harmonic sum in (1 - ε, 1].</p>\n</li>\n<li>\n<p>Extract the corresponding <code>Finset</code> of indices.<br>\n-/</p>\n</li>\n</ol>\n<p>Outdated?</p>",
        "id": 540206997,
        "sender_full_name": "AYUSH DEBNATH",
        "timestamp": 1758194241
    },
    {
        "content": "<p>Why is it not accepting even though I have added a copyright header plz tell me?</p>",
        "id": 540281782,
        "sender_full_name": "AYUSH DEBNATH",
        "timestamp": 1758214730
    },
    {
        "content": "<p>I think I have to add my name to the AUTHORS</p>",
        "id": 540286437,
        "sender_full_name": "AYUSH DEBNATH",
        "timestamp": 1758216160
    }
]