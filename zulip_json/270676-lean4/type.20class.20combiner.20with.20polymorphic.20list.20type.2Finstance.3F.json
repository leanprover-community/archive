[
    {
        "content": "<p>New to Lean. Trying to keep my question concise.<br>\nI need some guidance or advice on using Lean.<br>\nI should say that I'm only about half-way through reading Functional Programming in Lean.<br>\nSo... perhaps you can tell me, go and read these chapters over there and then revisit this problem.</p>\n<p>I wrote a KEM type class.<br>\nMy goal is to write a KEM combiner which combines an arbitrary number of KEMs together.<br>\nSeems like I can't just put this into the Combiner type class definition...</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">Œ£</span><span class=\"w\"> </span><span class=\"n\">Œ±</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">KEM</span><span class=\"w\"> </span><span class=\"n\">Œ±</span><span class=\"w\"> </span><span class=\"bp\">√ó</span><span class=\"w\"> </span><span class=\"n\">Œ±</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>Perhaps my KEM type class is not good and I need something else.<br>\nBefore I realized exactly how I wanted to use Lean, I was curious how Lean<br>\nmight be used to create symbolic cryptographic models, so <span class=\"user-mention\" data-user-id=\"110049\">@Mario Carneiro</span> <br>\nwrote a really impressive KEM definition, complete with proofs of \"KEM correctness\".<br>\nMy intention is to revisit that later after I learn Lean a bit better.<br>\nHere's what my KEM type class looks like... using my beginner Lean functional programming skills:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">class</span><span class=\"w\"> </span><span class=\"n\">Key</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">key</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">encode</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">key</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">ByteArray</span>\n<span class=\"w\">  </span><span class=\"n\">decode</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ByteArray</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">Option</span><span class=\"w\"> </span><span class=\"n\">key</span>\n\n<span class=\"kn\">class</span><span class=\"w\"> </span><span class=\"n\">PrivateKey</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">privkey</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">extends</span><span class=\"w\"> </span><span class=\"n\">Key</span><span class=\"w\"> </span><span class=\"n\">privkey</span>\n\n<span class=\"kn\">class</span><span class=\"w\"> </span><span class=\"n\">PublicKey</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">pubkey</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">extends</span><span class=\"w\"> </span><span class=\"n\">Key</span><span class=\"w\"> </span><span class=\"n\">pubkey</span>\n\n<span class=\"kn\">class</span><span class=\"w\"> </span><span class=\"n\">KEM</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">scheme</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">PublicKeyType</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span>\n<span class=\"w\">  </span><span class=\"n\">PrivateKeyType</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span>\n\n<span class=\"w\">  </span><span class=\"n\">name</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">String</span>\n<span class=\"w\">  </span><span class=\"n\">generateKeyPair</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IO</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">PublicKeyType</span><span class=\"w\"> </span><span class=\"bp\">√ó</span><span class=\"w\"> </span><span class=\"n\">PrivateKeyType</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"n\">encapsulate</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">scheme</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">PublicKeyType</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">IO</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ByteArray</span><span class=\"w\"> </span><span class=\"bp\">√ó</span><span class=\"w\"> </span><span class=\"n\">ByteArray</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"n\">decapsulate</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">scheme</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">PrivateKeyType</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">ByteArray</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">ByteArray</span>\n<span class=\"w\">  </span><span class=\"n\">privateKeySize</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span>\n<span class=\"w\">  </span><span class=\"n\">publicKeySize</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span>\n<span class=\"w\">  </span><span class=\"n\">encodePrivateKey</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">PrivateKeyType</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">ByteArray</span>\n<span class=\"w\">  </span><span class=\"n\">decodePrivateKey</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ByteArray</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">Option</span><span class=\"w\"> </span><span class=\"n\">PrivateKeyType</span>\n<span class=\"w\">  </span><span class=\"n\">encodePublicKey</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">PublicKeyType</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">ByteArray</span>\n<span class=\"w\">  </span><span class=\"n\">decodePublicKey</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ByteArray</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">Option</span><span class=\"w\"> </span><span class=\"n\">PublicKeyType</span>\n</code></pre></div>\n<p>I construct my List of KEM like this:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">defaultHash</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">Sha256</span><span class=\"bp\">.</span><span class=\"n\">hash</span><span class=\"w\"> </span><span class=\"n\">x</span>\n\n<span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Adapter</span><span class=\"w\"> </span><span class=\"n\">X25519Scheme</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">hash</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">defaultHash</span>\n\n<span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Adapter</span><span class=\"w\"> </span><span class=\"n\">X448Scheme</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">hash</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">defaultHash</span>\n\n<span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Adapter</span><span class=\"w\"> </span><span class=\"n\">X41417Scheme</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">hash</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">defaultHash</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">X25519AsKEM</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">KEM</span><span class=\"w\"> </span><span class=\"n\">X25519Scheme</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">inferInstance</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">X448AsKEM</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">KEM</span><span class=\"w\"> </span><span class=\"n\">X448Scheme</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">inferInstance</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">X41417AsKEM</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">KEM</span><span class=\"w\"> </span><span class=\"n\">X41417Scheme</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">inferInstance</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">X25519Instance</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X25519Scheme</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">{}</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">X448Instance</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X448Scheme</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">{}</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">X41417Instance</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X41417Scheme</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">{}</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Schemes</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">Œ£</span><span class=\"w\"> </span><span class=\"n\">Œ±</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">KEM</span><span class=\"w\"> </span><span class=\"n\">Œ±</span><span class=\"w\"> </span><span class=\"bp\">√ó</span><span class=\"w\"> </span><span class=\"n\">Œ±</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"o\">[</span>\n<span class=\"w\">    </span><span class=\"bp\">‚ü®</span><span class=\"n\">X25519Scheme</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X25519AsKEM</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">X25519Instance</span><span class=\"o\">)</span><span class=\"bp\">‚ü©</span><span class=\"o\">,</span>\n<span class=\"w\">    </span><span class=\"bp\">‚ü®</span><span class=\"n\">X448Scheme</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X448AsKEM</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">X448Instance</span><span class=\"o\">)</span><span class=\"bp\">‚ü©</span><span class=\"o\">,</span>\n<span class=\"w\">    </span><span class=\"bp\">‚ü®</span><span class=\"n\">X41417Scheme</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X41417AsKEM</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">X41417Instance</span><span class=\"o\">)</span><span class=\"bp\">‚ü©</span><span class=\"o\">,</span>\n<span class=\"w\">  </span><span class=\"o\">]</span>\n</code></pre></div>\n<p>I test the list of KEMs like this:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">testKEM</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">Œ±</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">kemInstance</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">KEM</span><span class=\"w\"> </span><span class=\"n\">Œ±</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">kem</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Œ±</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IO</span><span class=\"w\"> </span><span class=\"n\">Unit</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">do</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">alicePublicKey</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">alicePrivateKey</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">‚Üê</span><span class=\"w\"> </span><span class=\"n\">kemInstance</span><span class=\"bp\">.</span><span class=\"n\">generateKeyPair</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ciphertext</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">bobSharedSecret</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">‚Üê</span><span class=\"w\"> </span><span class=\"n\">kemInstance</span><span class=\"bp\">.</span><span class=\"n\">encapsulate</span><span class=\"w\"> </span><span class=\"n\">kem</span><span class=\"w\"> </span><span class=\"n\">alicePublicKey</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">aliceSharedSecret</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">kemInstance</span><span class=\"bp\">.</span><span class=\"n\">decapsulate</span><span class=\"w\"> </span><span class=\"n\">kem</span><span class=\"w\"> </span><span class=\"n\">alicePrivateKey</span><span class=\"w\"> </span><span class=\"n\">ciphertext</span>\n<span class=\"w\">  </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">bobSharedSecret</span><span class=\"w\"> </span><span class=\"bp\">==</span><span class=\"w\"> </span><span class=\"n\">aliceSharedSecret</span><span class=\"w\"> </span><span class=\"k\">then</span>\n<span class=\"w\">    </span><span class=\"n\">IO</span><span class=\"bp\">.</span><span class=\"n\">println</span><span class=\"w\"> </span><span class=\"n\">s!</span><span class=\"s2\">\"KEM test for {kemInstance.name} PASSED.\"</span>\n<span class=\"w\">  </span><span class=\"k\">else</span>\n<span class=\"w\">    </span><span class=\"n\">panic!</span><span class=\"w\"> </span><span class=\"s2\">\"KEM test failed!\"</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">testAllKEMs</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">Œ£</span><span class=\"w\"> </span><span class=\"n\">Œ±</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">KEM</span><span class=\"w\"> </span><span class=\"n\">Œ±</span><span class=\"w\"> </span><span class=\"bp\">√ó</span><span class=\"w\"> </span><span class=\"n\">Œ±</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">IO</span><span class=\"w\"> </span><span class=\"n\">Unit</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"o\">[]</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">IO</span><span class=\"bp\">.</span><span class=\"n\">println</span><span class=\"w\"> </span><span class=\"s2\">\"All KEM tests passed!\"</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">‚ü®_</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">kem</span><span class=\"bp\">‚ü©</span><span class=\"w\"> </span><span class=\"bp\">::</span><span class=\"w\"> </span><span class=\"n\">rest</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"k\">do</span>\n<span class=\"w\">  </span><span class=\"n\">testKEM</span><span class=\"w\"> </span><span class=\"n\">kem</span>\n<span class=\"w\">  </span><span class=\"n\">testAllKEMs</span><span class=\"w\"> </span><span class=\"n\">rest</span>\n</code></pre></div>",
        "id": 465911041,
        "sender_full_name": "David Stainton ü¶°",
        "timestamp": 1724909431
    },
    {
        "content": "<p>May I ask, why do you use class and instance, as opposed to structure and def?</p>",
        "id": 465913338,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1724910662
    },
    {
        "content": "<p>Not sure. Would it be better to use structures to represent the KEM instead?</p>",
        "id": 465913461,
        "sender_full_name": "David Stainton ü¶°",
        "timestamp": 1724910734
    },
    {
        "content": "<p>Your testKem is expecting to find the Kem functions using typeclass search. But in your testAllKEMs, you aren't supplying the unwrapped <code>foo : KEM kem</code> back to the TC system</p>",
        "id": 465913585,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1724910766
    },
    {
        "content": "<p>You could change your inductive step to have </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">testAllKEMs</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">Œ£</span><span class=\"w\"> </span><span class=\"n\">Œ±</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">KEM</span><span class=\"w\"> </span><span class=\"n\">Œ±</span><span class=\"w\"> </span><span class=\"bp\">√ó</span><span class=\"w\"> </span><span class=\"n\">Œ±</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">IO</span><span class=\"w\"> </span><span class=\"n\">Unit</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"o\">[]</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">IO</span><span class=\"bp\">.</span><span class=\"n\">println</span><span class=\"w\"> </span><span class=\"s2\">\"All KEM tests passed!\"</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">‚ü®_</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">inst</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">kem</span><span class=\"bp\">‚ü©</span><span class=\"w\"> </span><span class=\"bp\">::</span><span class=\"w\"> </span><span class=\"n\">rest</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"k\">do</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">inst</span>\n<span class=\"w\">  </span><span class=\"n\">testKEM</span><span class=\"w\"> </span><span class=\"n\">kem</span>\n<span class=\"w\">  </span><span class=\"n\">testAllKEMs</span><span class=\"w\"> </span><span class=\"n\">rest</span>\n</code></pre></div>",
        "id": 465913810,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1724910913
    },
    {
        "content": "<p>Okay thanks I'll try changing it to a polymorphic structure. It sounds like that could make it easier to write a Kem combiner. The structure could have a field of the List type above.</p>",
        "id": 465914136,
        "sender_full_name": "David Stainton ü¶°",
        "timestamp": 1724911157
    },
    {
        "content": "<p>Did my example work even with the current class based style?</p>",
        "id": 465914183,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1724911198
    },
    {
        "content": "<p>yeah your change works too.</p>",
        "id": 465915208,
        "sender_full_name": "David Stainton ü¶°",
        "timestamp": 1724911660
    }
]