[
    {
        "content": "<p>This is probably not supposed to happen</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">set_option</span><span class=\"w\"> </span><span class=\"n\">pp</span><span class=\"bp\">.</span><span class=\"n\">instantiateMVars</span><span class=\"w\"> </span><span class=\"n\">false</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"c1\">-- error: don't know how to synthesize placeholder</span>\n<span class=\"w\">  </span><span class=\"n\">refine</span><span class=\"w\"> </span><span class=\"bp\">?</span><span class=\"n\">k</span>\n<span class=\"w\">  </span><span class=\"c1\">-- trying to print the term will stack overflow</span>\n<span class=\"w\">  </span><span class=\"c1\">-- show_term</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">?</span><span class=\"n\">k</span><span class=\"o\">]</span>\n</code></pre></div>",
        "id": 538108360,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1757282821
    },
    {
        "content": "<p>(you're also not supposed to rewrite the goal with itself, but that's not the point)</p>",
        "id": 538108524,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1757283041
    },
    {
        "content": "<p>Wow, the one thing I forgot to mention about <code>simpa</code>:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"sd\">/--</span>\n<span class=\"sd\">error: Occurs check failed: Expression</span>\n<span class=\"sd\">  ?k</span>\n<span class=\"sd\">contains the goal ?k</span>\n<span class=\"sd\">-/</span>\n<span class=\"bp\">#</span><span class=\"n\">guard_msgs</span><span class=\"w\"> </span><span class=\"k\">in</span>\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">refine</span><span class=\"w\"> </span><span class=\"bp\">?</span><span class=\"n\">k</span>\n<span class=\"w\">  </span><span class=\"n\">simpa</span><span class=\"w\"> </span><span class=\"kn\">using</span><span class=\"w\"> </span><span class=\"bp\">?</span><span class=\"n\">k</span>\n</code></pre></div>",
        "id": 538108741,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1757283298
    },
    {
        "content": "<p>yes, that was the inspiration :)</p>",
        "id": 538108757,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1757283312
    },
    {
        "content": "<p><code>cases</code> also seems to have this problem</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">refine</span><span class=\"w\"> </span><span class=\"bp\">?</span><span class=\"n\">k</span>\n<span class=\"w\">  </span><span class=\"n\">cases</span><span class=\"w\"> </span><span class=\"bp\">?</span><span class=\"n\">k</span>\n</code></pre></div>",
        "id": 538108939,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1757283587
    },
    {
        "content": "<p>The occurs check in <code>simpa</code> is almost <a href=\"https://github.com/leanprover/lean4/commit/15bb8a26d54d2e9311e4f083d6946eac3e0915b6\">a year old</a>. There are plenty more examples of this bug out there!</p>",
        "id": 538108945,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1757283592
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover/lean4/pull/10306\">lean4#10306</a> adds an occurs check for <code>rw</code></p>",
        "id": 538235501,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1757340283
    }
]