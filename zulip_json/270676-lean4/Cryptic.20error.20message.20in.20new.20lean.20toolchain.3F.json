[
    {
        "content": "<p>Hi all, I've run into an error message on 4.29.0-rc1 that's much more cryptic than it had been on 4.28.0.</p>\n<p>If I use something <code>noncomputable</code> in a <code>def</code> that's not marked noncomputable, on 4.28.0 i would get a reasonable error like <code>Error: depends on declaration 'IsAdjoinRoot.ofAdjoinRootEquiv', which has no executable code; consider marking definition as 'noncomputable'</code></p>\n<p>However, on 4.29.0-rc1 the same code errors out with <code>Failed to find LCNF signature for IsAdjoinRoot.ofAdjoinRootEquiv</code>, which was very confusing to me and I thought it was a compiler bug. The code and the errors can be seen here, switching between mathlib latest and stable: <a href=\"https://live.lean-lang.org/#codez=JYWwDg9gTgLgBAWQIYwBYBtgCMBQOJgCmAdnAAoToCexEIwS6eAbklA1uoXAN4BKcAMoBfOAG0AwnRB9gxAOZw+AXXFSQMuYsGqxAQXTzCWKEiVDlOAMSFW6OABlCSYgDpmhKAGdgEYoJh2BRwAE0IAMzhgLz0QgCsIOT4ICBgAfQhwg3kAUQBHAFdgZjgACkiALiUxAA1lAEocOGay7irSvlrVQA/KOABJMMZXLzAXXnDherhAYSJABIIxFSEpqr6Y+MTiZNShOEimuAqAXn61hKSUmFdM2LPNi/yiksIcIA\">https://live.lean-lang.org/#codez=JYWwDg9gTgLgBAWQIYwBYBtgCMBQOJgCmAdnAAoToCexEIwS6eAbklA1uoXAN4BKcAMoBfOAG0AwnRB9gxAOZw+AXXFSQMuYsGqxAQXTzCWKEiVDlOAMSFW6OABlCSYgDpmhKAGdgEYoJh2BRwAE0IAMzhgLz0QgCsIOT4ICBgAfQhwg3kAUQBHAFdgZjgACkiALiUxAA1lAEocOGay7irSvlrVQA/KOABJMMZXLzAXXnDherhAYSJABIIxFSEpqr6Y+MTiZNShOEimuAqAXn61hKSUmFdM2LPNi/yiksIcIA</a></p>\n<p>Is this a regression, or is this just something normal that happens on release candidate toolchains?</p>",
        "id": 574868344,
        "sender_full_name": "Grant Yang",
        "timestamp": 1771564430
    },
    {
        "content": "<p>It's easier if you share the code like this, it comes with a link to Lean web:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Polynomial</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">CommRing</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">CommRing</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Algebra</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">]</span>\n<span class=\"bp\">#</span><span class=\"n\">eval</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">versionString</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">isAdjoinRoot_ofAlgEquiv</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">[</span><span class=\"n\">X</span><span class=\"o\">])</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">e</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">R</span><span class=\"o\">[</span><span class=\"n\">X</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"bp\">‚ß∏</span><span class=\"w\"> </span><span class=\"n\">Ideal</span><span class=\"bp\">.</span><span class=\"n\">span</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">f</span><span class=\"o\">})</span><span class=\"w\"> </span><span class=\"bp\">‚âÉ‚Çê</span><span class=\"o\">[</span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IsAdjoinRoot</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"n\">f</span>\n<span class=\"w\">  </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">IsAdjoinRoot</span><span class=\"bp\">.</span><span class=\"n\">ofAdjoinRootEquiv</span><span class=\"w\"> </span><span class=\"n\">e</span>\n</code></pre></div>",
        "id": 574904051,
        "sender_full_name": "Jovan Gerbscheid",
        "timestamp": 1771581802
    },
    {
        "content": "<p>From what I understand there has been some work/changes on how to figure out if something is non-computable, so I guess the changing error messages are a side effect. The new error message is indeed a lot more obscure!</p>",
        "id": 574904355,
        "sender_full_name": "Jovan Gerbscheid",
        "timestamp": 1771581898
    },
    {
        "content": "<p>Thanks for the reports, this should be fixed by <a href=\"https://github.com/leanprover-community/mathlib4/pull/12625\">#12625</a> but I'll need to wait for Mathlib to be compiled against it to verify</p>",
        "id": 574993192,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1771607836
    },
    {
        "content": "<p>Oh this is also <a class=\"message-link\" href=\"/#narrow/channel/287929-mathlib4/topic/Cardinals.20-.20Failed.20to.20find.20LCNF.20signature/near/574922623\">#mathlib4 &gt; Cardinals - Failed to find LCNF signature @ üí¨</a>  and <a class=\"message-link\" href=\"/#narrow/channel/217875-Is-there-code-for-X.3F/topic/Functoriality.20of.20MvPolynomial/near/574736623\">#Is there code for X? &gt; Functoriality of MvPolynomial @ üí¨</a>, thanks</p>",
        "id": 575013459,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1771615163
    },
    {
        "content": "<p>(<a href=\"https://github.com/leanprover/lean4/pull/12625\">lean4#12625</a>)</p>",
        "id": 575014023,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1771615393
    }
]