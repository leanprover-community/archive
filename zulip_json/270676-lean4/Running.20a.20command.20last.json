[
    {
        "content": "<p>With the parallel elaboration of Lean files, most command have a chance of finishing their elaboration in a non-sequential order.  Is it possible to tell one command (say the last one of a file), to be processed only when everything else has finished processing?</p>",
        "id": 529353320,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1752785130
    },
    {
        "content": "<p>You can wait on the kernel env for that, Environment.toKernelEnv</p>",
        "id": 529412066,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1752826417
    },
    {
        "content": "<p>I have been trying to play with <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Lean.Environment.toKernelEnv#doc\">docs#Lean.Environment.toKernelEnv</a>, but I am not sure that I know how to use it.  Should I simply add</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">env</span><span class=\"w\"> </span><span class=\"bp\">‚Üê</span><span class=\"w\"> </span><span class=\"n\">getEnv</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">env</span><span class=\"bp\">.</span><span class=\"n\">toKernelEnv</span>\n</code></pre></div>\n<p>to my code?</p>",
        "id": 529445213,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1752838863
    },
    {
        "content": "<p>Also, while investigating this issue, I think that what I actually wanted was to wait for the <em>linters</em> to have finished elaborating.  Is there a way to make a command execute after all the previous (from the perspective of command location in the file) linter calls have completed?</p>",
        "id": 529445401,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1752838960
    },
    {
        "content": "<p>Also, while I would like to have an answer to the above, I was also wondering if it is possible to access the whole syntax tree of a file.  E.g. something that has a root node and then every command as a child of this root node, or something similar.</p>",
        "id": 529445554,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1752839039
    },
    {
        "content": "<p>(Having this \"module syntax tree\" would bypass for me the need to wait for linter execution, although I would still be curious to know if it is possible to wait for them anyway!)</p>",
        "id": 529445607,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1752839071
    }
]