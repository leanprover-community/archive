[
    {
        "content": "<p>What is the logic for why <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=instSMulOfMul#doc\">docs#instSMulOfMul</a> has priority less than 1000 (it's 910 in core)?</p>\n<p>In Mathlib PR <a href=\"https://github.com/leanprover-community/mathlib4/pull/34077\">#34077</a> I made a copy of the instance with priority 1100 and it gives a 290G instruction speedup in mathlib; one file gets substantially slower but that's because that file has a declaration which is borked because of <a href=\"https://github.com/leanprover/lean4/pull/12102\">lean4#12102</a> ; the hack <a href=\"https://github.com/leanprover-community/mathlib4/pull/34088\">#34088</a> which works around this issue, in tandem with <a href=\"https://github.com/leanprover-community/mathlib4/pull/34077\">#34077</a>, gives a saving in mathlib of 463.2G (see <a href=\"https://github.com/leanprover-community/mathlib4/pull/34077#issuecomment-3856115722\">here</a> ).</p>\n<p>My argument for making the priority &gt; 1000 in mathlib is \"this instance is essentially always the right one when it applies,  and is essentially always quick to fail when it isn't\". Does this also apply to core and other applications? I am unclear about what the counterargument is, but presumably the instance is at 910 for a reason.</p>\n<p>I write more about my thoughts <a href=\"#narrow/channel/287929-mathlib4/topic/priority.20hacks/near/574353616\">here</a>.</p>",
        "id": 575121567,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1771718357
    },
    {
        "content": "<p>Looks like the instance was added in <a href=\"https://github.com/leanprover/lean4/pull/8401/changes/e9e700bc5448d349d875a740d90565489cf78503\">this commit</a> with a priority of 910. Maybe <span class=\"user-mention\" data-user-id=\"110087\">@Kim Morrison</span> remembers why?</p>",
        "id": 575138702,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1771738338
    }
]