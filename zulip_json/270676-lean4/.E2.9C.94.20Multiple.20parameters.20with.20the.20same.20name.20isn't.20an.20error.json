[
    {
        "content": "<p>I am assuming this is because functions are curried but it still \"feels wrong\". </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">tt</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Float</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">a</span>\n<span class=\"bp\">#</span><span class=\"n\">eval</span><span class=\"w\"> </span><span class=\"n\">tt</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"mf\">2.0</span><span class=\"w\"> </span><span class=\"c1\">-- returns 2.0</span>\n</code></pre></div>\n<p>Also, while it's obvious here, I noticed it when writing a more complex function with interspersed type parameters and type classes, so the two <code>a</code>s were not near each other, so it wasn't as obvious as in this example:  Thoughts?</p>",
        "id": 473416006,
        "sender_full_name": "Tom",
        "timestamp": 1727589273
    },
    {
        "content": "<p>You know that joke where a patient says \"doctor, it hurts when I bend my arm like this\" \"then don't do that!\"? :-)</p>\n<p>There's some feedback in the editor in this case at least, where the first <code>a</code> gets underlined with an 'unused variable' warning:</p>\n<p><a href=\"/user_uploads/3121/vGaxs0Jj5QFzVskQzliGzHCw/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/vGaxs0Jj5QFzVskQzliGzHCw/image.png\" title=\"image.png\"><img data-original-dimensions=\"492x58\" src=\"/user_uploads/thumbnail/3121/vGaxs0Jj5QFzVskQzliGzHCw/image.png/840x560.webp\"></a></div><p>Maybe it would be worth a warning about reused variables in binder lists, but it would be easy to circumvent with things like</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">tt</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Float</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">a</span>\n</code></pre></div>\n<p>We don't want to disable shadowing entirely, since it's one of the ways you can do something like mutation in functional programming.</p>",
        "id": 473416518,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1727589709
    },
    {
        "content": "<p>I was recently thinking of writing a linter that flags when <code>variable</code> introduces the same name.</p>",
        "id": 473416534,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1727589716
    },
    {
        "content": "<blockquote>\n<p>You know that joke a patient says \"doctor, it hurts when I bend my arm like this\" \"then don't do that!\"? :-)</p>\n</blockquote>\n<p><span aria-label=\"rolling on the floor laughing\" class=\"emoji emoji-1f923\" role=\"img\" title=\"rolling on the floor laughing\">:rolling_on_the_floor_laughing:</span> </p>\n<p>Noted.  If as expected, I will move on.</p>\n<p><span class=\"user-mention\" data-user-id=\"321459\">@Damiano Testa</span> - there's already a lint but I couldn't think of a reason why this should be a \"warning\" and not a error.  <span class=\"user-mention\" data-user-id=\"306601\">@Kyle Miller</span> says it's useful, so I'll take his word for it <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 473416731,
        "sender_full_name": "Tom",
        "timestamp": 1727589852
    },
    {
        "content": "<p>Even though - on second thought:</p>\n<p>It feels like the \"weird stuff\" shouldn't be the default, i.e. be more like Rust and less like C++, if I could use that analogy.  The principle of least surprise and all that.</p>\n<p>That is, perhaps the <code>(a : Nat) (a : Float)</code> should be an error and if you want to do hiding, you would need to explicitly write out the \"long form\"</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">tt</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Float</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">a</span>\n</code></pre></div>",
        "id": 473417046,
        "sender_full_name": "Tom",
        "timestamp": 1727590100
    },
    {
        "content": "<p>Damiano is talking about this, which doesn't have any linter warnings:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span>\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Int</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 473417075,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1727590142
    },
    {
        "content": "<blockquote>\n<p>It feels like the \"weird stuff\" shouldn't be the default</p>\n</blockquote>\n<p>Lean's not going out of its way to be weird, this is just a consequence of how it works.</p>",
        "id": 473417195,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1727590223
    },
    {
        "content": "<p>In your actual example, you're saying you had a long binder list with an accidental repeated variable?</p>",
        "id": 473417209,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1727590249
    },
    {
        "content": "<p>By the way, are you familiar with the feature where if you put your cursor right before a variable, it highlights all the actual uses of it?</p>",
        "id": 473417232,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1727590277
    },
    {
        "content": "<p>Quickly playing around, this also has no warnings:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">class</span><span class=\"w\"> </span><span class=\"n\">TT</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">tt</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span>\n</code></pre></div>",
        "id": 473417237,
        "sender_full_name": "Tom",
        "timestamp": 1727590284
    },
    {
        "content": "<p>Right, all binder lists work the same way.</p>",
        "id": 473417289,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1727590323
    },
    {
        "content": "<p>Kyle's interpretation is what I had in mind: shadowing would be allowed, but not for binders introduced by <code>variable</code>.</p>",
        "id": 473417422,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1727590445
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"306601\">Kyle Miller</span> <a href=\"#narrow/stream/270676-lean4/topic/Multiple.20parameters.20with.20the.20same.20name.20isn't.20an.20error/near/473417232\">said</a>:</p>\n<blockquote>\n<p>By the way, are you familiar with the feature where if you put your cursor right before a variable, it highlights all the actual uses of it?</p>\n</blockquote>\n<p>Wow - I didn't realize it was semantic and understands scopes!  I actually just assumed VSCode was just matching the name.</p>",
        "id": 473417477,
        "sender_full_name": "Tom",
        "timestamp": 1727590502
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"321459\">@Damiano Testa</span> </p>\n<blockquote>\n<p>Kyle's interpretation is what I had in mind: shadowing would be allowed</p>\n</blockquote>\n<p>I am quite new to Lean so can't really support my argument with experience, but in other languages I know shadowing is typically more the exception than a common thing.  So my only suggestion is that perhaps shadowing can be allowed but requires a \"special incantation\"/long form.</p>\n<p>Happy to close the thread, thank you both.</p>",
        "id": 473417856,
        "sender_full_name": "Tom",
        "timestamp": 1727590843
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"515083\">Tom</span> has marked this topic as resolved.</p>",
        "id": 473417861,
        "sender_full_name": "Notification Bot",
        "timestamp": 1727590848
    },
    {
        "content": "<p>Given that binder names do matter for named arguments, it's probably worth having a linter that warns about duplicate binder names. It just has to look at the types of each declaration after elaboration.</p>",
        "id": 473418544,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1727591493
    }
]