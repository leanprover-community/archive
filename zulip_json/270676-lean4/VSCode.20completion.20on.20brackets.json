[
    {
        "content": "<p>VSCode now proposes me to auto-complete <code>b)</code> to <code>Mathlib.Notation3.«termExpand_binders%(_=&gt;_)_,_»</code> <span aria-label=\"exhausted\" class=\"emoji emoji-1f625\" role=\"img\" title=\"exhausted\">:exhausted:</span> and similar for other characters followed by a closing bracket. That's especially annoying because there's lots of places where I'd like to have a line break after a closing bracket and always accidentally tricker the replacement. Is anyone else experiencing this?</p>",
        "id": 519547911,
        "sender_full_name": "Jakob von Raumer",
        "timestamp": 1747814582
    },
    {
        "content": "<p>Mathlib users probably don't encounter this issue because it sets the auto-completion button to be <code>Tab</code> instead of <code>Enter</code>.</p>\n<p>This particular issue is probably due to the language server telling VS Code that the completion lists we give it are complete to minimize latency, and so VS Code doesn't re-request the completion list when you type <code>)</code>, and instead filters the previous completion list by <code>b)</code>. I.e. the <code>Mathlib.Notation3.«termExpand_binders%(_=&gt;_)_,_»</code> completion was likely already there before, and now VS Code just continues displaying it when you type <code>)</code>.</p>\n<p>I'm a bit surprised that VS Code doesn't respect the word boundary tokens that we set for Lean here, though. I would have imagined that when it encounters a character that isn't part of a word, it will re-request the completions, but apparently it doesn't.</p>\n<p>I'll have to think about this one for a bit <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span></p>",
        "id": 519550728,
        "sender_full_name": "Marc Huisinga",
        "timestamp": 1747815465
    },
    {
        "content": "<p>Ahh, setting it to <code>Tab</code> will actually be good enough for me, I'll hardly press <code>Tab</code> after a closing bracket <span aria-label=\"grinning face with smiling eyes\" class=\"emoji emoji-1f601\" role=\"img\" title=\"grinning face with smiling eyes\">:grinning_face_with_smiling_eyes:</span></p>",
        "id": 519550931,
        "sender_full_name": "Jakob von Raumer",
        "timestamp": 1747815526
    },
    {
        "content": "<p>I'm still not entirely happy with that solution though, since it's quite difficult for people to figure out that <code>Tab</code> triggers auto-completion.</p>\n<p>I do have a solution for the similar keyword completion issue (e.g. you type <code>do</code> and just as you want to press <code>Enter</code>, the completion menu pops up and you trigger the <code>do</code> completion instead) in mind that I'd like to implement in the future, but I'm not sure about this example yet.</p>",
        "id": 519551338,
        "sender_full_name": "Marc Huisinga",
        "timestamp": 1747815667
    },
    {
        "content": "<p>Tracked at <a href=\"https://github.com/leanprover/lean4/pull/8430\">lean4#8430</a>.</p>",
        "id": 519553906,
        "sender_full_name": "Marc Huisinga",
        "timestamp": 1747816429
    },
    {
        "content": "<p>There is a VS Code setting to get you out of this \"enter randomly autocompletes in Lean files\" hell and I always have to ask <span class=\"user-mention\" data-user-id=\"110031\">@Patrick Massot</span> what it is (sorry to ping you twice today Patrick -- I just scrolled back through years of our messages but my search is too weak to find the DM when you told me how to switch it off in 2021 or so)</p>",
        "id": 519597190,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1747829886
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110038\">@Kevin Buzzard</span> You might find the section on auto-completion in the VS Code extension manual helpful: <a href=\"https://github.com/leanprover/vscode-lean4/blob/master/vscode-lean4/manual/manual.md#auto-completion\">https://github.com/leanprover/vscode-lean4/blob/master/vscode-lean4/manual/manual.md#auto-completion</a></p>",
        "id": 519609402,
        "sender_full_name": "Marc Huisinga",
        "timestamp": 1747833229
    },
    {
        "content": "<p>Yes, the VSCode extension manual says it:</p>\n<blockquote>\n<p>This behavior can be disabled by setting the 'Accept Suggestion On Enter' configuration option to 'off'.</p>\n</blockquote>",
        "id": 519610587,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1747833528
    }
]