[
    {
        "content": "<p>I'm trying to switch from lean3 to lean4. My understanding is that elan should be used to do that. I ran</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"bp\">$</span> <span class=\"n\">elan</span> <span class=\"k\">show</span>\n<span class=\"n\">installed</span> <span class=\"n\">toolchains</span>\n<span class=\"c1\">--------------------</span>\n\n<span class=\"n\">stable</span> <span class=\"o\">(</span><span class=\"n\">default</span><span class=\"o\">)</span>\n<span class=\"n\">leanprover</span><span class=\"bp\">-</span><span class=\"n\">community</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mi\">3</span><span class=\"bp\">.</span><span class=\"mi\">16</span><span class=\"bp\">.</span><span class=\"mi\">3</span>\n<span class=\"n\">leanprover</span><span class=\"bp\">-</span><span class=\"n\">community</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mi\">3</span><span class=\"bp\">.</span><span class=\"mi\">44</span><span class=\"bp\">.</span><span class=\"mi\">1</span>\n<span class=\"n\">leanprover</span><span class=\"bp\">-</span><span class=\"n\">community</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mi\">3</span><span class=\"bp\">.</span><span class=\"mi\">46</span><span class=\"bp\">.</span><span class=\"mi\">0</span>\n<span class=\"n\">leanprover</span><span class=\"bp\">-</span><span class=\"n\">community</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mi\">3</span><span class=\"bp\">.</span><span class=\"mi\">48</span><span class=\"bp\">.</span><span class=\"mi\">0</span>\n<span class=\"n\">leanprover</span><span class=\"bp\">-</span><span class=\"n\">community</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mi\">3</span><span class=\"bp\">.</span><span class=\"mi\">50</span><span class=\"bp\">.</span><span class=\"mi\">3</span>\n<span class=\"n\">leanprover</span><span class=\"bp\">-</span><span class=\"n\">community</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mi\">3</span><span class=\"bp\">.</span><span class=\"mi\">51</span><span class=\"bp\">.</span><span class=\"mi\">1</span>\n<span class=\"n\">leanprover</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"o\">:</span><span class=\"n\">nightly</span>\n<span class=\"n\">leanprover</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"o\">:</span><span class=\"n\">stable</span>\n\n<span class=\"n\">active</span> <span class=\"n\">toolchain</span>\n<span class=\"c1\">----------------</span>\n</code></pre></div>\n<p>so I tried to set the default to lean4, but got the following error:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"bp\">$</span> <span class=\"n\">elan</span> <span class=\"n\">default</span> <span class=\"n\">lean4</span>\n<span class=\"n\">info</span><span class=\"o\">:</span> <span class=\"n\">downloading</span> <span class=\"n\">component</span> <span class=\"bp\">'</span><span class=\"n\">lean'</span>\n<span class=\"n\">Error</span><span class=\"o\">(</span><span class=\"n\">Download</span><span class=\"o\">(</span><span class=\"n\">HttpStatus</span><span class=\"o\">(</span><span class=\"mi\">404</span><span class=\"o\">)),</span> <span class=\"n\">State</span> <span class=\"o\">{</span> <span class=\"n\">next_error</span><span class=\"o\">:</span> <span class=\"n\">None</span><span class=\"o\">,</span> <span class=\"n\">backtrace</span><span class=\"o\">:</span> <span class=\"n\">InternalBacktrace</span> <span class=\"o\">{</span> <span class=\"n\">backtrace</span><span class=\"o\">:</span> <span class=\"n\">None</span> <span class=\"o\">}</span> <span class=\"o\">})</span>\n<span class=\"n\">error</span><span class=\"o\">:</span> <span class=\"n\">could</span> <span class=\"n\">not</span> <span class=\"n\">download</span> <span class=\"n\">nonexistent</span> <span class=\"n\">lean</span> <span class=\"n\">version</span> <span class=\"bp\">`</span><span class=\"n\">lean4</span><span class=\"bp\">`</span>\n<span class=\"n\">info</span><span class=\"o\">:</span> <span class=\"n\">caused</span> <span class=\"kd\">by</span><span class=\"o\">:</span> <span class=\"n\">could</span> <span class=\"n\">not</span> <span class=\"n\">download</span> <span class=\"n\">file</span> <span class=\"k\">from</span> <span class=\"bp\">'</span><span class=\"n\">https</span><span class=\"o\">:</span><span class=\"bp\">//</span><span class=\"n\">github.com</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">releases</span><span class=\"bp\">/</span><span class=\"n\">expanded_assets</span><span class=\"bp\">/</span><span class=\"n\">lean4'</span> <span class=\"n\">to</span> <span class=\"bp\">'</span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">Users</span><span class=\"bp\">\\</span><span class=\"n\">qculver</span><span class=\"bp\">\\.</span><span class=\"n\">elan</span><span class=\"bp\">\\</span><span class=\"n\">tmp</span><span class=\"bp\">\\</span><span class=\"n\">f3u9a2b9zlod_wii_file'</span>\n<span class=\"n\">info</span><span class=\"o\">:</span> <span class=\"n\">caused</span> <span class=\"kd\">by</span><span class=\"o\">:</span> <span class=\"n\">http</span> <span class=\"n\">request</span> <span class=\"n\">returned</span> <span class=\"n\">an</span> <span class=\"n\">unsuccessful</span> <span class=\"n\">status</span> <span class=\"n\">code</span><span class=\"o\">:</span> <span class=\"mi\">404</span>\n</code></pre></div>\n<p>I tried defaulting to a few other things (e.g. <code>lean4:stable</code>) but they were all called \"invalid toolchains\".</p>\n<p>Am I going about this the right way? Otherwise, what should I be doing?</p>",
        "id": 408110959,
        "sender_full_name": "Quinn Culver",
        "timestamp": 1702615780
    },
    {
        "content": "<p>Have you tried the full toolchain name, e.g. <code>leanprover/lean4:stable</code>?</p>\n<p>But actually you need a lot more for porting a project from Lean 3 to Lean 4, as Lean 4 is not backward-compatible with Lean 3.</p>",
        "id": 408112374,
        "sender_full_name": "Utensil Song",
        "timestamp": 1702616596
    },
    {
        "content": "<p>Basically, you need to follow the instructions in Lean 4 documents, create a new Lean 4 project, port code over with <code>mathport</code> and a lot of manual modifications if you depend on mathlib or have meta-programming code.</p>",
        "id": 408112598,
        "sender_full_name": "Utensil Song",
        "timestamp": 1702616734
    },
    {
        "content": "<p>IIUC there isn't a self-contained migration guide for Lean 3 projects, some hints are given like <a href=\"https://github.com/leanprover-community/mathlib4/wiki/Using-mathlib4-as-a-dependency#using-mathlib4-as-a-dependency\">here</a> and links in <a href=\"#narrow/stream/113489-new-members/topic/Migration.20guide/near/403853801\">this message</a>.</p>",
        "id": 408112888,
        "sender_full_name": "Utensil Song",
        "timestamp": 1702616947
    },
    {
        "content": "<p><code>leanprover/lean4:stable</code> worked. Thanks so much!</p>\n<p>I'm not actually trying to port anything (yet); just want to make sure lean4 is working.</p>",
        "id": 408119061,
        "sender_full_name": "Quinn Culver",
        "timestamp": 1702620767
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"245476\">Quinn Culver</span> has marked this topic as resolved.</p>",
        "id": 408119076,
        "sender_full_name": "Notification Bot",
        "timestamp": 1702620774
    }
]