[
    {
        "content": "<p>I often rely on the autocompletion in <a href=\"https://leanprover-community.github.io/mathlib4_docs/\">https://leanprover-community.github.io/mathlib4_docs/</a> when I search for a lemma or definition. It works great, but every now and then it can be a bit annoying. A good example of this is that I searched for <code>CategoryStruct</code>, hoping to get the result <code>CategoryTheory.CategoryStruct</code>. But instead I only got results about <code>CategoryTheory.StructuredArrow</code>. Is this something that could be improved?</p>\n<p>This seems to be the same autocompletion as the one in the Lean language server, which is why I put this in the lean4 channel.</p>",
        "id": 532595510,
        "sender_full_name": "Jovan Gerbscheid",
        "timestamp": 1754252501
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"479299\">Jovan Gerbscheid</span> <a href=\"#narrow/channel/270676-lean4/topic/Autocompletion.20can't.20find.20.60CategoryStruct.60/near/532595510\">said</a>:</p>\n<blockquote>\n<p>This seems to be the same autocompletion as the one in the Lean language server, which is why I put this in the lean4 channel.</p>\n</blockquote>\n<p>How did you come to that conclusion?</p>",
        "id": 532672647,
        "sender_full_name": "Marc Huisinga",
        "timestamp": 1754295542
    },
    {
        "content": "<p>I went in a Lean file and wrote</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">CategoryStruct</span>\n</code></pre></div>\n<p>And to me the autocomplete suggestions looked the same as the suggestions in the mathlib docs website.</p>",
        "id": 532695605,
        "sender_full_name": "Jovan Gerbscheid",
        "timestamp": 1754302769
    },
    {
        "content": "<p>Auto-completion finds <code>CategoryTheory.CategoryStruct</code> as the first result in the MWE you posted, though?</p>",
        "id": 532702968,
        "sender_full_name": "Marc Huisinga",
        "timestamp": 1754305350
    },
    {
        "content": "<p><a href=\"/user_uploads/3121/oouwyzQxpLAXN6meQJfIOcVV/afbeelding.png\">afbeelding.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/oouwyzQxpLAXN6meQJfIOcVV/afbeelding.png\" title=\"afbeelding.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"1303x663\" src=\"/user_uploads/thumbnail/3121/oouwyzQxpLAXN6meQJfIOcVV/afbeelding.png/840x560.webp\"></a></div><p>Ah yes</p>",
        "id": 532703472,
        "sender_full_name": "Jovan Gerbscheid",
        "timestamp": 1754305524
    },
    {
        "content": "<p>It's the first result in your screenshot</p>",
        "id": 532703547,
        "sender_full_name": "Marc Huisinga",
        "timestamp": 1754305549
    },
    {
        "content": "<p>Oops. I was thrown off by the highlighting</p>",
        "id": 532703624,
        "sender_full_name": "Jovan Gerbscheid",
        "timestamp": 1754305573
    },
    {
        "content": "<p>So I guess then my question is, can the website use the same autocompletion as the Lean server?</p>",
        "id": 532704138,
        "sender_full_name": "Jovan Gerbscheid",
        "timestamp": 1754305743
    },
    {
        "content": "<p>At the time when <a href=\"https://github.com/leanprover/doc-gen4/blob/main/static/declaration-data.js#L149-L199\">this</a> was written the precise completion algorithm of the server used to be far more computationally intense than today so we implemented a differen one that could be used for interactive web applications with less computational resources and higher interactivity requirements. I think nowadays we could actually port what the LSP is now using to doc-gen, I would be happy to review a PR for that.</p>",
        "id": 532852221,
        "sender_full_name": "Henrik BÃ¶ving",
        "timestamp": 1754379196
    }
]