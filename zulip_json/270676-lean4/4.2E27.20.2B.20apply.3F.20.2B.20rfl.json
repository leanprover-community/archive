[
    {
        "content": "<p>I see <a href=\"https://github.com/leanprover/lean4/pull/11466\">leanprover/lean4#11466</a> so I suspect the answer is \"yes that's intended\", but just to confirm -- the following trivial examples (from <code>lean.nvim</code>'s test suite) both used to produce <code>rfl</code> proofs with old <code>apply?</code>, and now produce slightly more elaborate proof terms. That's intentional in order to avoid checking for this kind of simple proof in other cases, right?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">apply?</span>\n<span class=\"w\">                      </span><span class=\"bp\">â””â”€â”€â”€â”€</span><span class=\"w\"> </span><span class=\"n\">Try</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"o\">:</span>\n<span class=\"w\">                              </span><span class=\"o\">[</span><span class=\"n\">apply</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">eq_of_beq_eq_true</span><span class=\"w\"> </span><span class=\"n\">rfl</span>\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">ğ”½</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ğ”½</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">exact?</span>\n<span class=\"w\">                                         </span><span class=\"bp\">â””â”€â”€â”€â”€</span><span class=\"w\"> </span><span class=\"n\">Try</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"o\">:</span>\n<span class=\"w\">                                                 </span><span class=\"o\">[</span><span class=\"n\">apply</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">âˆ˜</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">rfl</span>\n</code></pre></div>",
        "id": 564474300,
        "sender_full_name": "Julian Berman",
        "timestamp": 1766068252
    },
    {
        "content": "<p>Yes, this is intentional. Previously, <code>apply?</code> and <code>exact?</code> would first run <code>solve_by_elim</code> directly on the goal, and short-circuit if that succeeded. This was what would produce the <code>rfl</code> proofs.</p>\n<p>I decided this was not the appropriate behaviour: these are theorem lookup tools, not general purpose \"solve this for me!\" tools.</p>\n<p>If you would like the old behaviour, I recommend using <code>try?</code>, which calls both <code>solve_by_elim</code> and <code>exact?</code> internally, amongst many other (and user extensible!) things.</p>",
        "id": 564605828,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1766111601
    }
]