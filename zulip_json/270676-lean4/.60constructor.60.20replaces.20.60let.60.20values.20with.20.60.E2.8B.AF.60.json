[
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"873547\">Robin Arnez</span> <a href=\"#narrow/channel/287929-mathlib4/topic/.60use.60.20replaces.20.60let.60.20values.20with.20.60.E2.8B.AF.60/near/539033360\">said</a>:</p>\n<blockquote>\n<p><code>use</code> probably produces non-synthetic-opaque goals</p>\n</blockquote>\n<p>Looks like this is <code>constructor</code>'s fault:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">easy</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n<span class=\"w\">  </span><span class=\"n\">constructor</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">rotate_left</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"c1\">-- `:= ⋯` in the infoview</span>\n<span class=\"w\">    </span><span class=\"n\">refine</span><span class=\"w\"> </span><span class=\"bp\">?_</span>\n<span class=\"w\">    </span><span class=\"c1\">-- `:= 1` in the infoview</span>\n<span class=\"w\">    </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">n</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"c1\">-- `:= ⋯` in the infoview</span>\n<span class=\"w\">    </span><span class=\"n\">refine</span><span class=\"w\"> </span><span class=\"bp\">?_</span>\n<span class=\"w\">    </span><span class=\"c1\">-- `:= 1` in the infoview</span>\n<span class=\"w\">    </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">rfl</span>\n</code></pre></div>\n<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/channel/287929-mathlib4/topic/.60use.60.20replaces.20.60let.60.20values.20with.20.60.E2.8B.AF.60/near/539031219\">said</a>:</p>\n<blockquote>\n<p><code>set_option pp.showLetValues.threshold 3</code> seems to be enough to fix it</p>\n</blockquote>",
        "id": 539033425,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1757673810
    },
    {
        "content": "<p><a href=\"#narrow/channel/270676-lean4/topic/.60constructor.60.20replaces.20.60let.60.20values.20with.20.60.E2.8B.AF.60/near/539033425\">A message</a> was moved here from <a href=\"#narrow/channel/287929-mathlib4/topic/.60use.60.20replaces.20.60let.60.20values.20with.20.60.E2.8B.AF.60\">#mathlib4 &gt; &#96;use&#96; replaces &#96;let&#96; values with &#96;⋯&#96;</a> by <span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span>.</p>",
        "id": 539033598,
        "sender_full_name": "Notification Bot",
        "timestamp": 1757673879
    },
    {
        "content": "<p><code>apply</code> seems impacted too:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">easy</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">True</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n<span class=\"w\">  </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">id</span>\n<span class=\"w\">  </span><span class=\"c1\">-- `:= ⋯` in the infoview</span>\n<span class=\"w\">  </span><span class=\"n\">refine</span><span class=\"w\"> </span><span class=\"bp\">?_</span>\n<span class=\"w\">  </span><span class=\"c1\">-- `:= 1` in the infoview</span>\n<span class=\"w\">  </span><span class=\"n\">trivial</span>\n</code></pre></div>",
        "id": 539034188,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1757674090
    },
    {
        "content": "<p>The apply version is <a href=\"https://github.com/leanprover/lean4/pull/9994\">lean4#9994</a>, and the message from Kyle applies to the constructor version too, I think</p>",
        "id": 539051852,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1757679925
    },
    {
        "content": "<p>Indeed Kyle's suggestion to tweak the heuristics would be a reasonable ground</p>",
        "id": 539058511,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1757681829
    }
]