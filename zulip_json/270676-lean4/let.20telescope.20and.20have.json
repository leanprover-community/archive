[
    {
        "content": "<p>Can someone explain me this behavior?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">run_meta</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">e</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"o\">(</span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n<span class=\"w\">             </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"mi\">2</span>\n<span class=\"w\">             </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">10</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">e'</span><span class=\"w\"> </span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">letTelescope</span><span class=\"w\"> </span><span class=\"n\">e</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">xs</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">    </span><span class=\"n\">mkLetFVars</span><span class=\"w\"> </span><span class=\"n\">xs</span><span class=\"w\"> </span><span class=\"n\">b</span>\n<span class=\"w\">  </span><span class=\"n\">logInfo</span><span class=\"w\"> </span><span class=\"n\">e'</span><span class=\"w\">  </span><span class=\"c1\">-- fun a b =&gt; a + b + 10</span>\n</code></pre></div>\n<p>Why do those <code>have</code> bindings get turned into a lambda? Is this intended behavior? I find this really surprising behavior.</p>",
        "id": 554833428,
        "sender_full_name": "Tomas Skrivan",
        "timestamp": 1762835163
    },
    {
        "content": "<p>I can't tell you why but you can unset the generalize flag on mkLetFVars to not make it do that</p>",
        "id": 554859582,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1762849978
    },
    {
        "content": "<p>Hmm strange, there is also a flat on <code>letTelescope</code> to prevent that from happening but all <code>have</code> gets turned into <code>let</code>, but I don't care too much so it works for me.</p>",
        "id": 555002457,
        "sender_full_name": "Tomas Skrivan",
        "timestamp": 1762899460
    }
]