[
    {
        "content": "<p>Is <code>≠</code> not a <code>binrel%</code>?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Int</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"mi\">0</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">l</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"mi\">0</span>\n\n<span class=\"sd\">/--</span>\n<span class=\"sd\">info: ↑l = k : Prop</span>\n<span class=\"sd\">-/</span>\n<span class=\"bp\">#</span><span class=\"n\">guard_msgs</span><span class=\"w\"> </span><span class=\"k\">in</span>\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">l</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">k</span>\n\n<span class=\"sd\">/--</span>\n<span class=\"sd\">error: Application type mismatch: In the application</span>\n<span class=\"sd\">  l ≠ k</span>\n<span class=\"sd\">the argument</span>\n<span class=\"sd\">  k</span>\n<span class=\"sd\">has type</span>\n<span class=\"sd\">  Int : Type</span>\n<span class=\"sd\">but is expected to have type</span>\n<span class=\"sd\">  Nat : Type</span>\n<span class=\"sd\">---</span>\n<span class=\"sd\">info: l ≠ sorry : Prop</span>\n<span class=\"sd\">-/</span>\n<span class=\"bp\">#</span><span class=\"n\">guard_msgs</span><span class=\"w\"> </span><span class=\"k\">in</span>\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">l</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"n\">k</span>\n</code></pre></div>\n<p>I think we should aim to make what <code>=</code> and <code>≠</code> do here match as closely as possible.</p>",
        "id": 526236907,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1751158012
    },
    {
        "content": "<p>That's strange. <code>l ≤ k</code> and <code>l &lt; k</code> works correctly.</p>",
        "id": 526280238,
        "sender_full_name": "Jz Pan",
        "timestamp": 1751214487
    },
    {
        "content": "<p>Maybe it's because it's an abbrev (and I hate abbrevs, lol)</p>",
        "id": 526280457,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1751214773
    },
    {
        "content": "<p>It's not because it's an <code>abbrev</code></p>",
        "id": 526280481,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1751214796
    },
    {
        "content": "<p>Is because it's not a <code>binrel%</code></p>",
        "id": 526280497,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1751214816
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Int</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"mi\">0</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">l</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"mi\">0</span>\n\n<span class=\"c1\">-- fails</span>\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">Eq</span><span class=\"w\"> </span><span class=\"n\">l</span><span class=\"w\"> </span><span class=\"n\">k</span>\n\n<span class=\"c1\">-- succeeds (this is what `l = k` expands to)</span>\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">binrel</span><span class=\"bp\">%</span><span class=\"w\"> </span><span class=\"n\">Eq</span><span class=\"w\"> </span><span class=\"n\">l</span><span class=\"w\"> </span><span class=\"n\">k</span>\n\n<span class=\"c1\">-- fails (this is what `l ≠ k` expands to)</span>\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">Ne</span><span class=\"w\"> </span><span class=\"n\">l</span><span class=\"w\"> </span><span class=\"n\">k</span>\n\n<span class=\"c1\">-- succeeds</span>\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">binrel</span><span class=\"bp\">%</span><span class=\"w\"> </span><span class=\"n\">Ne</span><span class=\"w\"> </span><span class=\"n\">l</span><span class=\"w\"> </span><span class=\"n\">k</span>\n</code></pre></div>",
        "id": 526281168,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1751215742
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"366779\">Jz Pan</span> <a href=\"#narrow/channel/270676-lean4/topic/Elaboration.20of.20.60.E2.89.A0.60/near/526280238\">said</a>:</p>\n<blockquote>\n<p><code>l ≤ k</code> and <code>l &lt; k</code> works correctly.</p>\n</blockquote>\n<p>These both have <code>binrel%</code> macros</p>",
        "id": 526284618,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1751219615
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"816344\">@Aaron Liu</span> I imagine it's an oversight, since <code>≠</code> isn't defined in <code>Init.Notation</code></p>",
        "id": 526284713,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1751219699
    },
    {
        "content": "<p>Feel free to create a Lean PR adding such a <code>binrel%</code> macro to <code>Init.Core</code> and ping me once mathlib builds.</p>",
        "id": 526284784,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1751219769
    }
]