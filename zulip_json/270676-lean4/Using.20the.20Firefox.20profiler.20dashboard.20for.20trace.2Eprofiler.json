[
    {
        "content": "<p>Being able to use the firefox profiler dashboard to look at <code>trace.profiler</code> output seems really useful, however, I'm having trouble getting the profiler to output the report.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Lean</span>\n\n<span class=\"kn\">set_option</span><span class=\"w\"> </span><span class=\"n\">trace</span><span class=\"bp\">.</span><span class=\"n\">profiler</span><span class=\"bp\">.</span><span class=\"n\">output</span><span class=\"w\"> </span><span class=\"s2\">\"/tmp/out.json\"</span>\n<span class=\"kn\">set_option</span><span class=\"w\"> </span><span class=\"n\">trace</span><span class=\"bp\">.</span><span class=\"n\">profiler</span><span class=\"bp\">.</span><span class=\"n\">output</span><span class=\"bp\">.</span><span class=\"n\">pp</span><span class=\"w\"> </span><span class=\"n\">true</span>\n<span class=\"kn\">set_option</span><span class=\"w\"> </span><span class=\"n\">trace</span><span class=\"bp\">.</span><span class=\"n\">profiler</span><span class=\"w\"> </span><span class=\"n\">true</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">True</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">sleep</span><span class=\"w\"> </span><span class=\"mi\">2000</span>\n<span class=\"w\">  </span><span class=\"n\">constructor</span>\n</code></pre></div>\n<p>I can't seem to find a file at <code>/tmp/out.json</code> if I run this in vscode or Emacs.</p>\n<p>If I run <code>lean</code> manually on the command-line, I can get an output, but then I can't use <code>lake</code> and can't import additional modules, but maybe I can figure out how to do that.</p>\n<div class=\"codehilite\" data-code-language=\"Bash\"><pre><span></span><code>lean<span class=\"w\"> </span>-Dtrace.profiler<span class=\"o\">=</span><span class=\"nb\">true</span><span class=\"w\"> </span>-Dtrace.profiler.output<span class=\"o\">=</span>profile.json<span class=\"w\"> </span>main.lean\n</code></pre></div>",
        "id": 469351723,
        "sender_full_name": "Yann Herklotz",
        "timestamp": 1726049534
    },
    {
        "content": "<p>You can prefix the command with <code>lake env</code> for that</p>",
        "id": 469364624,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1726052675
    },
    {
        "content": "<p>Ah thank you that works perfectly!</p>",
        "id": 469365272,
        "sender_full_name": "Yann Herklotz",
        "timestamp": 1726052832
    }
]