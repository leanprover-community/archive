[
    {
        "content": "<p>In <a href=\"https://github.com/leanprover-community/mathlib4/pull/24441\">my commit to mathlib</a> I need function</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">repeatList</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">u</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">l</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">replicate</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">l</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">flatten</span>\n</code></pre></div>\n<p>It seems to be missing both in lean4 and mathlib, but there are several lemmas including this construction;</p>\n<p>In Init:</p>\n<ol>\n<li><a href=\"https://leanprover-community.github.io/mathlib4_docs/Init/Data/List/Lemmas.html#List.flatten_replicate_nil\">List.flatten_replicate_nil</a></li>\n<li><a href=\"https://leanprover-community.github.io/mathlib4_docs/Init/Data/List/Lemmas.html#List.flatten_replicate_singleton\">List.flatten_replicate_singleton</a></li>\n<li><a href=\"https://leanprover-community.github.io/mathlib4_docs/Init/Data/List/Lemmas.html#List.flatMap_replicate\">List.flatMap_replicate</a></li>\n<li><a href=\"https://leanprover-community.github.io/mathlib4_docs/Init/Data/List/Lemmas.html#List.flatten_replicate_replicate\">List.flatten_replicate_replicate</a></li>\n</ol>\n<p>And Mathlib:</p>\n<ol>\n<li><a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Data/List/Basic.html#List.getLast%3F_flatten_replicate\">List.getLast?_flatten_replicate</a></li>\n<li><a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Data/List/Basic.html#List.head%3F_flatten_replicate\">List.head?_flatten_replicate</a></li>\n<li><a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Data/List/OfFn.html#List.ofFn_fin_repeat\">List.ofFn_fin_repeat</a></li>\n<li><a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/GroupTheory/FreeGroup/Basic.html#FreeAddGroup.nsmul_mk\">FreeAddGroup.nsmul_mk</a></li>\n<li><a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/GroupTheory/FreeGroup/Basic.html#FreeGroup.pow_mk\">FreeGroup.pow_mk</a></li>\n</ol>\n<p>Is it a good idea to make it a separate function and rewrite mentioned lemmas using new definition to get rid of repetitiveness?</p>",
        "id": 515291064,
        "sender_full_name": "Igor Shimanogov",
        "timestamp": 1746016157
    },
    {
        "content": "<p>Probably not? We don't want separate names for every combination of basic functions. This needlessly expands the API surface area.</p>",
        "id": 515292292,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1746016470
    },
    {
        "content": "<p>Note that we do have <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Fin.repeat#doc\">docs#Fin.repeat</a></p>",
        "id": 515304357,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1746019470
    }
]