[
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">System</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">FilePath</span><span class=\"o\">)</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">runtimeDir</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IO</span><span class=\"w\"> </span><span class=\"n\">FilePath</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">return</span><span class=\"w\"> </span><span class=\"s2\">\"/foo\"</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">getSockPath1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IO</span><span class=\"w\"> </span><span class=\"n\">FilePath</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">do</span>\n<span class=\"w\">  </span><span class=\"n\">return</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">runtimeDir</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">join</span><span class=\"w\"> </span><span class=\"s2\">\"timerd.sock\"</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">getSockPath2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IO</span><span class=\"w\"> </span><span class=\"n\">FilePath</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">runtimeDir</span><span class=\"w\"> </span><span class=\"bp\">&lt;&amp;&gt;</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">·.</span><span class=\"n\">join</span><span class=\"w\"> </span><span class=\"s2\">\"timerd.sock\"</span><span class=\"o\">)</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">getSockPath3</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IO</span><span class=\"w\"> </span><span class=\"n\">FilePath</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">runtimeDir</span><span class=\"w\"> </span><span class=\"bp\">&lt;&amp;&gt;.</span><span class=\"n\">join</span><span class=\"w\"> </span><span class=\"s2\">\"timerd.sock\"</span>\n\n<span class=\"c1\">-- /foo/timerd.sock (expected)</span>\n<span class=\"bp\">#</span><span class=\"n\">eval</span><span class=\"w\"> </span><span class=\"n\">getSockPath1</span>\n\n<span class=\"c1\">-- /foo/timerd.sock (expected)</span>\n<span class=\"bp\">#</span><span class=\"n\">eval</span><span class=\"w\"> </span><span class=\"n\">getSockPath2</span>\n\n<span class=\"c1\">-- /foo (unexpected)</span>\n<span class=\"bp\">#</span><span class=\"n\">eval</span><span class=\"w\"> </span><span class=\"n\">getSockPath3</span>\n</code></pre></div>\n<p>I don't really have a good mental model of how operators interact with \"method syntax\". Why does <code>getSockPath3</code> have the result it does?</p>",
        "id": 449013394,
        "sender_full_name": "James Sully",
        "timestamp": 1720075327
    },
    {
        "content": "<blockquote>\n<p>I don't really have a good mental model of how operators interact with \"method syntax\".</p>\n</blockquote>\n<p>They don't. What you wrote is equivalent to <code>runtimeDir &lt;&amp;&gt; (.join \"timerd.sock\")</code>, which is equivalent to <code>runtimeDir &lt;&amp;&gt; (FilePath.join \"timerd.sock\")</code>, which prepends a path to an absolute path, which discards the first path</p>",
        "id": 449023154,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1720078964
    },
    {
        "content": "<p>Ah so it's only for <code>|&gt;</code></p>",
        "id": 449025822,
        "sender_full_name": "James Sully",
        "timestamp": 1720079539
    },
    {
        "content": "<p>That makes sense, thank you</p>",
        "id": 449025867,
        "sender_full_name": "James Sully",
        "timestamp": 1720079553
    }
]