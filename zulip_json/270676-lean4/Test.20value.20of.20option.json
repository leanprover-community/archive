[
    {
        "content": "<p>I presume this is a simple question, but I couldn't find the answer anywhere. How can I test the value of an option? That is, what command can I run to get lean to tell me whether autoImplicit is turned on in my file or not?</p>",
        "id": 499353608,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1739406177
    },
    {
        "content": "<p>I found</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">#</span><span class=\"n\">eval</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">getOptionDecl</span><span class=\"w\"> </span><span class=\"ss\">`autoImplicit</span>\n</code></pre></div>\n<p>but this only tells me the default value, not the current value. Presumably I need to pass in the current env to the correct function, or the IO monad is handling that</p>",
        "id": 499353841,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1739406335
    },
    {
        "content": "<p>Ah! Found it:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">#</span><span class=\"n\">eval</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">getBoolOption</span><span class=\"w\"> </span><span class=\"ss\">`autoImplicit</span>\n</code></pre></div>",
        "id": 499354031,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1739406453
    },
    {
        "content": "<p>For a more type-safe alternative, you can also use <code>Lean.Elab.autoImplicit.get</code>. Here <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Lean.Elab.autoImplicit#doc\">docs#Lean.Elab.autoImplicit</a> is a <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Lean.Option#doc\">docs#Lean.Option</a>; one of these is automatically created when an option is registered.</p>",
        "id": 499356842,
        "sender_full_name": "Jannis Limperg",
        "timestamp": 1739408163
    },
    {
        "content": "<p>Ah, so then I can say</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">#</span><span class=\"n\">eval</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">Elab</span><span class=\"bp\">.</span><span class=\"n\">autoImplicit</span><span class=\"bp\">.</span><span class=\"n\">get</span><span class=\"w\"> </span><span class=\"bp\">&lt;$&gt;</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">getOptions</span>\n</code></pre></div>\n<p>and the idea is that now if I misspell the option name, I get an error rather than a junk value?</p>",
        "id": 499357173,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1739408382
    },
    {
        "content": "<p>Yes, exactly! And you also get a type error if you try to get a <code>Nat</code> out of a <code>Bool</code>-valued <code>Lean.Option</code>.</p>",
        "id": 499357747,
        "sender_full_name": "Jannis Limperg",
        "timestamp": 1739408731
    },
    {
        "content": "<p>Amazing, thank you!</p>",
        "id": 499358185,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1739408978
    }
]