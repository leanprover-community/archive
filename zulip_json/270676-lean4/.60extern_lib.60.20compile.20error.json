[
    {
        "content": "<p>Hey there,</p>\n<p>I am trying to wrap <code>ncurses</code> in lean for a side project, and I'd like to do it as a library that can be used by others (possibly publishing it to Reservoir).</p>\n<p>In the process (at the very beginning actually) I am having issues trying to compile everything, and I am getting compilation errors (actually, linking errors).</p>\n<p>Here is the current code (don't worry it is very tiny): <a href=\"https://git.sr.ht/~vigoux/lcurses\">https://git.sr.ht/~vigoux/lcurses</a></p>\n<p>The error message is:</p>\n<div class=\"codehilite\" data-code-language=\"Text only\"><pre><span></span><code>âœ– [11/11] Building lcurses\ntrace: .&gt; /home/vigourth/.elan/toolchains/stable/bin/leanc -o ././.lake/build/bin/lcurses ././.lake/build/ir/Main.c.o.export ././.lake/build/ir/LCurses/Basic.c.o.export ././.lake/build/ir/LCurses.c.o.export ././.lake/build/lib/libshim.a -lncurses -ldl\ninfo: stderr:\nld.lld: error: undefined reference due to --no-allow-shlib-undefined: dlopen@GLIBC_2.34\n&gt;&gt;&gt; referenced by /lib/x86_64-linux-gnu/libncurses.so.6\n\nld.lld: error: undefined reference due to --no-allow-shlib-undefined: dlsym@GLIBC_2.34\n&gt;&gt;&gt; referenced by /lib/x86_64-linux-gnu/libncurses.so.6\n\nld.lld: error: undefined reference due to --no-allow-shlib-undefined: dlclose@GLIBC_2.34\n&gt;&gt;&gt; referenced by /lib/x86_64-linux-gnu/libncurses.so.6\n\nld.lld: error: undefined reference due to --no-allow-shlib-undefined: stat@GLIBC_2.33\n&gt;&gt;&gt; referenced by /lib/x86_64-linux-gnu/libtinfo.so\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\nerror: external command '/home/vigourth/.elan/toolchains/stable/bin/leanc' exited with code 1\nSome required builds logged failures:\n- lcurses\nerror: build failed\n</code></pre></div>\n<p>Does someone have already faced this kind of problems ?</p>",
        "id": 480376943,
        "sender_full_name": "Thomas Vigouroux",
        "timestamp": 1730702450
    },
    {
        "content": "<p>I was able to partially fix the problem by linking statically, but I am still a little suprised it does not work in the beginning</p>",
        "id": 480377998,
        "sender_full_name": "Thomas Vigouroux",
        "timestamp": 1730703060
    }
]