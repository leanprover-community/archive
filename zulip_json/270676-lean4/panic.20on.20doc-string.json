[
    {
        "content": "<p>Here's a fun one:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"sd\">/-- -/</span>\n</code></pre></div>\n<p>results in</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">PANIC</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">EnvExtension</span><span class=\"bp\">.</span><span class=\"n\">modifyState</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">Environment</span><span class=\"o\">:</span><span class=\"mi\">1385</span><span class=\"o\">:</span><span class=\"mi\">15</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">called</span><span class=\"w\"> </span><span class=\"n\">on</span><span class=\"w\"> </span><span class=\"ss\">`async</span><span class=\"bp\">`</span><span class=\"w\"> </span><span class=\"n\">extension</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">must</span><span class=\"w\"> </span><span class=\"n\">set</span><span class=\"w\"> </span><span class=\"ss\">`asyncDecl</span><span class=\"bp\">`</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">that</span><span class=\"w\"> </span><span class=\"n\">case</span>\n<span class=\"n\">backtrace</span><span class=\"o\">:</span>\n</code></pre></div>\n<p>Does anyone want to investigate this?</p>",
        "id": 536504661,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1756334466
    },
    {
        "content": "<p>Minimized:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Lean</span>\n\n<span class=\"sd\">/-- -/</span>\n</code></pre></div>",
        "id": 536506399,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1756335658
    },
    {
        "content": "<p>So possibly no longer in the right channel :)</p>",
        "id": 536506532,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1756335703
    },
    {
        "content": "<p>This topic was moved here from <a class=\"stream-topic\" data-stream-id=\"287929\" href=\"/#narrow/channel/287929-mathlib4/topic/panic.20on.20doc-string\">#mathlib4 &gt; panic on doc-string</a> by <span class=\"user-mention silent\" data-user-id=\"110087\">Kim Morrison</span>.</p>",
        "id": 536507406,
        "sender_full_name": "Notification Bot",
        "timestamp": 1756336381
    },
    {
        "content": "<p>It's fixed already on <code>nightly</code>.</p>",
        "id": 536507532,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1756336481
    },
    {
        "content": "<p>Looks like a regression in 4.23.0, so perhaps worth a backport to the next rc?</p>",
        "id": 536507835,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1756336746
    },
    {
        "content": "<p>I haven't actually found what fixed it. I can try bisecting sometime, but not sure I'll have the time.</p>",
        "id": 536508221,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1756337052
    },
    {
        "content": "<p>One of my students noticed this about 48 hours ago, so I reported it to Sebastian and it was fixed very soon after: <a href=\"https://github.com/leanprover/lean4/pull/10131\">lean4#10131</a></p>",
        "id": 536520474,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1756347394
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">public</span><span class=\"w\"> </span><span class=\"n\">meta</span><span class=\"w\"> </span><span class=\"kn\">section</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"kn\">private</span>\n</code></pre></div>\n<p>Still gives the same panic message</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">PANIC</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">EnvExtension</span><span class=\"bp\">.</span><span class=\"n\">modifyState</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">Environment</span><span class=\"o\">:</span><span class=\"mi\">1388</span><span class=\"o\">:</span><span class=\"mi\">15</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">called</span><span class=\"w\"> </span><span class=\"n\">on</span><span class=\"w\"> </span><span class=\"ss\">`async</span><span class=\"bp\">`</span><span class=\"w\"> </span><span class=\"n\">extension</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">must</span><span class=\"w\"> </span><span class=\"n\">set</span><span class=\"w\"> </span><span class=\"ss\">`asyncDecl</span><span class=\"bp\">`</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">that</span><span class=\"w\"> </span><span class=\"n\">case</span>\n<span class=\"n\">backtrace</span><span class=\"o\">:</span>\n</code></pre></div>",
        "id": 566110399,
        "sender_full_name": "Jovan Gerbscheid",
        "timestamp": 1767397319
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover/lean4/pull/11882\">lean#11882</a></p>",
        "id": 566140278,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1767436453
    }
]