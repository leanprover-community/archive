[
    {
        "content": "<p>I was a little surprised by the following:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">Expr</span>\n\n<span class=\"c1\">-- you can also open `Nat` here or repeat a namespace for more ambiguities</span>\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"w\"> </span><span class=\"n\">Int</span>\n\n<span class=\"sd\">/-- error: ambiguous namespace 'Nat', possible interpretations: '[Nat, Int.Nat, Lean.Nat]' -/</span>\n<span class=\"bp\">#</span><span class=\"n\">guard_msgs</span><span class=\"w\"> </span><span class=\"k\">in</span>\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"kn\">hiding</span><span class=\"w\"> </span><span class=\"n\">add_comm</span>\n\n<span class=\"sd\">/-- error: unknown identifier 'Lean.Nat' -/</span>\n<span class=\"bp\">#</span><span class=\"n\">guard_msgs</span><span class=\"w\"> </span><span class=\"k\">in</span>\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">Nat</span>\n</code></pre></div>",
        "id": 501646523,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1740430575
    },
    {
        "content": "<p><del>it seems this doesn't reproduce as-is on live?</del> i forgot how <code>#guard_msgs</code> works</p>",
        "id": 501646876,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1740430696
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">Expr</span>\n\n<span class=\"c1\">-- you can also open `Nat` here or repeat a namespace for more ambiguities</span>\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"w\"> </span><span class=\"n\">Int</span>\n\n<span class=\"sd\">/-- error: ambiguous namespace 'Nat', possible interpretations: '[Nat, Int.Nat, Lean.Nat]' -/</span>\n<span class=\"bp\">#</span><span class=\"n\">guard_msgs</span><span class=\"w\"> </span><span class=\"k\">in</span>\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"kn\">hiding</span><span class=\"w\"> </span><span class=\"n\">add_comm</span>\n\n<span class=\"sd\">/-- error: unknown identifier 'Lean.Nat' -/</span>\n<span class=\"bp\">#</span><span class=\"n\">guard_msgs</span><span class=\"w\"> </span><span class=\"k\">in</span>\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">Nat</span>\n\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">mkInstAdd</span>\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">mkInstDiv</span>\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">mkInstHAdd</span>\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">mkInstHDiv</span>\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">mkInstHMod</span>\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">mkInstHMul</span>\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">mkInstHPow</span>\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">mkInstHSub</span>\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">mkInstLE</span>\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">mkInstLT</span>\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">mkInstMod</span>\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">mkInstMul</span>\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">mkInstNatPow</span>\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">mkInstPow</span>\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">mkInstSub</span>\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">mkType</span>\n</code></pre></div>",
        "id": 501646879,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1740430699
    },
    {
        "content": "<p>There are lots of <code>Lean.Nat.*</code> stuff, even though <code>Lean.Nat</code> doesn't exist.</p>",
        "id": 501646941,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1740430721
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"684366\">Edward van de Meent</span> <a href=\"#narrow/channel/270676-lean4/topic/Lean.2ENat/near/501646876\">said</a>:</p>\n<blockquote>\n<p>it seems this doesn't reproduce as-is on live?</p>\n</blockquote>\n<p>It does reproduce for me both locally and on the server.</p>",
        "id": 501647048,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1740430758
    },
    {
        "content": "<p>right, i had a big brainfart</p>",
        "id": 501647068,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1740430769
    },
    {
        "content": "<p>Indeed, the <code>Lean.Nat</code> stuff is defined in the \"minimised\" import above.  I still am a little surprised that there is some ambiguity.</p>",
        "id": 501647332,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1740430848
    },
    {
        "content": "<p>it's funny if this is how we get unambiguous <code>open</code>s</p>",
        "id": 501647457,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1740430893
    },
    {
        "content": "<p>If you <code>open Nat</code>, you also get a <code>Nat.Nat</code> ambiguity.</p>",
        "id": 501647598,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1740430945
    },
    {
        "content": "<p>how do you mean?</p>",
        "id": 501647760,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1740431009
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">Expr</span>\n\n<span class=\"c1\">-- you can also open `Nat` here or repeat a namespace for more ambiguities</span>\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"w\"> </span><span class=\"n\">Nat</span>\n\n<span class=\"sd\">/-- error: ambiguous namespace 'Nat', possible interpretations: '[Nat, Nat.Nat, Lean.Nat]' -/</span>\n<span class=\"bp\">#</span><span class=\"n\">guard_msgs</span><span class=\"w\"> </span><span class=\"k\">in</span>\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"kn\">hiding</span><span class=\"w\"> </span><span class=\"n\">add_comm</span>\n</code></pre></div>",
        "id": 501647843,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1740431039
    },
    {
        "content": "<p>ah right</p>",
        "id": 501647929,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1740431062
    },
    {
        "content": "<p>This is <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Nat.Nat.zero_eq_one_mod_iff#doc\">docs#Nat.Nat.zero_eq_one_mod_iff</a>, probably a mistake?</p>",
        "id": 501648133,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1740431135
    },
    {
        "content": "<p>Oh, it looks like core does not have a duplicatedNamespace linter!</p>",
        "id": 501648322,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1740431189
    },
    {
        "content": "<p><code>Int.Nat.*</code> seems to just be <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Int.Nat.cast_ofNat_Int#doc\">docs#Int.Nat.cast_ofNat_Int</a>, also a mistake?</p>",
        "id": 501648667,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1740431307
    },
    {
        "content": "<p>These are some more repeated namespaces:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Lean</span>\n\n<span class=\"sd\">/--</span>\n<span class=\"sd\">info: 9 repeated namespaces in 48 declarations:</span>\n\n<span class=\"sd\">* 'Array' is repeated in the declaration</span>\n<span class=\"sd\">[Array.Array.data]</span>\n\n<span class=\"sd\">* 'Backtrack' is repeated in the 3 declarations</span>\n<span class=\"sd\">[Meta.Tactic.Backtrack.Backtrack.tryAllM,</span>\n<span class=\"sd\"> Meta.Tactic.Backtrack.Backtrack.tryAllM.match_1,</span>\n<span class=\"sd\"> Meta.Tactic.Backtrack.Backtrack.tryAllM.match_2]</span>\n\n<span class=\"sd\">* 'Element' is repeated in the 4 declarations</span>\n<span class=\"sd\">[Xml.Element.Element, Xml.Element.Element.inj, Xml.Element.Element.injEq, Xml.Element.Element.sizeOf_spec]</span>\n\n<span class=\"sd\">* 'Loop' is repeated in the 12 declarations</span>\n<span class=\"sd\">[Std.Internal.UV.Loop.Loop.Options,</span>\n<span class=\"sd\"> Std.Internal.UV.Loop.Loop.Options.accumulateIdleTime,</span>\n<span class=\"sd\"> Std.Internal.UV.Loop.Loop.Options.blockSigProfSignal,</span>\n<span class=\"sd\"> Std.Internal.UV.Loop.Loop.Options.casesOn,</span>\n<span class=\"sd\"> Std.Internal.UV.Loop.Loop.Options.mk,</span>\n<span class=\"sd\"> Std.Internal.UV.Loop.Loop.Options.mk.inj,</span>\n<span class=\"sd\"> Std.Internal.UV.Loop.Loop.Options.mk.injEq,</span>\n<span class=\"sd\"> Std.Internal.UV.Loop.Loop.Options.mk.sizeOf_spec,</span>\n<span class=\"sd\"> Std.Internal.UV.Loop.Loop.Options.noConfusion,</span>\n<span class=\"sd\"> Std.Internal.UV.Loop.Loop.Options.noConfusionType,</span>\n<span class=\"sd\"> Std.Internal.UV.Loop.Loop.Options.rec,</span>\n<span class=\"sd\"> Std.Internal.UV.Loop.Loop.Options.recOn]</span>\n\n<span class=\"sd\">* 'Nat' is repeated in the declaration</span>\n<span class=\"sd\">[Nat.Nat.zero_eq_one_mod_iff]</span>\n\n<span class=\"sd\">* 'Parser' is repeated in the 12 declarations</span>\n<span class=\"sd\">[Parser.Parser,</span>\n<span class=\"sd\"> Parser.Parser.casesOn,</span>\n<span class=\"sd\"> Parser.Parser.fn,</span>\n<span class=\"sd\"> Parser.Parser.info,</span>\n<span class=\"sd\"> Parser.Parser.mk,</span>\n<span class=\"sd\"> Parser.Parser.mk.inj,</span>\n<span class=\"sd\"> Parser.Parser.mk.injEq,</span>\n<span class=\"sd\"> Parser.Parser.mk.sizeOf_spec,</span>\n<span class=\"sd\"> Parser.Parser.noConfusion,</span>\n<span class=\"sd\"> Parser.Parser.noConfusionType,</span>\n<span class=\"sd\"> Parser.Parser.rec,</span>\n<span class=\"sd\"> Parser.Parser.recOn]</span>\n\n<span class=\"sd\">* 'TZif' is repeated in the 12 declarations</span>\n<span class=\"sd\">[Std.Time.TimeZone.TZif.TZif,</span>\n<span class=\"sd\"> Std.Time.TimeZone.TZif.TZif.casesOn,</span>\n<span class=\"sd\"> Std.Time.TimeZone.TZif.TZif.mk,</span>\n<span class=\"sd\"> Std.Time.TimeZone.TZif.TZif.mk.inj,</span>\n<span class=\"sd\"> Std.Time.TimeZone.TZif.TZif.mk.injEq,</span>\n<span class=\"sd\"> Std.Time.TimeZone.TZif.TZif.mk.sizeOf_spec,</span>\n<span class=\"sd\"> Std.Time.TimeZone.TZif.TZif.noConfusion,</span>\n<span class=\"sd\"> Std.Time.TimeZone.TZif.TZif.noConfusionType,</span>\n<span class=\"sd\"> Std.Time.TimeZone.TZif.TZif.rec,</span>\n<span class=\"sd\"> Std.Time.TimeZone.TZif.TZif.recOn,</span>\n<span class=\"sd\"> Std.Time.TimeZone.TZif.TZif.v1,</span>\n<span class=\"sd\"> Std.Time.TimeZone.TZif.TZif.v2]</span>\n\n<span class=\"sd\">* 'Tactic' is repeated in the declaration</span>\n<span class=\"sd\">[Elab.Tactic.Tactic]</span>\n\n<span class=\"sd\">* 'toACExpr' is repeated in the 2 declarations [Meta.AC.toACExpr.toACExpr, Meta.AC.toACExpr.toACExpr.match_1]</span>\n<span class=\"sd\">---</span>\n<span class=\"sd\">warning: unused variable `declsSorted`</span>\n<span class=\"sd\">note: this linter can be disabled with `set_option linter.unusedVariables false`</span>\n<span class=\"sd\">-/</span>\n<span class=\"bp\">#</span><span class=\"n\">guard_msgs</span><span class=\"w\"> </span><span class=\"k\">in</span>\n<span class=\"n\">run_cmd</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">mut</span><span class=\"w\"> </span><span class=\"n\">repHash</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Std</span><span class=\"bp\">.</span><span class=\"n\">HashMap</span><span class=\"w\"> </span><span class=\"n\">Name</span><span class=\"w\"> </span><span class=\"n\">Name</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">∅</span>\n<span class=\"w\">  </span><span class=\"n\">for</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">c</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">getEnv</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">constants</span><span class=\"w\"> </span><span class=\"k\">do</span>\n<span class=\"w\">    </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"bp\">!</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"bp\">.</span><span class=\"n\">isInternal</span><span class=\"w\"> </span><span class=\"k\">then</span>\n<span class=\"w\">      </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">parts</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"bp\">.</span><span class=\"n\">components</span><span class=\"bp\">.</span><span class=\"n\">zip</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">c</span><span class=\"bp\">.</span><span class=\"n\">components</span><span class=\"bp\">.</span><span class=\"n\">drop</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span>\n<span class=\"w\">      </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">some</span><span class=\"w\"> </span><span class=\"n\">rep</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">parts</span><span class=\"bp\">.</span><span class=\"n\">find?</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">==</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"k\">then</span>\n<span class=\"w\">        </span><span class=\"n\">repHash</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">repHash</span><span class=\"bp\">.</span><span class=\"n\">insert</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"n\">rep</span><span class=\"bp\">.</span><span class=\"m\">1</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">gped</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">repHash</span><span class=\"bp\">.</span><span class=\"n\">keysArray</span><span class=\"bp\">.</span><span class=\"n\">groupByKey</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">repHash</span><span class=\"o\">[</span><span class=\"bp\">·</span><span class=\"o\">]</span><span class=\"bp\">!</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">gpdedSorted</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">gped</span><span class=\"bp\">.</span><span class=\"n\">toArray</span><span class=\"bp\">.</span><span class=\"n\">qsort</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">·.</span><span class=\"m\">1</span><span class=\"bp\">.</span><span class=\"n\">toString</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"bp\">·.</span><span class=\"m\">1</span><span class=\"bp\">.</span><span class=\"n\">toString</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">mut</span><span class=\"w\"> </span><span class=\"n\">msg</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">[]</span>\n<span class=\"w\">  </span><span class=\"n\">for</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">rep</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">decls</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">gpdedSorted</span><span class=\"w\"> </span><span class=\"k\">do</span>\n<span class=\"w\">    </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">declsSorted</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">decls</span><span class=\"bp\">.</span><span class=\"n\">qsort</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">·.</span><span class=\"n\">toString</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"bp\">·.</span><span class=\"n\">toString</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">declsSorted</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Array</span><span class=\"w\"> </span><span class=\"n\">MessageData</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">decls</span><span class=\"bp\">.</span><span class=\"n\">qsort</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">·.</span><span class=\"n\">toString</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"bp\">·.</span><span class=\"n\">toString</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">|&gt;.</span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">.</span><span class=\"n\">ofConstName</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">declStr</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">decls</span><span class=\"bp\">.</span><span class=\"n\">size</span><span class=\"w\"> </span><span class=\"bp\">==</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"s2\">\"declaration\"</span><span class=\"w\"> </span><span class=\"k\">else</span><span class=\"w\"> </span><span class=\"n\">s!</span><span class=\"s2\">\"{decls.size} declarations\"</span>\n<span class=\"w\">    </span><span class=\"n\">msg</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">msg</span><span class=\"w\"> </span><span class=\"bp\">++</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">m!</span><span class=\"s2\">\"* '{rep}' is repeated in the {declStr}</span><span class=\"se\">\\n</span><span class=\"s2\">{.ofArray declsSorted}\"</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">logInfo</span><span class=\"w\"> </span><span class=\"bp\">&lt;|</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">joinSep</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">s!</span><span class=\"s2\">\"{gped.size} repeated namespaces in {repHash.size} declarations:\"</span><span class=\"w\"> </span><span class=\"bp\">::</span><span class=\"w\"> </span><span class=\"n\">msg</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"s2\">\"</span><span class=\"se\">\\n\\n</span><span class=\"s2\">\"</span>\n</code></pre></div>",
        "id": 501649813,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1740431759
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> <a href=\"#narrow/channel/270676-lean4/topic/Lean.2ENat/near/501648133\">said</a>:</p>\n<blockquote>\n<p>This is <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Nat.Nat.zero_eq_one_mod_iff#doc\">docs#Nat.Nat.zero_eq_one_mod_iff</a>, probably a mistake?</p>\n</blockquote>\n<p>Should <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Nat.Nat.zero_eq_one_mod_iff#doc\">docs#Nat.Nat.zero_eq_one_mod_iff</a> be renamed to <code>Nat.zero_eq_one_mod_iff</code>?</p>",
        "id": 501655883,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1740434046
    },
    {
        "content": "<p>I also wonder whether <code>Array.Array.data</code> which is deprecated, should actually be deprecating <code>Array.data</code>.<br>\nEDIT: maybe not, since there is also a deprecated <code>Array.data</code>.</p>",
        "id": 501657138,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1740434517
    },
    {
        "content": "<p>The issues reported here have finally been fixed in <a href=\"https://github.com/leanprover/lean4/pull/7448\">lean#7448</a>. Apologies for the delay!</p>",
        "id": 505020684,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1741751297
    }
]