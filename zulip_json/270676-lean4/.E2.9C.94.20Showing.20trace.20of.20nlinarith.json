[
    {
        "content": "<p>Wondering whether there is a way to trace back the trajectories in nlinarith<br>\n<code>example (x y : ℝ) (h₁ : x + y = 3) (h₂ : x ≥ 0 ∧ y ≥ 0) : x * y ^ 2 ≤ 4 := by nlinarith [sq_nonneg (y - 2)]</code><br>\nfor example, in this simple inequality, the LEAN compiles successfully, but is there a way to explicitly show the trajectories of nlinarith so that human can check the proof, right now it is like a blackbox</p>",
        "id": 476206342,
        "sender_full_name": "RedPig",
        "timestamp": 1728587729
    },
    {
        "content": "<p><code>linarith</code> (and hence also <code>nlinarith</code>) implement algorithms which are not analogous to the way humans would reason, which is why this tactic doesn't have a <code>?</code> variant. So, to be clear: \"no, there is no way (modulo digging into the internals of <code>linarirth</code> and rewriting it so that it <em>does</em> display this mostly incomprehensible data).\"</p>",
        "id": 476207159,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1728587997
    },
    {
        "content": "<p>Thank you for the quick response! I guess the key question is whether the underlying algorithm is traceable. From the documentation, linarith is using Fourier-Motzkin elimination to eliminate variables one by one, it sounds like this elimination step is untraceable.</p>",
        "id": 476210076,
        "sender_full_name": "RedPig",
        "timestamp": 1728588968
    },
    {
        "content": "<p>You do have the option of asking Lean to give you the proof term, but this isn't really the trajectories of linarith, nor is it any more human-checkable:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h₁</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h₂</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">≥</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">≥</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"bp\">?</span><span class=\"w\"> </span><span class=\"n\">nlinarith</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">sq_nonneg</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">)]</span>\n</code></pre></div>\n<p>spits out a ~600 line proof. Note also that <code>linarith</code> uses the simplex algorithm rather than Fourier-Motzkin elimination by default: <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Tactic/Linarith/Frontend.html#Oracles\">https://leanprover-community.github.io/mathlib4_docs/Mathlib/Tactic/Linarith/Frontend.html#Oracles</a></p>",
        "id": 476223860,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1728593988
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"246273\">Bhavik Mehta</span> <a href=\"#narrow/stream/270676-lean4/topic/Showing.20trace.20of.20nlinarith/near/476223860\">said</a>:</p>\n<blockquote>\n<p>You do have the option of asking Lean to give you the proof term, but this isn't really the trajectories of linarith, nor is it any more human-checkable:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h₁</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h₂</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">≥</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">≥</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"bp\">?</span><span class=\"w\"> </span><span class=\"n\">nlinarith</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">sq_nonneg</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">)]</span>\n</code></pre></div>\n<p>spits out a ~600 line proof. Note also that <code>linarith</code> uses the simplex algorithm rather than Fourier-Motzkin elimination by default: <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Tactic/Linarith/Frontend.html#Oracles\">https://leanprover-community.github.io/mathlib4_docs/Mathlib/Tactic/Linarith/Frontend.html#Oracles</a></p>\n</blockquote>\n<p>This is cool, thank you for sharing!</p>",
        "id": 476224917,
        "sender_full_name": "RedPig",
        "timestamp": 1728594371
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"742049\">RedPig</span> has marked this topic as resolved.</p>",
        "id": 476224946,
        "sender_full_name": "Notification Bot",
        "timestamp": 1728594383
    }
]