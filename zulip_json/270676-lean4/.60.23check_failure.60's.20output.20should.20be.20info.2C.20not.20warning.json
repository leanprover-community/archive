[
    {
        "content": "<p>Since the <code>#check_failure</code> command is a command that intentionally causes an error, is it inappropriate for its output to be a warning?</p>",
        "id": 474614882,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1727967851
    },
    {
        "content": "<p>Is there anyone else who has the same problem as me?</p>",
        "id": 492775200,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1736443319
    },
    {
        "content": "<p>I want an config to switch warning of <code>#check_failure</code> to info....</p>",
        "id": 492779189,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1736444459
    },
    {
        "content": "<p>I agree, but you can easily work around it using</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"sd\">/--</span>\n<span class=\"sd\">warning: function expected at</span>\n<span class=\"sd\">  ()</span>\n<span class=\"sd\">term has type</span>\n<span class=\"sd\">  Unit</span>\n<span class=\"sd\">-/</span>\n<span class=\"bp\">#</span><span class=\"n\">guard_msgs</span><span class=\"w\"> </span><span class=\"k\">in</span>\n<span class=\"bp\">#</span><span class=\"n\">check_failure</span><span class=\"w\"> </span><span class=\"o\">()</span><span class=\"w\"> </span><span class=\"o\">()</span>\n</code></pre></div>\n<p>or</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">#</span><span class=\"n\">guard_msgs</span><span class=\"o\">(</span><span class=\"n\">drop</span><span class=\"w\"> </span><span class=\"n\">warning</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">in</span>\n<span class=\"bp\">#</span><span class=\"n\">check_failure</span><span class=\"w\"> </span><span class=\"o\">()</span><span class=\"w\"> </span><span class=\"o\">()</span>\n</code></pre></div>\n<p>or simply</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"sd\">/--</span>\n<span class=\"sd\">error: function expected at</span>\n<span class=\"sd\">  ()</span>\n<span class=\"sd\">term has type</span>\n<span class=\"sd\">  Unit</span>\n<span class=\"sd\">-/</span>\n<span class=\"bp\">#</span><span class=\"n\">guard_msgs</span><span class=\"w\"> </span><span class=\"k\">in</span>\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"o\">()</span><span class=\"w\"> </span><span class=\"o\">()</span>\n</code></pre></div>\n<p>which has the additional effect that you are not only checking that it fails, but also why and how it fails.</p>",
        "id": 492795571,
        "sender_full_name": "Joachim Breitner",
        "timestamp": 1736449037
    },
    {
        "content": "<p>That said, I’d merge a PR that changes <a href=\"https://github.com/leanprover/lean4/blob/0c9a488bea5614f82429c79e37c13f97afeca1dd/src/Lean/Elab/BuiltinCommand.lean#L290-L308\">https://github.com/leanprover/lean4/blob/0c9a488bea5614f82429c79e37c13f97afeca1dd/src/Lean/Elab/BuiltinCommand.lean#L290-L308</a> to use a (to be added) <code>errorsToInfos</code> instead of <code>errorsToWarnings</code> if the current state of affairs really bothers you enough.</p>",
        "id": 492796018,
        "sender_full_name": "Joachim Breitner",
        "timestamp": 1736449188
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"470149\">@Joachim Breitner</span> </p>\n<p>(I use machine translation)</p>\n<p>Thank you for your response. I’m sorry for not replying for such a long time.</p>\n<p>I’m aware of the <code>#guard_msgs</code> technique, but writing it every time is cumbersome, and I felt that emitting warnings as part of <code>#check_failure</code>’s behavior is undesirable in the first place.</p>\n<p>I’m writing a reference called <a href=\"https://lean-ja.github.io/lean-by-example/\">Lean by Example</a> and often use <code>#check_failure</code> to showcase “failing examples.” Since I always check that no warnings are emitted during CI, the current behavior is quite troublesome.</p>\n<p>I would be glad if changing the behavior of <code>#check_failure</code> is allowed.<br>\nShould I be the one to create the PR?</p>",
        "id": 494398713,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1737132036
    },
    {
        "content": "<p>Yes, if you want to, I can then have a look.</p>",
        "id": 494407917,
        "sender_full_name": "Joachim Breitner",
        "timestamp": 1737135318
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"470149\">@Joachim Breitner</span> </p>\n<p>I have read <a href=\"https://lean-lang.org/lean4/doc/dev/index.html\">https://lean-lang.org/lean4/doc/dev/index.html</a> but I don't know how to use toolchain <code>lean4-stage0</code>.</p>\n<div class=\"codehilite\" data-code-language=\"Bash\"><pre><span></span><code>❯<span class=\"w\"> </span>lean<span class=\"w\"> </span>+lean4-stage0\ninfo:<span class=\"w\"> </span>downloading<span class=\"w\"> </span>component<span class=\"w\"> </span><span class=\"s1\">'lean'</span>\nError<span class=\"o\">(</span>Download<span class=\"o\">(</span>HttpStatus<span class=\"o\">(</span><span class=\"m\">404</span><span class=\"o\">))</span>,<span class=\"w\"> </span>State<span class=\"w\"> </span><span class=\"o\">{</span><span class=\"w\"> </span>next_error:<span class=\"w\"> </span>None,<span class=\"w\"> </span>backtrace:<span class=\"w\"> </span>InternalBacktrace<span class=\"w\"> </span><span class=\"o\">{</span><span class=\"w\"> </span>backtrace:<span class=\"w\"> </span>None<span class=\"w\"> </span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">})</span>\nerror:<span class=\"w\"> </span>could<span class=\"w\"> </span>not<span class=\"w\"> </span>download<span class=\"w\"> </span>nonexistent<span class=\"w\"> </span>lean<span class=\"w\"> </span>version<span class=\"w\"> </span><span class=\"sb\">`</span>lean4-stage0<span class=\"sb\">`</span>\ninfo:<span class=\"w\"> </span>caused<span class=\"w\"> </span>by:<span class=\"w\"> </span>could<span class=\"w\"> </span>not<span class=\"w\"> </span>download<span class=\"w\"> </span>file<span class=\"w\"> </span>from<span class=\"w\"> </span><span class=\"s1\">'https://github.com/leanprover/lean4/releases/expanded_assets/lean4-stage0'</span><span class=\"w\"> </span>to<span class=\"w\"> </span><span class=\"s1\">'C:\\Users\\11325\\.elan\\tmp\\2uoeg2m5j0_wr6bn_file'</span>\ninfo:<span class=\"w\"> </span>caused<span class=\"w\"> </span>by:<span class=\"w\"> </span>http<span class=\"w\"> </span>request<span class=\"w\"> </span>returned<span class=\"w\"> </span>an<span class=\"w\"> </span>unsuccessful<span class=\"w\"> </span>status<span class=\"w\"> </span>code:<span class=\"w\"> </span><span class=\"m\">404</span>\n</code></pre></div>",
        "id": 494471741,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1737167455
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"470149\">@Joachim Breitner</span> </p>\n<p>I have submitted a PR! <a href=\"https://github.com/leanprover/lean4/pull/6685\">https://github.com/leanprover/lean4/pull/6685</a><br>\nI could not build the environment locally, but I did confirm that it works.</p>",
        "id": 494472740,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1737168363
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"626349\">@Asei Inoue</span>, it sounds from your error that you ignored the instructions around</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">elan</span><span class=\"w\"> </span><span class=\"n\">toolchain</span><span class=\"w\"> </span><span class=\"n\">link</span><span class=\"w\"> </span><span class=\"n\">lean4</span><span class=\"w\"> </span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">release</span><span class=\"bp\">/</span><span class=\"n\">stage1</span>\n<span class=\"n\">elan</span><span class=\"w\"> </span><span class=\"n\">toolchain</span><span class=\"w\"> </span><span class=\"n\">link</span><span class=\"w\"> </span><span class=\"n\">lean4</span><span class=\"bp\">-</span><span class=\"n\">stage0</span><span class=\"w\"> </span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">release</span><span class=\"bp\">/</span><span class=\"n\">stage0</span>\n</code></pre></div>",
        "id": 494482168,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1737177062
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 494539277,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1737222479
    }
]