[
    {
        "content": "<p>As shown in the code below, trailing commas are allowed in List literals but not in Array literals.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"c1\">-- OK!</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">list</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">,]</span>\n\n<span class=\"c1\">-- unexpected token ']';</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">array</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"o\">[</span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">,]</span>\n</code></pre></div>\n<p>Is there any rational reason for this, or was it just an mistake/bug? If it was an bug, would a fix be welcome?</p>",
        "id": 499210843,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1739360347
    },
    {
        "content": "<p>It does seem reasonable to fix this (also for <code>Vector</code>?), and I <em>think</em> should be safely straightforward, so a fix would be welcome.</p>",
        "id": 499227972,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1739365739
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110087\">@Kim Morrison</span> I have submitted a PR. <a href=\"https://github.com/leanprover/lean4/pull/7055\">https://github.com/leanprover/lean4/pull/7055</a></p>",
        "id": 499231636,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1739366569
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"626349\">@Asei Inoue</span>, there's still quite a bit you need to do on that PR, let me know if you don't understand what's being asked (CI, Mathlib CI, add tests).</p>",
        "id": 499347874,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1739402836
    },
    {
        "content": "<p>Since <code>Vector</code> is in core now, would it be feasible to unify the vector and array notations? That is, have <code>#[...]</code> give a <code>Vector</code>, which is coerced to <code>Array</code> when necessary?</p>",
        "id": 499351600,
        "sender_full_name": "François G. Dorais",
        "timestamp": 1739404967
    },
    {
        "content": "<p>Seems confusing rather than helpful? Could you explain the motivation more?</p>",
        "id": 499352560,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1739405549
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110087\">@Kim Morrison</span> </p>\n<p>I want to setup development environment in wsl2. I've read the manual: <a href=\"https://lean-lang.org/lean4/doc/dev/index.html#development-workflow\">https://lean-lang.org/lean4/doc/dev/index.html#development-workflow</a></p>\n<p>but I get the following error.</p>\n<div class=\"codehilite\" data-code-language=\"Bash\"><pre><span></span><code>asei@gtune:~/lean4$<span class=\"w\"> </span>elan<span class=\"w\"> </span>toolchain<span class=\"w\"> </span>link<span class=\"w\"> </span>lean4<span class=\"w\"> </span>build/release/stage1\nerror:<span class=\"w\"> </span>not<span class=\"w\"> </span>a<span class=\"w\"> </span>directory:<span class=\"w\"> </span><span class=\"s1\">'build/release/stage1/bin'</span>\n</code></pre></div>\n<p>How to solve this?</p>",
        "id": 499362933,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1739412135
    },
    {
        "content": "<p>Have you actually built Lean yet, per the instructions at <a href=\"https://lean-lang.org/lean4/doc/make/wsl.html\">https://lean-lang.org/lean4/doc/make/wsl.html</a>? The <code>elan toolchain</code> step only comes later, once you want to use VSCode with your newly built Lean.</p>",
        "id": 499366101,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1739414133
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110087\">@Kim Morrison</span> Just one notation for two types that are a hair from each other. For example, if I move from <code>Polygon := Array (Array R)</code> to <code>Polygon := Array (Vector R 3)</code> then I have to annoyingly add <code>v</code>s to all my standard polygon definitions. This is easily automated in this artificial example but no change would be even better regardless.</p>",
        "id": 499383670,
        "sender_full_name": "François G. Dorais",
        "timestamp": 1739425380
    },
    {
        "content": "<p>I think I'd prefer not for now, but I'm happy to hear other opinions.</p>",
        "id": 499386364,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1739427026
    },
    {
        "content": "<p>I wouldn't mind a <em>different</em> notation for vectors, but any notation would be useful. I'm a little tired of writing <code>\\&lt;#[a,b,c], by simp\\&gt;</code> <span aria-label=\"joy\" class=\"emoji emoji-1f602\" role=\"img\" title=\"joy\">:joy:</span></p>",
        "id": 499390822,
        "sender_full_name": "James Gallicchio",
        "timestamp": 1739429592
    },
    {
        "content": "<p>Are you aware of the <code>#v[a, b, c]</code> notation?</p>",
        "id": 499390974,
        "sender_full_name": "Markus Himmel",
        "timestamp": 1739429651
    },
    {
        "content": "<p>oh!!!! I was not!</p>",
        "id": 499390991,
        "sender_full_name": "James Gallicchio",
        "timestamp": 1739429669
    },
    {
        "content": "<p>sorry, ignore the noise</p>",
        "id": 499390998,
        "sender_full_name": "James Gallicchio",
        "timestamp": 1739429675
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110087\">@Kim Morrison</span> </p>\n<blockquote>\n<p>Have you actually built Lean yet, per the instructions at <a href=\"https://lean-lang.org/lean4/doc/make/wsl.html\">https://lean-lang.org/lean4/doc/make/wsl.html</a>? The <code>elan toolchain</code> step only comes later, once you want to use VSCode with your newly built Lean.</p>\n</blockquote>\n<p><del>I have read everything written at <a href=\"https://lean-lang.org/lean4/doc/make/wsl.html\">https://lean-lang.org/lean4/doc/make/wsl.html</a> and tried it all, but it doesn’t work. I wish there was a Devcontainer available.</del></p>",
        "id": 499549597,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1739471165
    },
    {
        "content": "<p>I realized my misunderstanding. I apologize for that.</p>",
        "id": 499555398,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1739472798
    },
    {
        "content": "<p>I thought the CI error would be fixed with <a href=\"https://github.com/leanprover/lean4/pull/7055/commits/d9bebef5aac029a8e99ea6f99b1a0512f2c4d573\">this commit</a>, but I was too optimistic. Why isn’t it resolved…?</p>",
        "id": 499563054,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1739474772
    },
    {
        "content": "<p>help me please, anyone</p>",
        "id": 499859128,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1739580315
    },
    {
        "content": "<p>Changing the syntax name is breaking a deriving handler, because it's compiled for the old syntax name and it's in stage0 and being used to compile stage1.</p>\n<p>Easiest would be to preserve the current syntax name I think.</p>",
        "id": 499860013,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1739580882
    },
    {
        "content": "<p>I'm not sure how you could change the syntax name, except to (1) track down where <code>#[...]</code> syntax is used and replace it with its expansion, (2) recompile stage0, (3) rename the syntax, (4) revert changes in 1.</p>",
        "id": 499860251,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1739581057
    },
    {
        "content": "<p>I know Rust has <code>stage0</code> compilation flags for this purpose. Does Lean have a similar system?</p>",
        "id": 499863296,
        "sender_full_name": "Chris Wong",
        "timestamp": 1739582938
    },
    {
        "content": "<p>(Yes, but sometimes there are complicated edges cases, and from Kyle's message this appears to be one!)</p>",
        "id": 499953427,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1739656373
    },
    {
        "content": "<p>Where would things like Kyle's suggestion fit in with <span class=\"user-mention\" data-user-id=\"470149\">@Joachim Breitner</span>'s bootstrapping ancestry tool?</p>",
        "id": 499953991,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1739656892
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/channel/270676-lean4/topic/Why.20Are.20Trailing.20Commas.20Not.20Allowed.20in.20Array.20Literals.3F/near/499953991\">said</a>:</p>\n<blockquote>\n<p>Where would things like Kyle's suggestion fit in with <span class=\"user-mention silent\" data-user-id=\"470149\">Joachim Breitner</span>'s bootstrapping ancestry tool?</p>\n</blockquote>\n<p>If these steps happen in separate commits on the PR (which may not all have to pass the test suite) then <a href=\"https://lean-stage0.nomeata.de/\">https://lean-stage0.nomeata.de/</a> may be able to retrace it</p>",
        "id": 499954095,
        "sender_full_name": "Joachim Breitner",
        "timestamp": 1739656975
    },
    {
        "content": "<p>why CI staill fails? I cannot edit PR labels...</p>\n<p><a href=\"https://github.com/leanprover/lean4/pull/7055\">https://github.com/leanprover/lean4/pull/7055</a></p>",
        "id": 500030057,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1739728239
    },
    {
        "content": "<p>It seems we need to update <a href=\"https://github.com/leanprover/lean4/blob/master/CONTRIBUTING.md\">https://github.com/leanprover/lean4/blob/master/CONTRIBUTING.md</a>. You can set <code>changelog-language</code> by writing that into a comment.</p>",
        "id": 500030883,
        "sender_full_name": "Joachim Breitner",
        "timestamp": 1739728905
    },
    {
        "content": "<p>done!</p>",
        "id": 504243506,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1741416747
    }
]