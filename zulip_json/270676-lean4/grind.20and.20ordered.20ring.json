[
    {
        "content": "<p>I've been playing with grind, and in particular I'm very impressed with its ability to do all sorts of thing with equalities over the reals. I did notice that it was \"incomplete\", though, in the sense that there were true equalities that were consequences of the given ones, that it wasn't proving. After playing around for a while I've determined this was because it can't make full use of the fact that the reals are an ordered ring. (So, maybe, it's complete for field arithmetic + equalities over the complex numbers...?)</p>\n<p>Anyway, I made a file of some work where I was playing around with adding @[grind] to different facts and seeing what it and couldn't prove. Certainly, in some of the cases, adding some basic facts to grind made it go <span aria-label=\"rocket\" class=\"emoji emoji-1f680\" role=\"img\" title=\"rocket\">:rocket:</span> and it could combine them nicely. But in some other cases, it was unable to use them, and I don't understand why. (And I'd like to.)</p>\n<p>I'm also curious if some of these facts (in an appropriately general form) could be tagged @grind in future versions of Lean, or if they wouldn't for issues of being too slow / explosive. In fact towards the end of the file I noticed that grind was entering a loop of generating progressively more complicated expressions, so definitely some combination of the facts that I had were \"badly behaved\".</p>\n<p><a href=\"https://live.lean-lang.org/#codez=JYWwDg9gTgLgBAWQIYwBYBtgCMBQOC0hhAgnFlMAKYBmcAdhDJXElhAK7xrB0DmAznF4U6AEwDkgkbzj8I6AG6UocAFQBjJHXExVcURBYwQeSgA8k4dMwAUZuAC44gXEIAlI7gAGOAF44ZgD0AJjhAFMJ/Xy9HPywATyERUThCCABrABoEniTUhgB3QW5+AEI8NEpoShBZAEcAfX52EDqAL2VDOzh4pzcPQJCAai7gyO9w+z9vQHIiLtHoslicODgYKHjhbOT8DbF9CEp+bXhciDy4JTW4PMp0dBY2TivoVJ4ZPOA0OGhRZUok6X4mQ+skoVX4Szg6ggdH4q3Y6hg0AhAHa4DxVoZUBDllC6KskJB+MwscscUgiYIACKUdTAUSsawAOgYMDqWlEdWA1GodWgdRZjPAcFQcAAPABuAB8cEJH2ACg+i2WqJEGLggAvyKDUdCZLXoQCX5OLZKAwHgUKtsJxmABtHaiAC6tQaTVa7Rw5ksYGscBsSDIHmccAA6y53DYRU5fYyAIzJMgx1wjIZRkL4eNBRMhSbuJx+mLzOIQu1bK4fEXle4QJTCm5gZSZYuaOh7NEwRlwABCj2sMEkZCglCQqVbezyzfRhhAlSMEBAwHUcGoSAR4PNFCwVrg1u2iUd/HqjWabSgEDwAAFbbucOVKtVeLHOj0c1FACZE/hGDhiSpWlztENlMDyoq56Xtk9rXqgFQDneISPqGHjeKK74hOMcCAAZEUSfgsEKrOsiQQvwJpbvudSEpy3LgTgF7FoASYTgTe0FCAAzD69jdPB4Z9EmszZh48Rvt4WGFssuFZGIEK4vihKUMUwpGgBQEwIsVGgbsNENokYo+I6hDIDA6jlqgwCCGwnzUCe1QVgABnUcACVZLC7FZ3hvnUVmMhBUFVEIAAsrEBmGqCAIEEfR2V4gWAEEECFhWYz4TJhX44b++HLB6CJwNYbJ4sZsQgNUwXChFeAAPSEDgPDUBATgACqXEUTjFtC6DxNaop+LwPmZDRzFdb5DZBA20aZJoFJwIOvDKHAAAKJ6iMN5IHHAADyUDgfgxU4AAxLw7BIFAHIgPwAhonQnm3jKEDovwdSUPUEA8qIxkwAAyvUx4dH6WABsGHERj6SAxnGWAJtxKZA4yGYjLxuaRF9QnfnaAD8WwAHKnGJSRNjKJ7VhW5mzsaViTUuK6mBYRP+exvScU49h6PE0MRJMcCABREPEJdhyx/u65NerY9hPj6f2If4z7eEMIsC4lInJZshDVUZgjQpQfZ+iAsSwso8SInAIAyRCqBINWkaCfBEtzPDGNFvhBD4AAEr8LC8EgPAY0IlAwIIsLwqkDg8563qdFTgUeDYsZDP07j06Mz4Mxzwk/nh2QESabK3MRqDo+HyHoVEcQXYRgEKkplGEM9hjXJCWgsKISRyHri7Lp7J0gbR9GQedZFILX/LQnQlAyL6/qC+GIVOCLSCRdFb5YGLYosHAQxw9LidW8sCnF8p1FXgx3kMHQ/e8GyPeEv9w+/WPr4sFP4/z7P0VIX6S8Ft+onFoQcDFLJACSKyZ+wvBUBcENvAYEeQODoCSPkXWKADJwCsl3Hu+9D4OV4PKSgzY0AoGFEbZgfpnJhTcsKWIkByiEUEOyBeBCkJENQCQxgkFyEeXXhAQuikt6qSSHRM6jF+68h5OgXsZ84a/Q8H6JC98YYYWXpzVef5UoWHSqgZklAygd0Yu9OomVlbiHEA/H0sZBbwySkncSywGBQGaHQJoeBCBTU4IBPgcBt5gS+JgyClZqwGAOEcJ4UBhxYBpEgdgRIRxNXiHkLQzcdYgFgYZZgeRM7enMGAAc/BCLQngSLdyOA7SkXNMoZsmjtH910b4aUNhTZuEyGHAKtj8BdngKofIegPiqywN6HWBhWz+wpkHAKQtQ7Z0jmodmnhY4WxXtzD0fS2IDJpgYxeyEo6LLTLEYI7hGZx1jGzOO+BDFTM0oQFG859a9L5pTAZkZhkbLgMVRZQx1kZlzoJQ5ct8AnPUKo85gc5lGLgLGN8tSI63L0MC4YzzjHLA/m/I5+BiCoEyAwOs7ZiDoDkECeA6AIBpEEJgVIzA2mCGgRNfuUAUCvBgXQeIsTqUrGUIdE6shZzMCgOwOgSBInxGxRAMAjJ+UEXYNyU5ghAUAqWf0JZTyJUjHpiMBO0K0ywveUtVISBYiZCKGiKQg5bgRMoMAfaKxJyUEyI0AczU3b8H/pAuAA4oS8DoMANof9sFWSKA5YyY0ajsHlEgaweJMhVkmloeIRI5zSE1YYCsvAID+sRtiSE0ILjAK9SEyl0ZE3yNkEK6gIqr6SsedxSVcqQgKrkXC4gzseCZF/mgDggDXXwDtH2TA/c9osAoGgPWgEFysGAJgQCi1wHsFtY0YVXyawDmYaSZVuxrSZW7hyLkPJkEDzqBQQBMAdL4Drf/Ldf8vUjttZBdAYBkbPW7omtte0ywmLdsc3lpqrgqwHLrYyhEnEVlur6hQ/qMHwHunAAAREu3uB8B7Af5TOjewEfn81mP8kW4KRlguzk8nMK851JBICKZFz7rjiDfXOdJlLv0+r9QGwDtArIgFHaRVhDkkDVroNB/8rC5Sby2FNDjRdFRV2bIbMQnTFZCDjXcIDUJ2BQCJGTAOCHg76JQ6Ch5ELMOyOLNaOj6AGP8B3f6uQfjUjgng5c/5kqkLKeeWhqVtyoVbAVl6i4GTxxexZdwL9ICC6cf4xoLQOg9BCdECJ7Bv9j1JENtWTOdYkiNggUkd4nwPhSEpScPI1hRATXvdm0SsGlLZc0lp+jhJMiCOPsu7kumN3AC3Tu6Lfwm3wLK2BldVXN1AIcuFsgzAMENvLIYCaoDgGOw3PAX+O0DjEsYDOugN6u2oCAA\">live.lean-lang.org</a></p>\n<p>Any feedback + help appreciated!</p>",
        "id": 528370786,
        "sender_full_name": "Alex Meiburg",
        "timestamp": 1752250311
    },
    {
        "content": "<p>I don't know if it is related, but I had a similar experience (not for ordered stuff), and I noticed that adding the instance in <a href=\"https://github.com/leanprover-community/mathlib4/pull/27005\">#27005</a> made <code>grind</code> smarter.</p>",
        "id": 528371861,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1752250784
    },
    {
        "content": "<p>See the discussion <a href=\"#narrow/channel/113488-general/topic/How.20to.20understand.20why.20grind.20doesn't.20work.3F/with/528371678\">here</a></p>",
        "id": 528371937,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1752250817
    },
    {
        "content": "<p>Do keep in mind that grind only supports <a href=\"https://lean-lang.org/doc/reference/latest/The--grind--tactic/Linear-Arithmetic-Solver/#The-Lean-Language-Reference--The--grind--tactic--Linear-Arithmetic-Solver\">linear arithmetic</a> and in particular as noted at the end:</p>\n<p>Planned future features :</p>\n<ul>\n<li>Better communication between the <code>ring</code> and <code>linarith</code> solvers. There is currently very little communication between these two solvers.</li>\n<li>Non-linear arithmetic over ordered rings.</li>\n</ul>",
        "id": 528374409,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1752251878
    },
    {
        "content": "<p>Well, I was referring to the \"Algebraic Solver\", which is distinctly nonlinear, no?</p>",
        "id": 528374536,
        "sender_full_name": "Alex Meiburg",
        "timestamp": 1752251934
    },
    {
        "content": "<p>Yes but the algebraic solver (which is referred to as <code>ring</code> above) doesn't to business with ordering relations, it only operates on equalities.</p>",
        "id": 528374746,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1752252042
    },
    {
        "content": "<p>I see, makes sense. Would it be fair game to include facts like <code>x^2 + y^2 = 0 ↔ x = 0 ∧ y = 0</code> as <code>@[grind]</code>, then? Would ring be able to use this effectively?</p>",
        "id": 528375649,
        "sender_full_name": "Alex Meiburg",
        "timestamp": 1752252443
    },
    {
        "content": "<p>Like, there is a meaningful sense in which the theory of equalities over the reals is equivalent to the theory of inequalities over reals, since <code>0 &lt;= a</code> iff <code>\\exists b, a = b^2</code>. And I'm curious how much this could be boostrapped on top of ring</p>",
        "id": 528375827,
        "sender_full_name": "Alex Meiburg",
        "timestamp": 1752252523
    },
    {
        "content": "<p>If I <a href=\"https://live.lean-lang.org/#codez=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\">add some instances</a>, it helps a bit:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"n\">Preorder</span><span class=\"bp\">.</span><span class=\"n\">toGrindPreorder</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Preorder</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">Grind</span><span class=\"bp\">.</span><span class=\"n\">Preorder</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">le_refl</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">le_refl</span>\n<span class=\"w\">  </span><span class=\"n\">le_trans</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"n\">root_</span><span class=\"bp\">.</span><span class=\"n\">le_trans</span>\n<span class=\"w\">  </span><span class=\"n\">lt_iff_le_not_le</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"n\">root_</span><span class=\"bp\">.</span><span class=\"n\">lt_iff_le_not_ge</span>\n\n<span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"n\">IsOrderedCancelAddMonoid</span><span class=\"bp\">.</span><span class=\"n\">toOrderedAdd</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">AddCommMonoid</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">PartialOrder</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">IsOrderedCancelAddMonoid</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">Grind</span><span class=\"bp\">.</span><span class=\"n\">OrderedAdd</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">add_le_left_iff</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">    </span><span class=\"bp\">⟨</span><span class=\"o\">(</span><span class=\"n\">IsOrderedAddMonoid</span><span class=\"bp\">.</span><span class=\"n\">add_le_add_right</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"o\">),</span>\n<span class=\"w\">      </span><span class=\"n\">IsOrderedCancelAddMonoid</span><span class=\"bp\">.</span><span class=\"n\">le_of_add_le_add_right</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">_⟩</span>\n\n<span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"n\">IsStrictOrderedRing</span><span class=\"bp\">.</span><span class=\"n\">toGrindOrderedRing</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Semiring</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">PartialOrder</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">IsStrictOrderedRing</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">Grind</span><span class=\"bp\">.</span><span class=\"n\">OrderedRing</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">zero_lt_one</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">zero_lt_one</span>\n<span class=\"w\">  </span><span class=\"n\">mul_lt_mul_of_pos_left</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">mul_lt_mul_of_pos_left</span>\n<span class=\"w\">  </span><span class=\"n\">mul_lt_mul_of_pos_right</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">mul_lt_mul_of_pos_right</span>\n</code></pre></div>\n<p>Will PR.</p>",
        "id": 528376884,
        "sender_full_name": "Alex Meiburg",
        "timestamp": 1752253041
    },
    {
        "content": "<p>It's just a bit, though, it gets me</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">ne_of_lt'</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">grind</span>\n</code></pre></div>\n<p>and none of the other examples in that file.</p>",
        "id": 528376947,
        "sender_full_name": "Alex Meiburg",
        "timestamp": 1752253070
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"448405\">Alex Meiburg</span> <a href=\"#narrow/channel/270676-lean4/topic/grind.20and.20ordered.20ring/near/528376884\">said</a>:</p>\n<blockquote>\n<p>If I <a href=\"https://live.lean-lang.org/#codez=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\">add some instances</a>, it helps a bit:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"n\">Preorder</span><span class=\"bp\">.</span><span class=\"n\">toGrindPreorder</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Preorder</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">Grind</span><span class=\"bp\">.</span><span class=\"n\">Preorder</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">le_refl</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">le_refl</span>\n<span class=\"w\">  </span><span class=\"n\">le_trans</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"n\">root_</span><span class=\"bp\">.</span><span class=\"n\">le_trans</span>\n<span class=\"w\">  </span><span class=\"n\">lt_iff_le_not_le</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"n\">root_</span><span class=\"bp\">.</span><span class=\"n\">lt_iff_le_not_ge</span>\n\n<span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"n\">IsOrderedCancelAddMonoid</span><span class=\"bp\">.</span><span class=\"n\">toOrderedAdd</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">AddCommMonoid</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">PartialOrder</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">IsOrderedCancelAddMonoid</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">Grind</span><span class=\"bp\">.</span><span class=\"n\">OrderedAdd</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">add_le_left_iff</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">    </span><span class=\"bp\">⟨</span><span class=\"o\">(</span><span class=\"n\">IsOrderedAddMonoid</span><span class=\"bp\">.</span><span class=\"n\">add_le_add_right</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"o\">),</span>\n<span class=\"w\">      </span><span class=\"n\">IsOrderedCancelAddMonoid</span><span class=\"bp\">.</span><span class=\"n\">le_of_add_le_add_right</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">_⟩</span>\n\n<span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"n\">IsStrictOrderedRing</span><span class=\"bp\">.</span><span class=\"n\">toGrindOrderedRing</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Semiring</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">PartialOrder</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">IsStrictOrderedRing</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">Grind</span><span class=\"bp\">.</span><span class=\"n\">OrderedRing</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">zero_lt_one</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">zero_lt_one</span>\n<span class=\"w\">  </span><span class=\"n\">mul_lt_mul_of_pos_left</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">mul_lt_mul_of_pos_left</span>\n<span class=\"w\">  </span><span class=\"n\">mul_lt_mul_of_pos_right</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">mul_lt_mul_of_pos_right</span>\n</code></pre></div>\n<p>Will PR.</p>\n</blockquote>\n<p>This seems reasonable yes, in general it would be good to focus on how mathlib can connect their hierarchies to grind's and then see what still doesn't work afterwards.</p>\n<p><span class=\"user-mention silent\" data-user-id=\"448405\">Alex Meiburg</span> <a href=\"#narrow/channel/270676-lean4/topic/grind.20and.20ordered.20ring/near/528375649\">said</a>:</p>\n<blockquote>\n<p>I see, makes sense. Would it be fair game to include facts like <code>x^2 + y^2 = 0 ↔ x = 0 ∧ y = 0</code> as <code>@[grind]</code>, then? Would ring be able to use this effectively?</p>\n</blockquote>\n<p>I'm not sure about this unfortunately.</p>",
        "id": 528380612,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1752254662
    },
    {
        "content": "<p>I noticed that <code>grind</code> seems to slow down on ring problems when a lot is imported.  For example,</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">K</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Field</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"n\">z</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"o\">}</span>\n\n<span class=\"bp\">#</span><span class=\"n\">time</span>\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"mi\">42</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"mi\">45</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">grind</span>\n</code></pre></div>\n<p>With <code>import Mathlib.Algebra.Field.Rat</code> it takes 66 ms, with <code>import Mathlib</code> it takes 1091 ms.  (On the web editor.). Is this to be expected?</p>",
        "id": 530466710,
        "sender_full_name": "Heather Macbeth",
        "timestamp": 1753325840
    },
    {
        "content": "<p>(Note that <code>ring</code> doesn't seem to have this problem.)</p>",
        "id": 530466927,
        "sender_full_name": "Heather Macbeth",
        "timestamp": 1753325996
    },
    {
        "content": "<p>This is because inferring <code>Lean.Grind.NoNatZeroDivisors</code> is slow, presumably because <code>Mathlib</code> as a whole has some instance that makes this go horribly wrong.</p>",
        "id": 530489497,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1753341111
    },
    {
        "content": "<p>Hm, looking at <code>trace.profiler</code> there seem to be about 30 applicable instances that sum to 600ms of latency and the lower you set the profiler threshold the more instances with very low latency pop up. So the issue is seemingly just that there is a million ways to get to NoNatZeroDivisors and all are tried.</p>",
        "id": 530489776,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1753341224
    },
    {
        "content": "<p>Pretty weird because that instance is not actually needed for the problem.</p>",
        "id": 530500898,
        "sender_full_name": "Heather Macbeth",
        "timestamp": 1753345088
    },
    {
        "content": "<p>Ah, this could be because grind precomputes these instances as to avoid synthesizing them repeatedly by in subterms and putting pressure on caches. Maybe thunking these computations could be of interest then. I'll open an issue about it.</p>",
        "id": 530508391,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1753347422
    },
    {
        "content": "<p>Thanks!</p>",
        "id": 530509596,
        "sender_full_name": "Heather Macbeth",
        "timestamp": 1753347844
    },
    {
        "content": "<p>I think on the Mathlib side we can also do a (much) better job managing instances, which I wrote about yesterday here: <a class=\"stream-topic\" data-stream-id=\"287929\" href=\"/#narrow/channel/287929-mathlib4/topic/bug.20with.20quotient.20of.20Z/with/530583199\">#mathlib4 &gt; bug with quotient of Z</a></p>",
        "id": 530593683,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1753372013
    },
    {
        "content": "<p>I saw this thread and was moved to be more selective about the imports I was making in a file that uses grind. However, when I import just the files that cause the red squiggles to go away, grind isn't able to prove my theorem. I supposed this is because there are some grind instances that are needed but are not being imported. Is there a way to get the minimal imports needed to get a grind to work? I've tried <code>grind?</code> but the infoview just suggests trying <code>grind only</code>. I've attached a mwe of my code below. </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">statement</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"n\">D</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℂ</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">h1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">D</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">h2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">D</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">h5</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">D</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">  </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">⁻¹</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">D</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)))</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">=</span>\n<span class=\"w\">    </span><span class=\"o\">((</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">D</span><span class=\"o\">)</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"o\">)</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"o\">)</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">)</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">grind</span>\n<span class=\"c1\">-- This works</span>\n</code></pre></div>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Data</span><span class=\"bp\">.</span><span class=\"n\">Complex</span><span class=\"bp\">.</span><span class=\"n\">Basic</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">statement</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"n\">D</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℂ</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">h1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">D</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">h2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">D</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">h5</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">D</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">  </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">⁻¹</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">D</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)))</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">=</span>\n<span class=\"w\">    </span><span class=\"o\">((</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">D</span><span class=\"o\">)</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"o\">)</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"o\">)</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">)</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">grind</span>\n<span class=\"c1\">-- This does not work</span>\n</code></pre></div>",
        "id": 532802892,
        "sender_full_name": "Mauricio Barba da Costa",
        "timestamp": 1754344231
    },
    {
        "content": "<p><code>#min_imports</code>?</p>",
        "id": 532803316,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1754344471
    },
    {
        "content": "<p>That did it. Thanks!</p>",
        "id": 532809341,
        "sender_full_name": "Mauricio Barba da Costa",
        "timestamp": 1754349132
    }
]