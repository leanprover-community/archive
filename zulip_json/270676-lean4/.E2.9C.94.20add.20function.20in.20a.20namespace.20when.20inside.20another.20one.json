[
    {
        "content": "<p>I was coding without adding namespaces. So </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"bp\">.</span><span class=\"n\">init</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">s</span><span class=\"bp\">.</span><span class=\"n\">dropRight</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n\n<span class=\"bp\">#</span><span class=\"n\">eval</span><span class=\"w\"> </span><span class=\"s2\">\"teste\"</span><span class=\"bp\">.</span><span class=\"n\">init</span>\n</code></pre></div>\n<p>It works fine as expected. But if I make the definition above inside another namespace, the function is now defined as \"mynamespace.String.init,\"  and init is no longer in the String namespace. What is the best approach?</p>",
        "id": 456760378,
        "sender_full_name": "Alexandre Rademaker",
        "timestamp": 1722916958
    },
    {
        "content": "<p>You can use <code>_root_.String.init</code> to \"reset\" the namespace.</p>",
        "id": 456761950,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1722917851
    },
    {
        "content": "<p>Thank you.</p>",
        "id": 456763580,
        "sender_full_name": "Alexandre Rademaker",
        "timestamp": 1722918480
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"121542\">Alexandre Rademaker</span> has marked this topic as resolved.</p>",
        "id": 456763932,
        "sender_full_name": "Notification Bot",
        "timestamp": 1722918620
    },
    {
        "content": "<p>Why this don't work</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"n\">root_</span><span class=\"bp\">.</span><span class=\"n\">String</span><span class=\"w\"> </span><span class=\"k\">in</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">init</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">s</span><span class=\"bp\">.</span><span class=\"n\">dropRight</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n</code></pre></div>\n<p>?</p>",
        "id": 456764131,
        "sender_full_name": "Alexandre Rademaker",
        "timestamp": 1722918719
    },
    {
        "content": "<p>I think that <code>open</code> does not have a <code>_root_</code> mechanism: just <code>open String</code> works and may already do the right thing.</p>",
        "id": 456764256,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1722918773
    },
    {
        "content": "<p>No, it does not do the same thing. </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"w\"> </span><span class=\"k\">in</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">init</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">s</span><span class=\"bp\">.</span><span class=\"n\">dropRight</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n</code></pre></div>\n<p><code>init</code> is a symbol in my namespace!</p>",
        "id": 456764430,
        "sender_full_name": "Alexandre Rademaker",
        "timestamp": 1722918856
    },
    {
        "content": "<p>Both codes that you sent work on the lean server: could you send something more that has an error?</p>",
        "id": 456764998,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1722918999
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">namespace</span><span class=\"w\"> </span><span class=\"n\">Chapter1</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"w\"> </span><span class=\"k\">in</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">init</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">s</span><span class=\"bp\">.</span><span class=\"n\">dropRight</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n\n<span class=\"bp\">#</span><span class=\"n\">eval</span><span class=\"w\"> </span><span class=\"s2\">\"teste\"</span><span class=\"bp\">.</span><span class=\"n\">init</span>\n\n<span class=\"kn\">end</span><span class=\"w\"> </span><span class=\"n\">Chapter1</span>\n</code></pre></div>",
        "id": 456765241,
        "sender_full_name": "Alexandre Rademaker",
        "timestamp": 1722919086
    },
    {
        "content": "<p>the eval didn't work for me in VS Code.</p>",
        "id": 456765291,
        "sender_full_name": "Alexandre Rademaker",
        "timestamp": 1722919122
    },
    {
        "content": "<p>I am using <code>Lean (version 4.10.0-rc2, arm64-apple-darwin23.5.0, commit 702c31b80712, Release)</code></p>",
        "id": 456765465,
        "sender_full_name": "Alexandre Rademaker",
        "timestamp": 1722919233
    },
    {
        "content": "<p>It does not work indeed, but <code>open</code> just <code>open</code>s a namespace, does not set one.  With <code>open String</code> you can write <code>String.xxx</code> as <code>xxx</code>, but it does not affect what name new declarations are given.</p>",
        "id": 456765474,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1722919237
    },
    {
        "content": "<p>Here is an example:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">namespace</span><span class=\"w\"> </span><span class=\"n\">Chapter1</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"w\"> </span><span class=\"k\">in</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">init</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">dropRight</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\">  </span><span class=\"c1\">-- works, since Lean finds `String.dropRight`</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">init1</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">dropRight</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\">  </span><span class=\"c1\">-- does not work, since Lean does not find `String.dropRight`</span>\n</code></pre></div>",
        "id": 456765655,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1722919337
    },
    {
        "content": "<p>In the example above, the two declarations are called <code>Chapter1.init</code> and <code>Chapter1.init1</code> (or at least the second one would be called this if it did not error).</p>",
        "id": 456765836,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1722919416
    },
    {
        "content": "<p>Yes, but what I want is to later use \"teste\".init, that is, I really want init to be in the String namespace so I could use the dot notation with any string.</p>",
        "id": 456765969,
        "sender_full_name": "Alexandre Rademaker",
        "timestamp": 1722919509
    },
    {
        "content": "<p>So <code>_root_.String.xxx</code> is the way to go.</p>",
        "id": 456766118,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1722919621
    },
    {
        "content": "<p>If you intend to have a lot of lemmas in the \"pure\" <code>String</code> namespace, it might make sense to have a section which is not inside the <code>Chapter1</code> namespace but directly in the <code>String</code> one.  E.g.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"c\">/-</span><span class=\"cm\">!</span>\n<span class=\"cm\"># String lemmas</span>\n<span class=\"cm\">-/</span>\n<span class=\"kn\">namespace</span><span class=\"w\"> </span><span class=\"n\">String</span>\n\n<span class=\"bp\">...</span>\n\n<span class=\"kn\">end</span><span class=\"w\"> </span><span class=\"n\">String</span>\n\n<span class=\"c\">/-</span><span class=\"cm\">!</span>\n<span class=\"cm\"># Chapter 1</span>\n\n<span class=\"cm\">...</span>\n<span class=\"cm\">-/</span>\n\n<span class=\"kn\">namespace</span><span class=\"w\"> </span><span class=\"n\">Chapter</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n\n<span class=\"bp\">...</span>\n</code></pre></div>",
        "id": 456766309,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1722919757
    },
    {
        "content": "<p>I see. Is there any way to check \"the current namespace\"?</p>",
        "id": 456766443,
        "sender_full_name": "Alexandre Rademaker",
        "timestamp": 1722919839
    },
    {
        "content": "<p>You may already have imported <code>#where</code> (it is defined somewhere in <code>Batteries</code> I think).</p>",
        "id": 456766491,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1722919891
    },
    {
        "content": "<p>No, I am not using Batteries... but fine, one argument to use it. Thank you</p>",
        "id": 456766574,
        "sender_full_name": "Alexandre Rademaker",
        "timestamp": 1722919934
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Batteries</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span><span class=\"bp\">.</span><span class=\"n\">Where</span>\n\n<span class=\"bp\">#</span><span class=\"kn\">where</span>\n\n<span class=\"kn\">namespace</span><span class=\"w\"> </span><span class=\"n\">String</span>\n\n<span class=\"bp\">#</span><span class=\"kn\">where</span>\n\n<span class=\"kn\">namespace</span><span class=\"w\"> </span><span class=\"n\">Chapter1</span>\n\n<span class=\"bp\">#</span><span class=\"kn\">where</span>\n</code></pre></div>",
        "id": 456766581,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1722919951
    },
    {
        "content": "<p><code>#where</code> also tells you what variables are in scope and a few more details.</p>",
        "id": 456766641,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1722920002
    },
    {
        "content": "<p>Excellent, thank you</p>",
        "id": 456766657,
        "sender_full_name": "Alexandre Rademaker",
        "timestamp": 1722920020
    }
]