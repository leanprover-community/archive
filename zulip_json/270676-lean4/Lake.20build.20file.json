[
    {
        "content": "<p>I'm trying to replace a test script I have with <code>lake test</code>. I created an executable test driver for this:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"c1\">-- in lakefile.lean</span>\n<span class=\"kd\">@[</span><span class=\"n\">test_driver</span><span class=\"kd\">]</span>\n<span class=\"n\">lean_exe</span><span class=\"w\"> </span><span class=\"n\">TestDriver</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">srcDir</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">...</span>\n</code></pre></div>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"c1\">-- TestDriver.lean</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">main</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">args</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IO</span><span class=\"w\"> </span><span class=\"n\">Unit</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">do</span>\n<span class=\"w\">  </span><span class=\"bp\">...</span>\n</code></pre></div>\n<p>What I'm stuck on is: If I have a given <code>System.FilePath</code> for a <code>.lean</code> file, how can I build it? I was considering spawning a process and calling <code>lake build</code>, but then I might as well keep my script. I tried digging through Lake's source, but didn't find anything that looked like I would be able to call it.</p>",
        "id": 491171238,
        "sender_full_name": "Marcus Rossel",
        "timestamp": 1735474063
    },
    {
        "content": "<p>I don't think this is possible, but you would need to ask Mac to be sure.</p>\n<p>(It's still nice to have your test in <code>lake test</code> even if that test has to spawn <code>lake</code> processes!)</p>",
        "id": 492599321,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1736378288
    }
]