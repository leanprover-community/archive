[
    {
        "content": "<p>In the Elaboration chapter of <em>Metaprogramming in Lean 4</em>, <code>SyntaxKind</code> is mentioned. But I couldn't seem to find its definition. What would be an intuitive way to understand <code>SyntaxKind</code>?</p>",
        "id": 459461386,
        "sender_full_name": "Kevin Cheung",
        "timestamp": 1723206790
    },
    {
        "content": "<p>Do  you mean a <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Lean.SyntaxNodeKind#doc\">docs#Lean.SyntaxNodeKind</a>, maybe?</p>",
        "id": 459474657,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1723210042
    },
    {
        "content": "<p>I don't know. Here is the paragraph in the book:</p>\n<blockquote>\n<p>In the following example, we are not extending the original <code>#check</code> syntax, but adding a new <code>SyntaxKind</code> for this specific syntax construct. However, from the point of view of the user, the effect is basically the same.</p>\n</blockquote>",
        "id": 459475408,
        "sender_full_name": "Kevin Cheung",
        "timestamp": 1723210210
    },
    {
        "content": "<p>The only other mention in the book is in the following paragraph:</p>\n<blockquote>\n<ol start=\"2\">\n<li>If no macro can be applied, we search for all <code>CommandElab</code>s that have been registered for the <code>SyntaxKind</code> of the <code>Syntax</code> we are elaborating, using the <code>command_elab</code> attribute.</li>\n</ol>\n</blockquote>",
        "id": 459475679,
        "sender_full_name": "Kevin Cheung",
        "timestamp": 1723210277
    },
    {
        "content": "<p>I am not completely sure what a <code>SyntaxKind</code> really is, but this is what the syntax tree for <code>#check \"mycheck\"</code> (from the book) looks like before and after adding the new <code>elab</code>:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"c\">/-</span>\n<span class=\"cm\">node Lean.Parser.Command.check, none</span>\n<span class=\"cm\">|-atom original: ⟨⟩⟨ ⟩-- '#check'</span>\n<span class=\"cm\">|-node str, none</span>\n<span class=\"cm\">|   |-atom original: ⟨⟩⟨⏎⏎⟩-- '\"mycheck\"'</span>\n<span class=\"cm\">-/</span>\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"s2\">\"mycheck\"</span>\n\n<span class=\"kn\">elab</span><span class=\"w\"> </span><span class=\"s2\">\"#check\"</span><span class=\"w\"> </span><span class=\"s2\">\"mycheck\"</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">command</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"k\">do</span>\n<span class=\"w\">  </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">logInfo</span><span class=\"w\"> </span><span class=\"s2\">\"Got ya!\"</span>\n\n<span class=\"c\">/-</span>\n<span class=\"cm\">node «command#checkMycheck», none</span>\n<span class=\"cm\">|-atom original: ⟨⟩⟨ ⟩-- '#check'</span>\n<span class=\"cm\">|-atom original: ⟨⟩⟨⏎⏎⟩-- 'mycheck'</span>\n<span class=\"cm\">-/</span>\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">mycheck</span>\n</code></pre></div>",
        "id": 459477893,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1723210998
    },
    {
        "content": "<p>Next to <code>node</code> you see the <code>SyntaxNodeKind</code> which typically gives you information on what parser has \"read\" the corresponding node.  As you can see, the first one, has been read by the \"usual\" <code>check</code> parser.  After the <code>elab</code>, though, the parsing has been taken over by the newly defined elaborator and the <code>SyntaxNodeKind</code> is indeed the new one.</p>",
        "id": 459478194,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1723211106
    },
    {
        "content": "<p>I see. I guess <code>SyntaxKind</code> is probably just a typo for <code>SyntaxNodeKind</code>. Thank you.</p>",
        "id": 459484758,
        "sender_full_name": "Kevin Cheung",
        "timestamp": 1723212737
    }
]