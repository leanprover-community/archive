[
    {
        "content": "<p>There is a repository <a href=\"https://github.com/digama0/olean-rs/tree/master\">https://github.com/digama0/olean-rs/tree/master</a> that parses .olean files. I'd like to have a upgrade so that it can also parse lean4 .olean files.</p>\n<p>What would be the best way, <span class=\"user-mention\" data-user-id=\"110049\">@Mario Carneiro</span> you have written the code, do you know how extensive such a task would be. Are there significant changes compared to lean3 or is this mostly a straightforward endeavour.</p>",
        "id": 525903144,
        "sender_full_name": "metakuntyyy",
        "timestamp": 1750943976
    },
    {
        "content": "<p>Or maybe an alternative question. Can I instead use .ilean files, since they are already human readable? However it seems that the .ilean files do not contain enough information. So I assume that .olean files contain everything, as opposed to .ilean files.</p>",
        "id": 525907317,
        "sender_full_name": "metakuntyyy",
        "timestamp": 1750945120
    },
    {
        "content": "<p>There is an up to date rust olean parser at <a href=\"https://github.com/digama0/leangz\">https://github.com/digama0/leangz</a> (which is however not set up for just dumping files), and an up to date lean olean parser at <a href=\"https://github.com/digama0/oleandump\">https://github.com/digama0/oleandump</a></p>",
        "id": 526106920,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1751037620
    },
    {
        "content": "<p>Ok, I have tried using the rust parser as I want to use <a href=\"https://github.com/ammkrn/nanoda_lib/\">https://github.com/ammkrn/nanoda_lib/</a> . Currently nanoda_lib uses the lean4export files. I think it would be cool if it also was able to use .olean files.</p>\n<p>Everything compiled smoothly, however when copying the leantar binary and the .olean file into a directory and when I execute this</p>\n<div class=\"codehilite\" data-code-language=\"Bash\"><pre><span></span><code>./leantar<span class=\"w\"> </span>-k<span class=\"w\"> </span>./Scratch.olean\n</code></pre></div>\n<p>I get the following</p>\n<div class=\"codehilite\" data-code-language=\"Bash\"><pre><span></span><code>bad<span class=\"w\"> </span>.ltar<span class=\"w\"> </span>file\n</code></pre></div>\n<p>Scratch.olean for reference.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"mi\">2</span><span class=\"bp\">&lt;</span><span class=\"mi\">3</span><span class=\"o\">:=</span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">norm_num</span>\n</code></pre></div>\n<p>Here is my lean toolchain, maybe I'm on a too new of a version: <strong> leanprover/lean4:v4.21.0-rc3 </strong></p>",
        "id": 526120193,
        "sender_full_name": "metakuntyyy",
        "timestamp": 1751042548
    },
    {
        "content": "<p>Oleandump works. I think</p>\n<p>Here's my input</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">prelude</span>\n\n<span class=\"kn\">inductive</span><span class=\"w\"> </span><span class=\"n\">Unity</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">unit</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Unity</span>\n</code></pre></div>\n<p>Here's the output:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">useGmp</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">true</span>\n<span class=\"n\">leanVersion</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mf\">4.21</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">-</span><span class=\"n\">rc3</span>\n<span class=\"n\">githash</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">6741444</span><span class=\"n\">a63eec253a7eae7a83f1beb3de015023d</span>\n<span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">x198</span><span class=\"o\">{</span><span class=\"mi\">344</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Array</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"mi\">0</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">Name</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">array</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"o\">[</span><span class=\"ss\">`Unity.recOn</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"ss\">`Unity.rec</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"ss\">`Unity.unit</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"ss\">`Unity</span><span class=\"o\">]</span>\n<span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">x218</span><span class=\"o\">{</span><span class=\"mi\">96</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"mi\">0</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">Name</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">cons</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"o\">[</span><span class=\"ss\">`u</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">nil</span><span class=\"o\">]</span>\n<span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">x2c0</span><span class=\"o\">{</span><span class=\"mi\">32</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">Expr</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">Expr</span><span class=\"bp\">.</span><span class=\"n\">const</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"o\">[</span><span class=\"ss\">`Unity</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">nil</span><span class=\"o\">]</span>\n<span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">x2e0</span><span class=\"o\">{</span><span class=\"mi\">24</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">Level</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">Level</span><span class=\"bp\">.</span><span class=\"n\">param</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"o\">[</span><span class=\"ss\">`u</span><span class=\"o\">]</span>\n<span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">x2f8</span><span class=\"o\">{</span><span class=\"mi\">48</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">Expr</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">Expr</span><span class=\"bp\">.</span><span class=\"n\">sort</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"o\">[</span><span class=\"n\">x2e0</span><span class=\"o\">{</span><span class=\"mi\">24</span><span class=\"o\">}]</span>\n<span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">x310</span><span class=\"o\">{</span><span class=\"mi\">200</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">Expr</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">Expr</span><span class=\"bp\">.</span><span class=\"n\">forallE</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"o\">[</span><span class=\"ss\">`t</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">x2c0</span><span class=\"o\">{</span><span class=\"mi\">32</span><span class=\"o\">},</span><span class=\"w\"> </span><span class=\"n\">x2f8</span><span class=\"o\">{</span><span class=\"mi\">48</span><span class=\"o\">},</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">BinderInfo</span><span class=\"bp\">.</span><span class=\"n\">default</span><span class=\"o\">]</span>\n<span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">x360</span><span class=\"o\">{</span><span class=\"mi\">24</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">Expr</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">Expr</span><span class=\"bp\">.</span><span class=\"n\">bvar</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"o\">[</span><span class=\"mi\">1</span><span class=\"o\">]</span>\n<span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">x378</span><span class=\"o\">{</span><span class=\"mi\">32</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">Expr</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">Expr</span><span class=\"bp\">.</span><span class=\"n\">const</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"o\">[</span><span class=\"ss\">`Unity.unit</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">nil</span><span class=\"o\">]</span>\n<span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">x398</span><span class=\"o\">{</span><span class=\"mi\">88</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">Expr</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">Expr</span><span class=\"bp\">.</span><span class=\"n\">app</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"o\">[</span><span class=\"n\">x360</span><span class=\"o\">{</span><span class=\"mi\">24</span><span class=\"o\">},</span><span class=\"w\"> </span><span class=\"n\">x378</span><span class=\"o\">{</span><span class=\"mi\">32</span><span class=\"o\">}]</span>\n<span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">x3b8</span><span class=\"o\">{</span><span class=\"mi\">24</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">Expr</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">Expr</span><span class=\"bp\">.</span><span class=\"n\">bvar</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"o\">[</span><span class=\"mi\">2</span><span class=\"o\">]</span>\n<span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">x3d0</span><span class=\"o\">{</span><span class=\"mi\">56</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">Expr</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">Expr</span><span class=\"bp\">.</span><span class=\"n\">app</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"o\">[</span><span class=\"n\">x3b8</span><span class=\"o\">{</span><span class=\"mi\">24</span><span class=\"o\">},</span><span class=\"w\"> </span><span class=\"n\">x360</span><span class=\"o\">{</span><span class=\"mi\">24</span><span class=\"o\">}]</span>\n<span class=\"bp\">...</span>\n</code></pre></div>\n<p>Does this look good?</p>",
        "id": 526122336,
        "sender_full_name": "metakuntyyy",
        "timestamp": 1751043371
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"725717\">metakuntyyy</span> <a href=\"#narrow/channel/270676-lean4/topic/Explanation.20of.20olean.20files/near/526120193\">said</a>:</p>\n<blockquote>\n<p>Everything compiled smoothly, however when copying the leantar binary and the .olean file into a directory and when I execute this</p>\n<div class=\"codehilite\" data-code-language=\"Bash\"><pre><span></span><code>./leantar<span class=\"w\"> </span>-k<span class=\"w\"> </span>./Scratch.olean\n</code></pre></div>\n<p>I get the following</p>\n<div class=\"codehilite\" data-code-language=\"Bash\"><pre><span></span><code>bad<span class=\"w\"> </span>.ltar<span class=\"w\"> </span>file\n</code></pre></div>\n</blockquote>\n<p>That's because leantar reads .ltar files not .olean. It compresses .olean files though, if you pass the right arguments</p>",
        "id": 526205294,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1751118818
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"725717\">metakuntyyy</span> <a href=\"#narrow/channel/270676-lean4/topic/Explanation.20of.20olean.20files/near/526120193\">said</a>:</p>\n<blockquote>\n<p>Ok, I have tried using the rust parser as I want to use <a href=\"https://github.com/ammkrn/nanoda_lib/\">https://github.com/ammkrn/nanoda_lib/</a> . Currently nanoda_lib uses the lean4export files. I think it would be cool if it also was able to use .olean files.</p>\n</blockquote>\n<p>Probably worth coordinating with <span class=\"user-mention\" data-user-id=\"228466\">@Chris Bailey</span> on this</p>",
        "id": 526205344,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1751118870
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"725717\">metakuntyyy</span> <a href=\"#narrow/channel/270676-lean4/topic/Explanation.20of.20olean.20files/near/526122336\">said</a>:</p>\n<blockquote>\n<p>Oleandump works. I think</p>\n<p>Does this look good?</p>\n</blockquote>\n<p>Yes that's what it's supposed to look like</p>",
        "id": 526205371,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1751118912
    },
    {
        "content": "<p>Ok thanks for the answers. I have some questions regarding the content and the differences between the lean4export.</p>\n<p>In your documentation for the oleandump you mention</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">Build</span><span class=\"w\"> </span><span class=\"n\">it</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"ss\">`lake</span><span class=\"w\"> </span><span class=\"n\">build</span><span class=\"bp\">`</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">use</span><span class=\"w\"> </span><span class=\"n\">it</span><span class=\"w\"> </span><span class=\"n\">like</span><span class=\"w\"> </span><span class=\"ss\">`lake</span><span class=\"w\"> </span><span class=\"n\">exe</span><span class=\"w\"> </span><span class=\"n\">oleandump</span><span class=\"w\"> </span><span class=\"n\">FILE</span><span class=\"bp\">.</span><span class=\"n\">olean</span><span class=\"w\"> </span><span class=\"n\">MOD1</span><span class=\"w\"> </span><span class=\"n\">MOD2</span><span class=\"w\"> </span><span class=\"bp\">...`</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"kn\">where</span><span class=\"w\"> </span><span class=\"ss\">`FILE.olean</span><span class=\"bp\">`</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">file</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">dump</span><span class=\"w\"> </span><span class=\"n\">and</span><span class=\"w\"> </span><span class=\"ss\">`MOD1</span><span class=\"w\"> </span><span class=\"n\">MOD2</span><span class=\"w\"> </span><span class=\"bp\">...`</span><span class=\"w\"> </span><span class=\"n\">are</span><span class=\"w\"> </span><span class=\"n\">modules</span><span class=\"w\"> </span><span class=\"n\">that</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">dump</span><span class=\"w\"> </span><span class=\"n\">tool</span><span class=\"w\"> </span><span class=\"n\">itself</span><span class=\"w\"> </span><span class=\"n\">will</span><span class=\"w\"> </span><span class=\"n\">load</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">which</span><span class=\"w\"> </span><span class=\"n\">will</span><span class=\"w\"> </span><span class=\"n\">help</span><span class=\"w\"> </span><span class=\"n\">it</span><span class=\"w\"> </span><span class=\"n\">resolve</span><span class=\"w\"> </span><span class=\"n\">references</span><span class=\"w\"> </span><span class=\"n\">inside</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">olean</span><span class=\"w\"> </span><span class=\"n\">file</span><span class=\"bp\">.</span>\n</code></pre></div>\n<p>something regarding resolving references.</p>\n<ul>\n<li>If I have A.olean and B.olean, and B imports A, and A has a definition that B uses, what do I get when I just dump B without A?</li>\n<li>If I wanted to export the whole mathlib, would I need to take special care, or is it enough to dump all .olean files separately?</li>\n<li>What's the difference contentwise between lean4export and the content of .olean files. Is there something in the content of .olean files that's not in the export or vice versa? (I'm asking this because I had some troubles using lean4export in the past, I don't know if I can export the whole Mathlib, if you have a command that I can plug-and-use I'd be very happy to try it out again.)</li>\n</ul>\n<p>For reference, I want to have a project where I can query the lean environment from Rust, as I'm more comfortable writing Rust code than lean code and I want to use the data structures that Rust provides. I'd like to know what I need to do to set up the environment in a way that I get all the information I need.</p>",
        "id": 526233344,
        "sender_full_name": "metakuntyyy",
        "timestamp": 1751152416
    },
    {
        "content": "<p>The thing about resolving references is really about determining types. It's not required, but it is useful so that you don't just see an object graph of unknown constructors and instead see the names of the constructors. For most of an olean file this information is fixed and built in, e.g. the top level object is a <code>ModuleData</code> and this has <code>Expr</code> in it and oleandump knows about these types without any help. But module data also contains environment extensions, and these are user extensible, so they can have arbitrary types which the dump tool won't know about. If you pass it more modules it can figure these out.</p>\n<p>In other words, it will work just fine if you don't pass any modules, but if you declare any custom attributes or other kinds of persistent state then you will get more accurate information if you pass those modules in.</p>",
        "id": 526272080,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1751206075
    },
    {
        "content": "<p>Note also that environment extensions are superfluous from the perspective of an external lean kernel; they contain only non-logical information.</p>",
        "id": 526272162,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1751206164
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"725717\">metakuntyyy</span> <a href=\"#narrow/channel/270676-lean4/topic/Explanation.20of.20olean.20files/near/526233344\">said</a>:</p>\n<blockquote>\n<p>For reference, I want to have a project where I can query the lean environment from Rust, as I'm more comfortable writing Rust code than lean code and I want to use the data structures that Rust provides. I'd like to know what I need to do to set up the environment in a way that I get all the information I need.</p>\n</blockquote>\n<p>Another way to interact with lean from rust is to use <a href=\"https://crates.io/crates/lean-sys\">https://crates.io/crates/lean-sys</a> and link with lean directly. You can use this to write hybrid programs and call lean APIs from rust.</p>",
        "id": 526272432,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1751206487
    },
    {
        "content": "<p>(I had a plan for building a safe interface on top of that, but I never finished it. See <a href=\"https://github.com/digama0/lean-rs\">https://github.com/digama0/lean-rs</a> )</p>",
        "id": 526272526,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1751206571
    },
    {
        "content": "<p>Ok, thanks for the information. I don't plan on working on a typechecker or anything of the sort. I just want to query declarations from rust. From what I've observed is that I like the data structures of nanoda_lib quite well. It seems intuitive and I'd like to query that without any connection from lean besides the export files, either through lean4export or .olean files.</p>\n<p>What should I filter from the .olean files. It seems that it has a fixed structure to me, first line is whether gmp is used, second line is the version, third line is the hash. What would be the relevant information, is everything that is a Lean.Expr or a list/array of lean names relevant? Is there anything that I can filter out?</p>",
        "id": 526283929,
        "sender_full_name": "metakuntyyy",
        "timestamp": 1751218855
    },
    {
        "content": "<p>after that initial header, the whole thing is an in memory data structure written directly to disk, so it has internal pointers to navigate the file</p>",
        "id": 526284001,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1751218933
    },
    {
        "content": "<p>you can't tell whether something is a Lean.Expr by looking at it, that's what the type information is for</p>",
        "id": 526284045,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1751218985
    },
    {
        "content": "<p>Maybe to give a specific example so that you know what I'd like to do. Given a file like this</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hp</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">∣</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">K</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Field</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">CharP</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"o\">]</span>\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hprim</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IsPrimitiveRoot</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"o\">)</span>\n\n<span class=\"c1\">-- Step 1: Define ϕ₁ : ℤ/nℤ → K</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">phi1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ZMod</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">→+*</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">ZMod</span><span class=\"bp\">.</span><span class=\"n\">castHom</span><span class=\"w\"> </span><span class=\"n\">hp</span><span class=\"w\"> </span><span class=\"n\">K</span>\n\n<span class=\"c1\">-- Step 2: Define ϕ₂ : (ℤ/nℤ)[X] → K via evaluation</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">phi2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Polynomial</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ZMod</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">→+*</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">Polynomial</span><span class=\"bp\">.</span><span class=\"n\">eval₂RingHom</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">phi1</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"n\">hp</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">m</span>\n\n<span class=\"c1\">-- Step 3: Show X^r - 1 maps to 0, so ϕ₂ descends to the quotient</span>\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">phi2_vanish</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hprim</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IsPrimitiveRoot</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">phi2</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"n\">hp</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"o\">)</span>\n<span class=\"w\"> </span><span class=\"o\">((</span><span class=\"n\">Polynomial</span><span class=\"bp\">.</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Polynomial</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ZMod</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"w\"> </span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">phi2</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"o\">[</span><span class=\"n\">IsPrimitiveRoot</span><span class=\"bp\">.</span><span class=\"n\">pow_eq_one</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span>\n<span class=\"w\">  </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">hprim</span>\n</code></pre></div>\n<p>I'd like to find all theorems that are used in the proof of phi2_vanish, I know that this is possible to do in lean with metaprogramming, but I'd consider it a success if I can get the same list with my way.</p>",
        "id": 526284100,
        "sender_full_name": "metakuntyyy",
        "timestamp": 1751219057
    },
    {
        "content": "<p>I assume that's possible? And it shouldn't be too hard</p>",
        "id": 526284124,
        "sender_full_name": "metakuntyyy",
        "timestamp": 1751219090
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"725717\">metakuntyyy</span> <a href=\"#narrow/channel/270676-lean4/topic/Explanation.20of.20olean.20files/near/526283929\">said</a>:</p>\n<blockquote>\n<p>Ok, thanks for the information. I don't plan on working on a typechecker or anything of the sort. I just want to query declarations from rust. From what I've observed is that I like the data structures of nanoda_lib quite well. It seems intuitive and I'd like to query that without any connection from lean besides the export files, either through lean4export or .olean files.</p>\n</blockquote>\n<p>If you are not wanting to get too in the weeds on this, I <em>highly</em> recommend you just use the Lean APIs for this. Using rust to talk to lean is not easy no matter what you do</p>",
        "id": 526284127,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1751219092
    },
    {
        "content": "<p>Yeah, but I don't want to use rust to talk to lean, I just want to use the data structures in nanoda_lib</p>",
        "id": 526284193,
        "sender_full_name": "metakuntyyy",
        "timestamp": 1751219144
    },
    {
        "content": "<p>you can do all sorts of useful queries and exploration in a handful of lines in lean. I don't think nanoda_lib is actually designed for general usage, it's a typechecker</p>",
        "id": 526284208,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1751219165
    },
    {
        "content": "<p>if you want to use the nanoda_lib data structures then you probably should just run nanoda and hook in once it's done, or fork it if you need to modify what it is doing in the middle of typechecking</p>",
        "id": 526284280,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1751219251
    },
    {
        "content": "<p>and that means just using lean4export files as is</p>",
        "id": 526284292,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1751219274
    },
    {
        "content": "<p>Works for me. Is it currently possible to export the whole Mathlib with lean4export? Do you have a working setup?</p>",
        "id": 526284329,
        "sender_full_name": "metakuntyyy",
        "timestamp": 1751219318
    },
    {
        "content": "<p>Or just specific files that use mathlib?</p>",
        "id": 526284350,
        "sender_full_name": "metakuntyyy",
        "timestamp": 1751219339
    },
    {
        "content": "<p>I haven't tried it, but I assume you just run lean4export and point to mathlib</p>",
        "id": 526284354,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1751219346
    },
    {
        "content": "<p>This is what I currently get, running in the project relative to lean4export.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"w\"> </span><span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"n\">env</span><span class=\"w\"> </span><span class=\"bp\">../</span><span class=\"n\">lean4export</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">bin</span><span class=\"bp\">/</span><span class=\"n\">lean4export</span><span class=\"w\"> </span><span class=\"n\">Mewll3</span><span class=\"bp\">.</span><span class=\"n\">Primroots</span>\n<span class=\"n\">uncaught</span><span class=\"w\"> </span><span class=\"n\">exception</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">failed</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">read</span><span class=\"w\"> </span><span class=\"n\">file</span><span class=\"w\"> </span><span class=\"bp\">'/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"bp\">/</span><span class=\"n\">Documents</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">newlean</span><span class=\"bp\">/</span><span class=\"n\">mewll3</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">Mewll3</span><span class=\"bp\">/</span><span class=\"n\">Primroots</span><span class=\"bp\">.</span><span class=\"n\">olean'</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">invalid</span><span class=\"w\"> </span><span class=\"n\">header</span>\n</code></pre></div>\n<p>They run both on an identical version: <strong> leanprover/lean4:v4.21.0-rc3 </strong></p>\n<p>Also see my issue: <a href=\"https://github.com/leanprover/lean4export/issues/5\">https://github.com/leanprover/lean4export/issues/5</a></p>",
        "id": 526284869,
        "sender_full_name": "metakuntyyy",
        "timestamp": 1751219854
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Algebra</span><span class=\"bp\">.</span><span class=\"n\">Order</span><span class=\"bp\">.</span><span class=\"n\">Ring</span><span class=\"bp\">.</span><span class=\"n\">Star</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Analysis</span><span class=\"bp\">.</span><span class=\"n\">Normed</span><span class=\"bp\">.</span><span class=\"n\">Ring</span><span class=\"bp\">.</span><span class=\"n\">Lemmas</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Data</span><span class=\"bp\">.</span><span class=\"n\">Int</span><span class=\"bp\">.</span><span class=\"n\">Star</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">RingTheory</span><span class=\"bp\">.</span><span class=\"n\">RootsOfUnity</span><span class=\"bp\">.</span><span class=\"n\">PrimitiveRoots</span>\n\n\n<span class=\"sd\">/-- Equivalence of coprime powers of primitive roots. -/</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">equiv_primitiveRoots_of_coprimePow</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">e</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">CommRing</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">IsDomain</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">][</span><span class=\"n\">NeZero</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"o\">](</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">e</span><span class=\"bp\">.</span><span class=\"n\">Coprime</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"o\">)</span><span class=\"w\">  </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">primitiveRoots</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">≃</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">primitiveRoots</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">coprmGcdA</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hc</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IsCoprime</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IsCoprime</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"bp\">.</span><span class=\"n\">gcdA</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">    </span><span class=\"n\">use</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"bp\">.</span><span class=\"n\">gcdB</span><span class=\"w\"> </span><span class=\"n\">y</span>\n<span class=\"w\">    </span><span class=\"n\">rwa</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">mul_comm</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">Int</span><span class=\"bp\">.</span><span class=\"n\">gcd_eq_gcd_ab</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">cast_eq_one</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">Int</span><span class=\"bp\">.</span><span class=\"n\">isCoprime_iff_gcd_eq_one</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">de2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">gcdA</span><span class=\"w\"> </span><span class=\"n\">e</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">gcdA</span><span class=\"w\"> </span><span class=\"n\">e</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">    </span><span class=\"n\">cases</span><span class=\"w\"> </span><span class=\"n\">le_or_gt</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">e</span><span class=\"bp\">.</span><span class=\"n\">gcdA</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">with</span>\n<span class=\"w\">    </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">inl</span><span class=\"w\"> </span><span class=\"n\">hc</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">      </span><span class=\"n\">positivity</span>\n<span class=\"w\">    </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">inr</span><span class=\"w\"> </span><span class=\"n\">hc</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">      </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">hr</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">exact_mod_cast</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"bp\">.</span><span class=\"n\">pos_of_neZero</span>\n<span class=\"w\">      </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">Int</span><span class=\"bp\">.</span><span class=\"n\">mul_nonneg_of_nonpos_of_nonpos</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Int</span><span class=\"bp\">.</span><span class=\"n\">le_of_lt</span><span class=\"w\"> </span><span class=\"n\">hc</span><span class=\"o\">)</span>\n<span class=\"w\">      </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Int</span><span class=\"bp\">.</span><span class=\"n\">add_le_zero_iff_le_neg'</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Int</span><span class=\"bp\">.</span><span class=\"n\">neg_mul_eq_mul_neg</span><span class=\"o\">]</span>\n<span class=\"w\">      </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">one_le_mul_of_one_le_of_one_le</span><span class=\"w\"> </span><span class=\"n\">hr</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Int</span><span class=\"bp\">.</span><span class=\"n\">neg_pos_of_neg</span><span class=\"w\"> </span><span class=\"n\">hc</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">de</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"o\">(</span><span class=\"n\">r</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">gcdA</span><span class=\"w\"> </span><span class=\"n\">e</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"o\">)</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">gcdA</span><span class=\"w\"> </span><span class=\"n\">e</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"k\">by</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">cas</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">e</span><span class=\"bp\">.</span><span class=\"n\">gcdA</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"bp\">∨</span><span class=\"w\"> </span><span class=\"n\">e</span><span class=\"bp\">.</span><span class=\"n\">gcdA</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">le_or_gt</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">e</span><span class=\"bp\">.</span><span class=\"n\">gcdA</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">ger</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">r</span><span class=\"o\">:</span><span class=\"n\">ℤ</span><span class=\"o\">):=</span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">Int</span><span class=\"bp\">.</span><span class=\"n\">natCast_nonneg</span><span class=\"w\"> </span><span class=\"n\">r</span>\n<span class=\"w\">    </span><span class=\"n\">cases</span><span class=\"w\"> </span><span class=\"n\">cas</span><span class=\"w\"> </span><span class=\"k\">with</span>\n<span class=\"w\">    </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">inl</span><span class=\"w\"> </span><span class=\"n\">hc</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">      </span><span class=\"n\">refine</span><span class=\"w\"> </span><span class=\"n\">Int</span><span class=\"bp\">.</span><span class=\"n\">mul_nonneg</span><span class=\"w\"> </span><span class=\"bp\">?_</span><span class=\"w\"> </span><span class=\"n\">hc</span>\n<span class=\"w\">      </span><span class=\"n\">refine</span><span class=\"w\"> </span><span class=\"n\">Int</span><span class=\"bp\">.</span><span class=\"n\">add_nonneg</span><span class=\"w\"> </span><span class=\"bp\">?_</span><span class=\"w\"> </span><span class=\"bp\">?_</span>\n<span class=\"w\">      </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">Int</span><span class=\"bp\">.</span><span class=\"n\">mul_nonneg</span><span class=\"w\"> </span><span class=\"n\">ger</span><span class=\"w\"> </span><span class=\"n\">hc</span>\n<span class=\"w\">      </span><span class=\"n\">positivity</span>\n<span class=\"w\">    </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">inr</span><span class=\"w\"> </span><span class=\"n\">hc</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">      </span><span class=\"n\">rw</span><span class=\"o\">[</span><span class=\"n\">right_distrib</span><span class=\"o\">]</span>\n<span class=\"w\">      </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"n\">only</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">one_mul</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">ge_iff_le</span><span class=\"o\">]</span>\n<span class=\"w\">      </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">jj</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">r</span><span class=\"o\">:</span><span class=\"n\">ℤ</span><span class=\"o\">)</span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">e</span><span class=\"bp\">.</span><span class=\"n\">gcdA</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"n\">e</span><span class=\"bp\">.</span><span class=\"n\">gcdA</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"n\">e</span><span class=\"bp\">.</span><span class=\"n\">gcdA</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\">  </span><span class=\"n\">e</span><span class=\"bp\">.</span><span class=\"n\">gcdA</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"n\">r</span><span class=\"bp\">*</span><span class=\"n\">e</span><span class=\"bp\">.</span><span class=\"n\">gcdA</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">):=</span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">ring</span>\n<span class=\"w\">      </span><span class=\"n\">rw</span><span class=\"o\">[</span><span class=\"n\">jj</span><span class=\"o\">]</span>\n<span class=\"w\">      </span><span class=\"n\">refine</span><span class=\"w\"> </span><span class=\"n\">Int</span><span class=\"bp\">.</span><span class=\"n\">mul_nonneg_iff</span><span class=\"bp\">.</span><span class=\"n\">mpr</span><span class=\"w\"> </span><span class=\"bp\">?_</span>\n<span class=\"w\">      </span><span class=\"n\">right</span>\n<span class=\"w\">      </span><span class=\"n\">constructor</span>\n<span class=\"w\">      </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">Int</span><span class=\"bp\">.</span><span class=\"n\">le_of_lt</span><span class=\"w\"> </span><span class=\"n\">hc</span>\n<span class=\"w\">      </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">quest</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"o\">(</span><span class=\"n\">e</span><span class=\"bp\">.</span><span class=\"n\">gcdA</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">Int</span><span class=\"bp\">.</span><span class=\"n\">add_le_zero_iff_le_neg'</span><span class=\"bp\">.</span><span class=\"n\">mp</span><span class=\"w\"> </span><span class=\"n\">hc</span>\n<span class=\"w\">      </span><span class=\"n\">refine</span><span class=\"w\"> </span><span class=\"n\">Int</span><span class=\"bp\">.</span><span class=\"n\">add_le_zero_iff_le_neg'</span><span class=\"bp\">.</span><span class=\"n\">mpr</span><span class=\"w\"> </span><span class=\"bp\">?_</span>\n<span class=\"w\">      </span><span class=\"n\">rw</span><span class=\"o\">[</span><span class=\"n\">neg_mul_eq_mul_neg</span><span class=\"o\">]</span>\n<span class=\"w\">      </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">nez</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">r</span><span class=\"o\">:</span><span class=\"n\">ℤ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=(</span><span class=\"n\">Int</span><span class=\"bp\">.</span><span class=\"n\">toNat_le</span><span class=\"bp\">.</span><span class=\"n\">mp</span><span class=\"w\"> </span><span class=\"n\">NeZero</span><span class=\"bp\">.</span><span class=\"n\">one_le</span><span class=\"o\">)</span>\n<span class=\"w\">      </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">one_le_mul_of_one_le_of_one_le</span><span class=\"w\"> </span><span class=\"n\">nez</span><span class=\"w\"> </span><span class=\"n\">quest</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">hea</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ha</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">primitiveRoots</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">):</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">e</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">e</span><span class=\"bp\">.</span><span class=\"n\">gcdA</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">e</span><span class=\"bp\">.</span><span class=\"n\">gcdA</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">toNat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"k\">by</span>\n<span class=\"w\">    </span><span class=\"n\">rw</span><span class=\"o\">[</span><span class=\"n\">mem_primitiveRoots</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">ha</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">fff</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">IsPrimitiveRoot</span><span class=\"bp\">.</span><span class=\"n\">val_toRootsOfUnity_coe</span><span class=\"w\"> </span><span class=\"n\">ha</span>\n<span class=\"w\">    </span><span class=\"n\">rw</span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">fff</span><span class=\"o\">,</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">Units</span><span class=\"bp\">.</span><span class=\"n\">val_pow_eq_pow_val</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"n\">congr</span>\n<span class=\"w\">    </span><span class=\"n\">rw</span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">zpow_natCast</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"n\">push_cast</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">rweq</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">↑</span><span class=\"n\">e</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"bp\">↑</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">e</span><span class=\"bp\">.</span><span class=\"n\">gcdA</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">e</span><span class=\"bp\">.</span><span class=\"n\">gcdA</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"n\">e</span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">e</span><span class=\"bp\">.</span><span class=\"n\">gcdA</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"o\">)</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"bp\">+</span><span class=\"n\">e</span><span class=\"bp\">*</span><span class=\"n\">e</span><span class=\"bp\">.</span><span class=\"n\">gcdA</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"o\">:=</span><span class=\"k\">by</span>\n<span class=\"w\">      </span><span class=\"n\">ring</span>\n<span class=\"w\">    </span><span class=\"n\">rw</span><span class=\"o\">[</span><span class=\"n\">Int</span><span class=\"bp\">.</span><span class=\"n\">natCast_toNat_eq_self</span><span class=\"bp\">.</span><span class=\"n\">mpr</span><span class=\"w\"> </span><span class=\"n\">de</span><span class=\"o\">,</span><span class=\"n\">rweq</span><span class=\"o\">,</span><span class=\"n\">zpow_add</span><span class=\"o\">,</span><span class=\"n\">zpow_mul</span><span class=\"o\">,</span><span class=\"n\">IsPrimitiveRoot</span><span class=\"bp\">.</span><span class=\"n\">zpow_eq_one</span><span class=\"o\">,</span><span class=\"n\">one_zpow</span><span class=\"o\">,</span><span class=\"n\">one_mul</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">hgcd</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">eq_sub_of_add_eq</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">gcd_eq_gcd_ab</span><span class=\"w\"> </span><span class=\"n\">e</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">symm</span>\n<span class=\"w\">    </span><span class=\"n\">rw</span><span class=\"o\">[</span><span class=\"n\">hgcd</span><span class=\"o\">,</span><span class=\"n\">zpow_sub</span><span class=\"o\">,</span><span class=\"n\">zpow_mul</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">rw</span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">isCoprime_iff_coprime</span><span class=\"o\">,</span><span class=\"n\">Int</span><span class=\"bp\">.</span><span class=\"n\">isCoprime_iff_gcd_eq_one</span><span class=\"o\">,</span><span class=\"n\">Int</span><span class=\"bp\">.</span><span class=\"n\">gcd_natCast_natCast</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">h</span>\n<span class=\"w\">      </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"n\">only</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">h</span><span class=\"o\">,</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">cast_one</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">zpow_one</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">zpow_natCast</span><span class=\"o\">]</span>\n<span class=\"w\">      </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">last</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(((</span><span class=\"n\">ha</span><span class=\"bp\">.</span><span class=\"n\">toRootsOfUnity</span><span class=\"o\">:</span><span class=\"n\">R</span><span class=\"bp\">ˣ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"n\">e</span><span class=\"bp\">.</span><span class=\"n\">gcdB</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"o\">)</span><span class=\"bp\">⁻¹</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">        </span><span class=\"n\">rw</span><span class=\"o\">[</span><span class=\"n\">IsPrimitiveRoot</span><span class=\"bp\">.</span><span class=\"n\">pow_eq_one</span><span class=\"o\">]</span>\n<span class=\"w\">        </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"n\">only</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">one_zpow</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">inv_one</span><span class=\"o\">]</span>\n<span class=\"w\">        </span><span class=\"n\">rwa</span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">IsPrimitiveRoot</span><span class=\"bp\">.</span><span class=\"n\">coe_units_iff</span><span class=\"o\">,</span><span class=\"n\">fff</span><span class=\"o\">]</span>\n<span class=\"w\">      </span><span class=\"n\">rw</span><span class=\"o\">[</span><span class=\"n\">last</span><span class=\"o\">]</span>\n<span class=\"w\">      </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"n\">only</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">mul_one</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"n\">rwa</span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">IsPrimitiveRoot</span><span class=\"bp\">.</span><span class=\"n\">coe_units_iff</span><span class=\"o\">,</span><span class=\"n\">fff</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"n\">repeat</span><span class=\"w\"> </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">pos_of_neZero</span><span class=\"w\"> </span><span class=\"n\">r</span>\n<span class=\"w\">  </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"o\">{</span>\n<span class=\"w\">    </span><span class=\"n\">toFun</span><span class=\"w\"> </span><span class=\"n\">μh</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">μh</span><span class=\"bp\">.</span><span class=\"m\">1</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"n\">e</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">      </span><span class=\"n\">rw</span><span class=\"o\">[</span><span class=\"n\">mem_primitiveRoots</span><span class=\"o\">]</span>\n<span class=\"w\">      </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">primr</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"n\">μh</span><span class=\"bp\">.</span><span class=\"m\">2</span>\n<span class=\"w\">      </span><span class=\"n\">rw</span><span class=\"o\">[</span><span class=\"n\">mem_primitiveRoots</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">primr</span>\n<span class=\"w\">      </span><span class=\"n\">refine</span><span class=\"w\"> </span><span class=\"n\">IsPrimitiveRoot</span><span class=\"bp\">.</span><span class=\"n\">pow_of_coprime</span><span class=\"w\"> </span><span class=\"n\">primr</span><span class=\"w\"> </span><span class=\"bp\">?_</span><span class=\"w\"> </span><span class=\"bp\">?_</span>\n<span class=\"w\">      </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">h</span>\n<span class=\"w\">      </span><span class=\"n\">repeat</span><span class=\"w\"> </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">pos_of_neZero</span><span class=\"w\"> </span><span class=\"n\">r</span>\n<span class=\"w\">    </span><span class=\"bp\">⟩</span>\n<span class=\"w\">    </span><span class=\"n\">invFun</span><span class=\"w\"> </span><span class=\"n\">νh</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">νh</span><span class=\"bp\">.</span><span class=\"m\">1</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"n\">r</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">gcdA</span><span class=\"w\"> </span><span class=\"n\">e</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"o\">)</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">gcdA</span><span class=\"w\"> </span><span class=\"n\">e</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"o\">))</span><span class=\"bp\">.</span><span class=\"n\">toNat</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">      </span><span class=\"n\">rw</span><span class=\"o\">[</span><span class=\"n\">mem_primitiveRoots</span><span class=\"o\">]</span>\n<span class=\"w\">      </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">primr</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"n\">νh</span><span class=\"bp\">.</span><span class=\"m\">2</span>\n<span class=\"w\">      </span><span class=\"n\">rw</span><span class=\"o\">[</span><span class=\"n\">mem_primitiveRoots</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">primr</span>\n<span class=\"w\">      </span><span class=\"n\">refine</span><span class=\"w\"> </span><span class=\"n\">IsPrimitiveRoot</span><span class=\"bp\">.</span><span class=\"n\">pow_of_coprime</span><span class=\"w\"> </span><span class=\"n\">primr</span><span class=\"w\"> </span><span class=\"bp\">?_</span><span class=\"w\"> </span><span class=\"bp\">?_</span>\n<span class=\"w\">      </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">rw</span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">isCoprime_iff_coprime</span><span class=\"o\">,</span><span class=\"n\">Int</span><span class=\"bp\">.</span><span class=\"n\">natCast_toNat_eq_self</span><span class=\"bp\">.</span><span class=\"n\">mpr</span><span class=\"w\"> </span><span class=\"n\">de</span><span class=\"o\">,</span><span class=\"n\">right_distrib</span><span class=\"o\">]</span>\n<span class=\"w\">        </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"n\">only</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">one_mul</span><span class=\"o\">]</span>\n<span class=\"w\">        </span><span class=\"n\">rw</span><span class=\"o\">[</span><span class=\"n\">mul_assoc</span><span class=\"o\">,</span><span class=\"n\">Int</span><span class=\"bp\">.</span><span class=\"n\">isCoprime_iff_gcd_eq_one</span><span class=\"o\">]</span>\n<span class=\"w\">        </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"n\">only</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">dvd_mul_right</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Int</span><span class=\"bp\">.</span><span class=\"n\">gcd_add_left_left_of_dvd</span><span class=\"o\">]</span>\n<span class=\"w\">        </span><span class=\"n\">rw</span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">Int</span><span class=\"bp\">.</span><span class=\"n\">isCoprime_iff_gcd_eq_one</span><span class=\"o\">]</span>\n<span class=\"w\">        </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">coprmGcdA</span><span class=\"w\"> </span><span class=\"n\">e</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">Coprime</span><span class=\"bp\">.</span><span class=\"n\">isCoprime</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"o\">)</span>\n<span class=\"w\">      </span><span class=\"n\">repeat</span><span class=\"w\"> </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">pos_of_neZero</span><span class=\"w\"> </span><span class=\"n\">r</span>\n<span class=\"w\">    </span><span class=\"bp\">⟩</span>\n<span class=\"w\">    </span><span class=\"n\">left_inv</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"k\">by</span>\n<span class=\"w\">      </span><span class=\"n\">rw</span><span class=\"o\">[</span><span class=\"n\">Function</span><span class=\"bp\">.</span><span class=\"n\">LeftInverse</span><span class=\"o\">]</span>\n<span class=\"w\">      </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"n\">only</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Subtype</span><span class=\"bp\">.</span><span class=\"k\">forall</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Subtype</span><span class=\"bp\">.</span><span class=\"n\">mk</span><span class=\"bp\">.</span><span class=\"n\">injEq</span><span class=\"o\">]</span>\n<span class=\"w\">      </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">ha</span>\n<span class=\"w\">      </span><span class=\"n\">rw</span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">pow_mul</span><span class=\"o\">]</span>\n<span class=\"w\">      </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">hea</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">ha</span>\n<span class=\"w\">    </span><span class=\"n\">right_inv</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"k\">by</span>\n<span class=\"w\">      </span><span class=\"n\">rw</span><span class=\"o\">[</span><span class=\"n\">Function</span><span class=\"bp\">.</span><span class=\"n\">RightInverse</span><span class=\"o\">,</span><span class=\"n\">Function</span><span class=\"bp\">.</span><span class=\"n\">LeftInverse</span><span class=\"o\">]</span>\n<span class=\"w\">      </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"n\">only</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Subtype</span><span class=\"bp\">.</span><span class=\"k\">forall</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Subtype</span><span class=\"bp\">.</span><span class=\"n\">mk</span><span class=\"bp\">.</span><span class=\"n\">injEq</span><span class=\"o\">]</span>\n<span class=\"w\">      </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">ha</span>\n<span class=\"w\">      </span><span class=\"n\">rw</span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">pow_mul</span><span class=\"o\">,</span><span class=\"n\">mul_comm</span><span class=\"o\">]</span>\n<span class=\"w\">      </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">hea</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">ha</span>\n<span class=\"w\">  </span><span class=\"o\">}</span>\n</code></pre></div>\n<p>File in question for reference.</p>",
        "id": 526284996,
        "sender_full_name": "metakuntyyy",
        "timestamp": 1751219986
    },
    {
        "content": "<p>It should work, though it will be gigantic, even Init now exports &gt;100MB. I think I used:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"n\">env</span><span class=\"w\"> </span><span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"c1\">--dir $DEVELOPMENT/lean4export exe lean4export Mathlib | pv &gt;/dev/null</span>\n</code></pre></div>\n<p>ran from the Mathlib repo.</p>\n<p>(The <code>pv</code> is so I can tell you how big that will be hopefully...)</p>",
        "id": 526285018,
        "sender_full_name": "Julian Berman",
        "timestamp": 1751220008
    },
    {
        "content": "<p>OK looks like:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"mf\">2.20</span><span class=\"n\">GiB</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">:</span><span class=\"mi\">01</span><span class=\"o\">:</span><span class=\"mi\">53</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mf\">19.9</span><span class=\"n\">MiB</span><span class=\"bp\">/</span><span class=\"n\">s</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"w\">   </span><span class=\"bp\">&lt;=&gt;</span><span class=\"w\">                                                                                                                                                                </span><span class=\"o\">]</span>\n</code></pre></div>",
        "id": 526285042,
        "sender_full_name": "Julian Berman",
        "timestamp": 1751220023
    },
    {
        "content": "<p>So.. less huge than I expected.</p>",
        "id": 526285058,
        "sender_full_name": "Julian Berman",
        "timestamp": 1751220036
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"725717\">metakuntyyy</span> <a href=\"#narrow/channel/270676-lean4/topic/Explanation.20of.20olean.20files/near/526284869\">said</a>:</p>\n<blockquote>\n<p>This is what I currently get, running in the project relative to lean4export.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"w\"> </span><span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"n\">env</span><span class=\"w\"> </span><span class=\"bp\">../</span><span class=\"n\">lean4export</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">bin</span><span class=\"bp\">/</span><span class=\"n\">lean4export</span><span class=\"w\"> </span><span class=\"n\">Mewll3</span><span class=\"bp\">.</span><span class=\"n\">Primroots</span>\n<span class=\"n\">uncaught</span><span class=\"w\"> </span><span class=\"n\">exception</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">failed</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">read</span><span class=\"w\"> </span><span class=\"n\">file</span><span class=\"w\"> </span><span class=\"bp\">'/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"bp\">/</span><span class=\"n\">Documents</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">newlean</span><span class=\"bp\">/</span><span class=\"n\">mewll3</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">Mewll3</span><span class=\"bp\">/</span><span class=\"n\">Primroots</span><span class=\"bp\">.</span><span class=\"n\">olean'</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">invalid</span><span class=\"w\"> </span><span class=\"n\">header</span>\n</code></pre></div>\n<p>They run both on an identical version: <strong> leanprover/lean4:v4.21.0-rc3 </strong></p>\n<p>Also see my issue: <a href=\"https://github.com/leanprover/lean4export/issues/5\">https://github.com/leanprover/lean4export/issues/5</a></p>\n</blockquote>\n<p>That's a version mismatch. There is a back and forth on that issue which apparently got you to build it correctly back then...</p>",
        "id": 526285167,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1751220123
    },
    {
        "content": "<p>the most likely issue is that the olean file is out of date and you need to <code>lake build</code> first</p>",
        "id": 526285230,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1751220162
    },
    {
        "content": "<p>I don't understand how that can be a version mismatch, the lean4export has leanprover/lean4:v4.21.0-rc3, mewll3 also has leanprover/lean4:v4.21.0-rc3, both versions are equal, both versions have been build with lake build.<br>\nHere is the ls of the .olean files</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">-</span><span class=\"n\">rw</span><span class=\"bp\">-</span><span class=\"n\">r</span><span class=\"c1\">--r-- 1 redacted redacted  18353 Jun 29 20:06 Primroots.ilean</span>\n<span class=\"bp\">-</span><span class=\"n\">rw</span><span class=\"bp\">-</span><span class=\"n\">r</span><span class=\"c1\">--r-- 1 redacted redacted     19 Jun 29 20:06 Primroots.ilean.hash</span>\n<span class=\"bp\">-</span><span class=\"n\">rw</span><span class=\"bp\">-</span><span class=\"n\">r</span><span class=\"c1\">--r-- 1 redacted redacted 290912 Jun 29 20:06 Primroots.olean</span>\n<span class=\"bp\">-</span><span class=\"n\">rw</span><span class=\"bp\">-</span><span class=\"n\">r</span><span class=\"c1\">--r-- 1 redacted redacted     19 Jun 29 20:06 Primroots.olean.hash</span>\n<span class=\"bp\">-</span><span class=\"n\">rw</span><span class=\"bp\">-</span><span class=\"n\">r</span><span class=\"c1\">--r-- 1 redacted redacted   3258 Jun 29 20:06 Primroots.trace</span>\n</code></pre></div>\n<p>built a minute ago. Also last time I didn't try building anything that had mathlib, but maybe I need to do something else? Should I delete the cache and do a fresh build, because I think I have used lake exe cache get to get the mathlib cache.</p>",
        "id": 526285583,
        "sender_full_name": "metakuntyyy",
        "timestamp": 1751220552
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"c1\">--version</span>\n<span class=\"n\">Lake</span><span class=\"w\"> </span><span class=\"n\">version</span><span class=\"w\"> </span><span class=\"mf\">5.0</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">-</span><span class=\"mi\">6741444</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Lean</span><span class=\"w\"> </span><span class=\"n\">version</span><span class=\"w\"> </span><span class=\"mf\">4.21</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">-</span><span class=\"n\">rc3</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 526285618,
        "sender_full_name": "metakuntyyy",
        "timestamp": 1751220593
    },
    {
        "content": "<p>try printing the header of the olean file with xxd | head -10</p>",
        "id": 526285686,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1751220663
    },
    {
        "content": "<p>it will have the lean version git commit in it</p>",
        "id": 526285712,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1751220694
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">xxd</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">Mewll3</span><span class=\"bp\">/</span><span class=\"n\">Primroots</span><span class=\"bp\">.</span><span class=\"n\">olean</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">head</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"mi\">10</span>\n</code></pre></div>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"mi\">00000000</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">6</span><span class=\"n\">f6c</span><span class=\"w\"> </span><span class=\"mi\">6561</span><span class=\"w\"> </span><span class=\"mi\">6</span><span class=\"n\">e02</span><span class=\"w\"> </span><span class=\"mi\">0134</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"n\">e32</span><span class=\"w\"> </span><span class=\"mi\">312</span><span class=\"n\">e</span><span class=\"w\"> </span><span class=\"mi\">302</span><span class=\"n\">d</span><span class=\"w\"> </span><span class=\"mi\">7263</span><span class=\"w\">  </span><span class=\"n\">olean</span><span class=\"bp\">..</span><span class=\"m\">4</span><span class=\"bp\">.</span><span class=\"m\">21</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">-</span><span class=\"n\">rc</span>\n<span class=\"mi\">00000010</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">3300</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\">  </span><span class=\"mf\">3.</span><span class=\"bp\">..............</span>\n<span class=\"mi\">00000020</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">3637</span><span class=\"w\"> </span><span class=\"mi\">3431</span><span class=\"w\"> </span><span class=\"mi\">3434</span><span class=\"w\"> </span><span class=\"mi\">3461</span><span class=\"w\">  </span><span class=\"bp\">........</span><span class=\"m\">6741444</span><span class=\"n\">a</span>\n<span class=\"mi\">00000030</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">3633</span><span class=\"w\"> </span><span class=\"mi\">6565</span><span class=\"w\"> </span><span class=\"mi\">6332</span><span class=\"w\"> </span><span class=\"mi\">3533</span><span class=\"w\"> </span><span class=\"mi\">6137</span><span class=\"w\"> </span><span class=\"mi\">6561</span><span class=\"w\"> </span><span class=\"mi\">6537</span><span class=\"w\"> </span><span class=\"mi\">6138</span><span class=\"w\">  </span><span class=\"mi\">63</span><span class=\"n\">eec253a7eae7a8</span>\n<span class=\"mi\">00000040</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">3366</span><span class=\"w\"> </span><span class=\"mi\">3162</span><span class=\"w\"> </span><span class=\"mi\">6562</span><span class=\"w\"> </span><span class=\"mi\">3364</span><span class=\"w\"> </span><span class=\"mi\">6530</span><span class=\"w\"> </span><span class=\"mi\">3135</span><span class=\"w\"> </span><span class=\"mi\">3032</span><span class=\"w\"> </span><span class=\"mi\">3364</span><span class=\"w\">  </span><span class=\"mi\">3</span><span class=\"n\">f1beb3de015023d</span>\n<span class=\"mi\">00000050</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"n\">bef1</span><span class=\"w\"> </span><span class=\"n\">ca32</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">2870</span><span class=\"w\"> </span><span class=\"n\">c2f1</span><span class=\"w\"> </span><span class=\"n\">ca32</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\">  </span><span class=\"bp\">.....</span><span class=\"m\">2</span><span class=\"bp\">..</span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"bp\">...</span><span class=\"m\">2</span><span class=\"bp\">..</span>\n<span class=\"mi\">00000060</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0100</span><span class=\"w\"> </span><span class=\"mi\">00</span><span class=\"n\">f9</span><span class=\"w\"> </span><span class=\"mi\">0500</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\">  </span><span class=\"bp\">................</span>\n<span class=\"mi\">00000070</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0500</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0400</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\">  </span><span class=\"bp\">................</span>\n<span class=\"mi\">00000080</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">496</span><span class=\"n\">e</span><span class=\"w\"> </span><span class=\"mi\">6974</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">2000</span><span class=\"w\"> </span><span class=\"mi\">0201</span><span class=\"w\">  </span><span class=\"n\">Init</span><span class=\"bp\">........</span><span class=\"w\"> </span><span class=\"bp\">...</span>\n<span class=\"mi\">00000090</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0100</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">6000</span><span class=\"w\"> </span><span class=\"n\">bef1</span><span class=\"w\"> </span><span class=\"n\">ca32</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\">  </span><span class=\"bp\">........`....</span><span class=\"m\">2</span><span class=\"bp\">..</span>\n</code></pre></div>",
        "id": 526285771,
        "sender_full_name": "metakuntyyy",
        "timestamp": 1751220761
    },
    {
        "content": "<p>okay that is the right version</p>",
        "id": 526285827,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1751220842
    },
    {
        "content": "<p>oh interesting, the error <code>invalid header</code> means it didn't even get to the version check (that's <code>incompatible header</code>)</p>",
        "id": 526286018,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1751221102
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"725717\">metakuntyyy</span> <a href=\"#narrow/channel/270676-lean4/topic/Explanation.20of.20olean.20files/near/526284193\">said</a>:</p>\n<blockquote>\n<p>Yeah, but I don't want to use rust to talk to lean, I just want to use the data structures in nanoda_lib</p>\n</blockquote>\n<p>Echoing what Mario said, it was intended to be a library with an included binary, but for various reasons its usefulness as a library is questionable. Get in touch with some information about what you intend to do and I'll give you a best guess as to whether it's reasonable to do by importing it as a library.</p>",
        "id": 526286020,
        "sender_full_name": "Chris Bailey",
        "timestamp": 1751221109
    },
    {
        "content": "<p>this happens when the file either doesn't start with <code>olean</code> or doesn't have <code>sizeof(header)</code> bytes in it and neither of those seems to be the case unless it's having an IO issue reading the file or you pointed at the wrong file</p>",
        "id": 526286065,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1751221165
    },
    {
        "content": "<p>If I run <code>lake env .lake/build/bin/lean4export Export</code> from lean4export's directory it spews export data, does that work for you?</p>",
        "id": 526286310,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1751221481
    },
    {
        "content": "<p>Just as a sanity check can you dump the header of the Main.olean/Export.olean from your build of lean4export</p>",
        "id": 526286471,
        "sender_full_name": "Chris Bailey",
        "timestamp": 1751221639
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"n\">env</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">bin</span><span class=\"bp\">/</span><span class=\"n\">lean4export</span><span class=\"w\"> </span><span class=\"n\">Export</span><span class=\"w\"> </span><span class=\"bp\">&gt;</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">tmp</span><span class=\"bp\">/</span><span class=\"n\">A</span><span class=\"bp\">.</span><span class=\"n\">txt</span>\n</code></pre></div>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">-</span><span class=\"n\">rw</span><span class=\"bp\">-</span><span class=\"n\">r</span><span class=\"c1\">--r-- 1 r r 215170656 Jun 29 20:25 A.txt</span>\n</code></pre></div>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">head</span><span class=\"w\">  </span><span class=\"bp\">/</span><span class=\"n\">tmp</span><span class=\"bp\">/</span><span class=\"n\">A</span><span class=\"bp\">.</span><span class=\"n\">txt</span>\n<span class=\"mf\">2.0</span><span class=\"bp\">.</span><span class=\"m\">0</span>\n<span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"n\">NS</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"n\">Lean</span>\n<span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"n\">NS</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"n\">Try</span>\n<span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"n\">NS</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"n\">Config</span>\n<span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"n\">NS</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"n\">mk</span>\n<span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"n\">US</span><span class=\"w\"> </span><span class=\"mi\">0</span>\n<span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"n\">ES</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n<span class=\"bp\">#</span><span class=\"n\">IND</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"mi\">4</span>\n<span class=\"mi\">5</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"n\">NS</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"n\">Bool</span>\n<span class=\"mi\">6</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"n\">NS</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"w\"> </span><span class=\"n\">false</span>\n</code></pre></div>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">xxd</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">Main</span><span class=\"bp\">.</span><span class=\"n\">olean</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">head</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"mi\">10</span>\n<span class=\"mi\">00000000</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">6</span><span class=\"n\">f6c</span><span class=\"w\"> </span><span class=\"mi\">6561</span><span class=\"w\"> </span><span class=\"mi\">6</span><span class=\"n\">e66</span><span class=\"w\"> </span><span class=\"mi\">696</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"mi\">6521</span><span class=\"w\"> </span><span class=\"mi\">2121</span><span class=\"w\"> </span><span class=\"mi\">2121</span><span class=\"w\"> </span><span class=\"mi\">2121</span><span class=\"w\">  </span><span class=\"n\">oleanfile!!!!!!!</span>\n<span class=\"mi\">00000010</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">73</span><span class=\"n\">f5</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"n\">e5a</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">08</span><span class=\"n\">ea</span><span class=\"w\"> </span><span class=\"mi\">75</span><span class=\"n\">f5</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"n\">e5a</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\">  </span><span class=\"bp\">..</span><span class=\"n\">s</span><span class=\"bp\">..</span><span class=\"n\">Z</span><span class=\"bp\">....</span><span class=\"n\">u</span><span class=\"bp\">..</span><span class=\"n\">Z</span><span class=\"bp\">..</span>\n<span class=\"mi\">00000020</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0100</span><span class=\"w\"> </span><span class=\"mi\">00</span><span class=\"n\">f9</span><span class=\"w\"> </span><span class=\"mi\">0500</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\">  </span><span class=\"bp\">................</span>\n<span class=\"mi\">00000030</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0500</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0400</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\">  </span><span class=\"bp\">................</span>\n<span class=\"mi\">00000040</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">496</span><span class=\"n\">e</span><span class=\"w\"> </span><span class=\"mi\">6974</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">2000</span><span class=\"w\"> </span><span class=\"mi\">0201</span><span class=\"w\">  </span><span class=\"n\">Init</span><span class=\"bp\">........</span><span class=\"w\"> </span><span class=\"bp\">...</span>\n<span class=\"mi\">00000050</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0100</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">2000</span><span class=\"w\"> </span><span class=\"mi\">73</span><span class=\"n\">f5</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"n\">e5a</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\">  </span><span class=\"bp\">........</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">s</span><span class=\"bp\">..</span><span class=\"n\">Z</span><span class=\"bp\">..</span>\n<span class=\"mi\">00000060</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">9866</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"n\">cb3</span><span class=\"w\"> </span><span class=\"n\">c8dc</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"n\">e1a</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">1800</span><span class=\"w\"> </span><span class=\"mi\">0100</span><span class=\"w\">  </span><span class=\"bp\">.</span><span class=\"n\">f</span><span class=\"bp\">..............</span>\n<span class=\"mi\">00000070</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">4800</span><span class=\"w\"> </span><span class=\"mi\">73</span><span class=\"n\">f5</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"n\">e5a</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\">  </span><span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">s</span><span class=\"bp\">..</span><span class=\"n\">Z</span><span class=\"bp\">..........</span>\n<span class=\"mi\">00000080</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0100</span><span class=\"w\"> </span><span class=\"mi\">00</span><span class=\"n\">f9</span><span class=\"w\"> </span><span class=\"mi\">0700</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\">  </span><span class=\"bp\">................</span>\n<span class=\"mi\">00000090</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0700</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0600</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\">  </span><span class=\"bp\">................</span>\n</code></pre></div>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">xxd</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">Export</span><span class=\"bp\">.</span><span class=\"n\">olean</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">head</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"mi\">10</span>\n<span class=\"mi\">00000000</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">6</span><span class=\"n\">f6c</span><span class=\"w\"> </span><span class=\"mi\">6561</span><span class=\"w\"> </span><span class=\"mi\">6</span><span class=\"n\">e66</span><span class=\"w\"> </span><span class=\"mi\">696</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"mi\">6521</span><span class=\"w\"> </span><span class=\"mi\">2121</span><span class=\"w\"> </span><span class=\"mi\">2121</span><span class=\"w\"> </span><span class=\"mi\">2121</span><span class=\"w\">  </span><span class=\"n\">oleanfile!!!!!!!</span>\n<span class=\"mi\">00000010</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">5203</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"n\">a59</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"n\">f8e7</span><span class=\"w\"> </span><span class=\"mi\">6203</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"n\">a59</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\">  </span><span class=\"bp\">..</span><span class=\"n\">R</span><span class=\"bp\">.</span><span class=\"o\">:</span><span class=\"n\">Y</span><span class=\"bp\">....</span><span class=\"n\">b</span><span class=\"bp\">.</span><span class=\"o\">:</span><span class=\"n\">Y</span><span class=\"bp\">..</span>\n<span class=\"mi\">00000020</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0100</span><span class=\"w\"> </span><span class=\"mi\">00</span><span class=\"n\">f9</span><span class=\"w\"> </span><span class=\"mi\">0500</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\">  </span><span class=\"bp\">................</span>\n<span class=\"mi\">00000030</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0500</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0400</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\">  </span><span class=\"bp\">................</span>\n<span class=\"mi\">00000040</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">496</span><span class=\"n\">e</span><span class=\"w\"> </span><span class=\"mi\">6974</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">2000</span><span class=\"w\"> </span><span class=\"mi\">0201</span><span class=\"w\">  </span><span class=\"n\">Init</span><span class=\"bp\">........</span><span class=\"w\"> </span><span class=\"bp\">...</span>\n<span class=\"mi\">00000050</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0100</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">2000</span><span class=\"w\"> </span><span class=\"mi\">5203</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"n\">a59</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\">  </span><span class=\"bp\">........</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">R</span><span class=\"bp\">.</span><span class=\"o\">:</span><span class=\"n\">Y</span><span class=\"bp\">..</span>\n<span class=\"mi\">00000060</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">9866</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"n\">cb3</span><span class=\"w\"> </span><span class=\"n\">c8dc</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"n\">e1a</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">1800</span><span class=\"w\"> </span><span class=\"mi\">0100</span><span class=\"w\">  </span><span class=\"bp\">.</span><span class=\"n\">f</span><span class=\"bp\">..............</span>\n<span class=\"mi\">00000070</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">4800</span><span class=\"w\"> </span><span class=\"mi\">5203</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"n\">a59</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\">  </span><span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">R</span><span class=\"bp\">.</span><span class=\"o\">:</span><span class=\"n\">Y</span><span class=\"bp\">..........</span>\n<span class=\"mi\">00000080</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0100</span><span class=\"w\"> </span><span class=\"mi\">00</span><span class=\"n\">f9</span><span class=\"w\"> </span><span class=\"mi\">0500</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\">  </span><span class=\"bp\">................</span>\n<span class=\"mi\">00000090</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0500</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0400</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\">  </span><span class=\"bp\">................</span>\n</code></pre></div>",
        "id": 526286625,
        "sender_full_name": "metakuntyyy",
        "timestamp": 1751221825
    },
    {
        "content": "<p>That one works</p>",
        "id": 526286635,
        "sender_full_name": "metakuntyyy",
        "timestamp": 1751221837
    },
    {
        "content": "<p>oh hey, whats up with those <code>oleanfile!!!!!</code>s</p>",
        "id": 526286722,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1751221944
    },
    {
        "content": "<p>that's the old header</p>",
        "id": 526286734,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1751221950
    },
    {
        "content": "<p>I'm not sure exactly how old, I'd guess 8-12 months</p>",
        "id": 526286783,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1751221992
    },
    {
        "content": "<p><a class=\"message-link\" href=\"/#narrow/channel/287929-mathlib4/topic/lake.20exe.20cache.20get.20errors/near/397659951\">#mathlib4 &gt; lake exe cache get errors @ 💬</a></p>",
        "id": 526286790,
        "sender_full_name": "Chris Bailey",
        "timestamp": 1751221994
    },
    {
        "content": "<p>Yeah, but that one works for some reason. I'm on the up to date branch</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">git</span><span class=\"w\"> </span><span class=\"n\">status</span>\n<span class=\"n\">On</span><span class=\"w\"> </span><span class=\"n\">branch</span><span class=\"w\"> </span><span class=\"n\">master</span>\n<span class=\"n\">Your</span><span class=\"w\"> </span><span class=\"n\">branch</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">up</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">date</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">origin</span><span class=\"bp\">/</span><span class=\"n\">master'</span><span class=\"bp\">.</span>\n\n<span class=\"n\">nothing</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">commit</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">working</span><span class=\"w\"> </span><span class=\"n\">tree</span><span class=\"w\"> </span><span class=\"n\">clean</span>\n</code></pre></div>\n<p><a href=\"/user_uploads/3121/-ugyygYwLe_vCIq-7Y2Lyt7F/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/-ugyygYwLe_vCIq-7Y2Lyt7F/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"1020x69\" src=\"/user_uploads/thumbnail/3121/-ugyygYwLe_vCIq-7Y2Lyt7F/image.png/840x560.webp\"></a></div>",
        "id": 526286839,
        "sender_full_name": "metakuntyyy",
        "timestamp": 1751222056
    },
    {
        "content": "<p>Do I delete the .lake directory in lean4export and rebuild again?</p>",
        "id": 526286867,
        "sender_full_name": "metakuntyyy",
        "timestamp": 1751222087
    },
    {
        "content": "<p>Try the lake-manifest.json too.</p>",
        "id": 526286876,
        "sender_full_name": "Chris Bailey",
        "timestamp": 1751222102
    },
    {
        "content": "<p>So, delete both lake-manifest.json and .lake directory, is that correct?</p>",
        "id": 526286897,
        "sender_full_name": "metakuntyyy",
        "timestamp": 1751222130
    },
    {
        "content": "<p>Unless Mario has a better idea.</p>",
        "id": 526286911,
        "sender_full_name": "Chris Bailey",
        "timestamp": 1751222152
    },
    {
        "content": "<p>If you use <code>lake update</code> it should rebuild the manifest</p>",
        "id": 526286912,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1751222153
    },
    {
        "content": "<p>although I think you shouldn't need to delete it</p>",
        "id": 526286929,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1751222165
    },
    {
        "content": "<p>Ok, running lake update in lean4export</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"n\">update</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">toolchain</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">updated</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">already</span><span class=\"w\"> </span><span class=\"n\">up</span><span class=\"bp\">-</span><span class=\"n\">to</span><span class=\"bp\">-</span><span class=\"n\">date</span>\n</code></pre></div>",
        "id": 526286973,
        "sender_full_name": "metakuntyyy",
        "timestamp": 1751222196
    },
    {
        "content": "<p>(there is nothing in that file anyway)</p>",
        "id": 526286979,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1751222200
    },
    {
        "content": "<p>so delete the <code>.lake</code> directory and <code>lake build</code> and it should look like it's doing things</p>",
        "id": 526287020,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1751222242
    },
    {
        "content": "<p>Now I get the correct header</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">xxd</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">Export</span><span class=\"bp\">.</span><span class=\"n\">olean</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">head</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"mi\">10</span>\n<span class=\"mi\">00000000</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">6</span><span class=\"n\">f6c</span><span class=\"w\"> </span><span class=\"mi\">6561</span><span class=\"w\"> </span><span class=\"mi\">6</span><span class=\"n\">e02</span><span class=\"w\"> </span><span class=\"mi\">0134</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"n\">e32</span><span class=\"w\"> </span><span class=\"mi\">312</span><span class=\"n\">e</span><span class=\"w\"> </span><span class=\"mi\">302</span><span class=\"n\">d</span><span class=\"w\"> </span><span class=\"mi\">7263</span><span class=\"w\">  </span><span class=\"n\">olean</span><span class=\"bp\">..</span><span class=\"m\">4</span><span class=\"bp\">.</span><span class=\"m\">21</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">-</span><span class=\"n\">rc</span>\n<span class=\"mi\">00000010</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">3300</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\">  </span><span class=\"mf\">3.</span><span class=\"bp\">..............</span>\n<span class=\"mi\">00000020</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">3637</span><span class=\"w\"> </span><span class=\"mi\">3431</span><span class=\"w\"> </span><span class=\"mi\">3434</span><span class=\"w\"> </span><span class=\"mi\">3461</span><span class=\"w\">  </span><span class=\"bp\">........</span><span class=\"m\">6741444</span><span class=\"n\">a</span>\n<span class=\"mi\">00000030</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">3633</span><span class=\"w\"> </span><span class=\"mi\">6565</span><span class=\"w\"> </span><span class=\"mi\">6332</span><span class=\"w\"> </span><span class=\"mi\">3533</span><span class=\"w\"> </span><span class=\"mi\">6137</span><span class=\"w\"> </span><span class=\"mi\">6561</span><span class=\"w\"> </span><span class=\"mi\">6537</span><span class=\"w\"> </span><span class=\"mi\">6138</span><span class=\"w\">  </span><span class=\"mi\">63</span><span class=\"n\">eec253a7eae7a8</span>\n<span class=\"mi\">00000040</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">3366</span><span class=\"w\"> </span><span class=\"mi\">3162</span><span class=\"w\"> </span><span class=\"mi\">6562</span><span class=\"w\"> </span><span class=\"mi\">3364</span><span class=\"w\"> </span><span class=\"mi\">6530</span><span class=\"w\"> </span><span class=\"mi\">3135</span><span class=\"w\"> </span><span class=\"mi\">3032</span><span class=\"w\"> </span><span class=\"mi\">3364</span><span class=\"w\">  </span><span class=\"mi\">3</span><span class=\"n\">f1beb3de015023d</span>\n<span class=\"mi\">00000050</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">5203</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"n\">a59</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">18</span><span class=\"n\">d8</span><span class=\"w\"> </span><span class=\"mi\">6803</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"n\">a59</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\">  </span><span class=\"bp\">..</span><span class=\"n\">R</span><span class=\"bp\">.</span><span class=\"o\">:</span><span class=\"n\">Y</span><span class=\"bp\">....</span><span class=\"n\">h</span><span class=\"bp\">.</span><span class=\"o\">:</span><span class=\"n\">Y</span><span class=\"bp\">..</span>\n<span class=\"mi\">00000060</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0100</span><span class=\"w\"> </span><span class=\"mi\">00</span><span class=\"n\">f9</span><span class=\"w\"> </span><span class=\"mi\">0500</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\">  </span><span class=\"bp\">................</span>\n<span class=\"mi\">00000070</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0500</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0400</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\">  </span><span class=\"bp\">................</span>\n<span class=\"mi\">00000080</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">496</span><span class=\"n\">e</span><span class=\"w\"> </span><span class=\"mi\">6974</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">2000</span><span class=\"w\"> </span><span class=\"mi\">0201</span><span class=\"w\">  </span><span class=\"n\">Init</span><span class=\"bp\">........</span><span class=\"w\"> </span><span class=\"bp\">...</span>\n<span class=\"mi\">00000090</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0100</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">6000</span><span class=\"w\"> </span><span class=\"mi\">5203</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"n\">a59</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\">  </span><span class=\"bp\">........`.</span><span class=\"n\">R</span><span class=\"bp\">.</span><span class=\"o\">:</span><span class=\"n\">Y</span><span class=\"bp\">..</span>\n</code></pre></div>\n<p>Export still works.<br>\nFile hashes are identical</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">sha256sum</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">tmp</span><span class=\"bp\">/</span><span class=\"n\">A</span><span class=\"bp\">.</span><span class=\"n\">txt</span>\n<span class=\"mi\">46732</span><span class=\"n\">d7ade2bb2a6cce8ccdac150dbd52050969b2ad509c42c5e51bcef0ebdb1</span><span class=\"w\">  </span><span class=\"bp\">/</span><span class=\"n\">tmp</span><span class=\"bp\">/</span><span class=\"n\">A</span><span class=\"bp\">.</span><span class=\"n\">txt</span>\n</code></pre></div>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">sha256sum</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">tmp</span><span class=\"bp\">/</span><span class=\"n\">B</span><span class=\"bp\">.</span><span class=\"n\">txt</span>\n<span class=\"mi\">46732</span><span class=\"n\">d7ade2bb2a6cce8ccdac150dbd52050969b2ad509c42c5e51bcef0ebdb1</span><span class=\"w\">  </span><span class=\"bp\">/</span><span class=\"n\">tmp</span><span class=\"bp\">/</span><span class=\"n\">B</span><span class=\"bp\">.</span><span class=\"n\">txt</span>\n</code></pre></div>\n<p>The leanexport of my library still doesn't work</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"n\">env</span><span class=\"w\"> </span><span class=\"bp\">../</span><span class=\"n\">lean4export</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">bin</span><span class=\"bp\">/</span><span class=\"n\">lean4export</span><span class=\"w\"> </span><span class=\"n\">Mewll3</span><span class=\"bp\">.</span><span class=\"n\">Primroots</span><span class=\"w\"> </span><span class=\"bp\">&gt;</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">tmp</span><span class=\"bp\">/</span><span class=\"n\">Primroots</span><span class=\"bp\">.</span><span class=\"n\">txt</span>\n<span class=\"n\">uncaught</span><span class=\"w\"> </span><span class=\"n\">exception</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">failed</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">read</span><span class=\"w\"> </span><span class=\"n\">file</span><span class=\"w\"> </span><span class=\"bp\">'/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"bp\">/</span><span class=\"n\">Documents</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">newlean</span><span class=\"bp\">/</span><span class=\"n\">mewll3</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">Mewll3</span><span class=\"bp\">/</span><span class=\"n\">Primroots</span><span class=\"bp\">.</span><span class=\"n\">olean'</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">invalid</span><span class=\"w\"> </span><span class=\"n\">header</span>\n</code></pre></div>",
        "id": 526287361,
        "sender_full_name": "metakuntyyy",
        "timestamp": 1751222623
    },
    {
        "content": "<p>Maybe I should delete the lake directory in my library and build from scratch?</p>",
        "id": 526287383,
        "sender_full_name": "metakuntyyy",
        "timestamp": 1751222650
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110049\">Mario Carneiro</span> <a href=\"#narrow/channel/270676-lean4/topic/Explanation.20of.20olean.20files/near/526286310\">said</a>:</p>\n<blockquote>\n<p>If I run <code>lake env .lake/build/bin/lean4export Export</code> from lean4export's directory it spews export data, does that work for you?</p>\n</blockquote>",
        "id": 526287409,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1751222684
    },
    {
        "content": "<p>Yeah, that one worked, with both the new and old version.<br>\nThis is what I ran in the lakeexport directory</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"n\">env</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">bin</span><span class=\"bp\">/</span><span class=\"n\">lean4export</span><span class=\"w\"> </span><span class=\"n\">Export</span><span class=\"w\"> </span><span class=\"bp\">&gt;</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">tmp</span><span class=\"bp\">/</span><span class=\"n\">B</span><span class=\"bp\">.</span><span class=\"n\">txt</span>\n</code></pre></div>\n<p>It produced the file identical to the one before the removal of the .lake directory.</p>",
        "id": 526287527,
        "sender_full_name": "metakuntyyy",
        "timestamp": 1751222805
    },
    {
        "content": "<p>and does <code>lake env ../lean4export/.lake/build/bin/lean4export Init.Core</code> work too? (from your project directory)</p>",
        "id": 526287579,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1751222868
    },
    {
        "content": "<p>Nope:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"n\">env</span><span class=\"w\"> </span><span class=\"bp\">../</span><span class=\"n\">lean4export</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">bin</span><span class=\"bp\">/</span><span class=\"n\">lean4export</span><span class=\"w\"> </span><span class=\"n\">Init</span><span class=\"bp\">.</span><span class=\"n\">Core</span>\n<span class=\"n\">uncaught</span><span class=\"w\"> </span><span class=\"n\">exception</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">failed</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">read</span><span class=\"w\"> </span><span class=\"n\">file</span><span class=\"w\"> </span><span class=\"bp\">'/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.21.0-rc3/lib/lean/Init/Core.olean', invalid header</span>\n</code></pre></div>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">xxd</span><span class=\"w\"> </span><span class=\"bp\">~/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.21.0-rc3/lib/lean/Init/Core.olean | head -10</span>\n<span class=\"mi\">00000000</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">6</span><span class=\"n\">f6c</span><span class=\"w\"> </span><span class=\"mi\">6561</span><span class=\"w\"> </span><span class=\"mi\">6</span><span class=\"n\">e02</span><span class=\"w\"> </span><span class=\"mi\">0134</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"n\">e32</span><span class=\"w\"> </span><span class=\"mi\">312</span><span class=\"n\">e</span><span class=\"w\"> </span><span class=\"mi\">302</span><span class=\"n\">d</span><span class=\"w\"> </span><span class=\"mi\">7072</span><span class=\"w\">  </span><span class=\"n\">olean</span><span class=\"bp\">..</span><span class=\"m\">4</span><span class=\"bp\">.</span><span class=\"m\">21</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">-</span><span class=\"n\">pr</span>\n<span class=\"mi\">00000010</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">6500</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\">  </span><span class=\"n\">e</span><span class=\"bp\">...............</span>\n<span class=\"mi\">00000020</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">3637</span><span class=\"w\"> </span><span class=\"mi\">3431</span><span class=\"w\"> </span><span class=\"mi\">3434</span><span class=\"w\"> </span><span class=\"mi\">3461</span><span class=\"w\">  </span><span class=\"bp\">........</span><span class=\"m\">6741444</span><span class=\"n\">a</span>\n<span class=\"mi\">00000030</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">3633</span><span class=\"w\"> </span><span class=\"mi\">6565</span><span class=\"w\"> </span><span class=\"mi\">6332</span><span class=\"w\"> </span><span class=\"mi\">3533</span><span class=\"w\"> </span><span class=\"mi\">6137</span><span class=\"w\"> </span><span class=\"mi\">6561</span><span class=\"w\"> </span><span class=\"mi\">6537</span><span class=\"w\"> </span><span class=\"mi\">6138</span><span class=\"w\">  </span><span class=\"mi\">63</span><span class=\"n\">eec253a7eae7a8</span>\n<span class=\"mi\">00000040</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">3366</span><span class=\"w\"> </span><span class=\"mi\">3162</span><span class=\"w\"> </span><span class=\"mi\">6562</span><span class=\"w\"> </span><span class=\"mi\">3364</span><span class=\"w\"> </span><span class=\"mi\">6530</span><span class=\"w\"> </span><span class=\"mi\">3135</span><span class=\"w\"> </span><span class=\"mi\">3032</span><span class=\"w\"> </span><span class=\"mi\">3364</span><span class=\"w\">  </span><span class=\"mi\">3</span><span class=\"n\">f1beb3de015023d</span>\n<span class=\"mi\">00000050</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"n\">b58f</span><span class=\"w\"> </span><span class=\"n\">da31</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"n\">b03b</span><span class=\"w\"> </span><span class=\"n\">d08f</span><span class=\"w\"> </span><span class=\"n\">da31</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\">  </span><span class=\"bp\">.....</span><span class=\"m\">1</span><span class=\"bp\">...;...</span><span class=\"m\">1</span><span class=\"bp\">..</span>\n<span class=\"mi\">00000060</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0100</span><span class=\"w\"> </span><span class=\"mi\">00</span><span class=\"n\">f9</span><span class=\"w\"> </span><span class=\"mi\">0500</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\">  </span><span class=\"bp\">................</span>\n<span class=\"mi\">00000070</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0500</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0400</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\">  </span><span class=\"bp\">................</span>\n<span class=\"mi\">00000080</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">496</span><span class=\"n\">e</span><span class=\"w\"> </span><span class=\"mi\">6974</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">2000</span><span class=\"w\"> </span><span class=\"mi\">0201</span><span class=\"w\">  </span><span class=\"n\">Init</span><span class=\"bp\">........</span><span class=\"w\"> </span><span class=\"bp\">...</span>\n<span class=\"mi\">00000090</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0100</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">6000</span><span class=\"w\"> </span><span class=\"n\">b58f</span><span class=\"w\"> </span><span class=\"n\">da31</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\">  </span><span class=\"bp\">........`....</span><span class=\"m\">1</span><span class=\"bp\">..</span>\n</code></pre></div>",
        "id": 526287709,
        "sender_full_name": "metakuntyyy",
        "timestamp": 1751223035
    },
    {
        "content": "<p>I don't really understand Lean's versioning semantics, but <code>pre != rc3</code>.</p>",
        "id": 526287890,
        "sender_full_name": "Chris Bailey",
        "timestamp": 1751223275
    },
    {
        "content": "<p>The <del>CI job</del> github action that runs lean4export on mathlib just uses the cache get result. How did you install mathlib?</p>",
        "id": 526287906,
        "sender_full_name": "Chris Bailey",
        "timestamp": 1751223298
    },
    {
        "content": "<p>that's also what I get when I look at the same file though</p>",
        "id": 526288011,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1751223388
    },
    {
        "content": "<p>Just using codium and the vscode extension I think. Every time I create a new project.</p>",
        "id": 526288020,
        "sender_full_name": "metakuntyyy",
        "timestamp": 1751223396
    },
    {
        "content": "<p>what does <code>elan show</code> give?</p>",
        "id": 526288044,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1751223429
    },
    {
        "content": "<p>in your project</p>",
        "id": 526288055,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1751223444
    },
    {
        "content": "<p>in particular there might be an 'override', there should not be</p>",
        "id": 526288075,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1751223465
    },
    {
        "content": "<p>In my project</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">installed</span><span class=\"w\"> </span><span class=\"n\">toolchains</span>\n<span class=\"c1\">--------------------</span>\n\n<span class=\"n\">leanprover</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"o\">:</span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">12</span><span class=\"bp\">.</span><span class=\"m\">0</span>\n<span class=\"n\">leanprover</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"o\">:</span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">14</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">-</span><span class=\"n\">rc2</span>\n<span class=\"n\">leanprover</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"o\">:</span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">18</span><span class=\"bp\">.</span><span class=\"m\">0</span>\n<span class=\"n\">leanprover</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"o\">:</span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">19</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">-</span><span class=\"n\">rc2</span>\n<span class=\"n\">leanprover</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"o\">:</span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">20</span><span class=\"bp\">.</span><span class=\"m\">1</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">resolved</span><span class=\"w\"> </span><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"n\">default</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">stable'</span><span class=\"o\">)</span>\n<span class=\"n\">leanprover</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"o\">:</span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">21</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">-</span><span class=\"n\">rc3</span>\n<span class=\"n\">leanprover</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"o\">:</span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">3</span><span class=\"bp\">.</span><span class=\"m\">0</span>\n<span class=\"n\">leanprover</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"o\">:</span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">8</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">-</span><span class=\"n\">rc2</span>\n\n<span class=\"n\">active</span><span class=\"w\"> </span><span class=\"n\">toolchain</span>\n<span class=\"c1\">----------------</span>\n\n<span class=\"n\">leanprover</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"o\">:</span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">21</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">-</span><span class=\"n\">rc3</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">overridden</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"bp\">'/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">xxx</span><span class=\"bp\">/</span><span class=\"n\">Documents</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">newlean</span><span class=\"bp\">/</span><span class=\"n\">mewll3</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">-</span><span class=\"n\">toolchain'</span><span class=\"o\">)</span>\n<span class=\"n\">Lean</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">version</span><span class=\"w\"> </span><span class=\"mf\">4.21</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">-</span><span class=\"n\">rc3</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">x86_64</span><span class=\"bp\">-</span><span class=\"n\">unknown</span><span class=\"bp\">-</span><span class=\"n\">linux</span><span class=\"bp\">-</span><span class=\"n\">gnu</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">commit</span><span class=\"w\"> </span><span class=\"mi\">6741444</span><span class=\"n\">a63ee</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Release</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>In my home directory</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">installed</span><span class=\"w\"> </span><span class=\"n\">toolchains</span>\n<span class=\"c1\">--------------------</span>\n\n<span class=\"n\">leanprover</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"o\">:</span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">12</span><span class=\"bp\">.</span><span class=\"m\">0</span>\n<span class=\"n\">leanprover</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"o\">:</span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">14</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">-</span><span class=\"n\">rc2</span>\n<span class=\"n\">leanprover</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"o\">:</span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">18</span><span class=\"bp\">.</span><span class=\"m\">0</span>\n<span class=\"n\">leanprover</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"o\">:</span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">19</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">-</span><span class=\"n\">rc2</span>\n<span class=\"n\">leanprover</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"o\">:</span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">20</span><span class=\"bp\">.</span><span class=\"m\">1</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">resolved</span><span class=\"w\"> </span><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"n\">default</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">stable'</span><span class=\"o\">)</span>\n<span class=\"n\">leanprover</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"o\">:</span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">21</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">-</span><span class=\"n\">rc3</span>\n<span class=\"n\">leanprover</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"o\">:</span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">3</span><span class=\"bp\">.</span><span class=\"m\">0</span>\n<span class=\"n\">leanprover</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"o\">:</span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">8</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">-</span><span class=\"n\">rc2</span>\n\n<span class=\"n\">active</span><span class=\"w\"> </span><span class=\"n\">toolchain</span>\n<span class=\"c1\">----------------</span>\n\n<span class=\"n\">leanprover</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"o\">:</span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">20</span><span class=\"bp\">.</span><span class=\"m\">1</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">resolved</span><span class=\"w\"> </span><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"n\">default</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">stable'</span><span class=\"o\">)</span>\n<span class=\"n\">Lean</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">version</span><span class=\"w\"> </span><span class=\"mf\">4.20</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">x86_64</span><span class=\"bp\">-</span><span class=\"n\">unknown</span><span class=\"bp\">-</span><span class=\"n\">linux</span><span class=\"bp\">-</span><span class=\"n\">gnu</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">commit</span><span class=\"w\"> </span><span class=\"n\">b02228b03f65</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Release</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 526288187,
        "sender_full_name": "metakuntyyy",
        "timestamp": 1751223594
    },
    {
        "content": "<p>that all looks correct</p>",
        "id": 526288680,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1751224084
    },
    {
        "content": "<p>what does <code>lake --version; lake build</code> in your project do?</p>",
        "id": 526288813,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1751224244
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"c1\">--version; lake build</span>\n<span class=\"n\">Lake</span><span class=\"w\"> </span><span class=\"n\">version</span><span class=\"w\"> </span><span class=\"mf\">5.0</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">-</span><span class=\"mi\">6741444</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Lean</span><span class=\"w\"> </span><span class=\"n\">version</span><span class=\"w\"> </span><span class=\"mf\">4.21</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">-</span><span class=\"n\">rc3</span><span class=\"o\">)</span>\n<span class=\"n\">Build</span><span class=\"w\"> </span><span class=\"n\">completed</span><span class=\"w\"> </span><span class=\"n\">successfully</span><span class=\"bp\">.</span>\n</code></pre></div>",
        "id": 526289017,
        "sender_full_name": "metakuntyyy",
        "timestamp": 1751224505
    },
    {
        "content": "<p>So <code>lake env ../lean4export/.lake/build/bin/lean4export Init.Core</code> from your project directory fails, while <code>lake env ../lean4export/.lake/build/bin/lean4export Init.Core</code> from lean4export directory works? What do you get if you diff <code>lake env env</code> in those two locations? (There is a lot to redact there so just report what you can spot.)</p>",
        "id": 526289220,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1751224727
    },
    {
        "content": "<p>maybe a simpler version is <code>lake env bash -c 'echo $LEAN_PATH'</code></p>",
        "id": 526289441,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1751224973
    },
    {
        "content": "<p>when I run it I get</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">lean4export</span><span class=\"bp\">&gt;</span><span class=\"w\"> </span><span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"n\">env</span><span class=\"w\"> </span><span class=\"n\">bash</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">echo</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"n\">LEAN_PATH'</span>\n<span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">mario</span><span class=\"bp\">/</span><span class=\"n\">Documents</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">lean4export</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">mario</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.21.0-rc3/lib/lean</span>\n\n<span class=\"n\">mathlib4</span><span class=\"bp\">&gt;</span><span class=\"w\"> </span><span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"n\">env</span><span class=\"w\"> </span><span class=\"n\">bash</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">echo</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"n\">LEAN_PATH'</span>\n<span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">mario</span><span class=\"bp\">/</span><span class=\"n\">Documents</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">mathlib4</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">Cli</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">mario</span><span class=\"bp\">/</span><span class=\"n\">Documents</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">mathlib4</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">batteries</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">mario</span><span class=\"bp\">/</span><span class=\"n\">Documents</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">mathlib4</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">Qq</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">mario</span><span class=\"bp\">/</span><span class=\"n\">Documents</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">mathlib4</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">aesop</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">mario</span><span class=\"bp\">/</span><span class=\"n\">Documents</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">mathlib4</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">proofwidgets</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">mario</span><span class=\"bp\">/</span><span class=\"n\">Documents</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">mathlib4</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">importGraph</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">mario</span><span class=\"bp\">/</span><span class=\"n\">Documents</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">mathlib4</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">LeanSearchClient</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">mario</span><span class=\"bp\">/</span><span class=\"n\">Documents</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">mathlib4</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">plausible</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">mario</span><span class=\"bp\">/</span><span class=\"n\">Documents</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">mathlib4</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">mario</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.21.0-rc3/lib/lean</span>\n</code></pre></div>",
        "id": 526289499,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1751225059
    },
    {
        "content": "<p>lean4export dir:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">CHROME_DESKTOP</span><span class=\"bp\">=</span><span class=\"n\">code</span><span class=\"bp\">-</span><span class=\"n\">oss</span><span class=\"bp\">.</span><span class=\"n\">desktop</span>\n<span class=\"n\">COLORTERM</span><span class=\"bp\">=</span><span class=\"n\">truecolor</span>\n<span class=\"n\">DBUS_SESSION_BUS_ADDRESS</span><span class=\"bp\">=</span><span class=\"n\">unix</span><span class=\"o\">:</span><span class=\"n\">path</span><span class=\"bp\">=/</span><span class=\"n\">run</span><span class=\"bp\">/</span><span class=\"n\">user</span><span class=\"bp\">/</span><span class=\"mi\">1000</span><span class=\"bp\">/</span><span class=\"n\">bus</span>\n<span class=\"n\">DEBUGINFOD_URLS</span><span class=\"bp\">=</span><span class=\"n\">https</span><span class=\"o\">:</span><span class=\"bp\">//</span><span class=\"n\">debuginfod</span><span class=\"bp\">.</span><span class=\"n\">archlinux</span><span class=\"bp\">.</span><span class=\"n\">org</span>\n<span class=\"n\">DESKTOP_SESSION</span><span class=\"bp\">=</span><span class=\"n\">plasma</span>\n<span class=\"n\">DISPLAY</span><span class=\"bp\">=</span><span class=\"o\">:</span><span class=\"mi\">1</span>\n<span class=\"n\">ELAN_HOME</span><span class=\"bp\">=/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"bp\">/.</span><span class=\"n\">elan</span>\n<span class=\"n\">ELAN_TOOLCHAIN</span><span class=\"bp\">=</span><span class=\"n\">leanprover</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"o\">:</span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">21</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">-</span><span class=\"n\">rc3</span>\n<span class=\"n\">GDK_BACKEND</span><span class=\"bp\">=</span><span class=\"n\">x11</span>\n<span class=\"n\">GIT_ASKPASS</span><span class=\"bp\">=/</span><span class=\"n\">usr</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">code</span><span class=\"bp\">/</span><span class=\"n\">extensions</span><span class=\"bp\">/</span><span class=\"n\">git</span><span class=\"bp\">/</span><span class=\"n\">dist</span><span class=\"bp\">/</span><span class=\"n\">askpass</span><span class=\"bp\">.</span><span class=\"n\">sh</span>\n<span class=\"n\">GTK2_RC_FILES</span><span class=\"bp\">=/</span><span class=\"n\">etc</span><span class=\"bp\">/</span><span class=\"n\">gtk</span><span class=\"bp\">-</span><span class=\"mf\">2.0</span><span class=\"bp\">/</span><span class=\"n\">gtkrc</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"bp\">/.</span><span class=\"n\">gtkrc</span><span class=\"bp\">-</span><span class=\"mf\">2.0</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"bp\">/.</span><span class=\"n\">config</span><span class=\"bp\">/</span><span class=\"n\">gtkrc</span><span class=\"bp\">-</span><span class=\"mf\">2.0</span>\n<span class=\"n\">GTK_RC_FILES</span><span class=\"bp\">=/</span><span class=\"n\">etc</span><span class=\"bp\">/</span><span class=\"n\">gtk</span><span class=\"bp\">/</span><span class=\"n\">gtkrc</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"bp\">/.</span><span class=\"n\">gtkrc</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"bp\">/.</span><span class=\"n\">config</span><span class=\"bp\">/</span><span class=\"n\">gtkrc</span>\n<span class=\"n\">HOME</span><span class=\"bp\">=/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">redacted</span>\n<span class=\"n\">ICEAUTHORITY</span><span class=\"bp\">=/</span><span class=\"n\">run</span><span class=\"bp\">/</span><span class=\"n\">user</span><span class=\"bp\">/</span><span class=\"mi\">1000</span><span class=\"bp\">/</span><span class=\"n\">iceauth_LKviYC</span>\n<span class=\"n\">INVOCATION_ID</span><span class=\"bp\">=</span><span class=\"n\">b77258e3c15a4acebd4f47922584eee4</span>\n<span class=\"n\">JOURNAL_STREAM</span><span class=\"bp\">=</span><span class=\"mi\">9</span><span class=\"o\">:</span><span class=\"mi\">25042</span>\n<span class=\"n\">KDE_APPLICATIONS_AS_SCOPE</span><span class=\"bp\">=</span><span class=\"mi\">1</span>\n<span class=\"n\">KDE_FULL_SESSION</span><span class=\"bp\">=</span><span class=\"n\">true</span>\n<span class=\"n\">KDE_SESSION_UID</span><span class=\"bp\">=</span><span class=\"mi\">1000</span>\n<span class=\"n\">KDE_SESSION_VERSION</span><span class=\"bp\">=</span><span class=\"mi\">6</span>\n<span class=\"n\">LANG</span><span class=\"bp\">=</span><span class=\"n\">en_GB</span><span class=\"bp\">.</span><span class=\"n\">UTF</span><span class=\"bp\">-</span><span class=\"mi\">8</span>\n<span class=\"n\">LANGUAGE</span><span class=\"bp\">=</span>\n<span class=\"n\">LEAN_RECURSION_COUNT</span><span class=\"bp\">=</span><span class=\"mi\">1</span>\n<span class=\"n\">LOGNAME</span><span class=\"bp\">=</span><span class=\"n\">redacted</span>\n<span class=\"n\">MAIL</span><span class=\"bp\">=/</span><span class=\"n\">var</span><span class=\"bp\">/</span><span class=\"n\">spool</span><span class=\"bp\">/</span><span class=\"n\">mail</span><span class=\"bp\">/</span><span class=\"n\">redacted</span>\n<span class=\"n\">MANAGERPID</span><span class=\"bp\">=</span><span class=\"mi\">4155</span>\n<span class=\"n\">MEMORY_PRESSURE_WATCH</span><span class=\"bp\">=/</span><span class=\"n\">sys</span><span class=\"bp\">/</span><span class=\"n\">fs</span><span class=\"bp\">/</span><span class=\"n\">cgroup</span><span class=\"bp\">/</span><span class=\"n\">user</span><span class=\"bp\">.</span><span class=\"n\">slice</span><span class=\"bp\">/</span><span class=\"n\">user</span><span class=\"bp\">-</span><span class=\"mf\">1000.</span><span class=\"n\">slice</span><span class=\"bp\">/</span><span class=\"n\">user</span><span class=\"bp\">@</span><span class=\"mf\">1000.</span><span class=\"n\">service</span><span class=\"bp\">/</span><span class=\"n\">session</span><span class=\"bp\">.</span><span class=\"n\">slice</span><span class=\"bp\">/</span><span class=\"n\">plasma</span><span class=\"bp\">-</span><span class=\"n\">plasmashell</span><span class=\"bp\">.</span><span class=\"n\">service</span><span class=\"bp\">/</span><span class=\"n\">memory</span><span class=\"bp\">.</span><span class=\"n\">pressure</span>\n<span class=\"n\">MEMORY_PRESSURE_WRITE</span><span class=\"bp\">=</span><span class=\"n\">c29tZSAyMDAwMDAgMjAwMDAwMAA</span><span class=\"bp\">=</span>\n<span class=\"n\">MOTD_SHOWN</span><span class=\"bp\">=</span><span class=\"n\">pam</span>\n<span class=\"n\">NO_AT_BRIDGE</span><span class=\"bp\">=</span><span class=\"mi\">1</span>\n<span class=\"n\">ORIGINAL_XDG_CURRENT_DESKTOP</span><span class=\"bp\">=</span><span class=\"n\">KDE</span>\n<span class=\"n\">PAM_KWALLET5_LOGIN</span><span class=\"bp\">=/</span><span class=\"n\">run</span><span class=\"bp\">/</span><span class=\"n\">user</span><span class=\"bp\">/</span><span class=\"mi\">1000</span><span class=\"bp\">/</span><span class=\"n\">kwallet5</span><span class=\"bp\">.</span><span class=\"n\">socket</span>\n<span class=\"n\">PATH</span><span class=\"bp\">=/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"bp\">/</span><span class=\"n\">Documents</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">lean4export</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">bin</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.21.0-rc3/bin:/home/redacted/.elan/bin:/home/redacted/bin:/home/redacted/.elan/bin:/usr/local/sbin:/usr/local/bin:/usr/bin:/var/lib/flatpak/exports/bin:/usr/lib/jvm/default/bin:/usr/bin/site_perl:/usr/bin/vendor_perl:/usr/bin/core_perl</span>\n<span class=\"n\">PWD</span><span class=\"bp\">=/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"bp\">/</span><span class=\"n\">Documents</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">lean4export</span>\n<span class=\"n\">QT_WAYLAND_RECONNECT</span><span class=\"bp\">=</span><span class=\"mi\">1</span>\n<span class=\"n\">SESSION_MANAGER</span><span class=\"bp\">=</span><span class=\"kn\">local</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"o\">:</span><span class=\"bp\">@/</span><span class=\"n\">tmp</span><span class=\"bp\">/.</span><span class=\"n\">ICE</span><span class=\"bp\">-</span><span class=\"n\">unix</span><span class=\"bp\">/</span><span class=\"mi\">4361</span><span class=\"o\">,</span><span class=\"n\">unix</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">tmp</span><span class=\"bp\">/.</span><span class=\"n\">ICE</span><span class=\"bp\">-</span><span class=\"n\">unix</span><span class=\"bp\">/</span><span class=\"mi\">4361</span>\n<span class=\"n\">SHELL</span><span class=\"bp\">=/</span><span class=\"n\">bin</span><span class=\"bp\">/</span><span class=\"n\">bash</span>\n<span class=\"n\">SHLVL</span><span class=\"bp\">=</span><span class=\"mi\">1</span>\n<span class=\"n\">SYSTEMD_EXEC_PID</span><span class=\"bp\">=</span><span class=\"mi\">4430</span>\n<span class=\"n\">TERM</span><span class=\"bp\">=</span><span class=\"n\">xterm</span><span class=\"bp\">-</span><span class=\"mi\">256</span><span class=\"n\">color</span>\n<span class=\"n\">TERM_PROGRAM</span><span class=\"bp\">=</span><span class=\"n\">vscode</span>\n<span class=\"n\">TERM_PROGRAM_VERSION</span><span class=\"bp\">=</span><span class=\"mf\">1.101</span><span class=\"bp\">.</span><span class=\"m\">1</span>\n<span class=\"n\">USER</span><span class=\"bp\">=</span><span class=\"n\">redacted</span>\n<span class=\"n\">VSCODE_GIT_ASKPASS_EXTRA_ARGS</span><span class=\"bp\">=</span>\n<span class=\"n\">VSCODE_GIT_ASKPASS_MAIN</span><span class=\"bp\">=/</span><span class=\"n\">usr</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">code</span><span class=\"bp\">/</span><span class=\"n\">extensions</span><span class=\"bp\">/</span><span class=\"n\">git</span><span class=\"bp\">/</span><span class=\"n\">dist</span><span class=\"bp\">/</span><span class=\"n\">askpass</span><span class=\"bp\">-</span><span class=\"n\">main</span><span class=\"bp\">.</span><span class=\"n\">js</span>\n<span class=\"n\">VSCODE_GIT_ASKPASS_NODE</span><span class=\"bp\">=/</span><span class=\"n\">usr</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">electron35</span><span class=\"bp\">/</span><span class=\"n\">electron</span>\n<span class=\"n\">VSCODE_GIT_IPC_HANDLE</span><span class=\"bp\">=/</span><span class=\"n\">run</span><span class=\"bp\">/</span><span class=\"n\">user</span><span class=\"bp\">/</span><span class=\"mi\">1000</span><span class=\"bp\">/</span><span class=\"n\">vscode</span><span class=\"bp\">-</span><span class=\"n\">git</span><span class=\"bp\">-</span><span class=\"n\">cf683f0260</span><span class=\"bp\">.</span><span class=\"n\">sock</span>\n<span class=\"n\">WAYLAND_DISPLAY</span><span class=\"bp\">=</span><span class=\"n\">wayland</span><span class=\"bp\">-</span><span class=\"mi\">0</span>\n<span class=\"n\">XAUTHORITY</span><span class=\"bp\">=/</span><span class=\"n\">run</span><span class=\"bp\">/</span><span class=\"n\">user</span><span class=\"bp\">/</span><span class=\"mi\">1000</span><span class=\"bp\">/</span><span class=\"n\">xauth_fwFXAI</span>\n<span class=\"n\">XDG_CONFIG_DIRS</span><span class=\"bp\">=/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"bp\">/.</span><span class=\"n\">config</span><span class=\"bp\">/</span><span class=\"n\">kdedefaults</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">etc</span><span class=\"bp\">/</span><span class=\"n\">xdg</span>\n<span class=\"n\">XDG_CURRENT_DESKTOP</span><span class=\"bp\">=</span><span class=\"n\">KDE</span>\n<span class=\"n\">XDG_DATA_DIRS</span><span class=\"bp\">=/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"bp\">/.</span><span class=\"kn\">local</span><span class=\"bp\">/</span><span class=\"n\">share</span><span class=\"bp\">/</span><span class=\"n\">flatpak</span><span class=\"bp\">/</span><span class=\"n\">exports</span><span class=\"bp\">/</span><span class=\"n\">share</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">var</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">flatpak</span><span class=\"bp\">/</span><span class=\"n\">exports</span><span class=\"bp\">/</span><span class=\"n\">share</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">usr</span><span class=\"bp\">/</span><span class=\"kn\">local</span><span class=\"bp\">/</span><span class=\"n\">share</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">usr</span><span class=\"bp\">/</span><span class=\"n\">share</span>\n<span class=\"n\">XDG_MENU_PREFIX</span><span class=\"bp\">=</span><span class=\"n\">plasma</span><span class=\"bp\">-</span>\n<span class=\"n\">XDG_RUNTIME_DIR</span><span class=\"bp\">=/</span><span class=\"n\">run</span><span class=\"bp\">/</span><span class=\"n\">user</span><span class=\"bp\">/</span><span class=\"mi\">1000</span>\n<span class=\"n\">XDG_SEAT</span><span class=\"bp\">=</span><span class=\"n\">seat0</span>\n<span class=\"n\">XDG_SEAT_PATH</span><span class=\"bp\">=/</span><span class=\"n\">org</span><span class=\"bp\">/</span><span class=\"n\">freedesktop</span><span class=\"bp\">/</span><span class=\"n\">DisplayManager</span><span class=\"bp\">/</span><span class=\"n\">Seat0</span>\n<span class=\"n\">XDG_SESSION_CLASS</span><span class=\"bp\">=</span><span class=\"n\">user</span>\n<span class=\"n\">XDG_SESSION_DESKTOP</span><span class=\"bp\">=</span><span class=\"n\">KDE</span>\n<span class=\"n\">XDG_SESSION_ID</span><span class=\"bp\">=</span><span class=\"mi\">5</span>\n<span class=\"n\">XDG_SESSION_PATH</span><span class=\"bp\">=/</span><span class=\"n\">org</span><span class=\"bp\">/</span><span class=\"n\">freedesktop</span><span class=\"bp\">/</span><span class=\"n\">DisplayManager</span><span class=\"bp\">/</span><span class=\"n\">Session3</span>\n<span class=\"n\">XDG_SESSION_TYPE</span><span class=\"bp\">=</span><span class=\"n\">wayland</span>\n<span class=\"n\">XDG_VTNR</span><span class=\"bp\">=</span><span class=\"mi\">1</span>\n<span class=\"bp\">_=/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">bin</span><span class=\"bp\">/</span><span class=\"n\">lake</span>\n<span class=\"n\">ELAN</span><span class=\"bp\">=</span><span class=\"n\">elan</span>\n<span class=\"n\">LAKE</span><span class=\"bp\">=/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.21.0-rc3/bin/lake</span>\n<span class=\"n\">LAKE_HOME</span><span class=\"bp\">=/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.21.0-rc3</span>\n<span class=\"n\">LAKE_PKG_URL_MAP</span><span class=\"bp\">=</span><span class=\"o\">{}</span>\n<span class=\"n\">LEAN</span><span class=\"bp\">=/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.21.0-rc3/bin/lean</span>\n<span class=\"n\">LEAN_GITHASH</span><span class=\"bp\">=</span><span class=\"mi\">6741444</span><span class=\"n\">a63eec253a7eae7a83f1beb3de015023d</span>\n<span class=\"n\">LEAN_SYSROOT</span><span class=\"bp\">=/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.21.0-rc3</span>\n<span class=\"n\">LEAN_AR</span><span class=\"bp\">=/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.21.0-rc3/bin/llvm-ar</span>\n<span class=\"n\">LEAN_PATH</span><span class=\"bp\">=/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"bp\">/</span><span class=\"n\">Documents</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">lean4export</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.21.0-rc3/lib/lean</span>\n<span class=\"n\">LEAN_SRC_PATH</span><span class=\"bp\">=/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"bp\">/</span><span class=\"n\">Documents</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">lean4export</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"bp\">/</span><span class=\"n\">Documents</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">lean4export</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.21.0-rc3/src/lean/lake</span>\n<span class=\"n\">LD_LIBRARY_PATH</span><span class=\"bp\">=/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.21.0-rc3/lib/lean:/home/redacted/.elan/toolchains/leanprover--lean4---v4.21.0-rc3/lib:/home/redacted/Documents/lean/lean4export/.lake/build/lib</span>\n</code></pre></div>",
        "id": 526289505,
        "sender_full_name": "metakuntyyy",
        "timestamp": 1751225066
    },
    {
        "content": "<p>My directory </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">CHROME_DESKTOP</span><span class=\"bp\">=</span><span class=\"n\">code</span><span class=\"bp\">-</span><span class=\"n\">oss</span><span class=\"bp\">.</span><span class=\"n\">desktop</span>\n<span class=\"n\">COLORTERM</span><span class=\"bp\">=</span><span class=\"n\">truecolor</span>\n<span class=\"n\">DBUS_SESSION_BUS_ADDRESS</span><span class=\"bp\">=</span><span class=\"n\">unix</span><span class=\"o\">:</span><span class=\"n\">path</span><span class=\"bp\">=/</span><span class=\"n\">run</span><span class=\"bp\">/</span><span class=\"n\">user</span><span class=\"bp\">/</span><span class=\"mi\">1000</span><span class=\"bp\">/</span><span class=\"n\">bus</span>\n<span class=\"n\">DEBUGINFOD_URLS</span><span class=\"bp\">=</span><span class=\"n\">https</span><span class=\"o\">:</span><span class=\"bp\">//</span><span class=\"n\">debuginfod</span><span class=\"bp\">.</span><span class=\"n\">archlinux</span><span class=\"bp\">.</span><span class=\"n\">org</span>\n<span class=\"n\">DESKTOP_SESSION</span><span class=\"bp\">=</span><span class=\"n\">plasma</span>\n<span class=\"n\">DISPLAY</span><span class=\"bp\">=</span><span class=\"o\">:</span><span class=\"mi\">1</span>\n<span class=\"n\">ELAN_HOME</span><span class=\"bp\">=/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"bp\">/.</span><span class=\"n\">elan</span>\n<span class=\"n\">ELAN_TOOLCHAIN</span><span class=\"bp\">=</span><span class=\"n\">leanprover</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"o\">:</span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">21</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">-</span><span class=\"n\">rc3</span>\n<span class=\"n\">GDK_BACKEND</span><span class=\"bp\">=</span><span class=\"n\">x11</span>\n<span class=\"n\">GIT_ASKPASS</span><span class=\"bp\">=/</span><span class=\"n\">usr</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">code</span><span class=\"bp\">/</span><span class=\"n\">extensions</span><span class=\"bp\">/</span><span class=\"n\">git</span><span class=\"bp\">/</span><span class=\"n\">dist</span><span class=\"bp\">/</span><span class=\"n\">askpass</span><span class=\"bp\">.</span><span class=\"n\">sh</span>\n<span class=\"n\">GTK2_RC_FILES</span><span class=\"bp\">=/</span><span class=\"n\">etc</span><span class=\"bp\">/</span><span class=\"n\">gtk</span><span class=\"bp\">-</span><span class=\"mf\">2.0</span><span class=\"bp\">/</span><span class=\"n\">gtkrc</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"bp\">/.</span><span class=\"n\">gtkrc</span><span class=\"bp\">-</span><span class=\"mf\">2.0</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"bp\">/.</span><span class=\"n\">config</span><span class=\"bp\">/</span><span class=\"n\">gtkrc</span><span class=\"bp\">-</span><span class=\"mf\">2.0</span>\n<span class=\"n\">GTK_RC_FILES</span><span class=\"bp\">=/</span><span class=\"n\">etc</span><span class=\"bp\">/</span><span class=\"n\">gtk</span><span class=\"bp\">/</span><span class=\"n\">gtkrc</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"bp\">/.</span><span class=\"n\">gtkrc</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"bp\">/.</span><span class=\"n\">config</span><span class=\"bp\">/</span><span class=\"n\">gtkrc</span>\n<span class=\"n\">HOME</span><span class=\"bp\">=/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">redacted</span>\n<span class=\"n\">ICEAUTHORITY</span><span class=\"bp\">=/</span><span class=\"n\">run</span><span class=\"bp\">/</span><span class=\"n\">user</span><span class=\"bp\">/</span><span class=\"mi\">1000</span><span class=\"bp\">/</span><span class=\"n\">iceauth_LKviYC</span>\n<span class=\"n\">INVOCATION_ID</span><span class=\"bp\">=</span><span class=\"n\">b77258e3c15a4acebd4f47922584eee4</span>\n<span class=\"n\">JOURNAL_STREAM</span><span class=\"bp\">=</span><span class=\"mi\">9</span><span class=\"o\">:</span><span class=\"mi\">25042</span>\n<span class=\"n\">KDE_APPLICATIONS_AS_SCOPE</span><span class=\"bp\">=</span><span class=\"mi\">1</span>\n<span class=\"n\">KDE_FULL_SESSION</span><span class=\"bp\">=</span><span class=\"n\">true</span>\n<span class=\"n\">KDE_SESSION_UID</span><span class=\"bp\">=</span><span class=\"mi\">1000</span>\n<span class=\"n\">KDE_SESSION_VERSION</span><span class=\"bp\">=</span><span class=\"mi\">6</span>\n<span class=\"n\">LANG</span><span class=\"bp\">=</span><span class=\"n\">en_GB</span><span class=\"bp\">.</span><span class=\"n\">UTF</span><span class=\"bp\">-</span><span class=\"mi\">8</span>\n<span class=\"n\">LANGUAGE</span><span class=\"bp\">=</span>\n<span class=\"n\">LEAN_RECURSION_COUNT</span><span class=\"bp\">=</span><span class=\"mi\">1</span>\n<span class=\"n\">LOGNAME</span><span class=\"bp\">=</span><span class=\"n\">redacted</span>\n<span class=\"n\">MAIL</span><span class=\"bp\">=/</span><span class=\"n\">var</span><span class=\"bp\">/</span><span class=\"n\">spool</span><span class=\"bp\">/</span><span class=\"n\">mail</span><span class=\"bp\">/</span><span class=\"n\">redacted</span>\n<span class=\"n\">MANAGERPID</span><span class=\"bp\">=</span><span class=\"mi\">4155</span>\n<span class=\"n\">MEMORY_PRESSURE_WATCH</span><span class=\"bp\">=/</span><span class=\"n\">sys</span><span class=\"bp\">/</span><span class=\"n\">fs</span><span class=\"bp\">/</span><span class=\"n\">cgroup</span><span class=\"bp\">/</span><span class=\"n\">user</span><span class=\"bp\">.</span><span class=\"n\">slice</span><span class=\"bp\">/</span><span class=\"n\">user</span><span class=\"bp\">-</span><span class=\"mf\">1000.</span><span class=\"n\">slice</span><span class=\"bp\">/</span><span class=\"n\">user</span><span class=\"bp\">@</span><span class=\"mf\">1000.</span><span class=\"n\">service</span><span class=\"bp\">/</span><span class=\"n\">session</span><span class=\"bp\">.</span><span class=\"n\">slice</span><span class=\"bp\">/</span><span class=\"n\">plasma</span><span class=\"bp\">-</span><span class=\"n\">plasmashell</span><span class=\"bp\">.</span><span class=\"n\">service</span><span class=\"bp\">/</span><span class=\"n\">memory</span><span class=\"bp\">.</span><span class=\"n\">pressure</span>\n<span class=\"n\">MEMORY_PRESSURE_WRITE</span><span class=\"bp\">=</span><span class=\"n\">c29tZSAyMDAwMDAgMjAwMDAwMAA</span><span class=\"bp\">=</span>\n<span class=\"n\">MOTD_SHOWN</span><span class=\"bp\">=</span><span class=\"n\">pam</span>\n<span class=\"n\">NO_AT_BRIDGE</span><span class=\"bp\">=</span><span class=\"mi\">1</span>\n<span class=\"n\">ORIGINAL_XDG_CURRENT_DESKTOP</span><span class=\"bp\">=</span><span class=\"n\">KDE</span>\n<span class=\"n\">PAM_KWALLET5_LOGIN</span><span class=\"bp\">=/</span><span class=\"n\">run</span><span class=\"bp\">/</span><span class=\"n\">user</span><span class=\"bp\">/</span><span class=\"mi\">1000</span><span class=\"bp\">/</span><span class=\"n\">kwallet5</span><span class=\"bp\">.</span><span class=\"n\">socket</span>\n<span class=\"n\">PATH</span><span class=\"bp\">=/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"bp\">/</span><span class=\"n\">Documents</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">newlean</span><span class=\"bp\">/</span><span class=\"n\">mewll3</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">Cli</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">bin</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"bp\">/</span><span class=\"n\">Documents</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">newlean</span><span class=\"bp\">/</span><span class=\"n\">mewll3</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">batteries</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">bin</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"bp\">/</span><span class=\"n\">Documents</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">newlean</span><span class=\"bp\">/</span><span class=\"n\">mewll3</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">Qq</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">bin</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"bp\">/</span><span class=\"n\">Documents</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">newlean</span><span class=\"bp\">/</span><span class=\"n\">mewll3</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">aesop</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">bin</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"bp\">/</span><span class=\"n\">Documents</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">newlean</span><span class=\"bp\">/</span><span class=\"n\">mewll3</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">proofwidgets</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">bin</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"bp\">/</span><span class=\"n\">Documents</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">newlean</span><span class=\"bp\">/</span><span class=\"n\">mewll3</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">importGraph</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">bin</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"bp\">/</span><span class=\"n\">Documents</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">newlean</span><span class=\"bp\">/</span><span class=\"n\">mewll3</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">LeanSearchClient</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">bin</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"bp\">/</span><span class=\"n\">Documents</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">newlean</span><span class=\"bp\">/</span><span class=\"n\">mewll3</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">plausible</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">bin</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"bp\">/</span><span class=\"n\">Documents</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">newlean</span><span class=\"bp\">/</span><span class=\"n\">mewll3</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">mathlib</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">bin</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"bp\">/</span><span class=\"n\">Documents</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">newlean</span><span class=\"bp\">/</span><span class=\"n\">mewll3</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">bin</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.21.0-rc3/bin:/home/redacted/.elan/bin:/home/redacted/bin:/home/redacted/.elan/bin:/usr/local/sbin:/usr/local/bin:/usr/bin:/var/lib/flatpak/exports/bin:/usr/lib/jvm/default/bin:/usr/bin/site_perl:/usr/bin/vendor_perl:/usr/bin/core_perl</span>\n<span class=\"n\">PWD</span><span class=\"bp\">=/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"bp\">/</span><span class=\"n\">Documents</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">newlean</span><span class=\"bp\">/</span><span class=\"n\">mewll3</span>\n<span class=\"n\">QT_WAYLAND_RECONNECT</span><span class=\"bp\">=</span><span class=\"mi\">1</span>\n<span class=\"n\">SESSION_MANAGER</span><span class=\"bp\">=</span><span class=\"kn\">local</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"o\">:</span><span class=\"bp\">@/</span><span class=\"n\">tmp</span><span class=\"bp\">/.</span><span class=\"n\">ICE</span><span class=\"bp\">-</span><span class=\"n\">unix</span><span class=\"bp\">/</span><span class=\"mi\">4361</span><span class=\"o\">,</span><span class=\"n\">unix</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">tmp</span><span class=\"bp\">/.</span><span class=\"n\">ICE</span><span class=\"bp\">-</span><span class=\"n\">unix</span><span class=\"bp\">/</span><span class=\"mi\">4361</span>\n<span class=\"n\">SHELL</span><span class=\"bp\">=/</span><span class=\"n\">bin</span><span class=\"bp\">/</span><span class=\"n\">bash</span>\n<span class=\"n\">SHLVL</span><span class=\"bp\">=</span><span class=\"mi\">1</span>\n<span class=\"n\">SYSTEMD_EXEC_PID</span><span class=\"bp\">=</span><span class=\"mi\">4430</span>\n<span class=\"n\">TERM</span><span class=\"bp\">=</span><span class=\"n\">xterm</span><span class=\"bp\">-</span><span class=\"mi\">256</span><span class=\"n\">color</span>\n<span class=\"n\">TERM_PROGRAM</span><span class=\"bp\">=</span><span class=\"n\">vscode</span>\n<span class=\"n\">TERM_PROGRAM_VERSION</span><span class=\"bp\">=</span><span class=\"mf\">1.101</span><span class=\"bp\">.</span><span class=\"m\">1</span>\n<span class=\"n\">USER</span><span class=\"bp\">=</span><span class=\"n\">redacted</span>\n<span class=\"n\">VSCODE_GIT_ASKPASS_EXTRA_ARGS</span><span class=\"bp\">=</span>\n<span class=\"n\">VSCODE_GIT_ASKPASS_MAIN</span><span class=\"bp\">=/</span><span class=\"n\">usr</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">code</span><span class=\"bp\">/</span><span class=\"n\">extensions</span><span class=\"bp\">/</span><span class=\"n\">git</span><span class=\"bp\">/</span><span class=\"n\">dist</span><span class=\"bp\">/</span><span class=\"n\">askpass</span><span class=\"bp\">-</span><span class=\"n\">main</span><span class=\"bp\">.</span><span class=\"n\">js</span>\n<span class=\"n\">VSCODE_GIT_ASKPASS_NODE</span><span class=\"bp\">=/</span><span class=\"n\">usr</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">electron35</span><span class=\"bp\">/</span><span class=\"n\">electron</span>\n<span class=\"n\">VSCODE_GIT_IPC_HANDLE</span><span class=\"bp\">=/</span><span class=\"n\">run</span><span class=\"bp\">/</span><span class=\"n\">user</span><span class=\"bp\">/</span><span class=\"mi\">1000</span><span class=\"bp\">/</span><span class=\"n\">vscode</span><span class=\"bp\">-</span><span class=\"n\">git</span><span class=\"bp\">-</span><span class=\"mi\">76</span><span class=\"n\">eea6a9f6</span><span class=\"bp\">.</span><span class=\"n\">sock</span>\n<span class=\"n\">WAYLAND_DISPLAY</span><span class=\"bp\">=</span><span class=\"n\">wayland</span><span class=\"bp\">-</span><span class=\"mi\">0</span>\n<span class=\"n\">XAUTHORITY</span><span class=\"bp\">=/</span><span class=\"n\">run</span><span class=\"bp\">/</span><span class=\"n\">user</span><span class=\"bp\">/</span><span class=\"mi\">1000</span><span class=\"bp\">/</span><span class=\"n\">xauth_fwFXAI</span>\n<span class=\"n\">XDG_CONFIG_DIRS</span><span class=\"bp\">=/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"bp\">/.</span><span class=\"n\">config</span><span class=\"bp\">/</span><span class=\"n\">kdedefaults</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">etc</span><span class=\"bp\">/</span><span class=\"n\">xdg</span>\n<span class=\"n\">XDG_CURRENT_DESKTOP</span><span class=\"bp\">=</span><span class=\"n\">KDE</span>\n<span class=\"n\">XDG_DATA_DIRS</span><span class=\"bp\">=/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"bp\">/.</span><span class=\"kn\">local</span><span class=\"bp\">/</span><span class=\"n\">share</span><span class=\"bp\">/</span><span class=\"n\">flatpak</span><span class=\"bp\">/</span><span class=\"n\">exports</span><span class=\"bp\">/</span><span class=\"n\">share</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">var</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">flatpak</span><span class=\"bp\">/</span><span class=\"n\">exports</span><span class=\"bp\">/</span><span class=\"n\">share</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">usr</span><span class=\"bp\">/</span><span class=\"kn\">local</span><span class=\"bp\">/</span><span class=\"n\">share</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">usr</span><span class=\"bp\">/</span><span class=\"n\">share</span>\n<span class=\"n\">XDG_MENU_PREFIX</span><span class=\"bp\">=</span><span class=\"n\">plasma</span><span class=\"bp\">-</span>\n<span class=\"n\">XDG_RUNTIME_DIR</span><span class=\"bp\">=/</span><span class=\"n\">run</span><span class=\"bp\">/</span><span class=\"n\">user</span><span class=\"bp\">/</span><span class=\"mi\">1000</span>\n<span class=\"n\">XDG_SEAT</span><span class=\"bp\">=</span><span class=\"n\">seat0</span>\n<span class=\"n\">XDG_SEAT_PATH</span><span class=\"bp\">=/</span><span class=\"n\">org</span><span class=\"bp\">/</span><span class=\"n\">freedesktop</span><span class=\"bp\">/</span><span class=\"n\">DisplayManager</span><span class=\"bp\">/</span><span class=\"n\">Seat0</span>\n<span class=\"n\">XDG_SESSION_CLASS</span><span class=\"bp\">=</span><span class=\"n\">user</span>\n<span class=\"n\">XDG_SESSION_DESKTOP</span><span class=\"bp\">=</span><span class=\"n\">KDE</span>\n<span class=\"n\">XDG_SESSION_ID</span><span class=\"bp\">=</span><span class=\"mi\">5</span>\n<span class=\"n\">XDG_SESSION_PATH</span><span class=\"bp\">=/</span><span class=\"n\">org</span><span class=\"bp\">/</span><span class=\"n\">freedesktop</span><span class=\"bp\">/</span><span class=\"n\">DisplayManager</span><span class=\"bp\">/</span><span class=\"n\">Session3</span>\n<span class=\"n\">XDG_SESSION_TYPE</span><span class=\"bp\">=</span><span class=\"n\">wayland</span>\n<span class=\"n\">XDG_VTNR</span><span class=\"bp\">=</span><span class=\"mi\">1</span>\n<span class=\"bp\">_=/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">bin</span><span class=\"bp\">/</span><span class=\"n\">lake</span>\n<span class=\"n\">ELAN</span><span class=\"bp\">=</span><span class=\"n\">elan</span>\n<span class=\"n\">LAKE</span><span class=\"bp\">=/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.21.0-rc3/bin/lake</span>\n<span class=\"n\">LAKE_HOME</span><span class=\"bp\">=/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.21.0-rc3</span>\n<span class=\"n\">LAKE_PKG_URL_MAP</span><span class=\"bp\">=</span><span class=\"o\">{}</span>\n<span class=\"n\">LEAN</span><span class=\"bp\">=/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.21.0-rc3/bin/lean</span>\n<span class=\"n\">LEAN_GITHASH</span><span class=\"bp\">=</span><span class=\"mi\">6741444</span><span class=\"n\">a63eec253a7eae7a83f1beb3de015023d</span>\n<span class=\"n\">LEAN_SYSROOT</span><span class=\"bp\">=/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.21.0-rc3</span>\n<span class=\"n\">LEAN_AR</span><span class=\"bp\">=/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.21.0-rc3/bin/llvm-ar</span>\n<span class=\"n\">LEAN_PATH</span><span class=\"bp\">=/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"bp\">/</span><span class=\"n\">Documents</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">newlean</span><span class=\"bp\">/</span><span class=\"n\">mewll3</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">Cli</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"bp\">/</span><span class=\"n\">Documents</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">newlean</span><span class=\"bp\">/</span><span class=\"n\">mewll3</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">batteries</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"bp\">/</span><span class=\"n\">Documents</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">newlean</span><span class=\"bp\">/</span><span class=\"n\">mewll3</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">Qq</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"bp\">/</span><span class=\"n\">Documents</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">newlean</span><span class=\"bp\">/</span><span class=\"n\">mewll3</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">aesop</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"bp\">/</span><span class=\"n\">Documents</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">newlean</span><span class=\"bp\">/</span><span class=\"n\">mewll3</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">proofwidgets</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"bp\">/</span><span class=\"n\">Documents</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">newlean</span><span class=\"bp\">/</span><span class=\"n\">mewll3</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">importGraph</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"bp\">/</span><span class=\"n\">Documents</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">newlean</span><span class=\"bp\">/</span><span class=\"n\">mewll3</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">LeanSearchClient</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"bp\">/</span><span class=\"n\">Documents</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">newlean</span><span class=\"bp\">/</span><span class=\"n\">mewll3</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">plausible</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"bp\">/</span><span class=\"n\">Documents</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">newlean</span><span class=\"bp\">/</span><span class=\"n\">mewll3</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">mathlib</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"bp\">/</span><span class=\"n\">Documents</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">newlean</span><span class=\"bp\">/</span><span class=\"n\">mewll3</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.21.0-rc3/lib/lean</span>\n<span class=\"n\">LEAN_SRC_PATH</span><span class=\"bp\">=/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"bp\">/</span><span class=\"n\">Documents</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">newlean</span><span class=\"bp\">/</span><span class=\"n\">mewll3</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">Cli</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"bp\">/</span><span class=\"n\">Documents</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">newlean</span><span class=\"bp\">/</span><span class=\"n\">mewll3</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">batteries</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"bp\">/</span><span class=\"n\">Documents</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">newlean</span><span class=\"bp\">/</span><span class=\"n\">mewll3</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">batteries</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"bp\">/</span><span class=\"n\">Documents</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">newlean</span><span class=\"bp\">/</span><span class=\"n\">mewll3</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">Qq</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"bp\">/</span><span class=\"n\">Documents</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">newlean</span><span class=\"bp\">/</span><span class=\"n\">mewll3</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">aesop</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"bp\">/</span><span class=\"n\">Documents</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">newlean</span><span class=\"bp\">/</span><span class=\"n\">mewll3</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">aesop</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"bp\">/</span><span class=\"n\">Documents</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">newlean</span><span class=\"bp\">/</span><span class=\"n\">mewll3</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">proofwidgets</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"bp\">/</span><span class=\"n\">Documents</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">newlean</span><span class=\"bp\">/</span><span class=\"n\">mewll3</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">proofwidgets</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"bp\">/</span><span class=\"n\">Documents</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">newlean</span><span class=\"bp\">/</span><span class=\"n\">mewll3</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">importGraph</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"bp\">/</span><span class=\"n\">Documents</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">newlean</span><span class=\"bp\">/</span><span class=\"n\">mewll3</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">importGraph</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"bp\">/</span><span class=\"n\">Documents</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">newlean</span><span class=\"bp\">/</span><span class=\"n\">mewll3</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">LeanSearchClient</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"bp\">/</span><span class=\"n\">Documents</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">newlean</span><span class=\"bp\">/</span><span class=\"n\">mewll3</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">LeanSearchClient</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"bp\">/</span><span class=\"n\">Documents</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">newlean</span><span class=\"bp\">/</span><span class=\"n\">mewll3</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">plausible</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"bp\">/</span><span class=\"n\">Documents</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">newlean</span><span class=\"bp\">/</span><span class=\"n\">mewll3</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">plausible</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"bp\">/</span><span class=\"n\">Documents</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">newlean</span><span class=\"bp\">/</span><span class=\"n\">mewll3</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">mathlib</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"bp\">/</span><span class=\"n\">Documents</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">newlean</span><span class=\"bp\">/</span><span class=\"n\">mewll3</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">mathlib</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"bp\">/</span><span class=\"n\">Documents</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">newlean</span><span class=\"bp\">/</span><span class=\"n\">mewll3</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">mathlib</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"bp\">/</span><span class=\"n\">Documents</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">newlean</span><span class=\"bp\">/</span><span class=\"n\">mewll3</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">mathlib</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"bp\">/</span><span class=\"n\">Documents</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">newlean</span><span class=\"bp\">/</span><span class=\"n\">mewll3</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">mathlib</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"bp\">/</span><span class=\"n\">Documents</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">newlean</span><span class=\"bp\">/</span><span class=\"n\">mewll3</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">mathlib</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"bp\">/</span><span class=\"n\">Documents</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">newlean</span><span class=\"bp\">/</span><span class=\"n\">mewll3</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">mathlib</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"bp\">/</span><span class=\"n\">Documents</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">newlean</span><span class=\"bp\">/</span><span class=\"n\">mewll3</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.21.0-rc3/src/lean/lake</span>\n<span class=\"n\">LD_LIBRARY_PATH</span><span class=\"bp\">=/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.21.0-rc3/lib/lean:/home/redacted/.elan/toolchains/leanprover--lean4---v4.21.0-rc3/lib:/home/redacted/Documents/lean/newlean/mewll3/.lake/build/lib:/home/redacted/Documents/lean/newlean/mewll3/.lake/packages/mathlib/.lake/build/lib:/home/redacted/Documents/lean/newlean/mewll3/.lake/packages/plausible/.lake/build/lib:/home/redacted/Documents/lean/newlean/mewll3/.lake/packages/LeanSearchClient/.lake/build/lib:/home/redacted/Documents/lean/newlean/mewll3/.lake/packages/importGraph/.lake/build/lib:/home/redacted/Documents/lean/newlean/mewll3/.lake/packages/proofwidgets/.lake/build/lib:/home/redacted/Documents/lean/newlean/mewll3/.lake/packages/aesop/.lake/build/lib:/home/redacted/Documents/lean/newlean/mewll3/.lake/packages/Qq/.lake/build/lib:/home/redacted/Documents/lean/newlean/mewll3/.lake/packages/batteries/.lake/build/lib:/home/redacted/Documents/lean/newlean/mewll3/.lake/packages/Cli/.lake/build/lib</span>\n</code></pre></div>",
        "id": 526289520,
        "sender_full_name": "metakuntyyy",
        "timestamp": 1751225085
    },
    {
        "content": "<p>This one works in lean4export</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"n\">env</span><span class=\"w\"> </span><span class=\"bp\">./.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">bin</span><span class=\"bp\">/</span><span class=\"n\">lean4export</span><span class=\"w\"> </span><span class=\"n\">Init</span><span class=\"bp\">.</span><span class=\"n\">Core</span><span class=\"w\"> </span><span class=\"bp\">&gt;</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">tmp</span><span class=\"bp\">/</span><span class=\"n\">C</span><span class=\"bp\">.</span><span class=\"n\">txt</span>\n</code></pre></div>",
        "id": 526289560,
        "sender_full_name": "metakuntyyy",
        "timestamp": 1751225137
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"w\">  </span><span class=\"mi\">1941510</span><span class=\"w\"> </span><span class=\"n\">Jun</span><span class=\"w\"> </span><span class=\"mi\">29</span><span class=\"w\"> </span><span class=\"mi\">21</span><span class=\"o\">:</span><span class=\"mi\">25</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"bp\">.</span><span class=\"n\">txt</span>\n</code></pre></div>",
        "id": 526289571,
        "sender_full_name": "metakuntyyy",
        "timestamp": 1751225155
    },
    {
        "content": "<p>It fails in my directory</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"n\">env</span><span class=\"w\"> </span><span class=\"bp\">../</span><span class=\"n\">lean4export</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">bin</span><span class=\"bp\">/</span><span class=\"n\">lean4export</span><span class=\"w\"> </span><span class=\"n\">Init</span><span class=\"bp\">.</span><span class=\"n\">Core</span><span class=\"w\"> </span><span class=\"bp\">&gt;</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">tmp</span><span class=\"bp\">/</span><span class=\"n\">D</span><span class=\"bp\">.</span><span class=\"n\">txt</span>\n<span class=\"n\">uncaught</span><span class=\"w\"> </span><span class=\"n\">exception</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">failed</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">read</span><span class=\"w\"> </span><span class=\"n\">file</span><span class=\"w\"> </span><span class=\"bp\">'/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">redacted</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.21.0-rc3/lib/lean/Init/Core.olean', invalid header</span>\n</code></pre></div>",
        "id": 526289615,
        "sender_full_name": "metakuntyyy",
        "timestamp": 1751225214
    },
    {
        "content": "<p>Heh, I have figured out why it failed</p>",
        "id": 526289780,
        "sender_full_name": "metakuntyyy",
        "timestamp": 1751225403
    },
    {
        "content": "<p>I have lean4export installed in both my lean directory and in my newlean directory. I have always used the wrong one.</p>",
        "id": 526289806,
        "sender_full_name": "metakuntyyy",
        "timestamp": 1751225433
    },
    {
        "content": "<p>This one succeeds:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"n\">env</span><span class=\"w\"> </span><span class=\"bp\">../../</span><span class=\"n\">lean4export</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">bin</span><span class=\"bp\">/</span><span class=\"n\">lean4export</span><span class=\"w\"> </span><span class=\"n\">Mewll3</span><span class=\"bp\">.</span><span class=\"n\">Primroots</span><span class=\"w\"> </span><span class=\"bp\">&gt;</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">tmp</span><span class=\"bp\">/</span><span class=\"n\">Primroots</span><span class=\"bp\">.</span><span class=\"n\">txt</span>\n</code></pre></div>",
        "id": 526289829,
        "sender_full_name": "metakuntyyy",
        "timestamp": 1751225455
    },
    {
        "content": "<p>530879985 Jun 29 21:29 Primroots.txt</p>",
        "id": 526289854,
        "sender_full_name": "metakuntyyy",
        "timestamp": 1751225472
    },
    {
        "content": "<p>I'll delete the EVIL directory immediately. <span aria-label=\"rolling on the floor laughing\" class=\"emoji emoji-1f923\" role=\"img\" title=\"rolling on the floor laughing\">:rolling_on_the_floor_laughing:</span></p>",
        "id": 526289884,
        "sender_full_name": "metakuntyyy",
        "timestamp": 1751225509
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"228466\">Chris Bailey</span> <a href=\"#narrow/channel/270676-lean4/topic/Explanation.20of.20olean.20files/near/526287890\">said</a>:</p>\n<blockquote>\n<p>I don't really understand Lean's versioning semantics, but <code>pre != rc3</code>.</p>\n</blockquote>\n<p><span class=\"user-mention\" data-user-id=\"110024\">@Sebastian Ullrich</span> I wanted to ask you about this. Why are the distributed olean files reporting a pre-release version, and why is this not causing a version mismatch?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">&gt;</span><span class=\"w\"> </span><span class=\"n\">xxd</span><span class=\"w\"> </span><span class=\"bp\">~/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.21.0-rc3/lib/lean/Init/Core.olean | head -10</span>\n<span class=\"mi\">00000000</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">6</span><span class=\"n\">f6c</span><span class=\"w\"> </span><span class=\"mi\">6561</span><span class=\"w\"> </span><span class=\"mi\">6</span><span class=\"n\">e02</span><span class=\"w\"> </span><span class=\"mi\">0134</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"n\">e32</span><span class=\"w\"> </span><span class=\"mi\">312</span><span class=\"n\">e</span><span class=\"w\"> </span><span class=\"mi\">302</span><span class=\"n\">d</span><span class=\"w\"> </span><span class=\"mi\">7072</span><span class=\"w\">  </span><span class=\"n\">olean</span><span class=\"bp\">..</span><span class=\"m\">4</span><span class=\"bp\">.</span><span class=\"m\">21</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">-</span><span class=\"n\">pr</span>\n<span class=\"mi\">00000010</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">6500</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\">  </span><span class=\"n\">e</span><span class=\"bp\">...............</span>\n<span class=\"mi\">00000020</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">3637</span><span class=\"w\"> </span><span class=\"mi\">3431</span><span class=\"w\"> </span><span class=\"mi\">3434</span><span class=\"w\"> </span><span class=\"mi\">3461</span><span class=\"w\">  </span><span class=\"bp\">........</span><span class=\"m\">6741444</span><span class=\"n\">a</span>\n<span class=\"mi\">00000030</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">3633</span><span class=\"w\"> </span><span class=\"mi\">6565</span><span class=\"w\"> </span><span class=\"mi\">6332</span><span class=\"w\"> </span><span class=\"mi\">3533</span><span class=\"w\"> </span><span class=\"mi\">6137</span><span class=\"w\"> </span><span class=\"mi\">6561</span><span class=\"w\"> </span><span class=\"mi\">6537</span><span class=\"w\"> </span><span class=\"mi\">6138</span><span class=\"w\">  </span><span class=\"mi\">63</span><span class=\"n\">eec253a7eae7a8</span>\n<span class=\"mi\">00000040</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">3366</span><span class=\"w\"> </span><span class=\"mi\">3162</span><span class=\"w\"> </span><span class=\"mi\">6562</span><span class=\"w\"> </span><span class=\"mi\">3364</span><span class=\"w\"> </span><span class=\"mi\">6530</span><span class=\"w\"> </span><span class=\"mi\">3135</span><span class=\"w\"> </span><span class=\"mi\">3032</span><span class=\"w\"> </span><span class=\"mi\">3364</span><span class=\"w\">  </span><span class=\"mi\">3</span><span class=\"n\">f1beb3de015023d</span>\n<span class=\"mi\">00000050</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"n\">b58f</span><span class=\"w\"> </span><span class=\"n\">da31</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"n\">b03b</span><span class=\"w\"> </span><span class=\"n\">d08f</span><span class=\"w\"> </span><span class=\"n\">da31</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\">  </span><span class=\"bp\">.....</span><span class=\"m\">1</span><span class=\"bp\">...;...</span><span class=\"m\">1</span><span class=\"bp\">..</span>\n<span class=\"mi\">00000060</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0100</span><span class=\"w\"> </span><span class=\"mi\">00</span><span class=\"n\">f9</span><span class=\"w\"> </span><span class=\"mi\">0500</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\">  </span><span class=\"bp\">................</span>\n<span class=\"mi\">00000070</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0500</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0400</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\">  </span><span class=\"bp\">................</span>\n<span class=\"mi\">00000080</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">496</span><span class=\"n\">e</span><span class=\"w\"> </span><span class=\"mi\">6974</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">2000</span><span class=\"w\"> </span><span class=\"mi\">0201</span><span class=\"w\">  </span><span class=\"n\">Init</span><span class=\"bp\">........</span><span class=\"w\"> </span><span class=\"bp\">...</span>\n<span class=\"mi\">00000090</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0100</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">6000</span><span class=\"w\"> </span><span class=\"n\">b58f</span><span class=\"w\"> </span><span class=\"n\">da31</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\">  </span><span class=\"bp\">........`....</span><span class=\"m\">1</span><span class=\"bp\">..</span>\n<span class=\"bp\">&gt;</span><span class=\"w\"> </span><span class=\"n\">xxd</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">olean</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">head</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"mi\">10</span>\n<span class=\"mi\">00000000</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">6</span><span class=\"n\">f6c</span><span class=\"w\"> </span><span class=\"mi\">6561</span><span class=\"w\"> </span><span class=\"mi\">6</span><span class=\"n\">e02</span><span class=\"w\"> </span><span class=\"mi\">0134</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"n\">e32</span><span class=\"w\"> </span><span class=\"mi\">312</span><span class=\"n\">e</span><span class=\"w\"> </span><span class=\"mi\">302</span><span class=\"n\">d</span><span class=\"w\"> </span><span class=\"mi\">7263</span><span class=\"w\">  </span><span class=\"n\">olean</span><span class=\"bp\">..</span><span class=\"m\">4</span><span class=\"bp\">.</span><span class=\"m\">21</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">-</span><span class=\"n\">rc</span>\n<span class=\"mi\">00000010</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">3300</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\">  </span><span class=\"mf\">3.</span><span class=\"bp\">..............</span>\n<span class=\"mi\">00000020</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">3637</span><span class=\"w\"> </span><span class=\"mi\">3431</span><span class=\"w\"> </span><span class=\"mi\">3434</span><span class=\"w\"> </span><span class=\"mi\">3461</span><span class=\"w\">  </span><span class=\"bp\">........</span><span class=\"m\">6741444</span><span class=\"n\">a</span>\n<span class=\"mi\">00000030</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">3633</span><span class=\"w\"> </span><span class=\"mi\">6565</span><span class=\"w\"> </span><span class=\"mi\">6332</span><span class=\"w\"> </span><span class=\"mi\">3533</span><span class=\"w\"> </span><span class=\"mi\">6137</span><span class=\"w\"> </span><span class=\"mi\">6561</span><span class=\"w\"> </span><span class=\"mi\">6537</span><span class=\"w\"> </span><span class=\"mi\">6138</span><span class=\"w\">  </span><span class=\"mi\">63</span><span class=\"n\">eec253a7eae7a8</span>\n<span class=\"mi\">00000040</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">3366</span><span class=\"w\"> </span><span class=\"mi\">3162</span><span class=\"w\"> </span><span class=\"mi\">6562</span><span class=\"w\"> </span><span class=\"mi\">3364</span><span class=\"w\"> </span><span class=\"mi\">6530</span><span class=\"w\"> </span><span class=\"mi\">3135</span><span class=\"w\"> </span><span class=\"mi\">3032</span><span class=\"w\"> </span><span class=\"mi\">3364</span><span class=\"w\">  </span><span class=\"mi\">3</span><span class=\"n\">f1beb3de015023d</span>\n<span class=\"mi\">00000050</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"n\">a102</span><span class=\"w\"> </span><span class=\"mi\">490</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">40</span><span class=\"n\">c2</span><span class=\"w\"> </span><span class=\"n\">aa02</span><span class=\"w\"> </span><span class=\"mi\">490</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\">  </span><span class=\"bp\">....</span><span class=\"n\">I</span><span class=\"bp\">...@...</span><span class=\"n\">I</span><span class=\"bp\">...</span>\n<span class=\"mi\">00000060</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0100</span><span class=\"w\"> </span><span class=\"mi\">00</span><span class=\"n\">f9</span><span class=\"w\"> </span><span class=\"mi\">0500</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\">  </span><span class=\"bp\">................</span>\n<span class=\"mi\">00000070</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0500</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0400</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\">  </span><span class=\"bp\">................</span>\n<span class=\"mi\">00000080</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">496</span><span class=\"n\">e</span><span class=\"w\"> </span><span class=\"mi\">6974</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">2000</span><span class=\"w\"> </span><span class=\"mi\">0201</span><span class=\"w\">  </span><span class=\"n\">Init</span><span class=\"bp\">........</span><span class=\"w\"> </span><span class=\"bp\">...</span>\n<span class=\"mi\">00000090</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0100</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\"> </span><span class=\"mi\">6000</span><span class=\"w\"> </span><span class=\"n\">a102</span><span class=\"w\"> </span><span class=\"mi\">490</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"mi\">0000</span><span class=\"w\">  </span><span class=\"bp\">........`...</span><span class=\"n\">I</span><span class=\"bp\">...</span>\n</code></pre></div>",
        "id": 526290055,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1751225685
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">find</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">grep</span><span class=\"w\"> </span><span class=\"n\">Export</span><span class=\"bp\">.</span><span class=\"n\">lean</span>\n<span class=\"bp\">./</span><span class=\"n\">newfolder</span><span class=\"bp\">/</span><span class=\"n\">lean4export</span><span class=\"bp\">/</span><span class=\"n\">Export</span><span class=\"bp\">.</span><span class=\"n\">lean</span>\n<span class=\"bp\">./</span><span class=\"n\">lean4export</span><span class=\"bp\">/</span><span class=\"n\">Export</span><span class=\"bp\">.</span><span class=\"n\">lean</span>\n</code></pre></div>\n<p>Yes my project is in newfolder, yes, I've updated the lean4export in the root directory. no I don't have an idea why I've cloned the repository twice.</p>\n<p>Well sorry for wasting your time for my stupidity. But at least I can now try to fiddle with nanoda.</p>",
        "id": 526290075,
        "sender_full_name": "metakuntyyy",
        "timestamp": 1751225705
    },
    {
        "content": "<p>Good riddance.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">newfolder</span><span class=\"o\">]</span><span class=\"bp\">$</span><span class=\"w\"> </span><span class=\"n\">rm</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"n\">lean4export</span><span class=\"bp\">/</span>\n</code></pre></div>",
        "id": 526290137,
        "sender_full_name": "metakuntyyy",
        "timestamp": 1751225763
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"228466\">Chris Bailey</span> <a href=\"#narrow/channel/270676-lean4/topic/Explanation.20of.20olean.20files/near/526286020\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"725717\">metakuntyyy</span> <a href=\"#narrow/channel/270676-lean4/topic/Explanation.20of.20olean.20files/near/526284193\">said</a>:</p>\n<blockquote>\n<p>Yeah, but I don't want to use rust to talk to lean, I just want to use the data structures in nanoda_lib</p>\n</blockquote>\n<p>Echoing what Mario said, it was intended to be a library with an included binary, but for various reasons its usefulness as a library is questionable. Get in touch with some information about what you intend to do and I'll give you a best guess as to whether it's reasonable to do by importing it as a library.</p>\n</blockquote>\n<p>Now that I have exported my project and received a 500MB dump, all I want to do is find the declaration in my .lean file</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Algebra</span><span class=\"bp\">.</span><span class=\"n\">Order</span><span class=\"bp\">.</span><span class=\"n\">Ring</span><span class=\"bp\">.</span><span class=\"n\">Star</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Analysis</span><span class=\"bp\">.</span><span class=\"n\">Normed</span><span class=\"bp\">.</span><span class=\"n\">Ring</span><span class=\"bp\">.</span><span class=\"n\">Lemmas</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Data</span><span class=\"bp\">.</span><span class=\"n\">Int</span><span class=\"bp\">.</span><span class=\"n\">Star</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">RingTheory</span><span class=\"bp\">.</span><span class=\"n\">RootsOfUnity</span><span class=\"bp\">.</span><span class=\"n\">PrimitiveRoots</span>\n\n\n<span class=\"sd\">/-- Equivalence of coprime powers of primitive roots. -/</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">equiv_primitiveRoots_of_coprimePow</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">e</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">CommRing</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">IsDomain</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">][</span><span class=\"n\">NeZero</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"o\">](</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">e</span><span class=\"bp\">.</span><span class=\"n\">Coprime</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"o\">)</span><span class=\"w\">  </span><span class=\"o\">:</span>\n</code></pre></div>\n<p>If I manage to find <strong>  equiv_primitiveRoots_of_coprimePow  </strong> in the dump I am happy for now. After that I'll tinker a little bit and see what's possible with nanoda.</p>",
        "id": 526290483,
        "sender_full_name": "metakuntyyy",
        "timestamp": 1751226078
    },
    {
        "content": "<p>I know it's in the dump</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">cat</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">tmp</span><span class=\"bp\">/</span><span class=\"n\">Primroots</span><span class=\"bp\">.</span><span class=\"n\">txt</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">grep</span><span class=\"w\"> </span><span class=\"n\">equiv_primitiveRoots_of_coprimePow</span>\n<span class=\"mi\">724031</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"n\">NS</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"n\">equiv_primitiveRoots_of_coprimePow</span>\n</code></pre></div>\n<p>So I'm excited to play with it a bit.</p>",
        "id": 526290560,
        "sender_full_name": "metakuntyyy",
        "timestamp": 1751226151
    },
    {
        "content": "<p>that's actually just the declaration of the name. You should be able to find the definition if you look for a <code>#DEF 724031</code></p>",
        "id": 526290880,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1751226494
    },
    {
        "content": "<p>in fact, I wouldn't be surprised if it's the last line in the file</p>",
        "id": 526290914,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1751226540
    },
    {
        "content": "<p>It works, I get this on a grep</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">cat</span><span class=\"w\"> </span><span class=\"n\">Primroots</span><span class=\"bp\">.</span><span class=\"n\">txt</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">grep</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"w\"> </span><span class=\"mi\">724031</span><span class=\"w\"> </span><span class=\"bp\">'</span>\n<span class=\"mi\">724032</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"n\">NS</span><span class=\"w\"> </span><span class=\"mi\">724031</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"n\">proof_4</span>\n<span class=\"mi\">724039</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"n\">NS</span><span class=\"w\"> </span><span class=\"mi\">724031</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"n\">proof_5</span>\n<span class=\"mi\">724053</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"n\">NS</span><span class=\"w\"> </span><span class=\"mi\">724031</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"n\">proof_1</span>\n<span class=\"mi\">724054</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"n\">NS</span><span class=\"w\"> </span><span class=\"mi\">724031</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"n\">proof_6</span>\n<span class=\"mi\">724063</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"n\">NS</span><span class=\"w\"> </span><span class=\"mi\">724031</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"n\">proof_7</span>\n<span class=\"mi\">724068</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"n\">NS</span><span class=\"w\"> </span><span class=\"mi\">724031</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"n\">proof_8</span>\n<span class=\"mi\">724071</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"n\">NS</span><span class=\"w\"> </span><span class=\"mi\">724031</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"n\">proof_2</span>\n<span class=\"mi\">724072</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"n\">NS</span><span class=\"w\"> </span><span class=\"mi\">724031</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"n\">proof_9</span>\n<span class=\"mi\">724075</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"n\">NS</span><span class=\"w\"> </span><span class=\"mi\">724031</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"n\">proof_3</span>\n<span class=\"mi\">724076</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"n\">NS</span><span class=\"w\"> </span><span class=\"mi\">724031</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"n\">proof_10</span>\n<span class=\"mi\">724077</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"n\">NS</span><span class=\"w\"> </span><span class=\"mi\">724031</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"n\">proof_11</span>\n<span class=\"bp\">#</span><span class=\"n\">DEF</span><span class=\"w\"> </span><span class=\"mi\">724031</span><span class=\"w\"> </span><span class=\"mi\">15844705</span><span class=\"w\"> </span><span class=\"mi\">15844824</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"mi\">31</span><span class=\"w\"> </span><span class=\"mi\">41</span>\n</code></pre></div>\n<p>This is the tail:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">tail</span><span class=\"w\"> </span><span class=\"n\">Primroots</span><span class=\"bp\">.</span><span class=\"n\">txt</span>\n<span class=\"mi\">17559576</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"n\">EA</span><span class=\"w\"> </span><span class=\"mi\">17559575</span><span class=\"w\"> </span><span class=\"mi\">2</span>\n<span class=\"mi\">17559577</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"n\">EA</span><span class=\"w\"> </span><span class=\"mi\">17559573</span><span class=\"w\"> </span><span class=\"mi\">17559576</span>\n<span class=\"mi\">17559578</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"n\">EA</span><span class=\"w\"> </span><span class=\"mi\">17559577</span><span class=\"w\"> </span><span class=\"mi\">2</span>\n<span class=\"mi\">17559579</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"n\">EP</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"n\">BC</span><span class=\"w\"> </span><span class=\"mi\">699992</span><span class=\"w\"> </span><span class=\"mi\">17300154</span><span class=\"w\"> </span><span class=\"mi\">17559578</span>\n<span class=\"mi\">17559580</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"n\">EP</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"n\">BI</span><span class=\"w\"> </span><span class=\"mi\">24</span><span class=\"w\"> </span><span class=\"mi\">97</span><span class=\"w\"> </span><span class=\"mi\">17559579</span>\n<span class=\"mi\">17559581</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"n\">EA</span><span class=\"w\"> </span><span class=\"mi\">2900</span><span class=\"w\"> </span><span class=\"mi\">17300155</span>\n<span class=\"mi\">17559582</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"n\">EA</span><span class=\"w\"> </span><span class=\"mi\">17559581</span><span class=\"w\"> </span><span class=\"mi\">17559576</span>\n<span class=\"mi\">17559583</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"n\">EL</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"n\">BC</span><span class=\"w\"> </span><span class=\"mi\">12</span><span class=\"w\"> </span><span class=\"mi\">17300154</span><span class=\"w\"> </span><span class=\"mi\">17559582</span>\n<span class=\"mi\">17559584</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"n\">EL</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"n\">BI</span><span class=\"w\"> </span><span class=\"mi\">24</span><span class=\"w\"> </span><span class=\"mi\">97</span><span class=\"w\"> </span><span class=\"mi\">17559583</span>\n<span class=\"bp\">#</span><span class=\"n\">THM</span><span class=\"w\"> </span><span class=\"mi\">806245</span><span class=\"w\"> </span><span class=\"mi\">17559580</span><span class=\"w\"> </span><span class=\"mi\">17559584</span><span class=\"w\"> </span><span class=\"mi\">41</span>\n</code></pre></div>\n<p>I have no idea what the _proof_* objects are supposed to mean. I think they are hidden constants added by the tactics to prove my theorem.</p>",
        "id": 526291107,
        "sender_full_name": "metakuntyyy",
        "timestamp": 1751226757
    },
    {
        "content": "<p><code>#NS</code> are just name declarations</p>",
        "id": 526291146,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1751226792
    },
    {
        "content": "<p>try using <code>#print equiv_primitiveRoots_of_coprimePow</code> and you will probably see those <code>proof_n</code> things</p>",
        "id": 526291183,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1751226828
    },
    {
        "content": "<p>they are abstracted proof parts of a definition</p>",
        "id": 526291203,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1751226849
    },
    {
        "content": "<p>the last thing proved is a theorem, probably the definitional equation for your definition</p>",
        "id": 526291258,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1751226915
    },
    {
        "content": "<p>How do I set the threshold again. set_option pp.threshold 0?</p>",
        "id": 526291271,
        "sender_full_name": "metakuntyyy",
        "timestamp": 1751226930
    },
    {
        "content": "<p>threshold of what</p>",
        "id": 526291282,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1751226941
    },
    {
        "content": "<p>To pretty print the proof</p>",
        "id": 526291293,
        "sender_full_name": "metakuntyyy",
        "timestamp": 1751226955
    },
    {
        "content": "<p>It is hidden :</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">equiv_primitiveRoots_of_coprimePow</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">u_1</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u_1</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"bp\">→</span>\n<span class=\"w\">  </span><span class=\"o\">{</span><span class=\"n\">e</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"bp\">→</span>\n<span class=\"w\">    </span><span class=\"o\">[</span><span class=\"n\">inst</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">CommRing</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"bp\">→</span>\n<span class=\"w\">      </span><span class=\"o\">[</span><span class=\"n\">inst_1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IsDomain</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"bp\">→</span>\n<span class=\"w\">        </span><span class=\"o\">[</span><span class=\"n\">NeZero</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">e</span><span class=\"bp\">.</span><span class=\"n\">Coprime</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">//</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">primitiveRoots</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"bp\">≃</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">//</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">primitiveRoots</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">R</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">e</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">CommRing</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">IsDomain</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">NeZero</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"bp\">↦</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">coprmGcdA</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">equiv_primitiveRoots_of_coprimePow</span><span class=\"bp\">._</span><span class=\"n\">proof_4</span><span class=\"bp\">;</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">de2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">⋯;</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">de</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">⋯;</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">hea</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">⋯;</span>\n<span class=\"w\">  </span><span class=\"o\">{</span><span class=\"w\"> </span><span class=\"n\">toFun</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">μh</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"bp\">⟨↑</span><span class=\"n\">μh</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"n\">e</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">⋯⟩</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">invFun</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">νh</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"bp\">⟨↑</span><span class=\"n\">νh</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"bp\">↑</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">e</span><span class=\"bp\">.</span><span class=\"n\">gcdA</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">e</span><span class=\"bp\">.</span><span class=\"n\">gcdA</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">toNat</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">⋯⟩</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">left_inv</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">⋯</span><span class=\"o\">,</span>\n<span class=\"w\">    </span><span class=\"n\">right_inv</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">⋯</span><span class=\"w\"> </span><span class=\"o\">}</span>\n</code></pre></div>",
        "id": 526291315,
        "sender_full_name": "metakuntyyy",
        "timestamp": 1751226973
    },
    {
        "content": "<p><code>set_option pp.proofs true</code></p>",
        "id": 526291319,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1751226977
    },
    {
        "content": "<p>each of those is probably a proof_n</p>",
        "id": 526291333,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1751226995
    },
    {
        "content": "<p>Yes, indeed</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">equiv_primitiveRoots_of_coprimePow</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">u_1</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u_1</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"bp\">→</span>\n<span class=\"w\">  </span><span class=\"o\">{</span><span class=\"n\">e</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"bp\">→</span>\n<span class=\"w\">    </span><span class=\"o\">[</span><span class=\"n\">inst</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">CommRing</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"bp\">→</span>\n<span class=\"w\">      </span><span class=\"o\">[</span><span class=\"n\">inst_1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IsDomain</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"bp\">→</span>\n<span class=\"w\">        </span><span class=\"o\">[</span><span class=\"n\">NeZero</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">e</span><span class=\"bp\">.</span><span class=\"n\">Coprime</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">//</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">primitiveRoots</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"bp\">≃</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">//</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">primitiveRoots</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">R</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">e</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">CommRing</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">IsDomain</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">NeZero</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"bp\">↦</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">coprmGcdA</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">equiv_primitiveRoots_of_coprimePow</span><span class=\"bp\">._</span><span class=\"n\">proof_4</span><span class=\"bp\">;</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">de2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">equiv_primitiveRoots_of_coprimePow</span><span class=\"bp\">._</span><span class=\"n\">proof_5</span><span class=\"bp\">;</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">de</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">equiv_primitiveRoots_of_coprimePow</span><span class=\"bp\">._</span><span class=\"n\">proof_6</span><span class=\"bp\">;</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">hea</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">equiv_primitiveRoots_of_coprimePow</span><span class=\"bp\">._</span><span class=\"n\">proof_7</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"n\">de</span><span class=\"bp\">;</span>\n<span class=\"w\">  </span><span class=\"o\">{</span><span class=\"w\"> </span><span class=\"n\">toFun</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">μh</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"bp\">⟨↑</span><span class=\"n\">μh</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"n\">e</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">equiv_primitiveRoots_of_coprimePow</span><span class=\"bp\">._</span><span class=\"n\">proof_8</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"n\">μh</span><span class=\"bp\">⟩</span><span class=\"o\">,</span>\n<span class=\"w\">    </span><span class=\"n\">invFun</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">νh</span><span class=\"w\"> </span><span class=\"bp\">↦</span>\n<span class=\"w\">      </span><span class=\"bp\">⟨↑</span><span class=\"n\">νh</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"bp\">↑</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">e</span><span class=\"bp\">.</span><span class=\"n\">gcdA</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">e</span><span class=\"bp\">.</span><span class=\"n\">gcdA</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">toNat</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">equiv_primitiveRoots_of_coprimePow</span><span class=\"bp\">._</span><span class=\"n\">proof_9</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"n\">coprmGcdA</span><span class=\"w\"> </span><span class=\"n\">de</span><span class=\"w\"> </span><span class=\"n\">νh</span><span class=\"bp\">⟩</span><span class=\"o\">,</span>\n<span class=\"w\">    </span><span class=\"n\">left_inv</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">equiv_primitiveRoots_of_coprimePow</span><span class=\"bp\">._</span><span class=\"n\">proof_10</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"n\">coprmGcdA</span><span class=\"w\"> </span><span class=\"n\">de</span><span class=\"w\"> </span><span class=\"n\">hea</span><span class=\"o\">,</span>\n<span class=\"w\">    </span><span class=\"n\">right_inv</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">equiv_primitiveRoots_of_coprimePow</span><span class=\"bp\">._</span><span class=\"n\">proof_11</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"n\">coprmGcdA</span><span class=\"w\"> </span><span class=\"n\">de</span><span class=\"w\"> </span><span class=\"n\">hea</span><span class=\"w\"> </span><span class=\"o\">}</span>\n</code></pre></div>",
        "id": 526291340,
        "sender_full_name": "metakuntyyy",
        "timestamp": 1751227009
    },
    {
        "content": "<p>So what does generate the _proof_* declarations. Does any have statement that has multiple usages create one?</p>",
        "id": 526291393,
        "sender_full_name": "metakuntyyy",
        "timestamp": 1751227084
    },
    {
        "content": "<p>any usage of a proof inside a def</p>",
        "id": 526291408,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1751227107
    },
    {
        "content": "<p>Sometimes it doesn't generate the <code>._proof_n</code>, if your proof is <del>too short</del> satisfies some criteria I have not yet decoded</p>",
        "id": 526291553,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1751227255
    },
    {
        "content": "<p>you don't want it to get into a loop of extraction, so at least constant applications have to be excluded</p>",
        "id": 526291609,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1751227301
    },
    {
        "content": "<p>but on the whole it seems pretty aggressive about it</p>",
        "id": 526291627,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1751227327
    },
    {
        "content": "<p>And inside a theorem? Running</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">#</span><span class=\"n\">print</span><span class=\"w\"> </span><span class=\"n\">IsPrimitiveRoot</span><span class=\"bp\">.</span><span class=\"n\">coe_submonoidClass_iff</span>\n</code></pre></div>\n<p>Gives</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">IsPrimitiveRoot</span><span class=\"bp\">.</span><span class=\"n\">coe_submonoidClass_iff</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">u_7</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">u_8</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u_7</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u_8</span><span class=\"o\">}</span>\n<span class=\"w\">  </span><span class=\"o\">[</span><span class=\"n\">inst</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">CommMonoid</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">inst_1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">SetLike</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">inst_2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">SubmonoidClass</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">N</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">ζ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">↥</span><span class=\"n\">N</span><span class=\"o\">},</span>\n<span class=\"w\">  </span><span class=\"n\">IsPrimitiveRoot</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">↑</span><span class=\"n\">ζ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"bp\">↔</span><span class=\"w\"> </span><span class=\"n\">IsPrimitiveRoot</span><span class=\"w\"> </span><span class=\"n\">ζ</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">k</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">M</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">B</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">CommMonoid</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">SetLike</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">SubmonoidClass</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">N</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">ζ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"bp\">↦</span>\n<span class=\"w\">  </span><span class=\"n\">Eq</span><span class=\"bp\">.</span><span class=\"n\">mpr</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">id</span>\n<span class=\"w\">      </span><span class=\"o\">(</span><span class=\"n\">congr</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">congrArg</span><span class=\"w\"> </span><span class=\"n\">Iff</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">IsPrimitiveRoot</span><span class=\"bp\">.</span><span class=\"n\">coe_submonoidClass_iff</span><span class=\"bp\">._</span><span class=\"n\">proof_1_1</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">↑</span><span class=\"n\">ζ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"o\">))</span>\n<span class=\"w\">        </span><span class=\"o\">(</span><span class=\"n\">IsPrimitiveRoot</span><span class=\"bp\">.</span><span class=\"n\">coe_submonoidClass_iff</span><span class=\"bp\">._</span><span class=\"n\">proof_1_1</span><span class=\"w\"> </span><span class=\"n\">ζ</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"o\">)))</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">Eq</span><span class=\"bp\">.</span><span class=\"n\">mpr</span>\n<span class=\"w\">      </span><span class=\"o\">(</span><span class=\"n\">id</span>\n<span class=\"w\">        </span><span class=\"o\">(</span><span class=\"n\">congrArg</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">↔</span><span class=\"w\"> </span><span class=\"n\">ζ</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">l</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">ζ</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"n\">l</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"bp\">∣</span><span class=\"w\"> </span><span class=\"n\">l</span><span class=\"o\">)</span>\n<span class=\"w\">          </span><span class=\"o\">(</span><span class=\"n\">congr</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">congrArg</span><span class=\"w\"> </span><span class=\"n\">And</span><span class=\"w\"> </span><span class=\"n\">OneMemClass</span><span class=\"bp\">.</span><span class=\"n\">coe_eq_one</span><span class=\"bp\">._</span><span class=\"n\">proof_3</span><span class=\"o\">)</span>\n<span class=\"w\">            </span><span class=\"o\">(</span><span class=\"n\">forall_congr</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">l</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"n\">implies_congr</span><span class=\"w\"> </span><span class=\"n\">OneMemClass</span><span class=\"bp\">.</span><span class=\"n\">coe_eq_one</span><span class=\"bp\">._</span><span class=\"n\">proof_3</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Eq</span><span class=\"bp\">.</span><span class=\"n\">refl</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"bp\">∣</span><span class=\"w\"> </span><span class=\"n\">l</span><span class=\"o\">))))))</span>\n<span class=\"w\">      </span><span class=\"n\">Iff</span><span class=\"bp\">.</span><span class=\"n\">rfl</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 526291633,
        "sender_full_name": "metakuntyyy",
        "timestamp": 1751227331
    },
    {
        "content": "<p>Well if it's inside a <code>theorem</code> then it's not inside a <code>def</code></p>",
        "id": 526291649,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1751227359
    },
    {
        "content": "<p>no I think that was a tactic that decided to do it</p>",
        "id": 526291657,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1751227373
    },
    {
        "content": "<p>Why is it <code>_1_1</code>?</p>",
        "id": 526291688,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1751227404
    },
    {
        "content": "<p>probably extracted from within proof_1?</p>",
        "id": 526291708,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1751227428
    },
    {
        "content": "<p>I always had trouble understanding what those were as I couldn't click them in the infoview. But it's good to poke a little bit deeper into the system.</p>\n<p>So those auxiliary constants are created by tactics and to satisfy loop extraction?</p>",
        "id": 526291721,
        "sender_full_name": "metakuntyyy",
        "timestamp": 1751227446
    },
    {
        "content": "<p>you should be able to click them</p>",
        "id": 526291734,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1751227461
    },
    {
        "content": "<p>you can certainly <code>#print</code> them</p>",
        "id": 526291743,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1751227471
    },
    {
        "content": "<p>it's just to decrease the amount of stuff e.g. the compiler has to look through when compiling constants</p>",
        "id": 526291780,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1751227506
    },
    {
        "content": "<p>I can hover over them, I can't click them. I can print them but I remember there was one issue where I couldn't even find the constant. I don't remember which tactic generated them but it might have been grind.</p>",
        "id": 526291802,
        "sender_full_name": "metakuntyyy",
        "timestamp": 1751227531
    },
    {
        "content": "<p>Would this be a bug worth reporting? If so I could try to find and reproduce it.</p>",
        "id": 526291842,
        "sender_full_name": "metakuntyyy",
        "timestamp": 1751227569
    },
    {
        "content": "<p><code>coe_submonoidClass_iff._proof_1_1</code> is created by <code>simp</code>, it pre-applies <code>propext</code> to the user lemma <code>iff_def</code> in the call</p>",
        "id": 526292042,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1751227755
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110049\">Mario Carneiro</span> <a href=\"#narrow/channel/270676-lean4/topic/Explanation.20of.20olean.20files/near/526290055\">said</a>:</p>\n<blockquote>\n<p>Why are the distributed olean files reporting a pre-release version, and why is this not causing a version mismatch?</p>\n</blockquote>\n<p>Ah, that doesn't look right. But only the githash is relevant for the compatibility check.</p>",
        "id": 526293858,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1751229412
    }
]