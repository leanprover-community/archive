[
    {
        "content": "<p>When running <code>lake update</code>, I noticed that Lake currently runs post-update hooks for all dependencies unconditionally, even when the dependency revision has not changed.<br>\nThis is somewhat costly for mathlib, whose post-update hook decompresses ~7,800 files on every run, making <code>lake update</code> noticeably slower in cases where nothing actually updates.<br>\nIâ€™m wondering whether it might make sense to have a way to skip post-update hooks (e.g. a <code>--no-hooks</code> flag), or some mechanism to avoid running them when the dependency hash is unchanged (possibly just for mathlib)</p>",
        "id": 567330215,
        "sender_full_name": "Marcello Paris",
        "timestamp": 1768061438
    },
    {
        "content": "<p>Are you running <code>lake update</code> often? Usually this is best handled by CI, e.g. via the <code>lean-update-action</code>.</p>",
        "id": 570230782,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1769486259
    },
    {
        "content": "<p>That's a fair point, I think I've been overcomplicating my workflow. I'm using Mathlib in an application, so I rebuild frequently, but I'm not actually relying on new features, so there's no real reason to track HEAD. Pinning to a specific commit and updating deliberately makes more sense. Thanks</p>",
        "id": 570245180,
        "sender_full_name": "Marcello Paris",
        "timestamp": 1769496875
    }
]