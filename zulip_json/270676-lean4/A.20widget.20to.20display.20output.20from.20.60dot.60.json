[
    {
        "content": "<p>I just wrote some lean code which can turn a (finite, decidable) simple graph into a format that dot can handle. Is there a way that can render this in the infoview? Alternatively, is there a way we can render graphs in some other way, maybe using d3.js?</p>",
        "id": 446350993,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1719104894
    },
    {
        "content": "<p>The <a href=\"https://github.com/leanprover-community/ProofWidgets4/blob/main/widget/src/rbTree.tsx\">RB tree demo</a> in <code>ProofWidgets</code> uses <code>d3-tree</code> to render a red-black tree in the infoview (the corresponding Lean file is <a href=\"https://github.com/leanprover-community/ProofWidgets4/blob/main/ProofWidgets/Demos/RbTree.lean\">here</a>).</p>\n<p>Widgets can take in JSON-encodable data on the Lean side and then process and render them on the TypeScript/JavaScript side.</p>",
        "id": 446397002,
        "sender_full_name": "Anand Rao Tadipatri",
        "timestamp": 1719135376
    },
    {
        "content": "<p>Oh that's embarrassing, I'd already seen that one. Thanks for the reminder!!</p>",
        "id": 446397025,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1719135421
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"427067\">@Katja BerÄiÄ</span> was rendering graphs in the infoview in her talk in Bonn last week</p>",
        "id": 446413233,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1719144858
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"246273\">@Bhavik Mehta</span> there is a draft PR open in the proofwidgets repo that renders graphs with d3-graphviz</p>",
        "id": 446413897,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1719145367
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/ProofWidgets4/pull/60\">https://github.com/leanprover-community/ProofWidgets4/pull/60</a> to save other people from searching</p>",
        "id": 446414005,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1719145448
    },
    {
        "content": "<p>I wrote it with the intention of showing dependencies between lean decls, but the graph widget itself takes a dot file as a string as input</p>",
        "id": 446414116,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1719145532
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/stream/270676-lean4/topic/A.20widget.20to.20display.20output.20from.20.60dot.60/near/446413233\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"427067\">Katja BerÄiÄ</span> was rendering graphs in the infoview in her talk in Bonn last week</p>\n</blockquote>\n<p><span class=\"user-mention\" data-user-id=\"439334\">@Jure Taslak</span> implemented the graph rendering in the infoview, in case that helps.</p>",
        "id": 446568189,
        "sender_full_name": "Katja BerÄiÄ",
        "timestamp": 1719222809
    },
    {
        "content": "<p>I'm struggling to work out the current status of this. <br>\nI have a string which corresponds to a valid dot-file. Is there currently an easy way I can display this in the infoview?</p>",
        "id": 476062096,
        "sender_full_name": "Joseph Tooby-Smith",
        "timestamp": 1728545498
    },
    {
        "content": "<p>As far as I know, <span class=\"user-mention\" data-user-id=\"653351\">@Joseph Tooby-Smith</span> the PR is still open in the proofwidgets repo, so you would have to use the branch of that PR if you want to play around with this. That same branch has a demo illustrating usage. For unrelated reasons I am now also interested in getting some variant of this PR merged, if at all possible. <span class=\"user-mention\" data-user-id=\"128280\">@Wojciech Nawrocki</span> what do you think?</p>",
        "id": 476199602,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1728585690
    },
    {
        "content": "<p>Ah, my apologies, I totally forgot about this. I will make it a priority to merge this.</p>",
        "id": 476223659,
        "sender_full_name": "ğš ğš˜ğš“ğšŒğš’ğšğšŒğš‘ ğš—ğšŠğš ğš›ğš˜ğšŒğš”ğš’",
        "timestamp": 1728593913
    },
    {
        "content": "<p>Hi everyone, I just added a very customizable (and possibly somewhat overengineered) <code>DigraphDisplay</code> component <a href=\"https://github.com/leanprover-community/ProofWidgets4/pull/82\">here</a>. It will be available in ProofWidgets <code>v0.0.44</code>. For example <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>K</mi><mn>10</mn></msub></mrow><annotation encoding=\"application/x-tex\">K_{10}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">K</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> with one choice of layout looks like <a href=\"https://github.com/user-attachments/assets/d5d2b5a4-7cf0-4add-a023-fafb3a426275\">this</a>.</p>\n<p>The component does <em>not</em> support <code>dot</code>: you just pass it an array of vertices and edges instead, and layout is computed with a force simulation from d3.js. I have found that <code>d3-graphviz</code> looks quite out of place in the infoview: it does not fit, and does not dynamically adapt to the available space. If there is a strong need to support <code>dot</code> descriptions, we could revisit this choice.</p>",
        "id": 477858554,
        "sender_full_name": "ğš ğš˜ğš“ğšŒğš’ğšğšŒğš‘ ğš—ğšŠğš ğš›ğš˜ğšŒğš”ğš’",
        "timestamp": 1729392122
    },
    {
        "content": "<p>This is now in mathlib, and you can also <a href=\"https://live.lean-lang.org/#url=https%3A%2F%2Fraw.githubusercontent.com%2Fleanprover-community%2FProofWidgets4%2Frefs%2Fheads%2Fmain%2FProofWidgets%2FDemos%2FGraph.lean\">try it out in the web editor</a> :)</p>",
        "id": 480545011,
        "sender_full_name": "ğš ğš˜ğš“ğšŒğš’ğšğšŒğš‘ ğš—ğšŠğš ğš›ğš˜ğšŒğš”ğš’",
        "timestamp": 1730763021
    },
    {
        "content": "<p>Does anyone see the node labels in the web editor? I donâ€™t see them.</p>",
        "id": 481139975,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1730991822
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110031\">Patrick Massot</span> <a href=\"#narrow/channel/270676-lean4/topic/A.20widget.20to.20display.20output.20from.20.60dot.60/near/481139975\">said</a>:</p>\n<blockquote>\n<p>Does anyone see the node labels in the web editor? I donâ€™t see them.</p>\n</blockquote>\n<p>That's because <del>none</del> most of the nodes in the examples don't have label text! The 'labels' are just the circles. You can add text labels if you like, though.</p>",
        "id": 481182786,
        "sender_full_name": "ğš ğš˜ğš“ğšŒğš’ğšğšŒğš‘ ğš—ğšŠğš ğš›ğš˜ğšŒğš”ğš’",
        "timestamp": 1731006272
    },
    {
        "content": "<p>Then where is the <code>xyz</code> from line 58 meant to show up for instance?</p>",
        "id": 481183719,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1731006657
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110031\">Patrick Massot</span> <a href=\"#narrow/channel/270676-lean4/topic/A.20widget.20to.20display.20output.20from.20.60dot.60/near/481183719\">said</a>:</p>\n<blockquote>\n<p>Then where is the <code>xyz</code> from line 58 meant to show up for instance?</p>\n</blockquote>\n<p>Oh sorry, I forgot about that one. That <em>should</em> have label text, and it's not showing up because the web editor infoview is not up to date. It works in VSCode.</p>",
        "id": 481185176,
        "sender_full_name": "ğš ğš˜ğš“ğšŒğš’ğšğšŒğš‘ ğš—ğšŠğš ğš›ğš˜ğšŒğš”ğš’",
        "timestamp": 1731007230
    },
    {
        "content": "<p>I can confirm it works for me in VSCode!</p>",
        "id": 481347411,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1731083189
    },
    {
        "content": "<p>Would you have an example for more â€œrigidâ€ graphs, like a commutative diagram, or printing an <code>Expr</code> as a tree?</p>",
        "id": 481347514,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1731083234
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110031\">Patrick Massot</span> <a href=\"#narrow/channel/270676-lean4/topic/A.20widget.20to.20display.20output.20from.20.60dot.60/near/481347514\">said</a>:</p>\n<blockquote>\n<p>Would you have an example for more â€œrigidâ€ graphs, like a commutative diagram, or printing an <code>Expr</code> as a tree?</p>\n</blockquote>\n<p>Not quite an <code>Expr</code>-tree, but <span class=\"user-mention\" data-user-id=\"243562\">@Adam Topaz</span> wrote one for all the constants appearing in a term: <a href=\"https://live.lean-lang.org/#url=https%3A%2F%2Fraw.githubusercontent.com%2Fleanprover-community%2FProofWidgets4%2Frefs%2Fheads%2Fmain%2FProofWidgets%2FDemos%2FExprGraph.lean\">demo</a>.</p>",
        "id": 481354319,
        "sender_full_name": "ğš ğš˜ğš“ğšŒğš’ğšğšŒğš‘ ğš—ğšŠğš ğš›ğš˜ğšŒğš”ğš’",
        "timestamp": 1731085665
    },
    {
        "content": "<p>And I have commutative diagrams locally. They look a bit funny so that we can squeeze them into the available space: <a href=\"/user_uploads/3121/ZQvZW6CojNRXsFemnM_URbOp/Screenshot-2024-11-08-at-12.08.12PM.png\">Screenshot 2024-11-08 at 12.08.12â€¯PM.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/ZQvZW6CojNRXsFemnM_URbOp/Screenshot-2024-11-08-at-12.08.12PM.png\" title=\"Screenshot 2024-11-08 at 12.08.12â€¯PM.png\"><img data-original-dimensions=\"1314x1372\" src=\"/user_uploads/thumbnail/3121/ZQvZW6CojNRXsFemnM_URbOp/Screenshot-2024-11-08-at-12.08.12PM.png/840x560.webp\"></a></div>",
        "id": 481354506,
        "sender_full_name": "ğš ğš˜ğš“ğšŒğš’ğšğšŒğš‘ ğš—ğšŠğš ğš›ğš˜ğšŒğš”ğš’",
        "timestamp": 1731085722
    },
    {
        "content": "<p>The original demo I wrote in that old proofwidgets PR allowed you to click on nodes to display additional info. Is that feature still available with your new approach <span class=\"user-mention\" data-user-id=\"128280\">@Wojciech Nawrocki</span> ?</p>",
        "id": 481354652,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1731085790
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"243562\">Adam Topaz</span> <a href=\"#narrow/channel/270676-lean4/topic/A.20widget.20to.20display.20output.20from.20.60dot.60/near/481354652\">said</a>:</p>\n<blockquote>\n<p>The original demo I wrote in that old proofwidgets PR allowed you to click on nodes to display additional info. Is that feature still available with your new approach <span class=\"user-mention silent\" data-user-id=\"128280\">Wojciech Nawrocki</span> ?</p>\n</blockquote>\n<p>Ah, yes, I forgot to set that option. You need to add <code>showDetails={true}</code> to the <code>GraphDisplay</code> props. It's a bit broken in the web editor, but works in VSCode.</p>",
        "id": 481354886,
        "sender_full_name": "ğš ğš˜ğš“ğšŒğš’ğšğšŒğš‘ ğš—ğšŠğš ğš›ğš˜ğšŒğš”ğš’",
        "timestamp": 1731085879
    }
]