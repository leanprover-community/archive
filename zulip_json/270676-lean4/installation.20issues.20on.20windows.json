[
    {
        "content": "<p>I'm helping someone installing Lean on Windows:</p>\n<ul>\n<li>We've downloaded <code>mathematics_in_lean</code> and we're running into the error \"no such file or directory (error code 2)\".</li>\n<li>We've already deleted the Lean toolchain multiple times</li>\n<li>We've already disabled the antivirus scanner</li>\n<li>We've already deleted <code>mathematics_in_lean/.lake</code></li>\n<li>We've already ran <code>lake clean</code></li>\n</ul>\n<p>The problem persist.<br>\nAny further ideas?</p>\n<p>One potential issue: he had Lean 3 installed before, and we manually deleted the Lean 3 <code>~/.elan</code> directory at some point (the automatic installation instructions was unable to delete it, probably because a Lean 3 file was open at the same time).</p>",
        "id": 448662561,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1719941031
    },
    {
        "content": "<p>I don't suppose the error says <em>which</em> path it claims to not exist then?</p>",
        "id": 448663230,
        "sender_full_name": "Julian Berman",
        "timestamp": 1719941212
    },
    {
        "content": "<p>nope...</p>",
        "id": 448663339,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1719941240
    },
    {
        "content": "<p>when running it, it seems to correctly compile the ~10 files needed to run <code>Mathlib.Cache</code>.</p>",
        "id": 448663541,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1719941295
    },
    {
        "content": "<p>(I'm only brainstorming as I know not much about Lean's install and even less about Windows) -- what's the command you're running that produces the error then? Just opening it in VSCode? If you run lake build you get the same error I assume?</p>",
        "id": 448663575,
        "sender_full_name": "Julian Berman",
        "timestamp": 1719941305
    },
    {
        "content": "<p>Also, does the username look special at all? In particular does it have anything non-ASCII and/or have spaces in it?</p>",
        "id": 448663734,
        "sender_full_name": "Julian Berman",
        "timestamp": 1719941350
    },
    {
        "content": "<p><code>lake exe cache get!</code> via the terminal.</p>",
        "id": 448663782,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1719941361
    },
    {
        "content": "<p>I vaguely recall an earlier thread saying spaces in usernames on Windows was causing some issue.</p>",
        "id": 448663792,
        "sender_full_name": "Julian Berman",
        "timestamp": 1719941365
    },
    {
        "content": "<p>Username is normal, computer is German</p>",
        "id": 448663814,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1719941370
    },
    {
        "content": "<p>(we first tried to have the extension run set up <code>mathematics_in_lean</code>, and that seemed to succeed, but when opening a Lean file it started compiling everything, starting with <code>Batteries</code>.)</p>",
        "id": 448664027,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1719941417
    },
    {
        "content": "<p>There is no <code>.cache</code> subfolder in the user directory, which is surprising...</p>",
        "id": 448664272,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1719941490
    },
    {
        "content": "<p>(there is an <code>.elan</code> subfolder with the expected toolchains, which we tried to delete a couple of times, since that was an issue elsewhere sometimes)</p>",
        "id": 448664400,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1719941534
    },
    {
        "content": "<p>I think a first guess scanning through what cache does and comparing it to your list of things you tried is maybe it's something curl related?</p>",
        "id": 448664656,
        "sender_full_name": "Julian Berman",
        "timestamp": 1719941634
    },
    {
        "content": "<p>Can you find curl on the machine and/or can the user successfully execute it?</p>",
        "id": 448664730,
        "sender_full_name": "Julian Berman",
        "timestamp": 1719941648
    },
    {
        "content": "<p>Uninstalling/reinstalling elan itself may also be another random idea if you haven't already tried that.</p>",
        "id": 448665812,
        "sender_full_name": "Julian Berman",
        "timestamp": 1719942031
    },
    {
        "content": "<p>I think we used curl in the install script, but let me try that...</p>",
        "id": 448667853,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1719942627
    },
    {
        "content": "<p><code>curl --version</code> gives version 7.55.1, and running a single random curl command indeed works...</p>",
        "id": 448674210,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1719944288
    },
    {
        "content": "<p>We can try reinstalling elan, but Lean does successfully compile a few files, so that's unlikely to be it...</p>",
        "id": 448674279,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1719944311
    },
    {
        "content": "<p>In other threads it usually said that bin/leanc.exe was missing, can you check it's there? That would explain at least why it succeeded partially</p>",
        "id": 448680684,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1719946566
    },
    {
        "content": "<p>(if it makes sense to take a look at it in person tomorrow, that would be worth a bike detour...)</p>",
        "id": 448680832,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1719946644
    }
]