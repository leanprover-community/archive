[
    {
        "content": "<p>For some reason in Mathlib the symbol <code>φ</code> for the Euler totient function is notation scoped to <code>Nat</code>. This has the unpleasant effect that using this for a function variable name (as is common) gives an error. Just wanted to know why this choice, rather than say an <code>abbrev</code>.</p>",
        "id": 547642248,
        "sender_full_name": "Siddhartha Gadgil",
        "timestamp": 1761722117
    },
    {
        "content": "<p>A related question: <code>open scode Nat hiding ...</code> does not seem to be a valid command. Can one choose not to import notation?</p>",
        "id": 547643566,
        "sender_full_name": "Siddhartha Gadgil",
        "timestamp": 1761722859
    },
    {
        "content": "<p>An easy fix would be to have a more specific scope.</p>",
        "id": 547656647,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1761727601
    },
    {
        "content": "<p>Although I very much agree that having a way to remove notation would be great.</p>",
        "id": 547656703,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1761727622
    },
    {
        "content": "<p>I think we don't want the ability to remove stuff because it puts a burden on maintenance</p>",
        "id": 547656858,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761727672
    },
    {
        "content": "<p>Why is it different from allowing \"open blah hiding ...\"</p>",
        "id": 547657046,
        "sender_full_name": "Siddhartha Gadgil",
        "timestamp": 1761727735
    },
    {
        "content": "<p>This is also a pain point for CSlib, this exact case and other notations.</p>",
        "id": 547801817,
        "sender_full_name": "Chris Henson",
        "timestamp": 1761768040
    },
    {
        "content": "<p>what notations do you have in cslib</p>",
        "id": 547802257,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761768197
    },
    {
        "content": "<p>Another pain point is that we can't conveniently use notation for <code>Real.pi</code> if we also <code>open Nat</code> because of the notation for the prime counting function.</p>",
        "id": 547803316,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1761768647
    },
    {
        "content": "<p>we should have a version of <code>open</code> that doesn't do <code>open scope</code></p>",
        "id": 547803503,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761768716
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110064\">Kenny Lau</span> <a href=\"#narrow/channel/270676-lean4/topic/Why.20.22scoped.20notation.22.20for.20Euler's.20totient.20function.3F/near/547802257\">said</a>:</p>\n<blockquote>\n<p>what notations do you have in cslib</p>\n</blockquote>\n<p>IIRC the conflicts are with ZMOD and Finsupp notation. We have just added testing that makes it required to transitively import <code>Mathlib.Init</code> which discourages future conflicts, but it would still be nice to have control over removing notations in downstream projects.</p>",
        "id": 547804525,
        "sender_full_name": "Chris Henson",
        "timestamp": 1761769111
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Lean</span>\n\n<span class=\"kn\">namespace</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">Elab</span><span class=\"bp\">.</span><span class=\"n\">Command</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Scope</span><span class=\"bp\">.</span><span class=\"n\">justOpen</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ns</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Name</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">oldScope</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Scope</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Scope</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"o\">{</span><span class=\"w\"> </span><span class=\"n\">oldScope</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"n\">openDecls</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">simple</span><span class=\"w\"> </span><span class=\"n\">ns</span><span class=\"w\"> </span><span class=\"o\">[]</span><span class=\"w\"> </span><span class=\"bp\">::</span><span class=\"w\"> </span><span class=\"n\">oldScope</span><span class=\"bp\">.</span><span class=\"n\">openDecls</span><span class=\"w\"> </span><span class=\"o\">}</span>\n\n<span class=\"kn\">elab</span><span class=\"w\"> </span><span class=\"s2\">\"open \"</span><span class=\"w\"> </span><span class=\"s2\">\"noscope \"</span><span class=\"w\"> </span><span class=\"n\">ns</span><span class=\"o\">:</span><span class=\"n\">ident</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">command</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"k\">do</span>\n<span class=\"w\">  </span><span class=\"n\">modifyScope</span><span class=\"w\"> </span><span class=\"bp\">&lt;|</span><span class=\"w\"> </span><span class=\"n\">Scope</span><span class=\"bp\">.</span><span class=\"n\">justOpen</span><span class=\"w\"> </span><span class=\"n\">ns</span><span class=\"bp\">.</span><span class=\"n\">getId</span>\n\n<span class=\"kn\">end</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">Elab</span><span class=\"bp\">.</span><span class=\"n\">Command</span>\n\n<span class=\"kn\">namespace</span><span class=\"w\"> </span><span class=\"n\">Nat</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">pi</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"mi\">3</span>\n<span class=\"kn\">scoped</span><span class=\"w\"> </span><span class=\"kn\">notation</span><span class=\"w\"> </span><span class=\"s2\">\"π\"</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">pi</span>\n\n<span class=\"kn\">end</span><span class=\"w\"> </span><span class=\"n\">Nat</span>\n\n<span class=\"kn\">section</span><span class=\"w\"> </span><span class=\"n\">Test1</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">noscope</span><span class=\"w\"> </span><span class=\"n\">Nat</span>\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">pi</span>\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">π</span><span class=\"w\"> </span><span class=\"c1\">-- error</span>\n\n<span class=\"kn\">end</span><span class=\"w\"> </span><span class=\"n\">Test1</span>\n\n<span class=\"kn\">section</span><span class=\"w\"> </span><span class=\"n\">Test2</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Nat</span>\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">pi</span>\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">π</span>\n\n<span class=\"kn\">end</span><span class=\"w\"> </span><span class=\"n\">Test2</span>\n\n<span class=\"kn\">section</span><span class=\"w\"> </span><span class=\"n\">Test3</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"kn\">scoped</span><span class=\"w\"> </span><span class=\"n\">Nat</span>\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">pi</span><span class=\"w\"> </span><span class=\"c1\">-- error</span>\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">π</span>\n\n<span class=\"kn\">end</span><span class=\"w\"> </span><span class=\"n\">Test3</span>\n</code></pre></div>",
        "id": 547804826,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761769254
    },
    {
        "content": "<p>I've gone and done it</p>",
        "id": 547804831,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761769256
    },
    {
        "content": "<p>(<a href=\"https://github.com/leanprover/lean4/blob/1587d02dfbe0b4759b7f63657bbc8ac8eb352992/src/Lean/Elab/Open.lean#L75-L79C10\">the existing open automatically triggers <code>activateScoped</code></a>)</p>",
        "id": 547805075,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761769365
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110087\">@Kim Morrison</span> do you think this is a good idea?</p>",
        "id": 547805300,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761769473
    },
    {
        "content": "<p>Yes, the functionality is desirable, but I'm sceptical about the syntax, it's adding yet more to the learnable surface area...</p>",
        "id": 547841289,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1761789824
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110087\">@Kim Morrison</span> what syntax would you suggest?</p>",
        "id": 547878852,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761814384
    },
    {
        "content": "<p>I don't think the particular syntax is an issue (though maybe <code>unscoped</code> is better for consistency?). I believe Kim's is commenting on adding more syntax at all to something fundamental like <code>open</code>. I empathize with that argument, but feel maybe that ship has sailed to an extent.</p>",
        "id": 547883049,
        "sender_full_name": "Chris Henson",
        "timestamp": 1761815677
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"687698\">@Chris Henson</span> what syntax would you suggest?</p>",
        "id": 547883279,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761815742
    },
    {
        "content": "<p>Again, I am not objecting to your syntax specifically, past slightly preferring <code>open unscoped ...</code>. This would be an additional branch in <code>elabOpenDecl</code> that you linked above, yes?</p>",
        "id": 547884746,
        "sender_full_name": "Chris Henson",
        "timestamp": 1761816115
    },
    {
        "content": "<p>if it goes to lean4, yes it would have to modify <code>elabOpenDecl</code></p>",
        "id": 547885223,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761816242
    },
    {
        "content": "<p>or else we can just put my code somewhere in mathlib separately</p>",
        "id": 547885356,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761816280
    },
    {
        "content": "<p>My only suggestion is that even if it is downstream, I would still try to match the syntax that is used in that elab for the scoped case.</p>",
        "id": 547887147,
        "sender_full_name": "Chris Henson",
        "timestamp": 1761816723
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"687698\">@Chris Henson</span> sorry, I don't understand what you mean by this.</p>",
        "id": 547888043,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761816968
    },
    {
        "content": "<p>surely unscoped already matches scoped</p>",
        "id": 547888056,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761816972
    },
    {
        "content": "<p>Your syntax above is different in that it takes a single ident, while in the elab there is</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">`</span><span class=\"o\">(</span><span class=\"n\">Parser</span><span class=\"bp\">.</span><span class=\"n\">Command</span><span class=\"bp\">.</span><span class=\"n\">openDecl</span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"kn\">scoped</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"n\">nss</span><span class=\"bp\">*</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>for the scoped case.</p>",
        "id": 547888746,
        "sender_full_name": "Chris Henson",
        "timestamp": 1761817165
    },
    {
        "content": "<p>right, i've fixed that locally</p>",
        "id": 547889435,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761817363
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/31086\">#31086</a></p>",
        "id": 547890102,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761817573
    },
    {
        "content": "<p>the current code looks like:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Lean</span>\n\n<span class=\"kn\">namespace</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">Elab</span><span class=\"bp\">.</span><span class=\"n\">Command</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Scope</span><span class=\"bp\">.</span><span class=\"n\">addOpenDecl</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">o</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">OpenDecl</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">oldScope</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Scope</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Scope</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"o\">{</span><span class=\"w\"> </span><span class=\"n\">oldScope</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"n\">openDecls</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">o</span><span class=\"w\"> </span><span class=\"bp\">::</span><span class=\"w\"> </span><span class=\"n\">oldScope</span><span class=\"bp\">.</span><span class=\"n\">openDecls</span><span class=\"w\"> </span><span class=\"o\">}</span>\n\n<span class=\"kn\">elab</span><span class=\"w\"> </span><span class=\"s2\">\"open \"</span><span class=\"w\"> </span><span class=\"s2\">\"unscoped \"</span><span class=\"w\"> </span><span class=\"n\">nss</span><span class=\"o\">:</span><span class=\"n\">ident</span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">command</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"k\">do</span>\n<span class=\"w\">  </span><span class=\"n\">for</span><span class=\"w\"> </span><span class=\"n\">ns</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">nss</span><span class=\"w\"> </span><span class=\"k\">do</span>\n<span class=\"w\">    </span><span class=\"n\">for</span><span class=\"w\"> </span><span class=\"n\">ns</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">resolveNamespace</span><span class=\"w\"> </span><span class=\"n\">ns</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">do</span>\n<span class=\"w\">      </span><span class=\"n\">modifyScope</span><span class=\"w\"> </span><span class=\"bp\">&lt;|</span><span class=\"w\"> </span><span class=\"n\">Scope</span><span class=\"bp\">.</span><span class=\"n\">addOpenDecl</span><span class=\"w\"> </span><span class=\"bp\">&lt;|</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">simple</span><span class=\"w\"> </span><span class=\"n\">ns</span><span class=\"w\"> </span><span class=\"o\">[]</span>\n\n<span class=\"kn\">end</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">Elab</span><span class=\"bp\">.</span><span class=\"n\">Command</span>\n</code></pre></div>",
        "id": 547890198,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761817606
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110031\">Patrick Massot</span> <a href=\"#narrow/channel/270676-lean4/topic/Why.20.22scoped.20notation.22.20for.20Euler's.20totient.20function.3F/near/547656647\">said</a>:</p>\n<blockquote>\n<p>An easy fix would be to have a more specific scope.</p>\n</blockquote>\n<p>Some related functions are in the Nat.ArithmeticFunction scope, which could make sense here too</p>",
        "id": 547931392,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1761829961
    },
    {
        "content": "<p>Independent of the solution, for my understanding why is notation preferred here to <code>abbrev</code>. I understand for reals for example because of typeclass inference.</p>",
        "id": 547931747,
        "sender_full_name": "Siddhartha Gadgil",
        "timestamp": 1761830063
    },
    {
        "content": "<p>abbrev is just bad, it's pretending to be notation but it's not good enough, i just don't like abbrev in general (personally)</p>",
        "id": 547932239,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761830192
    },
    {
        "content": "<p>when people say abbrev they mean notation</p>",
        "id": 547932278,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761830203
    },
    {
        "content": "<p>What here is \"just bad\". I mean what actually goes wrong. When I say/use <code>abbrev</code> that is what I mean.</p>",
        "id": 547932491,
        "sender_full_name": "Siddhartha Gadgil",
        "timestamp": 1761830264
    },
    {
        "content": "<p>abbrev is another declaration with more eager definitional equality, at the level of expressions they produce different results, so it's harder to use, whereas with notation they elaborate to the same notation so everything still works fine</p>",
        "id": 547933025,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761830411
    },
    {
        "content": "<p>if you define Nat.totient and then define Nat.φ then you now have two separate functions that have the same value</p>",
        "id": 547933159,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761830454
    },
    {
        "content": "<p>I know what the difference is internally. I was asking what difference it makes in practice if we have a reducible definition. For types this blocks typeclass inference. Where does it affect functions? I realise rewrite is blocked if some theorems use one and some the other, but what if consistency is enforced.</p>",
        "id": 547933715,
        "sender_full_name": "Siddhartha Gadgil",
        "timestamp": 1761830561
    },
    {
        "content": "<p>consistency to which function</p>",
        "id": 547933869,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761830597
    },
    {
        "content": "<p>Nat.φ</p>",
        "id": 547933923,
        "sender_full_name": "Siddhartha Gadgil",
        "timestamp": 1761830613
    },
    {
        "content": "<p>it's exactly what we now have with le and ge, ge is now entirely unusable</p>",
        "id": 547933952,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761830620
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"266304\">Siddhartha Gadgil</span> <a href=\"#narrow/channel/270676-lean4/topic/Why.20.22scoped.20notation.22.20for.20Euler's.20totient.20function.3F/near/547933923\">said</a>:</p>\n<blockquote>\n<p>Nat.φ</p>\n</blockquote>\n<p>yeah that's just not mathlib style, mathlib prefers names</p>",
        "id": 547934087,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761830655
    },
    {
        "content": "<p>we should have made / make <a href=\"https://leanprover-community.github.io/mathlib4_docs/Init/Prelude.html#GE.ge\">ge</a> a notation</p>",
        "id": 547934285,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761830715
    },
    {
        "content": "<p>To ask again, there is a clear cost to notation - it breaks parsing. This means that if I want to use factorial say, I simply cannot use φ as a variable name. The symbol φ has been elevated to the status (within the scope, but a broad scope) of a reserved word.</p>\n<p>This goes against the spirit as I understand of modern programming languages, where reserved words are introduced with great hesitation. It especially goes against the spirit of Lean which wants to be extensible. It is also very nasty from my point of view, since computer generated code will need to know that if I have the factorial symbol (which I would generally want) I lose the use of a variable that is extremely commonly used as a function name.</p>\n<p>Of course one has to balance gains and losses. Perhaps there are strong reasons the other way which make it worthwhile. That is why I asked, to understand the issues. Can someone please give reasons with examples, for instance (rather than strong adjectives).</p>",
        "id": 547936213,
        "sender_full_name": "Siddhartha Gadgil",
        "timestamp": 1761831222
    },
    {
        "content": "<p>why would you want to use φ as a variable name in your scenario where you have <code>Nat.φ</code> as an abbrev?</p>",
        "id": 547936465,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761831280
    },
    {
        "content": "<p>Because I want \"open scoped Nat\" as default and when autoformalizing sources humans often use φ as notation for functions.</p>",
        "id": 547936767,
        "sender_full_name": "Siddhartha Gadgil",
        "timestamp": 1761831340
    },
    {
        "content": "<p>I mean this happened, hence my raising the issue.</p>",
        "id": 547937039,
        "sender_full_name": "Siddhartha Gadgil",
        "timestamp": 1761831365
    },
    {
        "content": "<p>There are of course workarounds. I can programatically read the error message, note that this is the cause and then replace φ by another function.</p>",
        "id": 547937302,
        "sender_full_name": "Siddhartha Gadgil",
        "timestamp": 1761831425
    },
    {
        "content": "<p>But I do think the principle that one should not create reserved words/symbols lightly is reasonable, and should only be violated for strong counter reasons.</p>",
        "id": 547937532,
        "sender_full_name": "Siddhartha Gadgil",
        "timestamp": 1761831481
    },
    {
        "content": "<p>I'm saying that making φ an abbrev has nothing to do with having it as a variable name, sure it parses syntactically when it's an abbrev, but that's still undesirable, and in my opinion adding bad smell to gas so that we can smell it when it's leaking is way better than not having the bad smell just because it smells bad</p>",
        "id": 547937579,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761831491
    },
    {
        "content": "<p>I don't know if you undestood the issue - making it a notation blocks one from using it as a variable name, essentially making it a reserved word.</p>",
        "id": 547938115,
        "sender_full_name": "Siddhartha Gadgil",
        "timestamp": 1761831630
    },
    {
        "content": "<p>i'm saying you shouldn't use it as a variable name in any case, not just in the case where the compiler complains</p>",
        "id": 547938344,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761831688
    },
    {
        "content": "<p>I know what you are saying. But in mathematics we use it all the time, and a lot of work has been done in Lean so that we can write things the same way as we do in human mathematics.</p>",
        "id": 547938772,
        "sender_full_name": "Siddhartha Gadgil",
        "timestamp": 1761831794
    },
    {
        "content": "<p>but you don't need to <code>open Nat</code> all the time</p>",
        "id": 547941045,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761832361
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"266304\">Siddhartha Gadgil</span> <a href=\"#narrow/channel/270676-lean4/topic/Why.20.22scoped.20notation.22.20for.20Euler's.20totient.20function.3F/near/547936767\">said</a>:</p>\n<blockquote>\n<p>Because I want \"open scoped Nat\" as default and when autoformalizing sources humans often use φ as notation for functions.</p>\n</blockquote>\n<p><span class=\"user-mention\" data-user-id=\"110064\">@Kenny Lau</span> This is getting ridiculous. I asked for an explanation from someone. I am not learning anything.</p>",
        "id": 547941781,
        "sender_full_name": "Siddhartha Gadgil",
        "timestamp": 1761832554
    },
    {
        "content": "<p>I apologise, I'll let someone else address your concerns</p>",
        "id": 547943051,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761832798
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"266304\">Siddhartha Gadgil</span> <a href=\"#narrow/stream/270676-lean4/topic/Why.20.22scoped.20notation.22.20for.20Euler's.20totient.20function.3F/near/547936767\">said</a>:</p>\n<blockquote>\n<p>Because I want \"open scoped Nat\" as default</p>\n</blockquote>\n<p>Is this because you want factorial notation? If so, it sounds like the problem is that we have too many notations in the same namespaces?</p>",
        "id": 548032289,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1761857957
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"214703\">Yury G. Kudryashov</span> <a href=\"#narrow/stream/270676-lean4/topic/Why.20.22scoped.20notation.22.20for.20Euler's.20totient.20function.3F/near/547803316\">said</a>:</p>\n<blockquote>\n<p>Another pain point is that we can't conveniently use notation for <code>Real.pi</code> if we also <code>open Nat</code> because of the notation for the prime counting function.</p>\n</blockquote>\n<p>I thought we moved the prime counting function to a different scope namespace? <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Nat.primeCounting#src\">src#Nat.primeCounting</a> says it's in <code>open scoped Nat.Prime</code> as of <a href=\"https://github.com/leanprover-community/mathlib4/pull/15519\">#15519</a></p>",
        "id": 548032512,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1761858053
    },
    {
        "content": "<p>As you can probably guess, this was also motivated by some AI workflow, though as usual this can be translated into an issue that a human learning Lean would also be tripped up by</p>",
        "id": 548032940,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1761858241
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/channel/270676-lean4/topic/Why.20.22scoped.20notation.22.20for.20Euler's.20totient.20function.3F/near/548032289\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"266304\">Siddhartha Gadgil</span> <a href=\"#narrow/stream/270676-lean4/topic/Why.20.22scoped.20notation.22.20for.20Euler's.20totient.20function.3F/near/547936767\">said</a>:</p>\n<blockquote>\n<p>Because I want \"open scoped Nat\" as default</p>\n</blockquote>\n<p>Is this because you want factorial notation? If so, it sounds like the problem is that we have too many notations in the same namespaces?</p>\n</blockquote>\n<p>Yes, it is for the factorial notation. I agree that using refined scopes is the best solution.</p>",
        "id": 548033804,
        "sender_full_name": "Siddhartha Gadgil",
        "timestamp": 1761858667
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/channel/270676-lean4/topic/Why.20.22scoped.20notation.22.20for.20Euler's.20totient.20function.3F/near/548032512\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"214703\">Yury G. Kudryashov</span> <a href=\"#narrow/stream/270676-lean4/topic/Why.20.22scoped.20notation.22.20for.20Euler's.20totient.20function.3F/near/547803316\">said</a>:</p>\n<blockquote>\n<p>Another pain point is that we can't conveniently use notation for <code>Real.pi</code> if we also <code>open Nat</code> because of the notation for the prime counting function.</p>\n</blockquote>\n<p>I thought we moved the prime counting function to a different scope namespace? <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Nat.primeCounting#src\">src#Nat.primeCounting</a> says it's in <code>open scoped Nat.Prime</code> as of <a href=\"https://github.com/leanprover-community/mathlib4/pull/15519\">#15519</a></p>\n</blockquote>\n<p><span aria-label=\"face palm\" class=\"emoji emoji-1f926\" role=\"img\" title=\"face palm\">:face_palm:</span> I remember that I had this issue, then I didn't need this for a long time, and now I forgot to check if it's still an issue.</p>",
        "id": 548065154,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1761877204
    }
]