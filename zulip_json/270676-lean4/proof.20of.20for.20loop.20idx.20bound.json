[
    {
        "content": "<p>I can write</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"n\">Id.run</span><span class=\"w\"> </span><span class=\"k\">do</span><span class=\"w\"> </span><span class=\"n\">for</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">0</span><span class=\"o\">:</span><span class=\"mi\">10</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">do</span><span class=\"w\"> </span><span class=\"bp\">...</span>\n</code></pre></div>\n<p>is there a way to name the fact, which lean presumably knows, that <code>0&lt;=i&lt;10</code>?</p>\n<p>I can explore the <code>ForIn</code> construct, but I thought I'd check if anyone has some code lying around that does this. I'm accessing and updating an array inside the for loop, and trying to eliminate <code>!</code></p>",
        "id": 485720079,
        "sender_full_name": "Quinn",
        "timestamp": 1733178771
    },
    {
        "content": "<p><code>for h : i in [0:10] do</code></p>",
        "id": 485723942,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1733180943
    },
    {
        "content": "<p>oh that's so cool</p>",
        "id": 485725831,
        "sender_full_name": "Quinn",
        "timestamp": 1733182147
    },
    {
        "content": "<p>having a bunch of trouble converting the context which says that <code>col : Std.Range := { start, stop, step }</code> and <code>i \\in col</code> into the Fin constructor.</p>",
        "id": 485729738,
        "sender_full_name": "Quinn",
        "timestamp": 1733184561
    },
    {
        "content": "<p>Note sure what you are saying. Could you post a <a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a>?</p>",
        "id": 485729938,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1733184674
    },
    {
        "content": "<p>yes, sry</p>",
        "id": 485730831,
        "sender_full_name": "Quinn",
        "timestamp": 1733185235
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">def</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Id.run</span><span class=\"w\"> </span><span class=\"k\">do</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">mut</span><span class=\"w\"> </span><span class=\"n\">result</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Array.mkArray</span><span class=\"w\"> </span><span class=\"mi\">10</span><span class=\"w\"> </span><span class=\"mi\">0</span>\n<span class=\"w\">  </span><span class=\"n\">for</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">0</span><span class=\"o\">:</span><span class=\"mi\">10</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">do</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">ifin</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"n\">result.size</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span>\n<span class=\"w\">      </span><span class=\"gr\">sorry</span>\n<span class=\"w\">    </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">fini</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"n\">result.size</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">⟨</span><span class=\"n\">i</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">ifin</span><span class=\"o\">⟩</span>\n<span class=\"w\">    </span><span class=\"n\">result</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">result.set</span><span class=\"w\"> </span><span class=\"n\">fini</span><span class=\"w\"> </span><span class=\"n\">i</span>\n</code></pre></div>",
        "id": 485730839,
        "sender_full_name": "Quinn",
        "timestamp": 1733185238
    },
    {
        "content": "<p>the sorry</p>",
        "id": 485730849,
        "sender_full_name": "Quinn",
        "timestamp": 1733185250
    },
    {
        "content": "<p>my usual <code>have</code> trick for getting <code>col</code> out of grey'd out dagger notation isn't working</p>",
        "id": 485730883,
        "sender_full_name": "Quinn",
        "timestamp": 1733185278
    },
    {
        "content": "<p>rather, I do </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"w\">      </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">start</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">stop</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">step</span><span class=\"bp\">⟩</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">col</span>\n<span class=\"w\">      </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">result</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Array</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">mkArray</span><span class=\"w\"> </span><span class=\"mi\">10</span><span class=\"w\"> </span><span class=\"mi\">0</span>\n</code></pre></div>\n<p>but <code>result</code> is grey'd out / dagger so I can't show that <code>stop = result.size</code></p>",
        "id": 485731184,
        "sender_full_name": "Quinn",
        "timestamp": 1733185529
    },
    {
        "content": "<p>The problem here is that as soon as you use <code>Array.set</code>, you need a lemma to know the size is the same as before.</p>",
        "id": 485746262,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1733196705
    },
    {
        "content": "<p>Consider using <code>Vector</code> here. (You may need to be on a nightly release, or otherwise <code>import Batteries</code>.)</p>",
        "id": 485746282,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1733196721
    }
]