[
    {
        "content": "<p>Is there a function which takes an expression of the form</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">@</span><span class=\"n\">HAppend</span><span class=\"bp\">.</span><span class=\"n\">hAppend</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">@</span><span class=\"n\">instHAppendOfAppend</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">@</span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">instAppend</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">))</span>\n</code></pre></div>\n<p>and returns <code>List.instAppend Nat</code>, and vice versa?</p>\n<p>Similarly it should convert between</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">@</span><span class=\"n\">HAdd</span><span class=\"bp\">.</span><span class=\"n\">hAdd</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">@</span><span class=\"n\">instHAdd</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"n\">instAddNat</span><span class=\"o\">)</span>\n<span class=\"n\">instAddNat</span>\n</code></pre></div>\n<p>The idea is to convert between an instance and a function call to a class function</p>",
        "id": 466422379,
        "sender_full_name": "Leni Aniva",
        "timestamp": 1725069546
    },
    {
        "content": "<p>If this is impossible is there a way to extract the implicit components? e.g.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">@</span><span class=\"n\">HAdd</span><span class=\"bp\">.</span><span class=\"n\">hAdd</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">@</span><span class=\"n\">instHAdd</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"n\">instAddNat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"n\">z</span>\n</code></pre></div>\n<p>turns into</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">@</span><span class=\"n\">HAdd</span><span class=\"bp\">.</span><span class=\"n\">hAdd</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">@</span><span class=\"n\">instHAdd</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"n\">instAddNat</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>The use case is I need to convert a instance function invocation into a unique symbol for usage in SMT solvers, for example the above would be mapped to <code>nat.+</code></p>",
        "id": 466449894,
        "sender_full_name": "Leni Aniva",
        "timestamp": 1725080009
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"599027\">Leni Aniva</span> <a href=\"#narrow/stream/270676-lean4/topic/Getting.20the.20instance.20name.20from.20a.20call/near/466422379\">said</a>:</p>\n<blockquote>\n<p>Is there a function which takes an expression of the form</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">@</span><span class=\"n\">HAppend</span><span class=\"bp\">.</span><span class=\"n\">hAppend</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">@</span><span class=\"n\">instHAppendOfAppend</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">@</span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">instAppend</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">))</span>\n</code></pre></div>\n<p>and returns <code>List.instAppend Nat</code>, and vice versa?</p>\n</blockquote>\n<p>Do you really want <code>List.instAppend</code>, or rather <code>List.append</code>?</p>",
        "id": 466466557,
        "sender_full_name": "Marcus Rossel",
        "timestamp": 1725083130
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"372804\">Marcus Rossel</span> <a href=\"#narrow/stream/270676-lean4/topic/Getting.20the.20instance.20name.20from.20a.20call/near/466466557\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"599027\">Leni Aniva</span> <a href=\"#narrow/stream/270676-lean4/topic/Getting.20the.20instance.20name.20from.20a.20call/near/466422379\">said</a>:</p>\n<blockquote>\n<p>Is there a function which takes an expression of the form</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">@</span><span class=\"n\">HAppend</span><span class=\"bp\">.</span><span class=\"n\">hAppend</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">@</span><span class=\"n\">instHAppendOfAppend</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">@</span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">instAppend</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">))</span>\n</code></pre></div>\n<p>and returns <code>List.instAppend Nat</code>, and vice versa?</p>\n</blockquote>\n<p>Do you really want <code>List.instAppend</code>, or rather <code>List.append</code>?</p>\n</blockquote>\n<p>both will work, I just need something to pinpoint each <code>HAppend.hAppend</code> (or <code>HAdd.hAdd</code>) function call down to one or two unique symbols</p>\n<p>come to think of it even <code>@HAdd.hAdd Nat Nat Nat (@instHAdd Nat instAddNat)</code> will be fine</p>",
        "id": 466473911,
        "sender_full_name": "Leni Aniva",
        "timestamp": 1725086375
    }
]