[
    {
        "content": "<p>Given how well my previous <a href=\"#narrow/channel/270676-lean4/topic/Pretty.20printing.20instances.20in.20.60omit.60/with/515283386\">pretty comment</a> went, let me try again, this time with pretty-printing comments.</p>\n<p>Should this also be modified?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">Elab</span><span class=\"bp\">.</span><span class=\"n\">Command</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"w\"> </span><span class=\"n\">Elab</span><span class=\"bp\">.</span><span class=\"n\">Command</span><span class=\"w\"> </span><span class=\"k\">in</span>\n<span class=\"kn\">elab</span><span class=\"w\"> </span><span class=\"s2\">\"#pretty_print \"</span><span class=\"w\"> </span><span class=\"n\">cmd</span><span class=\"o\">:</span><span class=\"n\">command</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">command</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"k\">do</span>\n<span class=\"w\">  </span><span class=\"n\">elabCommand</span><span class=\"w\"> </span><span class=\"n\">cmd</span><span class=\"w\"> </span><span class=\"c1\">-- it is too weird if you do not elaborate the command!</span>\n<span class=\"w\">  </span><span class=\"n\">logInfo</span><span class=\"w\"> </span><span class=\"n\">cmd</span>\n\n<span class=\"sd\">/--</span>\n<span class=\"sd\">info: variable (a : Nat) in</span>\n<span class=\"sd\">-- here is a simple exampleexample : a = a :=</span>\n<span class=\"sd\">  rfl</span>\n<span class=\"sd\">-/</span>\n<span class=\"bp\">#</span><span class=\"n\">guard_msgs</span><span class=\"w\"> </span><span class=\"k\">in</span>\n<span class=\"bp\">#</span><span class=\"n\">pretty_print</span>\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">in</span>\n<span class=\"c1\">-- here is a simple example</span>\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">rfl</span>\n</code></pre></div>",
        "id": 515380326,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1746040535
    },
    {
        "content": "<p>This is a long-standing issue: <a href=\"https://github.com/leanprover/lean4/pull/3791\">lean4#3791</a></p>",
        "id": 515381585,
        "sender_full_name": "Jannis Limperg",
        "timestamp": 1746040943
    },
    {
        "content": "<p>Ah, yes, thanks for the link!</p>",
        "id": 515381678,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1746040979
    },
    {
        "content": "<p>I had already upvoted it.  I wish I could upvote it again, given that I had forgotten about it...</p>",
        "id": 515381749,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1746041004
    },
    {
        "content": "<p>In case anyone wonders about where these pretty comment come from, it is thanks to the linter at <a href=\"https://github.com/leanprover-community/mathlib4/pull/24465\">#24465</a>: it exploits the pretty printer as a source of how to format code, and has picked up a few pretty printing issues.</p>",
        "id": 515382099,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1746041105
    },
    {
        "content": "<p>Come to think of it, Jannis, any chance that this looks reasonable to you?   <a href=\"https://github.com/leanprover-community/aesop/pull/203\">leanprover-community/aesop#203</a></p>",
        "id": 515382229,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1746041147
    }
]