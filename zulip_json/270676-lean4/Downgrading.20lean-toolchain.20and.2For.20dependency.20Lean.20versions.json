[
    {
        "content": "<p>What is the recommended way to downgrade the contents of <code>lean-toolchain</code> in a project? More specifically, I have a project on <code>4.14.0-rc1</code> with a dependency on <code>ImportGraph</code>, say, and now I want to go back to <code>4.13</code> -- I edited the <code>lean-toolchain</code> to contain <code>leanprover/lean4:v4.13.0</code>, and now the manifest is of course wrong, as it points to a commit of <code>ImportGraph</code> which only works on 4.14. Is there a non-manual way to do this other than go find a commit that was written for 4.13? Specifically I expected that <code>rm lake-manifest.json &amp;&amp; lake build</code> would give me a manifest where the version of the dependency worked on 4.13, but it appears not to, it gives me HEAD (because I haven't pinned the version). It's seemingly my footgun of course for not pinning a version of the dependency and just requiring HEAD, but yeah what's the recommended workflow for this, does reservoir collect information on which versions of things require which lean versions?</p>",
        "id": 481379512,
        "sender_full_name": "Julian Berman",
        "timestamp": 1731096457
    },
    {
        "content": "<p>Ah, I see I depend on <code>ImportGraph</code> via <code>git</code>, rather than reservoir, so that's at least one thing to fix...</p>",
        "id": 481380014,
        "sender_full_name": "Julian Berman",
        "timestamp": 1731096725
    },
    {
        "content": "<p>In theory, projects can add a <code>v4.13.0</code> tag</p>",
        "id": 481400999,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1731107362
    },
    {
        "content": "<p>Then you can depend on them like</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">require</span><span class=\"w\"> </span><span class=\"n\">mathlib</span><span class=\"w\"> </span><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"n\">git</span>\n<span class=\"w\">  </span><span class=\"s2\">\"https://github.com/leanprover-community/mathlib4.git\"</span><span class=\"w\"> </span><span class=\"bp\">@</span><span class=\"w\"> </span><span class=\"s2\">\"v4.13.0\"</span>\n</code></pre></div>\n<p>(that's with git and <code>lakefile.lean</code>, not sure what the translation would be)</p>",
        "id": 481401112,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1731107416
    },
    {
        "content": "<p>Indeed, import-graph, along with most repositories upstream of Mathlib, create a tag of this form the first time they move to a new stable or release candidate version of Lean, so pinning to these tags is the recommended way to go.</p>",
        "id": 481411060,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1731113831
    },
    {
        "content": "<p>Some projects might have their own semantic versioning, so maybe <code>lean-v4.13.0</code> should be a \"recognized\" tag as well.</p>",
        "id": 481423790,
        "sender_full_name": "Fran√ßois G. Dorais",
        "timestamp": 1731123693
    }
]