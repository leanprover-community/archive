[
    {
        "content": "<p>Many languages (Java, Python, JavaScript, PHP, C#, C++, Rust, etc.) have some character they ignore in numbers, letting one write e.g. <code>12_345_678 = 12345678</code>, which can make large numbers more readable. Would it be hard/cause potential ambiguity to implement something similar in Lean? Should I make an RFC for this?</p>",
        "id": 483931902,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1732288529
    },
    {
        "content": "<p>I personally find the Swiss locale style <code>12'345'678.02</code> visually the nicest and least intrusive, if any symbol could be implemented.</p>\n<p>The worst locale is probably the German one: <code>12.345.678,02</code> <span aria-label=\"wink\" class=\"emoji emoji-1f609\" role=\"img\" title=\"wink\">:wink:</span><span aria-label=\"rolling eyes\" class=\"emoji emoji-1f644\" role=\"img\" title=\"rolling eyes\">:rolling_eyes:</span></p>",
        "id": 484141040,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1732444301
    },
    {
        "content": "<p>What is there for Rust? I can only find crates for formatting numbers in different locales, nothing about language support for entering numbers with thousands-separators.</p>",
        "id": 484147231,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1732450314
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"k\">fn</span><span class=\"w\"> </span><span class=\"nf\">main</span><span class=\"p\">()</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">    </span><span class=\"fm\">println!</span><span class=\"p\">(</span><span class=\"s\">\"{}\"</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"mf\">1_234_56_7.898_765</span><span class=\"p\">);</span>\n<span class=\"p\">}</span>\n</code></pre></div>\n<p>Works for me</p>",
        "id": 484147658,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1732450715
    },
    {
        "content": "<p><a href=\"https://doc.rust-lang.org/reference/tokens.html#numbers\">https://doc.rust-lang.org/reference/tokens.html#numbers</a></p>",
        "id": 484148768,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1732451664
    },
    {
        "content": "<p>using underscores is also the standard for python, from what i recall.</p>",
        "id": 484148786,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1732451682
    },
    {
        "content": "<p>Indeed: <a href=\"https://docs.python.org/3/reference/lexical_analysis.html#integer-literals\">https://docs.python.org/3/reference/lexical_analysis.html#integer-literals</a></p>",
        "id": 484148929,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1732451791
    },
    {
        "content": "<p>IIRC All languages I mentioned use underscore except C++ which uses <code>'</code></p>",
        "id": 484149215,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1732452026
    },
    {
        "content": "<p>created <a href=\"https://github.com/leanprover/lean4/pull/6199\">lean4#6199</a></p>",
        "id": 484149475,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1732452259
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110087\">Kim Morrison</span> <a href=\"#narrow/channel/270676-lean4/topic/Separator.20character.20for.20numbers/near/484147231\">said</a>:</p>\n<blockquote>\n<p>What is there for Rust? I can only find crates for formatting numbers in different locales, nothing about language support for entering numbers with thousands-separators.</p>\n</blockquote>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"k\">fn</span><span class=\"w\"> </span><span class=\"nf\">main</span><span class=\"p\">()</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">    </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">large_dec_number</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"kt\">i128</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mi\">1_234_5678_90</span><span class=\"p\">;</span>\n<span class=\"w\">    </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">large_hex_number</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"kt\">i128</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mh\">0xFF_FF_FF_FF</span><span class=\"p\">;</span>\n<span class=\"w\">    </span><span class=\"fm\">println!</span><span class=\"p\">(</span><span class=\"s\">\"large_dec_number (decimal):</span><span class=\"se\">\\t</span><span class=\"s\"> {}\"</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">large_dec_number</span><span class=\"p\">);</span>\n<span class=\"w\">    </span><span class=\"fm\">println!</span><span class=\"p\">(</span><span class=\"s\">\"large_hex_number (decimal):</span><span class=\"se\">\\t</span><span class=\"s\"> {}\"</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">large_hex_number</span><span class=\"p\">);</span>\n<span class=\"w\">    </span><span class=\"fm\">println!</span><span class=\"p\">(</span><span class=\"s\">\"large_hex_number (hexadecimal:</span><span class=\"se\">\\t</span><span class=\"s\"> {:#X})\"</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">large_hex_number</span><span class=\"p\">);</span>\n<span class=\"w\">    </span><span class=\"c1\">// Output:</span>\n<span class=\"w\">    </span><span class=\"c1\">// large_dec_number (decimal):      1234567890</span>\n<span class=\"w\">    </span><span class=\"c1\">// large_hex_number (decimal):      4294967295</span>\n<span class=\"w\">    </span><span class=\"c1\">// large_hex_number (hexadecimal:   0xFFFFFFFF)</span>\n\n<span class=\"w\">    </span><span class=\"c1\">// BTW you can change the location of underscores</span>\n<span class=\"p\">}</span>\n</code></pre></div>\n<p>Just use underscores. Also work for hexadecimal numeric literals. I guess there is  a \"de facto standard\" for using characters in number.</p>",
        "id": 484154288,
        "sender_full_name": "Edward Zhang",
        "timestamp": 1732456888
    },
    {
        "content": "<p>Confirm in Java SE 14 Edition. <a href=\"https://docs.oracle.com/javase/specs/jls/se14/jls14.pdf\">https://docs.oracle.com/javase/specs/jls/se14/jls14.pdf</a></p>\n<div class=\"codehilite\" data-code-language=\"Todotxt\"><pre><span></span><code>Underscores are allowed as separators between digits that denote the integer.\n</code></pre></div>\n<p>What's for similar proof tools like Coq/Isabelle?</p>",
        "id": 484155542,
        "sender_full_name": "Edward Zhang",
        "timestamp": 1732458077
    },
    {
        "content": "<p>From the rust reference mentioned above:</p>\n<div class=\"codehilite\" data-code-language=\"txt\"><pre><span></span><code>All number literals allow _ as a visual separator: 1_234.0E+18f64`\n</code></pre></div>",
        "id": 484155622,
        "sender_full_name": "Edward Zhang",
        "timestamp": 1732458155
    },
    {
        "content": "<p>I think the first appearance of using underscores in numeric literals was Ada in the 1980s, which probably influenced the rest.</p>",
        "id": 484177270,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1732479532
    },
    {
        "content": "<p>To throw another language in, Verilog also uses <code>_</code>s for visual grouping of bits in hex and binary literals.</p>",
        "id": 484177542,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1732479827
    },
    {
        "content": "<p>(so is perhaps appealing to the bitvec users)</p>",
        "id": 484177556,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1732479841
    },
    {
        "content": "<p>Do you happen to know if Verilog allows multiple <code>_</code>s in sequence <span class=\"user-mention\" data-user-id=\"310045\">@Eric Wieser</span>? The <a href=\"https://in.ncu.edu.tw/ncume_ee/digilogi/vhdl/Verilog_Reference_Guide.pdf\">reference manual</a> I found doesn't specify this in enough detail (page 190, 9-12)</p>",
        "id": 484178850,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1732481091
    },
    {
        "content": "<p>Also, is <code>16'h_FF_FF</code> allowed?</p>",
        "id": 484178882,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1732481137
    },
    {
        "content": "<p>Nevermind, I found an online verilog compiler and answered my own question. Multiple <code>_</code>'s are allowed (like <code>16'hFF__FF</code>) but an initial <code>_</code> is not (like <code>16'h_FF_FF</code>). I guess this makes sense, because Verilog is very Ada-like (though Ada does not allow multiple <code>_</code>s in sequence). <em>Edit:</em> found a copy of <a href=\"https://www.eg.bucknell.edu/~csci320/2016-fall/wp-content/uploads/2015/08/verilog-std-1364-2005.pdf\">the specification</a>, and this is consistent with what's written on pdf page 41, logical page 11.</p>",
        "id": 484179052,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1732481305
    }
]