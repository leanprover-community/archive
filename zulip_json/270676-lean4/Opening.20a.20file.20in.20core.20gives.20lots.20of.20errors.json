[
    {
        "content": "<p>Opening Lean/Elab/Tactic/RCases.lean gives me a ton of errors from a project on 4.18.0-rc1, starting on line 68: </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">elaboration</span><span class=\"w\"> </span><span class=\"n\">function</span><span class=\"w\"> </span><span class=\"n\">for</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">Elab</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span><span class=\"bp\">.</span><span class=\"n\">RCases</span><span class=\"bp\">.</span><span class=\"n\">termList</span><span class=\"bp\">Π._@.</span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">Elab</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span><span class=\"bp\">.</span><span class=\"n\">RCases</span><span class=\"bp\">._</span><span class=\"n\">hyg</span><span class=\"bp\">.</span><span class=\"m\">538</span><span class=\"bp\">'</span><span class=\"w\"> </span><span class=\"n\">has</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">been</span><span class=\"w\"> </span><span class=\"n\">implemented</span>\n<span class=\"w\">  </span><span class=\"n\">List</span><span class=\"bp\">Π</span>\n</code></pre></div>\n<p><span class=\"user-mention\" data-user-id=\"110038\">@Kevin Buzzard</span> reports seeing the same thing from mathlib on v4.15.0-rc1, and also from mathlib master on v4.19.0-rc2. What's going on here?</p>",
        "id": 510185769,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1743768982
    },
    {
        "content": "<p>The specific notation this is referring to looks to be defined at around line 30 of the same file...</p>",
        "id": 510203660,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1743773546
    },
    {
        "content": "<p>So just to be clear, I've got mathlib open and then I'm opening some file in <code>~/.elan/toolchains</code> so in particular it's not within the project.</p>",
        "id": 510212409,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1743775648
    },
    {
        "content": "<p>What does <code>lean --version </code>give when run from that directory?</p>",
        "id": 510237692,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1743782292
    },
    {
        "content": "<p>I'm not at Lean right now but I got to the file via \"jump to definition\"</p>",
        "id": 510244866,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1743784111
    },
    {
        "content": "<p>Likewise for me, and the jump to definition was from a file in (working) mathlib</p>",
        "id": 510245794,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1743784376
    },
    {
        "content": "<p>I suspect the answer is that elan doesn't know which lean to run</p>",
        "id": 510246032,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1743784446
    },
    {
        "content": "<p>And so it uses whatever your default toolchain is</p>",
        "id": 510246077,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1743784459
    },
    {
        "content": "<p>Shouldn't it be the same Lean server that's already running in mathlib? It's the same vscode window</p>",
        "id": 510246226,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1743784510
    },
    {
        "content": "<p>No, you can have multiple servers within the same window</p>",
        "id": 510246276,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1743784527
    },
    {
        "content": "<p>Vscode just asks elan to choose a lean version for whatever directory it is looking at</p>",
        "id": 510246385,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1743784554
    },
    {
        "content": "<p>When in <code>~/.elan/toolchains/leanprover--lean4---v4.18.0-rc1</code>, I get</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">$</span><span class=\"w\"> </span><span class=\"n\">lean</span><span class=\"w\"> </span><span class=\"c1\">--version</span>\n<span class=\"n\">Lean</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">version</span><span class=\"w\"> </span><span class=\"mf\">4.18</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">-</span><span class=\"n\">rc1</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">x86_64</span><span class=\"bp\">-</span><span class=\"n\">apple</span><span class=\"bp\">-</span><span class=\"n\">darwin22</span><span class=\"bp\">.</span><span class=\"m\">6</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">commit</span><span class=\"w\"> </span><span class=\"mi\">69</span><span class=\"n\">a1d0485e24</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Release</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 510247359,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1743784853
    },
    {
        "content": "<p>What about in the exact folder where the <code>.lean</code> file you're looking at is?</p>",
        "id": 510247407,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1743784870
    },
    {
        "content": "<p>Exactly the same result</p>",
        "id": 510273439,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1743794073
    },
    {
        "content": "<p>Does <code>elan override list</code> show anything?</p>",
        "id": 510273573,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1743794136
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">bmehta</span><span class=\"bp\">/</span><span class=\"n\">Documents</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">mathport</span><span class=\"bp\">/</span><span class=\"n\">Oneshot</span><span class=\"bp\">/</span><span class=\"n\">lean3</span><span class=\"bp\">-</span><span class=\"k\">in</span><span class=\"w\">  </span><span class=\"n\">leanprover</span><span class=\"bp\">-</span><span class=\"n\">community</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mf\">3.51</span><span class=\"bp\">.</span><span class=\"m\">1</span>\n<span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">bmehta</span><span class=\"bp\">/</span><span class=\"n\">Documents</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">mathport</span><span class=\"bp\">/</span><span class=\"n\">sources</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"w\">      </span><span class=\"n\">leanprover</span><span class=\"bp\">-</span><span class=\"n\">community</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mf\">3.51</span><span class=\"bp\">.</span><span class=\"m\">1</span>\n</code></pre></div>",
        "id": 510273666,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1743794164
    },
    {
        "content": "<p>Kevin might be able to give better debug information, his laptop is fast and clean and mine is old and has a bunch of crap on it :)</p>",
        "id": 510273765,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1743794199
    }
]