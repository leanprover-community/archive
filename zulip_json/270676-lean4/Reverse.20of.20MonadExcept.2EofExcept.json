[
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/Init/Prelude.html#MonadExcept.ofExcept\">MonadExcept.ofExcept</a> converts <code>e : ExceptT E m X</code> to <code>m X</code> given <code>MonadExcept E m</code>. For some reason I need the reverse of this: </p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">def</span><span class=\"w\"> </span><span class=\"n\">foo</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Monad</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">MonadExcept</span><span class=\"w\"> </span><span class=\"n\">ε</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">e</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ExceptT</span><span class=\"w\"> </span><span class=\"n\">ε</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">mk</span><span class=\"w\"> </span><span class=\"k\">do</span>\n<span class=\"w\">  </span><span class=\"n\">try</span><span class=\"w\"> </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">e</span><span class=\"w\"> </span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">return</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">ok</span><span class=\"w\"> </span><span class=\"n\">a</span>\n<span class=\"w\">  </span><span class=\"n\">catch</span><span class=\"w\"> </span><span class=\"n\">e</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">return</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">error</span><span class=\"w\"> </span><span class=\"n\">e</span>\n</code></pre></div>\n<p>Do we have such a function somewhere? I couldn't find it.</p>",
        "id": 512300329,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1744718292
    },
    {
        "content": "<p>Not 100% sure, but possibly <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=observing#doc\">docs#observing</a></p>",
        "id": 512300940,
        "sender_full_name": "Markus Himmel",
        "timestamp": 1744718447
    },
    {
        "content": "<p>I guess it's <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=ExceptT.mk#doc\">docs#ExceptT.mk</a> composed with that, yes.</p>",
        "id": 512301017,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1744718471
    }
]