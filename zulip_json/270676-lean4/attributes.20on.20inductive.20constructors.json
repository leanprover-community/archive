[
    {
        "content": "<p>I've been messing around with custom attributes, and was wondering if there was any support for attributes on the constructors of an inductive type. They seem to be accepted by the syntax, but throw an error on usage. The intended use is to indicate which constructor I'm talking about in an attribute on the inductive type and/or a custom derive without needing to repeat the constructor name; another example would, e.g., be to indicate the constructor to use for a \"Default\" trait like in Rust</p>",
        "id": 324975208,
        "sender_full_name": "Jad Ghalayini",
        "timestamp": 1675186947
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"461231\">@Jad Ghalayini</span>, did you ever get the answer to this question?</p>\n<p>I've also been toying around with attributes, and found out that adding the attributes post-hoc is accepted, as in:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">inductive</span><span class=\"w\"> </span><span class=\"n\">Foo</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">ctorA</span>\n\n<span class=\"kn\">attribute</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">extern</span><span class=\"w\"> </span><span class=\"s2\">\"A\"</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Foo.ctorA</span>\n</code></pre></div>\n<p>But, trying to define the attribute inline throws a \"invalid use of attributes in constructor declaration\" error:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">inductive</span><span class=\"w\"> </span><span class=\"n\">Foo</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"kd\">@[</span><span class=\"n\">extern</span><span class=\"w\"> </span><span class=\"s2\">\"A\"</span><span class=\"kd\">]</span><span class=\"w\"> </span><span class=\"n\">ctorA</span>\n</code></pre></div>\n<p>I was hoping that error means that somehow the way I use the attributes is invalid, rather than attributes in constructor declarations always being invalid, but I don't really see how.</p>",
        "id": 505681667,
        "sender_full_name": "Alex Keizer",
        "timestamp": 1741960574
    },
    {
        "content": "<p>It means that it's always invalid to use attributes on constructor, I just checked.</p>\n<p>I believe the only modifiers that are accepted are <code>private</code> and <code>protected</code>.</p>",
        "id": 505683284,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1741960977
    },
    {
        "content": "<p>Potentially we could have attributes on constructors. Post-hoc <code>attribute</code> commands are the way to go for now though.</p>",
        "id": 505683742,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1741961081
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 505714910,
        "sender_full_name": "Damien Carr√©",
        "timestamp": 1741968965
    },
    {
        "content": "<p>Thanks for checking!</p>",
        "id": 505728507,
        "sender_full_name": "Alex Keizer",
        "timestamp": 1741972608
    }
]