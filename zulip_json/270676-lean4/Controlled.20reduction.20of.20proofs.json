[
    {
        "content": "<p>For very basic proofs, term reduction is a viable technique for proof simplification. For example, it helped me to discover this little proof:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">not_one_le_zero</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">suffices</span><span class=\"w\"> </span><span class=\"n\">any_zero</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"n\">k</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">False</span><span class=\"w\"> </span><span class=\"k\">from</span>\n<span class=\"w\">    </span><span class=\"bp\">λ</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">any_zero</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"n\">rfl</span>\n<span class=\"w\">  </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"bp\">λ</span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"n\">ok</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">ok</span><span class=\"bp\">.</span><span class=\"n\">recOn</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"bp\">λ</span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">succ_ne_zero</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"bp\">λ</span><span class=\"o\">{</span><span class=\"n\">k</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ksz</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"bp\">.</span><span class=\"n\">succ</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">succ_ne_zero</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"n\">ksz</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>But larger proofs though it's disastrous because it tries to expand every definition.</p>\n<p>It would be nice to have a guided version of <code>#reduce</code> that expands definitions only by request, yet automatically does β-reduction.</p>",
        "id": 502037526,
        "sender_full_name": "suhr",
        "timestamp": 1740573768
    },
    {
        "content": "<p>This could be a nice metaprogramming exercise. You could copy the definitions of <code>#reduce</code>, its elaborator, and the <code>reduce</code> function, look at how <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Lean.Meta.whnfUntil#doc\">docs#Lean.Meta.whnfUntil</a> works to see how to use <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Lean.Meta.whnfHeadPred#doc\">docs#Lean.Meta.whnfHeadPred</a> to reduce certain definitions, modify your <code>reduce</code> to use it, and modify your <code>#reduce</code> syntax to take a list of definitions to unfold. The function to use to turn <code>Ident</code>s into resolved <code>Name</code>s is <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Lean.Elab.realizeGlobalConstNoOverloadWithInfo#doc\">docs#Lean.Elab.realizeGlobalConstNoOverloadWithInfo</a></p>",
        "id": 502112307,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1740593414
    }
]