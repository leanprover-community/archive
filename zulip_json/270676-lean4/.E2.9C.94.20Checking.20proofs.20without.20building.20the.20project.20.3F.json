[
    {
        "content": "<p>I have a lean file with definition, lemmas and theorems, and I want to<br>\nuse Lean4 to check if the proofs are valid. So I attach this file to a project<br>\nand then \"lake build\" does the trick unless I import MathLib.</p>\n<p>With Mathlib I have a strange error messages on the CLANG stage of the build<br>\nin Windows 10 PowerShell. For example now I have:</p>\n<p>At line:1 char:54944</p>\n<ul>\n<li>... 700\\.elan\\toolchains\\leanprover--lean4---v4.17.0-rc1/lib -Wl,-Bstatic ...</li>\n<li>~<br>\nMissing argument in parameter list.</li>\n</ul>\n<p>Do I really need this stage to check the proofs ? Can I write something \"lake check\"<br>\nor \"lake build --no-executable\" and see if my proof is correct without <br>\ngenerating an executable ?</p>\n<p>I am aware that most people use VSCode for this purpose, but this is not <br>\nan option for me, because 1) I prefer command line to IDE<br>\n2) I want potentially run evaluation of proofs from a shell script  <br>\n3) (most important) I have a custom installation of MathLib from a folder, <br>\nand the proof checker inside VSCode fails to import it,<br>\nwhile \"lake build\" seemingly imports it correctly.</p>",
        "id": 510865804,
        "sender_full_name": "Stan Kikot",
        "timestamp": 1744099674
    },
    {
        "content": "<p>Please post the full output.</p>",
        "id": 510866978,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1744100022
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"code\"><pre><span></span><code>(base) PS C:\\Users\\k00929700\\.elan\\workspace\\Verification&gt; c:\\Users\\k00929700\\.elan\\toolchains\\leanprover--lean4---v4.17.0-rc1\\bin\\clang.exe -o .\\.\\.lake\\build\\bin\\ver.exe .\\.\\.lake\\build\\ir\\Main.c.o.noexport .\\.\\.lake/packages\\aesop\\.lake\\build\\ir\\Aesop\\Check.c.o.noexport old\\.lake\\build\\ir\\Mathlib\\Data\\PNat\\Equiv.c.o.noexport .\\.\\./mathlib4-\n...\n&lt;CUT OUT A LOT TO FIT 10000 SYMBOLS ZULIP REQUIREMENT&gt;\n...\nold\\.lake\\build\\ir\\Mathlib\\Data\\PNat\\Basic.c.o.noexport .\\.\\./mathlib4-old\\.lake\\build\\ir\\Mathlib\\Tactic\\Ring\\PNat.c.o.noexport .\\.\\./mathlib4-old\\.lake\\build\\ir\\Mathlib\\Tactic\\Ring.c.o.noexport .\\.\\./mathlib4-old\\.lake\\build\\ir\\Mathlib\\Data\\Complex\\Basic.c.o.noexport .\\.\\.lake\\build\\ir\\Ver\\al1908.c.o.noexport .\\.\\.lake\\build\\ir\\Ver.c.o.noexport --sysroot c:\\Users\\k00929700\\.elan\\toolchains\\leanprover--lean4---v4.17.0-rc1 -L c:\\Users\\k00929700\\.elan\\toolchains\\leanprover--lean4---v4.17.0-rc1/lib -Wl,-Bstatic -lgmp -luv -lpsapi -luser32 -ladvapi32 -liphlpapi -luserenv -lws2_32 -ldbghelp -lole32 -lshell32 -lunwind -Wl,-Bdynamic -fuse-ld=lld -L c:\\Users\\k00929700\\.elan\\toolchains\\leanprover--lean4---v4.17.0-rc1\\lib\\lean -Wl,--start-group -lleancpp -lLean -Wl,--end-group -lStd -Wl,--start-group -lInit -lleanrt -Wl,--end-group -lc++ -lc++abi -lLake -lgmp -luv -lpsapi -luser32 -ladvapi32 -liphlpapi -luserenv -lws2_32 -ldbghelp -lole32 -lshell32 -lucrtbase -Wl,--stack,104857600 -licu -lm -lbcrypt -pthread\nAt line:1 char:54944\n+ ... 700\\.elan\\toolchains\\leanprover--lean4---v4.17.0-rc1/lib -Wl,-Bstatic ...\n+                                                                 ~\nMissing argument in parameter list.\nAt line:1 char:55063\n+ ...  -luserenv -lws2_32 -ldbghelp -lole32 -lshell32 -lunwind -Wl,-Bdynami ...\n+                                                                 ~\nMissing argument in parameter list.\nAt line:1 char:55170\n+ ... elan\\toolchains\\leanprover--lean4---v4.17.0-rc1\\lib\\lean -Wl,--start- ...\n+                                                                 ~\nMissing argument in parameter list.\nAt line:1 char:55205\n+ ... -v4.17.0-rc1\\lib\\lean -Wl,--start-group -lleancpp -lLean -Wl,--end-gr ...\n+                                                                 ~\nMissing argument in parameter list.\nAt line:1 char:55227\n+ ... -Wl,--start-group -lleancpp -lLean -Wl,--end-group -lStd -Wl,--start- ...\n+                                                                 ~\nMissing argument in parameter list.\nAt line:1 char:55261\n+ ...  -Wl,--end-group -lStd -Wl,--start-group -lInit -lleanrt -Wl,--end-gr ...\n+                                                                 ~\nMissing argument in parameter list.\nAt line:1 char:55407\n+ ... luserenv -lws2_32 -ldbghelp -lole32 -lshell32 -lucrtbase -Wl,--stack, ...\n+                                                                 ~\nMissing argument in parameter list.\n    + CategoryInfo          : ParserError: (:) [], ParentContainsErrorRecordException\n    + FullyQualifiedErrorId : MissingArgument\n</code></pre></div>",
        "id": 510867635,
        "sender_full_name": "Stan Kikot",
        "timestamp": 1744100236
    },
    {
        "content": "<p>The tilde is under a comma after -Wl</p>",
        "id": 510867746,
        "sender_full_name": "Stan Kikot",
        "timestamp": 1744100270
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"CodeQL\"><pre><span></span><code><span class=\"p\">(</span><span class=\"nv\">base</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"nc\">PS</span><span class=\"w\"> </span><span class=\"nc\">C</span><span class=\"p\">:</span><span class=\"err\">\\</span><span class=\"nc\">Users</span><span class=\"err\">\\</span><span class=\"nv\">k00929700</span><span class=\"err\">\\</span><span class=\"p\">.</span><span class=\"nv\">elan</span><span class=\"err\">\\</span><span class=\"nv\">workspace</span><span class=\"err\">\\</span><span class=\"nc\">Verification</span><span class=\"o\">&gt;</span><span class=\"w\"> </span><span class=\"nv\">lake</span><span class=\"w\"> </span><span class=\"nv\">build</span>\n<span class=\"err\">âœ–</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"mi\">1438</span><span class=\"o\">/</span><span class=\"mi\">1438</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"nc\">Building</span><span class=\"w\"> </span><span class=\"nv\">ver</span>\n</code></pre></div>",
        "id": 510868041,
        "sender_full_name": "Stan Kikot",
        "timestamp": 1744100356
    },
    {
        "content": "<p>error: failed to execute 'c:\\Users\\k00929700\\.elan\\toolchains\\leanprover--lean4---v4.17.0-rc1\\bin\\clang.exe': unspecified system_category error (error code: 87)<br>\nSome required builds logged failures:</p>\n<ul>\n<li>ver<br>\nerror: build failed</li>\n</ul>",
        "id": 510868162,
        "sender_full_name": "Stan Kikot",
        "timestamp": 1744100392
    },
    {
        "content": "<p>Please use code blocks. Could you also post your lakefile?</p>",
        "id": 510870035,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1744100910
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"CodeQL\"><pre><span></span><code><span class=\"nv\">name</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"s\">\"Ver\"</span>\n<span class=\"nv\">version</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"s\">\"0.1.0\"</span>\n<span class=\"nv\">defaultTargets</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"s\">\"ver\"</span><span class=\"p\">]</span>\n\n<span class=\"p\">[[</span><span class=\"nv\">lean_lib</span><span class=\"p\">]]</span>\n<span class=\"nv\">name</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"s\">\"Ver\"</span>\n\n<span class=\"p\">[[</span><span class=\"nv\">require</span><span class=\"p\">]]</span>\n<span class=\"nv\">name</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"s\">\"mathlib\"</span>\n<span class=\"nv\">path</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"s\">\"mathlib4-old\"</span>\n\n<span class=\"p\">[[</span><span class=\"nv\">lean_exe</span><span class=\"p\">]]</span>\n<span class=\"nv\">name</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"s\">\"ver\"</span>\n<span class=\"nv\">root</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"s\">\"Main\"</span>\n</code></pre></div>",
        "id": 510870819,
        "sender_full_name": "Stan Kikot",
        "timestamp": 1744101145
    },
    {
        "content": "<p>That declares an executable as a default target. If you do not want <code>lake build</code> to build that, change <code>defaultTargets</code> to <code>[\"Ver\"]</code>.</p>",
        "id": 510871286,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1744101259
    },
    {
        "content": "<p>This works. Thanks, this is exactly what I needed.</p>",
        "id": 510874346,
        "sender_full_name": "Stan Kikot",
        "timestamp": 1744102129
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"897275\">Stan Kikot</span> has marked this topic as resolved.</p>",
        "id": 510875101,
        "sender_full_name": "Notification Bot",
        "timestamp": 1744102334
    }
]