[
    {
        "content": "<p>stuck at solving universe constraint<br>\n  ?u.100581+1 =?= imax ?u.100541 ?u.100544<br>\nwhile trying to unify<br>\n  (x : ?m.939) → ?m.942 x : Sort (imax ?u.100541 ?u.100544)<br>\nwith<br>\n  (x : ?m.939) → ?m.942 x : Sort (imax ?u.100541 ?u.100544)</p>\n<p>I'm getting the above error at a bizzare place in a function which partially decides a typing relation for some language. Every toplevel match gives this error. </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"w\">      </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">succ</span><span class=\"w\"> </span><span class=\"n\">size'</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">        </span><span class=\"n\">DecOpt</span><span class=\"bp\">.</span><span class=\"n\">checkerBacktrack</span>\n<span class=\"w\">          </span><span class=\"o\">[</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">            </span><span class=\"k\">match</span><span class=\"w\"> </span><span class=\"n\">t_1</span><span class=\"w\"> </span><span class=\"k\">with</span>\n<span class=\"w\">            </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">CedarType</span><span class=\"bp\">.</span><span class=\"n\">boolType</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">BoolType</span><span class=\"bp\">.</span><span class=\"n\">ff</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">              </span><span class=\"k\">match</span><span class=\"w\"> </span><span class=\"n\">c_1</span><span class=\"w\"> </span><span class=\"k\">with</span>\n<span class=\"w\">              </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">Prod</span><span class=\"bp\">.</span><span class=\"n\">mk</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">CedarExpr</span><span class=\"bp\">.</span><span class=\"n\">lit</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">PathSet</span><span class=\"bp\">.</span><span class=\"n\">allpaths</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">                </span><span class=\"n\">DecOpt</span><span class=\"bp\">.</span><span class=\"n\">andOptList</span>\n<span class=\"w\">                  </span><span class=\"o\">[</span><span class=\"n\">DecOpt</span><span class=\"bp\">.</span><span class=\"n\">decOpt</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">HasTypePrim</span><span class=\"w\"> </span><span class=\"n\">b_1</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">CedarType</span><span class=\"bp\">.</span><span class=\"n\">boolType</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">BoolType</span><span class=\"bp\">.</span><span class=\"n\">ff</span><span class=\"o\">)))</span><span class=\"w\"> </span><span class=\"n\">initSize</span><span class=\"o\">,</span>\n<span class=\"w\">                    </span><span class=\"n\">DecOpt</span><span class=\"bp\">.</span><span class=\"n\">decOpt</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">HasTypePrim</span><span class=\"w\"> </span><span class=\"n\">b_1</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">CedarType</span><span class=\"bp\">.</span><span class=\"n\">boolType</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">BoolType</span><span class=\"bp\">.</span><span class=\"n\">ff</span><span class=\"o\">)))</span><span class=\"w\"> </span><span class=\"n\">initSize</span><span class=\"o\">]</span>\n<span class=\"w\">              </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">Option</span><span class=\"bp\">.</span><span class=\"n\">some</span><span class=\"w\"> </span><span class=\"n\">Bool</span><span class=\"bp\">.</span><span class=\"n\">false</span>\n<span class=\"w\">            </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">Option</span><span class=\"bp\">.</span><span class=\"n\">some</span><span class=\"w\"> </span><span class=\"n\">Bool</span><span class=\"bp\">.</span><span class=\"n\">false</span><span class=\"o\">,</span>\n<span class=\"w\">            </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">            </span><span class=\"k\">match</span><span class=\"w\"> </span><span class=\"n\">c_1</span><span class=\"w\"> </span><span class=\"k\">with</span>\n<span class=\"w\">            </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">Prod</span><span class=\"bp\">.</span><span class=\"n\">mk</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">CedarExpr</span><span class=\"bp\">.</span><span class=\"n\">lit</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">PathSet</span><span class=\"bp\">.</span><span class=\"n\">somepaths</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">nil</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">              </span><span class=\"n\">DecOpt</span><span class=\"bp\">.</span><span class=\"n\">andOptList</span>\n<span class=\"w\">                </span><span class=\"o\">[</span><span class=\"n\">DecOpt</span><span class=\"bp\">.</span><span class=\"n\">decOpt</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">HasTypePrim</span><span class=\"w\"> </span><span class=\"n\">b_1</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"n\">t_1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">initSize</span><span class=\"o\">,</span>\n<span class=\"w\">                  </span><span class=\"n\">DecOpt</span><span class=\"bp\">.</span><span class=\"n\">andOptList</span>\n<span class=\"w\">                    </span><span class=\"o\">[</span><span class=\"n\">DecOpt</span><span class=\"bp\">.</span><span class=\"n\">decOpt</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Ne</span><span class=\"w\"> </span><span class=\"n\">t_1</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">CedarType</span><span class=\"bp\">.</span><span class=\"n\">boolType</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">BoolType</span><span class=\"bp\">.</span><span class=\"n\">ff</span><span class=\"o\">)))</span><span class=\"w\"> </span><span class=\"n\">initSize</span><span class=\"o\">,</span>\n<span class=\"w\">                      </span><span class=\"n\">DecOpt</span><span class=\"bp\">.</span><span class=\"n\">andOptList</span>\n<span class=\"w\">                        </span><span class=\"o\">[</span><span class=\"n\">DecOpt</span><span class=\"bp\">.</span><span class=\"n\">decOpt</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">HasTypePrim</span><span class=\"w\"> </span><span class=\"n\">b_1</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"n\">t_1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">initSize</span><span class=\"o\">,</span>\n<span class=\"w\">                          </span><span class=\"n\">DecOpt</span><span class=\"bp\">.</span><span class=\"n\">decOpt</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Ne</span><span class=\"w\"> </span><span class=\"n\">t_1</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">CedarType</span><span class=\"bp\">.</span><span class=\"n\">boolType</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">BoolType</span><span class=\"bp\">.</span><span class=\"n\">ff</span><span class=\"o\">)))</span><span class=\"w\"> </span><span class=\"n\">initSize</span><span class=\"o\">]]]</span>\n<span class=\"w\">            </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">Option</span><span class=\"bp\">.</span><span class=\"n\">some</span><span class=\"w\"> </span><span class=\"n\">Bool</span><span class=\"bp\">.</span><span class=\"n\">false</span><span class=\"o\">,</span>\n<span class=\"w\">            </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">            </span><span class=\"k\">match</span><span class=\"w\"> </span><span class=\"n\">c_1</span><span class=\"w\"> </span><span class=\"k\">with</span>\n<span class=\"w\">            </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">Prod</span><span class=\"bp\">.</span><span class=\"n\">mk</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">CedarExpr</span><span class=\"bp\">.</span><span class=\"n\">var</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">PathSet</span><span class=\"bp\">.</span><span class=\"n\">somepaths</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">nil</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">              </span><span class=\"n\">DecOpt</span><span class=\"bp\">.</span><span class=\"n\">andOptList</span>\n<span class=\"w\">                </span><span class=\"o\">[</span><span class=\"n\">DecOpt</span><span class=\"bp\">.</span><span class=\"n\">decOpt</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">HasTypeVar</span><span class=\"w\"> </span><span class=\"n\">b_1</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"n\">t_1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">initSize</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">DecOpt</span><span class=\"bp\">.</span><span class=\"n\">decOpt</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">HasTypeVar</span><span class=\"w\"> </span><span class=\"n\">b_1</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"n\">t_1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">initSize</span><span class=\"o\">]</span>\n<span class=\"w\">            </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">Option</span><span class=\"bp\">.</span><span class=\"n\">some</span><span class=\"w\"> </span><span class=\"n\">Bool</span><span class=\"bp\">.</span><span class=\"n\">false</span><span class=\"o\">,</span>\n</code></pre></div>\n<p>The errors disappear when I delete this much later case in this list:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"w\">            </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n\n<span class=\"w\">            </span><span class=\"k\">match</span><span class=\"w\"> </span><span class=\"n\">t_1</span><span class=\"w\"> </span><span class=\"k\">with</span>\n\n<span class=\"w\">            </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">CedarType</span><span class=\"bp\">.</span><span class=\"n\">boolType</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">BoolType</span><span class=\"bp\">.</span><span class=\"n\">anyBool</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n\n<span class=\"w\">              </span><span class=\"k\">match</span><span class=\"w\"> </span><span class=\"n\">c_1</span><span class=\"w\"> </span><span class=\"k\">with</span>\n\n<span class=\"w\">              </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">Prod</span><span class=\"bp\">.</span><span class=\"n\">mk</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">CedarExpr</span><span class=\"bp\">.</span><span class=\"n\">binaryApp</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">BinaryOp</span><span class=\"bp\">.</span><span class=\"n\">containsAny</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">E1</span><span class=\"w\"> </span><span class=\"n\">E2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">PathSet</span><span class=\"bp\">.</span><span class=\"n\">somepaths</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">nil</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n\n<span class=\"w\">                </span><span class=\"n\">EnumeratorCombinators</span><span class=\"bp\">.</span><span class=\"n\">enumerating</span><span class=\"w\"> </span><span class=\"n\">Enum</span><span class=\"bp\">.</span><span class=\"n\">enum</span>\n\n<span class=\"w\">                  </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">ets</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n\n<span class=\"w\">                    </span><span class=\"n\">EnumeratorCombinators</span><span class=\"bp\">.</span><span class=\"n\">enumeratingOpt</span>\n\n<span class=\"w\">                      </span><span class=\"o\">(</span><span class=\"n\">EnumSizedSuchThat</span><span class=\"bp\">.</span><span class=\"n\">enumSizedST</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">ns</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">DefinedEntities</span><span class=\"w\"> </span><span class=\"n\">ets</span><span class=\"w\"> </span><span class=\"n\">ns</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">initSize</span><span class=\"o\">)</span>\n\n<span class=\"w\">                      </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">ns</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n\n<span class=\"w\">                        </span><span class=\"n\">EnumeratorCombinators</span><span class=\"bp\">.</span><span class=\"n\">enumerating</span><span class=\"w\"> </span><span class=\"n\">Enum</span><span class=\"bp\">.</span><span class=\"n\">enum</span>\n\n<span class=\"w\">                          </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">T</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n\n<span class=\"w\">                            </span><span class=\"n\">DecOpt</span><span class=\"bp\">.</span><span class=\"n\">andOptList</span>\n\n<span class=\"w\">                              </span><span class=\"o\">[</span><span class=\"n\">DecOpt</span><span class=\"bp\">.</span><span class=\"n\">decOpt</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">WfCedarType</span><span class=\"w\"> </span><span class=\"n\">ns</span><span class=\"w\"> </span><span class=\"n\">T</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">initSize</span><span class=\"o\">,</span>\n\n<span class=\"w\">                                </span><span class=\"n\">EnumeratorCombinators</span><span class=\"bp\">.</span><span class=\"n\">enumerating</span><span class=\"w\"> </span><span class=\"n\">Enum</span><span class=\"bp\">.</span><span class=\"n\">enum</span>\n\n<span class=\"w\">                                  </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">T1</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n\n<span class=\"w\">                                    </span><span class=\"n\">DecOpt</span><span class=\"bp\">.</span><span class=\"n\">andOptList</span>\n\n<span class=\"w\">                                      </span><span class=\"o\">[</span><span class=\"n\">DecOpt</span><span class=\"bp\">.</span><span class=\"n\">decOpt</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">SubType</span><span class=\"w\"> </span><span class=\"n\">T1</span><span class=\"w\"> </span><span class=\"n\">T</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">initSize</span><span class=\"o\">,</span>\n\n<span class=\"w\">                                        </span><span class=\"n\">EnumeratorCombinators</span><span class=\"bp\">.</span><span class=\"n\">enumerating</span><span class=\"w\"> </span><span class=\"n\">Enum</span><span class=\"bp\">.</span><span class=\"n\">enum</span>\n\n<span class=\"w\">                                          </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">T2</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n\n<span class=\"w\">                                            </span><span class=\"n\">DecOpt</span><span class=\"bp\">.</span><span class=\"n\">andOptList</span>\n\n<span class=\"w\">                                              </span><span class=\"o\">[</span><span class=\"n\">DecOpt</span><span class=\"bp\">.</span><span class=\"n\">decOpt</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">SubType</span><span class=\"w\"> </span><span class=\"n\">T2</span><span class=\"w\"> </span><span class=\"n\">T</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">initSize</span><span class=\"o\">,</span>\n\n<span class=\"w\">                                                </span><span class=\"n\">EnumeratorCombinators</span><span class=\"bp\">.</span><span class=\"n\">enumerating</span><span class=\"w\"> </span><span class=\"n\">Enum</span><span class=\"bp\">.</span><span class=\"n\">enum</span>\n\n<span class=\"w\">                                                  </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">acts</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n\n<span class=\"w\">                                                    </span><span class=\"n\">EnumeratorCombinators</span><span class=\"bp\">.</span><span class=\"n\">enumerating</span><span class=\"w\"> </span><span class=\"n\">Enum</span><span class=\"bp\">.</span><span class=\"n\">enum</span>\n\n<span class=\"w\">                                                      </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n\n<span class=\"w\">                                                        </span><span class=\"n\">DecOpt</span><span class=\"bp\">.</span><span class=\"n\">andOptList</span>\n\n<span class=\"w\">                                                          </span><span class=\"o\">[</span><span class=\"n\">DecOpt</span><span class=\"bp\">.</span><span class=\"n\">decOpt</span>\n\n<span class=\"w\">                                                              </span><span class=\"o\">(</span><span class=\"n\">Eq</span><span class=\"w\"> </span><span class=\"n\">b_1</span>\n\n<span class=\"w\">                                                                </span><span class=\"o\">(</span><span class=\"n\">Environment</span><span class=\"bp\">.</span><span class=\"n\">MkEnvironment</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Schema</span><span class=\"bp\">.</span><span class=\"n\">MkSchema</span><span class=\"w\"> </span><span class=\"n\">ets</span><span class=\"w\"> </span><span class=\"n\">acts</span><span class=\"o\">)</span>\n\n<span class=\"w\">                                                                  </span><span class=\"n\">R</span><span class=\"o\">))</span>\n\n<span class=\"w\">                                                              </span><span class=\"n\">initSize</span><span class=\"o\">,</span>\n\n<span class=\"w\">                                                            </span><span class=\"n\">EnumeratorCombinators</span><span class=\"bp\">.</span><span class=\"n\">enumerating</span><span class=\"w\"> </span><span class=\"n\">Enum</span><span class=\"bp\">.</span><span class=\"n\">enum</span>\n\n<span class=\"w\">                                                              </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">x1</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n\n<span class=\"w\">                                                                </span><span class=\"n\">DecOpt</span><span class=\"bp\">.</span><span class=\"n\">andOptList</span>\n\n<span class=\"w\">                                                                  </span><span class=\"o\">[</span><span class=\"n\">aux_dec</span><span class=\"w\"> </span><span class=\"n\">initSize</span><span class=\"w\"> </span><span class=\"n\">size'</span><span class=\"w\"> </span><span class=\"n\">a_1</span><span class=\"w\"> </span><span class=\"n\">b_1</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Prod</span><span class=\"bp\">.</span><span class=\"n\">mk</span><span class=\"w\"> </span><span class=\"n\">E1</span><span class=\"w\"> </span><span class=\"n\">x1</span><span class=\"o\">)</span>\n\n<span class=\"w\">                                                                      </span><span class=\"o\">(</span><span class=\"n\">CedarType</span><span class=\"bp\">.</span><span class=\"n\">setType</span><span class=\"w\"> </span><span class=\"n\">T1</span><span class=\"o\">),</span>\n\n<span class=\"w\">                                                                    </span><span class=\"n\">EnumeratorCombinators</span><span class=\"bp\">.</span><span class=\"n\">enumerating</span><span class=\"w\"> </span><span class=\"n\">Enum</span><span class=\"bp\">.</span><span class=\"n\">enum</span>\n\n<span class=\"w\">                                                                      </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">x2</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n\n<span class=\"w\">                                                                        </span><span class=\"n\">aux_dec</span><span class=\"w\"> </span><span class=\"n\">initSize</span><span class=\"w\"> </span><span class=\"n\">size'</span><span class=\"w\"> </span><span class=\"n\">a_1</span><span class=\"w\"> </span><span class=\"n\">b_1</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Prod</span><span class=\"bp\">.</span><span class=\"n\">mk</span><span class=\"w\"> </span><span class=\"n\">E2</span><span class=\"w\"> </span><span class=\"n\">x2</span><span class=\"o\">)</span>\n\n<span class=\"w\">                                                                          </span><span class=\"o\">(</span><span class=\"n\">CedarType</span><span class=\"bp\">.</span><span class=\"n\">setType</span><span class=\"w\"> </span><span class=\"n\">T2</span><span class=\"o\">))</span>\n\n<span class=\"w\">                                                                      </span><span class=\"o\">(</span><span class=\"n\">min</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"n\">initSize</span><span class=\"o\">)])</span>\n\n<span class=\"w\">                                                              </span><span class=\"o\">(</span><span class=\"n\">min</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"n\">initSize</span><span class=\"o\">)])</span>\n\n<span class=\"w\">                                                      </span><span class=\"o\">(</span><span class=\"n\">min</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"n\">initSize</span><span class=\"o\">))</span>\n\n<span class=\"w\">                                                  </span><span class=\"o\">(</span><span class=\"n\">min</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"n\">initSize</span><span class=\"o\">)])</span>\n\n<span class=\"w\">                                          </span><span class=\"o\">(</span><span class=\"n\">min</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"n\">initSize</span><span class=\"o\">)])</span>\n\n<span class=\"w\">                                  </span><span class=\"o\">(</span><span class=\"n\">min</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"n\">initSize</span><span class=\"o\">)])</span>\n\n<span class=\"w\">                          </span><span class=\"o\">(</span><span class=\"n\">min</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"n\">initSize</span><span class=\"o\">))</span>\n\n<span class=\"w\">                      </span><span class=\"o\">(</span><span class=\"n\">min</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"n\">initSize</span><span class=\"o\">))</span>\n\n<span class=\"w\">                  </span><span class=\"o\">(</span><span class=\"n\">min</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"n\">initSize</span><span class=\"o\">)</span>\n\n<span class=\"w\">              </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">Option</span><span class=\"bp\">.</span><span class=\"n\">some</span><span class=\"w\"> </span><span class=\"n\">Bool</span><span class=\"bp\">.</span><span class=\"n\">false</span>\n\n<span class=\"w\">            </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">Option</span><span class=\"bp\">.</span><span class=\"n\">some</span><span class=\"w\"> </span><span class=\"n\">Bool</span><span class=\"bp\">.</span><span class=\"n\">false</span><span class=\"o\">,</span>\n\n<span class=\"o\">])</span>\n</code></pre></div>\n<p>I do not know why this happens, and I'm not sure how best to figure this out.  Any advice would be greatly appreciated.</p>\n<p>Best,<br>\n-Segev</p>",
        "id": 541328326,
        "sender_full_name": "Segev Elazar Mittelman",
        "timestamp": 1758746911
    },
    {
        "content": "<p>Very interestingly,  this error also disappears if I annotate the _ in fun _ =&gt; as</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Unit</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">   </span><span class=\"k\">match</span><span class=\"w\"> </span><span class=\"n\">t_1</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"bp\">....</span>\n</code></pre></div>",
        "id": 541329410,
        "sender_full_name": "Segev Elazar Mittelman",
        "timestamp": 1758747415
    },
    {
        "content": "<p>can you give a <a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a></p>",
        "id": 541329803,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758747590
    },
    {
        "content": "<p>I can try to make one, but I suspect this problem is triggered by the sheer size of this function, I think the universe inference is getting overwhelmed. Just tried deleting all but the problematic section and the section that that causes an error in and the error also resolved.</p>",
        "id": 541330219,
        "sender_full_name": "Segev Elazar Mittelman",
        "timestamp": 1758747750
    },
    {
        "content": "<p>that's not how universe inference works</p>",
        "id": 541334317,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758749677
    },
    {
        "content": "<p>if it was getting overwhelmed you would see something like <code>(deterministic) timeout at 'whnf', maximum number of heatbeats (20000) has been reached</code></p>",
        "id": 541334380,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758749717
    },
    {
        "content": "<p>\"stuck at solving universe constraint\" is a different error</p>",
        "id": 541334410,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758749737
    }
]