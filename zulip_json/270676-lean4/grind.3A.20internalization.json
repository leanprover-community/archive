[
    {
        "content": "<p>What does it mean for an expression to be \"internalized\" in grind, and which expressions are internalized?<br>\nDoes \"internalized\" mean that the expression is represented \"explicitly\" in the e-graph (ie. there's an e-node <code>n</code> where <code>n.self</code> is the given expression)? If so, does that mean one would encounter it, e.g., by means of <code>traverseEqc</code>?</p>\n<p>As a concrete example, consider:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">set_option</span><span class=\"w\"> </span><span class=\"n\">trace</span><span class=\"bp\">.</span><span class=\"n\">grind</span><span class=\"bp\">.</span><span class=\"n\">internalize</span><span class=\"w\"> </span><span class=\"n\">true</span><span class=\"w\"> </span><span class=\"k\">in</span>\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h₁</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h₂</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">grind</span>\n<span class=\"c\">/-</span>\n<span class=\"cm\">[grind.internalize] [0] a</span>\n<span class=\"cm\">[grind.internalize] [0] b</span>\n<span class=\"cm\">[grind.internalize] [0] c</span>\n<span class=\"cm\">[grind.internalize] [0] f a = f c</span>\n<span class=\"cm\">[grind.internalize] [0] Nat</span>\n<span class=\"cm\">[grind.internalize] [0] f a</span>\n<span class=\"cm\">[grind.internalize] [0] f</span>\n<span class=\"cm\">[grind.internalize] [0] f c</span>\n<span class=\"cm\">-/</span>\n</code></pre></div>\n<p>Here <code>f a</code> and <code>f c</code> are internalized (presumably because they appear explicitly in the goal <code>f a = f c</code>, and all subterms of internalized expressions must also be internalized?). However, the intermediate term <code>f b</code> is not internalized. Thus, presumably <code>f a</code> and <code>f c</code> appear explicitly in the same e-class, whereas <code>f b</code> is only implicitly equivalent to the previous terms by virtue of <code>a</code>, <code>b</code> and <code>c</code> being in the same e-class. Is that right?</p>",
        "id": 559008679,
        "sender_full_name": "Marcus Rossel",
        "timestamp": 1763981504
    }
]