[
    {
        "content": "<p><a href=\"https://github.com/leanprover/lean4/blob/c7a9a4e18c2c1defa4261b852f38f6d67f18eb1c/src/Lean/Environment.lean#L1399\">link to the <code>panic</code> call</a></p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"sd\">/--</span>\n<span class=\"sd\">info: PANIC at Lean.EnvExtension.modifyState Lean.Environment:1399:17: `asyncDecl` `foo.f` is outside current context foo</span>\n<span class=\"sd\">backtrace:</span>\n<span class=\"sd\">-/</span>\n<span class=\"bp\">#</span><span class=\"n\">guard_msgs</span><span class=\"w\"> </span><span class=\"k\">in</span>\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">foo</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">True</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">rec</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">    </span><span class=\"k\">match</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"k\">with</span>\n<span class=\"w\">    </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">zero</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"mi\">0</span>\n<span class=\"w\">    </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">succ</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">n</span>\n<span class=\"w\">  </span><span class=\"n\">trivial</span>\n</code></pre></div>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"sd\">/--</span>\n<span class=\"sd\">info: Lean 4.29.0-nightly-2026-02-01</span>\n<span class=\"sd\">Target: x86_64-unknown-linux-gnu</span>\n<span class=\"sd\">-/</span>\n<span class=\"bp\">#</span><span class=\"n\">guard_msgs</span><span class=\"w\"> </span><span class=\"k\">in</span>\n<span class=\"bp\">#</span><span class=\"n\">version</span>\n</code></pre></div>",
        "id": 571349554,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1770009874
    },
    {
        "content": "<p>Thank you for your report!<br>\nCan you create the issue at leanprover/lean4?</p>",
        "id": 571351386,
        "sender_full_name": "Miyahara Kō",
        "timestamp": 1770011331
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"569722\">Miyahara Kō</span> <a href=\"#narrow/channel/270676-lean4/topic/PANIC.20at.20Lean.2EEnvExtension.2EmodifyState/near/571351386\">said</a>:</p>\n<blockquote>\n<p>Thank you for your report!<br>\nCan you create the issue at leanprover/lean4?</p>\n</blockquote>\n<p>Hello, do you work for the FRO or acting in some official capacity for Lean? Because I couldn't tell from your GitHub. If you're a random contributor like me, please do not acknowledge my report, as you are not the intended target (unless of course you're able to fix this).<br>\nIn any case, I've opened <a href=\"https://github.com/leanprover/lean4/pull/12268\">lean4#12268</a>, though I find Zulip threads work better than issues for such things.</p>",
        "id": 571355482,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1770014147
    },
    {
        "content": "<p>I’m very sorry. I’m just a random contributor, so I’ll be more careful from now on.</p>",
        "id": 571356670,
        "sender_full_name": "Miyahara Kō",
        "timestamp": 1770014868
    },
    {
        "content": "<p>Hey Snir, I think that reaction was unnecessarily harsh. Filing an issue is the most reliable approach, even if a zulip thread sometimes works</p>",
        "id": 571371551,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1770021190
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"307953\">@Ruben Van de Velde</span> <br>\nThank you for your concern. This is just my personal speculation, but I think Snir probably didn’t intend to sound that harsh. For non-native speakers, it can be difficult to judge the tone of such messages.</p>",
        "id": 571372464,
        "sender_full_name": "Miyahara Kō",
        "timestamp": 1770021556
    },
    {
        "content": "<p>(I'm non-native, too.)</p>",
        "id": 571372530,
        "sender_full_name": "Miyahara Kō",
        "timestamp": 1770021582
    },
    {
        "content": "<p>Indeed, I'd say if you're posting about an issue on Zulip, then I (as an FRO employee!) am rather hoping that someone other than me will jump in with suggestions, advice, solutions, or indeed even the instructions that you need to open issues if you don't want your request to get lost. :-)</p>",
        "id": 571403155,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1770030310
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"307953\">Ruben Van de Velde</span> <a href=\"#narrow/channel/270676-lean4/topic/PANIC.20at.20Lean.2EEnvExtension.2EmodifyState/near/571371551\">said</a>:</p>\n<blockquote>\n<p>I think that reaction was unnecessarily harsh. Filing an issue is the most reliable approach, even if a zulip thread sometimes works</p>\n</blockquote>\n<p>Sorry, I really tried to make that message sound as pleasant as possible, do you have any suggestions for the future?<br>\nI felt deceived by the \"thank you for the report\", the \"create an issue\" part is fine as long as it's clear it's not a request coming from the maintainers but rather a helpful community member (e.g. \"I recommend creating an issue\").</p>\n<p>FWIW I've reported a few issues so far, and in my experience posting on Zulip has a much higher success rate than opening an issue, and is a better experience overall.</p>",
        "id": 571492570,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1770054475
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110087\">Kim Morrison</span> <a href=\"#narrow/channel/270676-lean4/topic/PANIC.20at.20Lean.2EEnvExtension.2EmodifyState/near/571403155\">said</a>:</p>\n<blockquote>\n<p>Indeed, I'd say if you're posting about an issue on Zulip, then I (as an FRO employee!) am rather hoping that someone other than me will jump in with suggestions, advice, solutions, or indeed even the instructions that you need to open issues if you don't want your request to get lost. :-)</p>\n</blockquote>\n<p>That's why I wrote \"(unless of course you're able to fix this)\", which hopefully matches what you mean.<br>\nbtw <a href=\"#narrow/channel/270676-lean4/topic/Grind.20error.20and.20panic.20at.20.60mkEqProofImpl.60/near/569406795\">here's</a> a previous report which seems related to the Zulip vs issues debate here.</p>",
        "id": 571494025,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1770054934
    },
    {
        "content": "<p>When I first saw this post, it only described the bug, and I wasn’t sure what you specifically wanted people to do, so I suggested creating an issue for now.<br>\nSo next time, I think it would be better to first open an issue and then ask people who seem able to help to look into it.</p>\n<p>Also, something I personally worry about is that your contributions might decrease because you’re troubled by minor communication mishaps. I sometimes have similar experiences myself.<br>\nI’m not bothered at all, so I think it’s best to forget about this and feel free to keep contributing! <span aria-label=\"smile\" class=\"emoji emoji-1f604\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 571540267,
        "sender_full_name": "Miyahara Kō",
        "timestamp": 1770072490
    }
]