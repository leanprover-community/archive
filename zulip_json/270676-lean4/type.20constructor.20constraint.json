[
    {
        "content": "<p>Appologies for possible neglegence,</p>\n<p>Suppose I have (many) inductive type for Capacity:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">inductive</span><span class=\"w\"> </span><span class=\"n\">Capacity</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">c1</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">c2</span>\n\n<span class=\"kn\">class</span><span class=\"w\"> </span><span class=\"n\">CapacityValue</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"o\">:</span><span class=\"kt\">Type</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">capacity_of</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span>\n</code></pre></div>\n<p>Now I want to have a type that can only be constructed if its parameter is smaller than capacity, something like</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">inductive</span><span class=\"w\"> </span><span class=\"n\">WithinCapacity</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">nil</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">within_capacity</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">c</span><span class=\"o\">:</span><span class=\"kt\">Type</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">:</span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">CapacityValue</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">n</span><span class=\"bp\">&lt;=</span><span class=\"w\"> </span><span class=\"n\">CapacityValue</span><span class=\"bp\">.</span><span class=\"n\">capacity_of</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">...</span>\n</code></pre></div>\n<p>Can I dot it? and how if I can?</p>",
        "id": 547541573,
        "sender_full_name": "Mikhail Katkov",
        "timestamp": 1761669238
    },
    {
        "content": "<p>please use <a href=\"https://github.com/leanprover-community/mathlib/wiki/Code-in-backticks\">#backticks</a> to format your code</p>",
        "id": 547541771,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761669288
    },
    {
        "content": "<p>that should be possible, you just won't be able to use <code>[]</code> for it, in Lean <code>[]</code> and <code>()</code> have specialised meanings and are used for different situations</p>",
        "id": 547542035,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761669356
    },
    {
        "content": "<p><code>[]</code> is only used for classes</p>",
        "id": 547542106,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761669375
    },
    {
        "content": "<p>So how technically I can impose constraint?</p>",
        "id": 547554433,
        "sender_full_name": "Mikhail Katkov",
        "timestamp": 1761672984
    },
    {
        "content": "<p>use <code>()</code></p>",
        "id": 547555524,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761673365
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">class</span><span class=\"w\"> </span><span class=\"n\">CapacityValue</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"o\">:</span><span class=\"kt\">Type</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">capacity_of</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span>\n\n<span class=\"w\">  </span><span class=\"kn\">inductive</span><span class=\"w\"> </span><span class=\"n\">WithinCapacity</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">nil</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">WithinCapacity</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">within_capacity</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">c</span><span class=\"o\">:</span><span class=\"kt\">Type</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">:</span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">CapacityValue</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">&lt;=</span><span class=\"w\"> </span><span class=\"n\">CapacityValue</span><span class=\"bp\">.</span><span class=\"n\">capacity_of</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">WithinCapacity</span>\n</code></pre></div>\n<p>unexpected token '&lt;='; expected ')'</p>",
        "id": 547563833,
        "sender_full_name": "Mikhail Katkov",
        "timestamp": 1761676169
    },
    {
        "content": "<p>You need to name the hypothesis</p>",
        "id": 547564438,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761676417
    },
    {
        "content": "<p>Oh! thanks a lot.</p>\n<p>For completness, if anyone encounter that:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">class</span><span class=\"w\"> </span><span class=\"n\">CapacityValue</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"o\">:</span><span class=\"kt\">Type</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">capacity_of</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span>\n\n<span class=\"w\">  </span><span class=\"kn\">inductive</span><span class=\"w\"> </span><span class=\"n\">WithinCapacity</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">nil</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">WithinCapacity</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">within_capacity</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">c</span><span class=\"o\">:</span><span class=\"kt\">Type</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">:</span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">CapacityValue</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"bp\">&lt;=</span><span class=\"w\"> </span><span class=\"n\">CapacityValue</span><span class=\"bp\">.</span><span class=\"n\">capacity_of</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">WithinCapacity</span>\n</code></pre></div>\n<p>Works!</p>",
        "id": 547564774,
        "sender_full_name": "Mikhail Katkov",
        "timestamp": 1761676542
    }
]