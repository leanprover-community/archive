[
    {
        "content": "<p>I don't know if this is because of my settings (which I have left as the default) or it occurs for everyone. I use Lean4 plugin for Emacs. If I have some code like this</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"c\">/-</span>\n<span class=\"cm\">comment</span>\n<span class=\"cm\">-/</span>\n<span class=\"kd\">def</span><span class=\"w\"> </span><span class=\"n\">mystery</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n</code></pre></div>\n<p>when I try to insert a new line after <code>comment</code>, I get</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"c\">/-</span>\n<span class=\"cm\">comment-/</span>\n<span class=\"c\">/-</span>\n<span class=\"cm\">-/</span>\n<span class=\"kd\">def</span><span class=\"w\"> </span><span class=\"n\">mystery</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n</code></pre></div>\n<p>Two additional comment delimiters get inserted automatically. How can I prevent this from happening? It gets very annoying when I type multi-line comments</p>",
        "id": 468964056,
        "sender_full_name": "Leni Aniva",
        "timestamp": 1725937392
    },
    {
        "content": "<p>I set <code>comment-multi-line t</code> in <code>lean4-mode</code>, which seems to make Emacs's behaviour slightly less annoying. I tried to fully fix the issue at some point, but didn't manage.</p>",
        "id": 468993209,
        "sender_full_name": "Jannis Limperg",
        "timestamp": 1725948397
    },
    {
        "content": "<p>How are you attempting to insert a newline?  I only get the behavior you describe using <code>default-indent-new-line</code> (bound to <code>M-j</code> for me), and not via <code>newline</code> (bound to <code>RET</code> for me).</p>",
        "id": 470381092,
        "sender_full_name": "Paul Nelson",
        "timestamp": 1726429962
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"571592\">Paul Nelson</span> <a href=\"#narrow/stream/270676-lean4/topic/Lean.20LSP.20inserts.20comment.20delimiters.20after.20return/near/470381092\">said</a>:</p>\n<blockquote>\n<p>How are you attempting to insert a newline?  I only get the behavior you describe using <code>default-indent-new-line</code> (bound to <code>M-j</code> for me), and not via <code>newline</code> (bound to <code>RET</code> for me).</p>\n</blockquote>\n<p>same, but my keybinding binds <code>RET</code> to <code>default-indent-new-line</code></p>",
        "id": 470389265,
        "sender_full_name": "Leni Aniva",
        "timestamp": 1726435647
    }
]