[
    {
        "content": "<p>one <a href=\"/user_uploads/3121/Bi97y7hgRftlglBmcsZLi5DA/Screenshot-from-2025-04-15-15-10-00.png\">Screenshot from 2025-04-15 15-10-00.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/Bi97y7hgRftlglBmcsZLi5DA/Screenshot-from-2025-04-15-15-10-00.png\" title=\"Screenshot from 2025-04-15 15-10-00.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"2933x991\" src=\"/user_uploads/thumbnail/3121/Bi97y7hgRftlglBmcsZLi5DA/Screenshot-from-2025-04-15-15-10-00.png/840x560.webp\"></a></div><p>I have an induction goal that I can close with aesop. Even though I don't need this, I would like to use the output of <code>aesop?</code> instead. However, <code>aesop?</code> provides me five separate <code>try this?</code>s instead of one. Each suggestion is meant to work for one branch of the induction tactic. Is there  a way to just one common suggestion?</p>",
        "id": 512316737,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1744722737
    },
    {
        "content": "<p>To make it clear, I have already solved the problem by taking the simp lemmas suggested in each try this and pasting them together in a <code>try simp_all</code>:<br>\n<a href=\"/user_uploads/3121/7RC8M-Br74QLKWcCbwcgLue7/Screenshot-from-2025-04-15-15-13-00.png\">Screenshot from 2025-04-15 15-13-00.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/7RC8M-Br74QLKWcCbwcgLue7/Screenshot-from-2025-04-15-15-13-00.png\" title=\"Screenshot from 2025-04-15 15-13-00.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"1821x866\" src=\"/user_uploads/thumbnail/3121/7RC8M-Br74QLKWcCbwcgLue7/Screenshot-from-2025-04-15-15-13-00.png/840x560.webp\"></a></div>",
        "id": 512317008,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1744722814
    },
    {
        "content": "<p>I just wish to know if I can instead get one <code>try this</code> which gives a common proof that works on all branches</p>",
        "id": 512317108,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1744722839
    },
    {
        "content": "<p>I'm not sure whether I can detect, from within each Aesop call, that the different calls belong together. If so, something could be done, though I would likely just generate <code>first | alt1 | alt2 | ...</code>, which is maybe not much better. Please feel free to open an issue.</p>",
        "id": 512318036,
        "sender_full_name": "Jannis Limperg",
        "timestamp": 1744723044
    },
    {
        "content": "<p>So one trick might be to merge all the proofs by concatenating them in sequence with <code>try</code> on each suggestion</p>",
        "id": 512318284,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1744723100
    },
    {
        "content": "<p>Oh I just remembered that <code>first | ..</code> does that</p>\n<p>EDIT : maybe <code>first | try alt1 | try alt2 |..</code>?</p>",
        "id": 512318472,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1744723145
    },
    {
        "content": "<p>As a much simpler test-case:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Aesop</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Q</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"bp\">×</span><span class=\"w\"> </span><span class=\"n\">Q</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">×</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"bp\">×</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">constructor</span><span class=\"w\"> </span><span class=\"bp\">&lt;;&gt;</span><span class=\"w\"> </span><span class=\"n\">constructor</span><span class=\"w\"> </span><span class=\"bp\">&lt;;&gt;</span><span class=\"w\"> </span><span class=\"n\">aesop?</span>\n</code></pre></div>",
        "id": 512318755,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1744723207
    },
    {
        "content": "<p>In this particular case you could produce</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Q</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"bp\">×</span><span class=\"w\"> </span><span class=\"n\">Q</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">×</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"bp\">×</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">constructor</span><span class=\"w\"> </span><span class=\"bp\">&lt;;&gt;</span><span class=\"w\"> </span><span class=\"n\">constructor</span><span class=\"w\"> </span><span class=\"bp\">&lt;;&gt;</span><span class=\"w\"> </span><span class=\"o\">[(</span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"o\">)</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"o\">)</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"o\">)</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"o\">)]</span>\n</code></pre></div>\n<p>but this doesn't work if the proof started as</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Q</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"bp\">×</span><span class=\"w\"> </span><span class=\"n\">Q</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">×</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"bp\">×</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">constructor</span><span class=\"w\"> </span><span class=\"bp\">&lt;;&gt;</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">constructor</span><span class=\"w\"> </span><span class=\"bp\">&lt;;&gt;</span><span class=\"w\"> </span><span class=\"n\">aesop?</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 512319145,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1744723313
    },
    {
        "content": "<p>And the results of aesop? suggestions can be concatentated as :</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Aesop</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Q</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"bp\">×</span><span class=\"w\"> </span><span class=\"n\">Q</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">×</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"bp\">×</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">constructor</span><span class=\"w\"> </span><span class=\"bp\">&lt;;&gt;</span>\n<span class=\"w\">  </span><span class=\"n\">constructor</span><span class=\"w\"> </span><span class=\"bp\">&lt;;&gt;</span>\n<span class=\"w\">    </span><span class=\"n\">try</span><span class=\"w\"> </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">try</span><span class=\"w\"> </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">try</span><span class=\"w\"> </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">try</span><span class=\"w\"> </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">s</span>\n</code></pre></div>",
        "id": 512319158,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1744723316
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"466334\">@Shreyas Srinivas</span>, this is just <code>first | exact p | exact q | exact r | exact s</code> which was what Jannis suggested earlier</p>",
        "id": 512319523,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1744723401
    },
    {
        "content": "<p>Anyway, in my example all I had to do was put a <code>try</code> in front of the terminal  simp_all suggestion and concatenate the lemma list. I guess this is harder to infer in general.</p>",
        "id": 512320221,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1744723565
    },
    {
        "content": "<p><code>try</code> is worse than putting <code>first |</code></p>",
        "id": 512320640,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1744723675
    },
    {
        "content": "<p>alternatively, maybe aesop could look at the named goals, generate the arms and fill them in like you already showed</p>",
        "id": 512326474,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1744725139
    }
]