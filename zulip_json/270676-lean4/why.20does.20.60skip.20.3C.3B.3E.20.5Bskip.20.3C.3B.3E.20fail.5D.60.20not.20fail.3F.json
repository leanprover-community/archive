[
    {
        "content": "<p>in my actual code, i have a tactic that produces two goals, and i want to sequence and fail if the second goal is not solved, like </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">tactic1</span><span class=\"w\"> </span><span class=\"bp\">&lt;;&gt;</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">skip</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">try_something</span><span class=\"w\"> </span><span class=\"bp\">&lt;;&gt;</span><span class=\"w\"> </span><span class=\"n\">fail</span><span class=\"o\">)]</span>\n</code></pre></div>\n<p>but fail doesn't seem to work with sequencing in the way that i expect.</p>",
        "id": 568296732,
        "sender_full_name": "Jacob Prinz",
        "timestamp": 1768505720
    },
    {
        "content": "<p>Do you have an <a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a> to show?  Without one, it is hard to know what could be happening.</p>",
        "id": 568300145,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1768507007
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">True</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">skip</span><span class=\"w\"> </span><span class=\"bp\">&lt;;&gt;</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">skip</span><span class=\"w\"> </span><span class=\"bp\">&lt;;&gt;</span><span class=\"w\"> </span><span class=\"n\">fail</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">trivial</span>\n</code></pre></div>\n<p>i would expect this proof to fail, but instead it succeeds. what am i misunderstanding about either <code>&lt;;&gt;</code> or <code>fail</code>?</p>",
        "id": 568302070,
        "sender_full_name": "Jacob Prinz",
        "timestamp": 1768507731
    },
    {
        "content": "<p>The tactics inside the square brackets have some form of partial recovery, using a <code>try</code>/<code>catch</code> block.  In the <code>catch</code> part there is a <code>logException</code> that is supposed to let you know what happened.  Except that the exception is <code>internal</code> of type <code>abortTactic</code> and <code>logException</code> specifically does not report those!</p>",
        "id": 568310822,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1768510840
    },
    {
        "content": "<p>In conclusion, the tactic effectively recovers from the <code>fail</code>, although this seems like an unintended behaviour.</p>",
        "id": 568310949,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1768510881
    },
    {
        "content": "<p>thanks for the help</p>",
        "id": 568315256,
        "sender_full_name": "Jacob Prinz",
        "timestamp": 1768512799
    },
    {
        "content": "<p>I still don't understand why first one doesn't fail but second does.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Batteries</span>\n\n<span class=\"kn\">set_option</span><span class=\"w\"> </span><span class=\"n\">linter</span><span class=\"bp\">.</span><span class=\"n\">unnecessarySeqFocus</span><span class=\"w\"> </span><span class=\"n\">false</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">True</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">skip</span><span class=\"w\"> </span><span class=\"bp\">&lt;;&gt;</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">skip</span><span class=\"w\"> </span><span class=\"bp\">&lt;;&gt;</span><span class=\"w\"> </span><span class=\"n\">fail</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">skip</span><span class=\"w\"> </span><span class=\"bp\">&lt;;&gt;</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">fail</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">trivial</span>\n</code></pre></div>",
        "id": 568418600,
        "sender_full_name": "Jakub Nowak",
        "timestamp": 1768565021
    }
]