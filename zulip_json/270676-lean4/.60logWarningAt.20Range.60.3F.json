[
    {
        "content": "<p>Is it possible to make Lean emit a warning (an info or an error) at a specific location that is specified by giving a range of characters?</p>",
        "id": 452630027,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1721411646
    },
    {
        "content": "<p>Something like <code>logWarningAt</code>, except that instead of a <code>Syntax</code> input, I can feed it a <code>String.Range</code> or something analogous.</p>",
        "id": 452630213,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1721411733
    },
    {
        "content": "<p>I think you can make a null syntax node with the range you want?</p>",
        "id": 452634059,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1721412873
    },
    {
        "content": "<p>Ah, very cool idea!  I'll try it out and see how it works when I'm back at a computer!</p>",
        "id": 452646555,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1721416640
    },
    {
        "content": "<p>Works great, thanks!</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">Elab</span><span class=\"bp\">.</span><span class=\"n\">Command</span>\n<span class=\"c1\">-----^ warning at `import`</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Lean</span>\n\n<span class=\"n\">run_cmd</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">str</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"s2\">\"import\"</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">si</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">SourceInfo</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">synthetic</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"mi\">0</span><span class=\"bp\">⟩</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">str</span><span class=\"bp\">.</span><span class=\"n\">length</span><span class=\"bp\">⟩</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">pointer</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Syntax</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">atom</span><span class=\"w\"> </span><span class=\"n\">si</span><span class=\"w\"> </span><span class=\"s2\">\"\"</span>\n<span class=\"w\">  </span><span class=\"n\">logWarningAt</span><span class=\"w\"> </span><span class=\"n\">pointer</span><span class=\"w\"> </span><span class=\"n\">m!</span><span class=\"s2\">\"warning at `{str}`\"</span>\n</code></pre></div>",
        "id": 452654774,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1721418719
    },
    {
        "content": "<p>See also <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Lean.Syntax.ofRange#doc\">docs#Lean.Syntax.ofRange</a></p>",
        "id": 452672529,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1721426413
    },
    {
        "content": "<p>Wow, I have just reinvented a very very small wheel!</p>",
        "id": 452707375,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1721446701
    },
    {
        "content": "<p>Often you end up wanting to use the range of existing syntax, in which case I think you can create a null node with children, and the 1d convex hull is used as the range</p>",
        "id": 452909137,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1721515296
    },
    {
        "content": "<p>Ah, I had not thought about combining different ranges, but that's also a cool trick!</p>",
        "id": 452913032,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1721519419
    }
]