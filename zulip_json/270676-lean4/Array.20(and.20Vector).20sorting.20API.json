[
    {
        "content": "<p>There are various sort functions on Array: <code>Array.qsort</code>, <code>Array.insertionSort</code>, <code>Array.heapSort</code>, plus some merging functions but no sorts as such.</p>\n<p>What I can't find is any API for these - in particular, any assertion that these do actually sort an array or indeed all produce the same function. We also don't I think have any sorting capability for <code>Vector</code>, despite it really being a natural thing to define because sorting doesn't change the size of an Array.</p>\n<p>Am I wrong about this? Could this be added? What actually needs to be added?</p>",
        "id": 539722367,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758014916
    },
    {
        "content": "<p>The verification of <code>Array.qsort</code> is being delayed on purpose as it needs to be refactored to a proper qsort implementation that is more robust. <code>Array.insertionSort</code> is more of a meta programming gadget though I guess it might be interesting to verify it. I can't speak on <code>heapSort</code>.</p>",
        "id": 539725508,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1758015927
    },
    {
        "content": "<p>Meta-programming in the sense that it is not efficient so it isn't good for actual implementations?</p>",
        "id": 539731069,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758017845
    },
    {
        "content": "<p>Metaprogramming as in there are times in the metaprogramming where you have to sort an almost sorted list</p>",
        "id": 539732446,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758018312
    },
    {
        "content": "<p>so it's used for that</p>",
        "id": 539732476,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758018323
    },
    {
        "content": "<p>Right</p>",
        "id": 539732497,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758018330
    },
    {
        "content": "<p>I forgot where is used though</p>",
        "id": 539732589,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758018362
    },
    {
        "content": "<p>I'm not sure that counts as \"specific for <strong>meta</strong>programming\" rather than \"specific for programming\"</p>",
        "id": 539732606,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1758018366
    },
    {
        "content": "<p>Well I guess also in programming you have to sort lists</p>",
        "id": 539732694,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758018398
    },
    {
        "content": "<p>That's what most of my algorithms class claimed, yes :)</p>",
        "id": 539732851,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1758018461
    },
    {
        "content": "<p>It would at least be good to have some kind of predicate for \"this array is sorted\" or \"these two arrays are the same but permuted\" - like <code>List.Sorted</code> or <code>List.Perm</code>.</p>",
        "id": 539734408,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758019005
    },
    {
        "content": "<p>Ah in fact <code>Array.Perm</code> exists.</p>",
        "id": 539734652,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758019076
    },
    {
        "content": "<p>But is somewhat undersupported because it's just a wrapper around <code>List.Perm</code>.</p>",
        "id": 539734762,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758019108
    },
    {
        "content": "<p>There is no <code>Array.isPerm</code>though (which would be good).</p>",
        "id": 539734896,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758019153
    },
    {
        "content": "<p>I started a repo for collecting efficient sorting algorithms in lean. Progress is slow since I only work on this repo twice a month. But PRs are always welcome : <a href=\"https://github.com/Shreyas4991/Sorting-in-Lean\">https://github.com/Shreyas4991/Sorting-in-Lean</a></p>",
        "id": 539742878,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1758021735
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"395550\">Henrik Böving</span> <a href=\"#narrow/channel/270676-lean4/topic/Array.20.28and.20Vector.29.20sorting.20API/near/539725508\">said</a>:</p>\n<blockquote>\n<p>The verification of <code>Array.qsort</code> is being delayed on purpose as it needs to be refactored to a proper qsort implementation that is more robust. <code>Array.insertionSort</code> is more of a meta programming gadget though I guess it might be interesting to verify it. I can't speak on <code>heapSort</code>.</p>\n</blockquote>\n<p>insertion sort has some interesting uses. It's basically as good as it gets for streams, and it is a useful primitive for sorting small subarrays.</p>",
        "id": 539743032,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1758021784
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"466334\">Shreyas Srinivas</span> <a href=\"#narrow/channel/270676-lean4/topic/Array.20.28and.20Vector.29.20sorting.20API/near/539742878\">said</a>:</p>\n<blockquote>\n<p>I started a repo for collecting efficient sorting algorithms in lean. Progress is slow since I only work on this repo twice a month. But PRs are always welcome : <a href=\"https://github.com/Shreyas4991/Sorting-in-Lean\">https://github.com/Shreyas4991/Sorting-in-Lean</a></p>\n</blockquote>\n<p>AFAICT there is no code in there at all?</p>",
        "id": 539743395,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1758021909
    },
    {
        "content": "<p>Takes time to lit search</p>",
        "id": 539743574,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1758021969
    },
    {
        "content": "<p>I only started this <del>last month</del> 3 weeks ago.</p>",
        "id": 539743584,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1758021973
    },
    {
        "content": "<p>I would quite like Batcher's odd-even sorting network.</p>",
        "id": 539743707,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758022011
    },
    {
        "content": "<p>But in general I wanted this because if an array <code>as</code> represents a permutation <code>p</code> (i.e. <code>as[i] = p i</code>), then if you sort the array whose ith element is <code>(as[i], i)</code> with the lexographic order, the resulting array has ith element <code>(i, p.symm i)</code>.</p>",
        "id": 539743962,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758022110
    },
    {
        "content": "<p>Which is a useful way of applying the inverse of a permutation stored as an array while avoiding  conditional memory lookups, if you use a sorting network.</p>",
        "id": 539744114,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1758022172
    }
]