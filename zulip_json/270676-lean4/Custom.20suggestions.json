[
    {
        "content": "<p>Following <a class=\"message-link\" href=\"/#narrow/channel/287929-mathlib4/topic/bool.20syntax/near/539891563\">#mathlib4 &gt; bool syntax @ üí¨</a> , is it possible to tweak the VSCode suggestions?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Lean</span>\n\n<span class=\"kn\">syntax</span><span class=\"w\"> </span><span class=\"s2\">\"#asdf \"</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">&amp;</span><span class=\"s2\">\"true\"</span><span class=\"w\"> </span><span class=\"bp\">&lt;|&gt;</span><span class=\"w\"> </span><span class=\"bp\">&amp;</span><span class=\"s2\">\"false\"</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">command</span>\n\n<span class=\"c1\">-- truman falsify</span>\n\n<span class=\"bp\">#</span><span class=\"n\">asdf</span><span class=\"w\"> </span><span class=\"n\">t</span>\n<span class=\"bp\">#</span><span class=\"n\">asdf</span><span class=\"w\"> </span><span class=\"n\">f</span>\n</code></pre></div>\n<p>In this declared syntax, only <code>true</code> or <code>false</code> are allowed, but the VSCode suggestion doesn't know this, so you get:</p>\n<p><a href=\"/user_uploads/3121/jnVU1iOUPsos75iZHD8WlcQO/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/jnVU1iOUPsos75iZHD8WlcQO/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"213x141\" src=\"/user_uploads/thumbnail/3121/jnVU1iOUPsos75iZHD8WlcQO/image.png/840x560.webp\"></a></div><p><a href=\"/user_uploads/3121/AAzRPtS7Wu3dQpCHQGoGz_JN/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/AAzRPtS7Wu3dQpCHQGoGz_JN/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"233x176\" src=\"/user_uploads/thumbnail/3121/AAzRPtS7Wu3dQpCHQGoGz_JN/image.png/840x560.webp\"></a></div><p>Is it possible to make VSCode only suggest <code>true</code> or <code>false</code>?</p>",
        "id": 539977864,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1758104402
    },
    {
        "content": "<p>(update: <code>import Lean</code> is not needed)</p>",
        "id": 539977961,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1758104432
    },
    {
        "content": "<p>Not sure if completely removing \"truman\" and \"falsify\" from suggestions would be possible? But VSCode lists text suggestions last, so if lsp could suggest \"true\" and \"false\" as keywords it would ensure they're listed first.</p>",
        "id": 539985620,
        "sender_full_name": "Jakub Nowak",
        "timestamp": 1758107086
    },
    {
        "content": "<p>This example showcases the problem even more, because \"true\" and \"false\" are listed before \"truman\" and \"falsify\":</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Lean</span>\n\n<span class=\"kn\">syntax</span><span class=\"w\"> </span><span class=\"s2\">\"#asdf \"</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">&amp;</span><span class=\"s2\">\"truman\"</span><span class=\"w\"> </span><span class=\"bp\">&lt;|&gt;</span><span class=\"w\"> </span><span class=\"bp\">&amp;</span><span class=\"s2\">\"falsify\"</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">command</span>\n\n<span class=\"c1\">-- true false</span>\n\n<span class=\"bp\">#</span><span class=\"n\">asdf</span><span class=\"w\"> </span><span class=\"n\">t</span>\n<span class=\"bp\">#</span><span class=\"n\">asdf</span><span class=\"w\"> </span><span class=\"n\">f</span>\n</code></pre></div>",
        "id": 539985642,
        "sender_full_name": "Jakub Nowak",
        "timestamp": 1758107095
    },
    {
        "content": "<p>you can do... uhh</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Lean</span>\n\n<span class=\"kn\">syntax</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">name</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">asdf</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"s2\">\"#asdf \"</span><span class=\"w\"> </span><span class=\"n\">ident</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">command</span>\n\n<span class=\"c1\">-- truman falsify</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"w\"> </span><span class=\"n\">Parser</span><span class=\"w\"> </span><span class=\"n\">Elab</span><span class=\"w\"> </span><span class=\"n\">Meta</span><span class=\"w\"> </span><span class=\"n\">Command</span>\n\n<span class=\"kd\">@[</span><span class=\"n\">command_elab</span><span class=\"w\"> </span><span class=\"n\">asdf</span><span class=\"kd\">]</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">elabAsdf</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">CommandElab</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">stx</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"k\">do</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">newEnv</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">errorExplanationExt</span><span class=\"bp\">.</span><span class=\"n\">setState</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">‚Üê</span><span class=\"w\"> </span><span class=\"n\">getEnv</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">.</span><span class=\"n\">ofList</span><span class=\"w\"> </span><span class=\"o\">[</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"ss\">`true</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"o\">{</span>\n<span class=\"w\">      </span><span class=\"n\">doc</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"s2\">\"_\"</span>\n<span class=\"w\">      </span><span class=\"n\">metadata</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">{</span>\n<span class=\"w\">        </span><span class=\"n\">summary</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"s2\">\"adfeq\"</span>\n<span class=\"w\">        </span><span class=\"n\">sinceVersion</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"s2\">\"r8347871\"</span>\n<span class=\"w\">      </span><span class=\"o\">}</span>\n<span class=\"w\">      </span><span class=\"n\">declLoc?</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">none</span>\n<span class=\"w\">    </span><span class=\"o\">}),</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"ss\">`false</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"o\">{</span>\n<span class=\"w\">      </span><span class=\"n\">doc</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"s2\">\"_\"</span>\n<span class=\"w\">      </span><span class=\"n\">metadata</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">{</span>\n<span class=\"w\">        </span><span class=\"n\">summary</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"s2\">\"adfeq\"</span>\n<span class=\"w\">        </span><span class=\"n\">sinceVersion</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"s2\">\"r8347871\"</span>\n<span class=\"w\">      </span><span class=\"o\">}</span>\n<span class=\"w\">      </span><span class=\"n\">declLoc?</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">none</span>\n<span class=\"w\">    </span><span class=\"o\">})</span>\n<span class=\"w\">  </span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">funnyCtx</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">PartialContextInfo</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">commandCtx</span><span class=\"w\"> </span><span class=\"o\">{</span>\n<span class=\"w\">    </span><span class=\"n\">env</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">newEnv</span>\n<span class=\"w\">    </span><span class=\"n\">fileMap</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">‚Üê</span><span class=\"w\"> </span><span class=\"n\">getFileMap</span>\n<span class=\"w\">    </span><span class=\"n\">ngen</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">{}</span>\n<span class=\"w\">  </span><span class=\"o\">}</span>\n<span class=\"w\">  </span><span class=\"n\">pushInfoTree</span><span class=\"w\"> </span><span class=\"bp\">&lt;|</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">context</span><span class=\"w\"> </span><span class=\"n\">funnyCtx</span><span class=\"w\"> </span><span class=\"bp\">&lt;|</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">node</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">children</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">{})</span><span class=\"w\"> </span><span class=\"bp\">&lt;|</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">ofCompletionInfo</span><span class=\"w\"> </span><span class=\"bp\">&lt;|</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">errorName</span><span class=\"w\"> </span><span class=\"n\">stx</span><span class=\"w\"> </span><span class=\"n\">stx</span><span class=\"o\">[</span><span class=\"mi\">1</span><span class=\"o\">]</span>\n\n<span class=\"bp\">#</span><span class=\"n\">asdf</span><span class=\"w\"> </span><span class=\"n\">true</span>\n<span class=\"bp\">#</span><span class=\"n\">asdf</span><span class=\"w\"> </span><span class=\"n\">false</span>\n</code></pre></div>",
        "id": 539992517,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1758109430
    },
    {
        "content": "<p><span aria-label=\"melt\" class=\"emoji emoji-1fae0\" role=\"img\" title=\"melt\">:melt:</span></p>",
        "id": 539994275,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1758109971
    },
    {
        "content": "<p>very complicated looking</p>",
        "id": 540081758,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758134959
    }
]