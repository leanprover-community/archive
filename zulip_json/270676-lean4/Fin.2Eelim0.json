[
    {
        "content": "<p>This is probably a nofix, but I'll just put it here as a record.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">universe</span><span class=\"w\"> </span><span class=\"n\">u</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"bp\">.</span><span class=\"n\">elim0'</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"kt\">Sort</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"bp\">.</span><span class=\"n\">elim0</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">foo1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">Fin</span><span class=\"bp\">.</span><span class=\"n\">elim0</span><span class=\"w\"> </span><span class=\"c1\">-- fails</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">foo2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"bp\">.</span><span class=\"n\">elim0</span><span class=\"w\"> </span><span class=\"bp\">·</span><span class=\"o\">)</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">foo3</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">Fin</span><span class=\"bp\">.</span><span class=\"n\">elim0'</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">foo4</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"bp\">.</span><span class=\"n\">elim0'</span><span class=\"w\"> </span><span class=\"bp\">·</span><span class=\"o\">)</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">foo5</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">Fin</span><span class=\"bp\">.</span><span class=\"n\">elim0</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">foo6</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"bp\">.</span><span class=\"n\">elim0</span><span class=\"w\"> </span><span class=\"bp\">·</span><span class=\"o\">)</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">foo7</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">Fin</span><span class=\"bp\">.</span><span class=\"n\">elim0'</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">foo8</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"bp\">.</span><span class=\"n\">elim0'</span><span class=\"w\"> </span><span class=\"bp\">·</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"c1\">-- fails, needs @[elab_as_elim]</span>\n</code></pre></div>",
        "id": 526381951,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1751284168
    },
    {
        "content": "<p>We do have <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Fin.rec0#doc\">docs#Fin.rec0</a></p>",
        "id": 526382171,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1751284233
    },
    {
        "content": "<p>Basically, because of how <a href=\"https://github.com/leanprover/lean4/blob/6741444a63eec253a7eae7a83f1beb3de015023d/src/Init/Data/Fin/Basic.lean#L20-L28\"><code>Fin.elim0</code> is set up</a>, it can fail to prove certain things. I see that it is in init so probably there is no access to <code>@[elab_as_elim]</code>, so I tried to provide another version <code>Fin.elim0'</code> that works for the previously failed case, but since there is no <code>@[elab_as_elim]</code> then it fails in the opposite case.</p>",
        "id": 526382190,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1751284240
    },
    {
        "content": "<p><code>Fin.rec0</code> isn't <code>@[elab_as_elim]</code>, though</p>",
        "id": 526382263,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1751284259
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> <a href=\"#narrow/channel/270676-lean4/topic/Fin.2Eelim0/near/526382171\">said</a>:</p>\n<blockquote>\n<p>We do have <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Fin.rec0#doc\">docs#Fin.rec0</a></p>\n</blockquote>\n<p>Thanks, you helped me <a href=\"https://github.com/leanprover-community/mathlib4/pull/26285/commits/49b2f7ee33d02b76dbce09f73b1ee9a5130a9b4c\">golf off 5 bytes</a> <span aria-label=\"upside down\" class=\"emoji emoji-1f643\" role=\"img\" title=\"upside down\">:upside_down:</span></p>",
        "id": 526382724,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1751284383
    },
    {
        "content": "<p>It's actually 6 bytes if you account for utf-8 encoding</p>",
        "id": 526383044,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1751284485
    },
    {
        "content": "<p>have you tried <code>nofun</code>? that might golf some more</p>",
        "id": 526383764,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1751284733
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"387244\">@Yaël Dillies</span> what does that reaction mean?</p>",
        "id": 526384816,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1751285029
    },
    {
        "content": "<p>That there is no fun</p>",
        "id": 526384897,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1751285050
    },
    {
        "content": "<p>Not everyone will know what <code>nofun</code> does (it's fun x1 x2 x3 ... =&gt; nomatch x1 x2 x3 ...)</p>",
        "id": 526385058,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1751285102
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110049\">Mario Carneiro</span> <a href=\"#narrow/channel/270676-lean4/topic/Fin.2Eelim0/near/526383764\">said</a>:</p>\n<blockquote>\n<p>have you tried <code>nofun</code>? that might golf some more</p>\n</blockquote>\n<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/26285/commits/da8299ebed62c4112d7d62453f8a893d9b9b7141\">Done</a> <span aria-label=\"slight smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"slight smile\">:slight_smile:</span></p>",
        "id": 526385186,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1751285139
    },
    {
        "content": "<p>also known as \"my favorite proof term\", which you used to be able to write by just finishing your proof with <code>.</code> instead of <code>:= proof</code></p>",
        "id": 526385308,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1751285171
    },
    {
        "content": "<p>Unfortunately it's deprecated, which I only know because sometimes the parser messes up and thinks I'm trying to use it when in reality I'm just not done writing yet.</p>",
        "id": 526385485,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1751285228
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110064\">@Kenny Lau</span> What was the issue here? That Fin.elim0 is a nondependent eliminator and you were looking for Fin.rec0?</p>\n<p>If so, then yes, this is a nofix.</p>\n<p>Probably Fin.rec0 could stand to have <code>elab_as_elim</code> (no, there are no staging difficulties to add this attribute, it is builtin).</p>",
        "id": 526428864,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1751297274
    }
]