[
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"306601\">Kyle Miller</span> <a href=\"#narrow/channel/287929-mathlib4/topic/doc-gen.20ClosureOperator.20issue/near/482500760\">said</a>:</p>\n<blockquote>\n<p>It's not meant to expose any of the details of how structures are actually represented.</p>\n</blockquote>\n<p>Maybe that should also hold for <code>#print Field</code> (which currently does expose the implementation)?</p>",
        "id": 482503637,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1731628335
    },
    {
        "content": "<p>Here's a prototype <span class=\"user-mention\" data-user-id=\"111080\">@Floris van Doorn</span>:</p>\n<p><a href=\"/user_uploads/3121/NDJbkjXZ7wa4TjDj5HVqAn58/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/NDJbkjXZ7wa4TjDj5HVqAn58/image.png\" title=\"image.png\"><img data-original-dimensions=\"1436x628\" src=\"/user_uploads/thumbnail/3121/NDJbkjXZ7wa4TjDj5HVqAn58/image.png/840x560.webp\"></a></div>",
        "id": 482698657,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1731706843
    },
    {
        "content": "<p>Or a variant that shows where the fields come from without needing to hover:</p>\n<p><a href=\"/user_uploads/3121/ynI1ZBvbJdXoA_Uib9k6QKhg/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/ynI1ZBvbJdXoA_Uib9k6QKhg/image.png\" title=\"image.png\"><img data-original-dimensions=\"1440x630\" src=\"/user_uploads/thumbnail/3121/ynI1ZBvbJdXoA_Uib9k6QKhg/image.png/840x560.webp\"></a></div>",
        "id": 482699661,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1731707322
    },
    {
        "content": "<p>Can you show an example with overlapping parents?</p>",
        "id": 482700224,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1731707569
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">structure</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span>\n<span class=\"kn\">structure</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"kn\">extends</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span>\n<span class=\"kn\">structure</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"kn\">extends</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span>\n<span class=\"kn\">structure</span><span class=\"w\"> </span><span class=\"n\">D</span><span class=\"w\"> </span><span class=\"kn\">extends</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">d</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span>\n\n<span class=\"bp\">#</span><span class=\"n\">print</span><span class=\"w\"> </span><span class=\"n\">D</span>\n<span class=\"c\">/-</span>\n<span class=\"cm\">structure D : Type</span>\n<span class=\"cm\">number of parameters: 0</span>\n<span class=\"cm\">parents:</span>\n<span class=\"cm\">  D.toB : B</span>\n<span class=\"cm\">  D.toC : C</span>\n<span class=\"cm\">fields:</span>\n<span class=\"cm\">  A.a : Nat</span>\n<span class=\"cm\">  B.b : Nat</span>\n<span class=\"cm\">  C.c : Nat</span>\n<span class=\"cm\">  D.d : Nat</span>\n<span class=\"cm\">constructor:</span>\n<span class=\"cm\">  D.mk : B → Nat → Nat → D</span>\n<span class=\"cm\">resolution order:</span>\n<span class=\"cm\">  D, B, C, A</span>\n<span class=\"cm\">-/</span>\n</code></pre></div>\n<p>The <code>C.c</code> is hiding that if you write <code>d.c</code> you get <code>D.c d</code>, but in any case that shows the origin of the field, and there's this fact:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">d</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">D</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">D</span><span class=\"bp\">.</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"n\">d</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"bp\">.</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"n\">d</span><span class=\"bp\">.</span><span class=\"n\">toC</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">rfl</span>\n</code></pre></div>",
        "id": 482701113,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1731707941
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover/lean4/pull/6096\">lean4#6096</a> if anyone has any comments</p>",
        "id": 482711680,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1731713937
    },
    {
        "content": "<p>6 messages were moved here from <a class=\"stream-topic\" data-stream-id=\"287929\" href=\"/#narrow/channel/287929-mathlib4/topic/doc-gen.20ClosureOperator.20issue\">#mathlib4 &gt; doc-gen ClosureOperator issue</a> by <span class=\"user-mention silent\" data-user-id=\"306601\">Kyle Miller</span>.</p>",
        "id": 482711828,
        "sender_full_name": "Notification Bot",
        "timestamp": 1731714029
    }
]