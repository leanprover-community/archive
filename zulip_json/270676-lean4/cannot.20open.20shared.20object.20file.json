[
    {
        "content": "<p>I'm trying to modify the web editor to allow different lean versions and packages imported. Currently I hit a weird error:</p>\n<div class=\"codehilite\" data-code-language=\"Bash\"><pre><span></span><code>error<span class=\"w\"> </span>loading<span class=\"w\"> </span>library,<span class=\"w\"> </span>libAuto-Lib-Containers-1.so:\n<span class=\"w\">  </span>cannot<span class=\"w\"> </span>open<span class=\"w\"> </span>shared<span class=\"w\"> </span>object<span class=\"w\"> </span>file:<span class=\"w\"> </span>No<span class=\"w\"> </span>such<span class=\"w\"> </span>file<span class=\"w\"> </span>or<span class=\"w\"> </span>directory\n</code></pre></div>\n<p>on importing a package <code>import Auto</code>. Does anybody know what <code>.so</code> files are and where this error might be generated? I assume somewhere in lean core or maybe lake (?) but I currently don't even know where to start looking...</p>",
        "id": 408360316,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1702746116
    },
    {
        "content": "<p><code>.so</code> files are Linux shared library files. These <code>-1</code> files are generated by Lake as part of the <code>precompileModules</code> feature. It compiles each individual module of a library into its own <code>-1</code> native shared library and loads them via <code>lean</code>'s <code>--load-dynlib</code> option. This enables the use of user <code>@[extern]</code> functions at elaboration-time.</p>",
        "id": 408376108,
        "sender_full_name": "Mac Malone",
        "timestamp": 1702761339
    },
    {
        "content": "<p>Thanks Mac! I had another go at this and adding <code>precompileModules := false</code> to the package and all dependencies to prevent any <code>.so</code> file from being generated fixed everything. looks like lean4web (at when running an old lean version v4.3.0-rc1) does not handle these files well.</p>",
        "id": 408482758,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1702849446
    },
    {
        "content": "<p>which is apparently only a matter of calling <code>lake serve --</code> instead of <code>lean --server</code> <span aria-label=\"open mouth\" class=\"emoji emoji-1f62e\" role=\"img\" title=\"open mouth\">:open_mouth:</span></p>",
        "id": 408483807,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1702850514
    }
]