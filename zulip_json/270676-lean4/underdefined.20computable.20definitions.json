[
    {
        "content": "<p>Maybe that's a silly question: But is there a good way to write a definition that evaluates to just any value and let's me prove nothing about it? Something like a <code>Classical.choice</code> that evaluates or a completely intransparent <code>Inhabited</code>?</p>",
        "id": 496571609,
        "sender_full_name": "Jakob von Raumer",
        "timestamp": 1738163648
    },
    {
        "content": "<p>The <code>unsafe</code> keyword might be worth looking at. Just prepend your function definition with it (<code>unsafe def myfunc ...</code>)</p>",
        "id": 496573831,
        "sender_full_name": "nrs",
        "timestamp": 1738164219
    },
    {
        "content": "<p>It is viral however and anything that calls it will need to be tagged <code>unsafe</code>. The <code>partial</code> keyword is an alternative that is opaque and can be used as a proof that the function's type is inhabited (and nothing else)</p>",
        "id": 496574206,
        "sender_full_name": "nrs",
        "timestamp": 1738164315
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110789\">Jakob von Raumer</span> <a href=\"#narrow/stream/270676-lean4/topic/underdefined.20computable.20definitions/near/496571609\">said</a>:</p>\n<blockquote>\n<p>Maybe that's a silly question: But is there a good way to write a definition that evaluates to just any value and let's me prove nothing about it? Something like a <code>Classical.choice</code> that evaluates or a completely intransparent <code>Inhabited</code>?</p>\n</blockquote>\n<p>opaque foo (a : Type) [Inhabited a] : a := default ? Though this will of course still respect refl</p>",
        "id": 496576208,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1738164807
    },
    {
        "content": "<p>You don't need <code>:= default</code>.</p>",
        "id": 496576692,
        "sender_full_name": "François G. Dorais",
        "timestamp": 1738164931
    },
    {
        "content": "<p>Might be that it gets this by itself yeah, I'm not on a machine</p>",
        "id": 496576776,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1738164955
    },
    {
        "content": "<p>Ah thanks, that's maybe what I'm looking for (except for the respecting refl part)</p>",
        "id": 496598197,
        "sender_full_name": "Jakob von Raumer",
        "timestamp": 1738170894
    },
    {
        "content": "<p>One trick here is that you can add multiple arguments to <code>foo</code>, one per variable in your local context for the definition you're making, so that you can have it return different opaque values for different function inputs. Worth thinking about if you want to make sure you can prove even less about it.</p>",
        "id": 496599109,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1738171173
    },
    {
        "content": "<p>Example:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">opaque</span><span class=\"w\"> </span><span class=\"n\">divZero</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">safeDiv</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"n\">divZero</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"k\">else</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"n\">b</span>\n</code></pre></div>",
        "id": 496599351,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1738171246
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">safeDiv</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">safeDiv</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">rfl</span><span class=\"w\"> </span><span class=\"c1\">-- fails</span>\n</code></pre></div>",
        "id": 496599429,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1738171273
    },
    {
        "content": "<p>Be careful though:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">safeDiv</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">safeDiv</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span><span class=\"w\"> </span><span class=\"n\">native_decide</span>\n</code></pre></div>\n<p>The compiler can see through the opaque definition.</p>",
        "id": 496601137,
        "sender_full_name": "François G. Dorais",
        "timestamp": 1738171765
    }
]