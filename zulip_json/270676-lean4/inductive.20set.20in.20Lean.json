[
    {
        "content": "<p>Hello, <br>\nI am wondering whether Lean has some automation for inductive definitions. I have in mind something like inductive-set in Isabelle where the definition produces automatically a bunch of useful theorems about cases, and (structural) induction.</p>",
        "id": 450981119,
        "sender_full_name": "Stepan Holub",
        "timestamp": 1720792084
    },
    {
        "content": "<p>When you create an inductive type, a few additional declarations are automatically added to the environment as well. If you can give a concrete example of something you're looking for, that would help answer your question.</p>",
        "id": 450984084,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1720792821
    },
    {
        "content": "<p>I am trying to define a submonoid generated by a given set inductively (two conditions: unit is included,  and the set is closed under the multiplication by an element from the generating set, say, from the left).<br>\nI expect Lean to generate for me the structural induction theorem based on that definition alone.</p>",
        "id": 450995608,
        "sender_full_name": "Stepan Holub",
        "timestamp": 1720795170
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kd\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Monoid</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">)</span>\n\n<span class=\"kd\">inductive</span><span class=\"w\"> </span><span class=\"n\">genSubmonoid</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"n\">where</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">genSubmonoid</span><span class=\"w\"> </span><span class=\"n\">m</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">mul</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">genSubmonoid</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">genSubmonoid</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">genSubmonoid</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">one</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">genSubmonoid</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n\n<span class=\"k\">#check</span><span class=\"w\"> </span><span class=\"n\">genSubmonoid.rec</span>\n</code></pre></div>",
        "id": 450999828,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1720796062
    },
    {
        "content": "<p>you can see all the things that were added automatically using <code>#print prefix genSubmonoid</code></p>",
        "id": 451000321,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1720796181
    },
    {
        "content": "<p>or using <code>whatsnew</code></p>",
        "id": 451000396,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1720796197
    },
    {
        "content": "<p>I.e.</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib.Init.Set</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib.Algebra.Group.Defs</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib.Tactic</span>\n\n<span class=\"kd\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Monoid</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">)</span>\n\n<span class=\"n\">whatsnew</span><span class=\"w\"> </span><span class=\"k\">in</span>\n<span class=\"kd\">inductive</span><span class=\"w\"> </span><span class=\"n\">genSubmonoid</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"n\">where</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">genSubmonoid</span><span class=\"w\"> </span><span class=\"n\">m</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">mul</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">genSubmonoid</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">genSubmonoid</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">genSubmonoid</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">one</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">genSubmonoid</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n</code></pre></div>",
        "id": 451000620,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1720796251
    },
    {
        "content": "<p>Thank you very much. That is what I was looking for.</p>\n<p>A side remark on my motivation: in Mathlib.Algebra.Group.Subgroup.Basic  they say</p>\n<blockquote>\n<p>There are also theorems about the subgroups generated by an element or a subset of a group,  defined both inductively and as the infimum of the set of subgroups containing a given element/subset.</p>\n</blockquote>\n<p>and I could not find the promised inductive definition (it was perhaps removed as redundant, since the induction principle follows easily from the infimum?)</p>",
        "id": 451018853,
        "sender_full_name": "Stepan Holub",
        "timestamp": 1720800468
    },
    {
        "content": "<p>the definition is in terms of an infimum, but there should be an induction principle proved for that definition. Let me look for it.</p>",
        "id": 451020927,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1720800968
    },
    {
        "content": "<p>Here you go: <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Algebra/Group/Submonoid/Basic.html#Submonoid.closure_induction\">Submonoid.closure_induction</a></p>",
        "id": 451021103,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1720801005
    },
    {
        "content": "<p>There should be analogous statements for subgroups, etc.</p>",
        "id": 451021608,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1720801117
    },
    {
        "content": "<p>Yes, thank you. I am aware of  the <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Algebra/Group/Submonoid/Basic.html#Submonoid.closure_induction\">Submonoid.closure_induction</a> theorem.</p>\n<p>My point was not the induction theorem itself, but rather a general way of obtaining such theorems. In this case, it is interesting that the induction theorem is (easily) proved using the infimum definition, (specifically <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Algebra/Group/Submonoid/Basic.html#AddSubmonoid.closure_le\">closure_le</a>, rather than by something like genSubmonoid.rec  produced by your inductive definition above (and which is very instructive)</p>",
        "id": 451069015,
        "sender_full_name": "Stepan Holub",
        "timestamp": 1720816310
    },
    {
        "content": "<p>The general way of obtaining such theorems is by using Galois insertions (which is more-or-less <code>closure_le</code> itself).</p>",
        "id": 451070974,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1720816959
    },
    {
        "content": "<p>Whenever you have a Galois insertion, you can define such a \"closure\" operator, which will end up being the analogue of the infimum definition.</p>",
        "id": 451071210,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1720817039
    }
]