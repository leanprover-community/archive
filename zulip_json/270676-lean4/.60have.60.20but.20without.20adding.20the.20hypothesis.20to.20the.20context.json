[
    {
        "content": "<p>Is there a canonical way (in tactic mode or term mode) to simply exhibit that a term/proof has a given type, without adding the hypothesis to the local context? Sort of like <code>example</code> at the top level, but in tactics. have : t := e generates lots of hypotheses named <code>this</code>, but I don't use them.</p>",
        "id": 574943067,
        "sender_full_name": "IntGrah",
        "timestamp": 1771594994
    },
    {
        "content": "<p>Do you mean <code>foo (e : t)</code>?</p>",
        "id": 574943390,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1771595080
    },
    {
        "content": "<p>An <a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a> might help</p>",
        "id": 574943453,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1771595095
    },
    {
        "content": "<p>It's not a bug</p>",
        "id": 574943587,
        "sender_full_name": "IntGrah",
        "timestamp": 1771595126
    },
    {
        "content": "<p>It's an example, it doesn't have to demonstrate a bug</p>",
        "id": 574943751,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1771595170
    },
    {
        "content": "<p>Code is usually easier to understand than natural language in these cases</p>",
        "id": 574943907,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1771595203
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"c1\">-- Begin literate proof</span>\n<span class=\"w\">  </span><span class=\"c1\">-- Let x and y be things</span>\n<span class=\"w\">  </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span>\n<span class=\"w\">  </span><span class=\"c1\">-- The reader may find it interesting that</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">proof</span>\n<span class=\"w\">  </span><span class=\"c1\">-- However I don't care about this fact, since what we want to prove is</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">proof</span>\n<span class=\"w\">  </span><span class=\"c1\">-- Thus by applying foo</span>\n<span class=\"w\">  </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">foo</span>\n<span class=\"w\">  </span><span class=\"c1\">-- We obtain</span>\n<span class=\"w\">  </span><span class=\"k\">show</span><span class=\"w\"> </span><span class=\"n\">t</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span>\n</code></pre></div>",
        "id": 574944305,
        "sender_full_name": "IntGrah",
        "timestamp": 1771595314
    },
    {
        "content": "<p>This, but scaled up to a larger proof</p>",
        "id": 574944368,
        "sender_full_name": "IntGrah",
        "timestamp": 1771595336
    },
    {
        "content": "<p>where one would like to make certain remarks along the way, without clogging up the context</p>",
        "id": 574944470,
        "sender_full_name": "IntGrah",
        "timestamp": 1771595364
    },
    {
        "content": "<p>The example isn't working, but do you mean the intention is for pedagogical purposes only?</p>",
        "id": 574944541,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1771595386
    },
    {
        "content": "<p>Then a comment is the way to go</p>",
        "id": 574944555,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1771595391
    },
    {
        "content": "<p>You can also <code>#check (e : t)</code> I think, if you want Lean to verify it as well</p>",
        "id": 574944654,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1771595411
    },
    {
        "content": "<p>This is about within tactic mode, not at the top level</p>",
        "id": 574944732,
        "sender_full_name": "IntGrah",
        "timestamp": 1771595425
    },
    {
        "content": "<p><code>#check</code> works as a tactic if you import Mathlib, and you can also copy <a href=\"https://github.com/leanprover-community/mathlib4/blob/master/Mathlib/Tactic/Check.lean\">their short definition of it</a></p>",
        "id": 574944964,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1771595482
    },
    {
        "content": "<p>But I think you might not be able to use local variables in the expression</p>",
        "id": 574945094,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1771595516
    },
    {
        "content": "<p>Ah right, that was what I needed</p>",
        "id": 574945113,
        "sender_full_name": "IntGrah",
        "timestamp": 1771595520
    },
    {
        "content": "<p>MWE:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span><span class=\"bp\">.</span><span class=\"n\">Check</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">foo</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"n\">rfl</span>\n</code></pre></div>",
        "id": 574945609,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1771595678
    },
    {
        "content": "<p>Thanks!</p>",
        "id": 574945855,
        "sender_full_name": "IntGrah",
        "timestamp": 1771595758
    },
    {
        "content": "<p>It doesn't seem to be registered as an exception to the unused tactic linter however, which is annoying</p>",
        "id": 574945935,
        "sender_full_name": "IntGrah",
        "timestamp": 1771595784
    },
    {
        "content": "<p>You can always do</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">True</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n<span class=\"w\">  </span><span class=\"n\">clear</span><span class=\"w\"> </span><span class=\"n\">this</span>\n</code></pre></div>",
        "id": 575077675,
        "sender_full_name": "Moritz R",
        "timestamp": 1771669697
    },
    {
        "content": "<p>im not sure if this is what you want, since i dont understand what you want out of doing a <code>have</code> but not using it</p>",
        "id": 575077789,
        "sender_full_name": "Moritz R",
        "timestamp": 1771669828
    },
    {
        "content": "<p>If this comes up because you want to show <code>(t : Fin n) = (r : Fin m)</code> and you have proved <code>h : n = m</code> then you probably want to replace <code>n</code> everywhere by <code>m</code> by using <code>subst h</code> or <code>simp only [h] at *</code> or something similar</p>",
        "id": 575077886,
        "sender_full_name": "Moritz R",
        "timestamp": 1771669942
    },
    {
        "content": "<p>I feel like the intent here is <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Mathlib.Tactic.Recall.recall#doc\">docs#Mathlib.Tactic.Recall.recall</a>, but as a tactic? This doesn't exist AFAIK</p>",
        "id": 575078420,
        "sender_full_name": "Chris Henson",
        "timestamp": 1771670631
    }
]