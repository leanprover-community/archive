[
    {
        "content": "<p>When matching some syntax I know I can use <code>%$tk</code> to record one piece of syntax that was matched. Is there a way to do that with several consecutive pieces? Or am I meant to create a syntax category for the suggestion I want?</p>",
        "id": 493178567,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1736678484
    },
    {
        "content": "<p>Do you mean their lexical range? You can put the first and last token in a <code>mkNullNode</code> and get the range of that</p>",
        "id": 493187530,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1736686466
    },
    {
        "content": "<p>Yes I want to get their lexical range. I don‚Äôt know what it means to ‚Äúput the first and last token in a <code>mkNullNode</code> and get the range of that‚Äù.</p>",
        "id": 493188069,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1736686961
    },
    {
        "content": "<p>And the context of this question is described at <a class=\"message-link\" href=\"/#narrow/channel/270676-lean4/topic/Show.20tactic.20state.20and.20widget.20in.20custom.20calc/near/493181089\">#lean4 &gt; Show tactic state and widget in custom calc @ üí¨</a></p>",
        "id": 493188131,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1736687033
    },
    {
        "content": "<p>I just moved that thread because I just noticed I originally put it in the mathlib4 channel by accident.</p>",
        "id": 493188188,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1736687065
    },
    {
        "content": "<p>Is something like this what you are looking for?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Lean</span>\n\n<span class=\"kn\">elab</span><span class=\"w\"> </span><span class=\"n\">tk</span><span class=\"o\">:</span><span class=\"n\">group</span><span class=\"o\">(</span><span class=\"s2\">\"these\"</span><span class=\"w\"> </span><span class=\"s2\">\"are\"</span><span class=\"w\"> </span><span class=\"s2\">\"all\"</span><span class=\"w\"> </span><span class=\"s2\">\"together\"</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"s2\">\"these\"</span><span class=\"w\"> </span><span class=\"s2\">\"are\"</span><span class=\"w\"> </span><span class=\"s2\">\"not\"</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">command</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"k\">do</span>\n<span class=\"w\">  </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">logInfoAt</span><span class=\"w\"> </span><span class=\"n\">tk</span><span class=\"w\"> </span><span class=\"s2\">\"Underlying them all\"</span>\n<span class=\"w\">  </span><span class=\"n\">return</span>\n\n<span class=\"n\">these</span><span class=\"w\"> </span><span class=\"n\">are</span><span class=\"w\"> </span><span class=\"n\">all</span><span class=\"w\"> </span><span class=\"n\">together</span><span class=\"w\"> </span><span class=\"n\">these</span><span class=\"w\"> </span><span class=\"n\">are</span><span class=\"w\"> </span><span class=\"n\">not</span>\n</code></pre></div>",
        "id": 493199406,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1736696820
    },
    {
        "content": "<p>I‚Äôm looking for the analogue of that when doing pattern matching.</p>",
        "id": 493199533,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1736696911
    },
    {
        "content": "<p><code>mkNullNode #[firstTk, lastTk]</code> is a <code>Syntax</code> spanning the two tokens. It's not a valid syntax to elaborate but likely it works for the widget and <code>withTacticInfoContext</code>, which is responsible for annotating a syntax range with the pre and post state of executing a tactic</p>",
        "id": 493204707,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1736701361
    }
]