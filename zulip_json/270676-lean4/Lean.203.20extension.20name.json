[
    {
        "content": "<p>I just noticed that the Lean 3 VSCode Extension is called <code>lean</code>. Can we rename that to <code>lean3</code>, so that it looks less like the default Lean extension?</p>",
        "id": 462781575,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1723812986
    },
    {
        "content": "<p>I think that <code>obsolete_lean</code> would be even clearer. Hopefully we are converging towards a situation where people won’t need to see a number to understand when we talk about Lean 4.</p>",
        "id": 462783421,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1723813610
    },
    {
        "content": "<p>I think that changing the <code>name</code> might cause breakage, but we could certainly change the <code>displayName</code> and <code>description</code></p>",
        "id": 462787164,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1723814759
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover/vscode-lean\">https://github.com/leanprover/vscode-lean</a> is archived, so we cannot change it</p>",
        "id": 462787529,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1723814885
    },
    {
        "content": "<p>I've made the fix at <a href=\"https://github.com/eric-wieser/vscode-lean/commit/8c6dc5c436cb670d5ab5d7ff9eab071e5025c1ce\">https://github.com/eric-wieser/vscode-lean/commit/8c6dc5c436cb670d5ab5d7ff9eab071e5025c1ce</a>, but can't PR it</p>",
        "id": 462787627,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1723814932
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"221921\">@Marc Huisinga</span>, would you be able to unarchive the repo when you get back from vacation?</p>",
        "id": 462787703,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1723814967
    },
    {
        "content": "<p>Unfortunately, the tricky part here is actually publishing the Lean 3 VS Code extension, since it stopped building long ago due to an issue with some dependency. The only way to still update that extension is to patch an existing VSIX.</p>\n<p>Personally, I think the description below the name is sufficient to designate it as the Lean 3 extension:<br>\n<a href=\"/user_uploads/3121/7bGvSfV2hsD3M7RENYgSsBsN/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/7bGvSfV2hsD3M7RENYgSsBsN/image.png\" title=\"image.png\"><img data-original-dimensions=\"315x73\" src=\"/user_uploads/thumbnail/3121/7bGvSfV2hsD3M7RENYgSsBsN/image.png/840x560.webp\"></a></div><p>However, it is very unfortunate that when searching for <code>lean</code> in the extensions menu, <code>lean</code> is shown first, then a bunch of other extensions and only then the <code>lean4</code> extension. I wonder if changing the display name of the Lean 4 extension to include a space could improve this situation, since I think this search is using a fuzzy matcher that prefers full words over word substrings. <br>\nSince the build is broken and it is entirely unmaintained, I also plan to unpublish the Lean 3 extension in a couple of months so that it can only be installed from a VSIX file (e.g. the one attached to <a href=\"https://github.com/leanprover/vscode-lean/releases/tag/v0.16.59\">https://github.com/leanprover/vscode-lean/releases/tag/v0.16.59</a>).</p>",
        "id": 465682963,
        "sender_full_name": "Marc Huisinga",
        "timestamp": 1724833048
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"221921\">@Marc Huisinga</span> : this will break people's old lean3 projects which can be opened in gitpod for now</p>",
        "id": 465690950,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1724834888
    },
    {
        "content": "<p>This could include code which was published with papers. Gitpod and codespaces currently use marketplace extensions</p>",
        "id": 465691355,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1724834968
    },
    {
        "content": "<p>You can easily install extensions from VSIX in Gitpod.</p>",
        "id": 465691917,
        "sender_full_name": "Marc Huisinga",
        "timestamp": 1724835054
    },
    {
        "content": "<p>Not if you're reading a paper that says \"click this gitpod link to have everything set up for you\", then it transpires that actually you have to find this zulip thread to realize that you have to install the VSIX manually</p>",
        "id": 465695267,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1724835721
    },
    {
        "content": "<blockquote>\n<p>since it stopped building long ago due to an issue with some dependency.</p>\n</blockquote>\n<p>I guess pinning to the old dependency version doesn't help due to some incompatibility with vscode?</p>",
        "id": 465695562,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1724835767
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/stream/270676-lean4/topic/Lean.203.20extension.20name/near/465695562\">said</a>:</p>\n<blockquote>\n<blockquote>\n<p>since it stopped building long ago due to an issue with some dependency.</p>\n</blockquote>\n<p>I guess pinning to the old dependency version doesn't help due to some incompatibility with vscode?</p>\n</blockquote>\n<p>The dependency is pinned. Attempting to build the extension results in some inscrutable error that Google yields no results for.</p>\n<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/stream/270676-lean4/topic/Lean.203.20extension.20name/near/465695267\">said</a>:</p>\n<blockquote>\n<p>Not if you're reading a paper that says \"click this gitpod link to have everything set up for you\", then it transpires that actually you have to find this zulip thread to realize that you have to install the VSIX manually</p>\n</blockquote>\n<p>To be clear, with the way things are now (the Lean 3 extension being both unmaintained and unbuildable), it is only a matter of time until the Lean 3 extension breaks entirely for new VS Code versions, since VS Code frequently breaks backwards compatibility in subtle ways. If you have a suggestion to resolve this, please let me know. <br>\nOutside of vscode-lean, the last time I tried to build an old Lean 3 project, I couldn't get it to work without adjustments because of the <a href=\"#narrow/stream/113488-general/topic/Can't.20run.20lean.203.20project/near/464035532\">redirect issue</a>.</p>\n<p>As far as I can see (and as unfortunate as that is), the only way that you can be sure to get a working build for old Lean 3 projects is to use a specific old VS Code version, elan version and vscode-lean version and then perform a series of rain dances to set it up correctly. Gitpod is also not guaranteed to be around forever.</p>",
        "id": 465699961,
        "sender_full_name": "Marc Huisinga",
        "timestamp": 1724836438
    },
    {
        "content": "<p>Gitpod may not be. But short of catastrophic events, some form of containerisation method which is compatible with docker is likely to exist.</p>",
        "id": 465701645,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1724836754
    },
    {
        "content": "<p>Also, I was able to build lean3 projects eventually and make a container of it. Just had trouble getting cache</p>",
        "id": 465701806,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1724836784
    },
    {
        "content": "<p>VS Code, the VS Code extension and the VS Code marketplace are not part of the container in the Gitpod setup.</p>\n<blockquote>\n<p>Also, I was able to build lean3 projects eventually</p>\n</blockquote>\n<p>I didn't claim otherwise.</p>",
        "id": 465703685,
        "sender_full_name": "Marc Huisinga",
        "timestamp": 1724837004
    },
    {
        "content": "<p>The issue here is that most countries and grant agencies have rules about research artefact preservation for X many users, where X is 10 in many places. The less troublesome we make it to run old stuff the easier it is for people to use lean for a paper. Not being able to run something just 4 years old is not a good sign.</p>",
        "id": 465703981,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1724837039
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 465704176,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1724837062
    },
    {
        "content": "<p>Letting the extension remain on the marketplace removes one step necessary to build old projects</p>",
        "id": 465706948,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1724837507
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"221921\">Marc Huisinga</span> <a href=\"#narrow/stream/270676-lean4/topic/Lean.203.20extension.20name/near/465682963\">said</a>:</p>\n<blockquote>\n<p>The only way to still update that extension is to patch an existing VSIX.</p>\n</blockquote>\n<p>Changing the <code>displayName</code> sounds like a pretty straightforward patch of the VSIX file, unless there's a signature or checksum in there somewhere</p>",
        "id": 465710267,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1724838036
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"221921\">Marc Huisinga</span> <a href=\"#narrow/stream/270676-lean4/topic/Lean.203.20extension.20name/near/465699961\">said</a>:</p>\n<blockquote>\n<p>Outside of vscode-lean, the last time I tried to build an old Lean 3 project, I couldn't get it to work without adjustments because of the <a href=\"#narrow/stream/113488-general/topic/Can't.20run.20lean.203.20project/near/464035532\">redirect issue</a>.</p>\n</blockquote>\n<p>This problem only exists for <code>leanprover/lean</code>; <code>leanprover-community/lean</code> was never redirected precisely to avoid this breakage.</p>",
        "id": 465710684,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1724838123
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/stream/270676-lean4/topic/Lean.203.20extension.20name/near/465710267\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"221921\">Marc Huisinga</span> <a href=\"#narrow/stream/270676-lean4/topic/Lean.203.20extension.20name/near/465682963\">said</a>:</p>\n<blockquote>\n<p>The only way to still update that extension is to patch an existing VSIX.</p>\n</blockquote>\n<p>Changing the <code>displayName</code> sounds like a pretty straightforward patch of the VSIX file, unless there's a signature or checksum in there somewhere</p>\n</blockquote>\n<p>Yes, it's just a bit annoying to publish this as well. I'd be happy to do it if we agree that we want to change the name of the extension in a more clear manner (e.g. something like <code>Lean 3 (obsolete)</code>) so that it sends a stronger signal than the description already does.</p>",
        "id": 465737371,
        "sender_full_name": "Marc Huisinga",
        "timestamp": 1724845173
    },
    {
        "content": "<p>There is a way to formally mark extensions as deprecated and point to other extensions, I've seen it before</p>",
        "id": 465738506,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1724845515
    },
    {
        "content": "<p>for example <a href=\"https://marketplace.visualstudio.com/items?itemName=freebroccolo.reasonml\">OCaml and Reason IDE</a> is shown with a strikethrough and there is a warning next to the install button saying \"This extension is deprecated. Use the <a href=\"https://marketplace.visualstudio.com/items?itemName=ocamllabs.ocaml-platform\">OCaml Platform</a> extension instead.\"</p>",
        "id": 465739100,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1724845695
    },
    {
        "content": "<p>Apparently you don't do this in the extension itself, instead you can report the extension deprecation request to microsoft <a href=\"https://github.com/microsoft/vscode-discussions/discussions/1\">here</a></p>",
        "id": 465739574,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1724845864
    },
    {
        "content": "<p>From a cursory search, it looks like this is not something that can be configured in the extension manifest and that needs to be done by the maintainers of the VS Code marketplace. I also wonder whether there is an equivalent for OpenVSX. <br>\nIt also <a href=\"https://stackoverflow.com/a/75730910\">seems to prevent the installation of the extension using the UI</a>, which means that this would be an alternative to eventually removing it from the marketplace, not changing the name to make it more clear that the extension is probably not what you need.</p>",
        "id": 465739582,
        "sender_full_name": "Marc Huisinga",
        "timestamp": 1724845868
    },
    {
        "content": "<p>you can still install via the <code>ext install &lt;extension name&gt;</code> method suggested by the marketplace webpage</p>",
        "id": 465740270,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1724846047
    },
    {
        "content": "<p>so this isn't truly blocking people who need to install it anyway</p>",
        "id": 465740327,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1724846065
    },
    {
        "content": "<p>Yes, I agree that this is a bit nicer than removing it from the marketplace, though unfortunately it doesn't look like OpenVSX supports deprecations.</p>",
        "id": 465740926,
        "sender_full_name": "Marc Huisinga",
        "timestamp": 1724846239
    },
    {
        "content": "<p>we could still do the display name thing for OpenVSX, that seems to be fairly common</p>",
        "id": 465741023,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1724846269
    },
    {
        "content": "<p>but also, it would be great to get it building again, I would like the lean 3 tech stack to keep working as long as possible for archival purposes</p>",
        "id": 465741197,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1724846316
    },
    {
        "content": "<p>I'll investigate that when I get a chance</p>",
        "id": 465741256,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1724846337
    },
    {
        "content": "<p>I'd be happy to unarchive and merge a PR if you are willing to do this.</p>",
        "id": 465741326,
        "sender_full_name": "Marc Huisinga",
        "timestamp": 1724846358
    },
    {
        "content": "<p>I've merged a display name change to <code>Lean 3 (deprecated)</code>. I'll wait with releasing it until the build is fixed.</p>",
        "id": 465750250,
        "sender_full_name": "Marc Huisinga",
        "timestamp": 1724848003
    },
    {
        "content": "<p>I would suggest testing any vscode marketplace based deprecation strategy with gitpod and/or devcontainers. We just got flypitch running on gitpod last week (without cache though, so build took a while)</p>",
        "id": 465754158,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1724849043
    }
]