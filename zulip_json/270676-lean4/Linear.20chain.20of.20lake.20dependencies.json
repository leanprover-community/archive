[
    {
        "content": "<p>I have a package <code>A</code> that depends on <code>mathlib</code>, a package <code>B</code> that depends on <code>A</code>, and a package <code>C</code> that depends on <code>B</code>.  For some reason while a <code>lake update &amp;&amp; lake build</code> in <code>A</code> and <code>B</code> is super quick, bumping the versions in <code>C</code> and building takes much longer because while it does download the mathlib cache, it goes through <code>Running ...</code> all the mathlib files, which takes quite some time, esp for tactics. Does anyone know what I could have misconfigured there? <span class=\"user-mention\" data-user-id=\"315577\">@Mac Malone</span></p>",
        "id": 520008482,
        "sender_full_name": "Jakob von Raumer",
        "timestamp": 1747992573
    },
    {
        "content": "<p>Are <code>A</code>, <code>B</code>, and <code>C</code> all on the same Lean toolchain? If <code>B</code> is not on mathlib's toolchain when updating <code>C</code>, then <code>C</code> will not necessarily update to mathlib's toolchain before building. Instead, it will update to whatever <code>B</code> is on.</p>",
        "id": 520114319,
        "sender_full_name": "Mac Malone",
        "timestamp": 1748027287
    },
    {
        "content": "<p>Yes, all on <code>leanprover/lean4:v4.20.0-rc5</code></p>",
        "id": 520386167,
        "sender_full_name": "Jakob von Raumer",
        "timestamp": 1748247416
    },
    {
        "content": "<p><code>C</code> in case has a <code>.toml</code> lakefile, while the other ones have a <code>.lean</code> one, but that shouldn't matter, right?</p>",
        "id": 520386855,
        "sender_full_name": "Jakob von Raumer",
        "timestamp": 1748247595
    },
    {
        "content": "<p>No, should be fine</p>",
        "id": 520418636,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1748256735
    },
    {
        "content": "<p>Hmm, I'll try to reproduce it on another machine...</p>",
        "id": 520593826,
        "sender_full_name": "Jakob von Raumer",
        "timestamp": 1748329481
    }
]