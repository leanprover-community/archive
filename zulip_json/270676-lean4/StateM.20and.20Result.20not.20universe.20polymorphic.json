[
    {
        "content": "<p>Is there a reason that lots of the monads, e.g. <code>StateM</code> and <code>EStateM</code> are not fully universe polymorphic?</p>",
        "id": 498751195,
        "sender_full_name": "Jakob von Raumer",
        "timestamp": 1739191471
    },
    {
        "content": "<p>Cf. <a href=\"https://github.com/leanprover/lean4/pull/3010\">lean4#3010</a>; I believe the status of the PR is basically \"increasing universe polymorphism is a double-edged sword because it can cause elaboration problems at some unknown time in the future, and there is no need for this within the Lean repository, so the FRO has been hesitant to pull the trigger and doesn't plan to invest time into this at the moment\"</p>",
        "id": 498753201,
        "sender_full_name": "Markus Himmel",
        "timestamp": 1739192012
    },
    {
        "content": "<p>Thanks, at least I'm not the only one with the issue <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span></p>",
        "id": 498759221,
        "sender_full_name": "Jakob von Raumer",
        "timestamp": 1739193597
    },
    {
        "content": "<p>I thought the status of the PR was just \"the benchmark looks too good to be true\"?</p>",
        "id": 498781416,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1739198964
    },
    {
        "content": "<p>Though unfortunately now that Batteries is proving stuff about EStateM, things are starting to rot</p>",
        "id": 498817315,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1739207612
    },
    {
        "content": "<p>I think Markus has just updated the status..:-)</p>",
        "id": 498866418,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1739222671
    },
    {
        "content": "<blockquote>\n<p>increasing universe polymorphism is a double-edged sword because it can cause elaboration problems at some unknown time in the future,</p>\n</blockquote>\n<p>Do we have any reason to believe this?</p>",
        "id": 498877408,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1739226528
    },
    {
        "content": "<blockquote>\n<p>And there is no need for this within the Lean repository</p>\n</blockquote>\n<p>Doesn't <code>lake</code> make its own universe-polymorphic copy?</p>",
        "id": 498877423,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1739226537
    },
    {
        "content": "<p>We had that weird issue with the enormous slowdowns in mathlib recently, didn't we? Not sure if that counts as \"elaboration problems\"</p>",
        "id": 498877537,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1739226582
    },
    {
        "content": "<p>All the mathlib cases were I believe ones where the universe variables were instantiated with <code>max u v</code> or similar, <a href=\"https://github.com/leanprover/lean4/pull/3010\">lean4#3010</a> in practice is only going to instantiate with free variables. Of course someone can write crazy code that does otherwise, but even then EStateM is a low level metaprogramming tool that is pretty far away from the kind of problem mathlib has.</p>",
        "id": 498878273,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1739226859
    }
]