[
    {
        "content": "<p>In the implementation of the lean server, files are reprocessed based on what the user has changed. I would like a way to reprocess the file whereby the headers stays the same (guaranteed), but the rest of the file's content (i.e. proof of the theorem) is changed. So I want to keep header in memory but adjust the commands, how to do this?</p>\n<p>I have looked at <a href=\"https://github.com/leanprover/lean4/blob/master/src/Lean/Language/Lean.lean\">https://github.com/leanprover/lean4/blob/master/src/Lean/Language/Lean.lean</a> but I still can't make out how to do this.</p>",
        "id": 513680878,
        "sender_full_name": "zmkm",
        "timestamp": 1745347504
    },
    {
        "content": "<p>Question from the peanut gallery: is what you're asking related to the (future, in progress, experimental) module system Lean's supposed to get?</p>",
        "id": 513716627,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1745351628
    },
    {
        "content": "<p>Usually these questions are related to building some kind of AI system</p>",
        "id": 513718209,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1745352256
    },
    {
        "content": "<p>Lean REPL might be what you are looking for. Although, you will have to separate the imports from the rest of the code. The idea:</p>\n<ol>\n<li>Process your file content by splitting it in 2: header, and rest of the file</li>\n<li>Send the header to the REPL: {\"cmd\": \"&lt;header-code&gt;\"}. You should get back something like {\"env\":0}</li>\n<li>Send the rest of the file content: {\"cmd\": \"&lt;file-content&gt;\", \"env\": 0}<br>\nIf your file content change, just repeat 3 with the new content and \"env\":0 again. The parameter \"env\" allows you to execute new code while keeping in memory what has been executed in the previous commands.</li>\n</ol>",
        "id": 513730135,
        "sender_full_name": "Auguste Poiroux",
        "timestamp": 1745357186
    },
    {
        "content": "<p>If you want to do it programmatically with Lean, you can probably borrow some code from this file: <a href=\"https://github.com/leanprover-community/repl/blob/master/REPL/Frontend.lean\">https://github.com/leanprover-community/repl/blob/master/REPL/Frontend.lean</a></p>",
        "id": 513730991,
        "sender_full_name": "Auguste Poiroux",
        "timestamp": 1745357634
    }
]