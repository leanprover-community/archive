[
    {
        "content": "<p>The following</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">add_comm</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">_</span>\n</code></pre></div>\n<p>works. (There are no typos, in the LHS there is multiplication but the proof is <code>Nat.add_comm</code>).</p>\n<p>Now, I get that any proof that <code>6=6</code> can be put after the <code>:=</code>, but how Lean fill the <code>_</code>'s?</p>\n<p><code>show_term</code> tells me the that the actual proof is</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">add_comm</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">mul</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"mi\">2</span>\n</code></pre></div>\n<p>And I don't understand why Lean choses <code>2*2</code> and <code>2</code> and not, for example <code>1*2</code> and <code>4</code> (that also works). Is it related to how multiplication is actually computed?</p>",
        "id": 527287033,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1751727893
    },
    {
        "content": "<p>It starts unfolding the multiplication until it exposes addition</p>",
        "id": 527287114,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1751727970
    },
    {
        "content": "<p>since <code>a.mul b.succ</code> is defeq to <code>a.mul b + b</code></p>",
        "id": 527287128,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1751727995
    },
    {
        "content": "<p>try doing <code>set_option trace.Meta.isDefEq true</code> to get some more info</p>",
        "id": 527287160,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1751728033
    },
    {
        "content": "<p>Ah yes of course!</p>",
        "id": 527287164,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1751728035
    },
    {
        "content": "<p>note that all the basic ways of producing a natural number are all defeq</p>",
        "id": 527300067,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1751743769
    },
    {
        "content": "<p>that means <code>3^2-3</code> and <code>6*(2-1)</code> and <code>2*2*2-2</code> are all defeq to 6</p>",
        "id": 527300083,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1751743794
    },
    {
        "content": "<p>Yeah, but that wasn't really the question</p>",
        "id": 527302592,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1751747085
    },
    {
        "content": "<p>well I'd say it's related. The way <code>2 * 3</code> got matched with <code>2*2 + 2</code> (the left hand sides) is by unfolding; but the way that <code>3 * 2</code> also got matched with <code>2 + 2*2</code> (the right hand sides) is by the process I described</p>",
        "id": 527312892,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1751762300
    },
    {
        "content": "<p>another example is:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">6</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">6</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">add_comm</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n</code></pre></div>",
        "id": 527312896,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1751762311
    },
    {
        "content": "<p>Yeah, you can put after the <code>:=</code> literally any proof that <code>6 = 6</code>. My question was how Lean filled the <code>_</code>, and for some reason I didn't think to definition of multiplication.</p>",
        "id": 527320361,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1751774288
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">â„•</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">rfl</span>\n</code></pre></div>\n<p>(but proving that either of them are <code>n</code> is harder)</p>",
        "id": 527370066,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1751832596
    }
]