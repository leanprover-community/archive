[
    {
        "content": "<p>A rewrite that I am trying to do is</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"w\">    </span><span class=\"c\">/-</span>\n<span class=\"cm\">    p : 0 &lt; sur_one.LO</span>\n<span class=\"cm\">    n_ge : is_ge (sur_one.L 0 p) (rsucc sur_zero)</span>\n<span class=\"cm\">    ⊢ (match (motive := (g : Game 1) → (αi : Ordinal.{u_1}) → αi &lt; g.LO → Game αi) sur_one with</span>\n<span class=\"cm\">        | Game.mk α β p l r =&gt; l</span>\n<span class=\"cm\">        | Game.None =&gt; fun x x_1 =&gt; Game.None)</span>\n<span class=\"cm\">        0 p =</span>\n<span class=\"cm\">      sur_zero</span>\n<span class=\"cm\">    -/</span>\n<span class=\"w\">    </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">sur_one</span><span class=\"o\">]</span>\n</code></pre></div>\n<p>Since sur_one appears in the goal. However it gives me the error <code>failed to rewrite using equation theorems for 'sur_one'</code>. I know from trying various things that it is probably due to the motive clause, but I don't know what a motive clause is and how to remove it. How do I put the specific value of <code>sur_one</code> into the goal?</p>",
        "id": 451577584,
        "sender_full_name": "Op From The Start",
        "timestamp": 1721066759
    },
    {
        "content": "<p><code>simp_rw</code> worked in this case. Why did it work and not <code>rw</code>?</p>",
        "id": 451579342,
        "sender_full_name": "Op From The Start",
        "timestamp": 1721067055
    },
    {
        "content": "<p>The <code>motive</code> is an important part of <code>match</code> expressions, and it explains how the type of the whole <code>match</code> expression depends on the value of the discriminant (<code>sur_one</code> in this case). If it's not provided, it's inferred, and the pretty printer only shows you the motive if it's more complicated than usual.</p>",
        "id": 451581558,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1721067426
    },
    {
        "content": "<p>Maybe you might have some luck with using the <code>split</code> tactic first if you want to try using <code>rw</code>?</p>",
        "id": 451581673,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1721067444
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"735974\">Op From The Start</span> <a href=\"#narrow/stream/270676-lean4/topic/Rewrite.20fails.20because.20of.20motive/near/451579342\">said</a>:</p>\n<blockquote>\n<p><code>simp_rw</code> worked in this case. Why did it work and not <code>rw</code>?</p>\n</blockquote>\n<p><code>simp</code> can navigate some rewrites that are trickier to pull off without so-called congruence lemmas. Or, it also can do definitional unfolding that obviates the need for congruence lemmas at all, something that <code>rw</code> can't do.</p>\n<p>You might also consider doing <code>unfold sur_one</code>, which can avoid the dependent type issues that <code>rw</code> has. It's sort of like <code>simp_rw [sur_one]</code>, but if I remember correctly it unfolds only once, which is important for recursive functions.</p>",
        "id": 451582401,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1721067566
    }
]