[
    {
        "content": "<p>I have the following error message in VSCode:</p>\n<div class=\"codehilite\" data-code-language=\"CodeQL\"><pre><span></span><code><span class=\"nv\">unknown</span><span class=\"w\"> </span><span class=\"k k-Builtin\">module</span><span class=\"w\"> </span><span class=\"nv\">prefix</span><span class=\"w\"> </span><span class=\"err\">'</span><span class=\"nc\">Ver</span><span class=\"err\">'</span>\n\n<span class=\"nc\">No</span><span class=\"w\"> </span><span class=\"nv\">directory</span><span class=\"w\"> </span><span class=\"err\">'</span><span class=\"nc\">Ver</span><span class=\"err\">'</span><span class=\"w\"> </span><span class=\"k k-Builtin\">or</span><span class=\"w\"> </span><span class=\"nv\">file</span><span class=\"w\"> </span><span class=\"err\">'</span><span class=\"nc\">Ver</span><span class=\"p\">.</span><span class=\"nv\">olean</span><span class=\"err\">'</span><span class=\"w\"> </span><span class=\"k k-Builtin\">in</span><span class=\"w\"> </span><span class=\"nv\">the</span><span class=\"w\"> </span><span class=\"nv\">search</span><span class=\"w\"> </span><span class=\"nv\">path</span><span class=\"w\"> </span><span class=\"nv\">entries</span><span class=\"p\">:</span>\n<span class=\"p\">.</span><span class=\"err\">\\</span><span class=\"p\">.</span><span class=\"err\">\\</span><span class=\"p\">.</span><span class=\"nv\">lake</span><span class=\"err\">\\</span><span class=\"nv\">build</span><span class=\"err\">\\</span><span class=\"nv\">lib</span><span class=\"err\">\\</span><span class=\"nv\">lean</span>\n<span class=\"p\">.</span><span class=\"err\">\\</span><span class=\"p\">.</span><span class=\"err\">\\</span><span class=\"p\">.</span><span class=\"nv\">lake</span><span class=\"err\">\\</span><span class=\"nv\">build</span><span class=\"err\">\\</span><span class=\"nv\">lib</span><span class=\"err\">\\</span><span class=\"nv\">lean</span>\n<span class=\"nv\">c</span><span class=\"p\">:</span><span class=\"err\">\\</span><span class=\"nc\">Users</span><span class=\"err\">\\</span><span class=\"nv\">k00929700</span><span class=\"err\">\\</span><span class=\"p\">.</span><span class=\"nv\">elan</span><span class=\"err\">\\</span><span class=\"nv\">toolchains</span><span class=\"err\">\\</span><span class=\"nv\">leanprover</span><span class=\"o\">--</span><span class=\"nv\">lean4</span><span class=\"o\">---</span><span class=\"nv\">v4</span><span class=\"p\">.</span><span class=\"mf\">18.0</span><span class=\"err\">\\</span><span class=\"nv\">lib</span><span class=\"err\">\\</span><span class=\"nv\">lean</span>\n<span class=\"nv\">c</span><span class=\"p\">:</span><span class=\"err\">\\</span><span class=\"nc\">Users</span><span class=\"err\">\\</span><span class=\"nv\">k00929700</span><span class=\"err\">\\</span><span class=\"p\">.</span><span class=\"nv\">elan</span><span class=\"err\">\\</span><span class=\"nv\">toolchains</span><span class=\"err\">\\</span><span class=\"nv\">leanprover</span><span class=\"o\">--</span><span class=\"nv\">lean4</span><span class=\"o\">---</span><span class=\"nv\">v4</span><span class=\"p\">.</span><span class=\"mf\">18.0</span><span class=\"err\">\\</span><span class=\"nv\">lib</span><span class=\"err\">\\</span><span class=\"nv\">lean</span>\n</code></pre></div>\n<p>I checked, needed files are in .\\.\\.lake\\build\\lib (without /lean subfolder).<br>\nHow can I remove the '/lean' suffix in the path that VSCode Lean extension is using for search or force \"lake build\" to use this subfolder ? </p>\n<p>This is my main file, which gives this error message:</p>\n<div class=\"codehilite\" data-code-language=\"CodeQL\"><pre><span></span><code><span class=\"k k-Builtin\">import</span><span class=\"w\"> </span><span class=\"nc\">Ver</span>\n\n<span class=\"nv\">def</span><span class=\"w\"> </span><span class=\"nv\">main</span><span class=\"w\"> </span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">IO</span><span class=\"w\"> </span><span class=\"nc\">Unit</span><span class=\"w\"> </span><span class=\"p\">:</span><span class=\"o\">=</span>\n<span class=\"w\">  </span><span class=\"nc\">IO</span><span class=\"p\">.</span><span class=\"nv\">println</span><span class=\"w\"> </span><span class=\"bp\">s</span><span class=\"err\">!</span><span class=\"s\">\"Hello !\"</span>\n</code></pre></div>\n<p>This is my lakefile:</p>\n<div class=\"codehilite\" data-code-language=\"CodeQL\"><pre><span></span><code><span class=\"nv\">name</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"s\">\"Ver\"</span>\n<span class=\"nv\">version</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"s\">\"0.1.0\"</span>\n<span class=\"nv\">defaultTargets</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"s\">\"Ver\"</span><span class=\"p\">]</span>\n\n<span class=\"p\">[[</span><span class=\"nv\">lean_lib</span><span class=\"p\">]]</span>\n<span class=\"nv\">name</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"s\">\"Ver\"</span>\n\n<span class=\"p\">[[</span><span class=\"nv\">require</span><span class=\"p\">]]</span>\n<span class=\"nv\">name</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"s\">\"mathlib\"</span>\n<span class=\"nv\">path</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"s\">\"mathlib4-old\"</span>\n\n<span class=\"p\">[[</span><span class=\"nv\">lean_exe</span><span class=\"p\">]]</span>\n<span class=\"nv\">name</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"s\">\"ver\"</span>\n<span class=\"nv\">root</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"s\">\"Main\"</span>\n</code></pre></div>",
        "id": 510884570,
        "sender_full_name": "Stan Kikot",
        "timestamp": 1744104995
    },
    {
        "content": "<p>This sounds like a Lean version mismatch. Could you post <a href=\"https://github.com/leanprover/vscode-lean4/blob/master/vscode-lean4/manual/manual.md#collecting-setup-information\">#vsc-setup</a>?</p>",
        "id": 510886304,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1744105503
    },
    {
        "content": "<p><strong>Operating system</strong>: Windows_NT (release: 10.0.19045)<br>\n<strong>CPU architecture</strong>: x64<br>\n<strong>CPU model</strong>: 24 x 13th Gen Intel(R) Core(TM) i7-13700<br>\n<strong>Available RAM</strong>: 33.96 GB</p>\n<p><strong>VS Code version</strong>: Reasonably up-to-date (version: 1.98.2)<br>\n<strong>Lean 4 extension version</strong>: 0.0.201<br>\n<strong>Curl installed</strong>: true<br>\n<strong>Git installed</strong>: true<br>\n<strong>Elan</strong>: Reasonably up-to-date (version: 4.0.0)<br>\n<strong>Lean</strong>: Reasonably up-to-date (version: 4.18.0)<br>\n<strong>Project</strong>: Valid Lean project (path: c:\\Users\\k00929700\\.elan\\workspace)<br>\n<strong>Active Lean version</strong>: leanprover/lean4:v4.18.0 (set by <code>file://%3F/c%3A/Users/k00929700/.elan/workspace/lean-toolchain</code>)<br>\n<strong>Installed Lean versions</strong>: leanprover/lean4:v4.17.0-rc1, leanprover/lean4:v4.18.0, leanprover/lean4:v4.19.0-rc2</p>",
        "id": 510887009,
        "sender_full_name": "Stan Kikot",
        "timestamp": 1744105691
    },
    {
        "content": "<p>And <code>lean --version</code> on the cmdline where you ran <code>lake build</code> also says 4.18.0?</p>",
        "id": 510888306,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1744106071
    },
    {
        "content": "<p>OK, I got it, the problem disappears when I open the immediate project folder, rather than the whole Lean workspace.</p>",
        "id": 510888346,
        "sender_full_name": "Stan Kikot",
        "timestamp": 1744106082
    },
    {
        "content": "<p>Oh, why do you have a workspace in .elan? You shouldn't touch that directory</p>",
        "id": 510888528,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1744106123
    },
    {
        "content": "<p>lean --version gives 4.18, but the project is build using 4.17 toolchain due to the old revision of mathlib</p>",
        "id": 510888751,
        "sender_full_name": "Stan Kikot",
        "timestamp": 1744106175
    },
    {
        "content": "<p>And yes, I should not have created nested projects.</p>",
        "id": 510888905,
        "sender_full_name": "Stan Kikot",
        "timestamp": 1744106219
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"897275\">Stan Kikot</span> has marked this topic as resolved.</p>",
        "id": 510889170,
        "sender_full_name": "Notification Bot",
        "timestamp": 1744106295
    }
]