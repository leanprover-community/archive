[
    {
        "content": "<p>Using the new module system, I get</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">foo</span><span class=\"w\"> </span><span class=\"bp\">...</span>\n\n<span class=\"bp\">#</span><span class=\"n\">print</span><span class=\"w\"> </span><span class=\"n\">axioms</span><span class=\"w\"> </span><span class=\"n\">foo</span><span class=\"w\"> </span><span class=\"c1\">--cannot use `#print axioms` in a `module`; consider temporarily removing the `module`  -</span>\n<span class=\"c1\">--header or placing the command in a separate file</span>\n</code></pre></div>\n<p>Are there plan to have it back? Or is there a deep reason why this cannot work?</p>",
        "id": 569775402,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1769191148
    },
    {
        "content": "<p>Well, consider how <code>#print axioms</code> works when <em>not</em> in a module: it recursively looks through constant types and bodies for references to other constants and axioms. Now, in the module system, declaration and theorem bodies are not exposed per default so this doesn't work. But, I'll quote from <span class=\"user-mention\" data-user-id=\"110024\">@Sebastian Ullrich</span> (see <a href=\"https://github.com/leanprover/lean4/pull/8090#issuecomment-2828514943\">here</a>):</p>\n<blockquote>\n<blockquote>\n<p>Also I guess this could get weird w.r.t. #print axioms</p>\n</blockquote>\n<p>Look forward to a follow-up PR introducing an environment extension for this. This was the only non-trivial thmInfo use case I found in core.</p>\n</blockquote>\n<p>Later in, <a href=\"https://github.com/leanprover/lean4/pull/8174\">lean4#8174</a>, where the error message was introduced, he reconsidered though:</p>\n<blockquote>\n<p>No need for extra tracking to enable it considering how easy it is to opt out</p>\n</blockquote>\n<p>Considering that mathlib uses the module system now and we might eventually want the module system to be the default, this might be different now though?</p>",
        "id": 569794079,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1769198451
    },
    {
        "content": "<p>Yes this is still being decided/designed /cc <span class=\"user-mention\" data-user-id=\"470149\">@Joachim Breitner</span></p>",
        "id": 569794441,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1769198596
    },
    {
        "content": "<p>Just to be sure I understand: if a file is <em>not</em> a module but it imports (in the old fashioned way) modules, then <code>#print axioms </code> is reliable? In the sense that it detects axioms introduced by maybe a module imported (privately) by a module imported by the file.</p>",
        "id": 569848025,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1769243343
    },
    {
        "content": "<p>Correct!</p>",
        "id": 569862605,
        "sender_full_name": "Joachim Breitner",
        "timestamp": 1769257700
    },
    {
        "content": "<p>Is there a tracking issue on github for designing/deciding here?</p>",
        "id": 575401465,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1771882328
    }
]