[
    {
        "content": "<p>I have a dependency (newly created) between two projects that I host on GitHub.</p>\n<p>Running <code>lake update</code> on the downstream project gave me error:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">revision</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">found</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">master'</span>\n</code></pre></div>\n<p>Does it mean that Lake expects the main branch to be called <code>master</code> not <code>main</code> by default?<br>\nCan I override this behavior without diving into specific revisions?</p>",
        "id": 456896417,
        "sender_full_name": "Martin Dvořák",
        "timestamp": 1722960863
    },
    {
        "content": "<p>I should never edit <code>lake-manifest.json</code> by hand, right?</p>",
        "id": 456896951,
        "sender_full_name": "Martin Dvořák",
        "timestamp": 1722960997
    },
    {
        "content": "<p>Does either lakefile contain the word \"master\"?</p>",
        "id": 456897356,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1722961105
    },
    {
        "content": "<p>Yes. When requiring from a different branch using <code>from git</code> you can use <code>from git ... @ \"main\"</code>. For example:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">require</span><span class=\"w\"> </span><span class=\"n\">batteries</span><span class=\"w\"> </span><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"n\">git</span><span class=\"w\"> </span><span class=\"s2\">\"https://github.com/leanprover-community/batteries\"</span><span class=\"w\"> </span><span class=\"bp\">@</span><span class=\"w\"> </span><span class=\"s2\">\"main\"</span>\n</code></pre></div>",
        "id": 456897479,
        "sender_full_name": "Mac Malone",
        "timestamp": 1722961143
    },
    {
        "content": "<p>[I was replying to Eric, but no longer relevant]</p>",
        "id": 456897507,
        "sender_full_name": "Martin Dvořák",
        "timestamp": 1722961147
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"417654\">Martin Dvořák</span> <a href=\"#narrow/stream/270676-lean4/topic/revision.20not.20found.20'master'/near/456896417\">said</a>:</p>\n<blockquote>\n<p>Does it mean that Lake expects the main branch to be called <code>master</code> not <code>main</code> by default?</p>\n</blockquote>\n<p>Yes, because this is the behavior of the <code>git</code> command line without further configuration</p>",
        "id": 456898163,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1722961305
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"417654\">Martin Dvořák</span> has marked this topic as resolved.</p>",
        "id": 456899328,
        "sender_full_name": "Notification Bot",
        "timestamp": 1722961536
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/stream/270676-lean4/topic/.E2.9C.94.20revision.20not.20found.20'master'/near/456898163\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"417654\">Martin Dvořák</span> <a href=\"#narrow/stream/270676-lean4/topic/revision.20not.20found.20'master'/near/456896417\">said</a>:</p>\n<blockquote>\n<p>Does it mean that Lake expects the main branch to be called <code>master</code> not <code>main</code> by default?</p>\n</blockquote>\n<p>Yes, because this is the behavior of the <code>git</code> command line without further configuration</p>\n</blockquote>\n<p>I don't think this is true... <code>git</code> will use the default branch without further configuration, but if a repo has a configured default branch which is not <code>master</code> then it will use that. Lake on the other hand hard-codes <code>master</code> as the default branch name, even if the repo has it set to something else. (<code>master</code> is the default default branch name in git, <code>main</code> is the default default branch name in github)</p>",
        "id": 457271801,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1723095074
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"315577\">Mac Malone</span> <a href=\"#narrow/channel/270676-lean4/topic/.E2.9C.94.20revision.20not.20found.20'master'/near/456897479\">said</a>:</p>\n<blockquote>\n<p>Yes. When requiring from a different branch using <code>from git</code> you can use <code>from git ... @ \"main\"</code>. For example:</p>\n<p><div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">require</span><span class=\"w\"> </span><span class=\"n\">batteries</span><span class=\"w\"> </span><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"n\">git</span><span class=\"w\"> </span><span class=\"s2\">\"https://github.com/leanprover-community/batteries\"</span><span class=\"w\"> </span><span class=\"bp\">@</span><span class=\"w\"> </span><span class=\"s2\">\"main\"</span>\n</code></pre></div><br>\n</p>\n</blockquote>\n<p>What's the syntax for this if I have a <code>lakefile.toml</code>? </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"o\">[[</span><span class=\"n\">require</span><span class=\"o\">]]</span>\n<span class=\"n\">name</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"s2\">\"batteries\"</span>\n<span class=\"n\">git</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"s2\">\"https://github.com/leanprover-community/batteries\"</span><span class=\"w\"> </span><span class=\"bp\">@</span><span class=\"w\"> </span><span class=\"s2\">\"main\"</span>\n</code></pre></div>\n<p>gives an end of input error</p>",
        "id": 485075409,
        "sender_full_name": "Dagur Asgeirsson",
        "timestamp": 1732878487
    },
    {
        "content": "<p><code>rev = \"main\"</code> on the next line?</p>",
        "id": 485076588,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1732878892
    },
    {
        "content": "<p>That works. Thanks!</p>",
        "id": 485076940,
        "sender_full_name": "Dagur Asgeirsson",
        "timestamp": 1732879014
    }
]