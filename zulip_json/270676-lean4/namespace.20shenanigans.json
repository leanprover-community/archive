[
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">axiom</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"bp\">.</span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"bp\">.</span><span class=\"n\">h₁</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"gr\">sorry</span><span class=\"w\"> </span><span class=\"c1\">-- correctly resolves to A.b</span>\n\n<span class=\"kn\">namespace</span><span class=\"w\"> </span><span class=\"n\">E</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"n\">root_</span><span class=\"bp\">.</span><span class=\"n\">A</span><span class=\"bp\">.</span><span class=\"n\">h₂</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"gr\">sorry</span><span class=\"w\"> </span><span class=\"c1\">-- does not recognise b</span>\n\n<span class=\"kn\">end</span><span class=\"w\"> </span><span class=\"n\">E</span>\n</code></pre></div>",
        "id": 535208287,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1755640425
    },
    {
        "content": "<p>why should this resolve to <code>b</code>? To avoid surprises a definition should work the same way regardless of the name of the decl</p>",
        "id": 535213694,
        "sender_full_name": "Leni Aniva",
        "timestamp": 1755644361
    },
    {
        "content": "<p>for me it's the opposite, because when I write <code>_root_.A</code> i almost always mean \"i actually wanted this to be under the namespace <code>A</code> but i was too lazy\", so I would expect it to behave as if it was in the namespace <code>A</code></p>",
        "id": 535213776,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1755644417
    },
    {
        "content": "<p>issue <a href=\"https://github.com/leanprover/lean4/pull/9445\">lean4#9445</a> is possibly addressing this</p>",
        "id": 535218088,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1755648213
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"599027\">Leni Aniva</span> <a href=\"#narrow/channel/270676-lean4/topic/namespace.20shenanigans/near/535213694\">said</a>:</p>\n<blockquote>\n<p>why should this resolve to <code>b</code>? To avoid surprises a definition should work the same way regardless of the name of the decl</p>\n</blockquote>\n<p>well this is false already, because in the above you can see how the name <code>A.h₁</code> causes <code>b</code> to be resolved to <code>A.b</code></p>",
        "id": 535476572,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1755773024
    },
    {
        "content": "<p>That's not my favorite design choice, but since it is already in Lean we should be consistent and adopt it for <code>_root_</code> decls as well</p>",
        "id": 535550552,
        "sender_full_name": "Niels Voss",
        "timestamp": 1755798031
    }
]