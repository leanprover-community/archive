[
    {
        "content": "<p>Consider the following</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">}</span>\n<span class=\"kn\">infixr</span><span class=\"o\">:</span><span class=\"mi\">80</span><span class=\"w\"> </span><span class=\"s2\">\" â‰« \"</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">Function</span><span class=\"bp\">.</span><span class=\"n\">comp</span>\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">longname</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"bp\">â†’</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">longname</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">id</span><span class=\"o\">):</span>\n<span class=\"w\">  </span><span class=\"n\">longname</span><span class=\"w\"> </span><span class=\"bp\">â‰«</span>\n<span class=\"w\">    </span><span class=\"n\">longname</span><span class=\"w\"> </span><span class=\"bp\">â‰«</span>\n<span class=\"w\">    </span><span class=\"n\">longname</span><span class=\"w\"> </span><span class=\"bp\">â‰«</span>\n<span class=\"w\">    </span><span class=\"n\">longname</span><span class=\"w\"> </span><span class=\"bp\">â‰«</span>\n<span class=\"w\">    </span><span class=\"n\">longname</span><span class=\"w\"> </span><span class=\"bp\">â‰«</span>\n<span class=\"w\">    </span><span class=\"n\">longname</span><span class=\"w\"> </span><span class=\"bp\">â‰«</span>\n<span class=\"w\">    </span><span class=\"n\">longname</span><span class=\"w\"> </span><span class=\"bp\">â‰«</span>\n<span class=\"w\">    </span><span class=\"n\">longname</span><span class=\"w\"> </span><span class=\"bp\">â‰«</span>\n<span class=\"w\">    </span><span class=\"n\">longname</span><span class=\"w\"> </span><span class=\"bp\">â‰«</span>\n<span class=\"w\">    </span><span class=\"n\">longname</span><span class=\"w\"> </span><span class=\"bp\">â‰«</span>\n<span class=\"w\">    </span><span class=\"n\">longname</span><span class=\"w\"> </span><span class=\"bp\">â‰«</span>\n<span class=\"w\">    </span><span class=\"n\">longname</span><span class=\"w\"> </span><span class=\"bp\">â‰«</span>\n<span class=\"w\">    </span><span class=\"n\">longname</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">id</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"c\">/-</span>\n<span class=\"cm\">  âŠ¢ longname â‰«</span>\n<span class=\"cm\">      longname â‰«</span>\n<span class=\"cm\">        longname â‰«</span>\n<span class=\"cm\">          longname â‰« longname â‰« longname â‰« longname â‰« longname â‰« longname â‰« longname â‰« longname â‰« longname â‰« longname =</span>\n<span class=\"cm\">    id</span>\n<span class=\"cm\">  -/</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>In expressions where the number of compositions starts to get big enough (here, these are compositions, but this happens with any binary operator), the expressions in the infoview (coming from the pretty-printer representations I suppose? Iâ€™m not familiar with the internals at all) indent each new composition until the last line gets short enough.</p>\n<p>I tend to work with mathlib's category theory library (which has the same notations as in my example), and I often run into big expressions with lots of compositions of terms with long names (especially when working with bicategories): I am losing a lot of screen space because of this indentation convention, and in extreme cases terms end up \"squished\" to the right and the resulting goal state is basically unreadable.</p>\n<p>It would be much much more readable if they were to just align without adding an indentation degree each time (a bit like I did in the statement)</p>\n<p>Is there any option/meta code/whatever I can use so that I can change this behavior (at least locally)?</p>",
        "id": 566323469,
        "sender_full_name": "Robin Carlier",
        "timestamp": 1767610145
    },
    {
        "content": "<p>If you redefine the syntax to have a <code>ppDedent</code> (which unfortunately requires avoiding <code>notation</code> and using <code>syntax</code>) it seems like it uses the indentation style you used in the source:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Lean</span>\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">}</span>\n<span class=\"kn\">syntax</span><span class=\"o\">:</span><span class=\"mi\">80</span><span class=\"w\"> </span><span class=\"n\">term</span><span class=\"o\">:</span><span class=\"mi\">81</span><span class=\"w\"> </span><span class=\"s2\">\" â‰« \"</span><span class=\"w\"> </span><span class=\"n\">ppDedent</span><span class=\"o\">(</span><span class=\"n\">term</span><span class=\"o\">:</span><span class=\"mi\">80</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">term</span>\n<span class=\"kn\">macro_rules</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">`</span><span class=\"o\">(</span><span class=\"bp\">$</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">â‰«</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"n\">b</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"bp\">`</span><span class=\"o\">(</span><span class=\"n\">Function</span><span class=\"bp\">.</span><span class=\"n\">comp</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"n\">b</span><span class=\"o\">)</span>\n<span class=\"kd\">@[</span><span class=\"n\">app_unexpander</span><span class=\"w\"> </span><span class=\"n\">Function</span><span class=\"bp\">.</span><span class=\"n\">comp</span><span class=\"kd\">]</span><span class=\"w\"> </span><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">unexpandComp</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">PrettyPrinter</span><span class=\"bp\">.</span><span class=\"n\">Unexpander</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">`</span><span class=\"o\">(</span><span class=\"bp\">$_</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"n\">b</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"bp\">`</span><span class=\"o\">(</span><span class=\"bp\">$</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">â‰«</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"n\">b</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">throw</span><span class=\"w\"> </span><span class=\"o\">()</span>\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">longname</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"bp\">â†’</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">longname</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">id</span><span class=\"o\">):</span>\n<span class=\"w\">  </span><span class=\"n\">longname</span><span class=\"w\"> </span><span class=\"bp\">â‰«</span>\n<span class=\"w\">    </span><span class=\"n\">longname</span><span class=\"w\"> </span><span class=\"bp\">â‰«</span>\n<span class=\"w\">    </span><span class=\"n\">longname</span><span class=\"w\"> </span><span class=\"bp\">â‰«</span>\n<span class=\"w\">    </span><span class=\"n\">longname</span><span class=\"w\"> </span><span class=\"bp\">â‰«</span>\n<span class=\"w\">    </span><span class=\"n\">longname</span><span class=\"w\"> </span><span class=\"bp\">â‰«</span>\n<span class=\"w\">    </span><span class=\"n\">longname</span><span class=\"w\"> </span><span class=\"bp\">â‰«</span>\n<span class=\"w\">    </span><span class=\"n\">longname</span><span class=\"w\"> </span><span class=\"bp\">â‰«</span>\n<span class=\"w\">    </span><span class=\"n\">longname</span><span class=\"w\"> </span><span class=\"bp\">â‰«</span>\n<span class=\"w\">    </span><span class=\"n\">longname</span><span class=\"w\"> </span><span class=\"bp\">â‰«</span>\n<span class=\"w\">    </span><span class=\"n\">longname</span><span class=\"w\"> </span><span class=\"bp\">â‰«</span>\n<span class=\"w\">    </span><span class=\"n\">longname</span><span class=\"w\"> </span><span class=\"bp\">â‰«</span>\n<span class=\"w\">    </span><span class=\"n\">longname</span><span class=\"w\"> </span><span class=\"bp\">â‰«</span>\n<span class=\"w\">    </span><span class=\"n\">longname</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">id</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"c\">/-</span>\n<span class=\"cm\">  âŠ¢ longname â‰«</span>\n<span class=\"cm\">      longname â‰«</span>\n<span class=\"cm\">      longname â‰«</span>\n<span class=\"cm\">      longname â‰« longname â‰« longname â‰« longname â‰« longname â‰« longname â‰« longname â‰« longname â‰« longname â‰« longname =</span>\n<span class=\"cm\">    id</span>\n<span class=\"cm\">  -/</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n</code></pre></div>",
        "id": 566489646,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1767682993
    },
    {
        "content": "<p>I wonder if there's any reason that pretty printing of binary operations shouldn't work this way in general?</p>",
        "id": 566489724,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1767683052
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"306601\">@Kyle Miller</span> ! This works for category theory as well!</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">CategoryTheory</span><span class=\"bp\">.</span><span class=\"n\">Category</span><span class=\"bp\">.</span><span class=\"n\">Basic</span>\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">CategoryTheory</span>\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Category</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">]</span>\n<span class=\"kn\">syntax</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">name</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">myComp</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">priority</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">high</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">term</span><span class=\"o\">:</span><span class=\"mi\">81</span><span class=\"w\"> </span><span class=\"s2\">\" â‰« \"</span><span class=\"w\"> </span><span class=\"n\">ppDedent</span><span class=\"o\">(</span><span class=\"n\">term</span><span class=\"o\">:</span><span class=\"mi\">80</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">term</span>\n<span class=\"kn\">macro_rules</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">kind</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">myComp</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">`</span><span class=\"o\">(</span><span class=\"bp\">$</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">â‰«</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"n\">b</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"bp\">`</span><span class=\"o\">(</span><span class=\"n\">CategoryStruct</span><span class=\"bp\">.</span><span class=\"n\">comp</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"n\">b</span><span class=\"o\">)</span>\n<span class=\"kd\">@[</span><span class=\"n\">app_unexpander</span><span class=\"w\"> </span><span class=\"n\">CategoryStruct</span><span class=\"bp\">.</span><span class=\"n\">comp</span><span class=\"kd\">]</span><span class=\"w\"> </span><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">unexpandComp</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">PrettyPrinter</span><span class=\"bp\">.</span><span class=\"n\">Unexpander</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">`</span><span class=\"o\">(</span><span class=\"bp\">$_</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"n\">b</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"bp\">`</span><span class=\"o\">(</span><span class=\"bp\">$</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">â‰«</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"n\">b</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">throw</span><span class=\"w\"> </span><span class=\"o\">()</span>\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">longname</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">âŸ¶</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">longname</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">ğŸ™</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">):</span>\n<span class=\"w\">  </span><span class=\"n\">longname</span><span class=\"w\"> </span><span class=\"bp\">â‰«</span>\n<span class=\"w\">    </span><span class=\"n\">longname</span><span class=\"w\"> </span><span class=\"bp\">â‰«</span>\n<span class=\"w\">    </span><span class=\"n\">longname</span><span class=\"w\"> </span><span class=\"bp\">â‰«</span>\n<span class=\"w\">    </span><span class=\"n\">longname</span><span class=\"w\"> </span><span class=\"bp\">â‰«</span>\n<span class=\"w\">    </span><span class=\"n\">longname</span><span class=\"w\"> </span><span class=\"bp\">â‰«</span>\n<span class=\"w\">    </span><span class=\"n\">longname</span><span class=\"w\"> </span><span class=\"bp\">â‰«</span>\n<span class=\"w\">    </span><span class=\"n\">longname</span><span class=\"w\"> </span><span class=\"bp\">â‰«</span>\n<span class=\"w\">    </span><span class=\"n\">longname</span><span class=\"w\"> </span><span class=\"bp\">â‰«</span>\n<span class=\"w\">    </span><span class=\"n\">longname</span><span class=\"w\"> </span><span class=\"bp\">â‰«</span>\n<span class=\"w\">    </span><span class=\"n\">longname</span><span class=\"w\"> </span><span class=\"bp\">â‰«</span>\n<span class=\"w\">    </span><span class=\"n\">longname</span><span class=\"w\"> </span><span class=\"bp\">â‰«</span>\n<span class=\"w\">    </span><span class=\"n\">longname</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">ğŸ™</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"c\">/-</span>\n<span class=\"cm\">âŠ¢ longname â‰«</span>\n<span class=\"cm\">    longname â‰«</span>\n<span class=\"cm\">    longname â‰« longname â‰« longname â‰« longname â‰« longname â‰« longname â‰« longname â‰« longname â‰« longname â‰« longname =</span>\n<span class=\"cm\">  ğŸ™ a</span>\n<span class=\"cm\">-/</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n</code></pre></div>",
        "id": 566492785,
        "sender_full_name": "Robin Carlier",
        "timestamp": 1767685152
    },
    {
        "content": "<p>If you fix this for binary operations, please also for <code>-&gt;</code> so that large types print prettier</p>",
        "id": 566589127,
        "sender_full_name": "Joachim Breitner",
        "timestamp": 1767720213
    },
    {
        "content": "<p>Could we teach this to allow multiple lines with more than one item, rather than partitioning as <code>[1, 1, 1, ..., n]</code>?</p>",
        "id": 566590174,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1767720583
    },
    {
        "content": "<p>Iâ€™ll try to find some time to open an issue on the lean4 repo about this this week, but no promises.</p>",
        "id": 566593706,
        "sender_full_name": "Robin Carlier",
        "timestamp": 1767721863
    },
    {
        "content": "<p>Here's a style question:</p>\n<p>Do people normally write</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"w\">  </span><span class=\"n\">t1</span><span class=\"w\"> </span><span class=\"bp\">+</span>\n<span class=\"w\">    </span><span class=\"n\">t2</span><span class=\"w\"> </span><span class=\"bp\">+</span>\n<span class=\"w\">    </span><span class=\"n\">t3</span><span class=\"w\"> </span><span class=\"bp\">+</span>\n<span class=\"w\">    </span><span class=\"n\">t4</span>\n</code></pre></div>\n<p>or</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"w\">  </span><span class=\"n\">t1</span>\n<span class=\"w\">    </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">t2</span>\n<span class=\"w\">    </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">t3</span>\n<span class=\"w\">    </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">t4</span>\n</code></pre></div>\n<p>The second is what I personally do (both in Lean and in mathematical writing).</p>\n<p>Does it depend on what kind of operator it is? I see Robin end each line with the composition operator (perhaps simply to mimic Lean?) but I probably would have written it as</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"w\">  </span><span class=\"n\">longname</span>\n<span class=\"w\">    </span><span class=\"bp\">â‰«</span><span class=\"w\"> </span><span class=\"n\">longname</span>\n<span class=\"w\">    </span><span class=\"bp\">â‰«</span><span class=\"w\"> </span><span class=\"n\">longname</span>\n<span class=\"w\">    </span><span class=\"bp\">â‰«</span><span class=\"w\"> </span><span class=\"n\">longname</span>\n<span class=\"w\">    </span><span class=\"bp\">â‰«</span><span class=\"w\"> </span><span class=\"n\">longname</span>\n<span class=\"w\">    </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">id</span>\n</code></pre></div>",
        "id": 566606629,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1767727027
    },
    {
        "content": "<p>I tend to go for the first</p>",
        "id": 566607377,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1767727363
    },
    {
        "content": "<p>I will use whatever the future code formatter decides for me :)</p>\n<p>(my non-joke answer is the second, because of annoyances in diffs, using <code>#check</code>, etc.)</p>",
        "id": 566608514,
        "sender_full_name": "Chris Henson",
        "timestamp": 1767727775
    },
    {
        "content": "<p>I like the second (and used to prefer it), but Mathlib's conventions are to use the first, so I refrain myself from using it in code in practice.<br>\nIn the best world there is an options to switch between the two in the pretty-printer</p>",
        "id": 566609154,
        "sender_full_name": "Robin Carlier",
        "timestamp": 1767728032
    },
    {
        "content": "<p>I'm sure this isn't quite right (my impression is that doing it robustly would require some actual support from the pretty printer), but here's an approximation/hack using pp syntax combinators that seems to do the trick:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">CategoryTheory</span><span class=\"bp\">.</span><span class=\"n\">Category</span><span class=\"bp\">.</span><span class=\"n\">Basic</span>\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">CategoryTheory</span>\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Category</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">]</span>\n<span class=\"kn\">syntax</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">name</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">myComp</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">priority</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">high</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">term</span><span class=\"o\">:</span><span class=\"mi\">81</span><span class=\"w\"> </span><span class=\"n\">ppSpace</span><span class=\"w\"> </span><span class=\"n\">ppRealGroup</span><span class=\"o\">(</span><span class=\"s2\">\"â‰«\"</span><span class=\"w\"> </span><span class=\"n\">ppHardSpace</span><span class=\"w\"> </span><span class=\"n\">ppDedent</span><span class=\"o\">(</span><span class=\"n\">term</span><span class=\"o\">:</span><span class=\"mi\">80</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">term</span>\n<span class=\"kn\">macro_rules</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">kind</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">myComp</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">`</span><span class=\"o\">(</span><span class=\"bp\">$</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">â‰«</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"n\">b</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"bp\">`</span><span class=\"o\">(</span><span class=\"n\">CategoryStruct</span><span class=\"bp\">.</span><span class=\"n\">comp</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"n\">b</span><span class=\"o\">)</span>\n<span class=\"kd\">@[</span><span class=\"n\">app_unexpander</span><span class=\"w\"> </span><span class=\"n\">CategoryStruct</span><span class=\"bp\">.</span><span class=\"n\">comp</span><span class=\"kd\">]</span><span class=\"w\"> </span><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">unexpandComp</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">PrettyPrinter</span><span class=\"bp\">.</span><span class=\"n\">Unexpander</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">`</span><span class=\"o\">(</span><span class=\"bp\">$_</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"n\">b</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"bp\">`</span><span class=\"o\">(</span><span class=\"bp\">$</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">â‰«</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"n\">b</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">throw</span><span class=\"w\"> </span><span class=\"o\">()</span>\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">longname</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">âŸ¶</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">longname</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">ğŸ™</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">):</span>\n<span class=\"w\">  </span><span class=\"n\">longname</span><span class=\"w\"> </span><span class=\"bp\">â‰«</span>\n<span class=\"w\">    </span><span class=\"n\">longname</span><span class=\"w\"> </span><span class=\"bp\">â‰«</span>\n<span class=\"w\">    </span><span class=\"n\">longname</span><span class=\"w\"> </span><span class=\"bp\">â‰«</span>\n<span class=\"w\">    </span><span class=\"n\">longname</span><span class=\"w\"> </span><span class=\"bp\">â‰«</span>\n<span class=\"w\">    </span><span class=\"n\">longname</span><span class=\"w\"> </span><span class=\"bp\">â‰«</span>\n<span class=\"w\">    </span><span class=\"n\">longname</span><span class=\"w\"> </span><span class=\"bp\">â‰«</span>\n<span class=\"w\">    </span><span class=\"n\">longname</span><span class=\"w\"> </span><span class=\"bp\">â‰«</span>\n<span class=\"w\">    </span><span class=\"n\">longname</span><span class=\"w\"> </span><span class=\"bp\">â‰«</span>\n<span class=\"w\">    </span><span class=\"n\">longname</span><span class=\"w\"> </span><span class=\"bp\">â‰«</span>\n<span class=\"w\">    </span><span class=\"n\">longname</span><span class=\"w\"> </span><span class=\"bp\">â‰«</span>\n<span class=\"w\">    </span><span class=\"n\">longname</span><span class=\"w\"> </span><span class=\"bp\">â‰«</span>\n<span class=\"w\">    </span><span class=\"n\">longname</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">ğŸ™</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"c\">/-</span>\n<span class=\"cm\">âŠ¢ longname</span>\n<span class=\"cm\">    â‰« longname</span>\n<span class=\"cm\">    â‰« longname â‰« longname â‰« longname â‰« longname â‰« longname â‰« longname â‰« longname â‰« longname â‰« longname â‰« longname =</span>\n<span class=\"cm\">  ğŸ™ a</span>\n<span class=\"cm\">-/</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>Getting it to fill (printing more than one operator/term pair per line, per <span class=\"user-mention\" data-user-id=\"310045\">@Eric Wieser</span>'s suggestion) would require pretty printer support for terms with mixed operators. It's possible to get it to work with just a single operator at a time though using the following approach:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">CategoryTheory</span><span class=\"bp\">.</span><span class=\"n\">Category</span><span class=\"bp\">.</span><span class=\"n\">Basic</span>\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">CategoryTheory</span>\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Category</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">]</span>\n<span class=\"kn\">syntax</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">name</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">myComp</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">priority</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">high</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">term</span><span class=\"o\">:</span><span class=\"mi\">81</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ppSpace</span><span class=\"w\"> </span><span class=\"n\">ppRealGroup</span><span class=\"o\">(</span><span class=\"s2\">\"â‰«\"</span><span class=\"w\"> </span><span class=\"n\">ppHardSpace</span><span class=\"w\"> </span><span class=\"n\">term</span><span class=\"o\">:</span><span class=\"mi\">81</span><span class=\"o\">))</span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">term</span>\n<span class=\"kn\">macro_rules</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">kind</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">myComp</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">`</span><span class=\"o\">(</span><span class=\"bp\">$</span><span class=\"n\">a</span><span class=\"o\">:</span><span class=\"n\">term</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"o\">[</span><span class=\"bp\">â‰«</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"n\">bs</span><span class=\"o\">:</span><span class=\"n\">term</span><span class=\"o\">]</span><span class=\"bp\">*</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"k\">show</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">MacroM</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">TSyntax</span><span class=\"w\"> </span><span class=\"ss\">`term</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">from</span>\n<span class=\"w\">    </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">args</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">::</span><span class=\"w\"> </span><span class=\"n\">bs</span><span class=\"bp\">.</span><span class=\"n\">pop</span><span class=\"bp\">.</span><span class=\"n\">toList</span>\n<span class=\"w\">    </span><span class=\"n\">args</span><span class=\"bp\">.</span><span class=\"n\">foldrM</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">init</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">bs</span><span class=\"o\">[</span><span class=\"n\">bs</span><span class=\"bp\">.</span><span class=\"n\">size</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">]</span><span class=\"bp\">!</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">e</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">TSyntax</span><span class=\"w\"> </span><span class=\"ss\">`term</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">      </span><span class=\"bp\">`</span><span class=\"o\">(</span><span class=\"n\">CategoryStruct</span><span class=\"bp\">.</span><span class=\"n\">comp</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"n\">e</span><span class=\"o\">)</span>\n<span class=\"kd\">@[</span><span class=\"n\">app_unexpander</span><span class=\"w\"> </span><span class=\"n\">CategoryStruct</span><span class=\"bp\">.</span><span class=\"n\">comp</span><span class=\"kd\">]</span><span class=\"w\"> </span><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">unexpandComp</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">PrettyPrinter</span><span class=\"bp\">.</span><span class=\"n\">Unexpander</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">`</span><span class=\"o\">(</span><span class=\"bp\">$_</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"n\">b</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">    </span><span class=\"k\">match</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"k\">with</span>\n<span class=\"w\">    </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">`</span><span class=\"o\">(</span><span class=\"bp\">$</span><span class=\"n\">b1</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"o\">[</span><span class=\"bp\">â‰«</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"n\">bs</span><span class=\"o\">]</span><span class=\"bp\">*</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">bs'</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"o\">[</span><span class=\"n\">b1</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"bp\">++</span><span class=\"w\"> </span><span class=\"n\">bs</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"bp\">`</span><span class=\"o\">(</span><span class=\"bp\">$</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"o\">[</span><span class=\"bp\">â‰«</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"n\">bs'</span><span class=\"o\">]</span><span class=\"bp\">*</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"bp\">`</span><span class=\"o\">(</span><span class=\"bp\">$</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">â‰«</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"n\">b</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">throw</span><span class=\"w\"> </span><span class=\"o\">()</span>\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">longname</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">âŸ¶</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">longname</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">ğŸ™</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">):</span>\n<span class=\"w\">  </span><span class=\"n\">longname</span><span class=\"w\"> </span><span class=\"bp\">â‰«</span><span class=\"w\"> </span><span class=\"n\">longname</span><span class=\"w\"> </span><span class=\"bp\">â‰«</span><span class=\"w\"> </span><span class=\"n\">longname</span><span class=\"w\"> </span><span class=\"bp\">â‰«</span><span class=\"w\"> </span><span class=\"n\">longname</span><span class=\"w\"> </span><span class=\"bp\">â‰«</span><span class=\"w\"> </span><span class=\"n\">longname</span>\n<span class=\"w\">    </span><span class=\"bp\">â‰«</span><span class=\"w\"> </span><span class=\"n\">longname</span><span class=\"w\"> </span><span class=\"bp\">â‰«</span><span class=\"w\"> </span><span class=\"n\">longname</span><span class=\"w\"> </span><span class=\"bp\">â‰«</span><span class=\"w\"> </span><span class=\"n\">longname</span><span class=\"w\"> </span><span class=\"bp\">â‰«</span><span class=\"w\"> </span><span class=\"n\">longname</span><span class=\"w\"> </span><span class=\"bp\">â‰«</span><span class=\"w\"> </span><span class=\"n\">longname</span>\n<span class=\"w\">    </span><span class=\"bp\">â‰«</span><span class=\"w\"> </span><span class=\"n\">longname</span><span class=\"w\"> </span><span class=\"bp\">â‰«</span><span class=\"w\"> </span><span class=\"n\">longname</span><span class=\"w\"> </span><span class=\"bp\">â‰«</span><span class=\"w\"> </span><span class=\"n\">longname</span><span class=\"w\"> </span><span class=\"bp\">â‰«</span><span class=\"w\"> </span><span class=\"n\">longname</span><span class=\"w\"> </span><span class=\"bp\">â‰«</span><span class=\"w\"> </span><span class=\"n\">longname</span>\n<span class=\"w\">    </span><span class=\"bp\">â‰«</span><span class=\"w\"> </span><span class=\"n\">longname</span><span class=\"w\"> </span><span class=\"bp\">â‰«</span><span class=\"w\"> </span><span class=\"n\">longname</span><span class=\"w\"> </span><span class=\"bp\">â‰«</span><span class=\"w\"> </span><span class=\"n\">longname</span><span class=\"w\"> </span><span class=\"bp\">â‰«</span><span class=\"w\"> </span><span class=\"n\">longname</span><span class=\"w\"> </span><span class=\"bp\">â‰«</span><span class=\"w\"> </span><span class=\"n\">longname</span>\n<span class=\"w\">    </span><span class=\"bp\">â‰«</span><span class=\"w\"> </span><span class=\"n\">longname</span><span class=\"w\"> </span><span class=\"bp\">â‰«</span><span class=\"w\"> </span><span class=\"n\">longname</span><span class=\"w\"> </span><span class=\"bp\">â‰«</span><span class=\"w\"> </span><span class=\"n\">longname</span><span class=\"w\"> </span><span class=\"bp\">â‰«</span><span class=\"w\"> </span><span class=\"n\">longname</span><span class=\"w\"> </span><span class=\"bp\">â‰«</span><span class=\"w\"> </span><span class=\"n\">longname</span>\n<span class=\"w\">    </span><span class=\"bp\">â‰«</span><span class=\"w\"> </span><span class=\"n\">longname</span><span class=\"w\"> </span><span class=\"bp\">â‰«</span><span class=\"w\"> </span><span class=\"n\">longname</span><span class=\"w\"> </span><span class=\"bp\">â‰«</span><span class=\"w\"> </span><span class=\"n\">longname</span><span class=\"w\"> </span><span class=\"bp\">â‰«</span><span class=\"w\"> </span><span class=\"n\">longname</span><span class=\"w\"> </span><span class=\"bp\">â‰«</span><span class=\"w\"> </span><span class=\"n\">longname</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">ğŸ™</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"c\">/-</span>\n<span class=\"cm\">âŠ¢ longname â‰« longname â‰« longname â‰« longname â‰« longname â‰« longname â‰« longname â‰« longname â‰« longname â‰« longname â‰« longname</span>\n<span class=\"cm\">    â‰« longname â‰« longname â‰« longname â‰« longname â‰« longname â‰« longname â‰« longname â‰« longname â‰« longname â‰« longname</span>\n<span class=\"cm\">    â‰« longname â‰« longname â‰« longname â‰« longname â‰« longname â‰« longname â‰« longname â‰« longname â‰« longname =</span>\n<span class=\"cm\">  ğŸ™ a</span>\n<span class=\"cm\">-/</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n</code></pre></div>",
        "id": 566616325,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1767731009
    },
    {
        "content": "<p>I guess the <a href=\"https://github.com/leanprover/lean4/blob/master/doc/std/style.md#splitting-terms-across-multiple-lines\">standard library style conventions</a> might also be a good data point?</p>\n<blockquote>\n<h2>Splitting terms across multiple lines</h2>\n<p>[...]<br>\nWhen splitting at an infix operator, the operator goes at the end of the first line, not at the beginning of the second line. When splitting at an infix operator, you may or may not increase indentation depth, depending on what is more readable.</p>\n</blockquote>",
        "id": 571670088,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1770127384
    },
    {
        "content": "<p>Ah, right <span class=\"user-mention silent\" data-user-id=\"286014\">Robin Carlier</span> already mentioned that the first is the Mathlib convention, I guess Lean's standard library adopted that</p>",
        "id": 571670372,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1770127446
    },
    {
        "content": "<p>Random wild, probably awful, idea: what about a <code>(-&gt;)</code> syntax:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"o\">(</span><span class=\"bp\">-&gt;</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"n\">C</span>\n</code></pre></div>",
        "id": 571769279,
        "sender_full_name": "Max Nowak ğŸ‰",
        "timestamp": 1770154856
    },
    {
        "content": "<p>Best I can do is</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"bp\">#</span><span class=\"n\">check</span>\n<span class=\"w\">  </span><span class=\"n\">beta</span><span class=\"bp\">%</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">Â·</span><span class=\"w\"> </span><span class=\"bp\">â†’</span><span class=\"w\"> </span><span class=\"bp\">Â·</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"n\">Nat</span>\n<span class=\"w\">    </span><span class=\"n\">Int</span>\n</code></pre></div>",
        "id": 571770538,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1770155264
    }
]