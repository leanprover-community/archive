[
    {
        "content": "<p>In sec.9.4.1 of \"Mathematics in Lean\" there are the examples shown below.  I noticed I can replace any \"↦\" by \"=&gt;\" and the example will continue to work.  Are the two symbols \"↦\" and \"=&gt;\" interchangeable?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">!!</span><span class=\"o\">[</span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">ext</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"n\">j</span>\n<span class=\"w\">  </span><span class=\"n\">fin_cases</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">&lt;;&gt;</span><span class=\"w\"> </span><span class=\"n\">fin_cases</span><span class=\"w\"> </span><span class=\"n\">j</span><span class=\"w\"> </span><span class=\"bp\">&lt;;&gt;</span><span class=\"w\"> </span><span class=\"n\">rfl</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">!!</span><span class=\"o\">[</span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">ext</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"n\">j</span>\n<span class=\"w\">  </span><span class=\"n\">fin_cases</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">&lt;;&gt;</span><span class=\"w\"> </span><span class=\"n\">fin_cases</span><span class=\"w\"> </span><span class=\"n\">j</span><span class=\"w\"> </span><span class=\"bp\">&lt;;&gt;</span><span class=\"w\"> </span><span class=\"n\">rfl</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">Matrix</span><span class=\"bp\">.</span><span class=\"n\">vandermonde</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Matrix</span><span class=\"bp\">.</span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"n\">j</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">j</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">rfl</span>\n</code></pre></div>",
        "id": 484576742,
        "sender_full_name": "Ching-Tsun Chou",
        "timestamp": 1732647264
    },
    {
        "content": "<p>Yes, they're interchangable for <code>fun</code>.</p>",
        "id": 484576881,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1732647332
    },
    {
        "content": "<p>they aren't when matching patterns, however.</p>",
        "id": 484576998,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1732647366
    },
    {
        "content": "<p>If you set <code>set_option pp.unicode.fun true</code>, then Lean will pretty print the arrow too.</p>",
        "id": 484577025,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1732647376
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"684366\">Edward van de Meent</span> <a href=\"#narrow/channel/270676-lean4/topic/Are.20.22.E2.86.A6.22.20and.20.22.3D.3E.22.20interchangeable.3F/near/484576998\">said</a>:</p>\n<blockquote>\n<p>they aren't when matching patterns, however.</p>\n</blockquote>\n<p>In particular, it will be a parse error for <code>match</code>'s <code>=&gt;</code></p>",
        "id": 484577071,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1732647397
    },
    {
        "content": "<p>But you don't mean they're not interchangeable in <code>fun ⟨x, y⟩ ↦ x + y</code>, right <span class=\"user-mention\" data-user-id=\"684366\">@Edward van de Meent</span>?</p>",
        "id": 484577139,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1732647429
    },
    {
        "content": "<p>indeed, i was referring to the following kinds of pattern matching:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">double</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">:</span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">match</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"k\">with</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"mi\">0</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">double</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">double'</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"bp\">-&gt;</span><span class=\"w\"> </span><span class=\"n\">Nat</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"mi\">0</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">double'</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">or_self</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Or</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">-&gt;</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">h</span>\n<span class=\"w\">  </span><span class=\"n\">cases</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"k\">with</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">inl</span><span class=\"w\"> </span><span class=\"n\">hp</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">hp</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">inr</span><span class=\"w\"> </span><span class=\"n\">hp</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">hp</span>\n</code></pre></div>",
        "id": 484579220,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1732648307
    },
    {
        "content": "<p>They are not really interchangeable in the sense that <code>=&gt;</code> is wrong and <code>↦</code> is right. But Lean understands both.</p>",
        "id": 484579440,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1732648377
    },
    {
        "content": "<p>it is wrong?</p>",
        "id": 484579548,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1732648405
    },
    {
        "content": "<p>from the mathlib style guide:</p>\n<blockquote>\n<h3><a href=\"https://leanprover-community.github.io/contribute/style.html#anonymous-functions\">Anonymous functions</a></h3>\n<p>Lean has several nice syntax options for declaring anonymous functions. For very simple functions, one can use the centered dot as the function argument, as in <code>(· ^ 2)</code> to represent the squaring function. However, sometimes it is necessary to refer to the arguments by name (e.g., if they appear in multiple places in the function body). The Lean default for this is <code>fun x =&gt; x * x</code>, but the <code>↦</code> arrow (inserted with <code>\\mapsto</code>) is also valid. In mathlib the pretty printer displays <code>↦</code>, and we slightly prefer this in the source as well. The lambda notation <code>λ x ↦ x * x</code>, while syntactically valid, is disallowed in mathlib in favor of the <code>fun</code> keyword.</p>\n</blockquote>",
        "id": 484580084,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1732648551
    },
    {
        "content": "<p>Yes, this is clearly ASCII art for the implication symbol. It could be the symbol for natural transformations, but it has nothing to do here. This is an unfortunate historical mistake coming from earlier programming languages.</p>",
        "id": 484580189,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1732648569
    },
    {
        "content": "<p>it only says \"slightly preferred\"</p>",
        "id": 484580346,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1732648610
    },
    {
        "content": "<p>Patrick is being intentionally provocative there</p>",
        "id": 484595831,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1732654978
    },
    {
        "content": "<p>ah<br>\nthat was not clear to me</p>",
        "id": 484595911,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1732655009
    },
    {
        "content": "<p>It just looks daft to mathematicians, in the same way that <code>&lt;=</code> looks daft for <code>\\le</code>. It reminds me of the 1980s. It's probably analogous to you looking at old FORTRAN CODE</p>",
        "id": 484616489,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1732665862
    },
    {
        "content": "<p>To point out the obvious caveat: <code>↦</code> only works in Mathlib. Core and Batteries only use <code>=&gt;</code>.</p>",
        "id": 484803574,
        "sender_full_name": "François G. Dorais",
        "timestamp": 1732743803
    },
    {
        "content": "<p>That's not the case <span class=\"user-mention\" data-user-id=\"119741\">@François G. Dorais</span>, it's part of the core syntax. You can use <code>fun x ↦ x</code> without mathlib.</p>",
        "id": 484806772,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1732745456
    },
    {
        "content": "<p>Is there interest in mass-replacing (some/most) of mathlib's \"=&gt;\" by \"\\mapsto\"? There are about 40 000 occurrences right now; making automatic replacements is relatively easy and can go a long way. (Enforcing \"\\mapsto\" via a syntax linter would be easy.)</p>",
        "id": 484807182,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1732745688
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"306601\">Kyle Miller</span> <a href=\"#narrow/channel/270676-lean4/topic/Are.20.22.E2.86.A6.22.20and.20.22.3D.3E.22.20interchangeable.3F/near/484806772\">said</a>:</p>\n<blockquote>\n<p>That's not the case <span class=\"user-mention silent\" data-user-id=\"119741\">François G. Dorais</span>, it's part of the core syntax. You can use <code>fun x ↦ x</code> without mathlib.</p>\n</blockquote>\n<p>Interesting. Why is it prohibited in Batteries?</p>",
        "id": 484807766,
        "sender_full_name": "François G. Dorais",
        "timestamp": 1732745971
    },
    {
        "content": "<p>Core style is also to use <code>=&gt;</code>, but, still, it works. I would guess that Batteries style is to copy core style as much as possible?</p>",
        "id": 484808369,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1732746272
    },
    {
        "content": "<p>I think such a large scale replacement has a significant cost for very little benefit</p>",
        "id": 484810360,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1732747438
    },
    {
        "content": "<p>Also, <code>match</code> only allows <code>=&gt;</code>, right?  So any mass-replacement would have to take that into account.</p>",
        "id": 484811214,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1732747996
    },
    {
        "content": "<p>a decent heuristic might be checking if the <code>|</code> character appears somewhere before it on the same line</p>",
        "id": 484811327,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1732748056
    },
    {
        "content": "<p>if it does, it is decently likely not a <code>fun</code></p>",
        "id": 484811386,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1732748089
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"307953\">Ruben Van de Velde</span> <a href=\"#narrow/channel/270676-lean4/topic/Are.20.22.E2.86.A6.22.20and.20.22.3D.3E.22.20interchangeable.3F/near/484810360\">said</a>:</p>\n<blockquote>\n<p>I think such a large scale replacement has a significant cost for very little benefit</p>\n</blockquote>\n<p>Arguably a weaker version of the same could be said for having two ways to spell the same thing, and mathlib using a mixture of them</p>",
        "id": 484812770,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1732748972
    },
    {
        "content": "<p>a regex like <code>fun([^↦])*?(=&gt;)</code> should be able to find the right arrows to replace, i think</p>",
        "id": 484814005,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1732749835
    },
    {
        "content": "<p>Nope, that misfires on</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"mi\">0</span>\n</code></pre></div>",
        "id": 484814275,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1732750017
    },
    {
        "content": "<p>wait, that's valid notation?</p>",
        "id": 484814306,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1732750034
    },
    {
        "content": "<p>huh</p>",
        "id": 484814311,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1732750038
    },
    {
        "content": "<p>learn something every day, i guess.</p>",
        "id": 484814324,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1732750051
    },
    {
        "content": "<p>i guess adding a <code>\\|</code> in the set not to match would fix it?</p>",
        "id": 484814400,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1732750093
    },
    {
        "content": "<p>i.e. <code>fun([^↦\\|])*?(=&gt;)</code>?</p>",
        "id": 484814420,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1732750107
    },
    {
        "content": "<p>Nope, then you're in trouble with <code>fun (x : match true with | true =&gt; Nat | false =&gt; Nat) =&gt; x</code></p>",
        "id": 484814821,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1732750375
    },
    {
        "content": "<p>ok. that's not something you can prepare for with proper regular expressions, however. Still, it should account for the majority of uses, no?</p>",
        "id": 484814893,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1732750439
    },
    {
        "content": "<p>Personally I'd argue that switching to <code>↦</code> globally in mathlib is a bad idea, because then we have to explain why <code>fun | .op x =&gt; x</code> and <code>fun x ↦ x</code> use different arrows.</p>",
        "id": 484814982,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1732750494
    },
    {
        "content": "<p>i agree with that, my point was more that should we want to switch, there is a decent heuristic for finding \"wrong arrows\" that only in some unfortunate cases doesn't work.</p>",
        "id": 484815121,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1732750567
    },
    {
        "content": "<p>This feels a lot like trying to settle on whether to use <code>-- hyphen comments</code> or <code>/- bracketed comments -/</code>. There's not much of a difference (and with <code>↦</code> vs <code>=&gt;</code> there's <em>no</em> difference other than saving a character for the 100 character limit), and it changes 40k lines for what benefit?</p>",
        "id": 484815129,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1732750573
    },
    {
        "content": "<p>I tend to like (my understanding of) Wikipedia-style rules — don't do a blanket change of \"colour\" to \"color\" (or vice versa), but if you happen to be passing by making substantial edits, then you can change the style locally.</p>",
        "id": 484815305,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1732750688
    },
    {
        "content": "<p>(assuming there exists a preference)</p>",
        "id": 484815329,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1732750711
    },
    {
        "content": "<p>Was it a deliberate choice to not permit <code>↦</code> notation in match arms?</p>",
        "id": 484815338,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1732750718
    },
    {
        "content": "<p>My recollection of the history was that <code>↦</code> was added by popular request either late 2022 or early 2023, and there was probably some worry about it being a slippery slope. If you add it to <code>match</code> arms, then that would mean tactics too, right? given that there's a <code>match</code> tactic?</p>",
        "id": 484815620,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1732750939
    },
    {
        "content": "<p><code>match</code> feels sort of ok, but I guess <code>induction</code> would be weird</p>",
        "id": 484815696,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1732751000
    },
    {
        "content": "<p>The status quo seems like the worst of both worlds, where mathlib gets to be inconsistently inconsistent with core!</p>",
        "id": 484815720,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1732751037
    },
    {
        "content": "<p>At least core supports <code>↦</code>, even if it's not the style.</p>",
        "id": 484815786,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1732751070
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/channel/270676-lean4/topic/Are.20.22.E2.86.A6.22.20and.20.22.3D.3E.22.20interchangeable.3F/near/484815720\">said</a>:</p>\n<blockquote>\n<p>The status quo seems like the worst of both worlds, where mathlib gets to be inconsistently inconsistent with core!</p>\n</blockquote>\n<p>i'm sorry, complaining that an inconsistent thing is inconsistent with something else seems pointless. that's like saying <code>False</code> as axiom is bad because it contradicts <code>False -&gt; False</code>.</p>",
        "id": 484815922,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1732751167
    },
    {
        "content": "<p>(A really annoying incompatibility is <code>Type*</code>. I hope core adopts this syntax at some point!)</p>",
        "id": 484815938,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1732751177
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"684366\">Edward van de Meent</span> <a href=\"#narrow/channel/270676-lean4/topic/Are.20.22.E2.86.A6.22.20and.20.22.3D.3E.22.20interchangeable.3F/near/484815922\">said</a>:</p>\n<blockquote>\n<p>i'm sorry, complaining that an inconsistent thing is inconsistent with something else seems pointless.</p>\n</blockquote>\n<p>The claim was that even if we did the 40k lines of replacement discussed early, mathlib would <em>still</em> have to explain to mathematicians why there are (only sometimes) \"weird\" <code>=&gt;</code> arrows in functions.</p>",
        "id": 484816033,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1732751274
    },
    {
        "content": "<p>the claim claimed to be about status quo, not the hypothetical case where we get rid of <code>fun a =&gt;</code></p>",
        "id": 484816105,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1732751318
    },
    {
        "content": "<p>Ah, I meant the status quo of core's support for the arrows</p>",
        "id": 484816837,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1732751921
    },
    {
        "content": "<p>I very strongly think we should get rid of as many <code>=&gt;</code> as possible in Mathlib. But we need Mario’s refactoring tool to do this. Regex won’t do it.</p>",
        "id": 484932550,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1732803875
    },
    {
        "content": "<p>If this change is wanted, then writing the linter to flag such uses is really the main missing piece.  Automatically applying the substitutions can be done via Mario's <code>refactor</code> or otherwise, as long as the linter says where to apply the changes.</p>",
        "id": 484934070,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1732804308
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110031\">Patrick Massot</span> <a href=\"#narrow/channel/270676-lean4/topic/Are.20.22.E2.86.A6.22.20and.20.22.3D.3E.22.20interchangeable.3F/near/484932550\">said</a>:</p>\n<blockquote>\n<p>I very strongly think we should get rid of as many <code>=&gt;</code> as possible in Mathlib. But we need Mario’s refactoring tool to do this. Regex won’t do it.</p>\n</blockquote>\n<p>So if I propose on PR (or several) getting rid of (say) 10 000 of them, you'd approve it? Sounds like a deal.</p>",
        "id": 484954906,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1732811206
    },
    {
        "content": "<p>Yes, if you ping me here.</p>",
        "id": 484964950,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1732815399
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110031\">@Patrick Massot</span> <a href=\"https://github.com/leanprover-community/mathlib4/pull/19576\">#19576</a> fixes about 20 000 occurrences</p>",
        "id": 484970654,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1732818487
    },
    {
        "content": "<p>I won't actually hold anyone up doing this, but for the record I (still) think ↦ is a bad idea, and the small increase in familiarity to mathematicians doesn't outweigh the confusion of having two ways to say the same thing.</p>",
        "id": 485005994,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1732844079
    },
    {
        "content": "<p>Perhaps we should encourage newcomers to install and use monospace fonts with programming ligatures.</p>",
        "id": 485007343,
        "sender_full_name": "Bulhwi Cha",
        "timestamp": 1732845179
    },
    {
        "content": "<p>I think programming ligatures are a bad idea when you have all of unicode to reach for, unless Lean picks a custom font with a custom set of ligatures and strongly recommends everyone uses it</p>",
        "id": 485007510,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1732845345
    },
    {
        "content": "<p>They work well in languages where the source promises to be mostly ascii</p>",
        "id": 485007572,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1732845374
    },
    {
        "content": "<p>Personally, I don't mind seeing both Unicode characters and programming ligatures; it's not hard to distinguish between them. I use Victor Mono, by the way.</p>\n<p><a href=\"/user_uploads/3121/P_ntJttLn3F-H1o9PeqKnYGy/20241129_11h59m56s_programming-ligatures.png\">20241129_11h59m56s_programming-ligatures.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/P_ntJttLn3F-H1o9PeqKnYGy/20241129_11h59m56s_programming-ligatures.png\" title=\"20241129_11h59m56s_programming-ligatures.png\"><img data-original-dimensions=\"257x353\" src=\"/user_uploads/thumbnail/3121/P_ntJttLn3F-H1o9PeqKnYGy/20241129_11h59m56s_programming-ligatures.png/840x560.webp\"></a></div>",
        "id": 485012156,
        "sender_full_name": "Bulhwi Cha",
        "timestamp": 1732848954
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"634338\">Michael Rothgang</span> <a href=\"#narrow/channel/270676-lean4/topic/Are.20.22.E2.86.A6.22.20and.20.22.3D.3E.22.20interchangeable.3F/near/484970654\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"110031\">Patrick Massot</span> <a href=\"https://github.com/leanprover-community/mathlib4/pull/19576\">#19576</a> fixes about 20 000 occurrences</p>\n</blockquote>\n<p>aww, testing fails <span aria-label=\"rolling on the floor laughing\" class=\"emoji emoji-1f923\" role=\"img\" title=\"rolling on the floor laughing\">:rolling_on_the_floor_laughing:</span></p>",
        "id": 485094574,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1732885290
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/channel/270676-lean4/topic/Are.20.22.E2.86.A6.22.20and.20.22.3D.3E.22.20interchangeable.3F/near/484814982\">said</a>:</p>\n<blockquote>\n<p>Personally I'd argue that switching to <code>↦</code> globally in mathlib is a bad idea, because then we have to explain why <code>fun | .op x =&gt; x</code> and <code>fun x ↦ x</code> use different arrows.</p>\n</blockquote>\n<p>Or even <code>fun | .op x =&gt; x</code> vs <code>fun (.op x) ↦ x</code>! I think the answer is that lean is just inconsistent here.</p>",
        "id": 485099135,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1732886901
    },
    {
        "content": "<p>Of course the dream solution would be to put mapsto everywhere, but putting it where it works is already a great improvement.</p>",
        "id": 485108769,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1732889970
    },
    {
        "content": "<p>I have in the past complained that lean is inconsistent about whether to use <code>:=</code> or <code>=&gt;</code>, and <code>\\mapsto</code> is yet another possibility which is used in not quite the same positions</p>",
        "id": 485110482,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1732890496
    },
    {
        "content": "<p>I can see the merits of both arguments but I think it’s a bad idea to move in either direction until there is some consensus. This is not mission critical.</p>",
        "id": 485114793,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1732891956
    },
    {
        "content": "<p>I mentioned it on the PR, but; the cost of merging a PR that touches 20k lines is that there are 20k opportunities for conflicts with other open PRs</p>",
        "id": 485117664,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1732892928
    },
    {
        "content": "<p>I just did an analysis of all open PRs which split or move files: there seem to be about 20 of them, of which perhaps 10 would conflict with that PR. If these operational aspects are an issue, I'd be happy to split the PR into smaller pieces or wait for file splitting PRs to go in first.</p>",
        "id": 485117959,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1732893021
    },
    {
        "content": "<p>One data point on the status quo: currently, there are about 54000 uses of \"=&gt;\" with fun (imperfect count: <code>rg --fixed-strings \"=&gt;\" | rg \"fun\" | wc -l</code>), compared to 22646 uses of \"\\mapsto\" (should-be-accurate count: <code>rg --fixed-strings \"↦\" | wc -l</code>). <code>rg</code> is a Rust rewrite of <code>grep</code>.</p>",
        "id": 485118604,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1732893254
    },
    {
        "content": "<p>(I also started writing a summary comment for the discussion so far: hopefully, I can finish this tonight.)</p>",
        "id": 485118624,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1732893261
    },
    {
        "content": "<p>both counts are distorted though by automated tools (mathport uses <code>=&gt;</code> and I think there has been at least one large scale conversion pass to <code>↦</code> in the past)</p>",
        "id": 485119176,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1732893454
    }
]