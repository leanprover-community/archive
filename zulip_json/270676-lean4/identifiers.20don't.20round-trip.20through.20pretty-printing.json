[
    {
        "content": "<p>Is there any way to guard against this?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">«</span><span class=\"k\">forall</span><span class=\"bp\">»</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span>\n\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"bp\">«</span><span class=\"k\">forall</span><span class=\"bp\">»</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"c1\">-- forall + 1 : Nat</span>\n\n<span class=\"c1\">-- paste what we got from the goal view</span>\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"k\">forall</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"c1\">-- syntax error</span>\n</code></pre></div>",
        "id": 449864507,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1720444175
    },
    {
        "content": "<p>This looks like a rare case where even <code>pp.all true</code> isn't enough to make things roundtrip</p>",
        "id": 449865585,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1720444491
    },
    {
        "content": "<p>The pretty-printer seems to do the right thing if the identifier contains a space, though.</p>",
        "id": 449866267,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1720444614
    },
    {
        "content": "<p>Yes, I think it knows about invalid identifiers, but not about ones that clash with syntax</p>",
        "id": 449866397,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1720444644
    },
    {
        "content": "<p>I guess a <code>pp.alwaysEscapeNames</code> would be an ugly fix here</p>",
        "id": 449866621,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1720444679
    },
    {
        "content": "<p>That is what happens with new projects in the lakefile, right?</p>",
        "id": 449867059,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1720444743
    },
    {
        "content": "<p>Oh that's a fun test, is <code>lake new forall</code> broken? (answer: no, it escapes any name you use)</p>",
        "id": 449867182,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1720444762
    },
    {
        "content": "<p>I do not know, but I know that I saw a lot of (unneeded) <code>«</code> when I created new projects.</p>",
        "id": 449867500,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1720444807
    },
    {
        "content": "<p>Yes, I think this is probably why</p>",
        "id": 449867855,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1720444853
    },
    {
        "content": "<p>Could you please create an issue? The syntax formatter just uses <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Lean.Name.toString#doc\">docs#Lean.Name.toString</a> to print identifiers, and it's not aware of the current list of keywords yet.</p>",
        "id": 449870028,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1720445351
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover/lean4/pull/4686\">lean4#4686</a></p>",
        "id": 449880063,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1720447519
    }
]