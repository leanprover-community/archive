[
    {
        "content": "<p>I'm doing some Lean 4 programming and I stumbled across this: <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Bool.bne_assoc#doc\">docs#Bool.bne_assoc</a> is a <code>simp</code> lemma</p>",
        "id": 468555379,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1725795694
    },
    {
        "content": "<p>I don't really think this makes sense? For starters, associativity isn't the kind of stuff you really consider to be simplified one way or the other. But more annoyingly, this lemma is backwards! The Mathlib (Lean?) convention is that <code>x * y * z</code> means <code>(x * y) * z</code>.</p>",
        "id": 468555760,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1725795810
    },
    {
        "content": "<p>(minor note, a bit later down that file it says \"coercision\" instead of \"coercion\")</p>",
        "id": 468555964,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1725795853
    },
    {
        "content": "<p>It's not backwards, it's in the same direction as <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=add_assoc#doc\">docs#add_assoc</a>, it just shouldn't be a simp lemma (btw, most operations being left-associative by default is a general programming thing, it's not specific to Lean)</p>",
        "id": 468556188,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1725795974
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover/lean3/blob/f8ed407d073e172eb9131e836b416f29628375fd/doc/changes.md?plain=1#L241-L243\">Reminds me of the old days...</a></p>",
        "id": 468557223,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1725796389
    },
    {
        "content": "<p>Speaking of <code>Beq</code> jank</p>",
        "id": 468558023,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1725796923
    },
    {
        "content": "<p><code>!x == y</code> parses as <code>!(x == y)</code>, for whatever reason</p>",
        "id": 468558042,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1725796939
    },
    {
        "content": "<p>Admittedly it's not a big deal since these are logically equivalent, but it's still annoying</p>",
        "id": 468558308,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1725797151
    },
    {
        "content": "<p>Trying out removing @[simp] from bne_assoc at <a href=\"https://github.com/leanprover/lean4/pull/5390\">lean#5390</a>.</p>",
        "id": 471371852,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1726705773
    },
    {
        "content": "<p>This is an ongoing issue about <code>xor</code> or <code>bne</code> for <code>Bool</code>. They do the same thing for <code>Bool</code> but they aren't actually synonymous. There are several old discussions about this on zulip and github. I can try to dig them up if needed.</p>\n<p>Anyway, the core problem is that <code>Bool.xor</code> is an <code>abbrev</code> and therefore reducible. Because of this we can't separate <code>Bool.xor_assoc</code>, which makes perfect sense, from <code>Bool.bne_assoc</code>, which is dubious at best.  The best solution is to make <code>xor</code> semireducible but that will require a reorganization of the <code>Bool</code> simp lemmas.</p>",
        "id": 471382013,
        "sender_full_name": "François G. Dorais",
        "timestamp": 1726712219
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110087\">Kim Morrison</span> <a href=\"#narrow/stream/270676-lean4/topic/bne_assoc/near/471371852\">said</a>:</p>\n<blockquote>\n<p>Trying out removing @[simp] from bne_assoc at <a href=\"https://github.com/leanprover/lean4/pull/5390\">lean#5390</a>.</p>\n</blockquote>\n<p>I guess this didn't succeed?</p>",
        "id": 471451713,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1726740444
    },
    {
        "content": "<p>Yeah, it was a mess, and should be fixed by changing <code>Bool.xor</code> to not be an <code>abbrev</code>. I'm not super excited about doing that right now.</p>",
        "id": 471580528,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1726790350
    }
]