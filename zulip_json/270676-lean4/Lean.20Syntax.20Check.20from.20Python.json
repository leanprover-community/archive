[
    {
        "content": "<p>I want to pass in lean codes, such as <br>\n\"\"\"<br>\nimport mathlib</p>\n<p>example ....<br>\n\"\"\"<br>\nfrom python to check whether the lean code is syntatically accurate. </p>\n<p>All my approaches either fail or takes minutes to check 1 single lean theorem.  Is there any existing projects that does similar things?</p>",
        "id": 562002139,
        "sender_full_name": "Austin Shen",
        "timestamp": 1764896248
    },
    {
        "content": "<p>Did you try calling lean from python?</p>",
        "id": 562002277,
        "sender_full_name": "metakuntyyy",
        "timestamp": 1764896365
    },
    {
        "content": "<p>Yes, this is what I used:<br>\nself.proc = subprocess.Popen(<br>\n    [\"lake\", \"env\", \"lean\", \"--server\"],<br>\n    cwd=project_root,<br>\n    stdin=subprocess.PIPE,<br>\n    stdout=subprocess.PIPE,<br>\n    stderr=subprocess.PIPE,<br>\n    text=True,<br>\n    bufsize=1,<br>\n)</p>",
        "id": 562002409,
        "sender_full_name": "Austin Shen",
        "timestamp": 1764896451
    },
    {
        "content": "<p>Try this one </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"n\">env</span><span class=\"w\"> </span><span class=\"n\">lean</span><span class=\"w\"> </span><span class=\"n\">exe</span><span class=\"w\"> </span><span class=\"n\">Filename</span><span class=\"bp\">.</span><span class=\"n\">lean</span>\n</code></pre></div>",
        "id": 562003006,
        "sender_full_name": "metakuntyyy",
        "timestamp": 1764896785
    },
    {
        "content": "<p>You can then check the exit code.</p>",
        "id": 562003171,
        "sender_full_name": "metakuntyyy",
        "timestamp": 1764896876
    },
    {
        "content": "<p>You can use <a href=\"https://github.com/augustepoiroux/LeanInteract\">https://github.com/augustepoiroux/LeanInteract</a> (which is a wrapper for <a href=\"https://github.com/leanprover-community/repl\">https://github.com/leanprover-community/repl</a>) to spend a minute importing Mathlib once, and then re-use the same lean process so you don't have to keep re-importing</p>",
        "id": 562013998,
        "sender_full_name": "Niels Voss",
        "timestamp": 1764904905
    },
    {
        "content": "<p>Thank you so much! It worked!</p>",
        "id": 567450234,
        "sender_full_name": "Austin Shen",
        "timestamp": 1768200373
    }
]