[
    {
        "content": "<p>Hi! I'm wondering what are the options for renaming assumptions in a large context. There's <code>rename</code> but it doesn't work if I want to rename multiple hidden assumptions <em>of the same type</em>. There's <code>rename_i</code> but when the context is large and the assumption I want to rename is far away, I have to put loads of <code>_</code> as placeholders. <code>case</code> is basically the same as <code>rename_i</code>. I could turn off the hygienic option but that would make the proof more brittle.</p>\n<p>I feel the following options would be nice if they exist:</p>\n<ul>\n<li><code>rename</code> but only for hidden assumptions</li>\n<li><code>rename</code> but allows renaming multiple assumptions of the specified type</li>\n<li><code>rename_i</code> but allows specifying an offset index, with the index shown in infoview next to each assumption</li>\n<li>Combination <code>rename</code> and <code>rename_i</code></li>\n<li>Perhaps support for some more general form of \"assumption selector\" that combines things like type patterns, indices, hidden or not etc</li>\n</ul>\n<p>I'm fairly new to Lean btw. I hope I'm not misunderstanding certain things. Any comments or suggestions are welcome.</p>",
        "id": 539936465,
        "sender_full_name": "Jason Yu",
        "timestamp": 1758090124
    },
    {
        "content": "<p>Is \"give them names before you get this far\" an acceptable answer?</p>",
        "id": 539937407,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1758090635
    },
    {
        "content": "<p>If you are suggesting always naming all assumptions, I find doing that a bit too cumbersome. Most of the time I only want to use selected few of them. But thanks for the suggestions!</p>",
        "id": 539938185,
        "sender_full_name": "Jason Yu",
        "timestamp": 1758091011
    },
    {
        "content": "<p>I think there is no stable way to refer to anonymous hypothesis, so relying on <code>rename</code> or <code>expose_names</code> is typically code smell, because it can easily break.</p>\n<p><span class=\"user-mention silent\" data-user-id=\"963310\">Jason Yu</span> <a href=\"#narrow/channel/270676-lean4/topic/Assumption.20renaming.20in.20large.20context.3F/near/539938185\">said</a>:</p>\n<blockquote>\n<p>If you are suggesting always naming all assumptions, I find doing that a bit too cumbersome. Most of the time I only want to use selected few of them. But thanks for the suggestions!</p>\n</blockquote>\n<p>Note that you can do</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"n\">hx</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"n\">hy</span>\n</code></pre></div>\n<p>to only name a subset of the variables.</p>",
        "id": 539943972,
        "sender_full_name": "Christian Merten",
        "timestamp": 1758093461
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"648495\">Christian Merten</span> <a href=\"#narrow/channel/270676-lean4/topic/Assumption.20renaming.20in.20large.20context.3F/near/539943972\">said</a>:</p>\n<blockquote>\n<p>I think there is no stable way to refer to anonymous hypothesis, so relying on <code>rename</code> or <code>expose_names</code> is typically code smell, because it can easily break.</p>\n</blockquote>\n<p>Isn't <code>case foo =&gt; rename_i a b c d</code> basically the same as <code>case foo a b c d =&gt; </code> though?</p>\n<p>I think it's just the autogenerated names that are unstable (thus turning off the hygienic option is not good). The order in which the assumptions are arranged should be stable. Otherwise how do we name them through <code>intros</code> or <code>case</code>? The types should be stable too as they are user specified.</p>\n<p><span class=\"user-mention silent\" data-user-id=\"648495\">Christian Merten</span> <a href=\"#narrow/channel/270676-lean4/topic/Assumption.20renaming.20in.20large.20context.3F/near/539943972\">said</a>:</p>\n<blockquote>\n<p>Note that you can do</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"n\">hx</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"n\">hy</span>\n</code></pre></div>\n<p>to only name a subset of the variables.</p>\n</blockquote>\n<p>When I have lots of assumptions (say 30+) I would need to put lots of <code>_</code> placeholders. Hence I'm looking for something like these:</p>\n<p><span class=\"user-mention silent\" data-user-id=\"963310\">Jason Yu</span> <a href=\"#narrow/channel/270676-lean4/topic/Assumption.20renaming.20in.20large.20context.3F/near/539936465\">said</a>:</p>\n<blockquote>\n<p>I feel the following options would be nice if they exist:</p>\n<ul>\n<li><code>rename</code> but only for hidden assumptions</li>\n<li><code>rename</code> but allows renaming multiple assumptions of the specified type</li>\n<li><code>rename_i</code> but allows specifying an offset index, with the index shown in infoview next to each assumption</li>\n<li>Combination <code>rename</code> and <code>rename_i</code></li>\n<li>Perhaps support for some more general form of \"assumption selector\" that combines things like type patterns, indices, hidden or not etc</li>\n</ul>\n</blockquote>",
        "id": 539946234,
        "sender_full_name": "Jason Yu",
        "timestamp": 1758094265
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"963310\">Jason Yu</span> <a href=\"#narrow/channel/270676-lean4/topic/Assumption.20renaming.20in.20large.20context.3F/near/539946234\">said</a>:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">When</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">lots</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">assumptions</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">say</span><span class=\"w\"> </span><span class=\"mi\">30</span><span class=\"bp\">+</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"n\">would</span><span class=\"w\"> </span><span class=\"n\">need</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">put</span><span class=\"w\"> </span><span class=\"n\">lots</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"ss\">`_</span><span class=\"bp\">`</span><span class=\"w\"> </span><span class=\"n\">placeholders</span><span class=\"bp\">.</span>\n</code></pre></div>\n<p>If you are really introducing 30+ hypothesis in a <code>intro</code> or <code>case</code>, you should consider bundling some of the assumptions in custom <code>structure</code>s.</p>",
        "id": 539947015,
        "sender_full_name": "Christian Merten",
        "timestamp": 1758094516
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"648495\">Christian Merten</span> <a href=\"#narrow/channel/270676-lean4/topic/Assumption.20renaming.20in.20large.20context.3F/near/539947015\">said</a>:</p>\n<blockquote>\n<p>If you are really introducing 30+ hypothesis in a <code>intro</code> or <code>case</code>, you should consider bundling some of the assumptions in custom <code>structure</code>s.</p>\n</blockquote>\n<p>I should try that indeed. Thanks!</p>",
        "id": 539947895,
        "sender_full_name": "Jason Yu",
        "timestamp": 1758094842
    }
]