[
    {
        "content": "<p>The following is legal, so allowing attaching docs to the standalone deriving clause seems legit</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"c1\">-- To allow printing Lean.NameSet and Std.HashMap for `transitivelyUsedConstants`</span>\n<span class=\"n\">deriving</span><span class=\"w\"> </span><span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"n\">Repr</span><span class=\"w\"> </span><span class=\"n\">for</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">NameSet</span>\n<span class=\"n\">deriving</span><span class=\"w\"> </span><span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"n\">Repr</span><span class=\"w\"> </span><span class=\"n\">for</span><span class=\"w\"> </span><span class=\"n\">Std</span><span class=\"bp\">.</span><span class=\"n\">HashMap</span>\n<span class=\"n\">deriving</span><span class=\"w\"> </span><span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"n\">Hashable</span><span class=\"w\"> </span><span class=\"n\">for</span><span class=\"w\"> </span><span class=\"n\">Substring</span>\n<span class=\"n\">deriving</span><span class=\"w\"> </span><span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"n\">Hashable</span><span class=\"w\"> </span><span class=\"n\">for</span><span class=\"w\"> </span><span class=\"n\">SourceInfo</span>\n<span class=\"n\">deriving</span><span class=\"w\"> </span><span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"n\">Hashable</span><span class=\"w\"> </span><span class=\"n\">for</span><span class=\"w\"> </span><span class=\"n\">Syntax</span><span class=\"bp\">.</span><span class=\"n\">Preresolved</span>\n<span class=\"n\">deriving</span><span class=\"w\"> </span><span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"n\">Hashable</span><span class=\"w\"> </span><span class=\"n\">for</span><span class=\"w\"> </span><span class=\"n\">Syntax</span>\n<span class=\"sd\">/-- Make `Syntax` hashable for `matchOnTree` to put in `HashSet` later-/</span>\n<span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Hashable</span><span class=\"w\"> </span><span class=\"n\">Syntax</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">hash</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">syn</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">Hashable</span><span class=\"bp\">.</span><span class=\"n\">hash</span><span class=\"w\"> </span><span class=\"n\">syn</span>\n</code></pre></div>\n<p>The final manual instance is only needed to get the docstring.</p>",
        "id": 490621727,
        "sender_full_name": "Alok Singh",
        "timestamp": 1735009104
    },
    {
        "content": "<p>You could use <code>add_decl_doc</code> in the meantime. Seems a reasonable RFC to allow docstrings on standalone <code>deriving</code>, I agree. Do you want to write it?</p>",
        "id": 497092528,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1738359367
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover/lean4/issues/6896#issue-2824788810\">https://github.com/leanprover/lean4/issues/6896#issue-2824788810</a></p>",
        "id": 497122582,
        "sender_full_name": "Alok Singh",
        "timestamp": 1738378725
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"337670\">@Alok Singh</span>, this RFC is inadequate: you don't even state what you want to change, just give an example. We can work it out from the example, but it's not really what we're hoping for from RFCs.</p>",
        "id": 497136340,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1738391409
    },
    {
        "content": "<p>Question: what happens if you do <code>deriving instance Repr for Type1, Type2</code> with a docstring?</p>",
        "id": 497136495,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1738391602
    }
]