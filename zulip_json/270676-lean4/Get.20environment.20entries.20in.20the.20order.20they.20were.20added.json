[
    {
        "content": "<p>Is there a mechanism to determine which of two definitions within the same (current) module was \"defined first\"? Presumably for the purpose of kernel checking there can be no back-references, and so the olean file ultimately serializes them in order?</p>",
        "id": 511461043,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1744303912
    },
    {
        "content": "<p>Is looking at the <code>DeclRangeExt</code> too hacky?</p>",
        "id": 511461596,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1744304094
    },
    {
        "content": "<p>What does that do for auto-generated declarations?</p>",
        "id": 511461721,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1744304140
    },
    {
        "content": "<p>Auto-generated declarations often have a reference to the syntax that defines them, but I am not sure whether always.</p>",
        "id": 511461875,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1744304180
    },
    {
        "content": "<p>E.g., if I remember correctly, <code>to_additive</code> is the range of the additive declaration.</p>",
        "id": 511461944,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1744304202
    },
    {
        "content": "<p>I'm thinking things like <code>_proof_1</code> etc</p>",
        "id": 511461997,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1744304219
    },
    {
        "content": "<p>Ah, those may have the same range of their \"parent\".</p>",
        "id": 511462046,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1744304234
    },
    {
        "content": "<p>Do you need to know the actual order, or would an order that is \"allowed\" be good enough?</p>",
        "id": 511462510,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1744304357
    },
    {
        "content": "<p>Any allowed order is fine</p>",
        "id": 511462534,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1744304365
    },
    {
        "content": "<p>I want to be certain that the earlier ones cannot depend on the later ones</p>",
        "id": 511462563,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1744304376
    },
    {
        "content": "<p>So you could inspect whether one constant appears in the other?</p>",
        "id": 511462574,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1744304378
    },
    {
        "content": "<p>I'd need to do that transitively, which sounds expensive</p>",
        "id": 511462610,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1744304391
    },
    {
        "content": "<p>Well, if you first use the range and then that, it may not be too much, maybe.</p>",
        "id": 511462727,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1744304414
    },
    {
        "content": "<p>This was a previous discussion <a href=\"#narrow/channel/270676-lean4/topic/last.20declaration.20added.20to.20.60Environment.60\">#lean4 &gt; last declaration added to &#96;Environment&#96;</a> and it links to an earlier discussion, although they do not seem to give much more detail.</p>",
        "id": 511464453,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1744304944
    },
    {
        "content": "<p>I've also wanted this recently (in my case, to determine the last declaration in a file -- this is surprisingly tricky). Maybe all these threads indicate enough interest that the FRO would take a PR that adds information about the declaration order to the <code>Environment</code>.</p>",
        "id": 512072561,
        "sender_full_name": "Jannis Limperg",
        "timestamp": 1744635357
    }
]