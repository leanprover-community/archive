[
    {
        "content": "<p>I just had a \"wow lean is clever\" moment when it typechecked my binary search algorithm without me having to specify anything</p>",
        "id": 546275167,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761062597
    },
    {
        "content": "<p>it automatically figured out to use (hi, hi - lo) as the proof of termination</p>",
        "id": 546275212,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761062610
    },
    {
        "content": "<p>it just has a list of common termination measures that it tries</p>",
        "id": 546284430,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761065308
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110064\">@Kenny Lau</span> could you show us a code example?</p>",
        "id": 546347754,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1761093387
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"626349\">@Asei Inoue</span> </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">binaryRecursion</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">lo</span><span class=\"w\"> </span><span class=\"n\">hi</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">hi</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">lo</span><span class=\"w\"> </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"mi\">0</span>\n<span class=\"w\">  </span><span class=\"k\">else</span><span class=\"w\"> </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">lo</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">hi</span><span class=\"w\"> </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n<span class=\"w\">  </span><span class=\"k\">else</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">mi</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">lo</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">hi</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"mi\">2</span>\n<span class=\"w\">    </span><span class=\"n\">binaryRecursion</span><span class=\"w\"> </span><span class=\"n\">lo</span><span class=\"w\"> </span><span class=\"n\">mi</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">binaryRecursion</span><span class=\"w\"> </span><span class=\"n\">mi</span><span class=\"w\"> </span><span class=\"n\">hi</span>\n</code></pre></div>",
        "id": 546403852,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761124370
    },
    {
        "content": "<p>Thank you</p>",
        "id": 546404556,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1761124572
    },
    {
        "content": "<p>Or avoid reinventing the wheel: Batteries.Data.Nat.Bisect</p>",
        "id": 546582078,
        "sender_full_name": "François G. Dorais",
        "timestamp": 1761188838
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"119741\">@François G. Dorais</span> thanks for the pointer,</p>\n<ol>\n<li>for some reason the <a href=\"https://leanprover-community.github.io/mathlib4_docs/Batteries/Data/Nat/Bisect.html\">docgen</a> doesn't work</li>\n<li>that's locating something using binary search, in particular it has to return the index, it cannot do a binary recursion like the one I've posted above</li>\n</ol>",
        "id": 546600984,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761201843
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110064\">Kenny Lau</span> <a href=\"#narrow/channel/270676-lean4/topic/lean.20is.20clever/near/546275212\">schrieb</a>:</p>\n<blockquote>\n<p>it automatically figured out to use (hi, hi - lo) as the proof of termination</p>\n</blockquote>\n<p>See <a href=\"https://lean-lang.org/doc/reference/latest/Definitions/Recursive-Definitions/#inferring-well-founded-recursion\">https://lean-lang.org/doc/reference/latest/Definitions/Recursive-Definitions/#inferring-well-founded-recursion</a> for more details on how Lean managed to be clever</p>",
        "id": 547002610,
        "sender_full_name": "Joachim Breitner",
        "timestamp": 1761341783
    },
    {
        "content": "<p>Thanks!</p>",
        "id": 547002706,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761341837
    }
]