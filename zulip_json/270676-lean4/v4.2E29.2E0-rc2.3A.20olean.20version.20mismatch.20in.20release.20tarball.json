[
    {
        "content": "<p>I noticed that all <code>.olean</code> files shipped in the <code>v4.29.0-rc2</code> release are stamped with version <code>4.30.0-rc2</code> in their headers, while the <code>lean</code> binary correctly reports <code>4.29.0-rc2</code>. Previous releases (<code>v4.29.0-rc1</code>, <code>v4.28.0</code>) don't have this mismatch.</p>\n<p><code>lake build</code> is unaffected (it uses <code>.olean.private</code> files internally), but downstream tooling that reads <code>.olean</code> headers to validate cache consistency will see version mismatches against the toolchain.</p>\n<p>I ran into this while updating <a href=\"https://github.com/NicolasRouquette/doc-verification-bridge\">doc-verification-bridge</a> to <code>v4.29.0-rc2</code> — its experiment pipeline validates <code>.olean</code> versions, and due to this bug, the system toolchain files appear contaminated.</p>\n<p>I filed the olean issue as <a href=\"https://github.com/leanprover/lean4/issues/12681\">https://github.com/leanprover/lean4/issues/12681</a></p>",
        "id": 575701174,
        "sender_full_name": "Nicolas Rouquette",
        "timestamp": 1772001963
    },
    {
        "content": "<p>Thanks. I will fix this soon. Do remember the announcement about v4.29.0 explicitly discourages downstream projects from adopting it yet. :-)</p>",
        "id": 575956704,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1772093557
    },
    {
        "content": "<p>Unfortunately the 4.30.0 version was already baked into the stage0: unusually this time I made <code>v4.29.0-rc2</code> from further along master than <code>v4.29.0-rc1</code>, rather than cherry-picking a few commits. An update-stage0 had landed in the meantime.</p>\n<p>This will require an rc3, which I need to make anyway soon.</p>",
        "id": 575961224,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1772094907
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover/lean4/pull/12700\">lean#12700</a> will prevent this happening again</p>",
        "id": 575962133,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1772095174
    }
]