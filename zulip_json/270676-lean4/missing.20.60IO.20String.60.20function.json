[
    {
        "content": "<p>Why is it that there is <code>IO.print</code>, a function of type <code>IO Unit</code> that prints a string to the terminal, but there is no function of type <code>IO String</code> that receives keyboard input characters?</p>",
        "id": 494184629,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1737044051
    },
    {
        "content": "<p>As far as I know, the only function in the standard library that accepts keyboard input is one that takes <code>FS.Stream</code> as an argument.</p>",
        "id": 494184843,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1737044105
    },
    {
        "content": "<p>Why are the following function of type <code>IO String</code> not provided in the standard library? Would it be a good idea to add them?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">IO</span><span class=\"bp\">.</span><span class=\"n\">getln</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IO</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">do</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">input</span><span class=\"w\"> </span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">IO</span><span class=\"bp\">.</span><span class=\"n\">getStdin</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">getLine</span>\n<span class=\"w\">  </span><span class=\"n\">return</span><span class=\"w\"> </span><span class=\"n\">input</span><span class=\"bp\">.</span><span class=\"n\">trim</span>\n</code></pre></div>",
        "id": 494185101,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1737044171
    },
    {
        "content": "<p>As for me, I would like to have such a function, because it is a hassle to prepare a Stream every time....</p>",
        "id": 494185298,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1737044226
    },
    {
        "content": "<p>I don't think it should be calling <code>trim</code></p>",
        "id": 494199872,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1737048704
    },
    {
        "content": "<p>Rust communities pretty frequently get \"why is this python code faster than this rust code\" type questions from users reaching for conveniently packaged fire and forget IO functions, but under the hood end up reacquiring locks/handles needlessly or allocating a bunch of stuff that doesn't need to be allocated when they're put under a heavy work load.</p>\n<p>I don't know how the codegen/compilation works for IO in Lean so this is totally speculative, but maybe something to think about.</p>",
        "id": 494201667,
        "sender_full_name": "Chris Bailey",
        "timestamp": 1737049330
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"310045\">@Eric Wieser</span> </p>\n<p>You're right. Indeed, I shouldn't call <code>trim</code>. How about this?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"sd\">/-- Accepts a string input from the keyboard, removing newline characters. -/</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">IO</span><span class=\"bp\">.</span><span class=\"n\">getInput</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IO</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">do</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">mut</span><span class=\"w\"> </span><span class=\"n\">input</span><span class=\"w\"> </span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">IO</span><span class=\"bp\">.</span><span class=\"n\">getStdin</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">getLine</span>\n<span class=\"w\">  </span><span class=\"n\">input</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">input</span><span class=\"bp\">.</span><span class=\"n\">replace</span><span class=\"w\"> </span><span class=\"s2\">\"</span><span class=\"se\">\\n</span><span class=\"s2\">\"</span><span class=\"w\"> </span><span class=\"s2\">\"\"</span><span class=\"w\"> </span><span class=\"bp\">|&gt;.</span><span class=\"n\">replace</span><span class=\"w\"> </span><span class=\"s2\">\"</span><span class=\"err\">\\</span><span class=\"s2\">r\"</span><span class=\"w\"> </span><span class=\"s2\">\"\"</span>\n<span class=\"w\">  </span><span class=\"n\">return</span><span class=\"w\"> </span><span class=\"n\">input</span>\n\n<span class=\"sd\">/-- Accepts a string input from the keyboard, including the trailing newline as-is. -/</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">IO</span><span class=\"bp\">.</span><span class=\"n\">getInputln</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IO</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">do</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">input</span><span class=\"w\"> </span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">IO</span><span class=\"bp\">.</span><span class=\"n\">getStdin</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">getLine</span>\n<span class=\"w\">  </span><span class=\"n\">return</span><span class=\"w\"> </span><span class=\"n\">input</span>\n\n<span class=\"c\">/-</span><span class=\"cm\">  example usage -/</span>\n\n<span class=\"sd\">/-- Reads a string from the keyboard and displays its length. -/</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">main</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IO</span><span class=\"w\"> </span><span class=\"n\">Unit</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">do</span>\n<span class=\"w\">  </span><span class=\"n\">IO</span><span class=\"bp\">.</span><span class=\"n\">print</span><span class=\"w\"> </span><span class=\"s2\">\"Enter a string: \"</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">input</span><span class=\"w\"> </span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">IO</span><span class=\"bp\">.</span><span class=\"n\">getInput</span>\n<span class=\"w\">  </span><span class=\"n\">IO</span><span class=\"bp\">.</span><span class=\"n\">println</span><span class=\"w\"> </span><span class=\"n\">s!</span><span class=\"s2\">\"The entered string is '{input}'.\"</span>\n<span class=\"w\">  </span><span class=\"n\">IO</span><span class=\"bp\">.</span><span class=\"n\">println</span><span class=\"w\"> </span><span class=\"n\">s!</span><span class=\"s2\">\"The string has {input.trim.length} characters.\"</span>\n</code></pre></div>",
        "id": 494357844,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1737119520
    },
    {
        "content": "<p>If nothing else I would at least avoid duplication there</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"sd\">/-- Accepts a string input from the keyboard, including the trailing newline as-is. -/</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">IO</span><span class=\"bp\">.</span><span class=\"n\">getInputln</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IO</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">return</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">IO</span><span class=\"bp\">.</span><span class=\"n\">getStdin</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">getLine</span>\n\n<span class=\"sd\">/-- Accepts a string input from the keyboard, removing newline characters. -/</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">IO</span><span class=\"bp\">.</span><span class=\"n\">getInput</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IO</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">return</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">IO</span><span class=\"bp\">.</span><span class=\"n\">getInputln</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">replace</span><span class=\"w\"> </span><span class=\"s2\">\"</span><span class=\"se\">\\n</span><span class=\"s2\">\"</span><span class=\"w\"> </span><span class=\"s2\">\"\"</span><span class=\"w\"> </span><span class=\"bp\">|&gt;.</span><span class=\"n\">replace</span><span class=\"w\"> </span><span class=\"s2\">\"</span><span class=\"err\">\\</span><span class=\"s2\">r\"</span><span class=\"w\"> </span><span class=\"s2\">\"\"</span>\n</code></pre></div>\n<p>but I think you need to be careful about the line-stripping logic; on Linux, I don't think stripping <code>\\r</code> is expected behavior</p>",
        "id": 494358890,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1737119847
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"310045\">@Eric Wieser</span> </p>\n<p>You are right. how about this?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"sd\">/-- Accepts a string input from the keyboard, removing newline characters. -/</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">IO</span><span class=\"bp\">.</span><span class=\"n\">getInput</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IO</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">do</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">input</span><span class=\"w\"> </span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">IO</span><span class=\"bp\">.</span><span class=\"n\">getStdin</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">getLine</span>\n<span class=\"w\">  </span><span class=\"n\">return</span><span class=\"w\"> </span><span class=\"n\">removeBr</span><span class=\"w\"> </span><span class=\"n\">input</span>\n<span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">removeBr</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">    </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">System</span><span class=\"bp\">.</span><span class=\"n\">Platform</span><span class=\"bp\">.</span><span class=\"n\">isWindows</span><span class=\"w\"> </span><span class=\"k\">then</span>\n<span class=\"w\">      </span><span class=\"o\">(</span><span class=\"n\">String</span><span class=\"bp\">.</span><span class=\"n\">replace</span><span class=\"w\"> </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"s2\">\"</span><span class=\"err\">\\</span><span class=\"s2\">r\"</span><span class=\"w\"> </span><span class=\"s2\">\"\"</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">∘</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">String</span><span class=\"bp\">.</span><span class=\"n\">replace</span><span class=\"w\"> </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"s2\">\"</span><span class=\"se\">\\n</span><span class=\"s2\">\"</span><span class=\"w\"> </span><span class=\"s2\">\"\"</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"k\">else</span>\n<span class=\"w\">      </span><span class=\"o\">(</span><span class=\"n\">String</span><span class=\"bp\">.</span><span class=\"n\">replace</span><span class=\"w\"> </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"s2\">\"</span><span class=\"se\">\\n</span><span class=\"s2\">\"</span><span class=\"w\"> </span><span class=\"s2\">\"\"</span><span class=\"o\">)</span>\n\n<span class=\"sd\">/-- Accepts a string input from the keyboard, including the trailing newline as-is. -/</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">IO</span><span class=\"bp\">.</span><span class=\"n\">getInputln</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IO</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">do</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">IO</span><span class=\"bp\">.</span><span class=\"n\">getStdin</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">getLine</span>\n</code></pre></div>",
        "id": 494362248,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1737120876
    },
    {
        "content": "<p>You should write those in the other order so that one can use the other</p>",
        "id": 494364085,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1737121496
    },
    {
        "content": "<p>I still think that trying to emulate python's \"universal newlines\" feature is a bad idea without a larger design for how it is expected to work</p>",
        "id": 494364340,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1737121563
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"310045\">@Eric Wieser</span> </p>\n<p>how about this?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"sd\">/-- Accepts a string input from the keyboard, including the trailing newline as-is. -/</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">IO</span><span class=\"bp\">.</span><span class=\"n\">getInputln</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IO</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">do</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">IO</span><span class=\"bp\">.</span><span class=\"n\">getStdin</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">getLine</span>\n\n<span class=\"sd\">/-- Accepts a string input from the keyboard, removing newline characters. -/</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">IO</span><span class=\"bp\">.</span><span class=\"n\">getInput</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IO</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">do</span>\n<span class=\"w\">  </span><span class=\"n\">return</span><span class=\"w\"> </span><span class=\"n\">removeBr</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">getInputln</span><span class=\"o\">)</span>\n<span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">removeBr</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">    </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">System</span><span class=\"bp\">.</span><span class=\"n\">Platform</span><span class=\"bp\">.</span><span class=\"n\">isWindows</span><span class=\"w\"> </span><span class=\"k\">then</span>\n<span class=\"w\">      </span><span class=\"o\">(</span><span class=\"n\">String</span><span class=\"bp\">.</span><span class=\"n\">replace</span><span class=\"w\"> </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"s2\">\"</span><span class=\"err\">\\</span><span class=\"s2\">r\"</span><span class=\"w\"> </span><span class=\"s2\">\"\"</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">∘</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">String</span><span class=\"bp\">.</span><span class=\"n\">replace</span><span class=\"w\"> </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"s2\">\"</span><span class=\"se\">\\n</span><span class=\"s2\">\"</span><span class=\"w\"> </span><span class=\"s2\">\"\"</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"k\">else</span>\n<span class=\"w\">      </span><span class=\"o\">(</span><span class=\"n\">String</span><span class=\"bp\">.</span><span class=\"n\">replace</span><span class=\"w\"> </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"s2\">\"</span><span class=\"se\">\\n</span><span class=\"s2\">\"</span><span class=\"w\"> </span><span class=\"s2\">\"\"</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 494364867,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1737121729
    },
    {
        "content": "<p>What exactly do you mean by \"larger design for how it is expected to work\"?</p>",
        "id": 494364998,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1737121775
    },
    {
        "content": "<p>I mean questions like:</p>\n<ul>\n<li>What if I want to read a text file with windows newlines? Should <code>getLine</code> do the right thing for me?</li>\n<li>What if I read the whole file / stdin at once; should I see <code>\\r\\n</code> or just <code>\\n</code>?|</li>\n<li>Should the user be able to opt in / out, in case they're reading a windows file on linux?</li>\n</ul>",
        "id": 494368382,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1737122751
    },
    {
        "content": "<p>The file was not supposed to be read. I assumed only keyboard input from the user.</p>",
        "id": 494371852,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1737123801
    },
    {
        "content": "<p>I can always write <code>cat some_file.txt | lake exe your_program</code> though</p>",
        "id": 494372042,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1737123860
    },
    {
        "content": "<p><del>Perhaps only the line breaks at the end should be removed.</del> hmm. I understand the problem, but I don't know how to solve it.</p>",
        "id": 494376816,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1737125350
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"310045\">@Eric Wieser</span> </p>\n<p>How about just adding this function only?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">IO</span><span class=\"bp\">.</span><span class=\"n\">getInputln</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IO</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">do</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">IO</span><span class=\"bp\">.</span><span class=\"n\">getStdin</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">getLine</span>\n</code></pre></div>",
        "id": 494403696,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1737133793
    },
    {
        "content": "<p>For what it's worth, Rust does not have such a function</p>",
        "id": 494405098,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1737134293
    },
    {
        "content": "<p>Interesting. Why is there no such function in Rust?</p>",
        "id": 494405340,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1737134382
    },
    {
        "content": "<p><code>String.replace</code> will scan the entire string but in this case it is known exactly where the final newline is.</p>",
        "id": 494458617,
        "sender_full_name": "François G. Dorais",
        "timestamp": 1737157536
    },
    {
        "content": "<p>FWIW, it's better to just let the user deal with newlines.</p>",
        "id": 494458705,
        "sender_full_name": "François G. Dorais",
        "timestamp": 1737157576
    },
    {
        "content": "<p>I think python's <code>TextIOWrapper</code> that wraps a stream object and tidies newlines is a nice way to design the feature</p>",
        "id": 494459946,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1737158427
    },
    {
        "content": "<p>I've used that idea in UnicodeBasic: <a href=\"https://github.com/fgdorais/lean4-unicode-basic/blob/main/UnicodeBasic/CharacterDatabase.lean\">https://github.com/fgdorais/lean4-unicode-basic/blob/main/UnicodeBasic/CharacterDatabase.lean</a></p>\n<p>The line parsing version is simpler since it doesn't have to delete comments and split into fields.</p>",
        "id": 494470011,
        "sender_full_name": "François G. Dorais",
        "timestamp": 1737165955
    },
    {
        "content": "<p>hmm... request for <code>IO.getInputln</code> is not accepted?</p>",
        "id": 494473079,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1737168676
    },
    {
        "content": "<p>How about implementing something more generic like this:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">ByLine</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">σ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Stream</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"n\">Char</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">...</span>\n\n<span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Stream</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"n\">Char</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Stream</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ByLine</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">...</span>\n</code></pre></div>",
        "id": 494479489,
        "sender_full_name": "François G. Dorais",
        "timestamp": 1737174384
    }
]