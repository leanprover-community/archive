[
    {
        "content": "<p>Is there a (simple) tactic that does a direct substitution of a let-bound symbol? I can use <code>simp only [x]</code> to achieve this, but it feels heavy-handed, for some proofs I'm much happier avoiding <code>simp</code> altogether, and it doesn't read well (for me at least). Basically looking for something more like <code>unfold</code>.</p>\n<p>I usually find myself wanting such a tool when proving an <code>exists</code>. Mindless example (where there's really no benefit but hopefully still demonstrates the idea):</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">exists</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">&gt;</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n<span class=\"w\">  </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">Exists</span><span class=\"bp\">.</span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">x</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"n\">only</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">x</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"c1\">-- simp only seems a bit much</span>\n<span class=\"w\">  </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">zero_lt_one</span>\n</code></pre></div>\n<p>It occurs to me that if I could construct a tactic that turns a let-binding into a propositional equality then I could use <code>rw</code> to go forward or backwards, but that's beyond me at present.</p>",
        "id": 482474004,
        "sender_full_name": "Freddie Nash",
        "timestamp": 1731614893
    },
    {
        "content": "<p>You could use <code>set x := 1 with hx</code> (possibly in mathlib)</p>",
        "id": 482474331,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1731615006
    },
    {
        "content": "<p>Have you tried <code>unfold x</code>?</p>",
        "id": 482474359,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1731615019
    },
    {
        "content": "<p>(The <code>unfold</code> tactic has been able to do it since Lean 4.13.0)</p>",
        "id": 482474586,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1731615120
    },
    {
        "content": "<p>... I could have sworn I'd tried <code>unfold</code> many times (was always my first instinct), but yes, that's the money</p>",
        "id": 482474808,
        "sender_full_name": "Freddie Nash",
        "timestamp": 1731615194
    },
    {
        "content": "<p>Any reason to use <code>apply Exists.intro</code> instead of <code>exists</code> or <code>use</code>?</p>",
        "id": 482474876,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1731615224
    },
    {
        "content": "<p>Just for the example: <code>exists</code> proves the whole thing before I could do the substitution</p>",
        "id": 482474973,
        "sender_full_name": "Freddie Nash",
        "timestamp": 1731615248
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"307953\">Ruben Van de Velde</span> <a href=\"#narrow/channel/270676-lean4/topic/Explicit.20substitution.20of.20let-bound.20symbol/near/482474331\">said</a>:</p>\n<blockquote>\n<p>You could use <code>set x := 1 with hx</code> (possibly in mathlib)</p>\n</blockquote>\n<p>That's brilliant: <code>unfold</code> is what I wanted but I'll certainly be able to put <code>set</code> to use in more complex scenarios</p>",
        "id": 482475083,
        "sender_full_name": "Freddie Nash",
        "timestamp": 1731615297
    },
    {
        "content": "<p>(Mystery solved: I'm still on 4.12.0 for almost everything; just this one project that's on a 4.14 release candidate)</p>",
        "id": 482476102,
        "sender_full_name": "Freddie Nash",
        "timestamp": 1731615638
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"715788\">Freddie Nash</span> has marked this topic as resolved.</p>",
        "id": 482476288,
        "sender_full_name": "Notification Bot",
        "timestamp": 1731615709
    },
    {
        "content": "<p>Thank you both!</p>",
        "id": 482476670,
        "sender_full_name": "Freddie Nash",
        "timestamp": 1731615842
    }
]