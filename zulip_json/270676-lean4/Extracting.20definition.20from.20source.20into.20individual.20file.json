[
    {
        "content": "<p>As I'm continuing the project at <a class=\"stream-topic\" data-stream-id=\"239415\" href=\"/#narrow/channel/239415-metaprogramming-.2F-tactics/topic/Manual.20derecursification.20of.20PreDefinition\">#metaprogramming / tactics &gt; Manual derecursification of PreDefinition</a>, I realize that something that would make this significantly easier would be a way to grab any given definition and determine all its module dependencies, then create a new file containing only that definition along with its module dependencies (importing private declarations with <code>Batteries.Tactic.OpenPrivate</code>). I think this might be useful e.g. to butcher an internal definition until it stops working, in order to determine where the critical components lie (particularly, the context-independent components, but maybe a variation of this idea might help us determine context-dependent components too). </p>\n<p>Anyone ever tinker with this? or the idea of extracting module dependencies from a definition in general?</p>",
        "id": 493132675,
        "sender_full_name": "nrs",
        "timestamp": 1736634710
    },
    {
        "content": "<p>seems like a starting point for this would be some sort of variation on using</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">#</span><span class=\"n\">eval</span><span class=\"w\"> </span><span class=\"k\">show</span><span class=\"w\"> </span><span class=\"n\">CoreM</span><span class=\"w\"> </span><span class=\"n\">Unit</span><span class=\"w\"> </span><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"k\">do</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">env</span><span class=\"w\"> </span><span class=\"bp\">&lt;-</span><span class=\"w\"> </span><span class=\"n\">getEnv</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">consts</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">env</span><span class=\"bp\">.</span><span class=\"n\">constants</span>\n</code></pre></div>\n<p>where given a constant in <code>consts.map\\2</code> we somehow attempt to get dependencies in the same file (from <code>consts.map\\2</code>) and the imported ones from <code>consts.map\\1</code></p>",
        "id": 493134278,
        "sender_full_name": "nrs",
        "timestamp": 1736636461
    },
    {
        "content": "<p>Have you looked at <code>#min_imports</code> and similar commands?</p>",
        "id": 493135586,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1736637746
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"307953\">@Ruben Van de Velde</span>  did not know of it, will be checking it out, thanks a lot!</p>\n<p>edit: relevant topic <a class=\"stream-topic\" data-stream-id=\"113488\" href=\"/#narrow/channel/113488-general/topic/Minimal.20lean.20file.20for.20a.20definition.20or.20theorem\">#general &gt; Minimal lean file for a definition or theorem</a></p>",
        "id": 493136024,
        "sender_full_name": "nrs",
        "timestamp": 1736638148
    }
]