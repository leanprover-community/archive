[
    {
        "content": "<p>I am building a binary cache for Lean, my questions are:</p>\n<h2>1. How do lake compute dependencies usability?</h2>\n<p>I tried the following steps to prepare some cache for a project (target project):</p>\n<ol>\n<li>clone all the repo that manifest refers to</li>\n<li>checkout the REV that manifest refers to</li>\n<li>elan override each deps project with the lean-toolchain of original project (target project)</li>\n<li>lake build for each deps</li>\n</ol>\n<p>The cache step is that, if (URL + REV + lean-toolchain) match, I hope cache would work if I put build artifacts to the <code>.lake/packages</code>.</p>\n<p>but when all deps are ready, moved to <code>.lake/packages</code> of target project, in target project exec <code>lake build</code>, after a long time it recompiles from the first module, all of previous artifacts are ignored.</p>\n<p>How do lake compute dependencies usability or what method should I use to setup and prepare a binary cache for Lean?</p>",
        "id": 503422985,
        "sender_full_name": "Alissa Tung",
        "timestamp": 1741150430
    }
]