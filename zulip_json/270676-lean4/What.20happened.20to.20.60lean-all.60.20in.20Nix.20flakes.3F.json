[
    {
        "content": "<p>I have a Lean project that is dependent on Lean's Nix flake and uses the <code>lean-all</code> output as a library dependency:</p>\n<div class=\"codehilite\" data-code-language=\"Nix\"><pre><span></span><code>      <span class=\"ss\">leanPkgs</span> <span class=\"o\">=</span> lean<span class=\"o\">.</span>packages<span class=\"o\">.</span><span class=\"si\">${</span>system<span class=\"si\">}</span><span class=\"p\">;</span>\n      <span class=\"ss\">projectEnv</span> <span class=\"o\">=</span> <span class=\"p\">{</span>\n        <span class=\"ss\">LEAN_ROOT</span> <span class=\"o\">=</span>leanPkgs<span class=\"o\">.</span>lean-all<span class=\"p\">;</span>\n      <span class=\"p\">}</span>\n</code></pre></div>\n<p>in Lean v4.12.0, this attribute doesn't exist anymore and got moved to <code>.deprecated</code>. If <code>lean-all</code> is deprecated, how can a downstream lean package link against the lean shared library? Should <code>sharedLib</code> be an output attribute then?</p>",
        "id": 475157223,
        "sender_full_name": "Leni Aniva",
        "timestamp": 1728257218
    },
    {
        "content": "<p>The whole nix setup is deprecated in core. I think what needs to happen is that someone steps up to maintain a nice nix setup, in its own repository.</p>",
        "id": 475157878,
        "sender_full_name": "Joachim Breitner",
        "timestamp": 1728257501
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"470149\">Joachim Breitner</span> <a href=\"#narrow/stream/270676-lean4/topic/What.20happened.20to.20.60lean-all.60.20in.20Nix.20flakes.3F/near/475157878\">said</a>:</p>\n<blockquote>\n<p>The whole nix setup is deprecated in core. I think what needs to happen is that someone steps up to maintain a nice nix setup, in its own repository.</p>\n</blockquote>\n<p>I can take over this part. Should I create a repo with all the Nix build paths? Or will there be a repo in <code>leanprover-community</code> for the Nix components?</p>",
        "id": 475158101,
        "sender_full_name": "Leni Aniva",
        "timestamp": 1728257678
    },
    {
        "content": "<p>usually you can ask one of the maintainers to transfer your personal github repo to <code>leanprover-community</code> if it is something that's relevant to the community, so you could get started in your own repo</p>",
        "id": 475232890,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1728287005
    },
    {
        "content": "<p>I wrote a flake for this and tested it on my own project. Seems like its working: <a href=\"https://github.com/lenianiva/lean4-nix\">https://github.com/lenianiva/lean4-nix</a></p>",
        "id": 476894611,
        "sender_full_name": "Leni Aniva",
        "timestamp": 1728965910
    }
]