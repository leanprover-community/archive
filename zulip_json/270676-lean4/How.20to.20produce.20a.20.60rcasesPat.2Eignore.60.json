[
    {
        "content": "<p>Hi, I'm trying to write a tactic and still a bit of shaky on the metaprogramming. I want to produce an <code>_</code> as an instance of <code>TSyntax `Lean.Parser.Tactic.rcasesPat.ignore</code>, but I can't figure out how to ... do that.</p>\n<p>Quoting <code> `(_)</code> doesn't work because it gives me a <code> `Lean.Parser.Term.hole (Lean.Syntax.atom info \"_\")</code></p>\n<p>I tried <code>(Lean.TSyntax.mk &lt;| Lean.mkAtom \"_\")</code> but that doesn't work, it turns into <code>Tactic.rcasesPatLo (Tactic.rcasesPatMed [\"_\"]) []</code> and that doesn't work but I can't exactly understand why.</p>",
        "id": 531400616,
        "sender_full_name": "Alex Meiburg",
        "timestamp": 1753716996
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"bp\">`</span><span class=\"o\">(</span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">Parser</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span><span class=\"bp\">.</span><span class=\"n\">rcasesPat</span><span class=\"bp\">.</span><span class=\"n\">ignore</span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 531401126,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1753717162
    },
    {
        "content": "<p>Okay, that taught me something. Hmm, but that is a <code>?m.130157 (Lean.TSyntax `Lean.Parser.Tactic.rcasesPat.ignore)</code>, and I don't understand why it isn't a <code>Lean.TSyntax `Lean.Parser.Tactic.rcasesPat.ignore</code> itself (or how to turn it into that).</p>\n<p>I'm trying to follow the metaprogramming book and it's not clarifying much for me unfortunately</p>",
        "id": 531403602,
        "sender_full_name": "Alex Meiburg",
        "timestamp": 1753717880
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"448405\">Alex Meiburg</span> <a href=\"#narrow/channel/270676-lean4/topic/How.20to.20produce.20a.20.60rcasesPat.2Eignore.60/near/531403602\">said</a>:</p>\n<blockquote>\n<p>Okay, that taught me something. Hmm, but that is a <code>?m.130157 (Lean.TSyntax `Lean.Parser.Tactic.rcasesPat.ignore)</code>, and I don't understand why it isn't a <code>Lean.TSyntax `Lean.Parser.Tactic.rcasesPat.ignore</code> itself (or how to turn it into that).</p>\n<p>I'm trying to follow the metaprogramming book and it's not clarifying much for me unfortunately</p>\n</blockquote>\n<p>That means it's in a monad (an arbitrary monad supporting enough hygiene) and you need to do <code>‚Üê `(Lean.Parser.Tactic.rcasesPat.ignore| _)</code> to get it out (or you can use <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Lean.Unhygienic.run#doc\">docs#Lean.Unhygienic.run</a>)</p>",
        "id": 531404534,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1753718126
    },
    {
        "content": "<p>Ah, nice, ok that works. (I actually ended up using <code>‚Üê `(rcasesPat| _)</code>.) Do you understand why that is in a monad, but other syntactic objects aren't? Like If I do <code> `this </code> I just a <code>Lean.Name</code> without issue.</p>\n<p>Also, how did you know that it was a monad - nothing in the type <code>?m.130157 (Lean.TSyntax `Lean.Parser.Tactic.rcasesPat.ignore)</code> suggested monad to me, the mvar is just any <code>Type ‚Üí Type</code>.</p>",
        "id": 531406506,
        "sender_full_name": "Alex Meiburg",
        "timestamp": 1753718645
    },
    {
        "content": "<p>it's because you need a <code>Bind ?m.130157</code> instance too</p>",
        "id": 531406860,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1753718743
    },
    {
        "content": "<p>so monad</p>",
        "id": 531406892,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1753718752
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"448405\">Alex Meiburg</span> <a href=\"#narrow/channel/270676-lean4/topic/How.20to.20produce.20a.20.60rcasesPat.2Eignore.60/near/531406506\">said</a>:</p>\n<blockquote>\n<p>Ah, nice, ok that works. (I actually ended up using <code>‚Üê `(rcasesPat| _)</code>.) Do you understand why that is in a monad, but other syntactic objects aren't? Like If I do <code> `this </code> I just a <code>Lean.Name</code> without issue.</p>\n</blockquote>\n<p><code> `this </code> isn't a syntax object, it's just a <code>Lean.Name</code>. All the syntax quotations come wrapped in a monad.</p>",
        "id": 531407028,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1753718806
    },
    {
        "content": "<p>More generally, is there documentation of how to use the <code> ` </code> command somewhere? I get that it's quotation, but <a href=\"https://leanprover-community.github.io/lean4-metaprogramming-book/main/06_macros.html#syntax-quotations\">this doc</a> doesn't really explain anything.</p>",
        "id": 531407083,
        "sender_full_name": "Alex Meiburg",
        "timestamp": 1753718822
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> <a href=\"#narrow/channel/270676-lean4/topic/How.20to.20produce.20a.20.60rcasesPat.2Eignore.60/near/531407028\">said</a>:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">``</span><span class=\"w\"> </span><span class=\"ss\">`this</span><span class=\"w\"> </span><span class=\"bp\">``</span><span class=\"w\"> </span><span class=\"n\">isn't</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"kn\">syntax</span><span class=\"w\"> </span><span class=\"n\">object</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">it's</span><span class=\"w\"> </span><span class=\"n\">just</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"ss\">`Lean.Name</span><span class=\"bp\">`.</span><span class=\"w\"> </span><span class=\"n\">All</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"kn\">syntax</span><span class=\"w\"> </span><span class=\"n\">quotations</span><span class=\"w\"> </span><span class=\"n\">come</span><span class=\"w\"> </span><span class=\"n\">wrapped</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">monad</span><span class=\"bp\">.</span>\n</code></pre></div>\n<p>Oh, wait what? That doc I just linked literally calls it a \"a <code>Syntax</code> quotation\"</p>",
        "id": 531407211,
        "sender_full_name": "Alex Meiburg",
        "timestamp": 1753718866
    },
    {
        "content": "<p><code> ` </code> isn't a single command, there are multiple macros which all use backticks</p>",
        "id": 531407216,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1753718869
    },
    {
        "content": "<p>Ahhhh that's even worse! Is there no good documentation on this? How did <em>you</em> learn it?</p>",
        "id": 531407355,
        "sender_full_name": "Alex Meiburg",
        "timestamp": 1753718912
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"448405\">Alex Meiburg</span> <a href=\"#narrow/channel/270676-lean4/topic/How.20to.20produce.20a.20.60rcasesPat.2Eignore.60/near/531407211\">said</a>:</p>\n<blockquote>\n<p>Oh, wait what? That doc I just linked literally calls it a \"a <code>Syntax</code> quotation\"</p>\n</blockquote>\n<p>That's <code> `(category| syntax) </code>, which is a distinct thing</p>",
        "id": 531407452,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1753718942
    },
    {
        "content": "<p>it produces a <code>TSyntax `category</code></p>",
        "id": 531407495,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1753718956
    },
    {
        "content": "<p>as opposed to a <code>Name</code></p>",
        "id": 531407529,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1753718969
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"448405\">Alex Meiburg</span> <a href=\"#narrow/channel/270676-lean4/topic/How.20to.20produce.20a.20.60rcasesPat.2Eignore.60/near/531407355\">said</a>:</p>\n<blockquote>\n<p>Ahhhh that's even worse! Is there no good documentation on this? How did <em>you</em> learn it?</p>\n</blockquote>\n<p>I wrote a tactic</p>",
        "id": 531407552,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1753718979
    },
    {
        "content": "<p>Sure, that's what I'm trying to do too. But, when you ran into issues, did you find documentation that helped? Just soliciting help on Zulip? Did you find that trawling existing examples in Mathlib was sufficient?</p>",
        "id": 531407857,
        "sender_full_name": "Alex Meiburg",
        "timestamp": 1753719083
    },
    {
        "content": "<p>After reading Metaprogramming in Lean, I decided to write a tactic, a dependent rewriting tactic which <span class=\"user-mention silent\" data-user-id=\"128280\">ùö†ùöòùöìùöåùöíùöéùöåùöë ùöóùöäùö†ùöõùöòùöåùöîùöí</span> picked up and put in <a href=\"https://github.com/leanprover-community/mathlib4/pull/26835\">#26835</a></p>",
        "id": 531408171,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1753719186
    },
    {
        "content": "<p>when I needed help I would click \"go to source\" on some of the metaprogramming definitions I use (like <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Lean.Meta.matchEq%3F#doc\">docs#Lean.Meta.matchEq?</a>) and read there</p>",
        "id": 531408300,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1753719233
    },
    {
        "content": "<p>I would also use loogle to find stuff</p>",
        "id": 531408322,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1753719240
    },
    {
        "content": "<p>I used <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Lean.Meta.kabstract#doc\">docs#Lean.Meta.kabstract</a> as a model and replaced its guts with the functionality I wanted</p>",
        "id": 531408722,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1753719376
    },
    {
        "content": "<p>Okay. I guess I can't tell if I'm a bit slow, or if the docs are weak on this. :/</p>\n<p>I'm certainly feeling slow.</p>\n<p>I see now that some of the quotation is explained here: <a href=\"https://lean-lang.org/doc/reference/latest/Notations-and-Macros/Macros/#quotation\">https://lean-lang.org/doc/reference/latest/Notations-and-Macros/Macros/#quotation</a></p>\n<p>That doesn't make any reference to the fact, though, that there are multiple different <code> ` </code> operations.</p>",
        "id": 531408809,
        "sender_full_name": "Alex Meiburg",
        "timestamp": 1753719398
    },
    {
        "content": "<p>I can't be the only person who thinks that <code> `(foo)</code> and <code> `foo </code> meaning different things is very surprising!</p>",
        "id": 531408905,
        "sender_full_name": "Alex Meiburg",
        "timestamp": 1753719427
    },
    {
        "content": "<p>I can't find anything about quoted names in the reference</p>",
        "id": 531409405,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1753719595
    },
    {
        "content": "<p>I guess I'll just copy the docstring</p>",
        "id": 531409772,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1753719709
    },
    {
        "content": "<blockquote>\n<p>Hierarchical names consist of a sequence of components, each of<br>\nwhich is either a string or numeric, that are written separated by dots (<code>.</code>).</p>\n<p>Hierarchical names are used to name declarations and for creating<br>\nunique identifiers for free variables and metavariables.</p>\n<p>You can create hierarchical names using a backtick:</p>\n<div class=\"codehilite\" data-code-language=\"Text only\"><pre><span></span><code>`Lean.Meta.whnf\n</code></pre></div>\n<p>It is short for <code>.str (.str (.str .anonymous \"Lean\") \"Meta\") \"whnf\"</code>.</p>\n<p>You can use double backticks to request Lean to statically check whether the name<br>\ncorresponds to a Lean declaration in scope.</p>\n<div class=\"codehilite\" data-code-language=\"Text only\"><pre><span></span><code>``Lean.Meta.whnf\n</code></pre></div>\n<p>If the name is not in scope, Lean will report an error.</p>\n<p>There are two ways to convert a <code>String</code> to a <code>Name</code>:</p>\n<ol>\n<li>\n<p><code>Name.mkSimple</code> creates a name with a single string component.</p>\n</li>\n<li>\n<p><code>String.toName</code> first splits the string into its dot-separated<br>\n    components, and then creates a hierarchical name.</p>\n</li>\n</ol>\n</blockquote>",
        "id": 531409917,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1753719753
    },
    {
        "content": "<p>And <a href=\"https://leanprover-community.github.io/lean4-metaprogramming-book/main/03_expressions.html#constants\">here</a>'s a spot in metaprogramming in lean that tells you what the backtick means</p>",
        "id": 531410544,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1753719961
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"448405\">Alex Meiburg</span> <a href=\"#narrow/channel/270676-lean4/topic/How.20to.20produce.20a.20.60rcasesPat.2Eignore.60/near/531406506\">said</a>:</p>\n<blockquote>\n<p>Do you understand why that is in a monad</p>\n</blockquote>\n<p>Syntax quotations are monadic for hygiene reasons; they capture the current \"macro scope\" and annotate all the identifiers with it. It's explained in <a href=\"https://arxiv.org/abs/2001.10490v7\">https://arxiv.org/abs/2001.10490v7</a></p>",
        "id": 531433274,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1753727519
    },
    {
        "content": "<p>Since we're talking about names, <br>\n<span class=\"user-mention silent\" data-user-id=\"448405\">Alex Meiburg</span> <a href=\"#narrow/channel/270676-lean4/topic/How.20to.20produce.20a.20.60rcasesPat.2Eignore.60/near/531406506\">said</a>:</p>\n<blockquote>\n<p>but other syntactic objects aren't?</p>\n</blockquote>\n<p>note that <code>Name</code> isn't a syntactic object. You need to use operations such as <code>mkIdent</code> to turn a <code>Name</code> into an <code>Ident</code>.</p>",
        "id": 531433673,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1753727667
    },
    {
        "content": "<p>Re backticks having two meanings: at least they're both quotations of some sort. There's also some consistency in that double backtick means \"quotation with checking\".</p>",
        "id": 531433848,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1753727739
    },
    {
        "content": "<p>Stepping back, is creating some syntax to feed rcases what you're sure you want to do?</p>\n<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Lean.Elab.Tactic.RCases.rcases#doc\">docs#Lean.Elab.Tactic.RCases.rcases</a> is the main interface to the \"meta-level\" tactic, and it takes a structured <code>RCasesPatt</code></p>",
        "id": 531434340,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1753727908
    },
    {
        "content": "<p>This is the tactic I ended up with, which I'm happy enough with for now. (I'm using it my quantumInfo repo, I don't know how high the bar would be to get it in mathlib, or if that's remotely desirable.)</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"sd\">/--</span>\n<span class=\"sd\">Proves goals equating small matrices by expanding out products and simpliying standard Real arithmetic.</span>\n<span class=\"sd\">-/</span>\n<span class=\"kn\">syntax</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">name</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">matrix_expand</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"s2\">\"matrix_expand\"</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"s2\">\" [\"</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"n\">simpStar</span><span class=\"w\"> </span><span class=\"bp\">&lt;|&gt;</span><span class=\"w\"> </span><span class=\"n\">simpErase</span><span class=\"w\"> </span><span class=\"bp\">&lt;|&gt;</span><span class=\"w\"> </span><span class=\"n\">simpLemma</span><span class=\"o\">),</span><span class=\"bp\">*</span><span class=\"o\">,</span><span class=\"bp\">?</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"s2\">\"]\"</span><span class=\"o\">)</span><span class=\"bp\">?</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"s2\">\" with \"</span><span class=\"w\"> </span><span class=\"n\">rcasesPat</span><span class=\"bp\">+</span><span class=\"o\">)</span><span class=\"bp\">?</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">tactic</span>\n\n<span class=\"kn\">macro_rules</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">`</span><span class=\"o\">(</span><span class=\"n\">tactic</span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">matrix_expand</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"o\">[[</span><span class=\"bp\">$</span><span class=\"n\">rules</span><span class=\"o\">,</span><span class=\"bp\">*</span><span class=\"o\">]]</span><span class=\"bp\">?</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"o\">[</span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"n\">withArg</span><span class=\"bp\">*</span><span class=\"o\">]</span><span class=\"bp\">?</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"k\">do</span>\n<span class=\"w\">    </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">id1</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">withArg</span><span class=\"bp\">.</span><span class=\"n\">getD</span><span class=\"w\"> </span><span class=\"bp\">‚ü®</span><span class=\"o\">[]</span><span class=\"bp\">‚ü©</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">getD</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">‚Üê</span><span class=\"w\"> </span><span class=\"bp\">`</span><span class=\"o\">(</span><span class=\"n\">rcasesPat</span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"o\">))</span>\n<span class=\"w\">    </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">id2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">withArg</span><span class=\"bp\">.</span><span class=\"n\">getD</span><span class=\"w\"> </span><span class=\"bp\">‚ü®</span><span class=\"o\">[]</span><span class=\"bp\">‚ü©</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">getD</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">‚Üê</span><span class=\"w\"> </span><span class=\"bp\">`</span><span class=\"o\">(</span><span class=\"n\">rcasesPat</span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"o\">))</span>\n<span class=\"w\">    </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">rules'</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">rules</span><span class=\"bp\">.</span><span class=\"n\">getD</span><span class=\"w\"> </span><span class=\"bp\">‚ü®#</span><span class=\"o\">[]</span><span class=\"bp\">‚ü©</span>\n<span class=\"w\">    </span><span class=\"bp\">`</span><span class=\"o\">(</span><span class=\"n\">tactic</span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"o\">(</span>\n<span class=\"w\">      </span><span class=\"n\">ext</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"n\">j</span>\n<span class=\"w\">      </span><span class=\"n\">repeat</span><span class=\"w\"> </span><span class=\"n\">rcases</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Prod</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"bp\">‚ü®</span><span class=\"n\">i</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"n\">id1</span><span class=\"bp\">‚ü©</span>\n<span class=\"w\">      </span><span class=\"n\">repeat</span><span class=\"w\"> </span><span class=\"n\">rcases</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">j</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Prod</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"bp\">‚ü®</span><span class=\"n\">j</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"n\">id2</span><span class=\"bp\">‚ü©</span>\n<span class=\"w\">      </span><span class=\"n\">fin_cases</span><span class=\"w\"> </span><span class=\"n\">i</span>\n<span class=\"w\">      </span><span class=\"bp\">&lt;;&gt;</span><span class=\"w\"> </span><span class=\"n\">fin_cases</span><span class=\"w\"> </span><span class=\"n\">j</span>\n<span class=\"w\">      </span><span class=\"bp\">&lt;;&gt;</span><span class=\"w\"> </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Matrix</span><span class=\"bp\">.</span><span class=\"n\">conjTranspose_fin_two</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Complex</span><span class=\"bp\">.</span><span class=\"n\">ext_iff</span><span class=\"o\">,</span>\n<span class=\"w\">        </span><span class=\"n\">Matrix</span><span class=\"bp\">.</span><span class=\"n\">mul_apply</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Fintype</span><span class=\"bp\">.</span><span class=\"n\">sum_prod_type</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Matrix</span><span class=\"bp\">.</span><span class=\"n\">one_apply</span><span class=\"o\">,</span>\n<span class=\"w\">        </span><span class=\"bp\">$</span><span class=\"n\">rules'</span><span class=\"o\">,</span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">]</span>\n<span class=\"w\">      </span><span class=\"bp\">&lt;;&gt;</span><span class=\"w\"> </span><span class=\"n\">try</span><span class=\"w\"> </span><span class=\"n\">field_simp</span>\n<span class=\"w\">      </span><span class=\"bp\">&lt;;&gt;</span><span class=\"w\"> </span><span class=\"n\">try</span><span class=\"w\"> </span><span class=\"n\">ring_nf</span><span class=\"o\">))</span>\n</code></pre></div>\n<p>I was synthesizing the rcases syntax because I wanted a default value for what to pass to an <code>rcases</code> in the macro.</p>",
        "id": 531437492,
        "sender_full_name": "Alex Meiburg",
        "timestamp": 1753729104
    },
    {
        "content": "<p>If I was writing this as something other than just expanding a macro into other tactics, I would use the actual rcases frontend, but for a script like this it seemed like the reasonable thing to do? I hope!</p>",
        "id": 531437628,
        "sender_full_name": "Alex Meiburg",
        "timestamp": 1753729151
    },
    {
        "content": "<p>If it's easy enough to make correct syntax, then it seems fine to me!</p>",
        "id": 531437750,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1753729191
    }
]