[
    {
        "content": "<p>Hi,<br>\ni am currently trying to prove a result in Lean4 without using Mathlib. However as i am not very versed in Lean i am kinda stuck. Maybe you guys can give me some advice ?</p>\n<p>The Problem i am trying to solve is: <br>\nGiven a List <code>l</code>, a proper Sublist <code>sub</code> of that List <code>l</code> contains an element <code>e</code> that is not in <code>l</code>. <br>\nI wrote this as the following theorem,</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">list_prop_sub_ex_element_outside</span>\n<span class=\"o\">(</span><span class=\"n\">l</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">subset_l</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">sub</span><span class=\"w\"> </span><span class=\"bp\">⊆</span><span class=\"w\"> </span><span class=\"n\">l</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">neq_l</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">sub</span><span class=\"bp\">.</span><span class=\"n\">toSet</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"n\">l</span><span class=\"bp\">.</span><span class=\"n\">toSet</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">length_l</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">l</span><span class=\"bp\">.</span><span class=\"n\">length</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">length</span><span class=\"o\">)</span><span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">l_nodup</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">l</span><span class=\"bp\">.</span><span class=\"n\">Nodup</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\"> </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">e</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">e</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">l</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">e</span><span class=\"w\"> </span><span class=\"bp\">∉</span><span class=\"w\"> </span><span class=\"n\">sub</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>I tried a proof by induction over the length of l, the base case i managed to solve as it yields a contradiction. However the induction step is unclear to me. <br>\nDoes anyone has some tips on how to solve this ?</p>\n<p>Thanks in advance :)</p>",
        "id": 526794870,
        "sender_full_name": "HenrikT",
        "timestamp": 1751460912
    },
    {
        "content": "<p>what is <code>length</code>?</p>",
        "id": 526795274,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1751461009
    },
    {
        "content": "<p>Its <code>Nat</code><br>\nfrom <code>l.length</code></p>",
        "id": 526795439,
        "sender_full_name": "HenrikT",
        "timestamp": 1751461049
    },
    {
        "content": "<p>what's your proof on pen-and-paper?</p>",
        "id": 526795598,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1751461090
    },
    {
        "content": "<p>The problem becomes trivial depending on what your definition of <code>List.toSet</code> is</p>",
        "id": 526795988,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1751461198
    },
    {
        "content": "<p>I don't have a pen-and-paper proof. I only tried doing it in LEAN4</p>",
        "id": 526796030,
        "sender_full_name": "HenrikT",
        "timestamp": 1751461208
    },
    {
        "content": "<p>How so ?</p>",
        "id": 526796185,
        "sender_full_name": "HenrikT",
        "timestamp": 1751461256
    },
    {
        "content": "<p>Is this your definition?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">toSet</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">l</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">l</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">list_prop_sub_ex_element_outside</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">l</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">subset_l</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">sub</span><span class=\"w\"> </span><span class=\"bp\">⊆</span><span class=\"w\"> </span><span class=\"n\">l</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">neq_l</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"n\">sub</span><span class=\"bp\">.</span><span class=\"n\">toSet</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">l</span><span class=\"bp\">.</span><span class=\"n\">toSet</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">e</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">e</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">l</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">e</span><span class=\"w\"> </span><span class=\"bp\">∉</span><span class=\"w\"> </span><span class=\"n\">sub</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">false_or_by_contra</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">rename_i</span><span class=\"w\"> </span><span class=\"n\">h</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"n\">only</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">not_exists</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">not_and</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Classical</span><span class=\"bp\">.</span><span class=\"n\">not_not</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">h</span>\n<span class=\"w\">  </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">neq_l</span>\n<span class=\"w\">  </span><span class=\"n\">ext</span><span class=\"w\"> </span><span class=\"n\">a</span>\n<span class=\"w\">  </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">h'</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">subset_l</span><span class=\"w\"> </span><span class=\"n\">h'</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"bp\">⟩</span>\n</code></pre></div>",
        "id": 526796390,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1751461313
    },
    {
        "content": "<p>my definition of <code>List.toSet</code> is </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"w\">  </span><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">toSet</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">-&gt;</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">α</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">nil</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"bp\">∅</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">cons</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"n\">tail</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">e</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">e</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">∪</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">toSet</span><span class=\"w\"> </span><span class=\"n\">tail</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 526796637,
        "sender_full_name": "HenrikT",
        "timestamp": 1751461381
    },
    {
        "content": "<p>What is <code>Set</code>? I thought you worked without mathlib..?</p>",
        "id": 526796759,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1751461415
    },
    {
        "content": "<p>Its from <code>BasicLeanDataStructures/List/Basic.lean</code></p>",
        "id": 526796812,
        "sender_full_name": "HenrikT",
        "timestamp": 1751461425
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"621592\">@HenrikT</span> maybe you should post a <a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a> so that people can actually understand what the question is</p>",
        "id": 526796989,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1751461478
    },
    {
        "content": "<p>Can you provide a link?</p>",
        "id": 526797042,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1751461490
    },
    {
        "content": "<p>Right now we're just playing guessing games with your definitions</p>",
        "id": 526797047,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1751461491
    },
    {
        "content": "<p><code>Set</code> is imported from <code>BasicLeanDataStructes/Set/Basic.lean</code></p>",
        "id": 526797065,
        "sender_full_name": "HenrikT",
        "timestamp": 1751461498
    },
    {
        "content": "<p>From where?</p>",
        "id": 526797109,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1751461505
    },
    {
        "content": "<p>It's neither lean core, batteries or mathlib, is it custom repository?</p>",
        "id": 526797161,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1751461520
    },
    {
        "content": "<p>Henrik can you click on the <a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a> link so you can see what I'm suggesting you do in order to ask your question in a way that people can understand?</p>",
        "id": 526797231,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1751461540
    },
    {
        "content": "<p>give me a second, i'll look up where it is from</p>",
        "id": 526797408,
        "sender_full_name": "HenrikT",
        "timestamp": 1751461592
    },
    {
        "content": "<p>Is it this? <a href=\"https://github.com/monsterkrampe/Basic-Lean-Datastructures\">https://github.com/monsterkrampe/Basic-Lean-Datastructures</a></p>",
        "id": 526797503,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1751461613
    },
    {
        "content": "<p>Yes</p>",
        "id": 526797624,
        "sender_full_name": "HenrikT",
        "timestamp": 1751461647
    },
    {
        "content": "<p>I don't like these definitions but</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">list_prop_sub_ex_element_outside</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">l</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">subset_l</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">sub</span><span class=\"w\"> </span><span class=\"bp\">⊆</span><span class=\"w\"> </span><span class=\"n\">l</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">neq_l</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"n\">sub</span><span class=\"bp\">.</span><span class=\"n\">toSet</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">l</span><span class=\"bp\">.</span><span class=\"n\">toSet</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">e</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">e</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">l</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">e</span><span class=\"w\"> </span><span class=\"bp\">∉</span><span class=\"w\"> </span><span class=\"n\">sub</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">false_or_by_contra</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">rename_i</span><span class=\"w\"> </span><span class=\"n\">h</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"n\">only</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">not_exists</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">not_and</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Classical</span><span class=\"bp\">.</span><span class=\"n\">not_not</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">h</span>\n<span class=\"w\">  </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">neq_l</span>\n<span class=\"w\">  </span><span class=\"n\">funext</span><span class=\"w\"> </span><span class=\"n\">a</span>\n<span class=\"w\">  </span><span class=\"n\">ext</span>\n<span class=\"w\">  </span><span class=\"n\">change</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">sub</span><span class=\"bp\">.</span><span class=\"n\">toSet</span><span class=\"w\"> </span><span class=\"bp\">↔</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">l</span><span class=\"bp\">.</span><span class=\"n\">toSet</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"n\">only</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">mem_toSet</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">h'</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">subset_l</span><span class=\"w\"> </span><span class=\"n\">h'</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"bp\">⟩</span>\n</code></pre></div>",
        "id": 526798521,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1751461939
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"621592\">HenrikT</span> <a href=\"#narrow/channel/270676-lean4/topic/Proof.20of.20Distinct.20Elements/near/526796030\">said</a>:</p>\n<blockquote>\n<p>I don't have a pen-and-paper proof. I only tried doing it in LEAN4</p>\n</blockquote>\n<p>Lean is not magic, particularly when you yourself said that you're not \"very versed in Lean\", you really need a maths proof first</p>",
        "id": 526798682,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1751461995
    },
    {
        "content": "<p>Ok thank you very much, i'll try to understand it and ask back if i have any further questions. Also can you elaborate why you dont like the definition for sets. Is there a way it could be improved ?</p>",
        "id": 526798934,
        "sender_full_name": "HenrikT",
        "timestamp": 1751462072
    },
    {
        "content": "<p>I don't like that <code>List.toSet</code> is defined inductively when it could've just been <code>fun x =&gt; x ∈ l</code></p>",
        "id": 526799057,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1751462110
    },
    {
        "content": "<p>Also there's way too few API about <code>Set</code> in that library to make it any useful</p>",
        "id": 526799134,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1751462134
    },
    {
        "content": "<p>Alright, maybe i'll suggest this change then.<br>\nThanks for your help guys :)</p>",
        "id": 526799517,
        "sender_full_name": "HenrikT",
        "timestamp": 1751462249
    }
]