[
    {
        "content": "<p>This is mostly something that surprised me: since it is Friday, let me share it!</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span>\n\n<span class=\"c1\">-- can you remove `(n : Nat)` in the statement of `by_rfl`?</span>\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">by_rfl</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">cases</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"k\">with</span>\n<span class=\"w\">    </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">zero</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">rfl</span>\n<span class=\"w\">    </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">succ</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">      </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">congrArg</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span>\n<span class=\"w\">      </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">by_rfl</span>\n</code></pre></div>",
        "id": 450957065,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1720786975
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span>\n\n<span class=\"c1\">--removed `(n : Nat)` in the statement of `by_rfl`?</span>\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">by_rfl</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">induction</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"k\">with</span>\n<span class=\"w\">    </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">zero</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">rfl</span>\n<span class=\"w\">    </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">succ</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">ih</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">      </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">congrArg</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span>\n<span class=\"w\">      </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">ih</span>\n</code></pre></div>",
        "id": 450961418,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1720787833
    },
    {
        "content": "<p>Assuming I understood your question/puzzle correctly.</p>",
        "id": 450961743,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1720787909
    },
    {
        "content": "<p>You did, I am not sure if you also were surprised by what Lean thinks about what you did!</p>",
        "id": 450961828,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1720787939
    },
    {
        "content": "<p>(Also, your answer is a bit of a spoiler.)</p>",
        "id": 450962344,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1720788047
    },
    {
        "content": "<p>No. I expected <code>n</code> to be taken as a parameter of <code>by_rfl</code>  if it is referenced, which it is.</p>",
        "id": 450962418,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1720788069
    },
    {
        "content": "<p>That is why I am unsure if I truly understood the puzzle (or specifically what surprised you)</p>",
        "id": 450962567,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1720788099
    },
    {
        "content": "<div class=\"spoiler-block\"><div class=\"spoiler-header\">\n<p>Spoiler</p>\n</div><div class=\"spoiler-content\" aria-hidden=\"true\">\n<p>What surprised me is that, even though <code>n</code> was available whether or not it was present in the statement, that the second form does not work.</p>\n</div></div>",
        "id": 450962931,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1720788178
    },
    {
        "content": "<div class=\"spoiler-block\"><div class=\"spoiler-header\">\n<p>Spoiler</p>\n</div><div class=\"spoiler-content\" aria-hidden=\"true\">\n<p>specifically you are surprised that <code>apply by_rfl</code> did not work when <code>n</code> was removed</p>\n</div></div>",
        "id": 450963073,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1720788216
    },
    {
        "content": "<div class=\"spoiler-block\"><div class=\"spoiler-header\">\n<p>Spoiler extended</p>\n</div><div class=\"spoiler-content\" aria-hidden=\"true\">\n<p>I think it is intuitively like using<code>generalize</code>. The statement with <code>n</code> also as a parameter became <code>\\forall x : Nat, x = x</code>, whereas the unparametrized statement was only for that specific variable declaration <code>n</code>. by_rfl was not generalised in the way the ih was.</p>\n</div></div>",
        "id": 450964354,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1720788522
    },
    {
        "content": "<p>But that's just a gut-feeling guess on a friday afternoon. I am no type theorist</p>",
        "id": 450965303,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1720788753
    },
    {
        "content": "<p>Yes, this is expected behavior. variables are always \"before the colon\", they cannot vary in recursive calls</p>",
        "id": 451080069,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1720820483
    }
]