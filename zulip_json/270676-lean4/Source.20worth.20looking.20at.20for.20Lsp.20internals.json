[
    {
        "content": "<p>I'd like to figure out the specifics about how the Lean server handles requests and notifications from the editor. In particular, I'd like to understand the details about where the source specifies how the server reads and writes to stdio or unix sockets, and the sequence of events that trigger a response either on cursor location change or on file modification. Any suggestions? Currently browsing around <code>src/Lean/Server</code> semi-randomly to get a high-level overview</p>",
        "id": 488002757,
        "sender_full_name": "nrs",
        "timestamp": 1733884866
    },
    {
        "content": "<p>Not sure about other editors, but in emacs you can turn on logging of lsp requests with <code>(setq lsp-log-io t)</code></p>",
        "id": 488003257,
        "sender_full_name": "David Renshaw",
        "timestamp": 1733885210
    },
    {
        "content": "<p>then you can watch the <code>*lsp-log*</code> buffer</p>",
        "id": 488003284,
        "sender_full_name": "David Renshaw",
        "timestamp": 1733885240
    },
    {
        "content": "<p>(though maybe that's higher-level than what you are looking for)</p>",
        "id": 488003356,
        "sender_full_name": "David Renshaw",
        "timestamp": 1733885302
    },
    {
        "content": "<p>Am on <code>nvim</code> but there's an analogue to that command, will make use of that, thanks for the suggestion!</p>",
        "id": 488003543,
        "sender_full_name": "nrs",
        "timestamp": 1733885450
    },
    {
        "content": "<p>in case someone else finds this useful: <code>src/Lean/Server/Readme.md</code> is a good intro to the server's structure</p>",
        "id": 488007301,
        "sender_full_name": "nrs",
        "timestamp": 1733887876
    },
    {
        "content": "<p>You could have a look at the <a href=\"https://github.com/leanprover/lean4/blob/b862e2d25163584322bcca54e5e56d671da1f258/src/Lean/Server/FileWorker/RequestHandling.lean#L505-L593\">code for semantic token handling</a>.</p>",
        "id": 488196739,
        "sender_full_name": "Max Nowak üêâ",
        "timestamp": 1733954424
    },
    {
        "content": "<p>I should maybe some day push for my semantic h<a href=\"https://github.com/leanprover/lean4/issues/2305\">i</a>ghlighting changes to get merged :P.</p>",
        "id": 488196825,
        "sender_full_name": "Max Nowak üêâ",
        "timestamp": 1733954463
    },
    {
        "content": "<p>Nice I had skipped this, thank you!<br>\nedit: also worth looking: the section in Sebastian Ullrich's thesis chapter 3 about the user interface, and the work by Joscha A. Mennicken cited there</p>",
        "id": 488800660,
        "sender_full_name": "nrs",
        "timestamp": 1734082487
    }
]