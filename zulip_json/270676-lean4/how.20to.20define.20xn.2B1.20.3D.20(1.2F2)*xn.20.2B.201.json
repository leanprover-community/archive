[
    {
        "content": "<p>Hello, I have </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">foo</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"k\">match</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"k\">with</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\">   </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">foo</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n<span class=\"bp\">#</span><span class=\"n\">eval</span><span class=\"w\"> </span><span class=\"n\">foo</span><span class=\"w\"> </span><span class=\"mi\">2</span>\n</code></pre></div>\n<p>but it gives me \"fail to show termination for<br>\n  foo<br>\nwith errors<br>\nfailed to compile definition, consider marking it as 'noncomputable' because it depends on 'Real.instLinearOrderedField', and it does not have executable code\"</p>\n<p>How can i evaluate terms of this sequence? I tried to give it the type annotation foo x : (\\N -&gt; \\R) but it didn't work. Thanks!</p>",
        "id": 481587852,
        "sender_full_name": "max",
        "timestamp": 1731265252
    },
    {
        "content": "<p>What does it mean to evaluate a real number? A real number is an infinite amount of information. Why not switch to rational rumbers? They are all represented by a finite amount of information.</p>",
        "id": 481589252,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1731266359
    },
    {
        "content": "<p>Thanks, yeah I didn't really think about that. In this case the range of the sequence is Q. Sorry</p>",
        "id": 481589341,
        "sender_full_name": "max",
        "timestamp": 1731266412
    },
    {
        "content": "<p>Other programming languages use floating point numbers, which can be evaluated, but these are the genuine real numbers you're using here.</p>",
        "id": 481589380,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1731266458
    },
    {
        "content": "<p>Try:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">foo</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">):</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"k\">match</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"k\">with</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">zero</span><span class=\"w\">   </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">succ</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"mf\">0.5</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">foo</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n</code></pre></div>",
        "id": 481589605,
        "sender_full_name": "Johannes Tantow",
        "timestamp": 1731266633
    },
    {
        "content": "<p>ha ha ha :-) Then you get to see the Cauchy sequence of rationals underlying the real number, but all you can see from the output is that it starts 7/4,7/4,7/4,7/4,7/4,... , so you don't know for sure that it doesn't jump to 37 and stay there later on!</p>",
        "id": 481589810,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1731266784
    },
    {
        "content": "<p>I guess it was the division which triggered the noncomputability, as it's not possible to decide algorithmically whether you're dividing by 0 or not in general (even though obviously in this case it is). The revised code avoids division completely.</p>",
        "id": 481589958,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1731266884
    }
]