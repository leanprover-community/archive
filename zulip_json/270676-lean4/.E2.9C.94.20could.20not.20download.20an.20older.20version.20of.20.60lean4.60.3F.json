[
    {
        "content": "<p>Earlier this month I used <code>rm -rf</code> to remove some of my old toolchains leaving only the <code>v4.16.0-rc2</code> toolchain, however now I've got this project that's built on an older version which is <code>v4.15.0-rc1</code> and when I tried to <code>lake exe cache get</code>, it gives me error <code>error: toolchain 'leanprover/lean4:v4.15.0-rc1' is not installed</code>, do we have a solution? Thanks for your help!</p>",
        "id": 494237596,
        "sender_full_name": "Edison Xie",
        "timestamp": 1737063582
    },
    {
        "content": "<p>I'm using a macbook btw if it helps</p>",
        "id": 494237648,
        "sender_full_name": "Edison Xie",
        "timestamp": 1737063603
    },
    {
        "content": "<p>IIRC <code>rm -rf</code> on toolchains isn't safe (or isn't comprehensive) as there's also a manifest file which says which toolchains are installed. You're supposed to have run <code>elan toolchain uninstall</code>. Does explicitly running <code>elan toolchain install leanprover/lean4:v4.15.0-rc1</code> work -- or check if there's a <code>reinstall</code> command (I don't have elan in front of me). Or otherwise probably you get to edit that manifest file to tell elan you really don't have those toolchains.</p>",
        "id": 494238999,
        "sender_full_name": "Julian Berman",
        "timestamp": 1737064161
    },
    {
        "content": "<p>elan toolchain install fails it gives the same error</p>",
        "id": 494239478,
        "sender_full_name": "Edison Xie",
        "timestamp": 1737064376
    },
    {
        "content": "<p>I've done this in the past and I think running <code>elan toolchain uninstall</code>, then <code>install</code>, should clean it up</p>",
        "id": 494239621,
        "sender_full_name": "Rob Lewis",
        "timestamp": 1737064434
    },
    {
        "content": "<p>I’ll try it thanks!</p>",
        "id": 494240404,
        "sender_full_name": "Edison Xie",
        "timestamp": 1737064748
    },
    {
        "content": "<p>No uninstall and then install fails</p>",
        "id": 494240800,
        "sender_full_name": "Edison Xie",
        "timestamp": 1737064899
    },
    {
        "content": "<p>uninstall gives this : <code>info: no toolchain installed for 'leanprover/lean4:v4.15.0-rc1'</code><br>\ninstall gives this : <code>leanprover/lean4:v4.15.0-rc1 unchanged - (toolchain not installed)</code></p>",
        "id": 494240975,
        "sender_full_name": "Edison Xie",
        "timestamp": 1737064963
    },
    {
        "content": "<p>Does going into .elan and removing the obvious file in the toolchain hash directory or whatever it's called sort out the problem? Or just deleting .elan completely?</p>",
        "id": 494258884,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1737074165
    },
    {
        "content": "<p>I'm on an ARM Mac and saw the same issue just now trying to bump my project from <code>v4.14</code> to <code>v4.15</code>. </p>\n<p><code>rm -rf ~/.elan</code> and <a href=\"https://github.com/leanprover/elan?tab=readme-ov-file#manual-installation\">re-installing <code>elan</code></a> seems to have fixed it.</p>",
        "id": 494274699,
        "sender_full_name": "George Pîrlea",
        "timestamp": 1737083525
    },
    {
        "content": "<p>ok <code>rm -rf .elan</code> and reinstall it works! Thanks everyone!</p>",
        "id": 494326770,
        "sender_full_name": "Edison Xie",
        "timestamp": 1737109073
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"699016\">Edison Xie</span> has marked this topic as resolved.</p>",
        "id": 494326833,
        "sender_full_name": "Notification Bot",
        "timestamp": 1737109085
    }
]