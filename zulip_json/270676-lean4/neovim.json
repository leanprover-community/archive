[
    {
        "content": "<p>New bizarre stuff with <code>neovim</code> this morning, I'm sorry not to be able to solve such things myselfâ€¦</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">Error</span><span class=\"w\"> </span><span class=\"n\">detected</span><span class=\"w\"> </span><span class=\"n\">while</span><span class=\"w\"> </span><span class=\"n\">processing</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">chambert</span><span class=\"bp\">/</span><span class=\"n\">src</span><span class=\"bp\">/</span><span class=\"n\">neovim</span><span class=\"bp\">/</span><span class=\"n\">acl</span><span class=\"bp\">/</span><span class=\"n\">init</span><span class=\"bp\">.</span><span class=\"n\">lua</span><span class=\"o\">:</span>\n<span class=\"n\">E5113</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Error</span><span class=\"w\"> </span><span class=\"n\">while</span><span class=\"w\"> </span><span class=\"n\">calling</span><span class=\"w\"> </span><span class=\"n\">lua</span><span class=\"w\"> </span><span class=\"n\">chunk</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">chambert</span><span class=\"bp\">/.</span><span class=\"n\">config</span><span class=\"bp\">/</span><span class=\"n\">nvim</span><span class=\"bp\">/</span><span class=\"n\">lua</span><span class=\"bp\">/</span><span class=\"n\">lsp</span><span class=\"bp\">-</span><span class=\"n\">setup</span><span class=\"bp\">.</span><span class=\"n\">lua</span><span class=\"o\">:</span><span class=\"mi\">76</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">attempt</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">call</span><span class=\"w\"> </span><span class=\"n\">field</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">setup_handlers'</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">nil</span><span class=\"w\"> </span><span class=\"n\">val</span>\n<span class=\"n\">ue</span><span class=\"o\">)</span>\n<span class=\"n\">stack</span><span class=\"w\"> </span><span class=\"n\">traceback</span><span class=\"o\">:</span>\n<span class=\"w\">        </span><span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">chambert</span><span class=\"bp\">/.</span><span class=\"n\">config</span><span class=\"bp\">/</span><span class=\"n\">nvim</span><span class=\"bp\">/</span><span class=\"n\">lua</span><span class=\"bp\">/</span><span class=\"n\">lsp</span><span class=\"bp\">-</span><span class=\"n\">setup</span><span class=\"bp\">.</span><span class=\"n\">lua</span><span class=\"o\">:</span><span class=\"mi\">76</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">main</span><span class=\"w\"> </span><span class=\"n\">chunk</span>\n<span class=\"w\">        </span><span class=\"o\">[</span><span class=\"n\">C</span><span class=\"o\">]:</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">function</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">require'</span>\n<span class=\"w\">        </span><span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">chambert</span><span class=\"bp\">/</span><span class=\"n\">src</span><span class=\"bp\">/</span><span class=\"n\">neovim</span><span class=\"bp\">/</span><span class=\"n\">acl</span><span class=\"bp\">/</span><span class=\"n\">init</span><span class=\"bp\">.</span><span class=\"n\">lua</span><span class=\"o\">:</span><span class=\"mi\">71</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">main</span><span class=\"w\"> </span><span class=\"n\">chunk</span>\n</code></pre></div>\n<p>Line 76 of <code>lsp-setup-lua</code> says:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">mason_lspconfig</span><span class=\"bp\">.</span><span class=\"n\">setup_handlers</span><span class=\"w\"> </span><span class=\"o\">{</span>\n<span class=\"w\">  </span><span class=\"n\">function</span><span class=\"o\">(</span><span class=\"n\">server_name</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"n\">require</span><span class=\"o\">(</span><span class=\"bp\">'</span><span class=\"n\">lspconfig'</span><span class=\"o\">)[</span><span class=\"n\">server_name</span><span class=\"o\">]</span><span class=\"bp\">.</span><span class=\"n\">setup</span><span class=\"w\"> </span><span class=\"o\">{</span>\n<span class=\"w\">      </span><span class=\"n\">capabilities</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">capabilities</span><span class=\"o\">,</span>\n<span class=\"w\">      </span><span class=\"n\">settings</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">servers</span><span class=\"o\">[</span><span class=\"n\">server_name</span><span class=\"o\">],</span>\n<span class=\"w\">      </span><span class=\"n\">filetypes</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">servers</span><span class=\"o\">[</span><span class=\"n\">server_name</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">or</span><span class=\"w\"> </span><span class=\"o\">{})</span><span class=\"bp\">.</span><span class=\"n\">filetypes</span><span class=\"o\">,</span>\n<span class=\"w\">    </span><span class=\"o\">}</span>\n<span class=\"w\">  </span><span class=\"kn\">end</span><span class=\"o\">,</span>\n<span class=\"o\">}</span>\n</code></pre></div>",
        "id": 517572685,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1747061352
    },
    {
        "content": "<p>That looks unrelated to <code>lean.nvim</code> (and Lean entirely) -- and looks related to <a href=\"https://github.com/mason-org/mason-lspconfig.nvim/blob/d39a75bbce4b8aad5d627191ea915179c77c100f/CHANGELOG.md?plain=1#L27\">https://github.com/mason-org/mason-lspconfig.nvim/blob/d39a75bbce4b8aad5d627191ea915179c77c100f/CHANGELOG.md?plain=1#L27</a> it appears <code>mason-lspconfig</code> has removed that function entirely. I don't use mason but let's see if I can help figure out what you need to tweak..</p>",
        "id": 517573604,
        "sender_full_name": "Julian Berman",
        "timestamp": 1747061546
    },
    {
        "content": "<p>(PS I don't personally mind helping with this sort of thing -- hopefully it puts some credit in my bank account to ask silly math questions at some point in exchange -- but of course if you want to be able to solve these things yourself I'm happy to try to help explain how to read that as well.)</p>",
        "id": 517574210,
        "sender_full_name": "Julian Berman",
        "timestamp": 1747061662
    },
    {
        "content": "<p>Antoine, you can remove this call to <code>mason_lspconfig.setup_handlers</code> entirely.</p>",
        "id": 517579313,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1747062706
    },
    {
        "content": "<p>It is indeed coming from a breaking change in mason.</p>",
        "id": 517579469,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1747062732
    },
    {
        "content": "<p>Note mason was bumped to whole new version number here, so breaking changes are very much expected.</p>",
        "id": 517579614,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1747062765
    },
    {
        "content": "<p>But it would be nice if <code>lazy.nvim</code> could ask confirmation before updating to a new major version.</p>",
        "id": 517579744,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1747062793
    },
    {
        "content": "<p>Here is a (partially tested) PR <a href=\"https://github.com/AntoineChambert-Loir/nvim/pull/1\">https://github.com/AntoineChambert-Loir/nvim/pull/1</a></p>",
        "id": 517579977,
        "sender_full_name": "Julian Berman",
        "timestamp": 1747062840
    }
]