[
    {
        "content": "<p>Assuming I need to require a few different dependencies using 'reservoir require' syntax in toml, observing from resevoir that they can all build on an older Lean toolchain, e.g. <code>v4.11.0-rc2</code>, but they don't have a tag <code>v4.11.0-rc2</code> so I can't write <code>v4.11.0-rc2</code> in <code>rev</code>, so I need to figure out on which git hash they can be built, so I can fix to that rev in the toml.</p>\n<p>Reservoir shows a short rev hover on the green icon for the success Lean versions, however, I can't get the full git hash. I can for the latest green one, by inspecting the Github actions log, which contains the git hash, unfortunately the same hacky method doesn't work for an older revision. e.g. <a href=\"https://github.com/leanprover/reservoir/actions/runs/10547565248/job/29220465773#step:4:1\">this log</a> prints a git hash not the same as the hover shown for <code>v4.11.0-rc2</code>.</p>\n<p>Am I missing something? <span class=\"user-mention\" data-user-id=\"315577\">@Mac Malone</span></p>",
        "id": 478470954,
        "sender_full_name": "Utensil Song",
        "timestamp": 1729682382
    },
    {
        "content": "<p>As usual, the information can be found in build.json files in <a href=\"https://github.com/leanprover/reservoir-index\">https://github.com/leanprover/reservoir-index</a>  for now.</p>",
        "id": 478474328,
        "sender_full_name": "Utensil Song",
        "timestamp": 1729683504
    },
    {
        "content": "<p>You can put the short hash in your toml as well</p>",
        "id": 478476613,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1729684272
    },
    {
        "content": "<p>Thanks, but it's also not easy to copy the short rev from hover.</p>",
        "id": 478487316,
        "sender_full_name": "Utensil Song",
        "timestamp": 1729687599
    },
    {
        "content": "<p>Interestingly, the hashes found in success build for the Lean version don't really build for the Lean version as dependencies, e.g.</p>\n<div class=\"codehilite\" data-code-language=\"TOML\"><pre><span></span><code><span class=\"k\">[[require]]</span>\n<span class=\"n\">name</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"s2\">\"scilean\"</span>\n<span class=\"n\">scope</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"s2\">\"lecopivo\"</span>\n<span class=\"n\">rev</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"s2\">\"66ee02bec40d382d634daeb0ca1dce9ef8e3362c\"</span>\n</code></pre></div>\n<p>doesn't really build on <code>leanprover/lean4:v4.11.0-rc2</code> with other dependencies on their hashes for the same Lean version. The hash is consistent with the <a href=\"https://github.com/leanprover/reservoir-index/blob/master/lecopivo/scilean/builds.json\">https://github.com/leanprover/reservoir-index/blob/master/lecopivo/scilean/builds.json</a> :</p>\n<div class=\"codehilite\" data-code-language=\"JSON\"><pre><span></span><code><span class=\"w\">    </span><span class=\"p\">{</span>\n<span class=\"w\">      </span><span class=\"nt\">\"built\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"kc\">true</span><span class=\"p\">,</span>\n<span class=\"w\">      </span><span class=\"nt\">\"tested\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"kc\">null</span><span class=\"p\">,</span>\n<span class=\"w\">      </span><span class=\"nt\">\"toolchain\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"leanprover/lean4:v4.11.0-rc2\"</span><span class=\"p\">,</span>\n<span class=\"w\">      </span><span class=\"nt\">\"requiredUpdate\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"kc\">false</span><span class=\"p\">,</span>\n<span class=\"w\">      </span><span class=\"nt\">\"archiveSize\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mi\">32518553</span><span class=\"p\">,</span>\n<span class=\"w\">      </span><span class=\"nt\">\"archiveHash\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"kc\">null</span><span class=\"p\">,</span>\n<span class=\"w\">      </span><span class=\"nt\">\"runAt\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"2024-10-21T14:10:10Z\"</span><span class=\"p\">,</span>\n<span class=\"w\">      </span><span class=\"nt\">\"url\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"https://github.com/leanprover/reservoir/actions/runs/11441856328/job/31831141390#step:4:1\"</span><span class=\"p\">,</span>\n<span class=\"w\">      </span><span class=\"nt\">\"revision\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"66ee02bec40d382d634daeb0ca1dce9ef8e3362c\"</span>\n<span class=\"w\">    </span><span class=\"p\">}</span>\n</code></pre></div>\n<p>(I think it's caused by the old trap that one project can't depend on more than one project that depends on mathlib.)</p>",
        "id": 478490602,
        "sender_full_name": "Utensil Song",
        "timestamp": 1729688459
    }
]