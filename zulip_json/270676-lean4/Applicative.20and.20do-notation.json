[
    {
        "content": "<p>People have thought about this btw </p>\n<p><a href=\"https://simonmar.github.io/bib/papers/applicativedo.pdf\">https://simonmar.github.io/bib/papers/applicativedo.pdf</a></p>",
        "id": 543380028,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1759773963
    },
    {
        "content": "<p>They make the case they in many cases one can infer when to use applicative combinators instead of monadic bind within do notation</p>",
        "id": 543380889,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1759774287
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"466334\">@Shreyas Srinivas</span> That's for Applicative, not Alternative — I don't see anything in the paper that would be relevant. The paper's certainly interesting.</p>",
        "id": 543386558,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1759776288
    },
    {
        "content": "<p>Yeah but alternatives are applicatives</p>",
        "id": 543389132,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1759777231
    },
    {
        "content": "<p>I checked and this is also mentioned in the lean reference manual </p>\n<blockquote>\n<p>The Alternative type class describes applicative functors that additionally have some notion of failure and recovery.</p>\n</blockquote>\n<p>Source: <a href=\"https://lean-lang.org/doc/reference/latest/Functors___-Monads-and--do--Notation/\">https://lean-lang.org/doc/reference/latest/Functors___-Monads-and--do--Notation/</a></p>",
        "id": 543389448,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1759777344
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"466334\">Shreyas Srinivas</span> <a href=\"#narrow/channel/270676-lean4/topic/Alternative.20and.20do-notation/near/543380889\">said</a>:</p>\n<blockquote>\n<p>They make the case they in many cases one can infer when to use applicative combinators instead of monadic bind within do notation</p>\n</blockquote>\n<p>at risk of derailing the thread further, <a href=\"https://github.com/leanprover/lean4/pull/10231\">lean4#10231</a> and <a href=\"https://github.com/leanprover/lean4/pull/10202\">lean4#10202</a> go a little in this direction</p>",
        "id": 543501862,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1759835158
    },
    {
        "content": "<p>From the paper that you link</p>\n<blockquote>\n<p>But, tantalisingly, fx manifestly isn’t used by the second call, so we actually could run the two in parallel.</p>\n</blockquote>\n<p>Does Lean today have any monads that allow <code>f &lt;$&gt; gx &lt;*&gt; gy</code> to run <code>gx</code> and <code>gy</code> in parallel?</p>",
        "id": 543502296,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1759835282
    },
    {
        "content": "<p>I don't think it is quite off-topic. The same idea that 's applied to applicatives can be applied to alternatives.</p>",
        "id": 543512995,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1759838543
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/channel/270676-lean4/topic/Alternative.20and.20do-notation/near/543502296\">said</a>:</p>\n<blockquote>\n<p>From the paper that you link</p>\n<blockquote>\n<p>But, tantalisingly, fx manifestly isn’t used by the second call, so we actually could run the two in parallel.</p>\n</blockquote>\n<p>Does Lean today have any monads that allow <code>f &lt;$&gt; gx &lt;*&gt; gy</code> to run <code>gx</code> and <code>gy</code> in parallel?</p>\n</blockquote>\n<p>Monads have a sequential dependency. You always evaluate the first argument to the bind to be able to apply it to the second. So it might not make sense to do this for Monads themselves. However, for applicatives this is not the case, all arguments can be evaluated in parallel (or any sequential order). This is also true for Alternatives, for example multiple match attempts by <code>Parser</code> can be executed in parallel.</p>",
        "id": 543513656,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1759838700
    },
    {
        "content": "<p>Right, hence my question \"Does Lean today have any monads that [execute applicative operations] in parallel\". I was not asking about bind operations.</p>",
        "id": 543527546,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1759842345
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/channel/270676-lean4/topic/Alternative.20and.20do-notation/near/543527546\">said</a>:</p>\n<blockquote>\n<p>Right, hence my question \"Does Lean today have any monads that [execute applicative operations] in parallel\". I was not asking about bind operations.</p>\n</blockquote>\n<p>It wouldn’t be a monad without the bind operation would it? Just an applicative? Anyway, I think we are in broad agreement that a do notation for applicatives (and by extension alternatives) with parallel execution is worth  exploring.</p>",
        "id": 543609348,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1759866271
    },
    {
        "content": "<p>Irrespective of whether the bind operation exists, my question is about <code>f &lt;$&gt; gx &lt;*&gt; gy</code> which does not mention it. Of course, a monad can implement <code>seq</code> and <code>map</code> in terms of bind, but it is not required to do so.</p>",
        "id": 543609574,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1759866365
    },
    {
        "content": "<p>To further clarify, there are two separate, somewhat orthogonal issues :</p>\n<ol>\n<li>Extending <code>do</code> notation to desugar into the applicative <code>&lt;*&gt;</code> (and maybe also <code>&lt;|&gt;</code>)  operator instead of the monadic <code>&gt;&gt;=</code> operator where possible.  </li>\n<li>Parallel execution of applicative actions.</li>\n</ol>",
        "id": 543614988,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1759868494
    },
    {
        "content": "<p>13 messages were moved here from <a class=\"stream-topic\" data-stream-id=\"270676\" href=\"/#narrow/channel/270676-lean4/topic/Alternative.20and.20do-notation/with/543359392\">#lean4 &gt; Alternative and do-notation</a> by <span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span>.</p>",
        "id": 543620782,
        "sender_full_name": "Notification Bot",
        "timestamp": 1759870720
    },
    {
        "content": "<p>(I think this discussion is worth keeping, but let's remove the distraction from the <code>first |</code> proposal; feel free to edit the first message to quote something from the original thread to make it make more sense)</p>",
        "id": 543620889,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1759870764
    }
]