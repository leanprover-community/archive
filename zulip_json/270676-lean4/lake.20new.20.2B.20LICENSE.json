[
    {
        "content": "<p>Can I re-raise (because I see Joachim mentioned it <a href=\"#narrow/stream/270676-lean4/topic/Reservoir.20status.20display/near/411395023\">here</a>) whether <code>lake new</code> should generate a LICENSE file by default?<br>\nObviously this raises a \"<em>which</em> license by default\" question, but I think that in the context of Lean + mathematics, it is subjectively quite a bit more likely that users will not know they should add a LICENSE as early as possible when creating projects than it is that a user has a strong preference for <em>which</em> LICENSE they use -- and for the latter those users will know to change the LICENSE file.</p>\n<p>Concretely I think Lake should generate an Apache 2.0 license by default, (and even if that's not the LICENSE I personally generally use). Has such a thing been considered / do others agree?</p>",
        "id": 463018378,
        "sender_full_name": "Julian Berman",
        "timestamp": 1723916318
    },
    {
        "content": "<p>I'm not sure that would constitute an effective grant of a license by the author. Some options from other ecosystems are to have a \"what license?\" prompt when creating a new package with the build tool (npm), or to require that a license be specified before being allowed upload to the package registry (<a href=\"http://crates.io\">crates.io</a>).</p>\n<p>If lakefiles eventually support inclusion of license information, you can leave a comment to prompt users similar to rust's default Cargo.toml. Something like</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">...</span>\n<span class=\"n\">lean_lib</span><span class=\"w\"> </span><span class=\"n\">foo</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"c1\">-- Learn more about licensing your Lean project by reading the FAQ at &lt;link&gt;</span>\n<span class=\"w\">  </span><span class=\"n\">license</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"s2\">\"\"</span>\n</code></pre></div>",
        "id": 463022731,
        "sender_full_name": "Chris Bailey",
        "timestamp": 1723918151
    },
    {
        "content": "<p>While acknowledging that it is a little presumptious, I'd also be in favour of simply including the Apache 2.0 LICENSE by default. Users can delete or replace, but get a good default.</p>",
        "id": 463066572,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1723939277
    },
    {
        "content": "<p>I agree with Chris that this is not enough of \"active consent\" to be legally above-board. I think a suggestion to insert a specific license (e.g. apache 2.0) is fine, but it shouldn't be possible for someone to run <code>lake new</code>, not see any mention of a license, then push to github and have the release \"presumptively licensed\" under a license they did not say yes to</p>",
        "id": 463066988,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1723939660
    },
    {
        "content": "<p>To be clear I'm not specifically suggesting no confirmation, that's fine too, perhaps with a <code>--license &lt;SPDX identifier</code> to pass a choice without interactivity. Not being a lawyer, I'm not sure what current case law considers regarding whether autogenerating one would be a reasonable presumption that the user is granting it if they then went and committed it (and if you'll forgive me for presuming no one else who's opined so far is, if there's one in the audience I'd be curious to know whether this is something that's been tested or not). My layman brain would think at very least it should slightly shift the burden onto presuming it <em>was</em> the license and someone would need to argue it wasn't (because it was implicitly granted) as opposed to the (subjectively) worse scenario where someone is immediately using something with no license. But it sounds like perhaps adding a confirmation just makes everyone (including me) so far happy?</p>",
        "id": 463067959,
        "sender_full_name": "Julian Berman",
        "timestamp": 1723940585
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"321696\">Julian Berman</span> <a href=\"#narrow/stream/270676-lean4/topic/lake.20new.20.2B.20LICENSE/near/463067959\">said</a>:</p>\n<blockquote>\n<p>To be clear I'm not specifically suggesting no confirmation, that's fine too, perhaps with a <code>--license &lt;SPDX identifier</code> to pass a choice without interactivity. Not being a lawyer, I'm not sure what current case law considers regarding whether autogenerating one would be a reasonable presumption that the user is granting it if they then went and committed it (and if you'll forgive me for presuming no one else who's opined so far is, if there's one in the audience I'd be curious to know whether this is something that's been tested or not). My layman brain would think at very least it should slightly shift the burden onto presuming it <em>was</em> the license and someone would need to argue it wasn't (because it was implicitly granted) as opposed to the (subjectively) worse scenario where someone is immediately using something with no license. But it sounds like perhaps adding a confirmation just makes everyone (including me) so far happy?</p>\n</blockquote>\n<p>I'm a lawyer and work in this area; I would not recommend this approach precisely because of the uncertainty. I'm not aware of any case law specifically addressing the issue of legally significant files silently generated by something like a build tool, but under general contract principles I think in most cases it would shake out that there was not an effective agreement.</p>\n<p>Mario touched on this already, but to address the second point, I think the expectation in the broader software world is that it's the responsibility of downstream users to make sure a work they want to use is licensed in a way that accommodates their use case. The worst case scenario is that Lean developers, businesses, etc. following this pattern start using stuff they believe is available under e.g. Apache-2.0 because they observe some generated default, but which suddenly becomes unlicensed when someone wins a lawsuit in the Southern District of New York or whatever.</p>\n<p>I would be on board with either a confirmation that requires a key press or some interaction, or the manifest hints, with a preference for the latter.</p>",
        "id": 463102483,
        "sender_full_name": "Chris Bailey",
        "timestamp": 1723957393
    },
    {
        "content": "<p>Aha! Thanks for saying so Chris (and for the info)!</p>",
        "id": 463172713,
        "sender_full_name": "Julian Berman",
        "timestamp": 1723987986
    },
    {
        "content": "<p>I guess another option would be for <code>lake build</code> or <code>lake new</code> to emit a warning that the project is unlicensed</p>",
        "id": 463180571,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1723992213
    },
    {
        "content": "<p>(with a way to explicitly mark no license as intended in the lakefile with <code>unlicensed := true</code>)</p>",
        "id": 463180628,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1723992245
    },
    {
        "content": "<p>Including the actual license info in the lakefile sounds messy, since for example ProofWidgets and Verso include vendored javascript files that are <em>not</em> apache-licensed</p>",
        "id": 463180784,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1723992321
    },
    {
        "content": "<p>That's not unique to Lean though is it? Python and Rust and JS all have license fields in their packaging files. And if you vendor files with other licenses you manage</p>",
        "id": 463181528,
        "sender_full_name": "Julian Berman",
        "timestamp": 1723992514
    },
    {
        "content": "<p>I guess <code>licenses := [...]</code> is sufficient</p>",
        "id": 463182616,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1723992800
    },
    {
        "content": "<p>I agree with Julian on the vendored files issue though that's definitely a valid point. The minority of people who care about license details will have tools to find something like a package.json or additional LICENSE file nested within a larger Lean project, so Lean developers should only have to concern themselves selecting a license information for their contributions.</p>\n<p>As far as implementation, the most convenient format for consumers and detection tools is what cargo does, <code>license: string, license-file: string</code>. The <code>license</code> key is for an SPDX expression, the <code>license-file</code> key is for people who would rather specify a path to a file containing the license, which is useful if it's some kind of commercial or custom license deal. The <code>license-file</code> one can be a list with multiple paths, but forcing \"license\" to be a single string is preferred, because <code>licenses := [X, Y]</code> is less clear than the SPDX <code>X AND Y</code> or <code>X OR Y</code>.</p>",
        "id": 463187827,
        "sender_full_name": "Chris Bailey",
        "timestamp": 1723994106
    },
    {
        "content": "<p>(That's essentially what Python has these days as well -- <a href=\"https://peps.python.org/pep-0639/\">https://peps.python.org/pep-0639/</a> )</p>",
        "id": 463189687,
        "sender_full_name": "Julian Berman",
        "timestamp": 1723994655
    }
]