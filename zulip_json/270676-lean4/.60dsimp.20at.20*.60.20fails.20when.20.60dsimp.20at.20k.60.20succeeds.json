[
    {
        "content": "<p>I would expect <code>dsimp at *</code> to actually run <code>dsimp -failIfUnchanged</code> everywhere but it doesn't seem to be doing that</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"mi\">17</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hx</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">17</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"bp\">//</span><span class=\"w\"> </span><span class=\"n\">hx</span><span class=\"w\"> </span><span class=\"bp\">▸</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">})</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">False</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">cases</span><span class=\"w\"> </span><span class=\"n\">hx</span>\n<span class=\"w\">  </span><span class=\"c1\">-- `dsimp` made no progress</span>\n<span class=\"w\">  </span><span class=\"c1\">-- dsimp at *</span>\n\n<span class=\"w\">  </span><span class=\"c1\">-- definitely works</span>\n<span class=\"w\">  </span><span class=\"c1\">-- dsimp at k</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n</code></pre></div>",
        "id": 539397602,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1757845892
    },
    {
        "content": "<p>minimized from my own code where I want to clean up refl-casts before running <code>generalize_proofs; extract_goal</code></p>",
        "id": 539397661,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1757845978
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover/lean4/pull/8696\">lean4#8696</a></p>",
        "id": 539397828,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1757846175
    },
    {
        "content": "<p>and <a href=\"https://github.com/leanprover/lean4/pull/8300\">lean4#8300</a> I guess</p>",
        "id": 539397850,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1757846206
    },
    {
        "content": "<p>what's the workaround?</p>",
        "id": 539397960,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1757846355
    },
    {
        "content": "<p>do I just run <code>dsimp</code> individually on all 27 of my local hypotheses</p>",
        "id": 539397968,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1757846370
    },
    {
        "content": "<p>I don't know any better solution... <code>dsimp at h1 h2 h3 h4 h5 h6 h7 h8 h9 h10 h11 h12 h13 h14 h15 h16 h17 h18 h19 h20 h21 h22 h23 h24 h25 h26 h27</code> it is...</p>",
        "id": 539414446,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1757862499
    }
]