[
    {
        "content": "<p>I tried to create a new lean repo that depends on Batteries by adding the following snippet to <code>lakefile.toml</code>, as recommended on the <a href=\"https://reservoir.lean-lang.org/@leanprover-community/batteries\">Batteries reservoir page</a>:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"o\">[[</span><span class=\"n\">require</span><span class=\"o\">]]</span>\n<span class=\"n\">name</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"s2\">\"batteries\"</span>\n<span class=\"n\">scope</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"s2\">\"leanprover-community\"</span>\n<span class=\"n\">version</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"s2\">\"main\"</span>\n</code></pre></div>\n<p>The result, when trying either <code>lake update</code> or <code>lake build</code>:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">batteries</span><span class=\"w\"> </span><span class=\"n\">unsupported</span><span class=\"w\"> </span><span class=\"n\">dependency</span><span class=\"w\"> </span><span class=\"n\">version</span><span class=\"w\"> </span><span class=\"n\">format</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">main'</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">should</span><span class=\"w\"> </span><span class=\"n\">be</span><span class=\"w\"> </span><span class=\"s2\">\"git#&gt;rev&gt;\"</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>I just switched to <code>lakefile.lean</code> instead of investigating this, but I figured I should flag this bug here for the record.</p>",
        "id": 485018063,
        "sender_full_name": "Frédéric Dupuis",
        "timestamp": 1732853232
    },
    {
        "content": "<p>I think the bug is in the README, it should be <code>rev = \"main\"</code> not <code>version</code> for a git reservoir dep.</p>",
        "id": 485018317,
        "sender_full_name": "Julian Berman",
        "timestamp": 1732853484
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/batteries/pull/1067\">https://github.com/leanprover-community/batteries/pull/1067</a></p>",
        "id": 485018541,
        "sender_full_name": "Julian Berman",
        "timestamp": 1732853656
    }
]