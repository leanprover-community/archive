[
    {
        "content": "<p>I'm evaluating <code>aesop</code> on Mathlib4, and I found that in some cases it does not terminate even with very small <code> maxHeartbeats</code>. This causes trouble for my evaluation.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">RingTheory</span><span class=\"bp\">.</span><span class=\"n\">FiniteType</span>\n\n<span class=\"kn\">set_option</span><span class=\"w\"> </span><span class=\"n\">maxHeartbeats</span><span class=\"w\"> </span><span class=\"mi\">1500</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">mem_adjoin_support</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">u_1</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">u_2</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u_1</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u_2</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">CommSemiring</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">AddMonoid</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">AddMonoidAlgebra</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">Algebra</span><span class=\"bp\">.</span><span class=\"n\">adjoin</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">AddMonoidAlgebra</span><span class=\"bp\">.</span><span class=\"n\">of'</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"bp\">''</span><span class=\"w\"> </span><span class=\"bp\">↑</span><span class=\"n\">f</span><span class=\"bp\">.</span><span class=\"n\">support</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">aesop</span>\n</code></pre></div>\n<p>Are there any ways to let <code>aesop</code> terminate on the above example?</p>",
        "id": 491842295,
        "sender_full_name": "Yicheng Qian",
        "timestamp": 1735962136
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 491870108,
        "sender_full_name": "Yicheng Qian",
        "timestamp": 1735990846
    },
    {
        "content": "<p>The gdb stack trace seems to indicate that the process is stuck in <code>lean_is_expr_def_eq</code></p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"o\">(</span><span class=\"n\">gdb</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">thread</span><span class=\"w\"> </span><span class=\"mi\">2</span>\n<span class=\"o\">[</span><span class=\"n\">Switching</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">thread</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Thread</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"n\">x7ffff101e640</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">LWP</span><span class=\"w\"> </span><span class=\"mi\">40964</span><span class=\"o\">))]</span>\n<span class=\"bp\">#</span><span class=\"mi\">0</span><span class=\"w\">  </span><span class=\"mi\">0</span><span class=\"n\">x00007ffff7e5e455</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">lean_alloc_small</span><span class=\"w\"> </span><span class=\"o\">()</span><span class=\"w\"> </span><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">indprinciples</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.15.0/lib/lean/libleanshared.so</span>\n<span class=\"o\">(</span><span class=\"n\">gdb</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">bt</span><span class=\"w\"> </span><span class=\"mi\">100</span>\n<span class=\"bp\">#</span><span class=\"mi\">0</span><span class=\"w\">  </span><span class=\"mi\">0</span><span class=\"n\">x00007ffff7e5e455</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">lean_alloc_small</span><span class=\"w\"> </span><span class=\"o\">()</span><span class=\"w\"> </span><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">indprinciples</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.15.0/lib/lean/libleanshared.so</span>\n<span class=\"bp\">#</span><span class=\"mi\">1</span><span class=\"w\">  </span><span class=\"mi\">0</span><span class=\"n\">x00007ffff7a64760</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">l_Lean_Level_hasParam</span><span class=\"w\"> </span><span class=\"o\">()</span>\n<span class=\"w\">   </span><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">indprinciples</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.15.0/lib/lean/libleanshared.so</span>\n<span class=\"bp\">#</span><span class=\"mi\">2</span><span class=\"w\">  </span><span class=\"mi\">0</span><span class=\"n\">x00007ffff7a647ae</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">l_Lean_Level_hasParam___boxed</span><span class=\"w\"> </span><span class=\"o\">()</span>\n<span class=\"w\">   </span><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">indprinciples</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.15.0/lib/lean/libleanshared.so</span>\n<span class=\"bp\">#</span><span class=\"mi\">3</span><span class=\"w\">  </span><span class=\"mi\">0</span><span class=\"n\">x00007ffff7e3ffa5</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">lean_apply_1</span><span class=\"w\"> </span><span class=\"o\">()</span><span class=\"w\"> </span><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">indprinciples</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.15.0/lib/lean/libleanshared.so</span>\n<span class=\"bp\">#</span><span class=\"mi\">4</span><span class=\"w\">  </span><span class=\"mi\">0</span><span class=\"n\">x00007ffff32f7789</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">l_List_any___rarg</span><span class=\"w\"> </span><span class=\"o\">()</span><span class=\"w\"> </span><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">indprinciples</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.15.0/lib/lean/libleanshared.so</span>\n<span class=\"bp\">#</span><span class=\"mi\">5</span><span class=\"w\">  </span><span class=\"mi\">0</span><span class=\"n\">x00007ffff60fad2f</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">l_Lean_Expr_const___override</span><span class=\"w\"> </span><span class=\"o\">()</span>\n<span class=\"w\">   </span><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">indprinciples</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.15.0/lib/lean/libleanshared.so</span>\n<span class=\"bp\">#</span><span class=\"mi\">6</span><span class=\"w\">  </span><span class=\"mi\">0</span><span class=\"n\">x00007ffff7b3562a</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">lean</span><span class=\"bp\">::</span><span class=\"n\">update_const</span><span class=\"o\">(</span><span class=\"n\">lean</span><span class=\"bp\">::</span><span class=\"n\">expr</span><span class=\"w\"> </span><span class=\"n\">const</span><span class=\"bp\">&amp;</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">lean</span><span class=\"bp\">::</span><span class=\"n\">list_ref</span><span class=\"bp\">&lt;</span><span class=\"n\">lean</span><span class=\"bp\">::</span><span class=\"n\">level</span><span class=\"bp\">&gt;</span><span class=\"w\"> </span><span class=\"n\">const</span><span class=\"bp\">&amp;</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">()</span>\n<span class=\"w\">   </span><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">indprinciples</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.15.0/lib/lean/libleanshared.so</span>\n<span class=\"bp\">#</span><span class=\"mi\">7</span><span class=\"w\">  </span><span class=\"mi\">0</span><span class=\"n\">x00007ffff7b76fd5</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">lean</span><span class=\"bp\">::</span><span class=\"n\">instantiate_mvars_fn</span><span class=\"bp\">::</span><span class=\"n\">visit</span><span class=\"o\">(</span><span class=\"n\">lean</span><span class=\"bp\">::</span><span class=\"n\">expr</span><span class=\"w\"> </span><span class=\"n\">const</span><span class=\"bp\">&amp;</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">()</span>\n<span class=\"w\">   </span><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">indprinciples</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.15.0/lib/lean/libleanshared.so</span>\n<span class=\"bp\">#</span><span class=\"mi\">8</span><span class=\"w\">  </span><span class=\"mi\">0</span><span class=\"n\">x00007ffff7b785eb</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">lean</span><span class=\"bp\">::</span><span class=\"n\">instantiate_mvars_fn</span><span class=\"bp\">::</span><span class=\"n\">visit_app_default</span><span class=\"o\">(</span><span class=\"n\">lean</span><span class=\"bp\">::</span><span class=\"n\">expr</span><span class=\"w\"> </span><span class=\"n\">const</span><span class=\"bp\">&amp;</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">()</span>\n<span class=\"w\">   </span><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">indprinciples</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.15.0/lib/lean/libleanshared.so</span>\n<span class=\"bp\">#</span><span class=\"mi\">9</span><span class=\"w\">  </span><span class=\"mi\">0</span><span class=\"n\">x00007ffff7b778b7</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">lean</span><span class=\"bp\">::</span><span class=\"n\">instantiate_mvars_fn</span><span class=\"bp\">::</span><span class=\"n\">visit_app</span><span class=\"o\">(</span><span class=\"n\">lean</span><span class=\"bp\">::</span><span class=\"n\">expr</span><span class=\"w\"> </span><span class=\"n\">const</span><span class=\"bp\">&amp;</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">()</span>\n<span class=\"w\">   </span><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">indprinciples</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.15.0/lib/lean/libleanshared.so</span>\n<span class=\"bp\">#</span><span class=\"mi\">10</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"n\">x00007ffff7b77145</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">lean</span><span class=\"bp\">::</span><span class=\"n\">instantiate_mvars_fn</span><span class=\"bp\">::</span><span class=\"n\">visit</span><span class=\"o\">(</span><span class=\"n\">lean</span><span class=\"bp\">::</span><span class=\"n\">expr</span><span class=\"w\"> </span><span class=\"n\">const</span><span class=\"bp\">&amp;</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">()</span>\n<span class=\"w\">   </span><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">indprinciples</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.15.0/lib/lean/libleanshared.so</span>\n<span class=\"bp\">#</span><span class=\"mi\">11</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"n\">x00007ffff7b78560</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">lean</span><span class=\"bp\">::</span><span class=\"n\">instantiate_mvars_fn</span><span class=\"bp\">::</span><span class=\"n\">visit_app_default</span><span class=\"o\">(</span><span class=\"n\">lean</span><span class=\"bp\">::</span><span class=\"n\">expr</span><span class=\"w\"> </span><span class=\"n\">const</span><span class=\"bp\">&amp;</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">()</span>\n<span class=\"w\">   </span><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">indprinciples</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.15.0/lib/lean/libleanshared.so</span>\n<span class=\"bp\">#</span><span class=\"mi\">12</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"n\">x00007ffff7b778b7</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">lean</span><span class=\"bp\">::</span><span class=\"n\">instantiate_mvars_fn</span><span class=\"bp\">::</span><span class=\"n\">visit_app</span><span class=\"o\">(</span><span class=\"n\">lean</span><span class=\"bp\">::</span><span class=\"n\">expr</span><span class=\"w\"> </span><span class=\"n\">const</span><span class=\"bp\">&amp;</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">()</span>\n<span class=\"w\">   </span><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">indprinciples</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.15.0/lib/lean/libleanshared.so</span>\n<span class=\"bp\">#</span><span class=\"mi\">13</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"n\">x00007ffff7b77145</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">lean</span><span class=\"bp\">::</span><span class=\"n\">instantiate_mvars_fn</span><span class=\"bp\">::</span><span class=\"n\">visit</span><span class=\"o\">(</span><span class=\"n\">lean</span><span class=\"bp\">::</span><span class=\"n\">expr</span><span class=\"w\"> </span><span class=\"n\">const</span><span class=\"bp\">&amp;</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">()</span>\n<span class=\"w\">   </span><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">indprinciples</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.15.0/lib/lean/libleanshared.so</span>\n<span class=\"bp\">#</span><span class=\"mi\">14</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"n\">x00007ffff7b78560</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">lean</span><span class=\"bp\">::</span><span class=\"n\">instantiate_mvars_fn</span><span class=\"bp\">::</span><span class=\"n\">visit_app_default</span><span class=\"o\">(</span><span class=\"n\">lean</span><span class=\"bp\">::</span><span class=\"n\">expr</span><span class=\"w\"> </span><span class=\"n\">const</span><span class=\"bp\">&amp;</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">()</span>\n<span class=\"w\">   </span><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">indprinciples</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.15.0/lib/lean/libleanshared.so</span>\n<span class=\"bp\">#</span><span class=\"mi\">15</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"n\">x00007ffff7b778b7</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">lean</span><span class=\"bp\">::</span><span class=\"n\">instantiate_mvars_fn</span><span class=\"bp\">::</span><span class=\"n\">visit_app</span><span class=\"o\">(</span><span class=\"n\">lean</span><span class=\"bp\">::</span><span class=\"n\">expr</span><span class=\"w\"> </span><span class=\"n\">const</span><span class=\"bp\">&amp;</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">()</span>\n<span class=\"w\">   </span><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">indprinciples</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.15.0/lib/lean/libleanshared.so</span>\n<span class=\"bp\">#</span><span class=\"mi\">16</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"n\">x00007ffff7b77145</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">lean</span><span class=\"bp\">::</span><span class=\"n\">instantiate_mvars_fn</span><span class=\"bp\">::</span><span class=\"n\">visit</span><span class=\"o\">(</span><span class=\"n\">lean</span><span class=\"bp\">::</span><span class=\"n\">expr</span><span class=\"w\"> </span><span class=\"n\">const</span><span class=\"bp\">&amp;</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">()</span>\n<span class=\"w\">   </span><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">indprinciples</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.15.0/lib/lean/libleanshared.so</span>\n<span class=\"bp\">#</span><span class=\"mi\">17</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"n\">x00007ffff7b754cd</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">lean_instantiate_expr_mvars</span><span class=\"w\"> </span><span class=\"o\">()</span>\n<span class=\"w\">   </span><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">indprinciples</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.15.0/lib/lean/libleanshared.so</span>\n<span class=\"bp\">#</span><span class=\"mi\">18</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"n\">x00007ffff7a890cb</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">l_Lean_instantiateExprMVars___at_Lean_instantiateMVarsCore___spec__1___rarg</span><span class=\"w\"> </span><span class=\"o\">()</span>\n<span class=\"w\">   </span><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">indprinciples</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.15.0/lib/lean/libleanshared.so</span>\n<span class=\"bp\">#</span><span class=\"mi\">19</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"n\">x00007ffff7a89686</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">l_Lean_instantiateMVarsCore___lambda__1</span><span class=\"w\"> </span><span class=\"o\">()</span>\n<span class=\"w\">   </span><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">indprinciples</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.15.0/lib/lean/libleanshared.so</span>\n<span class=\"bp\">#</span><span class=\"mi\">20</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"n\">x00007ffff7e41c76</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">lean_apply_2</span><span class=\"w\"> </span><span class=\"o\">()</span><span class=\"w\"> </span><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">indprinciples</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.15.0/lib/lean/libleanshared.so</span>\n<span class=\"bp\">#</span><span class=\"mi\">21</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"n\">x00007ffff3475106</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">l_runST___rarg</span><span class=\"w\"> </span><span class=\"o\">()</span><span class=\"w\"> </span><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">indprinciples</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.15.0/lib/lean/libleanshared.so</span>\n<span class=\"bp\">#</span><span class=\"mi\">22</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"n\">x00007ffff6b7ae93</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">l_Lean_instantiateMVars___at___private_Lean_Meta_Basic_0__Lean_Meta_isClassApp_x3f___spec__1</span><span class=\"w\"> </span><span class=\"o\">()</span>\n<span class=\"w\">   </span><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">indprinciples</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.15.0/lib/lean/libleanshared.so</span>\n<span class=\"bp\">#</span><span class=\"mi\">23</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"n\">x00007ffff6d04033</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">l___private_Lean_Meta_ExprDefEq_0__Lean_Meta_cacheResult</span><span class=\"w\"> </span><span class=\"o\">()</span>\n<span class=\"c1\">--Type &lt;RET&gt; for more, q to quit, c to continue without paging--</span>\n<span class=\"w\">   </span><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">indprinciples</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.15.0/lib/lean/libleanshared.so</span>\n<span class=\"bp\">#</span><span class=\"mi\">24</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"n\">x00007ffff6d06115</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">l_Lean_Meta_isExprDefEqAuxImpl___lambda__2</span><span class=\"w\"> </span><span class=\"o\">()</span>\n<span class=\"w\">   </span><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">indprinciples</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.15.0/lib/lean/libleanshared.so</span>\n<span class=\"bp\">#</span><span class=\"mi\">25</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"n\">x00007ffff6d0d334</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">l_Lean_Meta_isExprDefEqAuxImpl___lambda__3</span><span class=\"w\"> </span><span class=\"o\">()</span>\n<span class=\"w\">   </span><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">indprinciples</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.15.0/lib/lean/libleanshared.so</span>\n<span class=\"bp\">#</span><span class=\"mi\">26</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"n\">x00007ffff7e47f0e</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">lean_apply_5</span><span class=\"w\"> </span><span class=\"o\">()</span><span class=\"w\"> </span><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">indprinciples</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.15.0/lib/lean/libleanshared.so</span>\n<span class=\"bp\">#</span><span class=\"mi\">27</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"n\">x00007ffff6c2e431</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">l_Lean_withTraceNodeBefore___at___private_Lean_Meta_ExprDefEq_0__Lean_Meta_checkTypesAndAssign___spec__1</span><span class=\"w\"> </span><span class=\"o\">()</span>\n<span class=\"w\">   </span><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">indprinciples</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.15.0/lib/lean/libleanshared.so</span>\n<span class=\"bp\">#</span><span class=\"mi\">28</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"n\">x00007ffff6c10c85</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">lean_is_expr_def_eq</span><span class=\"w\"> </span><span class=\"o\">()</span>\n<span class=\"w\">   </span><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">indprinciples</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.15.0/lib/lean/libleanshared.so</span>\n<span class=\"bp\">#</span><span class=\"mi\">29</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"n\">x00007ffff6c14629</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">l_Std_Range_forIn_x27_loop___at___private_Lean_Meta_ExprDefEq_0__Lean_Meta_isDefEqArgsFirstPass___spec__1___lambda__2</span>\n<span class=\"w\">    </span><span class=\"o\">()</span><span class=\"w\"> </span><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">indprinciples</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.15.0/lib/lean/libleanshared.so</span>\n<span class=\"bp\">#</span><span class=\"mi\">30</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"n\">x00007ffff6c161d7</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">l_Std_Range_forIn_x27_loop___at___private_Lean_Meta_ExprDefEq_0__Lean_Meta_isDefEqArgsFirstPass___spec__1</span><span class=\"w\"> </span><span class=\"o\">()</span>\n<span class=\"w\">   </span><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">indprinciples</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.15.0/lib/lean/libleanshared.so</span>\n<span class=\"bp\">#</span><span class=\"mi\">31</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"n\">x00007ffff6c18fe4</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">l___private_Lean_Meta_ExprDefEq_0__Lean_Meta_isDefEqArgsFirstPass</span><span class=\"w\"> </span><span class=\"o\">()</span>\n</code></pre></div>",
        "id": 491876144,
        "sender_full_name": "Yicheng Qian",
        "timestamp": 1735996213
    },
    {
        "content": "<p>It appears this is the case because aesop by default runs individual steps without heartbeat limits</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"w\">  </span><span class=\"n\">aesop</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">config</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"w\"> </span><span class=\"n\">maxSimpHeartbeats</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"mi\">10000</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">maxRuleHeartbeats</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"mi\">10000</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">maxUnfoldHeartbeats</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"mi\">10000</span><span class=\"w\"> </span><span class=\"o\">})</span>\n</code></pre></div>\n<p><span class=\"user-mention\" data-user-id=\"256311\">@Jannis Limperg</span> Shouldn't some minimum computation of global and local limit be done here?</p>",
        "id": 491965680,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1736082415
    }
]