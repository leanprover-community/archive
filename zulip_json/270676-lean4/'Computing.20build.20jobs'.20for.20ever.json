[
    {
        "content": "<p>I'm trying to build mathlib based on a local version of batteries. That is, I've changed the <code>lakefile.lean</code> in the mathlib project to use:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">require</span><span class=\"w\"> </span><span class=\"n\">batteries</span><span class=\"w\"> </span><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"s2\">\"../batteries/batteries\"</span>\n</code></pre></div>\n<div class=\"spoiler-block\"><div class=\"spoiler-header\">\n<p>Directory Structure</p>\n</div><div class=\"spoiler-content\" aria-hidden=\"true\">\n<div class=\"codehilite\"><pre><span></span><code>└── batteries\n│   └── batteries\n│   │   └── Batteries\n│   │   │   └── ...\n│   │   └──...\n└── mathlib4\n    └── ...\n</code></pre></div>\n</div></div>\n<p>But when I run <code>lake clean &amp;&amp; lake update batteries &amp;&amp; lake build</code> in the <code>mathlib4</code> directory, it just says <code>⣿ [?/?] Computing build jobs</code> forever. I'm not sure how to debug this.</p>",
        "id": 479235131,
        "sender_full_name": "Marcus Rossel",
        "timestamp": 1730109202
    },
    {
        "content": "<p>I think \"Computing build jobs\" forever is best debugged by pinging <span class=\"user-mention\" data-user-id=\"315577\">@Mac Malone</span>, unfortunately. He's aware this sometimes happens, but I think doesn't have a repro that is sufficient for him to identify the cause.</p>",
        "id": 479236287,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1730109589
    },
    {
        "content": "<p>My experience is that this usually means you are importing a file from the other library that doesn't exist, but that's only a necessary, not sufficient, condition.</p>",
        "id": 479236424,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1730109619
    },
    {
        "content": "<p>What does \"importing a file from the other library that doesn't exist\" mean?</p>",
        "id": 479276419,
        "sender_full_name": "Marcus Rossel",
        "timestamp": 1730122306
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"372804\">@Marcus Rossel</span> For example, <code>import Batteries.Foo</code> where <code>Batteries/Foo.lean</code> does not  exist (e.g., because it recently removed in a new version of batteries).</p>",
        "id": 479276746,
        "sender_full_name": "Mac Malone",
        "timestamp": 1730122391
    },
    {
        "content": "<p>So instead of necessarily causing a simple build error, a missing file might also contribute to the non-terminating <code>Computing build jobs</code>?</p>",
        "id": 479276987,
        "sender_full_name": "Marcus Rossel",
        "timestamp": 1730122447
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 479277228,
        "sender_full_name": "Marcus Rossel",
        "timestamp": 1730122527
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"372804\">Marcus Rossel</span> <a href=\"#narrow/channel/270676-lean4/topic/'Computing.20build.20jobs'.20for.20ever/near/479276987\">said</a>:</p>\n<blockquote>\n<p>So instead of necessarily causing a simple build error, a missing file might also contribute to the non-terminating <code>Computing build jobs</code>?</p>\n</blockquote>\n<p>For some reason I have sadly yet to be able to figure out, yes, that appears to be the case for batteries/mathlib.</p>",
        "id": 479284150,
        "sender_full_name": "Mac Malone",
        "timestamp": 1730124316
    }
]