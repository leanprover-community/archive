[
    {
        "content": "<p>Hello! I had a use-case for for the <code>attrs</code> field of <code>Lean.Elab.Command.Scope</code> (the TLDR is I want to create a special kind of namespace that keeps track of all commands elaborated in it including those created through deriving handlers, so some post-processing can be done on all of them after).</p>\n<p>However, I've written code that uses it but it's not working. I've confirmed that the <code>attrs</code> field is changing within the scopes, but the added <code>attrs</code> never seem to be applied. I'm not 100% why, but I tried digging through the Lean source code and I haven't been able to find where the application actually happens; is there any chance that was maybe never added? It looks like the <code>attrs</code> field was introduced in <a href=\"https://github.com/leanprover/lean4/pull/8292\">https://github.com/leanprover/lean4/pull/8292</a>, and that it was mainly designed to work with <code>@[expose]</code> there (I don't see any code for generically applying them in that PR either).</p>\n<p>Does anyone have ideas? If it turns out generic application of those wasn't implemented yet but is intended, I'd be happy to work on that.</p>",
        "id": 560259386,
        "sender_full_name": "Matthew Toohey",
        "timestamp": 1764107698
    }
]