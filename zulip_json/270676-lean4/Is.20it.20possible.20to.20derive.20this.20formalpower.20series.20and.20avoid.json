[
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Nat</span>\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Real</span>\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Finset</span>\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Finsupp</span>\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">BigOperators</span>\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">PowerSeries</span>\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">MeasureTheory</span>\n\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span>\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Nat</span>\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Real</span>\n\n<span class=\"c1\">--variable (n : ℕ )</span>\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"o\">)</span>\n\n\n<span class=\"kn\">noncomputable</span><span class=\"w\"> </span><span class=\"kn\">def</span><span class=\"w\">  </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">:</span><span class=\"n\">ℕ</span><span class=\"o\">):</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\">  </span><span class=\"o\">((</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">choose</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\">  </span><span class=\"o\">)</span>\n<span class=\"kn\">noncomputable</span><span class=\"w\"> </span><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">PowerSeries</span><span class=\"bp\">.</span><span class=\"n\">mk</span><span class=\"w\"> </span><span class=\"n\">c</span>\n<span class=\"kn\">noncomputable</span><span class=\"w\"> </span><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">fsum</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">PowerSeries</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">f</span>\n\n\n\n<span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">Step9</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"o\">:</span><span class=\"n\">ℝ</span><span class=\"w\">  </span><span class=\"o\">):</span><span class=\"w\">  </span><span class=\"bp\">∫</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"o\">:</span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"bp\">..</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">∑'</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">:</span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"o\">),((</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">choose</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\">  </span><span class=\"o\">:</span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"n\">a</span><span class=\"bp\">^</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">∑'</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">:</span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"o\">),((</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">choose</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\">  </span><span class=\"o\">:</span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"n\">x</span><span class=\"bp\">^</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">):=</span><span class=\"k\">by</span>\n</code></pre></div>\n<p>Is it possible to derive this formal powerseries and avoid the summable?</p>",
        "id": 483639241,
        "sender_full_name": "SHAO YU",
        "timestamp": 1732177536
    },
    {
        "content": "<p>Please make sure your code is a <a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a> including imports</p>",
        "id": 483641294,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1732178319
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"307953\">Ruben Van de Velde</span> <a href=\"#narrow/channel/270676-lean4/topic/Is.20it.20possible.20to.20derive.20this.20formalpower.20series.20and.20avoid/near/483641294\">said</a>:</p>\n<blockquote>\n<p>Please make sure your code is a <a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a> including imports</p>\n</blockquote>\n<p>sorry ,I forgot it. Then I have updated it and add some my tries,thanks!</p>",
        "id": 483647715,
        "sender_full_name": "SHAO YU",
        "timestamp": 1732180538
    },
    {
        "content": "<p>I doubt this result is true as stated. The series won't converge for a random value of x so the integral will become meaningless and lean will assign it a junk value. Do you really want to mix power series (a concept from algebra) and integrals (a concept from analysis)? What are you actually trying to do? Perhaps a concrete question would be \"do you care about x=37 or is x supposed to be a formal variable\"?</p>",
        "id": 483841246,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1732254406
    },
    {
        "content": "<p>Some of my students tried using <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=PowerSeries#doc\">docs#PowerSeries</a> to represent analytic functions.  I wonder if it would be useful to write some comment in the doc-string of <code>PowerSeries</code> that refers to the more analytically oriented part of the library.</p>",
        "id": 483854899,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1732262343
    },
    {
        "content": "<p>To the analytical end, we have <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=FormalMultilinearSeries#doc\">docs#FormalMultilinearSeries</a>. But I am not aware of any API glue between PowerSeries and these, not documentation explaining how to interconvert.</p>",
        "id": 483898805,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1732278014
    },
    {
        "content": "<p>I agree and I think that the missing glue is precisely the reason for adding something in the doc-string to say: \"If you want to work with analytic/convergent power series, steer away from <code>PowerSeries</code> and look at <code>FormalMultilinearSeries</code> instead\".</p>",
        "id": 483930338,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1732288041
    },
    {
        "content": "<p>Thanks,I konw.I just want to tran the math processes in the paper by lean,but I failed,I cant find the tactics of  <br>\n \"integral\" or \"deriv' to deal with \"tsum\".Thanks!<br>\n<a href=\"/user_uploads/3121/M3yszhoGlfLhoXhlWz9Bn9Nk/c98ff69e1968640f0814d5e83334590.jpg\">c98ff69e1968640f0814d5e83334590.jpg</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/M3yszhoGlfLhoXhlWz9Bn9Nk/c98ff69e1968640f0814d5e83334590.jpg\" title=\"c98ff69e1968640f0814d5e83334590.jpg\"><img data-original-dimensions=\"1080x1920\" src=\"/user_uploads/thumbnail/3121/M3yszhoGlfLhoXhlWz9Bn9Nk/c98ff69e1968640f0814d5e83334590.jpg/840x560.webp\"></a></div>",
        "id": 484323525,
        "sender_full_name": "SHAO YU",
        "timestamp": 1732546735
    }
]