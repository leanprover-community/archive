[
    {
        "content": "<p>I'm still to fully understand the module system, so this may be a basic question.</p>\n<p>This mwe doesn't work if I don't make <code>myInt.init</code> public.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">module</span>\n\n<span class=\"n\">public</span><span class=\"w\"> </span><span class=\"kn\">protected</span><span class=\"w\"> </span><span class=\"n\">unsafe</span><span class=\"w\"> </span><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">myInt</span><span class=\"bp\">.</span><span class=\"n\">init</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IO</span><span class=\"w\"> </span><span class=\"n\">Int</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">pure</span><span class=\"w\"> </span><span class=\"mi\">42</span>\n\n<span class=\"kd\">@[</span><span class=\"n\">init</span><span class=\"w\"> </span><span class=\"n\">myInt</span><span class=\"bp\">.</span><span class=\"n\">init</span><span class=\"kd\">]</span><span class=\"w\"> </span><span class=\"n\">public</span><span class=\"w\"> </span><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">myInt</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Int</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">default</span>\n</code></pre></div>\n<p>Obviously, <code>myInt.init</code> is not meant to be used outside this particular module. It is also not useful to make it public in serious use cases.</p>\n<p>Is this a bug or is there a deeper reason why I need to make init code public?</p>",
        "id": 560278890,
        "sender_full_name": "François G. Dorais",
        "timestamp": 1764118714
    },
    {
        "content": "<p>No deeper reason, but is there a reason you're not using <code>initialize</code>?</p>",
        "id": 560334424,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1764146948
    },
    {
        "content": "<p>Mostly cosmetic, I think. For my use cases, the initialization code is about 100 lines with a couple of <code>where</code> definitions. Using <code>@[init]</code> seems more ergonomic than <code>initialize</code>.</p>\n<p>Is there a benefit to using <code>initialize</code> that I'm not seeing?</p>",
        "id": 560484659,
        "sender_full_name": "François G. Dorais",
        "timestamp": 1764195229
    }
]