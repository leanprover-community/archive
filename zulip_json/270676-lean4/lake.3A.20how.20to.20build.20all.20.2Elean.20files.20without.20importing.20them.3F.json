[
    {
        "content": "<p>say I make a new dep-free file <code>A.lean</code>. Unless the main project imports <code>A</code> somehow, <code>lake build</code> will just ignore <code>A.lean</code>. Is there a way to force a build across all lean files, so any errors in <code>A.lean</code> are printed? i can imagine many ways of scripting it but if there's a recommended way i'd prefer that.</p>",
        "id": 514922530,
        "sender_full_name": "Alok Singh",
        "timestamp": 1745883817
    },
    {
        "content": "<p>The way I've been doing it in FLT is to have <code>FLT.lean</code> in the root directory and to check that it contains a list of all the files in <code>FLT/</code> by running <code>lake exe mk_all</code>. Mathlib has the same system and <a href=\"https://github.com/leanprover-community/mathlib4/blob/ab000e4c8ffacfdc42e08b5467fb89c7d6888184/.github/workflows/build.yml#L163-L173\">checks</a> that <code>lake exe mk_all</code> doesn't change <code>Mathlib.lean</code> in CI. Edit: oh, as of last weekend we have the check in FLT CI as well <a href=\"https://github.com/grunweg/FLT/blob/3f0e32dcf3a79de9428b7a28c34db4299bfb898b/.github/workflows/blueprint.yml#L68-L69\">here</a>.</p>",
        "id": 514923326,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1745884231
    },
    {
        "content": "<p>I wrote a script a while ago that automatically generates top-level files that import all the contents of the folders: <a class=\"message-link\" href=\"/#narrow/channel/270676-lean4/topic/Lake.20script.20for.20automatically.20generating.20files.20with.20imports/near/370743932\">#lean4 &gt; Lake script for automatically generating files with imports @ ðŸ’¬</a>.</p>\n<p>This is slightly different from what you want, which is to build all files without any imports, but I thought I'd share this here in case it's useful nevertheless.</p>",
        "id": 514955892,
        "sender_full_name": "Anand Rao Tadipatri",
        "timestamp": 1745903100
    },
    {
        "content": "<p>You can use globs. See for instance <a href=\"https://github.com/PatrickMassot/proofs_with_lean/blob/master/lakefile.toml\">https://github.com/PatrickMassot/proofs_with_lean/blob/master/lakefile.toml</a></p>",
        "id": 514990886,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1745914155
    }
]