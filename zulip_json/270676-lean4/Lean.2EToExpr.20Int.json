[
    {
        "content": "<p>We have three instances for <code>Lean.ToExpr Int</code>:</p>\n<ul>\n<li><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Mathlib.instToExprInt_mathlib#doc\">docs#Mathlib.instToExprInt_mathlib</a> and <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=instToExprInt_qq#doc\">docs#instToExprInt_qq</a>; <code>toExpr (-1) = q(Int.negSucc 0)</code></li>\n<li><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Lean.instToExprInt#doc\">docs#Lean.instToExprInt</a>: <code>toExpr (-1) = q(-1)</code></li>\n</ul>\n<p>Does anyone remember the history here? The mathlib one looks like an accident since it's autogenerated, and the Qq one looks like it might predate the instance being in core, but perhaps there is a connection to the \"raw cast\" stuff used by <code>norm_num</code> etc.</p>",
        "id": 474914783,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1728083759
    },
    {
        "content": "<p>I (or loogle) cannot find the <code>qq</code> one.</p>",
        "id": 475285847,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1728304153
    },
    {
        "content": "<p>I deleted it yesterday in <a href=\"https://github.com/leanprover-community/quote4/pull/58\">https://github.com/leanprover-community/quote4/pull/58</a></p>",
        "id": 475285892,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1728304169
    },
    {
        "content": "<p>There are more clashes</p>",
        "id": 475286056,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1728304210
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"644391\">@loogle</span> Lean.ToExpr Lean.BinderInfo</p>",
        "id": 475286070,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1728304215
    },
    {
        "content": "<p><span aria-label=\"search\" class=\"emoji emoji-1f50d\" role=\"img\" title=\"search\">:search:</span> <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Tactic/ToExpr.html#Mathlib.instToExprBinderInfo_mathlib\">Mathlib.instToExprBinderInfo_mathlib</a>, <a href=\"https://leanprover-community.github.io/mathlib4_docs/Qq/ForLean/ToExpr.html#instToExprBinderInfo_qq\">instToExprBinderInfo_qq</a></p>",
        "id": 475286076,
        "sender_full_name": "loogle",
        "timestamp": 1728304216
    },
    {
        "content": "<p>I suspect all the clashes at least are defeq to each other</p>",
        "id": 475286154,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1728304237
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/stream/270676-lean4/topic/Lean.2EToExpr.20Int/near/475285892\">said</a>:</p>\n<blockquote>\n<p>I deleted it yesterday in <a href=\"https://github.com/leanprover-community/quote4/pull/58\">https://github.com/leanprover-community/quote4/pull/58</a></p>\n</blockquote>\n<p>My thinking here was that mathlib almost certainly has nowhere that depends on the qq instance that doesn't already import that mathlib one. If we removed the mathlib one first, we wouldn't be able to notice the effect until we also removed the qq one. Doing it the other way around makes the CI situation simpler.</p>",
        "id": 475286413,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1728304324
    },
    {
        "content": "<p>Yeah, that's likely. I don't know the history for the <code>ToExpr</code> distinction. I think it's good to try to delete the Mathlib one, and merge it if everything builds.</p>",
        "id": 475286445,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1728304333
    },
    {
        "content": "<p>The <code>Int.negSucc 0</code> interpretation is breaking <code>nightly-testing</code>, since <code>#eval</code> now can try using <code>ToExpr</code> instances to pretty print results. I'll delete the mathlib one too, unless you've already gotten to it <span class=\"user-mention\" data-user-id=\"310045\">@Eric Wieser</span></p>",
        "id": 475924541,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1728496015
    },
    {
        "content": "<p>Please do, I didn't get around to it</p>",
        "id": 475924605,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1728496042
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/17590\">#17590</a></p>",
        "id": 475925995,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1728496570
    }
]