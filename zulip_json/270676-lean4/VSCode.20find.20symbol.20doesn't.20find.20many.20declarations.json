[
    {
        "content": "<p>I just downloaded the new Lean version <code>4.27.0-rc1</code> and updated Mathlib. <br>\nI opened a near-empty file (without imports) and I tried to find <code>HasQuotient</code> with <code>ctrl+T</code> but it could find the result.<br>\nThen I tried <code>ctrl+T</code> with <code>Real</code> or <code>Real.add</code>, also not finding these results<br>\nThen I opened <code>Mathlib.Data.Real.Basic</code>, and afterwards it can find <code>Real</code> in my empty file.<br>\nSimilarly, if I open <code>Mathlib.Algebra.Quotient</code> it can find <code>Quotient</code> afterwards.</p>\n<p>Other suggestions, like <code>Real.borelSpace</code> were available from the start.<br>\nThis might have been an issue before, I just noticed it now.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">**</span><span class=\"n\">Operating</span><span class=\"w\"> </span><span class=\"n\">system</span><span class=\"bp\">**</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Linux</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">release</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mf\">6.1</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">-</span><span class=\"mf\">0.</span><span class=\"n\">deb11</span><span class=\"bp\">.</span><span class=\"m\">37</span><span class=\"bp\">-</span><span class=\"n\">amd64</span><span class=\"o\">)</span>\n<span class=\"bp\">**</span><span class=\"n\">CPU</span><span class=\"w\"> </span><span class=\"n\">architecture</span><span class=\"bp\">**</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">x64</span>\n<span class=\"bp\">**</span><span class=\"n\">CPU</span><span class=\"w\"> </span><span class=\"n\">model</span><span class=\"bp\">**</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">12</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">AMD</span><span class=\"w\"> </span><span class=\"n\">Ryzen</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"w\"> </span><span class=\"mi\">7600</span><span class=\"w\"> </span><span class=\"mi\">6</span><span class=\"bp\">-</span><span class=\"n\">Core</span><span class=\"w\"> </span><span class=\"n\">Processor</span>\n<span class=\"bp\">**</span><span class=\"n\">Available</span><span class=\"w\"> </span><span class=\"n\">RAM</span><span class=\"bp\">**</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mf\">32.75</span><span class=\"w\"> </span><span class=\"n\">GB</span>\n\n<span class=\"bp\">**</span><span class=\"n\">VS</span><span class=\"w\"> </span><span class=\"n\">Code</span><span class=\"w\"> </span><span class=\"n\">version</span><span class=\"bp\">**</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Reasonably</span><span class=\"w\"> </span><span class=\"n\">up</span><span class=\"bp\">-</span><span class=\"n\">to</span><span class=\"bp\">-</span><span class=\"n\">date</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">version</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mf\">1.106</span><span class=\"bp\">.</span><span class=\"m\">3</span><span class=\"o\">)</span>\n<span class=\"bp\">**</span><span class=\"n\">Lean</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"n\">extension</span><span class=\"w\"> </span><span class=\"n\">version</span><span class=\"bp\">**</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mf\">0.0</span><span class=\"bp\">.</span><span class=\"m\">221</span>\n<span class=\"bp\">**</span><span class=\"n\">Curl</span><span class=\"w\"> </span><span class=\"n\">installed</span><span class=\"bp\">**</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">true</span>\n<span class=\"bp\">**</span><span class=\"n\">Git</span><span class=\"w\"> </span><span class=\"n\">installed</span><span class=\"bp\">**</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">true</span>\n<span class=\"bp\">**</span><span class=\"n\">Elan</span><span class=\"bp\">**</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Reasonably</span><span class=\"w\"> </span><span class=\"n\">up</span><span class=\"bp\">-</span><span class=\"n\">to</span><span class=\"bp\">-</span><span class=\"n\">date</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">version</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mf\">4.1</span><span class=\"bp\">.</span><span class=\"m\">2</span><span class=\"o\">)</span>\n<span class=\"bp\">**</span><span class=\"n\">Lean</span><span class=\"bp\">**</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Reasonably</span><span class=\"w\"> </span><span class=\"n\">up</span><span class=\"bp\">-</span><span class=\"n\">to</span><span class=\"bp\">-</span><span class=\"n\">date</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">version</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mf\">4.27</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">-</span><span class=\"n\">rc1</span><span class=\"o\">)</span>\n<span class=\"bp\">**</span><span class=\"n\">Project</span><span class=\"bp\">**</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Valid</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"w\"> </span><span class=\"n\">project</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">path</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"kn\">local</span><span class=\"bp\">/</span><span class=\"n\">vdoorn</span><span class=\"bp\">/</span><span class=\"n\">projects</span><span class=\"bp\">/</span><span class=\"n\">mathlib</span><span class=\"o\">)</span>\n<span class=\"bp\">**</span><span class=\"n\">Active</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"w\"> </span><span class=\"n\">version</span><span class=\"bp\">**</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">leanprover</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"o\">:</span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">27</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">-</span><span class=\"n\">rc1</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">set</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"ss\">`file</span><span class=\"o\">:</span><span class=\"bp\">///</span><span class=\"kn\">local</span><span class=\"bp\">/</span><span class=\"n\">vdoorn</span><span class=\"bp\">/</span><span class=\"n\">projects</span><span class=\"bp\">/</span><span class=\"n\">mathlib</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">-</span><span class=\"n\">toolchain</span><span class=\"bp\">`</span><span class=\"o\">)</span>\n<span class=\"bp\">**</span><span class=\"n\">Installed</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"w\"> </span><span class=\"n\">versions</span><span class=\"bp\">**</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">...</span>\n</code></pre></div>",
        "id": 564453617,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1766062917
    },
    {
        "content": "<p>cc <span class=\"user-mention\" data-user-id=\"221921\">@Marc Huisinga</span></p>",
        "id": 564453647,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1766062924
    },
    {
        "content": "<p>I can't reproduce. <br>\nNote that after starting the language server, it may take a while until all the .ileans have been loaded from disc. Until that operation is complete, you get partial results. Does the issue still occur after waiting for a while?</p>",
        "id": 564456060,
        "sender_full_name": "Marc Huisinga",
        "timestamp": 1766063636
    },
    {
        "content": "<p>(Also worth pointing out: after updating Mathlib, when the <code>lean-toolchain</code> file changed and you've got new build artifacts, the language server needs to be restarted, or otherwise it might not be able to read the .ilean files because the format changed. The VS Code extension will display a prompt to restart the server in this case and the build / fetch cache commands in the extension also always restart it.)</p>",
        "id": 564457414,
        "sender_full_name": "Marc Huisinga",
        "timestamp": 1766064017
    },
    {
        "content": "<p>I did restart VSCode. Is there a way to see whether the ileans-loading is complete?</p>\n<p>I waited more than a minute (not sure exactly how long, but I believe a few minutes) on Linux.<br>\nI'll try again, and see if I can reproduce it. The behavior I saw is consistent with \"it just had only partially loaded ileans\", so that's probably it.</p>",
        "id": 564475456,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1766068511
    },
    {
        "content": "<p>It shouldn't take minutes unless there is something seriously wrong with your hardware, operating system (Windows) or anti-virus situation that significantly interferes with I/O. On my machine, the whole .ilean set of Mathlib takes a couple of seconds to load.</p>\n<p>Could you also post one of your .ileans just to check that it has the right format, e.g. <code>.lake/build/lib/lean/Mathlib/Init.ilean</code>?</p>",
        "id": 564476159,
        "sender_full_name": "Marc Huisinga",
        "timestamp": 1766068686
    }
]