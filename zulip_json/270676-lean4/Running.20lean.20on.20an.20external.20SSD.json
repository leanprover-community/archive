[
    {
        "content": "<p>My disk space on my personal computer is getting filled really quickly with lean projects so I recently bought an external drive to put all my lean projects on. However when I try to work on the files on the external drive I've never even managed to get lean to start running, the info-view just sort of hangs forever. I was wondering if I am missing something obvious? (when I ask gemini I get into long discussions about olean files etc...)</p>",
        "id": 574731424,
        "sender_full_name": "Dhyan Aranha",
        "timestamp": 1771508809
    },
    {
        "content": "<p>I've never tried this, but I think informing your operating system is important here</p>",
        "id": 574733190,
        "sender_full_name": "Arthur Paulino",
        "timestamp": 1771509266
    },
    {
        "content": "<p>I'd recommend keeping a local lean install and moving projects to the SSD</p>",
        "id": 574733741,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1771509407
    },
    {
        "content": "<p>In what sense do you mean \"informing\"?</p>",
        "id": 574733744,
        "sender_full_name": "Dhyan Aranha",
        "timestamp": 1771509407
    },
    {
        "content": "<p>As long as the disk and your machine have the same filesystem, things should be fine</p>",
        "id": 574733851,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1771509435
    },
    {
        "content": "<p>I think everything has the same file system. I'm running Mac OS and I configured my external hard disk to APFS</p>",
        "id": 574734468,
        "sender_full_name": "Dhyan Aranha",
        "timestamp": 1771509572
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"466334\">Shreyas Srinivas</span> <a href=\"#narrow/channel/270676-lean4/topic/Running.20lean.20on.20an.20external.20SSD/near/574733851\">said</a>:</p>\n<blockquote>\n<p>As long as the disk and your machine have the same filesystem, things should be fine</p>\n</blockquote>\n<p>That doesn't matter at all.</p>\n<p><span class=\"user-mention silent\" data-user-id=\"751471\">Dhyan Aranha</span> <a href=\"#narrow/channel/270676-lean4/topic/Running.20lean.20on.20an.20external.20SSD/near/574731424\">said</a>:</p>\n<blockquote>\n<p>My disk space on my personal computer is getting filled really quickly with lean projects so I recently bought an external drive to put all my lean projects on. However when I try to work on the files on the external drive I've never even managed to get lean to start running, the info-view just sort of hangs forever. I was wondering if I am missing something obvious? (when I ask gemini I get into long discussions about olean files etc...)</p>\n</blockquote>\n<p>Can you at least get the projects to work from the CLI? So for example run <code>lake build</code> manually in them?</p>",
        "id": 574735867,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1771509904
    },
    {
        "content": "<p>Not your question, but to clear up disk space, feel free to </p>\n<ul>\n<li>delete the <code>.lake</code> folder in old projects</li>\n<li>delete old/all cache files in <code>~/.cache/mathlib</code></li>\n<li>delete old/all toolchains in <code>~/.elan/toolchains</code> (in this case, I'm not sure if it's important to also delete the corresponding <code>~/.elan/update-hashes</code>)</li>\n</ul>\n<p>Lean will redownload these things when you need it again.</p>",
        "id": 574736408,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1771510026
    },
    {
        "content": "<p>Don't know if this is the issue but when I tried this, it turned out that my external SSD had far slower r/w speed, so the part of <code>lake exe cache get</code> where Lean decompressed 7000 files would sometimes take many minutes, giving the impression that something had hung. What I do now is that I store many barely-used projects on my SSD (where I have lots of space so don't need to delete <code>.lake</code> and which I occasionally run but never bump) and I leave the two projects which I work mostly on (mathlib and FLT), and where I am constantly updating oleans, on my hard drive (which is much quicker for r/w operations).</p>",
        "id": 574736703,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1771510096
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"395550\">Henrik Böving</span> <a href=\"#narrow/channel/270676-lean4/topic/Running.20lean.20on.20an.20external.20SSD/near/574735867\">said</a>:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">Can</span><span class=\"w\"> </span><span class=\"n\">you</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">least</span><span class=\"w\"> </span><span class=\"n\">get</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">projects</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">work</span><span class=\"w\"> </span><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">CLI?</span><span class=\"w\"> </span><span class=\"n\">So</span><span class=\"w\"> </span><span class=\"n\">for</span><span class=\"w\"> </span><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"n\">run</span><span class=\"w\"> </span><span class=\"ss\">`lake</span><span class=\"w\"> </span><span class=\"n\">build</span><span class=\"bp\">`</span><span class=\"w\"> </span><span class=\"n\">manually</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">them?</span>\n</code></pre></div>\n<p>When I run lake build I get the message: \"Build completed successfully\",  but the little circle in the info-view just turns forever. </p>\n<p><span class=\"user-mention\" data-user-id=\"111080\">@Floris van Doorn</span> , <span class=\"user-mention\" data-user-id=\"110038\">@Kevin Buzzard</span>  Thanks for the tips!</p>",
        "id": 574748996,
        "sender_full_name": "Dhyan Aranha",
        "timestamp": 1771512948
    },
    {
        "content": "<p>A second piece of advice might be to set the <code>$MATHLIB_CACHE_DIR</code> environment variable, or arguably the <code>$XDG_CACHE_DIR</code> variable entirely, to be a directory on your larger disk. But this also won't solve your current problem -- to be clear, if you just create a single empty file on the external drive with no imports and you open it and put <code>#check 37</code> in it, you get nothing in your infoview?</p>",
        "id": 574752425,
        "sender_full_name": "Julian Berman",
        "timestamp": 1771513693
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"395550\">Henrik Böving</span> <a href=\"#narrow/channel/270676-lean4/topic/Running.20lean.20on.20an.20external.20SSD/near/574735867\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"466334\">Shreyas Srinivas</span> <a href=\"#narrow/channel/270676-lean4/topic/Running.20lean.20on.20an.20external.20SSD/near/574733851\">said</a>:</p>\n<blockquote>\n<p>As long as the disk and your machine have the same filesystem, things should be fine</p>\n</blockquote>\n<p>That doesn't matter at all.</p>\n</blockquote>\n<p>Fair enough. This is just my setup where things work fine. So it's a sufficient set of conditions to make things work. Maybe not necessary ones.</p>",
        "id": 574752929,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1771513826
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"321696\">Julian Berman</span> <a href=\"#narrow/channel/270676-lean4/topic/Running.20lean.20on.20an.20external.20SSD/near/574752425\">said</a>:</p>\n<blockquote>\n<p>A second piece of advice might be to set the <code>$MATHLIB_CACHE_DIR</code> environment variable, or arguably the <code>$XDG_CACHE_DIR</code> variable entirely, to be a directory on your larger disk. But this also won't solve your current problem -- to be clear, if you just create a single empty file on the external drive with no imports and you open it and put <code>#check 37</code> in it, you get nothing in your infoview?</p>\n</blockquote>\n<p>Hey Julian! Yeah that's correct, I just made a new lean file with no imports and in the info view it says \"no info found\"</p>",
        "id": 574755282,
        "sender_full_name": "Dhyan Aranha",
        "timestamp": 1771514398
    },
    {
        "content": "<p>Hmmm interesting. I don't have any immediate ideas honestly. If you click on the buttons in the forall menu when you have a file on the external drive open:</p>\n<p><a href=\"/user_uploads/3121/Fv4ABVzp5Tl2III5AGBSMAV0/Screenshot-2026-02-19-at-18.21.06.png\">Screenshot 2026-02-19 at 18.21.06.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/Fv4ABVzp5Tl2III5AGBSMAV0/Screenshot-2026-02-19-at-18.21.06.png\" title=\"Screenshot 2026-02-19 at 18.21.06.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"376x322\" src=\"/user_uploads/thumbnail/3121/Fv4ABVzp5Tl2III5AGBSMAV0/Screenshot-2026-02-19-at-18.21.06.png/840x560.webp\"></a></div><p>Specifically the \"show troubleshooting output\" and \"show setup information\" ones, do either have anything interesting looking in them?</p>",
        "id": 574839748,
        "sender_full_name": "Julian Berman",
        "timestamp": 1771543315
    },
    {
        "content": "<p>And, I know you said you are on macOS so I assume not, but just to check, you don't have any endpoint \"security\" malware installed do you? JAMF, some other university related thing posing as antivirus, etc. etc.?</p>",
        "id": 574839853,
        "sender_full_name": "Julian Berman",
        "timestamp": 1771543361
    }
]