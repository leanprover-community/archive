[
    {
        "content": "<p>Sometimes I run <code>lake build</code> accidentally and it starts building Mathlib + prerequisites. If I then run <code>lake exe cache get</code>, this cache is not actually usable. Only <code>lake exe cache get!</code> will get me a working cache.</p>\n<ul>\n<li>Is this the same on Linux?</li>\n<li>Why does this happen / is this fixable?</li>\n</ul>\n<p>Here is an example shell session displaying this (the first two occurrences of <code>lake build</code> are interrupted):</p>\n<div class=\"codehilite\" data-code-language=\"Bash Session\"><pre><span></span><code><span class=\"go\">Floris@Dell-E MINGW64 ~/projects/mathlib ((c138fdc9e6e...))</span>\n<span class=\"gp\">$ </span>git<span class=\"w\"> </span>checkout<span class=\"w\"> </span>origin/master\n<span class=\"go\">Updating files: 100% (2947/2947), done.</span>\n<span class=\"go\">Previous HEAD position was c138fdc9e6e chore: no need to pass autoParam to simp or dsimp (#15968)</span>\n<span class=\"go\">HEAD is now at 4591e55bbcc feat(CategoryTheory): simps for `conjugateEquiv` plus computable `conjugateIsoEquiv` (#17108)</span>\n\n<span class=\"go\">Floris@Dell-E MINGW64 ~/projects/mathlib ((4591e55bbcc...))</span>\n<span class=\"gp\">$ </span>lake<span class=\"w\"> </span>build\n<span class=\"go\">info: batteries: updating repository '.\\.\\.lake/packages\\batteries' to revision '6d5e1c81277e960372c94f19172440e39b3c5980'</span>\n<span class=\"go\">info: Qq: updating repository '.\\.\\.lake/packages\\Qq' to revision '2c8ae451ce9ffc83554322b14437159c1a9703f9'</span>\n<span class=\"go\">info: aesop: updating repository '.\\.\\.lake/packages\\aesop' to revision 'a895713f7701e295a015b1087f3113fd3d615272'</span>\n<span class=\"go\">info: proofwidgets: updating repository '.\\.\\.lake/packages\\proofwidgets' to revision 'eb08eee94098fe530ccd6d8751a86fe405473d4c'</span>\n<span class=\"go\">info: importGraph: URL has changed; you might need to delete '.\\.\\.lake/packages\\importGraph' manually</span>\n<span class=\"go\">info: importGraph: updating repository '.\\.\\.lake/packages\\importGraph' to revision 'fb7841a6f4fb389ec0e47dd4677844d49906af3c'</span>\n<span class=\"go\">info: LeanSearchClient: cloning https://github.com/leanprover-community/LeanSearchClient to '.\\.\\.lake/packages\\LeanSearchClient'</span>\n<span class=\"go\">✔ [4/5125] (Optional) Fetched proofwidgets:optRelease</span>\n<span class=\"go\">✔ [8/5125] Built Batteries.Lean.HashSet</span>\n<span class=\"go\">✔ [9/5125] Built Batteries.Tactic.Lint.Basic</span>\n<span class=\"go\">✔ [10/5125] Built Batteries.Tactic.OpenPrivate</span>\n<span class=\"go\">✔ [11/5125] Built Batteries.Util.LibraryNote</span>\n<span class=\"go\">✔ [12/5125] Built Batteries.Tactic.Lint.TypeClass</span>\n<span class=\"go\">✔ [13/5125] Built Batteries.Tactic.Unreachable</span>\n<span class=\"go\">✔ [14/5125] Built Batteries.CodeAction.Attr</span>\n<span class=\"go\">✔ [15/5125] Built Batteries.Lean.Position</span>\n<span class=\"go\">✔ [16/5125] Built Batteries.Lean.NameMapAttribute</span>\n<span class=\"go\">✔ [17/5125] Built Batteries.Lean.Expr</span>\n<span class=\"go\">✔ [18/5125] Built Batteries.Data.Nat.Gcd</span>\n<span class=\"go\">✔ [19/5125] Built Batteries.Lean.Float</span>\n<span class=\"go\">✔ [20/5125] Built Batteries.Data.Rat.Basic</span>\n<span class=\"go\">✔ [21/5125] Built Batteries.Data.String.Basic</span>\n<span class=\"go\">✔ [22/5125] Built Batteries.Tactic.SeqFocus</span>\n<span class=\"go\">✔ [23/5125] Built Batteries.Util.ExtendedBinder</span>\n<span class=\"go\">✔ [24/5125] Built Batteries.Tactic.Init</span>\n<span class=\"go\">✔ [25/5125] Built Batteries.Data.Sum.Basic</span>\n<span class=\"go\">✔ [26/5125] Built Batteries.Tactic.Classical</span>\n<span class=\"go\">✔ [27/5125] Built Batteries.Linter.UnreachableTactic</span>\n<span class=\"go\">✔ [28/5125] Built Batteries.Lean.Syntax</span>\n<span class=\"go\">✔ [29/5125] Built Aesop.Check</span>\n<span class=\"go\">✔ [30/5125] Built Aesop.Nanos</span>\n<span class=\"go\">✔ [31/5125] Built Batteries.Data.Array.Init.Lemmas</span>\n<span class=\"go\">✔ [32/5125] Built Batteries.Data.Array.Basic</span>\n<span class=\"go\">✔ [33/5125] Built Aesop.Rule.Name</span>\n<span class=\"go\">✔ [34/5125] Built Aesop.Percent</span>\n<span class=\"go\">✔ [35/5125] Built Batteries.Lean.Meta.Basic</span>\n<span class=\"go\">✔ [36/5125] Built Batteries.Lean.MonadBacktrack</span>\n<span class=\"go\">✔ [37/5125] Built Batteries.Data.List.Init.Lemmas</span>\n<span class=\"go\">✔ [38/5125] Built Batteries.Lean.PersistentHashSet</span>\n<span class=\"go\">✔ [39/5125] Built Batteries.Lean.Meta.Expr</span>\n<span class=\"go\">✔ [40/5125] Built Batteries.Lean.PersistentHashMap</span>\n<span class=\"go\">✔ [41/5125] Built Batteries.Lean.Meta.Inaccessible</span>\n<span class=\"go\">✔ [42/5125] Built Batteries.Lean.Meta.UnusedNames</span>\n<span class=\"go\">✔ [43/5125] Built Batteries.Lean.Meta.AssertHypotheses</span>\n<span class=\"go\">✔ [44/5125] Built Aesop.Search.Expansion.Simp</span>\n<span class=\"go\">✔ [45/5125] Built Aesop.Constants</span>\n<span class=\"go\">✔ [46/5125] Built Batteries.Control.ForInStep.Basic</span>\n<span class=\"go\">✔ [47/5125] Built Batteries.Lean.TagAttribute</span>\n<span class=\"go\">✔ [48/5125] Built Batteries.Util.ProofWanted</span>\n<span class=\"go\">✔ [49/5125] Built Batteries.Lean.Except</span>\n<span class=\"go\">✔ [51/5125] Built Batteries.Tactic.Exact</span>\n<span class=\"go\">✔ [52/5125] Built Batteries.WF</span>\n<span class=\"go\">✔ [53/5125] Built Batteries.Classes.Order</span>\n<span class=\"go\">✔ [54/5125] Built Batteries.CodeAction.Basic</span>\n<span class=\"go\">✔ [55/5125] Built Batteries.Tactic.Lint.Misc</span>\n<span class=\"go\">✔ [56/5125] Built Qq.SortLocalDecls</span>\n<span class=\"go\">✔ [57/5125] Built Batteries.Lean.Meta.Clear</span>\n<span class=\"go\">✔ [58/5125] Built Aesop.RuleSet.Name</span>\n<span class=\"go\">✔ [60/5125] Built Aesop.Script.Tactic</span>\n<span class=\"go\">✔ [61/5125] Built Aesop.Script.GoalWithMVars</span>\n<span class=\"go\">✔ [62/5125] Built Aesop.ElabM</span>\n<span class=\"go\">✔ [63/5125] Built Aesop.Util.Tactic</span>\n<span class=\"go\">✔ [64/5125] Built Aesop.Frontend.Basic</span>\n<span class=\"go\">✔ [65/5125] Built Aesop.Exception</span>\n<span class=\"go\">✔ [66/5125] Built Qq.ForLean.ToExpr</span>\n<span class=\"go\">✔ [67/5125] Built Qq.Typ</span>\n<span class=\"go\">✔ [68/5125] Built Qq.ForLean.Do</span>\n<span class=\"go\">✔ [69/5125] Built Batteries.Lean.Meta.InstantiateMVars</span>\n<span class=\"go\">✔ [70/5125] Built Aesop.RuleTac.FVarIdSubst</span>\n<span class=\"go\">✔ [71/5125] Built Aesop.Script.OptimizeSyntax</span>\n<span class=\"go\">✔ [72/5125] Built Aesop.Util.UnionFind</span>\n<span class=\"go\">✔ [73/5125] Built Qq.ForLean.ReduceEval</span>\n<span class=\"go\">✔ [74/5125] Built Batteries.Lean.NameMap</span>\n<span class=\"go\">✔ [76/5125] Built Aesop.Options.Public</span>\n<span class=\"go\">✔ [77/5125] Built Batteries.Lean.Meta.SavedState</span>\n<span class=\"go\">✔ [78/5125] Built Batteries.Data.Nat.Basic</span>\n<span class=\"go\">✔ [79/5125] Built Batteries.Data.Array.Match</span>\n<span class=\"go\">✔ [80/5125] Built LeanSearchClient.Basic</span>\n<span class=\"go\">✔ [81/5125] Built Batteries.Tactic.Congr</span>\n<span class=\"go\">✔ [82/5125] Built Batteries.Data.Fin.Basic</span>\n<span class=\"go\">✔ [83/5125] Built Batteries.Tactic.Lint.Frontend</span>\n<span class=\"go\">✔ [84/5125] Built Batteries.Control.Lemmas</span>\n<span class=\"go\">✔ [85/5125] Built Batteries.Util.Cache</span>\n<span class=\"go\">✔ [86/5125] Built Batteries.Lean.HashMap</span>\n<span class=\"go\">✔ [87/5125] Built Batteries.Data.FloatArray</span>\n<span class=\"go\">✔ [88/5125] Built Batteries.Lean.System.IO</span>\n\n\n<span class=\"go\">Floris@Dell-E MINGW64 ~/projects/mathlib ((4591e55bbcc...))</span>\n<span class=\"gp\">$ </span>lake<span class=\"w\"> </span>exe<span class=\"w\"> </span>cache<span class=\"w\"> </span>get\n<span class=\"go\">✔ [10/18] Built Cache.IO</span>\n<span class=\"go\">✔ [11/18] Built Cache.Hashing</span>\n<span class=\"go\">✔ [12/18] Built Cache.Requests</span>\n<span class=\"go\">✔ [13/18] Built Cache.Hashing:c.o</span>\n<span class=\"go\">✔ [14/18] Built Cache.Main</span>\n<span class=\"go\">✔ [15/18] Built Cache.Requests:c.o</span>\n<span class=\"go\">✔ [16/18] Built Cache.Main:c.o</span>\n<span class=\"go\">✔ [17/18] Built Cache.IO:c.o</span>\n<span class=\"go\">✔ [18/18] Built cache</span>\n<span class=\"go\">Attempting to download 5113 file(s)</span>\n<span class=\"go\">Downloaded: 5113 file(s) [attempted 5113/5113 = 100%] (100% success)</span>\n<span class=\"go\">Decompressing 5113 file(s)</span>\n<span class=\"go\">Unpacked in 42377 ms</span>\n<span class=\"go\">Completed successfully!</span>\n\n<span class=\"go\">Floris@Dell-E MINGW64 ~/projects/mathlib ((4591e55bbcc...))</span>\n<span class=\"gp\">$ </span>lake<span class=\"w\"> </span>build\n<span class=\"go\">✔ [726/5125] Built Qq.Macro</span>\n<span class=\"go\">✔ [727/5125] Built Mathlib.Tactic.Eval</span>\n<span class=\"go\">✔ [728/5125] Built Qq.Delab</span>\n<span class=\"go\">✔ [729/5125] Built Qq.MetaM</span>\n<span class=\"go\">✔ [730/5125] Built Mathlib.Tactic.Nontriviality.Core</span>\n<span class=\"go\">✔ [731/5125] Built Mathlib.Tactic.Nontriviality</span>\n\n\n<span class=\"go\">Floris@Dell-E MINGW64 ~/projects/mathlib ((4591e55bbcc...))</span>\n<span class=\"gp\">$ </span>lake<span class=\"w\"> </span>exe<span class=\"w\"> </span>cache<span class=\"w\"> </span>get!\n<span class=\"go\">Attempting to download 5113 file(s)</span>\n<span class=\"go\">Downloaded: 5113 file(s) [attempted 5113/5113 = 100%] (100% success)</span>\n<span class=\"go\">Decompressing 5113 file(s)</span>\n<span class=\"go\">Unpacked in 45896 ms</span>\n<span class=\"go\">Completed successfully!</span>\n\n<span class=\"go\">Floris@Dell-E MINGW64 ~/projects/mathlib ((4591e55bbcc...))</span>\n<span class=\"gp\">$ </span>lake<span class=\"w\"> </span>build\n<span class=\"go\">Build completed successfully.</span>\n</code></pre></div>",
        "id": 472660685,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1727259537
    },
    {
        "content": "<p>I have observed this also on Linux: sometimes, <code>lake exe cache get; lake build</code> does actually build from somewhere.  Usually, removing the cache and redownloading fixes it.</p>",
        "id": 472660927,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1727259615
    },
    {
        "content": "<p>I usually assume that the reason is that some <code>olean</code>s got corrupted in the download...</p>",
        "id": 472660979,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1727259638
    },
    {
        "content": "<p>I think it's the interaction between the built oleans and the downloaded ones. I consistently have this problem after a partial <code>lake build</code>, but almost never without it.</p>",
        "id": 472661111,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1727259686
    },
    {
        "content": "<p>I also  observed this, usually what I do is checkout to <code>master</code>, <code>git pull</code>, download the cache, checkout back to the branch and merge <code>master</code> and that usually fixes it</p>",
        "id": 472661222,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1727259719
    },
    {
        "content": "<p>Or maybe interrupting a <code>lake build</code> creates a corrupted <code>.olean</code> file that <code>lake exe cache get</code> recognizes as \"correct\", so doesn't replace it?</p>",
        "id": 472661340,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1727259750
    },
    {
        "content": "<p>I never got to the bottom of it, but since removing the old cache and re-downloading is almost always successful, I never investigated it further.</p>",
        "id": 472663428,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1727260484
    },
    {
        "content": "<p>Is this consistent? I mean, does it happen everytime you interrupt <code>lake build</code>?</p>\n<p>Edit: I just read that you mentioned that you consistently have this issue after a partial <code>lake build</code></p>",
        "id": 472680956,
        "sender_full_name": "Arthur Paulino",
        "timestamp": 1727266056
    },
    {
        "content": "<p>I think it's unlikely that you're getting corrupted <code>olean</code> files because that would require you to interrupt the process while writing the file to your file system. And the bottleneck of <code>lake build</code> shouldn't be there.</p>\n<p>I'm not saying it's impossible, but it wouldn't be my first line of investigation. Especially given that this behavior is consistent.</p>",
        "id": 472681276,
        "sender_full_name": "Arthur Paulino",
        "timestamp": 1727266183
    },
    {
        "content": "<p>Yes, I've had this many times, and I think it's consistent. The place where the build continues after <code>lake exe cache get</code> seems random-ish. Please reproduce my above steps to see whether it also consistently happens for you.</p>",
        "id": 472694489,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1727270004
    },
    {
        "content": "<p>I can't reproduce on Linux in 1/1 tries</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">$</span><span class=\"w\"> </span><span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"n\">build</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">batteries</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">updating</span><span class=\"w\"> </span><span class=\"n\">repository</span><span class=\"w\"> </span><span class=\"bp\">'././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">batteries'</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">revision</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"mi\">6</span><span class=\"n\">d5e1c81277e960372c94f19172440e39b3c5980'</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">aesop</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">updating</span><span class=\"w\"> </span><span class=\"n\">repository</span><span class=\"w\"> </span><span class=\"bp\">'././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">aesop'</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">revision</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">a895713f7701e295a015b1087f3113fd3d615272'</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">importGraph</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">updating</span><span class=\"w\"> </span><span class=\"n\">repository</span><span class=\"w\"> </span><span class=\"bp\">'././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">importGraph'</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">revision</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">fb7841a6f4fb389ec0e47dd4677844d49906af3c'</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">LeanSearchClient</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">updating</span><span class=\"w\"> </span><span class=\"n\">repository</span><span class=\"w\"> </span><span class=\"bp\">'././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">LeanSearchClient'</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">revision</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"mi\">2</span><span class=\"n\">ba60fa2c384a94735454db11a2d523612eaabff'</span>\n<span class=\"bp\">⡿</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">192</span><span class=\"bp\">/</span><span class=\"mi\">5127</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Running</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span><span class=\"bp\">.</span><span class=\"n\">Linter</span><span class=\"bp\">.</span><span class=\"n\">Lint</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">9</span><span class=\"w\"> </span><span class=\"n\">more</span><span class=\"o\">)</span><span class=\"bp\">^</span><span class=\"n\">C</span>\n<span class=\"w\"> </span><span class=\"bp\">✘</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"w\"> </span><span class=\"n\">time</span><span class=\"w\"> </span><span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"n\">exe</span><span class=\"w\"> </span><span class=\"n\">cache</span><span class=\"w\"> </span><span class=\"n\">get</span>\n<span class=\"n\">Attempting</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">download</span><span class=\"w\"> </span><span class=\"mi\">5115</span><span class=\"w\"> </span><span class=\"n\">file</span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"o\">)</span>\n<span class=\"n\">Downloaded</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">5115</span><span class=\"w\"> </span><span class=\"n\">file</span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">attempted</span><span class=\"w\"> </span><span class=\"mi\">5115</span><span class=\"bp\">/</span><span class=\"mi\">5115</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">100</span><span class=\"bp\">%</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">100</span><span class=\"bp\">%</span><span class=\"w\"> </span><span class=\"n\">success</span><span class=\"o\">)</span>\n<span class=\"n\">Decompressing</span><span class=\"w\"> </span><span class=\"mi\">5115</span><span class=\"w\"> </span><span class=\"n\">file</span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"o\">)</span>\n<span class=\"n\">Unpacked</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"mi\">3262</span><span class=\"w\"> </span><span class=\"n\">ms</span>\n<span class=\"n\">Completed</span><span class=\"w\"> </span><span class=\"n\">successfully!</span>\n<span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"n\">exe</span><span class=\"w\"> </span><span class=\"n\">cache</span><span class=\"w\"> </span><span class=\"n\">get</span><span class=\"w\">  </span><span class=\"mf\">26.45</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"n\">user</span><span class=\"w\"> </span><span class=\"mf\">15.05</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"n\">system</span><span class=\"w\"> </span><span class=\"mi\">127</span><span class=\"bp\">%</span><span class=\"w\"> </span><span class=\"n\">cpu</span><span class=\"w\"> </span><span class=\"mf\">32.548</span><span class=\"w\"> </span><span class=\"n\">total</span>\n<span class=\"bp\">$</span><span class=\"w\"> </span><span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"n\">build</span>\n<span class=\"n\">Build</span><span class=\"w\"> </span><span class=\"n\">completed</span><span class=\"w\"> </span><span class=\"n\">successfully</span><span class=\"bp\">.</span>\n</code></pre></div>\n<p>Could you try running <code>diff -r</code> on a broken and working copy of <code>.lake</code>?</p>",
        "id": 472721915,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1727277557
    },
    {
        "content": "<p>On two copies of Mathlib that I've both been using for a few years, this produces 30+MB of output (and counting). Not sure how much that is old files that are not being cleaned up. Shall I send it, or shall I create 2 fresh clones of Mathlib and do the diff?</p>",
        "id": 472724548,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1727278308
    },
    {
        "content": "<p>Ah, this could be due to history in all the <code>.git</code>s and other \"orphan\" files. Two fresh clones would be best I'd say.</p>",
        "id": 472725601,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1727278636
    },
    {
        "content": "<p>Here is the output (and the precise commands used to produce this output):<br>\n<a href=\"https://gist.github.com/fpvandoorn/a4599b27d2b632c435cd66e409236f19\">https://gist.github.com/fpvandoorn/a4599b27d2b632c435cd66e409236f19</a></p>",
        "id": 472729277,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1727279770
    },
    {
        "content": "<p>It seems that a bunch of hashes are different.</p>",
        "id": 472729342,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1727279792
    },
    {
        "content": "<p>(My 2c is that I use Linux and I've not seen problems of this nature for quite some time)</p>",
        "id": 472787889,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1727306593
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"111080\">Floris van Doorn</span> <a href=\"#narrow/stream/270676-lean4/topic/lake.20exe.20cache.20get.20after.20lake.20build/near/472729342\">said</a>:</p>\n<blockquote>\n<p>It seems that a bunch of hashes are different.</p>\n</blockquote>\n<p>Thanks, and indeed one of the files is notable in containing e.g. <code>2^64</code> which points to <a href=\"https://github.com/leanprover/lean4/pull/5144\">lean#5144</a></p>",
        "id": 472847955,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1727341277
    },
    {
        "content": "<p>I actually get a similar problem when I work on mathlib PR's. If I download the cache for one, finish working on it, and then switch and download it for the other, high chances (not 100%, something between 90% and 95%) are that I need a <code>lake exe cache get!</code> to start working on the second one. Is this related?</p>",
        "id": 473334215,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1727522932
    },
    {
        "content": "<p>I've never seen this (I mean, recently) and I do this sort of thing too. Are you on Windows? I'm on Ubuntu.</p>",
        "id": 474985775,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1728138457
    },
    {
        "content": "<p>Yes, on Win.</p>",
        "id": 475132441,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1728242989
    }
]