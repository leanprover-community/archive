[
    {
        "content": "<p>When trying to use the lean flag <code>--memory</code> in order to limit the memory used by Lean I encounter an error. <br>\nExample command:<br>\n<code>lake env lean --memory=32678 test_file.lean</code><br>\nOutput:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">&lt;</span><span class=\"n\">input</span><span class=\"bp\">&gt;</span><span class=\"o\">:</span><span class=\"mi\">1</span><span class=\"o\">:</span><span class=\"mi\">0</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">invalid</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">D</span><span class=\"w\"> </span><span class=\"n\">parameter</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">unknown</span><span class=\"w\"> </span><span class=\"n\">configuration</span><span class=\"w\"> </span><span class=\"n\">option</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">max_memory'</span>\n\n<span class=\"n\">If</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">option</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">defined</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"n\">library</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">use</span><span class=\"w\"> </span><span class=\"bp\">'-</span><span class=\"n\">Dweak</span><span class=\"bp\">.</span><span class=\"n\">max_memory'</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">set</span><span class=\"w\"> </span><span class=\"n\">it</span><span class=\"w\"> </span><span class=\"n\">conditionally</span>\n</code></pre></div>\n<p>It happens with every file, but here is an example file:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">blah</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"bp\">Ã—</span><span class=\"w\"> </span><span class=\"n\">Nat</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">asd</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">blah</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"bp\">.</span><span class=\"n\">fst</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"bp\">.</span><span class=\"n\">fst</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"bp\">.</span><span class=\"n\">fst</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"bp\">.</span><span class=\"n\">snd</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">False</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"k\">by</span>\n<span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>Used versions are as follows:</p>\n<ul>\n<li>Lake version 5.0.0-6741444 </li>\n<li>Lean version 4.21.0</li>\n</ul>\n<p>The same happens with a newer version of Lean as well. Have anyone experienced such an error and can this flag be used in some way?</p>",
        "id": 533246635,
        "sender_full_name": "Ralitsa Dardjonova",
        "timestamp": 1754556554
    },
    {
        "content": "<p>The suggestion in the error messages appears to work as a workaround</p>\n<div class=\"codehilite\" data-code-language=\"Text only\"><pre><span></span><code>lake env lean -Dweak.max_memory=32768 test_file.lean\n</code></pre></div>",
        "id": 533324197,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1754583269
    },
    {
        "content": "<p>This appears to be a bug; please create an issue on GitHub <a href=\"https://github.com/leanprover/lean4/issues\">https://github.com/leanprover/lean4/issues</a></p>",
        "id": 533324333,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1754583315
    },
    {
        "content": "<p>Thank you very much, I will. I am rather new to lean and wasn't sure.</p>",
        "id": 534009320,
        "sender_full_name": "Ralitsa Dardjonova",
        "timestamp": 1755013716
    }
]