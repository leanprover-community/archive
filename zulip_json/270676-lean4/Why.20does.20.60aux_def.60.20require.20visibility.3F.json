[
    {
        "content": "<p><code>aux_def</code> requires explicit visibility (e.g. <code>private aux_def</code> or <code>public aux_def</code>), but I'm not sure why.</p>\n<p>To <a href=\"https://en.wikipedia.org/wiki/XY_problem\">#xy</a>, I'm dealing with a metaprogram which uses a macro for <code>aux_def</code> (here, mathlib's <code>notation3</code>), and wondering if it's appropriate to infer the visibility to use for <code>aux_def</code> by asking for <code>isPrivateName (‚Üê getDeclNGen).namePrefix</code>. (See <a href=\"https://github.com/leanprover-community/mathlib4/pull/32749\">#32749</a>.) But this makes me wonder if there's a reason <code>aux_def</code> doesn't do this by itself, and therefore a reason I shouldn't. :)</p>",
        "id": 563249294,
        "sender_full_name": "Thomas Murrills",
        "timestamp": 1765474962
    },
    {
        "content": "<p>Re: <a href=\"https://en.wikipedia.org/wiki/XY_problem\">#xy</a>: I think I've realized my mistake there. It seems that commands which create meta defs like <code>syntax</code> and <code>macro_rules</code> uniformly use <code>local</code> to indicate private visibility; likewise, my sense is that we should use <code>private aux_def</code> if the <code>attrKind</code> is <code>local</code>, and <code>public</code> otherwise.</p>\n<p>I suppose this explains why we want to insist on the metaprogrammer passing in the visibility explicitly?</p>",
        "id": 563257516,
        "sender_full_name": "Thomas Murrills",
        "timestamp": 1765477587
    },
    {
        "content": "<p>Yes, exactly</p>",
        "id": 563409833,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1765527160
    }
]