[
    {
        "content": "<p>There are cases where I should compute on definition of types, like <code>{n : Nat} -&gt; Fin (2 * n)</code>. In such cases when <code>n</code> is given some value, for example <code>n = 0</code>, <code>Fin (2 * 0)</code> is not considered the same as <code>Fin 0</code>. What is the most idiomatic way to deal with this?</p>",
        "id": 533154643,
        "sender_full_name": "Jihoon Hyun",
        "timestamp": 1754503062
    },
    {
        "content": "<p><code>Fin (2 * 0)</code> is considered the same as <code>Fin 0</code></p>",
        "id": 533154836,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1754503152
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Fin.cast#doc\">docs#Fin.cast</a> is usually what you would insert, when it's necessary</p>",
        "id": 533155699,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1754503483
    },
    {
        "content": "<p>so usually you will have some sort of cast functions for types that look like <code>F x</code></p>",
        "id": 533155750,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1754503503
    },
    {
        "content": "<p>where <code>x</code> is a term that is not a type</p>",
        "id": 533155822,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1754503540
    },
    {
        "content": "<p>(Sometimes there are other functions for casting when types are involved, like <code>List</code> has <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=List.map#doc\">docs#List.map</a>)</p>",
        "id": 533156142,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1754503678
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"306601\">Kyle Miller</span> <a href=\"#narrow/channel/270676-lean4/topic/Idiomatic.20way.20to.20compute.20things.20on.20types/near/533155699\">ÎßêÌï®</a>:</p>\n<blockquote>\n<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Fin.cast#doc\">docs#Fin.cast</a> is usually what you would insert, when it's necessary</p>\n</blockquote>\n<p>Yes, I would insert <code>X.cast</code> in such scenarios for any reasonable <code>X</code>, but...</p>\n<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> <a href=\"#narrow/channel/270676-lean4/topic/Idiomatic.20way.20to.20compute.20things.20on.20types/near/533154836\">ÎßêÌï®</a>:</p>\n<blockquote>\n<p><code>Fin (2 * 0)</code> is considered the same as <code>Fin 0</code></p>\n</blockquote>\n<p>Then why does lean fail to convert from <code>Fin (2 * 0)</code> to <code>Fin 0</code> in place? This makes some confusion when looking at the infoview.</p>",
        "id": 533157248,
        "sender_full_name": "Jihoon Hyun",
        "timestamp": 1754504225
    },
    {
        "content": "<p>Hmm I'm not sure where exactly you have errors but:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">x</span>\n</code></pre></div>\n<p>works. If it's part of a function application this might be different though <code>show Fin 0 from x</code> (where <code>x : Fin (2 * 0)</code>) should still work then</p>",
        "id": 533157957,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1754504520
    },
    {
        "content": "<p><code>Fin (2 * 0)</code> and <code>Fin 0</code> are definitionally equal, but that doesn't mean that Lean will reduce the types in the Infoview.</p>\n<p>In this case you could use <code>dsimp at x</code> (maybe <code>simp only at x</code>) to simplify the type temporarily, to help understand what you need to do next.</p>",
        "id": 533158204,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1754504633
    },
    {
        "content": "<p>(It wouldn't be impossible for Lean to reduce some simple arithmetic when computing types of things, but there are times when you don't want that, so it's not clear that it should be done.)</p>",
        "id": 533158587,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1754504804
    },
    {
        "content": "<p>I have stumbled on an issue where <code>dsimp at h</code> works, but <code>dsimp at *</code> doesn't. Given <code>h : T ‚ü®a, b‚ü©.fst</code>. Is there a reason why this is?</p>",
        "id": 534604197,
        "sender_full_name": "Max Nowak üêâ",
        "timestamp": 1755238899
    },
    {
        "content": "<p>This could be an instance of <a href=\"https://github.com/leanprover/lean4/pull/8300\">lean4#8300</a> or <a href=\"https://github.com/leanprover/lean4/pull/8696\">lean4#8696</a></p>",
        "id": 534646219,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1755261681
    }
]