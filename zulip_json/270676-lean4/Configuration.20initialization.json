[
    {
        "content": "<p><a href=\"/user_uploads/3121/2TiVCSwJBP60pReXMQoTYQqZ/QQ20250525000510.png\">QQ图片20250525000510.png</a><br>\nPls how can this situation be resolved <span aria-label=\"slight smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"slight smile\">:slight_smile:</span></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/2TiVCSwJBP60pReXMQoTYQqZ/QQ20250525000510.png\" title=\"QQ图片20250525000510.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"2498x819\" src=\"/user_uploads/thumbnail/3121/2TiVCSwJBP60pReXMQoTYQqZ/QQ20250525000510.png/840x560.webp\"></a></div>",
        "id": 520209548,
        "sender_full_name": "Yahoo",
        "timestamp": 1748102760
    },
    {
        "content": "<p>looks like a network issue. Try restarting it a few times. Can you get to github in your web browser? (China users sometimes have to do other things to make this work)</p>",
        "id": 520209761,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1748102896
    },
    {
        "content": "<p>In fact, I deployed all the files I needed locally, but I didn't know where to redirect git commands to pull web pages to local files</p>",
        "id": 520209991,
        "sender_full_name": "Yahoo",
        "timestamp": 1748103087
    },
    {
        "content": "<p>That particular call is cloning mathlib into <code>.lake/packages/mathlib</code>. I think if you ensure that it is already there and checked out to the same commit as what is in the lockfile then it will skip the step</p>",
        "id": 520210206,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1748103265
    },
    {
        "content": "<p>I notice that you also don't have a lockfile in the project hierarchy view, this is <code>lake-manifest.json</code> in the MIL repo. You should get all the files in the repo, don't just get the lean files and drop the metadata</p>",
        "id": 520210429,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1748103461
    },
    {
        "content": "<p>the main other file you seem to be missing is <code>lean-toolchain</code></p>",
        "id": 520210534,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1748103551
    },
    {
        "content": "<p>They exist exactly but filtered by the window</p>",
        "id": 520210688,
        "sender_full_name": "Yahoo",
        "timestamp": 1748103708
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110049\">Mario Carneiro</span> <a href=\"#narrow/channel/270676-lean4/topic/Configuration.20initialization/near/520209761\">said</a>:</p>\n<blockquote>\n<p>looks like a network issue. Try restarting it a few times. Can you get to github in your web browser? (China users sometimes have to do other things to make this work)</p>\n</blockquote>\n<p>Certainly, but via VPN. Maybe this is one of the reason.</p>",
        "id": 520212134,
        "sender_full_name": "Yahoo",
        "timestamp": 1748104836
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110049\">@Mario Carneiro</span> I soved it! </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"o\">[[</span><span class=\"n\">require</span><span class=\"o\">]]</span>\n<span class=\"n\">name</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"s2\">\"mathlib\"</span>\n<span class=\"n\">git</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"s2\">\"https://github.com/leanprover-community/mathlib4\"</span>\n<span class=\"n\">rev</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"s2\">\"v4.19.0\"</span>\n</code></pre></div>\n<p>I remove the require code from lakefile.toml, then done</p>",
        "id": 520216219,
        "sender_full_name": "Yahoo",
        "timestamp": 1748108124
    },
    {
        "content": "<p>uh, that will cause mathlib to not be a dependency which will make the mathlib imports fail</p>",
        "id": 520216272,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1748108162
    },
    {
        "content": "<p>what happens when you copy the whole MIL project locally, check out <code>mathlib</code> rev <code>c44e0c8ee63ca166450922a373c7409c5d26b00b</code> to <code>.lake/packages/mathlib</code>, and run <code>lake build</code> at the command line?</p>",
        "id": 520216512,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1748108356
    },
    {
        "content": "<p>I just tried to change the git address to the local \"mathlib4\" directory after a while of operation, but it didn't seem to have any significant effect. I still got an error message like \"error: external command 'git' exported with code 128\", which left me a bit confused</p>",
        "id": 520221832,
        "sender_full_name": "Yahoo",
        "timestamp": 1748112626
    },
    {
        "content": "<p>I don't think that will work</p>",
        "id": 520228783,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1748118470
    },
    {
        "content": "<p>like I said, you should try to set things up so that it won't call git in the first place</p>",
        "id": 520228835,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1748118492
    },
    {
        "content": "<p>It will always call <code>git</code> (to check the commit hash), but it will not clone anything if it  matches the locked revision.</p>",
        "id": 520297626,
        "sender_full_name": "Mac Malone",
        "timestamp": 1748183788
    },
    {
        "content": "<p>I don't know enough about how these VPN setups work, but there should be a way to set up elan, lake and cache to use a VPN if the user has one configured.</p>",
        "id": 520297867,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1748183966
    },
    {
        "content": "<p><code>git</code> will respect <code>$http_proxy</code> / <code>$https_proxy</code> / <code>$all_proxy</code> environment variables if you have them set, so if you don't, you should set them. There's also git-specific proxy configuration, although if you're on this kind of network connection really you should \"Fix\" it for all programs so I'd be using the former personally as long as you have a good SOCKS proxy (e.g. some server you can SSH to outside of the firewall). Here's a gist on the latter though (which I have not tested personally): <a href=\"https://gist.github.com/evantoli/f8c23a37eb3558ab8765\">https://gist.github.com/evantoli/f8c23a37eb3558ab8765</a></p>",
        "id": 520299703,
        "sender_full_name": "Julian Berman",
        "timestamp": 1748185398
    }
]