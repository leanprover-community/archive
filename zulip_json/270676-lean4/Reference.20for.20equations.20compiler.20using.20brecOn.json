[
    {
        "content": "<p>My understanding is that any recursive function definition in Lean is compiled to an application of the <code>brecOn</code> combinator of the inductive type the recursion works on, and <code>brecOn</code> is defined automatically using <code>rec</code> at definition time of the inductive type. The equations compiler even uses <code>brecOn</code> for functions which could be defined with <code>rec</code> directly. Is there a reference for this behaviour? It's not mentioned in the CADE '21 paper I think. It's kind of there in <a href=\"https://lean-lang.org/blog/2024-1-11-recursive-definitions-in-lean/\">https://lean-lang.org/blog/2024-1-11-recursive-definitions-in-lean/</a>, but still a bit implicit (<span class=\"user-mention\" data-user-id=\"470149\">@Joachim Breitner</span>)</p>",
        "id": 465475222,
        "sender_full_name": "Yannick Forster",
        "timestamp": 1724770384
    },
    {
        "content": "<p>That's all correct (well, there are also <code>partial</code> recursive functions and those using well-founded recursion). I don't know of any reference for the lean implementation though. Eventually we'll have a reference manual.</p>",
        "id": 465564128,
        "sender_full_name": "Joachim Breitner",
        "timestamp": 1724791918
    }
]