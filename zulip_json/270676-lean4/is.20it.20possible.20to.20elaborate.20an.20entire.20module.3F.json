[
    {
        "content": "<p>All syntax and elaboration examples I see assume there is already a module. Could I elaborate a new command in module A that dynamically generates a module B, C etc? Or is there constraint is that all new definitions are elaborated into an existing module? </p>\n<p>AFAIK, Alloy is triggered by lake to load the environment and generate .c and .h files outside of the Lean compiler. What I would like to do is use the Lean code generator to do the same but within the Lean compiler.</p>",
        "id": 456033402,
        "sender_full_name": "Yuri",
        "timestamp": 1722629476
    },
    {
        "content": "<p>What do you mean by module? You can certainly have a syntax that expands into </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">namespace</span><span class=\"w\"> </span><span class=\"n\">Foo</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Bar</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">...</span>\n\n<span class=\"kn\">end</span><span class=\"w\"> </span><span class=\"n\">Foo</span>\n</code></pre></div>\n<p>or just</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Foo</span><span class=\"bp\">.</span><span class=\"n\">Bar</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">...</span>\n</code></pre></div>",
        "id": 456045130,
        "sender_full_name": "Robert Maxton",
        "timestamp": 1722634429
    },
    {
        "content": "<p>If you want a whole new file, then I don't know</p>",
        "id": 456045355,
        "sender_full_name": "Robert Maxton",
        "timestamp": 1722634502
    },
    {
        "content": "<p>Yes, I meant a whole new file. I would like to explore importing other types of sources (in my case .h files) that generate types on the fly. A (module) type provider that produces virtual modules that only exist as compiled artifacts (located in <code>.lake/build/ir</code>.</p>\n<p>For instance (hand waving a few specific challenges):</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">MyDuckDB</span><span class=\"bp\">.</span><span class=\"n\">Types</span><span class=\"w\"> </span><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"s2\">\"./includes/duckdb.h\"</span>\n</code></pre></div>",
        "id": 456052036,
        "sender_full_name": "Yuri",
        "timestamp": 1722636986
    }
]