[
    {
        "content": "<p>Watching <span class=\"user-mention\" data-user-id=\"418569\">@Dan Abramov</span> going through some exercises yesterday, we ran into this:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"n\">Q</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"bp\">∨</span><span class=\"w\"> </span><span class=\"n\">Q</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">rintro</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hP</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">hQR</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"c1\">-- user error</span>\n<span class=\"w\">  </span><span class=\"c\">/-</span>\n<span class=\"cm\">  2 goals</span>\n<span class=\"cm\">  case intro.inl</span>\n<span class=\"cm\">  P Q R S : Prop</span>\n<span class=\"cm\">  right✝ : R</span>\n<span class=\"cm\">  hP : P</span>\n<span class=\"cm\">  ⊢ S</span>\n<span class=\"cm\">  case intro.inr</span>\n<span class=\"cm\">  P Q R S : Prop</span>\n<span class=\"cm\">  right✝ : R</span>\n<span class=\"cm\">  hQR : Q</span>\n<span class=\"cm\">  ⊢ S</span>\n<span class=\"cm\">  -/</span>\n</code></pre></div>\n<p>I don't quite know how <code>rintro</code> has managed to do this but Dan argued, and I agreed, that nobody asked Lean to introduce some unnamed hypotheses here, and that one might expect the behaviour here to be an error. The idea is that if you'd wanted what happened to happen then you would have put an underscore somewhere indicating that you explicitly wanted an unnamed hypothesis in your context.</p>",
        "id": 499709512,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1739531529
    },
    {
        "content": "<p>It would also be neat if somehow putting your cursor in different parts of the rintro pattern could show the intermediate states...</p>",
        "id": 499838315,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1739570344
    },
    {
        "content": "<p>it should already be doing this?</p>",
        "id": 499952406,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1739655368
    },
    {
        "content": "<p>I'm imagining a feature where if you put your cursor at <code>|</code> or <code>,</code>, you can see what's going to be cased on.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"n\">Q</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"bp\">∨</span><span class=\"w\"> </span><span class=\"n\">Q</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">rintro</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"o\">(</span><span class=\"n\">hP</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">hQR</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">hR</span><span class=\"bp\">⟩</span>\n<span class=\"c1\">--            ^     ^</span>\n</code></pre></div>\n<p>(I don't see anything in the rintro/rcases code that creates any infotrees for this, not even for <code>rintro x y z</code>. At least I see no <code>withTacticInfoContext</code>.)</p>",
        "id": 499954529,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1739657356
    },
    {
        "content": "<p>you get type hovers on every subpattern</p>",
        "id": 499954613,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1739657415
    },
    {
        "content": "<p>It would be nice if it included the case name too</p>",
        "id": 499955302,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1739658106
    },
    {
        "content": "<p>The type hovers are nice! Having both terminfo and tactic info would be even nicer though. Being able to see the infoview change as you move your cursor through a tactic is a neat feature we have in Lean 4 :-)</p>",
        "id": 499955555,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1739658347
    },
    {
        "content": "<p>I also think that \"Expected type\" is a slightly weird description for a location where we're constructing a pattern rather than a term</p>",
        "id": 499957251,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1739660134
    }
]