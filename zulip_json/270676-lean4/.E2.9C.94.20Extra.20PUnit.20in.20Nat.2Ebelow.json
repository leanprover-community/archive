[
    {
        "content": "<p><code>#print</code>ing the autogenerated <code>Nat.below</code> is a little surprising:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">@[reducible]</span>\n<span class=\"kn\">protected</span> <span class=\"kd\">def</span> <span class=\"n\">Nat.below.</span><span class=\"o\">{</span><span class=\"n\">u</span><span class=\"o\">}</span> <span class=\"o\">:</span> <span class=\"o\">{</span><span class=\"n\">motive</span> <span class=\"o\">:</span> <span class=\"n\">Nat</span> <span class=\"bp\">→</span> <span class=\"kt\">Sort</span> <span class=\"n\">u</span><span class=\"o\">}</span> <span class=\"bp\">→</span> <span class=\"n\">Nat</span> <span class=\"bp\">→</span> <span class=\"kt\">Sort</span> <span class=\"o\">(</span><span class=\"n\">max</span> <span class=\"mi\">1</span> <span class=\"n\">u</span><span class=\"o\">)</span> <span class=\"o\">:=</span>\n<span class=\"k\">fun</span> <span class=\"o\">{</span><span class=\"n\">motive</span><span class=\"o\">}</span> <span class=\"n\">t</span> <span class=\"bp\">=&gt;</span> <span class=\"n\">Nat.rec</span> <span class=\"n\">PUnit</span> <span class=\"o\">(</span><span class=\"k\">fun</span> <span class=\"n\">n</span> <span class=\"n\">n_ih</span> <span class=\"bp\">=&gt;</span> <span class=\"n\">PProd</span> <span class=\"o\">(</span><span class=\"n\">PProd</span> <span class=\"o\">(</span><span class=\"n\">motive</span> <span class=\"n\">n</span><span class=\"o\">)</span> <span class=\"n\">n_ih</span><span class=\"o\">)</span> <span class=\"n\">PUnit</span><span class=\"o\">)</span> <span class=\"n\">t</span>\n</code></pre></div>\n<p>What is the puprose of this extra <code>PUnit</code> on every iteration? At least manually, I can write my own <code>below'</code> without it:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">@[reducible]</span>\n<span class=\"kn\">protected</span> <span class=\"kd\">def</span> <span class=\"n\">Nat.below'</span> <span class=\"o\">:</span> <span class=\"o\">{</span><span class=\"n\">motive</span> <span class=\"o\">:</span> <span class=\"n\">Nat</span> <span class=\"bp\">→</span> <span class=\"kt\">Sort</span> <span class=\"n\">u</span><span class=\"o\">}</span> <span class=\"bp\">→</span> <span class=\"n\">Nat</span> <span class=\"bp\">→</span> <span class=\"kt\">Sort</span> <span class=\"o\">(</span><span class=\"n\">max</span> <span class=\"mi\">1</span> <span class=\"n\">u</span><span class=\"o\">)</span> <span class=\"o\">:=</span>\n  <span class=\"k\">fun</span> <span class=\"o\">{</span><span class=\"n\">motive</span><span class=\"o\">}</span> <span class=\"n\">t</span> <span class=\"bp\">=&gt;</span> <span class=\"n\">Nat.recOn</span> <span class=\"n\">t</span> <span class=\"n\">PUnit</span> <span class=\"o\">(</span><span class=\"k\">fun</span> <span class=\"n\">n</span> <span class=\"n\">n_ih</span> <span class=\"bp\">=&gt;</span> <span class=\"n\">PProd</span> <span class=\"o\">(</span><span class=\"n\">motive</span> <span class=\"n\">n</span><span class=\"o\">)</span> <span class=\"n\">n_ih</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 358030486,
        "sender_full_name": "Wojciech Nawrocki",
        "timestamp": 1683949060
    },
    {
        "content": "<p>these are usually an artifact of a generic construction, where it is easier to put the PUnit in rather than adjust all the constructions to special case the case where it is not needed</p>",
        "id": 358037774,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1683955682
    },
    {
        "content": "<p>In this case I believe the <code>PUnit</code> is the base case of the tupling of the constructor arguments</p>",
        "id": 358037853,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1683955748
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"128280\">Wojciech Nawrocki</span> has marked this topic as resolved.</p>",
        "id": 358160988,
        "sender_full_name": "Notification Bot",
        "timestamp": 1684008186
    }
]