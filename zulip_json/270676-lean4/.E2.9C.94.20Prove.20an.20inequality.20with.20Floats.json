[
    {
        "content": "<p>Hi, I'm relatively new to lean 4, maybe I'm missing something.<br>\nI'd like to create a datatype that forces some constraint on its values.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">structure</span><span class=\"w\"> </span><span class=\"n\">Ineq</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">a</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Float</span>\n<span class=\"w\">  </span><span class=\"n\">b</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Float</span>\n<span class=\"w\">  </span><span class=\"n\">p</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"n\">b</span>\n<span class=\"n\">deriving</span><span class=\"w\"> </span><span class=\"n\">Repr</span>\n</code></pre></div>\n<p>but I have a hard time proving simple inequalities like : 5.1 &lt; 7.7.<br>\nThings like:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mf\">5.1</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"mf\">7.7</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">decide</span>\n</code></pre></div>\n<p>do not work.<br>\nAlthough such a proof works for Nats</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"mi\">7</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">decide</span>\n</code></pre></div>\n<p>More generally I wonder how a </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">Decidable</span><span class=\"w\"> </span><span class=\"n\">p</span>\n</code></pre></div>\n<p>Whose value is always true can be used to prove p...</p>\n<p>Thank you</p>",
        "id": 453687628,
        "sender_full_name": "Nicolas Grislain",
        "timestamp": 1721825891
    },
    {
        "content": "<p>Most stuff about <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Float#doc\">docs#Float</a> is opaque, so you can't prove much about it. You could use native_decide there, though</p>",
        "id": 453718823,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1721833310
    },
    {
        "content": "<p>Very nice, this works well, thank you so much !</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">structure</span><span class=\"w\"> </span><span class=\"n\">Ineq</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">a</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Float</span>\n<span class=\"w\">  </span><span class=\"n\">b</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Float</span>\n<span class=\"w\">  </span><span class=\"n\">p</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">native_decide</span>\n<span class=\"n\">deriving</span><span class=\"w\"> </span><span class=\"n\">Repr</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Ineq</span><span class=\"bp\">.</span><span class=\"n\">mk</span><span class=\"w\"> </span><span class=\"mf\">5.1</span><span class=\"w\"> </span><span class=\"mf\">7.7</span>\n</code></pre></div>\n<p>I understand that if I use <em>native_decide</em>, then I have to trust the Lean compiler and interpreter, but I am using Lean as a programming language, experimenting for advanced compile-time guarantees, so it's okay for my use.</p>",
        "id": 453730684,
        "sender_full_name": "Nicolas Grislain",
        "timestamp": 1721835640
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"703870\">Nicolas Grislain</span> has marked this topic as resolved.</p>",
        "id": 453730748,
        "sender_full_name": "Notification Bot",
        "timestamp": 1721835663
    }
]