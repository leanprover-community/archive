[
    {
        "content": "<p>Is there a way to make the panic messages show up when <code>LEAN_ABORT_ON_PANIC=1</code>?</p>",
        "id": 519437927,
        "sender_full_name": "Arthur Paulino",
        "timestamp": 1747761358
    },
    {
        "content": "<p>Hi, since nobody answered the question above, I'm gonna assume the answer is \"no\" so I can ask the following:<br>\nAre there plans to make the (reasonable) behavior below possible?</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"k\">fn</span><span class=\"w\"> </span><span class=\"nf\">main</span><span class=\"p\">()</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">    </span><span class=\"fm\">panic!</span><span class=\"p\">(</span><span class=\"s\">\"Panic!\"</span><span class=\"p\">);</span>\n<span class=\"p\">}</span>\n</code></pre></div>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">λ</span><span class=\"w\"> </span><span class=\"n\">cargo</span><span class=\"w\"> </span><span class=\"n\">run</span>\n<span class=\"n\">thread</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">main'</span><span class=\"w\"> </span><span class=\"n\">panicked</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">src</span><span class=\"bp\">/</span><span class=\"n\">main</span><span class=\"bp\">.</span><span class=\"n\">rs</span><span class=\"o\">:</span><span class=\"mi\">2</span><span class=\"o\">:</span><span class=\"mi\">5</span><span class=\"o\">:</span>\n<span class=\"n\">Panic!</span>\n</code></pre></div>\n<p>That is, it shows the panic source location and the panic message</p>",
        "id": 519617460,
        "sender_full_name": "Arthur Paulino",
        "timestamp": 1747835271
    },
    {
        "content": "<p>That's at least technically possible yes.</p>",
        "id": 519643685,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1747841548
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"380294\">Matt Diamond</span> <a href=\"#narrow/channel/270676-lean4/topic/.E2.9C.94.20panics.20in.20runtime/near/505023305\">said</a>:</p>\n<blockquote>\n<p>but rather they want a <code>partial</code> notation on any function which may potentially panic at runtime</p>\n</blockquote>\n<p>But that's impossible since every function may potentially panic due to out of memory or stack overflow</p>",
        "id": 519659354,
        "sender_full_name": "Jz Pan",
        "timestamp": 1747845990
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"451983\">Arthur Paulino</span> has marked this topic as unresolved.</p>",
        "id": 519666087,
        "sender_full_name": "Notification Bot",
        "timestamp": 1747848363
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"395550\">Henrik Böving</span> <a href=\"#narrow/channel/270676-lean4/topic/.E2.9C.94.20panics.20in.20runtime/near/519643685\">said</a>:</p>\n<blockquote>\n<p>That's at least technically possible yes.</p>\n</blockquote>\n<p>What's possible? To show the panic message with the current Lean release? Or to implement the behavior Rust offers?</p>",
        "id": 519666224,
        "sender_full_name": "Arthur Paulino",
        "timestamp": 1747848414
    },
    {
        "content": "<p>Let me be specific about my current pain point: debugging is hard. My only options, as far as I understand, are to let panics return default instances <strong>or</strong> to make the program abort abruptly, without telling me where or why it aborted.</p>",
        "id": 519666631,
        "sender_full_name": "Arthur Paulino",
        "timestamp": 1747848549
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"451983\">Arthur Paulino</span> <a href=\"#narrow/channel/270676-lean4/topic/panics.20in.20runtime/near/519666224\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"395550\">Henrik Böving</span> <a href=\"#narrow/channel/270676-lean4/topic/.E2.9C.94.20panics.20in.20runtime/near/519643685\">said</a>:</p>\n<blockquote>\n<p>That's at least technically possible yes.</p>\n</blockquote>\n<p>What's possible? To show the panic message with the current Lean release? Or to implement the behavior Rust offers?</p>\n</blockquote>\n<p>Implementing the behavior.</p>\n<p><span class=\"user-mention silent\" data-user-id=\"451983\">Arthur Paulino</span> <a href=\"#narrow/channel/270676-lean4/topic/panics.20in.20runtime/near/519666631\">said</a>:</p>\n<blockquote>\n<p>Let me be specific about my current pain point: debugging is hard. My only options, as far as I understand, are to let panics return default instances <strong>or</strong> to make the program abort abruptly, without telling me where or why it aborted.</p>\n</blockquote>\n<p>If you crash on a panic you should get a stacktrace and a coredump (at least on linux) that you can load into GDB and debug to your heart's content</p>",
        "id": 519679455,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1747853132
    },
    {
        "content": "<p>Would it make sense to set <code>abortOnPanic := true</code> in the lakefile configuration for the executable?</p>",
        "id": 525161083,
        "sender_full_name": "Arthur Paulino",
        "timestamp": 1750514893
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"451983\">Arthur Paulino</span> <a href=\"#narrow/channel/270676-lean4/topic/panics.20in.20runtime/near/519666631\">said</a>:</p>\n<blockquote>\n<p><strong>or</strong> to make the program abort abruptly, without telling me where or why it aborted.</p>\n</blockquote>\n<p>I'm a little confused about this — I have had the experience of aborts <em>and</em> seeing the exact source position of the error, though I haven't tested this recently.</p>\n<p>Reading the source code, if you do <code>panic!</code> then you should see an error message and source position if <code>lean_set_panic_messages(true)</code> (which should be true except during module initialization) and also if <code>LEAN_ABORT_ON_PANIC=1</code>.</p>",
        "id": 525177228,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1750537378
    },
    {
        "content": "<p><code>panic!</code> indeed does that. But mean panics like <code>#[0].get! 1</code></p>",
        "id": 525181992,
        "sender_full_name": "Arthur Paulino",
        "timestamp": 1750546013
    }
]