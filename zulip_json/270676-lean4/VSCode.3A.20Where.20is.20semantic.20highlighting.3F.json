[
    {
        "content": "<p>I was wondering how difficult it would be to add some better semantic highlighting, so I embarked on a journey through the VSCode Lean extension and the Lean Server code. While I can find all kinds of cool stuff like hover support, etc, I just can't figure out where the semantic highlighting happens.</p>",
        "id": 283996454,
        "sender_full_name": "Max Nowak üê∫",
        "timestamp": 1653565478
    },
    {
        "content": "<p>It's this function on the server side: <a href=\"https://github.com/leanprover/lean4/blob/fad21a4cda3c6926e37ec01e518d541c7681a652/src/Lean/Server/FileWorker/RequestHandling.lean#L335\">https://github.com/leanprover/lean4/blob/fad21a4cda3c6926e37ec01e518d541c7681a652/src/Lean/Server/FileWorker/RequestHandling.lean#L335</a></p>",
        "id": 283996577,
        "sender_full_name": "Gabriel Ebner",
        "timestamp": 1653565596
    },
    {
        "content": "<p>Nice! I will definitely have a closer look at it, though it is a lot at once <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span>.  Where in the VSCode extension are the semantic tokens received?</p>",
        "id": 284000010,
        "sender_full_name": "Max Nowak üê∫",
        "timestamp": 1653568311
    },
    {
        "content": "<p>The 'textDocument/semanticTokens/full' request comes directly from VSCode and goes to the LSP and back to VSCode without the extension being involved at all.    You might be able to intercept them in the <a href=\"https://github.com/leanprover/vscode-lean4/blob/master/vscode-lean4/src/leanclient.ts\">LeanClient</a> if you insert the (<a href=\"https://github.com/microsoft/vscode-languageserver-node/blob/main/client/src/common/semanticTokens.ts#L33\">SemanticTokensMiddleware</a>).</p>",
        "id": 289378653,
        "sender_full_name": "Chris Lovett",
        "timestamp": 1657656378
    }
]