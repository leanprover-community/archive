[
    {
        "content": "<p>It would be neat to have somewhere to go to see all the open infinity-cosmos related PRs, as it's easy to miss one or lose track of them in long threads. </p>\n<p>I'm imagining a zulip bot that posts every infinity-cosmos PR along with every mathlib PR that somehow mentions infinity-cosmos. A github query like the <a href=\"https://bit.ly/4eIDoOJ\">#queue</a>  could also work.</p>",
        "id": 495105694,
        "sender_full_name": "Nick Ward",
        "timestamp": 1737479478
    },
    {
        "content": "<p>I doubt we can justify adding a mathlib PR tag, so we probably would have to add a common string to mathlib PRs for the bot to catch it. Something like \"Part of the Infinity Cosmos project\", which I occasionally see FLT-related PRs do.</p>",
        "id": 495106197,
        "sender_full_name": "Nick Ward",
        "timestamp": 1737479625
    },
    {
        "content": "<p>I like this idea because I've been missing a lot of PRs! Any thoughts on what might be feasible?</p>",
        "id": 495108243,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1737480212
    },
    {
        "content": "<p>I personally think that adding a label to ear-mark PRs from the infinity-cosmo project is a good idea: I do not think that there are many costs associated with having a new label, and, even if that is the case, they can always be deleted.</p>",
        "id": 495109834,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1737480687
    },
    {
        "content": "<p>I added a label. There is already precedent for such labels</p>",
        "id": 495109986,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1737480726
    },
    {
        "content": "<p>It would be trickier to integrate it in the <code>autolabel</code> mechanism, but manually labelling PRs, I would say \"go for it!\".</p>",
        "id": 495110050,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1737480746
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"306577\">@Matthew Ballard</span>!</p>",
        "id": 495110559,
        "sender_full_name": "Nick Ward",
        "timestamp": 1737480928
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"246635\">@Emily Riehl</span> this might be all we need. Just ask folks to tag their PRs with the <code>infinity-cosmos</code> label, then we can view them all with a github query like <a href=\"https://github.com/leanprover-community/mathlib4/pulls?q=is:open+is:pr+label:infinity-cosmos\">this</a>. A zulip channel with a friendly bot would probably be the next level up if we think it's worth doing.</p>",
        "id": 495111617,
        "sender_full_name": "Nick Ward",
        "timestamp": 1737481280
    },
    {
        "content": "<p>Yes, we should also work out how to have the auto-labeller bot help, and probably also have a bot that posts status changes on a thread here.</p>",
        "id": 495152965,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1737497209
    },
    {
        "content": "<p>The auto-labeller bot assigns a label depending on the paths of the modified files.</p>",
        "id": 495154648,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1737497958
    },
    {
        "content": "<p>I don't think that there is a clear path that identifies infinity-cosmos <del>files</del>PRs, but maybe we can think of some heuristic that would be reasonable.</p>",
        "id": 495154816,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1737498015
    },
    {
        "content": "<p>Maybe a combination of author and path?</p>",
        "id": 495154971,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1737498092
    },
    {
        "content": "<p>What would the auto-labeler do now? My guess is that it would add the <code>t-algebraic-topology</code> label to almost all PRs in this project. Would it be good enough to just work with that?</p>",
        "id": 495218205,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1737532355
    },
    {
        "content": "<p>The auto-labeler roughly looks at the root dirs after <code>Mathlib</code> of the modified files: if exactly one such root dir is affected, then it knows which label to add and adds it.  If more root dirs are affected, then it knows the labels, but won't post.</p>\n<p>In reality, it does something a little more sophisticated, but not much.</p>",
        "id": 495221991,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1737533870
    },
    {
        "content": "<p>So, PRs changing only files in <code>AlgebraicTopology</code> should get a <code>t-algebraic-topology</code> label, the ones for <code>CategoryTheory</code> will get <code>t-category-theory</code> but PRs modifying both will get no auto-label.</p>",
        "id": 495222178,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1737533936
    },
    {
        "content": "<p>Is there an existing bot that posts PR status updates on zulip? I would imagine it would be relatively simple to repurpose.</p>",
        "id": 495347286,
        "sender_full_name": "Nick Ward",
        "timestamp": 1737569849
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"321459\">Damiano Testa</span> <a href=\"#narrow/channel/455414-Infinity-Cosmos/topic/infinity-cosmos.20PR.20feed/near/495154971\">said</a>:</p>\n<blockquote>\n<p>Maybe a combination of author and path?</p>\n</blockquote>\n<p>If adding PR author to the mix is simple to do, that seems promising. Certain sub-dirs in <code>AlgebraicTopology</code> could also be good hints (e.g. <code>Quasicategory</code> or <code>SimplicialSet</code>).</p>",
        "id": 495348185,
        "sender_full_name": "Nick Ward",
        "timestamp": 1737570158
    },
    {
        "content": "<p>There is no bot that posts PR status updates on Zulip, but maybe the <a href=\"https://jcommelin.github.io/queueboard/\">#queueboard</a> already has information that can be used: let's ping <span class=\"user-mention\" data-user-id=\"634338\">@Michael Rothgang</span> (sorry for subscribing you to the channel along the way!  <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span> ) who has been working quite a bit on the queueboard.</p>",
        "id": 495350995,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1737571144
    },
    {
        "content": "<p>The bot that adds the labels to the PRs is mostly written in lean.  Currently, it only inspects the paths of the changed files, but I am sure that adding support for passing an author and taking some decision based on that would be relatively straightforward.</p>",
        "id": 495351347,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1737571271
    },
    {
        "content": "<p>I also thought the more general solution you mentioned elsewhere of keying on a string in the PR description makes good sense.</p>",
        "id": 495352554,
        "sender_full_name": "Nick Ward",
        "timestamp": 1737571674
    },
    {
        "content": "<p>The \"string\" solution also has the property that it would not be affected by the same person contributing to different projects in the same folders.</p>",
        "id": 495354281,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1737572280
    },
    {
        "content": "<p>Ahh, the dream of one day getting every auto-label on the same PR.</p>",
        "id": 495355427,
        "sender_full_name": "Nick Ward",
        "timestamp": 1737572701
    },
    {
        "content": "<p>The queueboard repository has virtually all metadata about github PRs you might want. So almost any query you'll have could be answered. The question is what your question is :-)</p>",
        "id": 495356655,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1737573168
    },
    {
        "content": "<p>I think my only queueboard question would be, where does the code live?</p>",
        "id": 495361440,
        "sender_full_name": "Nick Ward",
        "timestamp": 1737575073
    },
    {
        "content": "<p>Is hosting for new zulip bots an easy solve? e.g., does the #rss bot (or another similar bot) live somewhere that I can just contribute / fork it and have it up and running?</p>",
        "id": 495361826,
        "sender_full_name": "Nick Ward",
        "timestamp": 1737575237
    },
    {
        "content": "<p>I think all of the Zulip bots that react to various events in mathlib4 repo live in the <a href=\"https://github.com/leanprover-community/mathlib4/tree/master/.github/workflows\"><code>.github/workflows/</code> directory</a> (with some calling Python or shell scripts in <a href=\"https://github.com/leanprover-community/mathlib4/tree/master/scripts\"><code>/scripts/</code></a>).</p>",
        "id": 495362297,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1737575442
    },
    {
        "content": "<p>Oh perfect, that's exactly what I was looking for. Thanks <span class=\"user-mention\" data-user-id=\"123965\">@Bryan Gin-ge Chen</span>.</p>",
        "id": 495362425,
        "sender_full_name": "Nick Ward",
        "timestamp": 1737575501
    },
    {
        "content": "<p>The queueboard data is in <a href=\"https://github.com/jcommelin/queueboard/tree/master/data\">https://github.com/jcommelin/queueboard/tree/master/data</a>; there are also some automatically generated statistics: <a href=\"https://github.com/jcommelin/queueboard/tree/master/processed_data\">https://github.com/jcommelin/queueboard/tree/master/processed_data</a></p>\n<p>If you have a particular question, I'm happy to write code that extracts all matching PRs. Or to show you around the data format (that's not explicitly documented at the moment).</p>",
        "id": 495385741,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1737585208
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"634338\">@Michael Rothgang</span>! I think our task is fairly simple relative to what you've put together. Others may have a more interesting spec in mind, but I think we just want to post to a zulip channel every time the status of a PR tagged <code>infinity-cosmos</code> changes.</p>",
        "id": 495387281,
        "sender_full_name": "Nick Ward",
        "timestamp": 1737586007
    },
    {
        "content": "<p>If any CI whizzes want to pick this up, please do! Otherwise, I will find some time soon to remember how to write python.</p>",
        "id": 495387924,
        "sender_full_name": "Nick Ward",
        "timestamp": 1737586335
    },
    {
        "content": "<p>(I hear they even have types now)</p>",
        "id": 495390171,
        "sender_full_name": "Nick Ward",
        "timestamp": 1737587438
    },
    {
        "content": "<p>(they're not mandatory, and not necessarily checked)</p>",
        "id": 495448463,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1737621175
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"776338\">Nick Ward</span> <a href=\"#narrow/channel/455414-Infinity-Cosmos/topic/infinity-cosmos.20PR.20feed/near/495387281\">said</a>:</p>\n<blockquote>\n<p>Thanks <span class=\"user-mention silent\" data-user-id=\"634338\">Michael Rothgang</span>! I think our task is fairly simple relative to what you've put together. Others may have a more interesting spec in mind, but I think we just want to post to a zulip channel every time the status of a PR tagged <code>infinity-cosmos</code> changes.</p>\n</blockquote>\n<p>That should be very doable; I may have some time on Friday.<br>\nJust to clarify: by \"status change\", do you mean a status change as for the queueboard (e.g., from \"awaiting review\" to \"awaiting author\"), or as in Github's sense (e.g., title renaming, reviewer request, just a label added count as changes)?</p>",
        "id": 495449424,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1737621498
    },
    {
        "content": "<p>(That is: the data extraction part should be easy. I haven't looked at zulip bot integration. Perhaps somebody else would like to do this part?)</p>",
        "id": 495449531,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1737621537
    },
    {
        "content": "<p>you can look at several pieces of CI for the zulip bot integration... Assuming you want actual messages on zulip, some examples can be found in <code>technical_debt_metrics.yml</code>, <code>nightly_detect_failure.yml</code> and <code>discover-lean-pr-testing.yml</code>.</p>",
        "id": 495451014,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1737621987
    },
    {
        "content": "<p>that is, assuming you're using a github action as your vehicle for posting a message</p>",
        "id": 495451381,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1737622094
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"634338\">Michael Rothgang</span> <a href=\"#narrow/channel/455414-Infinity-Cosmos/topic/infinity-cosmos.20PR.20feed/near/495449424\">said</a>:</p>\n<blockquote>\n<p>by \"status change\", do you mean a status change as for the queueboard (e.g., from \"awaiting review\" to \"awaiting author\"), or as in Github's sense (e.g., title renaming, reviewer request, just a label added count as changes)?</p>\n</blockquote>\n<p>I actually hadn't thought that far ahead. One idea would be to ping the channel anytime an <code>infinity-cosmos</code> PR is tagged, closed, or moves from \"awaiting author\" to \"awaiting review\". Is it more challenging to get the queueboard-style status changes in a github action, though?</p>\n<p>Another valid answer would be \"whatever is easiest\", because I think we really just want an easy way to be notified about relevant new PRs.</p>",
        "id": 495534276,
        "sender_full_name": "Nick Ward",
        "timestamp": 1737648232
    },
    {
        "content": "<p>Ask and ye shall receive: the queueboard repository now contains a file <a href=\"https://github.com/jcommelin/queueboard/blob/master/processed_data/infinity_cosmos_data.json\">\"infinity_cosmos_data.json\"</a>, which contains the current state of every PR labelled \"infinity-cosmos\". It is updated about every 15 minutes.</p>\n<p>Having a bot use this information (to, for example, output a message: \"the status of PR <a href=\"https://github.com/leanprover-community/mathlib4/pull/12345\">#12345</a> has changed: it is now awaiting review.\") shouldn't be difficult.</p>",
        "id": 495562514,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1737657040
    },
    {
        "content": "<p>About ease of implementation: \"posting a message on zulip\" means an action would delegate to a python script anyway, and from there, making that parse a json file... doesn't sound like much extra effort.</p>",
        "id": 495562831,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1737657149
    },
    {
        "content": "<p>Going from current snapshot of all the PRs to pinging when the state of a PR changes might be a little tricky since the action will need to keep track of the last state as well, right? The current data file could easily be used in a daily report message bot though. </p>\n<p>For PR status changes, I think the simplest thing to do might be to tack on some code to mathlib's emoji reaction bots (see the 3 files starting with <code>zulip_emoji</code> <a href=\"https://github.com/leanprover-community/mathlib4/tree/master/.github/workflows\">here</a>) which send messages to certain channels when they happen to be triggered by PRs with the infinity-cosmos label. This could also be useful to other formalization projects downstream of mathlib (with other labels and channels, of course).</p>",
        "id": 495568717,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1737659364
    },
    {
        "content": "<p>I think <span class=\"user-mention\" data-user-id=\"123965\">@Bryan Gin-ge Chen</span> makes a good point that the zulip bot might need to be more CI-local (assuming we want to host it as a github action). I also quite like the idea of a daily report, though -- along with a long list of other ideas for using <span class=\"user-mention\" data-user-id=\"634338\">@Michael Rothgang</span>'s new data feed.</p>",
        "id": 495573367,
        "sender_full_name": "Nick Ward",
        "timestamp": 1737661201
    },
    {
        "content": "<p>It may be easy to create an action that is triggered by <em>any</em> label that is applied on PRs tagged with <code>Infinity-Cosmos</code> and that reports on Zulip the PR and the label.  That would not require any \"memory\" or \"state\".</p>",
        "id": 495574365,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1737661610
    },
    {
        "content": "<p>As before, I still think that having a more \"string/regex-like\" hook to pick these PRs with automation makes the whole process simpler (and less reliant on gh quota), but it can probably work with scanning labels just as well.</p>",
        "id": 495574629,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1737661711
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"321459\">@Damiano Testa</span> does \"gh quota\" refer to some cap on CI compute or similar?</p>",
        "id": 495575373,
        "sender_full_name": "Nick Ward",
        "timestamp": 1737662035
    },
    {
        "content": "<p>Yes, and it is something that I do not understand very well.</p>",
        "id": 495575467,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1737662058
    },
    {
        "content": "<p>What I do know, is that github allows some number of actions to be run per unit of time (maybe 1000/hour or something like this).</p>",
        "id": 495575542,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1737662092
    },
    {
        "content": "<p>The usage that <code>Infinity-Cosmos</code> would do is nowhere near this limit, but I worry that the quota that mathlib uses for its checks exhausts the available actions and the (very little) usage that <code>Infinity-Cosmos</code> would want to use never triggers.</p>",
        "id": 495575666,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1737662147
    },
    {
        "content": "<p>Does mathlib frequently run up against this limit?</p>",
        "id": 495575682,
        "sender_full_name": "Nick Ward",
        "timestamp": 1737662155
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"776338\">Nick Ward</span> <a href=\"#narrow/channel/455414-Infinity-Cosmos/topic/infinity-cosmos.20PR.20feed/near/495575682\">said</a>:</p>\n<blockquote>\n<p>Does mathlib frequently run up against this limit?</p>\n</blockquote>\n<p>About every half hour/45 mins.</p>",
        "id": 495575754,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1737662173
    },
    {
        "content": "<p>This is mostly due to checking for <code>merge-conflicts</code>: the queue has 1.2k PRs that get checked periodically for conflicts with master...</p>",
        "id": 495575841,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1737662224
    },
    {
        "content": "<p>Bryan understands this better than I do, and I think that simply using different bots for different actions, might mean that <em>each bot</em> gets a new quota.</p>",
        "id": 495576017,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1737662300
    },
    {
        "content": "<p>If this is the case, then we are good: we devote a bot to <code>merge-conflict</code>s and nothing else on that bot.</p>",
        "id": 495576053,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1737662326
    },
    {
        "content": "<p>But, I do not really know how this side of CI works, which is why I always look for alternatives that have not even the need to use the gh quota.</p>",
        "id": 495576129,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1737662366
    },
    {
        "content": "<p>Oh wow. I still assume that a github action will be reliable enough for our purposes now, but maybe something to think about if it would ultimately make sense to host zulip bots elsewhere (or if we don't want to take away resources from more important CI actions).</p>",
        "id": 495576292,
        "sender_full_name": "Nick Ward",
        "timestamp": 1737662416
    },
    {
        "content": "<p>I don't think that your usage is large, by any means.  I just worry that it might be obliterated by the usage that mathlib already performs.</p>",
        "id": 495576453,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1737662479
    },
    {
        "content": "<p>So, I was trying to suggest actions that would not depend on the quota, not because you would use too much, but because you may not get any, if the mathlib actions exhaust it before you can use it!</p>",
        "id": 495576579,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1737662527
    },
    {
        "content": "<p>Btw, a github action is not using gh quota, as far as I undestand.</p>",
        "id": 495576649,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1737662564
    },
    {
        "content": "<p>What uses the gh quota is interacting with github via the <code>gh</code> api (and possibly something else).</p>",
        "id": 495576701,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1737662587
    },
    {
        "content": "<p>GitHub actions are, as far as I am aware, not affected by running out of gh quota.</p>",
        "id": 495576738,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1737662606
    },
    {
        "content": "<p>However, if you want to query whether a PR has a specific label, that would use the gh quota (or, at least, I do not know how to do it without using the <code>gh</code> interface).</p>",
        "id": 495576893,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1737662659
    },
    {
        "content": "<p>Whereas, asking for what the title or body of the PR is goes via a different channel and does not need <code>gh</code>.</p>",
        "id": 495576949,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1737662685
    },
    {
        "content": "<p>Interesting. I'm afraid this is why all my repos are perpetually broken -- CI is hard work!</p>",
        "id": 495577308,
        "sender_full_name": "Nick Ward",
        "timestamp": 1737662845
    },
    {
        "content": "<p>CI works because the computers take pity of our attempts.</p>",
        "id": 495577461,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1737662891
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"123965\">Bryan Gin-ge Chen</span> <a href=\"#narrow/channel/455414-Infinity-Cosmos/topic/infinity-cosmos.20PR.20feed/near/495568717\">said</a>:</p>\n<blockquote>\n<p>Going from current snapshot of all the PRs to pinging when the state of a PR changes might be a little tricky since the action will need to keep track of the last state as well, right? The current data file could easily be used in a daily report message bot though. </p>\n<p>For PR status changes, I think the simplest thing to do might be to tack on some code to mathlib's emoji reaction bots (see the 3 files starting with <code>zulip_emoji</code> <a href=\"https://github.com/leanprover-community/mathlib4/tree/master/.github/workflows\">here</a>) which send messages to certain channels when they happen to be triggered by PRs with the infinity-cosmos label. This could also be useful to other formalization projects downstream of mathlib (with other labels and channels, of course).</p>\n</blockquote>\n<p>The .json file has a time of the last change (in UTC); you can compare that with the current time. That said: if all you want to do is ping this channel whenever an awaiting-author, blocked or merge-conflict label is changed, using a github workflow is definitely easier.</p>",
        "id": 495577690,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1737662998
    },
    {
        "content": "<p>If you want to post a daily/weekly report --- say, a summary of open infinity-cosmos PR, with e.g. their diff size, current state and when that state last changed, a .json file could be more useful. Computing \"the last real change\" requires tracking state, which the queueboard already does for you.</p>",
        "id": 495578007,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1737663139
    },
    {
        "content": "<p>My experience suggests that</p>\n<ul>\n<li>a daily/weekly post on Zulip works very well with an action;</li>\n<li>a post/reaction on Zulip when a label is applied also works well with an action;</li>\n<li>looking at the state probably works well by opening the <a href=\"https://jcommelin.github.io/queueboard/\">#queueboard</a> and watching it when you feel like it <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span></li>\n</ul>",
        "id": 495578235,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1737663247
    },
    {
        "content": "<p>Point taken about the last one :-)</p>",
        "id": 495578362,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1737663328
    },
    {
        "content": "<p>I mean to say: it contains a <em>wealth</em> of useful information that is difficult to summarize effectively and at any given moment you might prefer to apply one filter or another.  This does not work well with automation.</p>",
        "id": 495578567,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1737663427
    },
    {
        "content": "<p>The other points are \"blind\": a label is applied, I do something.  There is introspection, it is just a reaction.</p>",
        "id": 495578612,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1737663462
    },
    {
        "content": "<p>(There is currently no table of <em>all</em> open PRs on the queueboard; the best approximation is <a href=\"https://jcommelin.github.io/queueboard/on_the_queue.html\">this page</a>. It would be very easy to add, though.)</p>",
        "id": 495578646,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1737663482
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"321459\">Damiano Testa</span> <a href=\"#narrow/channel/455414-Infinity-Cosmos/topic/infinity-cosmos.20PR.20feed/near/495576017\">said</a>:</p>\n<blockquote>\n<p>Bryan understands this better than I do, and I think that simply using different bots for different actions, might mean that <em>each bot</em> gets a new quota.</p>\n</blockquote>\n<p>The bots which tend to use a lot of github API calls (merge conflicts, dependent issues are the two that come to mind) indeed have associated github accounts with separate quotas. I wouldn't worry too much about the other bots (for now) since I haven't seen any evidence that we're close to the limit.</p>",
        "id": 495579510,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1737663860
    },
    {
        "content": "<p>Bryan, thanks for the reassurance!</p>",
        "id": 495580029,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1737664085
    },
    {
        "content": "<p>Anyway, I'm happy to try to find a good automation for projects downstream of mathlib that intend to upstream parts of their code and Infinity-Cosmos seems like a good starting point!</p>",
        "id": 495580451,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1737664281
    },
    {
        "content": "<p>Another thought: LeanCamCombi has an <a href=\"https://yaeldillies.github.io/LeanCamCombi/upstreaming\">upstreaming dashboard</a>: the project has a structured layout (material ready for mathlib goes in a <code>ToMathlib</code> folder, with folder structure mirroring mathlib exactly). This makes it very easy to keep track of which files can be upstreamed already.</p>\n<p>The dashboard shows which of these files have open PRs against them. I haven't worked on that project, but imagine that to be potentially quite useful.</p>",
        "id": 495585767,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1737666544
    },
    {
        "content": "<p>Oh, that's very neat.</p>",
        "id": 495588417,
        "sender_full_name": "Nick Ward",
        "timestamp": 1737667639
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"634338\">Michael Rothgang</span> <a href=\"#narrow/channel/455414-Infinity-Cosmos/topic/infinity-cosmos.20PR.20feed/near/495585767\">said</a>:</p>\n<blockquote>\n<p>LeanCamCombi has an <a href=\"https://yaeldillies.github.io/LeanCamCombi/upstreaming\">upstreaming dashboard</a></p>\n</blockquote>\n<p><span class=\"user-mention\" data-user-id=\"246635\">@Emily Riehl</span> have you seen the LeanCamCombi dashboard mentioned above?</p>",
        "id": 495588656,
        "sender_full_name": "Nick Ward",
        "timestamp": 1737667739
    },
    {
        "content": "<p>I think something like that would be great to have when it's time to <em>do maintenance</em>. On the other hand, a zulip bot would be a great tool to passively keep track of what maintenance needs to be done.</p>",
        "id": 495589184,
        "sender_full_name": "Nick Ward",
        "timestamp": 1737667948
    },
    {
        "content": "<p>I can help with the bot, but my Lean time for this week is essentially over.  I could write something next week, though of course others may be able to help sooner!</p>",
        "id": 495590122,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1737668348
    },
    {
        "content": "<p>There are already a couple of bots that post weekly reports to mathlib: modifying either one of them would be easy.  The main question is what kind of information you would like to see.</p>",
        "id": 495590197,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1737668391
    },
    {
        "content": "<p>Most things are doable, quite a few of them easily, others with a little more effort!  <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 495590291,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1737668418
    },
    {
        "content": "<p>I will check back in here if I have a chance to dust off the old python interpreter before then.</p>",
        "id": 495592533,
        "sender_full_name": "Nick Ward",
        "timestamp": 1737669433
    },
    {
        "content": "<p>I might have some time over the weekend to put together something adding steps to our current bots to post Zulip messages on tagged PR status changes; glad to help with any questions if you want to give it a go before then though!</p>\n<p><strong>edit</strong> (2025/01/28): I've started on this, but I don't have anything worth sharing yet... maybe in a few more days.</p>",
        "id": 495595820,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1737670967
    },
    {
        "content": "<p>Some PRs upstreamed from PFR use <code>From PFR</code> in their commit message.  <a href=\"#narrow/channel/116290-rss/topic/Recent.20Commits.20to.20mathlib4.3Amaster/near/495944598\">This one</a>, for instance.</p>\n<p>This seems like a good compromise: <code>From &lt;project-dependent-string&gt;</code> makes CI aware of the project.</p>",
        "id": 495947899,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1737881168
    },
    {
        "content": "<p>I'm cleaning up my zulip channels: it appears this discussion has converged on a solution and no help from me is needed.</p>",
        "id": 497266806,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1738510234
    },
    {
        "content": "<p>There is a dashboard of all PRs now (<a href=\"https://jcommelin.github.io/queueboard/triage.html#all\">https://jcommelin.github.io/queueboard/triage.html#all</a>).</p>",
        "id": 497266934,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1738510336
    },
    {
        "content": "<p>I will unsubscribe from this channel now: if you want to ask me again, please re-add me. Thanks!</p>",
        "id": 497266980,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1738510397
    },
    {
        "content": "<p>Thanks for the help!</p>",
        "id": 497270272,
        "sender_full_name": "Nick Ward",
        "timestamp": 1738513358
    }
]