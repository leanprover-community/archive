[
    {
        "content": "<p>Hi, I have been trying to work with isomorphisms. On paper, a 1-simplex <code>f</code> is an iso if there is an \"inverse\" 1-simplex <code>f^-1</code> and two 2-simplices that fill the two inner horns given by <code>f</code> and <code>f^-1</code> its inverse.<br>\nAs far as I can see, formalizing the statement \"that fill the inner horns\" boils down to about 3 equalities per 2-simplex. Now, what data do we make part of the definition, and what data will we derive? For example, I can think of 3 structures, shown below.<br>\nOne of the considerations for which data will be part of the structure is (I believe) whether <code>(f^-1)^-1</code> will be definitionally equal to <code>f</code> (this only holds for <code>isIso''</code>). Are there other considerations?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"c1\">-- Naively, an iso structure consists of an inverse, two 2-simplices, and equalities relating the 2-simplices to the 1-simplices</span>\n<span class=\"kn\">structure</span><span class=\"w\"> </span><span class=\"n\">isIso</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">SSet</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hom</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">_⦋</span><span class=\"mi\">1</span><span class=\"bp\">⦌</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">inv</span><span class=\"w\">            </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">_⦋</span><span class=\"mi\">1</span><span class=\"bp\">⦌</span>\n<span class=\"w\">  </span><span class=\"n\">hom_inv_id</span><span class=\"w\">     </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">_⦋</span><span class=\"mi\">2</span><span class=\"bp\">⦌</span>\n<span class=\"w\">  </span><span class=\"n\">inv_hom_id</span><span class=\"w\">     </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">_⦋</span><span class=\"mi\">2</span><span class=\"bp\">⦌</span>\n<span class=\"w\">  </span><span class=\"n\">hom_inv_id_hom</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">δ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">hom_inv_id</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">hom</span>\n<span class=\"w\">  </span><span class=\"n\">hom_inv_id_inv</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">δ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">hom_inv_id</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">inv</span>\n<span class=\"w\">  </span><span class=\"n\">hom_inv_id_id</span><span class=\"w\">  </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">δ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">hom_inv_id</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">δ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">hom</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"n\">inv_hom_id_inv</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">δ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">inv_hom_id</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">inv</span>\n<span class=\"w\">  </span><span class=\"n\">inv_hom_id_hom</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">δ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">inv_hom_id</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">hom</span>\n<span class=\"w\">  </span><span class=\"n\">inv_hom_id_id</span><span class=\"w\">  </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">δ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">inv_hom_id</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">δ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">hom</span><span class=\"o\">)</span>\n\n<span class=\"c1\">-- Since the identities have been defined in terms of hom, we need to do some work for the relation between the 2-simplices and the identities on the endpoints</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">isIso_inv</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">SSet</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hom</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">_⦋</span><span class=\"mi\">1</span><span class=\"bp\">⦌</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">isIso</span><span class=\"w\"> </span><span class=\"n\">hom</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">isIso</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"bp\">.</span><span class=\"n\">inv</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">    </span><span class=\"n\">inv</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">hom</span>\n<span class=\"w\">    </span><span class=\"o\">[</span><span class=\"bp\">...</span><span class=\"w\"> </span><span class=\"n\">Some</span><span class=\"w\"> </span><span class=\"n\">fields</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">different</span><span class=\"w\"> </span><span class=\"n\">order</span><span class=\"w\"> </span><span class=\"bp\">...</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"n\">hom_inv_id_id</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">      </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"bp\">.</span><span class=\"n\">inv_hom_id_id</span><span class=\"bp\">.</span><span class=\"n\">trans</span>\n<span class=\"w\">      </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">congr_arg</span>\n<span class=\"w\">      </span><span class=\"n\">nth_rw</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"bp\">.</span><span class=\"n\">hom_inv_id_hom</span><span class=\"o\">]</span>\n<span class=\"w\">      </span><span class=\"n\">nth_rw</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"bp\">.</span><span class=\"n\">hom_inv_id_inv</span><span class=\"o\">]</span>\n<span class=\"w\">      </span><span class=\"n\">unfold</span><span class=\"w\"> </span><span class=\"n\">SimplicialObject</span><span class=\"bp\">.</span><span class=\"n\">δ</span>\n<span class=\"w\">      </span><span class=\"k\">show</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">≫</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">≫</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"o\">)</span>\n<span class=\"w\">      </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">map_comp</span><span class=\"o\">]</span>\n<span class=\"w\">      </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">map_comp</span><span class=\"o\">]</span>\n<span class=\"w\">      </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">congr_arg</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"o\">)</span>\n<span class=\"w\">      </span><span class=\"n\">decide</span>\n<span class=\"w\">    </span><span class=\"n\">inv_hom_id_id</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">      </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"bp\">.</span><span class=\"n\">hom_inv_id_id</span><span class=\"bp\">.</span><span class=\"n\">trans</span>\n<span class=\"w\">      </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">congr_arg</span>\n<span class=\"w\">      </span><span class=\"n\">nth_rw</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"bp\">.</span><span class=\"n\">inv_hom_id_hom</span><span class=\"o\">]</span>\n<span class=\"w\">      </span><span class=\"n\">nth_rw</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"bp\">.</span><span class=\"n\">inv_hom_id_inv</span><span class=\"o\">]</span>\n<span class=\"w\">      </span><span class=\"n\">unfold</span><span class=\"w\"> </span><span class=\"n\">SimplicialObject</span><span class=\"bp\">.</span><span class=\"n\">δ</span>\n<span class=\"w\">      </span><span class=\"k\">show</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">≫</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">≫</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"o\">)</span>\n<span class=\"w\">      </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">map_comp</span><span class=\"o\">]</span>\n<span class=\"w\">      </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">map_comp</span><span class=\"o\">]</span>\n<span class=\"w\">      </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">congr_arg</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"o\">)</span>\n<span class=\"w\">      </span><span class=\"n\">decide</span>\n\n<span class=\"c1\">-- We can also leave out the inverse</span>\n<span class=\"kn\">structure</span><span class=\"w\"> </span><span class=\"n\">isIso'</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">SSet</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hom</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">_⦋</span><span class=\"mi\">1</span><span class=\"bp\">⦌</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">hom_inv_id</span><span class=\"w\">     </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">_⦋</span><span class=\"mi\">2</span><span class=\"bp\">⦌</span>\n<span class=\"w\">  </span><span class=\"n\">inv_hom_id</span><span class=\"w\">     </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">_⦋</span><span class=\"mi\">2</span><span class=\"bp\">⦌</span>\n<span class=\"w\">  </span><span class=\"n\">hom_inv_id_hom</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">δ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">hom_inv_id</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">hom</span>\n<span class=\"w\">  </span><span class=\"n\">hom_inv_id_id</span><span class=\"w\">  </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">δ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">hom_inv_id</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">δ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">hom</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"n\">inv_hom_id_inv</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">δ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">inv_hom_id</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">δ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">hom_inv_id</span>\n<span class=\"w\">  </span><span class=\"n\">inv_hom_id_hom</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">δ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">inv_hom_id</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">hom</span>\n<span class=\"w\">  </span><span class=\"n\">inv_hom_id_id</span><span class=\"w\">  </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">δ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">inv_hom_id</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">δ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">hom</span><span class=\"o\">)</span>\n\n<span class=\"c1\">-- Because we have more asymmetric data, we need to do more work here</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">isIso'_inv</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">SSet</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hom</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">_⦋</span><span class=\"mi\">1</span><span class=\"bp\">⦌</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">isIso'</span><span class=\"w\"> </span><span class=\"n\">hom</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">isIso'</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">δ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"bp\">.</span><span class=\"n\">hom_inv_id</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">    </span><span class=\"o\">[</span><span class=\"bp\">...</span><span class=\"w\"> </span><span class=\"n\">Some</span><span class=\"w\"> </span><span class=\"n\">fields</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">different</span><span class=\"w\"> </span><span class=\"n\">order</span><span class=\"w\"> </span><span class=\"bp\">...</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"n\">hom_inv_id_id</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">      </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"bp\">.</span><span class=\"n\">inv_hom_id_id</span><span class=\"bp\">.</span><span class=\"n\">trans</span>\n<span class=\"w\">      </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">congr_arg</span>\n<span class=\"w\">      </span><span class=\"n\">nth_rw</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"bp\">.</span><span class=\"n\">hom_inv_id_hom</span><span class=\"o\">]</span>\n<span class=\"w\">      </span><span class=\"n\">unfold</span><span class=\"w\"> </span><span class=\"n\">SimplicialObject</span><span class=\"bp\">.</span><span class=\"n\">δ</span>\n<span class=\"w\">      </span><span class=\"k\">show</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">≫</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">≫</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"o\">)</span>\n<span class=\"w\">      </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">map_comp</span><span class=\"o\">]</span>\n<span class=\"w\">      </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">map_comp</span><span class=\"o\">]</span>\n<span class=\"w\">      </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">congr_arg</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"o\">)</span>\n<span class=\"w\">      </span><span class=\"n\">decide</span>\n<span class=\"w\">    </span><span class=\"n\">inv_hom_id_inv</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">      </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"bp\">.</span><span class=\"n\">hom_inv_id_hom</span><span class=\"bp\">.</span><span class=\"n\">trans</span>\n<span class=\"w\">      </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"bp\">.</span><span class=\"n\">inv_hom_id_hom</span><span class=\"bp\">.</span><span class=\"n\">symm</span>\n<span class=\"w\">    </span><span class=\"n\">inv_hom_id_hom</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">rfl</span>\n<span class=\"w\">    </span><span class=\"n\">inv_hom_id_id</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">      </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"bp\">.</span><span class=\"n\">hom_inv_id_id</span><span class=\"bp\">.</span><span class=\"n\">trans</span>\n<span class=\"w\">      </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">congr_arg</span>\n<span class=\"w\">      </span><span class=\"n\">nth_rw</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"bp\">.</span><span class=\"n\">inv_hom_id_hom</span><span class=\"o\">]</span>\n<span class=\"w\">      </span><span class=\"n\">nth_rw</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"bp\">.</span><span class=\"n\">inv_hom_id_inv</span><span class=\"o\">]</span>\n<span class=\"w\">      </span><span class=\"n\">unfold</span><span class=\"w\"> </span><span class=\"n\">SimplicialObject</span><span class=\"bp\">.</span><span class=\"n\">δ</span>\n<span class=\"w\">      </span><span class=\"k\">show</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">≫</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">≫</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"o\">)</span>\n<span class=\"w\">      </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">map_comp</span><span class=\"o\">]</span>\n<span class=\"w\">      </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">map_comp</span><span class=\"o\">]</span>\n<span class=\"w\">      </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">congr_arg</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"o\">)</span>\n<span class=\"w\">      </span><span class=\"n\">decide</span>\n\n<span class=\"c1\">-- In the other direction, we can include the endpoints in the data</span>\n<span class=\"kn\">structure</span><span class=\"w\"> </span><span class=\"n\">isIso''</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">SSet</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hom</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">_⦋</span><span class=\"mi\">1</span><span class=\"bp\">⦌</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">pt₀</span><span class=\"w\">            </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">_⦋</span><span class=\"mi\">0</span><span class=\"bp\">⦌</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">δ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">hom</span>\n<span class=\"w\">  </span><span class=\"n\">pt₁</span><span class=\"w\">            </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">_⦋</span><span class=\"mi\">0</span><span class=\"bp\">⦌</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">δ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">hom</span>\n<span class=\"w\">  </span><span class=\"n\">inv</span><span class=\"w\">            </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">_⦋</span><span class=\"mi\">1</span><span class=\"bp\">⦌</span>\n<span class=\"w\">  </span><span class=\"n\">hom_inv_id</span><span class=\"w\">     </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">_⦋</span><span class=\"mi\">2</span><span class=\"bp\">⦌</span>\n<span class=\"w\">  </span><span class=\"n\">inv_hom_id</span><span class=\"w\">     </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">_⦋</span><span class=\"mi\">2</span><span class=\"bp\">⦌</span>\n<span class=\"w\">  </span><span class=\"n\">hom_inv_id_hom</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">δ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">hom_inv_id</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">hom</span>\n<span class=\"w\">  </span><span class=\"n\">hom_inv_id_inv</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">δ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">hom_inv_id</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">inv</span>\n<span class=\"w\">  </span><span class=\"n\">hom_inv_id_id</span><span class=\"w\">  </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">δ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">hom_inv_id</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">pt₀</span>\n<span class=\"w\">  </span><span class=\"n\">inv_hom_id_inv</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">δ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">inv_hom_id</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">inv</span>\n<span class=\"w\">  </span><span class=\"n\">inv_hom_id_hom</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">δ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">inv_hom_id</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">hom</span>\n<span class=\"w\">  </span><span class=\"n\">inv_hom_id_id</span><span class=\"w\">  </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">δ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">inv_hom_id</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">pt₁</span>\n\n<span class=\"c1\">-- Now, we can make the inverse of the inverse definitionally equal to hom</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">isIso''_inv</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">SSet</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hom</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">_⦋</span><span class=\"mi\">1</span><span class=\"bp\">⦌</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">isIso''</span><span class=\"w\"> </span><span class=\"n\">hom</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">isIso''</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"bp\">.</span><span class=\"n\">inv</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">    </span><span class=\"n\">pt₀</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"bp\">.</span><span class=\"n\">pt₁</span>\n<span class=\"w\">    </span><span class=\"n\">pt₁</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"bp\">.</span><span class=\"n\">pt₀</span>\n<span class=\"w\">    </span><span class=\"n\">inv</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">hom</span>\n<span class=\"w\">    </span><span class=\"o\">[</span><span class=\"n\">and</span><span class=\"w\"> </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">other</span><span class=\"w\"> </span><span class=\"n\">fields</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">different</span><span class=\"w\"> </span><span class=\"n\">order</span><span class=\"o\">]</span>\n\n<span class=\"c1\">-- We can show that the endpoints have to be the endpoints of hom and I.inv:</span>\n<span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">isIso''_hom_pt₀</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">SSet</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hom</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">_⦋</span><span class=\"mi\">1</span><span class=\"bp\">⦌</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">isIso''</span><span class=\"w\"> </span><span class=\"n\">hom</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"bp\">.</span><span class=\"n\">pt₀</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">δ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">hom</span>\n<span class=\"w\">  </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">...</span>\n<span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">isIso''_inv_pt₀</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">SSet</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hom</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">_⦋</span><span class=\"mi\">1</span><span class=\"bp\">⦌</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">isIso''</span><span class=\"w\"> </span><span class=\"n\">hom</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"bp\">.</span><span class=\"n\">pt₀</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">δ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"bp\">.</span><span class=\"n\">inv</span>\n<span class=\"w\">  </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">...</span>\n</code></pre></div>\n<p>Ps. Also, I'm new here, and do not know what lemmas have already been formalized, and how, so there is probably a lot to improve in my code. Feel free to comment on that here, or to wait until I file a PR (one or the other might be better, depending on the nature of the comments :-) )</p>",
        "id": 565788940,
        "sender_full_name": "Arnoud van der Leer",
        "timestamp": 1767101484
    },
    {
        "content": "<p>Please look at <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=SSet.Edge.CompStruct#doc\">docs#SSet.Edge.CompStruct</a></p>",
        "id": 565789852,
        "sender_full_name": "Joël Riou",
        "timestamp": 1767102034
    },
    {
        "content": "<p>How do we define the start and end points of hom? We need that to define inv as an Edge from end to start.</p>",
        "id": 565792945,
        "sender_full_name": "Arnoud van der Leer",
        "timestamp": 1767103786
    },
    {
        "content": "<p>So do we take the isIso'' route, defining these end points as the first pieces of data, and going from there?</p>",
        "id": 565793100,
        "sender_full_name": "Arnoud van der Leer",
        "timestamp": 1767103885
    },
    {
        "content": "<p>With<br>\nx0 x1 : X_[0]<br>\ninv : Edge x1 x2<br>\nhom_inv_id : CompStruct hom inv (id x0)<br>\ninv_hom_id : CompStruct inv hom (id x1)</p>",
        "id": 565793497,
        "sender_full_name": "Arnoud van der Leer",
        "timestamp": 1767104148
    },
    {
        "content": "<p>The \"hom\" should also be an <code>Edge</code>.</p>",
        "id": 565798953,
        "sender_full_name": "Joël Riou",
        "timestamp": 1767107481
    },
    {
        "content": "<p>Ah, of course</p>",
        "id": 565808645,
        "sender_full_name": "Arnoud van der Leer",
        "timestamp": 1767112958
    },
    {
        "content": "<p>The definition becomes a bit cleaner. However, when using this, a lot of the goals start mentioning truncation:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"o\">((</span><span class=\"n\">truncation</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">obj</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">SimplexCategory</span><span class=\"bp\">.</span><span class=\"n\">Truncated</span><span class=\"bp\">.</span><span class=\"n\">δ₂</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">⋯</span><span class=\"w\"> </span><span class=\"bp\">⋯</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">op</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">yonedaEquiv</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hom_inv_id</span><span class=\"w\"> </span><span class=\"bp\">≫</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"bp\">.</span><span class=\"n\">toTruncated</span><span class=\"bp\">.</span><span class=\"n\">edge</span>\n</code></pre></div>\n<p>What is the right way to deal with this? Currently, it takes a couple of steps (in each proof) to simplify away enough of the truncation terms. Is there a nice lemma that I could use instead, that states for example that if these edges are equal, then their images after truncation are also equal, or something?</p>",
        "id": 565877126,
        "sender_full_name": "Arnoud van der Leer",
        "timestamp": 1767172165
    },
    {
        "content": "<p>Also, I am considering adding a constructor for isos.<br>\nIn my original proposal, the fact that hom and inv are equal to faces of a 2-simplex ensures that the start (resp end) point of hom is the end (resp start) point of inv.<br>\nHowever, in this new structure, since hom and inv are edges, we need to show this explicitly.<br>\nIs such a constructor a good idea? Something along the lines of this?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">isIso</span><span class=\"bp\">.</span><span class=\"n\">mk'</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">SSet</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hom</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">_⦋</span><span class=\"mi\">1</span><span class=\"bp\">⦌</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">inv</span><span class=\"w\">            </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">_⦋</span><span class=\"mi\">1</span><span class=\"bp\">⦌</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">hom_inv_id</span><span class=\"w\">     </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">_⦋</span><span class=\"mi\">2</span><span class=\"bp\">⦌</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">inv_hom_id</span><span class=\"w\">     </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">_⦋</span><span class=\"mi\">2</span><span class=\"bp\">⦌</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">hom_inv_id_hom</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">δ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">hom_inv_id</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">hom</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">hom_inv_id_inv</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">δ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">hom_inv_id</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">inv</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">hom_inv_id_id</span><span class=\"w\">  </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">δ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">hom_inv_id</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">δ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">hom</span><span class=\"o\">))</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">inv_hom_id_inv</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">δ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">inv_hom_id</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">inv</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">inv_hom_id_hom</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">δ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">inv_hom_id</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">hom</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">inv_hom_id_id</span><span class=\"w\">  </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">δ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">inv_hom_id</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">δ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">hom</span><span class=\"o\">))</span>\n<span class=\"w\">  </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">isIso</span><span class=\"w\"> </span><span class=\"o\">{</span>\n<span class=\"w\">    </span><span class=\"n\">edge</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">hom</span>\n<span class=\"w\">    </span><span class=\"n\">src_eq</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">rfl</span>\n<span class=\"w\">    </span><span class=\"n\">tgt_eq</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">rfl</span>\n<span class=\"w\">  </span><span class=\"o\">}</span>\n</code></pre></div>",
        "id": 565879758,
        "sender_full_name": "Arnoud van der Leer",
        "timestamp": 1767173828
    },
    {
        "content": "<p>Using <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=SSet.Edge.CompStruct.mk#doc\">docs#SSet.Edge.CompStruct.mk</a> should avoid the appearance of truncations. I am not convinced there is a need for another constructor for isos because in many cases the <code>src_eq/tgt_eq</code> are obtained by <code>rfl</code> anyway.<br>\nIn terms of design, it seems more appropriate to me to define first an<code>Iso</code> structure (with <code>hom</code> and <code>inv</code> fields) rather than <code>IsIso</code>.</p>",
        "id": 565885016,
        "sender_full_name": "Joël Riou",
        "timestamp": 1767177921
    },
    {
        "content": "<p>Ah, thanks.<br>\nThen how would you state <a href=\"https://emilyriehl.github.io/infinity-cosmos/blueprint/sec-homotopy-category.html#prop:coherent-iso\">https://emilyriehl.github.io/infinity-cosmos/blueprint/sec-homotopy-category.html#prop:coherent-iso</a>?</p>",
        "id": 565977616,
        "sender_full_name": "Arnoud van der Leer",
        "timestamp": 1767273412
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"459699\">Joël Riou</span> <a href=\"#narrow/channel/455414-Infinity-Cosmos/topic/The.20structure.20of.20an.20iso/near/565885016\">said</a>:</p>\n<blockquote>\n<p>...in many cases the <code>src_eq/tgt_eq</code> are obtained by <code>rfl</code> anyway.</p>\n</blockquote>\n<p>And are you sure that in many cases, we have</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">δ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">hom</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">δ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">inv</span>\n</code></pre></div>\n<p>definitionally? Because in the first nontrivial case that I worked on, <code>inv := {edge := yonedaEquiv (coherentIso.inv ≫ g), ...}</code>, which means we do not have this definitional equality.</p>",
        "id": 565981037,
        "sender_full_name": "Arnoud van der Leer",
        "timestamp": 1767277091
    },
    {
        "content": "<p>For <code>rfl</code>, I was thinking of explicit examples in nerves of \"decidable\" categories.<br>\nI do not think it would be a problem phrasing the relation with <code>cohrentIso</code> using <code>Iso</code> rather than <code>IsIso</code> (the name is a little bit problematic as <code>Is...</code> is expected to be a <code>Prop</code>). The real difficulties would appear for the proof!</p>",
        "id": 565982207,
        "sender_full_name": "Joël Riou",
        "timestamp": 1767278236
    },
    {
        "content": "<p>How would you phrase it?<br>\nBecause \"There is an equivalence between iso structures on <code>f</code> iff its Yoneda lift <code>Δ⦋1⦌ ⟶ X</code> factors through the embedding into <code>coherentIso</code>\" is a stronger statement than \"The isos in <code>X</code> are equivalent to the maps <code>coherentIso ⟶ X</code>\".</p>",
        "id": 565982379,
        "sender_full_name": "Arnoud van der Leer",
        "timestamp": 1767278444
    },
    {
        "content": "<p>I did not suggest changing the statement.</p>",
        "id": 565982425,
        "sender_full_name": "Joël Riou",
        "timestamp": 1767278522
    },
    {
        "content": "<p>I would state that result as a logical equivalence between propositions. There's a way to understand this result as a weak equivalence of types but here weak equivalence means in the sense of the Joyal model structure and not in the sense of mathlibs equivalence of types (which is an isomorphism) in the category of types.</p>\n<p>So the statement is that a given 1-simplex f in <code>X</code> admits the IsIso structure you define if and only if there is a map from <code>coherentIso</code> to <code>X</code> that restricts to <code>f</code> on one of the edges.</p>",
        "id": 565994317,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1767293346
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"246635\">Emily Riehl</span> <a href=\"#narrow/channel/455414-Infinity-Cosmos/topic/The.20structure.20of.20an.20iso/near/565994317\">said</a>:</p>\n<blockquote>\n<p>I would state that result as a logical equivalence between propositions.<br>\n...<br>\nSo the statement is that a given 1-simplex f in <code>X</code> admits the IsIso structure you define if and only if there is a map from <code>coherentIso</code> to <code>X</code> that restricts to <code>f</code> on one of the edges.</p>\n</blockquote>\n<p>I agree. Although these are not propositions (hProp), since IsIso can have multiple nonequivalent members, right?</p>",
        "id": 565994585,
        "sender_full_name": "Arnoud van der Leer",
        "timestamp": 1767293715
    },
    {
        "content": "<p>The LHS could be something like <code>∃ (e : Edge.Iso x₀ x₁), e.hom = f</code> where <code>Edge.Iso</code> is the structure considered above. Equivalently, the morphism induced by <code>f</code> in the homotopy category is an isomorphism (in the sense of <code>CategoryTheory.IsIso</code>).<br>\nI do not know the proof (the hard part must be to construct a morphism from <code>coherentIso</code> from an isomorphism), but I would assume that from <code>e : Edge.Iso x₀ x₁</code> as above, it should be possible to ensure that two obvious <code>1</code>-simplices of <code>coherentIso</code> are mapped to <code>e.hom</code> and <code>e.inv</code> respectively (and hopefully, there are <code>2</code>-simplices that are mapped to the given <code>homInvId</code> and <code>invHomId</code>).</p>",
        "id": 565995493,
        "sender_full_name": "Joël Riou",
        "timestamp": 1767294820
    },
    {
        "content": "<p>So I'm trying to understand</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">F</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">isIso</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">coherentIso</span><span class=\"w\"> </span><span class=\"bp\">⟶</span><span class=\"w\"> </span><span class=\"n\">X</span>\n</code></pre></div>\n<p>by constructing it explicitly. Everything up and including the 2-simplices is fairly trivial: Given</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"w\">  </span><span class=\"n\">hom</span><span class=\"w\">            </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Edge</span><span class=\"w\"> </span><span class=\"n\">x₀</span><span class=\"w\"> </span><span class=\"n\">x₁</span>\n<span class=\"w\">  </span><span class=\"n\">inv</span><span class=\"w\">            </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Edge</span><span class=\"w\"> </span><span class=\"n\">x₁</span><span class=\"w\"> </span><span class=\"n\">x₀</span>\n<span class=\"w\">  </span><span class=\"n\">hom_inv_id</span><span class=\"w\">     </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Edge</span><span class=\"bp\">.</span><span class=\"n\">CompStruct</span><span class=\"w\"> </span><span class=\"n\">hom</span><span class=\"w\"> </span><span class=\"n\">inv</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Edge</span><span class=\"bp\">.</span><span class=\"n\">id</span><span class=\"w\"> </span><span class=\"n\">x₀</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"n\">inv_hom_id</span><span class=\"w\">     </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Edge</span><span class=\"bp\">.</span><span class=\"n\">CompStruct</span><span class=\"w\"> </span><span class=\"n\">inv</span><span class=\"w\"> </span><span class=\"n\">hom</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Edge</span><span class=\"bp\">.</span><span class=\"n\">id</span><span class=\"w\"> </span><span class=\"n\">x₁</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>First of all, <code>F</code> must send <code>coherentIso.σ i x</code> to <code>X.σ i (F x)</code>.<br>\nAlso, it sends <code>i : coherentIso _⦋0⦌</code> to <code>xᵢ : X _⦋0⦌</code>, <code>0 -[f]-&gt; 1 : coherentIso _⦋1⦌</code> to <code>hom : X _⦋1⦌</code> and <code>0 -[f]-&gt; 1 -[f⁻¹]-&gt; 0 : coherentIso _⦋2⦌</code> to <code>hom_inv_id : X _⦋2⦌</code> (and similarly for <code>1 -[f⁻¹]-&gt; 0</code> and <code>1 -[f⁻¹]-&gt; 0 -[f]-&gt; 1</code>)</p>\n<p>However, that is where the troubles begin. Where do we send the two nondegenerate elements of <code>coherentIso _⦋3⦌</code>? The only tool that we have, is inner horn filling. As far I understand, this goes as follows:<br>\nFor <code>g = 0 -&gt; 1 -&gt; 0 -&gt; 1 : coherentIso _⦋3⦌</code>, we have an inner horn <code>Λ¹(3) ⟶ X</code> given by <code>δ 3: hom_inv_id</code>, <code>δ 2: X.σ 1 f</code> and <code>δ 0: inv_hom_id</code>. This horn has a filling <code>H</code>. We could try to set <code>F g</code> to be <code>H</code>. Now, this satisfies most of the requirements:</p>\n<ul>\n<li><code>X.δ 0 (F g) = X.δ 0 H = inv_hom_id = F(coherentIso.δ 0 g)</code></li>\n<li><code>X.δ 2 (F g) = X.δ 2 H = X.σ 1 f = F(coherentIso.δ 2 g)</code></li>\n<li><code>X.δ 3 (F g) = X.δ 3 H = hom_inv_id = F(coherentIso.δ 3 g)</code></li>\n</ul>\n<p>However, how do we know that <code>X.δ 1 H = F(coherentIso.δ 1 g)</code>? There is probably some higher homotopy between them, but since a quasicategory does not have unique horn fillings, this brings us nothing. Am I missing something?</p>",
        "id": 567103608,
        "sender_full_name": "Arnoud van der Leer",
        "timestamp": 1767952105
    },
    {
        "content": "<p>This is a nontrivial result. I would suggest doing the other implication first. For this direction, I have had a quick look at the proof in 1.1.16 of [RV22]. <span class=\"user-mention\" data-user-id=\"246635\">@Emily Riehl</span> may give more clarifications, but the rough idea is to reduce to the case <code>X</code> is a Kan complex, and then obtain the map from <code>coherentIso</code> by using the right lifting property with respect to the inclusion <code>Δ[1] ⟶ coherentIso</code> which is a trivial cofibration (for the Quillen model category structure). If we know everything about this model category structure, it follows from the fact that it is a monomorphism between two contractible simplicial sets (these are nerves of categories that are equivalent to the terminal object of <code>Cat</code>). With less technology, we need to show that <code>Δ[1] ⟶ coherentIso</code> is an anodyne extension. This is exercice 1.1.v in [RV22]. The better way to show this is probably to use the notion of pairing (introduced by Sean Moss) <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/AlgebraicTopology/SimplicialSet/AnodyneExtensions/PairingCore.html\">https://leanprover-community.github.io/mathlib4_docs/Mathlib/AlgebraicTopology/SimplicialSet/AnodyneExtensions/PairingCore.html</a> because <a href=\"https://github.com/leanprover-community/mathlib4/pull/28462\">#28462</a> will show that this is an anodyne extension.<br>\n(This exact proof does not give a control about whether suitable simplices in <code>coherentIso</code> are sent to <code>inv</code>, <code>hom_inv_id</code> or <code>inv_hom_id</code>. I feel it would be interesting to examine what exactly is possible: this may involve introducing subcomplexes of <code>coherentIso</code> generated by one (or maybe two) nondegenerate <code>2</code>-simplices.)</p>",
        "id": 567156830,
        "sender_full_name": "Joël Riou",
        "timestamp": 1767969793
    },
    {
        "content": "<p>Doesn’t the reduction to Kan complexes also require Joyal’s \"special outer horn\" lemma (1.1.14)?</p>",
        "id": 567159840,
        "sender_full_name": "Robin Carlier",
        "timestamp": 1767970569
    },
    {
        "content": "<p>Ah, right, that looks very nontrivial indeed.</p>",
        "id": 567161390,
        "sender_full_name": "Arnoud van der Leer",
        "timestamp": 1767970993
    },
    {
        "content": "<p>I have done the other implication. I'll clean it up a bit more, and if I still find this fun to do at that point, I'll submit a PR :-)</p>",
        "id": 567161505,
        "sender_full_name": "Arnoud van der Leer",
        "timestamp": 1767971026
    },
    {
        "content": "<p>Ideally, this would not only be a logical equivalence, but also an equivalence of types, right?</p>",
        "id": 567161844,
        "sender_full_name": "Arnoud van der Leer",
        "timestamp": 1767971130
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"406521\">Arnoud van der Leer</span> <a href=\"#narrow/channel/455414-Infinity-Cosmos/topic/The.20structure.20of.20an.20iso/near/567161844\">said</a>:</p>\n<blockquote>\n<p>Ideally, this would not only be a logical equivalence, but also an equivalence of types, right?</p>\n</blockquote>\n<p>No, I do not think so.</p>",
        "id": 567162432,
        "sender_full_name": "Joël Riou",
        "timestamp": 1767971293
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"286014\">Robin Carlier</span> <a href=\"#narrow/channel/455414-Infinity-Cosmos/topic/The.20structure.20of.20an.20iso/near/567159840\">said</a>:</p>\n<blockquote>\n<p>Doesn’t the reduction to Kan complexes also require Joyal’s \"special outer horn\" lemma (1.1.14)?</p>\n</blockquote>\n<p>Yes, you are right!</p>",
        "id": 567162490,
        "sender_full_name": "Joël Riou",
        "timestamp": 1767971309
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"459699\">Joël Riou</span> <a href=\"#narrow/channel/455414-Infinity-Cosmos/topic/The.20structure.20of.20an.20iso/near/567162432\">said</a>:</p>\n<blockquote>\n<p>No, I do not think so.</p>\n</blockquote>\n<p>Why is that? The types here are not propositions, so a logical equivalence, while nice to have, would not express everything there is to say about the relation between these types. It feels like the \"wrong\" kind of equivalence to shoot for here.<br>\nI mean, there also is a logical equivalence between the natural numbers and the one-element set, but that does not tell us a lot.</p>",
        "id": 567163102,
        "sender_full_name": "Arnoud van der Leer",
        "timestamp": 1767971477
    },
    {
        "content": "<p>So do you mean</p>\n<ul>\n<li>that it is unnecessary to prove that it is an equivalence of types? </li>\n<li>that it would be impractical to prove?</li>\n<li>these types are actually not equivalent?</li>\n</ul>",
        "id": 567165487,
        "sender_full_name": "Arnoud van der Leer",
        "timestamp": 1767972066
    },
    {
        "content": "<p>I think it is two optimistic to expect these types are equivalent.</p>",
        "id": 567168865,
        "sender_full_name": "Joël Riou",
        "timestamp": 1767972974
    },
    {
        "content": "<p>Hm... If they are not, I'd expect that to be because coherentIso -&gt; has more elements.<br>\nIf we 2-truncate coherentIso and X, we have an equivalence, right?</p>",
        "id": 567171376,
        "sender_full_name": "Arnoud van der Leer",
        "timestamp": 1767973671
    },
    {
        "content": "<p>This discussion is pointless unless there is a clear answer to the last part of my message <a class=\"message-link\" href=\"/#narrow/channel/455414-Infinity-Cosmos/topic/The.20structure.20of.20an.20iso/near/567156830\">#Infinity-Cosmos &gt; The structure of an iso @ 💬</a>.</p>",
        "id": 567171986,
        "sender_full_name": "Joël Riou",
        "timestamp": 1767973841
    },
    {
        "content": "<p>I'm late to this conversation, as usual, but let me add a few comments.</p>\n<p>The first thing to clarify is that <span class=\"user-mention\" data-user-id=\"459699\">@Joël Riou</span> is right that this result is not expressible as an equivalence of types. I think of the data used to define the type <code>isIso</code> as indexed by the 2-skeleton of the coherent isomorphism. Concretely it is given by two 0-simplices, two opposing 1-simplices, and the 2-simplices with boundary discussed above.  </p>\n<p>The problem is that <code>sk_2 coherentIso</code> is an <em>incoherent</em> model of the homotopy coherent isomorphism, in that this object is not weakly equivalent (in the Joyal model structure) to <code>coherentIso</code>.</p>",
        "id": 567346609,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1768079222
    },
    {
        "content": "<p>There are various finite models of the homotopy coherent isomorphism that you can read about in any homotopy type theory book. Several of them are subcomplexes of <code>coherentIso</code>. Here's how you define them. Start by taking the <code>n</code>-skeleton for <code>n</code> at least 3. Then throw away one of the two top dimensional non-degenerate simplices (either one). The resulting objects are models of the homotopy coherent isomorphism. In <em>Elements of Infinity-Category Theory</em> we call them <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mi>E</mi><mi>n</mi><mo>−</mo></msubsup></mrow><annotation encoding=\"application/x-tex\">E^-_n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0183em;vertical-align:-0.247em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7713em;\"><span style=\"top:-2.453em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mbin mtight\">−</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.247em;\"><span></span></span></span></span></span></span></span></span></span> and <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mi>E</mi><mi>n</mi><mo>+</mo></msubsup></mrow><annotation encoding=\"application/x-tex\">E^+_n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0183em;vertical-align:-0.247em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7713em;\"><span style=\"top:-2.453em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mbin mtight\">+</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.247em;\"><span></span></span></span></span></span></span></span></span></span> where the <code>n</code> is the dimension and the <code>-</code> or <code>+</code> indicates the starting vertex of the simplex that is kept. In the bottom case <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mi>E</mi><mn>3</mn><mo>−</mo></msubsup></mrow><annotation encoding=\"application/x-tex\">E^-_3</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0778em;vertical-align:-0.2663em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8115em;\"><span style=\"top:-2.4337em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">3</span></span></span><span style=\"top:-3.1031em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mbin mtight\">−</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2663em;\"><span></span></span></span></span></span></span></span></span></span> and <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mi>E</mi><mn>3</mn><mo>+</mo></msubsup></mrow><annotation encoding=\"application/x-tex\">E^+_3</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0778em;vertical-align:-0.2663em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8115em;\"><span style=\"top:-2.4337em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">3</span></span></span><span style=\"top:-3.1031em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mbin mtight\">+</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2663em;\"><span></span></span></span></span></span></span></span></span></span> , which are isomorphic (though not as subcomplexes of <code>coherentIso</code>) define the <em>free-living adjoint equivalence</em> by adding a single 3-simplex expressing a coherence between the 2-cells of <code>sk_2coherentIso</code>.</p>",
        "id": 567346762,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1768079419
    },
    {
        "content": "<p>Now let's turn to the issue of proving that you can extend along <code>Δ[1] -&gt; coherentIso</code> assuming the 1-simplex is an isomorphism. Here's how I think about the proof.</p>",
        "id": 567346816,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1768079485
    },
    {
        "content": "<p>Step 1. Decompose this extension as a pushout of 0-horn extensions, one in each dimension. In the terminology introduced above. You're starting with the subcomplex <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mi>E</mi><mn>1</mn><mo>−</mo></msubsup></mrow><annotation encoding=\"application/x-tex\">E^-_1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0778em;vertical-align:-0.2663em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8115em;\"><span style=\"top:-2.4337em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span><span style=\"top:-3.1031em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mbin mtight\">−</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2663em;\"><span></span></span></span></span></span></span></span></span></span>, which contains just one of the two 1-simplices of coherent iso. The first 0-horn inclusion adds <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mi>E</mi><mn>2</mn><mo>−</mo></msubsup></mrow><annotation encoding=\"application/x-tex\">E^-_2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0778em;vertical-align:-0.2663em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8115em;\"><span style=\"top:-2.4337em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span><span style=\"top:-3.1031em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mbin mtight\">−</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2663em;\"><span></span></span></span></span></span></span></span></span></span> attached as the filler of the 0th horn and <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mi>E</mi><mn>2</mn><mo>−</mo></msubsup></mrow><annotation encoding=\"application/x-tex\">E^-_2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0778em;vertical-align:-0.2663em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8115em;\"><span style=\"top:-2.4337em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span><span style=\"top:-3.1031em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mbin mtight\">−</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2663em;\"><span></span></span></span></span></span></span></span></span></span> attached as the filler of the missing face. The next 0-horn inclusion then adds <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mi>E</mi><mn>3</mn><mo>−</mo></msubsup></mrow><annotation encoding=\"application/x-tex\">E^-_3</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0778em;vertical-align:-0.2663em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8115em;\"><span style=\"top:-2.4337em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">3</span></span></span><span style=\"top:-3.1031em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mbin mtight\">−</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2663em;\"><span></span></span></span></span></span></span></span></span></span> and <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mi>E</mi><mn>2</mn><mo>+</mo></msubsup></mrow><annotation encoding=\"application/x-tex\">E^+_2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0778em;vertical-align:-0.2663em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8115em;\"><span style=\"top:-2.4337em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span><span style=\"top:-3.1031em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mbin mtight\">+</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2663em;\"><span></span></span></span></span></span></span></span></span></span> and so on.</p>",
        "id": 567346912,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1768079620
    },
    {
        "content": "<p>Some remarks on step 1:</p>\n<ul>\n<li>The point of this construction is that by the time you're attaching the <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mi>E</mi><mi>n</mi><mo>+</mo></msubsup></mrow><annotation encoding=\"application/x-tex\">E^+_n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0183em;vertical-align:-0.247em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7713em;\"><span style=\"top:-2.453em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mbin mtight\">+</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.247em;\"><span></span></span></span></span></span></span></span></span></span> s you already have their full boundary. So you can't attach these by filling a horn at that dimension. You have to move up a dimension.</li>\n<li>This sort of construction feels relatively straightforward to me on paper but I worry that it secretly uses Reedy category theory or something to argue that the final colimit is the full <code>coherentIso</code>. Essentially I'm building a simplicial set by attaching only the non-degenerate simplices modulo their boundary. The degenerate simplices come along for free. </li>\n<li>This can also be done with right horn inclusions instead of left horn inclusions.</li>\n</ul>",
        "id": 567347090,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1768079801
    },
    {
        "content": "<p>Indeed. I worked this out on paper recently (a nice exercise), and there it seems clear that in each dimension, this crystallizes at some moment to the right set,<br>\nBut how one would even formulate all this, let alone prove it, I am not sure.</p>",
        "id": 567347296,
        "sender_full_name": "Arnoud van der Leer",
        "timestamp": 1768080041
    },
    {
        "content": "<p>Step 2: as <span class=\"user-mention\" data-user-id=\"286014\">@Robin Carlier</span> noted above is special outer horn filling. This is established via a bunch of technical lemmas in appendix D to our book (and elsewhere). Here is one way to establish it.</p>\n<p>Proposition: If a quasi-category admits extensions along the map <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mi>E</mi><mn>1</mn><mo>−</mo></msubsup><mo>→</mo><msubsup><mi>E</mi><mn>3</mn><mo>−</mo></msubsup></mrow><annotation encoding=\"application/x-tex\">E^-_1 \\to E^-_3</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0778em;vertical-align:-0.2663em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8115em;\"><span style=\"top:-2.4337em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span><span style=\"top:-3.1031em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mbin mtight\">−</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2663em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0778em;vertical-align:-0.2663em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8115em;\"><span style=\"top:-2.4337em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">3</span></span></span><span style=\"top:-3.1031em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mbin mtight\">−</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2663em;\"><span></span></span></span></span></span></span></span></span></span> then it admits extensions along left (and right) horns whose initial (respectively final) edge is an isomorphism. </p>\n<p>What this extension condition means is that if an edge in a quasi-category is an isomorphism then this can be extended to the half adjoint equivalence.</p>",
        "id": 567347341,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1768080087
    },
    {
        "content": "<p>Okay, if it is not an equivalencu of types. Would it maybe be a retraction onto isIso? (so a one-sided inverse)</p>",
        "id": 567347355,
        "sender_full_name": "Arnoud van der Leer",
        "timestamp": 1768080100
    },
    {
        "content": "<p>The construction in the proof is explained in Proposition D.4.8 in a slightly more general setting (of marked simplicial sets). But to understand the geometry, you can ignore the markings. The basic idea is to take your left horn and decompose it as a pushout join of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mi>E</mi><mn>0</mn><mo>−</mo></msubsup><mo>→</mo><msubsup><mi>E</mi><mn>1</mn><mo>−</mo></msubsup></mrow><annotation encoding=\"application/x-tex\">E^-_0 \\to E^-_1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0778em;vertical-align:-0.2663em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8115em;\"><span style=\"top:-2.4337em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span><span style=\"top:-3.1031em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mbin mtight\">−</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2663em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0778em;vertical-align:-0.2663em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8115em;\"><span style=\"top:-2.4337em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span><span style=\"top:-3.1031em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mbin mtight\">−</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2663em;\"><span></span></span></span></span></span></span></span></span></span> with a simplex boundary inclusion. You can then extend from the domain of this map to a more complicated simplicial set (see diagram (D.4.9)) using a sequence of inner horn extensions plus the extension along <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mi>E</mi><mn>1</mn><mo>−</mo></msubsup><mo>→</mo><msubsup><mi>E</mi><mn>3</mn><mo>−</mo></msubsup></mrow><annotation encoding=\"application/x-tex\">E^-_1 \\to E^-_3</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0778em;vertical-align:-0.2663em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8115em;\"><span style=\"top:-2.4337em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span><span style=\"top:-3.1031em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mbin mtight\">−</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2663em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0778em;vertical-align:-0.2663em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8115em;\"><span style=\"top:-2.4337em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">3</span></span></span><span style=\"top:-3.1031em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mbin mtight\">−</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2663em;\"><span></span></span></span></span></span></span></span></span></span>. You can find the codomain of your outer horn inside here. So this extension solves the problem. If you're trying to extend along the left horn inclusion <code>Horn n 0 -&gt; Δ[n]</code> you find it inside a partially degenerated n+2 simplex.</p>",
        "id": 567347501,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1768080294
    },
    {
        "content": "<p>Step 3. The final step is to show that all quasi-categories satisfy the condition of the proposition I just mentioned. This is rather delicate: see Proposition D.5.1. It's reminiscent of an argument from bicategory theory: namely that any equivalence can be made into an adjoint equivalence at the cost of replacing one of the 2-cells by something else. Essentially this construction is just a translation of that into simplicial sets.</p>",
        "id": 567347594,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1768080410
    },
    {
        "content": "<p>So as <span class=\"user-mention\" data-user-id=\"459699\">@Joël Riou</span> noted this is not an easy result!</p>",
        "id": 567347623,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1768080425
    },
    {
        "content": "<p>Perhaps there are simpler proofs but this is the one that I know (that doesn't rely on knowing about the characterization of the maximal sub Kan complex of a quasi-category).</p>",
        "id": 567347666,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1768080463
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"406521\">Arnoud van der Leer</span> <a href=\"#narrow/channel/455414-Infinity-Cosmos/topic/The.20structure.20of.20an.20iso/near/567347355\">said</a>:</p>\n<blockquote>\n<p>Okay, if it is not an equivalencu of types. Would it maybe be a retraction onto isIso? (so a one-sided inverse)</p>\n</blockquote>\n<p>Unfortunately, no. You can see that there is no where for the non-degenerate 3-simplices of <code>coherentIso</code> to go in <code>sk_2coherentIso</code>. In general, a simplicial set basically never retracts onto its skeleton (unless is it <code>n</code>-skeletal).</p>",
        "id": 567347769,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1768080545
    },
    {
        "content": "<p>If I understand properly your remark about \"replacing one of the 2-cells by something else\", is it correct to say that if we have an <code>IsIso</code> structure (with <code>hom</code>, <code>inv</code>, and two <code>2</code>-simplices <code>hom_inv_id</code> and <code>inv_hom_id</code> satisfying the expected properties), then it is possible to find a map from <code>coherentIso</code> which send suitable simplices to <code>hom</code>, <code>inv</code> and <code>hom_inv_id</code> (but maybe not <code>inv_hom_id</code>?).</p>",
        "id": 567347855,
        "sender_full_name": "Joël Riou",
        "timestamp": 1768080625
    }
]