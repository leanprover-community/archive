[
    {
        "content": "<p>Hello everyone! I'm writing a message to let folks know of a PR to mathlib4 with a proof that a closed monoidal category is enriched in itself: <a href=\"https://github.com/leanprover-community/mathlib4/pull/17326\">https://github.com/leanprover-community/mathlib4/pull/17326</a></p>\n<p>A question for this channel ( specifically <span class=\"user-mention\" data-user-id=\"488744\">@Jack McKoen</span>  ): as I understand, there is already an instance of SSet as a simplicial category coming from the fact that it's a category of simplicial objects. Is there a chance for errors if a file imports both instances? (tagging <span class=\"user-mention\" data-user-id=\"246635\">@Emily Riehl</span> as the one who originally noticed this)</p>",
        "id": 474090191,
        "sender_full_name": "Daniel Carranza",
        "timestamp": 1727803843
    },
    {
        "content": "<p>I think technically both instances are the same: the monoidal closed instance on <code>SSet</code> comes from <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=CategoryTheory.Functor.functorHom#doc\">docs#CategoryTheory.Functor.functorHom</a> (this is the ihom), and my enriched instance in this case also comes from <code>functorHom</code>. You use the ihom directly in your enriched instance, so in the case of simplicial sets it will be <code>functorHom</code> anyway.</p>\n<p>I still think Lean would get confused though (?), so it's probably best to do as Joel suggests here-- <a href=\"https://github.com/leanprover-community/mathlib4/pull/17326#issuecomment-2386533838\">https://github.com/leanprover-community/mathlib4/pull/17326#issuecomment-2386533838</a></p>",
        "id": 474093245,
        "sender_full_name": "Jack McKoen",
        "timestamp": 1727804834
    },
    {
        "content": "<p>Hmm, does this mean that Daniel's new construction generalises the existing one? If so, a better solution - to me - seems to be to refactor the old one to use the new one. But I haven't checked the old one, so I'm not certain</p>",
        "id": 474098978,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1727806642
    },
    {
        "content": "<p>It's not a generalisation, see: <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/CategoryTheory/Functor/FunctorHom.html#CategoryTheory.Enriched.Functor.instEnrichedCategoryFunctorType\">https://leanprover-community.github.io/mathlib4_docs/Mathlib/CategoryTheory/Functor/FunctorHom.html#CategoryTheory.Enriched.Functor.instEnrichedCategoryFunctorType</a></p>",
        "id": 474101266,
        "sender_full_name": "Jack McKoen",
        "timestamp": 1727807418
    },
    {
        "content": "<p>This says general functor categories are enriched over certain functors to type</p>",
        "id": 474101423,
        "sender_full_name": "Jack McKoen",
        "timestamp": 1727807485
    },
    {
        "content": "<p>There's a pair of rewrites <code>rw [← uncurry_eq, uncurry_curry]</code> that appears in all 3 proofs in the file. <span class=\"user-mention\" data-user-id=\"246273\">@Bhavik Mehta</span> correctly pointed out that the rewrite I <em>really</em> want is<br>\n<code>(A ◁ curry g) ≫ (ihom.ev A).app X = g</code><br>\n I experimented (locally on my machine) with making this a separate lemma with the simp attribute. The proof now goes through using a single simp wherever these two rewrites originally occurred. Is this a good candidate simp lemma to be added to the CategoryTheory/Closed/Monoidal file? (tagging <span class=\"user-mention\" data-user-id=\"246635\">@Emily Riehl</span> , the one who suggested this simplification)</p>",
        "id": 474126604,
        "sender_full_name": "Daniel Carranza",
        "timestamp": 1727816369
    },
    {
        "content": "<p>This lemma is effectively a second proof that <br>\n<code>uncurry_curry : uncurry (curry g) = g</code><br>\nbut with <code>uncurry</code> unfolded to its definition. Note<br>\n<code>uncurry_eq : uncurry (h) = (A ◁ h) ≫ (ihom.ev A).app X</code></p>",
        "id": 474128982,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1727817220
    },
    {
        "content": "<p>Here <code>uncurry_curry</code> is tagged with simp but <code>uncurry_eq</code> is not in the Closed/Monoidal file.</p>",
        "id": 474129086,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1727817265
    }
]