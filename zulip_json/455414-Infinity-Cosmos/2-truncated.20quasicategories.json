[
    {
        "content": "<p>I have opened a PR (<a href=\"https://github.com/emilyriehl/infinity-cosmos/pull/120\">https://github.com/emilyriehl/infinity-cosmos/pull/120</a>) for implementing 2-truncated quasicategories. </p>\n<p>There is certainly some things to be tidied up, but I would love to hear some feedback, for example regarding the definition of Quasicategory₂ which is the structure modelling definition 1.3.1 in the blueprint.</p>",
        "id": 513069916,
        "sender_full_name": "Julian Komaromy",
        "timestamp": 1744997563
    },
    {
        "content": "<p>Great. I'll have a look right now. Tagging <span class=\"user-mention\" data-user-id=\"459699\">@Joël Riou</span> and <span class=\"user-mention\" data-user-id=\"776338\">@Nick Ward</span> and <span class=\"user-mention\" data-user-id=\"709554\">@Kunhong Du</span> who might be interested as well.</p>",
        "id": 513070686,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1744997919
    },
    {
        "content": "<p>Does anyone have opinions on how the simplices (and other data) should be linearly ordered here?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">structure</span><span class=\"w\"> </span><span class=\"n\">horn_data</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Truncated</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">Path</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">σ₃</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">_⦋</span><span class=\"mi\">2</span><span class=\"bp\">⦌₂</span>\n<span class=\"w\">  </span><span class=\"n\">σ₀</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">_⦋</span><span class=\"mi\">2</span><span class=\"bp\">⦌₂</span>\n<span class=\"w\">  </span><span class=\"n\">σ₂</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">_⦋</span><span class=\"mi\">2</span><span class=\"bp\">⦌₂</span>\n<span class=\"w\">  </span><span class=\"n\">h₃</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">spine</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"n\">σ₃</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"bp\">.</span><span class=\"n\">interval</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"mi\">2</span>\n<span class=\"w\">  </span><span class=\"n\">h₀</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">spine</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"n\">σ₀</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"bp\">.</span><span class=\"n\">interval</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"mi\">2</span>\n<span class=\"w\">  </span><span class=\"n\">h₂₂</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">tr</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">δ</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">))</span><span class=\"bp\">.</span><span class=\"n\">op</span><span class=\"w\"> </span><span class=\"n\">σ₂</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"bp\">.</span><span class=\"n\">arrow</span><span class=\"w\"> </span><span class=\"mi\">0</span>\n<span class=\"w\">  </span><span class=\"n\">h₂₀</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">tr</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">δ</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">))</span><span class=\"bp\">.</span><span class=\"n\">op</span><span class=\"w\"> </span><span class=\"n\">σ₂</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">tr</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">δ</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">))</span><span class=\"bp\">.</span><span class=\"n\">op</span><span class=\"w\"> </span><span class=\"n\">σ₀</span>\n</code></pre></div>\n<p>I totally get the logic behind this ordering but wonder in the future if we'd prefer something monotone (either increasing or decreasing) in the subscript index.</p>",
        "id": 513079862,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1745001401
    },
    {
        "content": "<p>I'll bring a few more points here for ease of discussion. My instinct is that perhaps this structure should be made more algebraic by using a sigma type rather than an existential quantifier as the codomain of the filling operations. Or are these the same thing in Lean?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"sd\">/--</span>\n<span class=\"sd\">A 2-truncated quasicategory is a 2-truncated simplicial set with 3 properties:</span>\n<span class=\"sd\">  (2, 1)-filling</span>\n<span class=\"sd\">  (3, 1)-filling</span>\n<span class=\"sd\">  (3, 2)-filling</span>\n<span class=\"sd\">See `fill31.horn_data` and `fill31.filling_simplex` for the details of (3, 1)-filling,</span>\n<span class=\"sd\">and `fill32.horn_data` and `fill32.filling_simplex` for the details of (3, 2)-filling.</span>\n<span class=\"sd\">-/</span>\n<span class=\"kn\">structure</span><span class=\"w\"> </span><span class=\"n\">Quasicategory₂</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Truncated</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">fill21</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Path</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">_⦋</span><span class=\"mi\">2</span><span class=\"bp\">⦌₂</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">spine</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">f</span>\n<span class=\"w\">  </span><span class=\"n\">fill31</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Path</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">fill31</span><span class=\"bp\">.</span><span class=\"n\">horn_data</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"n\">σ₁</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">_⦋</span><span class=\"mi\">2</span><span class=\"bp\">⦌₂</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">fill31</span><span class=\"bp\">.</span><span class=\"n\">filling_simplex</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">σ₁</span>\n<span class=\"w\">  </span><span class=\"n\">fill32</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Path</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">fill32</span><span class=\"bp\">.</span><span class=\"n\">horn_data</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"n\">σ₁</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">_⦋</span><span class=\"mi\">2</span><span class=\"bp\">⦌₂</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">fill32</span><span class=\"bp\">.</span><span class=\"n\">filling_simplex</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">σ₁</span>\n</code></pre></div>\n<p>I wonder also whether it would be nice to make the <code>filling_simplex</code> structure type valued rather than prop valued and include the simplex as its first field?</p>",
        "id": 513081336,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1745002150
    },
    {
        "content": "<p>This numbering of simplices is consistent with what I have used when working with the fundamental groupoid of a Kan complex.</p>",
        "id": 513084354,
        "sender_full_name": "Joël Riou",
        "timestamp": 1745003553
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"246635\">Emily Riehl</span> <a href=\"#narrow/stream/455414-Infinity-Cosmos/topic/2-truncated.20quasicategories/near/513081336\">said</a>:</p>\n<blockquote>\n<p>I'll bring a few more points here for ease of discussion. My instinct is that perhaps this structure should be made more algebraic by using a sigma type rather than an existential quantifier as the codomain of the filling operations. Or are these the same thing in Lean?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"sd\">/--</span>\n<span class=\"sd\">A 2-truncated quasicategory is a 2-truncated simplicial set with 3 properties:</span>\n<span class=\"sd\">  (2, 1)-filling</span>\n<span class=\"sd\">  (3, 1)-filling</span>\n<span class=\"sd\">  (3, 2)-filling</span>\n<span class=\"sd\">See `fill31.horn_data` and `fill31.filling_simplex` for the details of (3, 1)-filling,</span>\n<span class=\"sd\">and `fill32.horn_data` and `fill32.filling_simplex` for the details of (3, 2)-filling.</span>\n<span class=\"sd\">-/</span>\n<span class=\"kn\">structure</span><span class=\"w\"> </span><span class=\"n\">Quasicategory₂</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Truncated</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">fill21</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Path</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">_⦋</span><span class=\"mi\">2</span><span class=\"bp\">⦌₂</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">spine</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">f</span>\n<span class=\"w\">  </span><span class=\"n\">fill31</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Path</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">fill31</span><span class=\"bp\">.</span><span class=\"n\">horn_data</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"n\">σ₁</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">_⦋</span><span class=\"mi\">2</span><span class=\"bp\">⦌₂</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">fill31</span><span class=\"bp\">.</span><span class=\"n\">filling_simplex</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">σ₁</span>\n<span class=\"w\">  </span><span class=\"n\">fill32</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Path</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">fill32</span><span class=\"bp\">.</span><span class=\"n\">horn_data</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"n\">σ₁</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">_⦋</span><span class=\"mi\">2</span><span class=\"bp\">⦌₂</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">fill32</span><span class=\"bp\">.</span><span class=\"n\">filling_simplex</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">σ₁</span>\n</code></pre></div>\n<p>I wonder also whether it would be nice to make the <code>filling_simplex</code> structure type valued rather than prop valued and include the simplex as its first field?</p>\n</blockquote>\n<p>Re this: I wanted to do it this way, but I chose to make it Prop valued to align with the definition of a Quasicategory, which is an existential statement.</p>",
        "id": 513086401,
        "sender_full_name": "Julian Komaromy",
        "timestamp": 1745004520
    },
    {
        "content": "<p>We should wait for <span class=\"user-mention\" data-user-id=\"459699\">@Joël Riou</span> and <span class=\"user-mention\" data-user-id=\"112680\">@Johan Commelin</span> to weigh in on this point. </p>\n<p>Overall the draft PR is great. It's cool to see the horn API used relatively seamlessly. Do you have any pain points that would be useful for the group to think about? </p>\n<p>Btw I left you a bunch of mathlib style comments (and once you integrate these I'll share a few more).</p>",
        "id": 513087074,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1745004846
    },
    {
        "content": "<p>About the design, I would suggest taking inspiration from <a href=\"https://github.com/joelriou/topcat-model-category/blob/6961e86c2cefabca4a1cedd729174c3e4a020fb5/TopCatModelCategory/SSet/FundamentalGroupoid.lean#L313-L317\">https://github.com/joelriou/topcat-model-category/blob/6961e86c2cefabca4a1cedd729174c3e4a020fb5/TopCatModelCategory/SSet/FundamentalGroupoid.lean#L313-L317</a> which is a structure <code>CompStruct</code> expressing that three \"edges\" (1-simplices which connect specific vertices) are the faces of a certain 2-simplex. This structure is very essential in my formalization of the fundamental groupoid of a Kan complex. Indeed, the equivalence relation on edges can be expressed using <code>CompStruct</code> (in two a priori different ways), and the associativity of the composition of homotopy classes follows from <a href=\"https://github.com/joelriou/topcat-model-category/blob/6961e86c2cefabca4a1cedd729174c3e4a020fb5/TopCatModelCategory/SSet/FundamentalGroupoid.lean#L388-L393\">https://github.com/joelriou/topcat-model-category/blob/6961e86c2cefabca4a1cedd729174c3e4a020fb5/TopCatModelCategory/SSet/FundamentalGroupoid.lean#L388-L393</a> It seems to me that the statement of this <code>assoc</code> definition is a convenient phrasing of the <code>(3, 1)</code>-filling that is expected for <code>2</code>-truncated quasicategories, and the proof is the fact that a quasicategory induces a <code>2</code>-truncated quasicategory. Similarly, <code>assoc'</code> should be the <code>(3,2)</code>-filling. (In the definition of 2-truncated quasicategories, I think it should be a <code>Prop</code>, and the API should provide a def which chooses a filling.)</p>",
        "id": 513091392,
        "sender_full_name": "Joël Riou",
        "timestamp": 1745006984
    },
    {
        "content": "<p>It would be nice to define also a \"2-truncated Kan complex\" (I do not know if this is standard terminology) by extending the <code>2</code>-truncated quasicategory class and adding the horn filling property for the 1-dimensional outer horns in <code>Δ[2]</code>, so that we could define the homotopy category of a 2-truncated quasi-category <code>X</code>, show that it is a groupoid when it is a <code>2</code>-truncated Kan complex. Then, define the fundamental groupoid of a Kan complex as the homotopy category of its <code>2</code>-truncation. Following this approach would just mean refactoring the content of the file <a href=\"https://github.com/joelriou/topcat-model-category/blob/master/TopCatModelCategory/SSet/FundamentalGroupoid.lean\">https://github.com/joelriou/topcat-model-category/blob/master/TopCatModelCategory/SSet/FundamentalGroupoid.lean</a> which already contains all the necessary material.</p>",
        "id": 513092950,
        "sender_full_name": "Joël Riou",
        "timestamp": 1745007789
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"459699\">Joël Riou</span> <a href=\"#narrow/channel/455414-Infinity-Cosmos/topic/2-truncated.20quasicategories/near/513091392\">said</a>:</p>\n<blockquote>\n<p>It seems to me that the statement of this <code>assoc</code> definition is a convenient phrasing of the <code>(3, 1)</code>-filling that is expected for <code>2</code>-truncated quasicategories, and the proof is the fact that a quasicategory induces a <code>2</code>-truncated quasicategory. </p>\n</blockquote>\n<p>This is indeed the same property. The main difference in formulation is that currenty the (3, 1)-filling property is formulated in terms of paths which should eventually be the spine of the filled 3-simplex. </p>\n<p>Inherently, this distinguishes 2 of the 2-simplices as those whose spine is along this path. I am not sure what advantages and disadvantages this \"asymmetric\" definition has compared to the symmetric definition as in <code>assoc</code>.</p>",
        "id": 513166992,
        "sender_full_name": "Julian Komaromy",
        "timestamp": 1745066792
    },
    {
        "content": "<p>Using <code>CompStruct</code> makes it very easy to construct the homotopy category/the fundamental groupoid.</p>",
        "id": 513171674,
        "sender_full_name": "Joël Riou",
        "timestamp": 1745070621
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"459699\">@Joël Riou</span>. If I'm reading your code correctly (on the web, so I can't click through to find all the definitions), <code>Edge x0 x1</code> is basically the type of 1-simplices from <code>x0</code> to <code>x1</code> while <code>Hom x0 x1</code> is basically the type of homotopy classes of such 1-simplices (the hom in the fundamental groupoid). </p>\n<p>Two questions:</p>\n<p>(1) the actual definition of <code>Edge x0 x1</code> seems more complicated than the (horribly named) hom in the underlying refl Quiver of a (2-truncated) simplicial set <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/AlgebraicTopology/SimplicialSet/HomotopyCat.html#SSet.OneTruncation%E2%82%82.Hom\">here</a>. Can you explain? </p>\n<p>(2) Similarly I'd like to understand exactly what is going on with the definition <code>Hom x0 x1</code>.</p>\n<p>It does seem like having something like <code>CompStruct</code> to work with seems like a good idea for understanding the homotopy category/fundamental groupoid. A key lemma is that if you have any three 1-simplices in a 2-truncated quasi-category then the corresponding arrows in the homotopy category satisfy a composition relation <code>f . g = h</code> iff there is a 2-simplex whose boundary is given by <code>f</code>, <code>g</code>, and <code>h</code>, which is very naturally stated using this <code>CompStruct</code>.</p>",
        "id": 513794031,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1745392775
    },
    {
        "content": "<p>When it comes to refactoring the PR, I don't see how one could get by only using <code>CompStruct</code>, because the edges to be filled in with a 2-simplex are not part of the data given. I guess one could do something like the following: </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">structure</span><span class=\"w\"> </span><span class=\"n\">FilledSpine</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Truncated</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">e₀₁</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">_⦋</span><span class=\"mi\">1</span><span class=\"bp\">⦌₂</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">e₁₂</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">_⦋</span><span class=\"mi\">1</span><span class=\"bp\">⦌₂</span><span class=\"o\">)</span><span class=\"w\">  </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">_⦋</span><span class=\"mi\">2</span><span class=\"bp\">⦌₂</span>\n<span class=\"w\">  </span><span class=\"n\">h₀₁</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">tr</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">δ</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">))</span><span class=\"bp\">.</span><span class=\"n\">op</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">e₀₁</span>\n<span class=\"w\">  </span><span class=\"n\">h₁₂</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">tr</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">δ</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">))</span><span class=\"bp\">.</span><span class=\"n\">op</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">e₁₂</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">comp</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Truncated</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">e₀₁</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">_⦋</span><span class=\"mi\">1</span><span class=\"bp\">⦌₂</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">e₁₂</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">_⦋</span><span class=\"mi\">1</span><span class=\"bp\">⦌₂</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">FilledSpine</span><span class=\"w\"> </span><span class=\"n\">e₀₁</span><span class=\"w\"> </span><span class=\"n\">e₁₂</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">_⦋</span><span class=\"mi\">1</span><span class=\"bp\">⦌₂</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">tr</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">δ</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">))</span><span class=\"bp\">.</span><span class=\"n\">op</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"bp\">.</span><span class=\"n\">σ</span>\n\n<span class=\"kn\">structure</span><span class=\"w\"> </span><span class=\"n\">horn_data'</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Truncated</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">Path</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">c₃</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">FilledSpine</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"bp\">.</span><span class=\"n\">arrow</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"bp\">.</span><span class=\"n\">arrow</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"n\">c₀</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">FilledSpine</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"bp\">.</span><span class=\"n\">arrow</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"bp\">.</span><span class=\"n\">arrow</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"n\">c₁</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">FilledSpine</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"bp\">.</span><span class=\"n\">arrow</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">comp</span><span class=\"w\"> </span><span class=\"n\">c₃</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 513802319,
        "sender_full_name": "Julian Komaromy",
        "timestamp": 1745395260
    },
    {
        "content": "<p>I defined <code>Edge x₀ x₁</code> as the type of morphisms <code>Δ[1] ⟶ X</code> whose restriction to the boundary <code>∂Δ[1]</code> correspond to sending <code>0</code> to <code>x₀</code> and <code>1</code> to <code>x₁</code>. (Similarly, for higher homotopy groups, I am considering maps <code>Δ[n] ⟶ X</code> that are constant on the boundary.) As this type of morphisms is a particular case of what I denoted <code>Subcomplex.RelativeMorphism</code>, I automatically get a notion of homotopy for edges and a type for the homotopy classes of these (where homotopies are defined using morphisms <code>Δ[1] ⊗ Δ[1] ⟶ X</code>; and later I show that this is equivalent to homotopies given by maps <code>Δ[2] ⟶ X</code> which are \"constant\" on one of the faces).</p>\n<p>Of course, here, we need to take a more down to earth definition so that it applies to truncated simplicial sets. As we are doing multiple things with this notion of edge, I would suggest we define a type <code>Edge x₀ x₁</code> rather than using the quiver notation <code>x₀ ⟶ x₁</code>.</p>",
        "id": 513802472,
        "sender_full_name": "Joël Riou",
        "timestamp": 1745395315
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"879277\">Julian Komaromy</span> <a href=\"#narrow/channel/455414-Infinity-Cosmos/topic/2-truncated.20quasicategories/near/513802319\">said</a>:</p>\n<blockquote>\n<p>When it comes to refactoring the PR, I don't see how one could get by only using <code>CompStruct</code>, because the edges to be filled in with a 2-simplex are not part of the data given. I guess one could do something like the following: </p>\n</blockquote>\n<p>Instead of working wih plain <code>1</code>-simplices, it is easier to work with the dependent type <code>Edge x₀ x₁</code>. Then, everything can be phrased in terms of <code>CompStruct</code>.</p>",
        "id": 513803070,
        "sender_full_name": "Joël Riou",
        "timestamp": 1745395506
    },
    {
        "content": "<p>I'm afraid that I still do not quite understand.  Is the suggestion to have </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">fill31</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">f₀₁</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Edge</span><span class=\"w\"> </span><span class=\"n\">x₀</span><span class=\"w\"> </span><span class=\"n\">x₁</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">f₁₂</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Edge</span><span class=\"w\"> </span><span class=\"n\">x₁</span><span class=\"w\"> </span><span class=\"n\">x₂</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">f₂₃</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Edge</span><span class=\"w\"> </span><span class=\"n\">x₂</span><span class=\"w\"> </span><span class=\"n\">x₃</span><span class=\"o\">}</span>\n<span class=\"w\">    </span><span class=\"o\">{</span><span class=\"n\">f₀₂</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Edge</span><span class=\"w\"> </span><span class=\"n\">x₀</span><span class=\"w\"> </span><span class=\"n\">x₂</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">f₁₃</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Edge</span><span class=\"w\"> </span><span class=\"n\">x₁</span><span class=\"w\"> </span><span class=\"n\">x₃</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">f₀₃</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Edge</span><span class=\"w\"> </span><span class=\"n\">x₀</span><span class=\"w\"> </span><span class=\"n\">x₃</span><span class=\"o\">}</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">h₀₂</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">CompStruct</span><span class=\"w\"> </span><span class=\"n\">f₀₁</span><span class=\"w\"> </span><span class=\"n\">f₁₂</span><span class=\"w\"> </span><span class=\"n\">f₀₂</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">h₁₃</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">CompStruct</span><span class=\"w\"> </span><span class=\"n\">f₁₂</span><span class=\"w\"> </span><span class=\"n\">f₂₃</span><span class=\"w\"> </span><span class=\"n\">f₁₃</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">CompStruct</span><span class=\"w\"> </span><span class=\"n\">f₀₁</span><span class=\"w\"> </span><span class=\"n\">f₁₃</span><span class=\"w\"> </span><span class=\"n\">f₀₃</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">CompStruct</span><span class=\"w\"> </span><span class=\"n\">f₀₂</span><span class=\"w\"> </span><span class=\"n\">f₂₃</span><span class=\"w\"> </span><span class=\"n\">f₀₃</span>\n</code></pre></div>\n<p>i.e. without using the <code>Path</code> API, with a definition of <br>\n<code>Edge</code> for the case of 2-truncated simplicial sets?</p>",
        "id": 513809757,
        "sender_full_name": "Julian Komaromy",
        "timestamp": 1745397509
    },
    {
        "content": "<p>Yes!</p>",
        "id": 513810640,
        "sender_full_name": "Joël Riou",
        "timestamp": 1745397716
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"879277\">@Julian Komaromy</span> will you ping me when you'd like another review of your PR? I don't want to keep you waiting just because I haven't been paying attention.</p>",
        "id": 514511572,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1745653174
    },
    {
        "content": "<p>Yes of course, I will be refactoring the PR to use<code>CompStruct</code> and I will let you know once its ready for review (probably this shouldn't take too long).</p>",
        "id": 514515244,
        "sender_full_name": "Julian Komaromy",
        "timestamp": 1745655691
    },
    {
        "content": "<p>So from our discussion, this is the API that I have now mostly proven (but I still need to substantially clean everything up):</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">structure</span><span class=\"w\"> </span><span class=\"n\">Quasicategory₂</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Truncated</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">fill21</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">x₀</span><span class=\"w\"> </span><span class=\"n\">x₁</span><span class=\"w\"> </span><span class=\"n\">x₂</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">_⦋</span><span class=\"mi\">0</span><span class=\"bp\">⦌₂</span><span class=\"o\">}</span>\n<span class=\"w\">      </span><span class=\"o\">(</span><span class=\"n\">e₀₁</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Edge</span><span class=\"w\"> </span><span class=\"n\">x₀</span><span class=\"w\"> </span><span class=\"n\">x₁</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">e₁₂</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Edge</span><span class=\"w\"> </span><span class=\"n\">x₁</span><span class=\"w\"> </span><span class=\"n\">x₂</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">      </span><span class=\"n\">Nonempty</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">Σ</span><span class=\"w\"> </span><span class=\"n\">e₀₂</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Edge</span><span class=\"w\"> </span><span class=\"n\">x₀</span><span class=\"w\"> </span><span class=\"n\">x₂</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">CompStruct</span><span class=\"w\"> </span><span class=\"n\">e₀₁</span><span class=\"w\"> </span><span class=\"n\">e₁₂</span><span class=\"w\"> </span><span class=\"n\">e₀₂</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"n\">fill31</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">x₀</span><span class=\"w\"> </span><span class=\"n\">x₁</span><span class=\"w\"> </span><span class=\"n\">x₂</span><span class=\"w\"> </span><span class=\"n\">x₃</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">_⦋</span><span class=\"mi\">0</span><span class=\"bp\">⦌₂</span><span class=\"o\">}</span>\n<span class=\"w\">      </span><span class=\"o\">{</span><span class=\"n\">e₀₁</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Edge</span><span class=\"w\"> </span><span class=\"n\">x₀</span><span class=\"w\"> </span><span class=\"n\">x₁</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">e₁₂</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Edge</span><span class=\"w\"> </span><span class=\"n\">x₁</span><span class=\"w\"> </span><span class=\"n\">x₂</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">e₂₃</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Edge</span><span class=\"w\"> </span><span class=\"n\">x₂</span><span class=\"w\"> </span><span class=\"n\">x₃</span><span class=\"o\">}</span>\n<span class=\"w\">      </span><span class=\"o\">{</span><span class=\"n\">e₀₂</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Edge</span><span class=\"w\"> </span><span class=\"n\">x₀</span><span class=\"w\"> </span><span class=\"n\">x₂</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">e₁₃</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Edge</span><span class=\"w\"> </span><span class=\"n\">x₁</span><span class=\"w\"> </span><span class=\"n\">x₃</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">e₀₃</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Edge</span><span class=\"w\"> </span><span class=\"n\">x₀</span><span class=\"w\"> </span><span class=\"n\">x₃</span><span class=\"o\">}</span>\n<span class=\"w\">      </span><span class=\"o\">(</span><span class=\"n\">f₃</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">CompStruct</span><span class=\"w\"> </span><span class=\"n\">e₀₁</span><span class=\"w\"> </span><span class=\"n\">e₁₂</span><span class=\"w\"> </span><span class=\"n\">e₀₂</span><span class=\"o\">)</span>\n<span class=\"w\">      </span><span class=\"o\">(</span><span class=\"n\">f₀</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">CompStruct</span><span class=\"w\"> </span><span class=\"n\">e₁₂</span><span class=\"w\"> </span><span class=\"n\">e₂₃</span><span class=\"w\"> </span><span class=\"n\">e₁₃</span><span class=\"o\">)</span>\n<span class=\"w\">      </span><span class=\"o\">(</span><span class=\"n\">f₂</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">CompStruct</span><span class=\"w\"> </span><span class=\"n\">e₀₁</span><span class=\"w\"> </span><span class=\"n\">e₁₃</span><span class=\"w\"> </span><span class=\"n\">e₀₃</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">      </span><span class=\"n\">Nonempty</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">CompStruct</span><span class=\"w\"> </span><span class=\"n\">e₀₂</span><span class=\"w\"> </span><span class=\"n\">e₂₃</span><span class=\"w\"> </span><span class=\"n\">e₀₃</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"c1\">-- ditto for fill32</span>\n</code></pre></div>\n<p>where </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">structure</span><span class=\"w\"> </span><span class=\"n\">Edge</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x₀</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">_⦋</span><span class=\"mi\">0</span><span class=\"bp\">⦌₂</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x₁</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">_⦋</span><span class=\"mi\">0</span><span class=\"bp\">⦌₂</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">simplex</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">_⦋</span><span class=\"mi\">1</span><span class=\"bp\">⦌₂</span>\n<span class=\"w\">  </span><span class=\"n\">h₀</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">tr</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">δ</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">))</span><span class=\"bp\">.</span><span class=\"n\">op</span><span class=\"w\"> </span><span class=\"n\">simplex</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">x₀</span>\n<span class=\"w\">  </span><span class=\"n\">h₁</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">tr</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">δ</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">))</span><span class=\"bp\">.</span><span class=\"n\">op</span><span class=\"w\"> </span><span class=\"n\">simplex</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">x₁</span>\n\n<span class=\"kn\">structure</span><span class=\"w\"> </span><span class=\"n\">CompStruct</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">e₀₁</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Edge</span><span class=\"w\"> </span><span class=\"n\">x₀</span><span class=\"w\"> </span><span class=\"n\">x₁</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">e₁₂</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Edge</span><span class=\"w\"> </span><span class=\"n\">x₁</span><span class=\"w\"> </span><span class=\"n\">x₂</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">e₀₂</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Edge</span><span class=\"w\"> </span><span class=\"n\">x₀</span><span class=\"w\"> </span><span class=\"n\">x₂</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">simplex</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">_⦋</span><span class=\"mi\">2</span><span class=\"bp\">⦌₂</span>\n<span class=\"w\">  </span><span class=\"n\">h₀₁</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">tr</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">δ</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">))</span><span class=\"bp\">.</span><span class=\"n\">op</span><span class=\"w\"> </span><span class=\"n\">simplex</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">e₀₁</span><span class=\"bp\">.</span><span class=\"n\">simplex</span>\n<span class=\"w\">  </span><span class=\"n\">h₁₂</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">tr</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">δ</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">))</span><span class=\"bp\">.</span><span class=\"n\">op</span><span class=\"w\"> </span><span class=\"n\">simplex</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">e₁₂</span><span class=\"bp\">.</span><span class=\"n\">simplex</span>\n<span class=\"w\">  </span><span class=\"n\">h₀₂</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">tr</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">δ</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">))</span><span class=\"bp\">.</span><span class=\"n\">op</span><span class=\"w\"> </span><span class=\"n\">simplex</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">e₀₂</span><span class=\"bp\">.</span><span class=\"n\">simplex</span>\n</code></pre></div>\n<p>Notable is now the absence of <code>Path</code>, replaced by <code>Edge</code> and <code>CompStruct</code>, as well as the <code>Nonempty</code> statements making everything <code>Prop</code> typed, as in the definition of quasicategories.</p>\n<p>Is this as everyone here imagined? I want to make sure before I clean up the proofs and publish the new PR...</p>",
        "id": 514878540,
        "sender_full_name": "Julian Komaromy",
        "timestamp": 1745864748
    },
    {
        "content": "<p>I would make <code>Quasicategory₂</code> a class, but otherwise, this looks good to me.</p>",
        "id": 514884054,
        "sender_full_name": "Joël Riou",
        "timestamp": 1745866674
    },
    {
        "content": "<p>Like you, I was thinking in path speak, which is how we defined the homotopy category functor on simplicial sets. But this formulation feels nice and intuitive. Thanks for the reviews and clean up.</p>",
        "id": 514892517,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1745869802
    },
    {
        "content": "<p>Ping me again when you want another review. We tend to merge things fairly quickly into the InfinityCosmos repository once they are fairly stable so if you don't want that to happen, let me know as well.</p>",
        "id": 514892662,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1745869865
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"246635\">@Emily Riehl</span> the <code>CompStruct</code> version is now on the PR, so it's ready for a second review.</p>",
        "id": 515695810,
        "sender_full_name": "Julian Komaromy",
        "timestamp": 1746186561
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"879277\">@Julian Komaromy</span> sorry to be so slow. I just left you a bunch of annoying renaming suggestions (to get a little closer to mathlib style, for the future when ultimately this may go into mathlib). But once that's done, let's merge and close this issue.</p>",
        "id": 516497371,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1746552225
    },
    {
        "content": "<p>I'm curious about your experience with the refactoring. Do you like the new <code>CompStructure</code> set up? </p>\n<p>Also it's still unclear to me whether the right definition of 2-truncated quasi-category uses <code>Nonempty</code> but it doesn't seem to make a huge difference in practice so we can change this later if we choose.</p>",
        "id": 516497548,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1746552277
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"246635\">@Emily Riehl</span> I really should have paid more attention the the naming convention, that's my bad, but I think all is fixed and ready for merging now. </p>\n<p>Refactoring from the <code>Path</code>stuff was very straightforward. <code>CompStruct</code> makes everything almost frustratingly symmetric, such that the amount of duplicated code alarms me. However, I could not come up with sensible lemmas to generalize the duplicated blocks because of the finicky combinatorics (\"which edge of which face do I need here?\").</p>\n<p>I am not sure about the <code>Nonempty</code> either, but it is easy to change (and matches the Prop-valued <code>Quasicategory</code>).</p>",
        "id": 516511550,
        "sender_full_name": "Julian Komaromy",
        "timestamp": 1746556618
    },
    {
        "content": "<p>Great. I'll bump mathlib as you suggest and merge now.</p>",
        "id": 516517927,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1746558986
    },
    {
        "content": "<p>About symmetries, there is a kind of \"duality\" on simplicial sets. As the simplex category is equivalent to the category of totally ordered nonempty finite sets, and for any totally ordered set, we can consider the same set with the reverse order, there is a \"covariant involution\" <code>SimplexCategory ⥤ SimplexCategory</code>, which induces similar \"operations\" on simplicial sets (or truncated simplicial sets). Via this duality, the nerve of a category and the nerve of its opposite category should correspond, and also the <code>(3, 1)</code>-filling should be dual to the <code>(3, 2)</code>-filling, so that, in principle, proofs related to the <code>(3, 1)</code>-filling could be dualised in order to deduce formally the other case, but it is likely that it would take more time to explore this duality as compared to duplicating the code of proofs...</p>",
        "id": 516521356,
        "sender_full_name": "Joël Riou",
        "timestamp": 1746560302
    },
    {
        "content": "<p>Congrats <span class=\"user-mention\" data-user-id=\"879277\">@Julian Komaromy</span>. The PR is merged and the issue closed <span aria-label=\"octopus\" class=\"emoji emoji-1f419\" role=\"img\" title=\"octopus\">:octopus:</span></p>",
        "id": 516523943,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1746561424
    },
    {
        "content": "<p>Great, thanks for all the help!</p>",
        "id": 516524366,
        "sender_full_name": "Julian Komaromy",
        "timestamp": 1746561573
    },
    {
        "content": "<p>I haven't kept up with the project in the last couple of weeks, but I finally got around to working on left and right homotopy relations for 2-truncated quasicats. This was actually surprisingly straightforward using <br>\n<code>CompStruct</code>, a small example:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">abbrev</span><span class=\"w\"> </span><span class=\"n\">HomotopicL</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">_⦋</span><span class=\"mi\">0</span><span class=\"bp\">⦌₂</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Edge</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Nonempty</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">CompStruct</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">idEdge</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"o\">)</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">HomotopicL</span><span class=\"bp\">.</span><span class=\"n\">symm</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">_⦋</span><span class=\"mi\">0</span><span class=\"bp\">⦌₂</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Edge</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hfg</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">HomotopicL</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">HomotopicL</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">rcases</span><span class=\"w\"> </span><span class=\"n\">hfg</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">hfg</span><span class=\"bp\">⟩</span>\n<span class=\"w\">  </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">Quasicategory₂</span><span class=\"bp\">.</span><span class=\"n\">fill31</span><span class=\"w\"> </span><span class=\"n\">hfg</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">idCompStruct</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">doubleEdge₀</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>To me, this shows that it is not infeasable to do the rest of the 2-truncated stuff (and the δ₂ relations that are now in mathlib are great!) if there is still interest in going down this route. </p>\n<p>I have opened a draft PR: <a href=\"https://github.com/emilyriehl/infinity-cosmos/pull/133\">https://github.com/emilyriehl/infinity-cosmos/pull/133</a></p>",
        "id": 526816201,
        "sender_full_name": "Julian Komaromy",
        "timestamp": 1751466685
    },
    {
        "content": "<p>This was even shorter in my original code <a href=\"https://github.com/joelriou/topcat-model-category/blob/master/TopCatModelCategory/SSet/FundamentalGroupoid.lean#L510-L528\">https://github.com/joelriou/topcat-model-category/blob/master/TopCatModelCategory/SSet/FundamentalGroupoid.lean#L510-L528</a><br>\nThis is the reason why I pushed for using this structure <code>CompStruct</code>...</p>",
        "id": 526838845,
        "sender_full_name": "Joël Riou",
        "timestamp": 1751473154
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"459699\">@Joël Riou</span> I think ultimately the mathlib construction of the fundamental groupoid of a Kan complex should be a special case of the homotopy category of a quasi-category. Do you have a sense of whether it's better to develop this in the 2-truncated setting or the untruncated setting? I don't want <span class=\"user-mention\" data-user-id=\"879277\">@Julian Komaromy</span> to have to refactor too much when this is ultimately PRed to mathlib.</p>",
        "id": 527067768,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1751574103
    },
    {
        "content": "<p>Yes, doing the homotopy category in the 2-truncated setting seems to be the best approach.</p>",
        "id": 527068846,
        "sender_full_name": "Joël Riou",
        "timestamp": 1751574685
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"879277\">Julian Komaromy</span> <a href=\"#narrow/channel/455414-Infinity-Cosmos/topic/2-truncated.20quasicategories/near/526816201\">said</a>:</p>\n<blockquote>\n<p>I haven't kept up with the project in the last couple of weeks, but I finally got around to working on left and right homotopy relations for 2-truncated quasicats. This was actually surprisingly straightforward using <br>\n<code>CompStruct</code>, a small example:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">abbrev</span><span class=\"w\"> </span><span class=\"n\">HomotopicL</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">_⦋</span><span class=\"mi\">0</span><span class=\"bp\">⦌₂</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Edge</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Nonempty</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">CompStruct</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">idEdge</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"o\">)</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">HomotopicL</span><span class=\"bp\">.</span><span class=\"n\">symm</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">_⦋</span><span class=\"mi\">0</span><span class=\"bp\">⦌₂</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Edge</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hfg</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">HomotopicL</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">HomotopicL</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">rcases</span><span class=\"w\"> </span><span class=\"n\">hfg</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">hfg</span><span class=\"bp\">⟩</span>\n<span class=\"w\">  </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">Quasicategory₂</span><span class=\"bp\">.</span><span class=\"n\">fill31</span><span class=\"w\"> </span><span class=\"n\">hfg</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">idCompStruct</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">doubleEdge₀</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>To me, this shows that it is not infeasable to do the rest of the 2-truncated stuff (and the δ₂ relations that are now in mathlib are great!) if there is still interest in going down this route. </p>\n<p>I have opened a draft PR: <a href=\"https://github.com/emilyriehl/infinity-cosmos/pull/133\">https://github.com/emilyriehl/infinity-cosmos/pull/133</a></p>\n</blockquote>\n<p><span class=\"user-mention\" data-user-id=\"879277\">@Julian Komaromy</span> I finally had a chance to look at your code and indeed it seems the API finally makes this as straightforward as it should be. Congrats. Let's have one more think about the term naming and then I'll merge. </p>\n<p>Specifically, I'm hoping we can use an ambient namespace like \"QCat\" (or whatever is most appropriate for the 2-truncated quasi-category setting) so that we can call the comp structures witnessing the identity laws by \"comp_id\" and \"id_comp\". This would then align with the 1-categorical names.</p>",
        "id": 527452842,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1751885933
    },
    {
        "content": "<p>A final question: is there anything in PR <a href=\"https://github.com/leanprover-community/mathlib4/pull/123\">#123</a> that's worth keeping? I wouldn't mind deleting it as a bit of housecleaning now that you've shown we can go forward with the 2-truncated approach.</p>",
        "id": 527452981,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1751885998
    },
    {
        "content": "<p>@ me again when you're ready for a final review and merge. Well done!</p>",
        "id": 527453030,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1751886017
    },
    {
        "content": "<p>I also have most of the corollaries about homotopy  equivalence and composition, so I will probably get those into the PR as well.</p>\n<p>I will try to get back to you on all this by Wednesday!</p>",
        "id": 527471510,
        "sender_full_name": "Julian Komaromy",
        "timestamp": 1751892240
    },
    {
        "content": "<p>No rush. Just wanted to make sure I'm not slowing you down.</p>",
        "id": 527657461,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1751972166
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"246635\">@Emily Riehl</span> I have updated the names as you suggested and added some further statements from the blueprint. I have left a comment on GitHub with some more details.</p>\n<p>In my opinion, PR <a href=\"https://github.com/leanprover-community/mathlib4/pull/123\">#123</a> can be removed if you want. Most of the contents have been now put into the 2-truncated setting.</p>",
        "id": 528342491,
        "sender_full_name": "Julian Komaromy",
        "timestamp": 1752241043
    },
    {
        "content": "<p>Great, will do. And your PR is merged. Congrats. </p>\n<p>The only thing that's now out of date is the issue dashboard. <span class=\"user-mention\" data-user-id=\"556875\">@Pietro Monticone</span>, <span class=\"user-mention\" data-user-id=\"879277\">@Julian Komaromy</span> just merged the code resolving issue <a href=\"https://github.com/leanprover-community/mathlib4/pull/104\">#104</a> without previously claiming that issue. Is there an easy way to update to show this is closed now after the fact?</p>",
        "id": 528352265,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1752244284
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"246635\">Emily Riehl</span> <a href=\"#narrow/channel/455414-Infinity-Cosmos/topic/2-truncated.20quasicategories/near/528352265\">said</a>:</p>\n<blockquote>\n<p>Great, will do. And your PR is merged. Congrats. </p>\n<p>The only thing that's now out of date is the issue dashboard. <span class=\"user-mention silent\" data-user-id=\"556875\">Pietro Monticone</span>, <span class=\"user-mention silent\" data-user-id=\"879277\">Julian Komaromy</span> just merged the code resolving issue <a href=\"https://github.com/leanprover-community/mathlib4/pull/104\">#104</a> without previously claiming that issue. Is there an easy way to update to show this is closed now after the fact?</p>\n</blockquote>\n<p><span class=\"user-mention\" data-user-id=\"556875\">@Pietro Monticone</span> note that my PR <a href=\"https://github.com/leanprover-community/mathlib4/pull/133\">#133</a> has also resolved issue <a href=\"https://github.com/leanprover-community/mathlib4/pull/105\">#105</a>.</p>",
        "id": 528435132,
        "sender_full_name": "Julian Komaromy",
        "timestamp": 1752299494
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"246635\">@Emily Riehl</span> and <span class=\"user-mention\" data-user-id=\"879277\">@Julian Komaromy</span>, done.</p>",
        "id": 528436149,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1752300790
    },
    {
        "content": "<p>Thanks!</p>",
        "id": 528436166,
        "sender_full_name": "Julian Komaromy",
        "timestamp": 1752300812
    },
    {
        "content": "<p>Just a quick note: to properly refer to issues and PRs of this project, you might want to use the associated linkifier (e.g. <a href=\"https://github.com/emilyriehl/infinity-cosmos/pull/104\">cosmos#104</a>). The #N is reserved for Mathlib.</p>",
        "id": 528436199,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1752300873
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"246635\">@Emily Riehl</span> PR <a href=\"https://github.com/emilyriehl/infinity-cosmos/pull/136\">cosmos#136</a> defines the homotopy category of a 2-truncated quasicategory and proves that this is isomorphic to the usual homotopy category. This result is obtained pretty much exactly as the proof of 1.3.8 is spelled out in the blueprint, which is nice (working with <code>ReflPrefunctor</code>s went mostly smoothly). </p>\n<p>I mention two potential issues / rooms for improvement in the PR message, but aside from that (and naming conventions, which I still struggle with), I am optimistic that we can merge this quite quickly.</p>",
        "id": 535816260,
        "sender_full_name": "Julian Komaromy",
        "timestamp": 1755966807
    },
    {
        "content": "<p>Congrats! </p>\n<p>Our semester starts tomorrow and I'm teaching a new course (using Lean in fact) so I may be a little slow to review this. But I'm excited to see your progress.</p>",
        "id": 535922662,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1756065074
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"246635\">Emily Riehl</span> <a href=\"#narrow/channel/455414-Infinity-Cosmos/topic/2-truncated.20quasicategories/near/535922662\">said</a>:</p>\n<blockquote>\n<p>Congrats! </p>\n<p>Our semester starts tomorrow and I'm teaching a new course (using Lean in fact) </p>\n</blockquote>\n<p>You can make a PR changing <a href=\"https://github.com/leanprover-community/leanprover-community.github.io/blob/lean4/data/courses.yaml\">this file</a> and this will add the course to the list at <a href=\"https://leanprover-community.github.io/teaching/courses.html\">https://leanprover-community.github.io/teaching/courses.html</a> (if you didn't already! I didn't spot it glancing through...)</p>",
        "id": 535924403,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1756066901
    },
    {
        "content": "<p>Done.</p>",
        "id": 536077367,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1756144478
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"879277\">Julian Komaromy</span> <a href=\"#narrow/channel/455414-Infinity-Cosmos/topic/2-truncated.20quasicategories/near/535816260\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"246635\">Emily Riehl</span> PR <a href=\"https://github.com/emilyriehl/infinity-cosmos/pull/136\">cosmos#136</a> defines the homotopy category of a 2-truncated quasicategory and proves that this is isomorphic to the usual homotopy category. This result is obtained pretty much exactly as the proof of 1.3.8 is spelled out in the blueprint, which is nice (working with <code>ReflPrefunctor</code>s went mostly smoothly). </p>\n<p>I mention two potential issues / rooms for improvement in the PR message, but aside from that (and naming conventions, which I still struggle with), I am optimistic that we can merge this quite quickly.</p>\n</blockquote>\n<p><span class=\"user-mention\" data-user-id=\"879277\">@Julian Komaromy</span> I'm sorry for being so ridiculously slow with this; I've been behind on everything for weeks.</p>\n<p>Your code looks great. You were right of course about your improved versions of <code>HomotopyL.refl</code> and <code>HomotopyR.refl</code> so I just cut the old ones. I also implemented some very minor renaming of two terms and used <code>.mp</code> and <code>.mpr</code> for the implications of your iff, which seems to be the preferred mathlib style.</p>",
        "id": 543629756,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1759875090
    },
    {
        "content": "<p>This is certainly ready to merge into our repository whenever you think it's ready. We can also discuss merging some of this into mathlib if that interests you? (I wasn't sure if that's what you meant about <code>ReflPrefunctor.congr_hom</code>. If it's just for us, it's probably okay to leave it where it is.)</p>",
        "id": 543629868,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1759875168
    },
    {
        "content": "<p>Anyway nice work and apologies again!</p>",
        "id": 543629882,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1759875182
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"246635\">@Emily Riehl</span> <br>\nThanks for taking a look. I'll have a final look at the PR next week and then we can merge it. Down the line, I'd love to help get stuff merged into mathlib (whether its this particular stuff or something else in the infty-cosmos repo).</p>",
        "id": 544041426,
        "sender_full_name": "Julian Komaromy",
        "timestamp": 1760041429
    },
    {
        "content": "<p>After <a href=\"https://github.com/leanprover-community/mathlib4/pull/31254\">#31254</a> is merged (definition of <code>Edge</code> and <code>CompStruct</code> for <code>2</code>-truncated simplicial sets), would you <span class=\"user-mention\" data-user-id=\"879277\">@Julian Komaromy</span> like to PR the definition of <code>2</code>-truncated quasicategories, the definition of the left/right homotopy relations, show that they define the same equivalence relation on edges in the case of <code>2</code>-truncated quasicategories, etc, until the definition of the homotopy category of a (<code>2</code>-truncated) quasicategory? (Meanwhile, after the cleanup PR <a href=\"https://github.com/leanprover-community/mathlib4/pull/31258\">#31258</a> is merged, I intend to add various lemmas and definitions to produce pushouts and multicoequalizer diagrams for horn and boundaries, which will allow to show that the <code>2</code>-truncated nerve of a category is a <code>2</code>-truncated quasicategory.)<br>\nThen, after introducing a notion of <code>2</code>-truncated Kan complex, we can get the fundamental groupoid of a Kan complex (<a href=\"https://github.com/joelriou/topcat-model-category/blob/master/TopCatModelCategory/SSet/FundamentalGroupoid.lean\">https://github.com/joelriou/topcat-model-category/blob/master/TopCatModelCategory/SSet/FundamentalGroupoid.lean</a>).</p>",
        "id": 553665186,
        "sender_full_name": "Joël Riou",
        "timestamp": 1762275001
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"459699\">@Joël Riou</span> Sounds good, I think I should be able to do that.</p>",
        "id": 553666149,
        "sender_full_name": "Julian Komaromy",
        "timestamp": 1762275255
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"459699\">@Joël Riou</span> I opened PR <a href=\"https://github.com/leanprover-community/mathlib4/pull/31552\">#31552</a> containing:</p>\n<ul>\n<li>the definition of a 2-truncated quasicategory</li>\n<li>left &amp; right homotopy relations and basic theorems</li>\n</ul>\n<p>I left a comment about the definition of a 2-truncated quasicategory, but everything is as previously discussed in this channel.</p>",
        "id": 555142571,
        "sender_full_name": "Julian Komaromy",
        "timestamp": 1762959732
    },
    {
        "content": "<p>Apart from very small details, this looks good to me. The docstring of <code>Quasicategory₂</code> is very nice!<br>\nThe phrasing of <code>fill21</code> with a sigma type is very much ok (any version would be fine for me).</p>",
        "id": 555162997,
        "sender_full_name": "Joël Riou",
        "timestamp": 1762963987
    },
    {
        "content": "<p>What I have understood formalizing the model category of simplicial sets is that there are basically two kinds of simplicial sets for which we have quite canonical horn liftings (to the point it might be possible to make them computable) are nerves of categories (inner horns only) (or groupoids) and singular simplicial sets attached to topological spaces (in that case, the horn filling is given by a continuous retraction of the inclusion of the horns in the topological simplex). However, I do not think it is a problem to have nonconstructive definitions for the composition of morphisms in the homotopy category of a (2-truncated) quasicategory: one of the reasons is that the equality of morphisms (i.e. the homotopy relation) is not decidable.</p>",
        "id": 555163004,
        "sender_full_name": "Joël Riou",
        "timestamp": 1762963989
    },
    {
        "content": "<p>I was the one pushing the \"algebraic\" point of view beforehand but now I agree. An important design choice in the quasi-categorical model of (∞,1)-categories is exactly this: that composition is not specified. The diagonal edge of any 2-simplex is equally the composite of the edges along its spine. In the case of a nerve of a 1-category then these spine fillers are unique (<code>StrictSegal</code>) so we really are in an \"algebraic\" setting. In the case iof the singular complex of a topological space I'd argue that the perspective of not choosing composites is still the right one because the choices can't be made coherently anyway from the point of view of n-ary composition of edges.</p>",
        "id": 555194578,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1762971951
    },
    {
        "content": "<p>I have just PRed <a href=\"https://github.com/leanprover-community/mathlib4/pull/31797\">#31797</a> which deals with pushouts and multicoequalizers of subcomplexes of a simplicial set. Soon, other PRs about specific multicoequalizer and pushout diagrams will follow...</p>",
        "id": 558142816,
        "sender_full_name": "Joël Riou",
        "timestamp": 1763541837
    },
    {
        "content": "<p>Nice. I will have a look once thats merged to incorporate it into the proof that the 2-truncation of a QC is a 2-truncated QC. Meanwhile my PR <a href=\"https://github.com/leanprover-community/mathlib4/pull/31630\">#31630</a> defines the homotopy category of a 2-truncated QC.</p>",
        "id": 558143856,
        "sender_full_name": "Julian Komaromy",
        "timestamp": 1763542185
    },
    {
        "content": "<p>I have added <a href=\"https://github.com/leanprover-community/mathlib4/pull/31802\">#31802</a> which gives a description of horns in <code>Δ[2]</code> as pushouts, and the draft PR <a href=\"https://github.com/leanprover-community/mathlib4/pull/31805\">#31805</a> expresses horns in <code>Δ[n]</code> as multicoequalizers (in particular, I provide API for inner horns in <code>Δ[3]</code>). This should be sufficient to get that quasicategories induce 2-truncated quasicategories.</p>",
        "id": 558186098,
        "sender_full_name": "Joël Riou",
        "timestamp": 1763554415
    }
]