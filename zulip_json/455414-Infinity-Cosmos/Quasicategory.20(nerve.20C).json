[
    {
        "content": "<p>Hi, all. I am working on refactoring the proof by <span class=\"user-mention\" data-user-id=\"112680\">@Johan Commelin</span>  in <a href=\"https://github.com/leanprover-community/mathlib4/pull/16458\">#16458</a> that the nerve of a category is a quasicategory. The tentative direction (suggested by <span class=\"user-mention\" data-user-id=\"246635\">@Emily Riehl</span>) is to use the material in <a href=\"https://github.com/leanprover-community/mathlib4/pull/18499\">#18499</a> and show that any simplicial set satisfying the <code>StrictSegal</code> condition is a quasicategory. Any thoughts on this endeavor are very welcome, and I'm sure I will have some more concrete questions once I have a chance to dig into things.</p>",
        "id": 481805082,
        "sender_full_name": "Nick Ward",
        "timestamp": 1731357430
    },
    {
        "content": "<p>One paper, I would prove this by appealing also to the fact that the <code>StrictSegal</code> condition implies that the simplicial set <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>X</mi></mrow><annotation encoding=\"application/x-tex\">X</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span></span></span></span> is 2-coskeletal. In particular you get an isomorphism <code>cosk2Iso</code> between <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>X</mi></mrow><annotation encoding=\"application/x-tex\">X</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span></span></span></span> and <code>(cosk 2).obj X</code>; warning the meaning of <code>cosk</code> depends on whether or not you are in the <code>Truncated</code> namespace.</p>\n<p>What this means is that a lifting problem into <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>X</mi></mrow><annotation encoding=\"application/x-tex\">X</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span></span></span></span> transposes to a lifting problem where you apply the left adjoint <code>(sk 2).map (hornInclusion n i)</code>. On paper it is \"obvious\" this this map is an isomorphism whenever <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi><mo>&gt;</mo><mn>3</mn></mrow><annotation encoding=\"application/x-tex\">n &gt; 3</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5782em;vertical-align:-0.0391em;\"></span><span class=\"mord mathnormal\">n</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">&gt;</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">3</span></span></span></span> so now you only have to fill inner horns in three cases: (2,1), (3,1), and (3,2).</p>",
        "id": 481826297,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1731366835
    },
    {
        "content": "<p>The \"obvious\" fact might not be so easy to prove here, so I suspect it's better to forget about 2-coskeletality and just use the StrictSegal condition. This will produce an argument that's much closer to what Johan has currently.</p>",
        "id": 481826403,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1731366884
    },
    {
        "content": "<p>By the Yoneda lemma, to solve a lifting problem against <code>hornInclusion n i</code> your task is just to define an n-simplex in <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>X</mi></mrow><annotation encoding=\"application/x-tex\">X</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span></span></span></span> and then check a bunch of coherence conditions. (I forget how much infrastructure for this exists; maybe others can weigh in.) </p>\n<p>The data of the inner horn <code>Λ[n, i] ⟶ X</code> will give you what you need to define the <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">n</span></span></span></span>-simplex: it will be a <code>spineToSimplex</code> of a path of arrows you can extract from the image of the spine of the horn <code>Λ[n, i]</code>. [Aside: we should show that maps of simplicial sets induce maps of paths in a simplicial set.]</p>",
        "id": 481826879,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1731367093
    },
    {
        "content": "<p>For the coherence conditions, since <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>X</mi></mrow><annotation encoding=\"application/x-tex\">X</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span></span></span></span> is StrictSegal, you can apply <code>(segal _).injective</code> to reduce the question of whether two simplices are equal to the question of whether the paths along their spines are equal. <span class=\"user-mention\" data-user-id=\"459699\">@Joël Riou</span> created an ext lemma for paths, which hopefully won't be too hard to apply.</p>\n<p>Perhaps you can formulate an ext lemma for simplices in a StrictSegal simplicial set along these lines?</p>",
        "id": 481827233,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1731367265
    },
    {
        "content": "<p>A quick heads up for <span class=\"user-mention\" data-user-id=\"776338\">@Nick Ward</span> and anyone else following this discussion: the material on <code>StrictSegal</code> simplicial sets is now in mathlib and can be found here:</p>\n<p><a href=\"https://tqft.net/mathlib4files/Mathlib/AlgebraicTopology/SimplicialSet/StrictSegal\">file#Mathlib/AlgebraicTopology/SimplicialSet/StrictSegal</a></p>\n<p>Note that <code>StrictSegal</code> is now a typeclass which contains an explicit equivalence inverse for <code>spine : X _[n] -&gt; Path X n</code>.</p>",
        "id": 482655490,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1731689973
    },
    {
        "content": "<p>Thanks for the heads up, and for the helpful sketch above.</p>",
        "id": 482674238,
        "sender_full_name": "Nick Ward",
        "timestamp": 1731696330
    },
    {
        "content": "<p>Is it best to open a PR against the infinity-cosmos repo first so that folks here can take a look, or should I just open a mathlib PR and link to it here?</p>",
        "id": 482674501,
        "sender_full_name": "Nick Ward",
        "timestamp": 1731696410
    },
    {
        "content": "<p>Unless your formalization needs some stuff we haven't yet ported to mathlib, it's probably most efficient to just open this as a mathlib PR and then alert the Infinity-Cosmos channel of its existence. </p>\n<p>In general I'm happy to streamline the process of getting things that are of general interest into mathlib sooner rather than later.</p>",
        "id": 482689778,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1731702432
    },
    {
        "content": "<p>But whatever workflow makes sense to you is fine with me.</p>",
        "id": 482689827,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1731702465
    },
    {
        "content": "<p>So far I have a rough proof (<a href=\"https://github.com/leanprover-community/mathlib4/compare/master...gio256:mathlib4:develop?expand=1\">here</a>) that constructs the extension. It remains \"only\" to prove that it restricts to the appropriate map on the horn.</p>",
        "id": 482695638,
        "sender_full_name": "Nick Ward",
        "timestamp": 1731705309
    },
    {
        "content": "<p>(which I suspect will be much harder)</p>",
        "id": 482695975,
        "sender_full_name": "Nick Ward",
        "timestamp": 1731705451
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"776338\">@Nick Ward</span> could you go ahead and open this PR? There's a way to mark this as a draft pull request (I forget how exactly, but I believe it's fairly intuitive) so that no one will review it just yet.</p>\n<p>But (I believe) by creating the PR, it will make it easier for others (or at least me) to check out your code and play around with it.</p>",
        "id": 483324359,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1732039516
    },
    {
        "content": "<p>Or maybe the correct thing to do is add the label \"WIP\" to indicate a work in progress.</p>",
        "id": 483324550,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1732039589
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"246635\">@Emily Riehl</span> I've just realized I still need to get a mathlib branch before I can open a PR. In the meantime, the following git commands should give you a local copy of my (or anyone else's) mathlib fork.</p>\n<div class=\"codehilite\" data-code-language=\"Bash\"><pre><span></span><code>git<span class=\"w\"> </span>remote<span class=\"w\"> </span>add<span class=\"w\"> </span>gio<span class=\"w\"> </span>https://github.com/gio256/mathlib4\ngit<span class=\"w\"> </span>fetch<span class=\"w\"> </span>gio\ngit<span class=\"w\"> </span>checkout<span class=\"w\"> </span>gio/develop\n</code></pre></div>",
        "id": 483333473,
        "sender_full_name": "Nick Ward",
        "timestamp": 1732042796
    },
    {
        "content": "<p>I should have specified that the commands above should be run from an existing mathlib repo directory.</p>",
        "id": 483334331,
        "sender_full_name": "Nick Ward",
        "timestamp": 1732043067
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"246635\">Emily Riehl</span> <a href=\"#narrow/channel/455414-Infinity-Cosmos/topic/Quasicategory.20.28nerve.20C.29/near/483324550\">said</a>:</p>\n<blockquote>\n<p>Or maybe the correct thing to do is add the label \"WIP\" to indicate a work in progress.</p>\n</blockquote>\n<p>Either is fine, draft PRs and PRs labeled \"WIP\" don't show up on the <a href=\"https://bit.ly/4eIDoOJ\">#queue</a> and thus won't get reviewed in detail</p>",
        "id": 483339757,
        "sender_full_name": "Dagur Asgeirsson",
        "timestamp": 1732045095
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"519559\">@Dagur Asgeirsson</span>. I'm still getting the hang of the mathlib contribution guidelines.</p>",
        "id": 483340214,
        "sender_full_name": "Nick Ward",
        "timestamp": 1732045281
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"246635\">@Emily Riehl</span> I opened a WIP PR at <a href=\"https://github.com/leanprover-community/mathlib4/pull/19270\">#19270</a>. Any suggestions are very welcome!</p>",
        "id": 483373963,
        "sender_full_name": "Nick Ward",
        "timestamp": 1732059937
    },
    {
        "content": "<p>I've pushed a working proof to <a href=\"https://github.com/leanprover-community/mathlib4/pull/19270\">#19270</a>, though there is still quite a bit of clean-up to do.</p>",
        "id": 483808774,
        "sender_full_name": "Nick Ward",
        "timestamp": 1732232292
    },
    {
        "content": "<p>Alerting <span class=\"user-mention\" data-user-id=\"112680\">@Johan Commelin</span>.</p>\n<p>I'm sure the experts will have feedback for you, but this looks really great. Congrats!</p>",
        "id": 483813963,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1732235105
    },
    {
        "content": "<p>Just a heads up: the above the line comment on the PR will become the official commit message after merge, so it should be more straightforwardly descriptive of what happened in the commit and who the contributors are. </p>\n<p>Your name will be attached automatically as the commit author, but I believe the correct syntax for your collaborator would be</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">Co</span><span class=\"bp\">-</span><span class=\"n\">Authored</span><span class=\"bp\">-</span><span class=\"n\">By</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Johan</span><span class=\"w\"> </span><span class=\"n\">Commelin</span><span class=\"o\">](</span><span class=\"n\">link</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 483814239,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1732235279
    },
    {
        "content": "<p>One other thought is that perhaps the proofs that both strict segal simplicial sets and nerve of categories are quasi-categories should appear in the quasi-category file? That way the imports would be <code>Nerve</code> imported to <code>StrictSegal</code> imported to <code>Quasicategory</code>. But we should have an expert like <span class=\"user-mention\" data-user-id=\"459699\">@Joël Riou</span> weigh in.</p>",
        "id": 483814401,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1732235380
    },
    {
        "content": "<p>Thank you <span class=\"user-mention\" data-user-id=\"246635\">@Emily Riehl</span>, that's very helpful to know. I also realize that I took quite a lot of work in <code>Wombat.lean</code> and split the ideas up into several different files. Should I credit Johan in those files in some way?</p>",
        "id": 483814971,
        "sender_full_name": "Nick Ward",
        "timestamp": 1732235753
    },
    {
        "content": "<p>You can add me to the Authors line.</p>",
        "id": 483834538,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1732249415
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"246635\">@Emily Riehl</span> I suggest having a file with just the basic defs of quasicat, and then a separate file that builds the examples</p>",
        "id": 483834630,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1732249479
    },
    {
        "content": "<p>Maybe we need a directory Quasicategory, with files Defs.lean, Nerve.lean, Segal.lean</p>",
        "id": 483834662,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1732249520
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"112680\">@Johan Commelin</span> I'm happy to make such a PR. Should we keep the <code>Quasicategory/</code> directory in <code>AlgebraicTopology/SimplicialSet</code>, or does it ultimately belong somewhere in <code>CategoryTheory/</code>?</p>",
        "id": 483915715,
        "sender_full_name": "Nick Ward",
        "timestamp": 1732283524
    },
    {
        "content": "<p>I don't have an opinion on that</p>",
        "id": 483928933,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1732287649
    },
    {
        "content": "<p>I'm really happy to see how much cleaner the new approach is, compared to my old wombat approach.</p>",
        "id": 484044508,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1732350171
    },
    {
        "content": "<p>It really mapped very well from the proof sketch <span class=\"user-mention\" data-user-id=\"246635\">@Emily Riehl</span> provided. It never fails to surprise me how much a bit of extra machinery can simplify a proof.</p>",
        "id": 484070149,
        "sender_full_name": "Nick Ward",
        "timestamp": 1732373018
    },
    {
        "content": "<p>By the way <span class=\"user-mention\" data-user-id=\"246635\">@Emily Riehl</span>, you will have to pardon my ignorance of the convention here, but I have listed you as PR co-author as well given that it was ultimately your proof that I implemented. Please let me know if you would prefer not to be listed as such.</p>",
        "id": 484070388,
        "sender_full_name": "Nick Ward",
        "timestamp": 1732373229
    },
    {
        "content": "<p>No objections ;) Though I'm still learning the conventions too...</p>",
        "id": 484089576,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1732390101
    },
    {
        "content": "<p>I'll be really pleased to have this in mathlib because we might now have enough to prove that ordinary categories define an oo-cosmos. I'm hoping to have some time next week to expand the blueprint a bit.</p>",
        "id": 484089643,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1732390176
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"246635\">@Emily Riehl</span>, relatedly, I'd be keen to pick up work on another proof as this one gets close to crossing the finish line. Unfortunately, I don't yet know my way around the project (or the topic) well enough to know what needs to be done. Please let me know if you think of anything that might make sense to take on next.</p>",
        "id": 484174429,
        "sender_full_name": "Nick Ward",
        "timestamp": 1732476654
    },
    {
        "content": "<p>Merged in <a href=\"https://github.com/leanprover-community/mathlib4/pull/19270\">mathlib4#19270</a>!</p>",
        "id": 484302083,
        "sender_full_name": "Nick Ward",
        "timestamp": 1732541788
    },
    {
        "content": "<p>Just saw this! Congrats. Tomorrow sometime I'll bump mathlib into the infinity-cosmos branch, delete wombat, and update the blueprint to point to this (unless someone else beats me to it).</p>",
        "id": 484419446,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1732585021
    },
    {
        "content": "<p>I'll also write back soon with some new suggested projects.</p>",
        "id": 484419600,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1732585142
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"246635\">@Emily Riehl</span>  much appreciated!</p>\n<p>I can work on the mathlib bump and the blueprint, as I suspect there will be some changes to make as a result of <a href=\"https://github.com/leanprover-community/mathlib4/pull/19472\">mathlib4#19472</a>.</p>\n<p>On deleting <code>Wombat.lean</code> -- I probably should first go through the file to look for any nerve-related lemmas that might still be useful to have.</p>",
        "id": 484553913,
        "sender_full_name": "Nick Ward",
        "timestamp": 1732639012
    },
    {
        "content": "<p>Whoops. I didn't see this and was working on the same thing at basically the same time. I didn't think to see what should be salvaged from Wombat, though, so if you could do that, this would be great.</p>",
        "id": 484562480,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1732641778
    },
    {
        "content": "<p>Btw should your <code>Nerve.quasicategory</code> be in the <code>CategoryTheory</code> namespace, where <code>Nerve</code> itself is found?</p>",
        "id": 484562538,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1732641800
    },
    {
        "content": "<p>Yes, I think it's fine to delete <code>Wombat.lean</code> and I will go back and see what I can glean from it.</p>\n<p>I think you're probably right. I think maybe the old instance was in the <code>Nerve</code> namespace and that's why I put it there. I will see if I can't move it to <code>CategoryTheory.Nerve</code> namespace.<br>\nedit: The current instance is <code>Nerve.quasicategory</code>, not <code>SSet.Nerve.quasicategory</code>.</p>",
        "id": 484563768,
        "sender_full_name": "Nick Ward",
        "timestamp": 1732642217
    },
    {
        "content": "<p>It looks like we have <code>CategoryTheory.nerve</code>, do we want the instance to be <code>CategoryTheory.Nerve.quasicategory</code>?</p>",
        "id": 484564763,
        "sender_full_name": "Nick Ward",
        "timestamp": 1732642595
    },
    {
        "content": "<p>Currently the instance of type <code>StrictSegal (nerve C)</code> is <code>Nerve.strictSegal</code>. Assuming we decide on <code>CategoryTheory.Nerve.quasicategory</code>, we probably also want to move this to <code>CategoryTheory.Nerve.strictSegal</code>.</p>",
        "id": 484566112,
        "sender_full_name": "Nick Ward",
        "timestamp": 1732643089
    },
    {
        "content": "<p>This sort of question is above my paygrade but maybe one of the mathlib experts will weigh in.</p>",
        "id": 484570452,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1732644661
    },
    {
        "content": "<p>I think I will just open a PR and ask for some feedback there.</p>",
        "id": 484572579,
        "sender_full_name": "Nick Ward",
        "timestamp": 1732645513
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/19521\">mathlib4#19521</a></p>",
        "id": 484582424,
        "sender_full_name": "Nick Ward",
        "timestamp": 1732649350
    }
]