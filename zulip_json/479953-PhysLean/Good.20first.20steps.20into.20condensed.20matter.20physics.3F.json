[
    {
        "content": "<p>One of the areas of PhysLean which is not really developed at all is condensed matter physics. I think it would be nice to have one or two things done in this direction within PhysLean to serve as a bit of an impetus. </p>\n<p>I don't currently have the time to do this right now, but I wanted to know if anyone had suggestions of some simple things  (e.g. undergraduate level)  that could get us started in the direction of condensed matter physics. E.g. maybe something to do with lattices, the second quantization etc. </p>\n<p>(Somewhat related - a fair while a go I asked in the chat of  Physics stack exchange if a question like Kevin's math-overflow question: </p>\n<p><a href=\"https://mathoverflow.net/questions/311071/which-mathematical-definitions-should-be-formalised-in-lean\">Which mathematical definitions should be formalized in Lean?</a></p>\n<p>but physics based would be on-topic... they said no :( as they don't like big-list questions. )</p>",
        "id": 514739268,
        "sender_full_name": "Joseph Tooby-Smith",
        "timestamp": 1745825278
    },
    {
        "content": "<p>One idea might be the 1D tight binding chain.</p>",
        "id": 514774088,
        "sender_full_name": "Joseph Tooby-Smith",
        "timestamp": 1745835230
    },
    {
        "content": "<p>I’d love to see Onsager’s solution to the 2D Ising model. Maybe the transfer matrix techniques he developed would be appropriate for Mathlib?</p>",
        "id": 514821669,
        "sender_full_name": "Tyler Josephson ⚛️",
        "timestamp": 1745848674
    },
    {
        "content": "<p>I've also dreamt about Onsager's solution for a while! Another \"easy\" objective is showing that BEC undergoes a phase transition where it condenses.</p>\n<p>(That is, formally: a bunch of identical bosons in a Hamiltonian with a gap, like (say) a harmonic oscillator spectrum. You get the fraction of the population of N particles, as a function of temperature, and then take the limit as N -&gt; infty, and this converges to some function f(T). Prove there's a critical temperature T0 so that for all T &gt;= T0, f(T) = 0, and for all T &lt; T0, f(T) is positive.)</p>",
        "id": 514940177,
        "sender_full_name": "Alex Meiburg",
        "timestamp": 1745894522
    },
    {
        "content": "<p>I've tried looking into proving this and it's actually quite hard to make totally rigorous, though. Computing and bounding the contributions of the excited states (and showing they're sufficiently small) is usually done with a saddle-point method, which is not rigorous.</p>",
        "id": 514940328,
        "sender_full_name": "Alex Meiburg",
        "timestamp": 1745894602
    },
    {
        "content": "<p>Thanks for the suggestions both! Ideally I would like a couple of things which one could knock off in a week or so. Maybe BEC phase transitions are a possibility here, or maybe there is some simpler version.</p>",
        "id": 514960914,
        "sender_full_name": "Joseph Tooby-Smith",
        "timestamp": 1745904459
    },
    {
        "content": "<p>Looking a bit more into the 1D tight binding chain, I think it might be a good candidate for small place to  start. </p>\n<p>These notes by David Tong do a pretty good job of explaining it: <a href=\"https://www.damtp.cam.ac.uk/user/tong/aqm/aqmtwo.pdf\">https://www.damtp.cam.ac.uk/user/tong/aqm/aqmtwo.pdf</a>. </p>\n<p>I created a small issue/feature-request on the repo concerning this: <a href=\"https://github.com/HEPLean/PhysLean/issues/523\">https://github.com/HEPLean/PhysLean/issues/523</a>.</p>",
        "id": 515015694,
        "sender_full_name": "Joseph Tooby-Smith",
        "timestamp": 1745920637
    },
    {
        "content": "<p>I ended up formalizing this, and putting together a quick note on it here: </p>\n<p><a href=\"https://notes.physlean.com/Condensed-matter/The-tight-binding-chain/#TightBindingChain\">https://notes.physlean.com/Condensed-matter/The-tight-binding-chain/#TightBindingChain</a></p>\n<p>I'll like share this on social media at some point to try and get more people interested in this project (if anyone has any other ideas of how to do this - please let me know :)).</p>",
        "id": 516712405,
        "sender_full_name": "Joseph Tooby-Smith",
        "timestamp": 1746632925
    },
    {
        "content": "<p>Hi Joseph, Alex, Tyler! <br>\nGot interested in this project after seeing your paper on formalizing Wick's theorem. I was going through the code on tight-binding lemmas and  came here to ask a doubt. First, few observations: <br>\n<a href=\"/user_uploads/3121/yDmzlwxy1oCup-iLEGyYri_V/image.png\">image.png</a><br>\nOn <em>line 94</em> of attached image, a portion of line is  <code>∑ n : Fin T.N, (|n⟩⟨n + 1|</code> where |n⟩⟨n + 1| is the matrix defined at <em>line 76</em>: <br>\n<code>noncomputable def localizedComp {T : TightBindingChain} (m n : Fin T.N) :  ...</code><br>\nMy confusion is : in this definition, m and n are both elements of Fin T.N whereas on line 94, n=n+1 so when n takes the largest value = T.N, |n⟩⟨n + 1| should not be defined as N+1 is not part of Fin T.N and the matrix localizedComp  is not defined for this integer but lean doesn't throw any compilation error. What is the resolution? Thanks!</p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/yDmzlwxy1oCup-iLEGyYri_V/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"977x607\" src=\"/user_uploads/thumbnail/3121/yDmzlwxy1oCup-iLEGyYri_V/image.png/840x560.webp\"></a></div>",
        "id": 520906312,
        "sender_full_name": "Shlok Vaibhav",
        "timestamp": 1748442346
    },
    {
        "content": "<p>Hey! Welcome to the project Shlok.!</p>\n<p>The resolution is the following: </p>\n<p>This version of the tight binding model in that file assumes cyclic boundary conditions. The <code>+</code> in <code>|n⟩⟨n + 1|</code> is addition in <code>Fin T.N</code>, which is defined to be addition modulo <code>T.N</code>. </p>\n<p>The largest value in <code>Fin T.N</code> is <code>T.N-1</code>, and in that highlighted sum the term <code>|T.N - 1⟩⟨(T.N - 1) + 1|</code> is equal to <code>|T.N - 1⟩⟨0|</code>.</p>",
        "id": 520908547,
        "sender_full_name": "Joseph Tooby-Smith",
        "timestamp": 1748442923
    },
    {
        "content": "<p>Thanks! So the definition of addition in Fin takes care of it.</p>",
        "id": 520910071,
        "sender_full_name": "Shlok Vaibhav",
        "timestamp": 1748443282
    },
    {
        "content": "<p>Yep :). The example below is completely explicit version of this: </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">rfl</span>\n</code></pre></div>",
        "id": 520910303,
        "sender_full_name": "Joseph Tooby-Smith",
        "timestamp": 1748443344
    },
    {
        "content": "<p>Ah I see, should have thought of testing it. This is the first code I'm reading in lean 4 thinking I will just familiarize myself with the tactics and types that are being used in this tight-binding context so don't have any hands on as of now <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span> Thanks again for quick reply!</p>",
        "id": 520911449,
        "sender_full_name": "Shlok Vaibhav",
        "timestamp": 1748443611
    },
    {
        "content": "<p>No worries - always happy to answer questions :).  Maybe we should change the doc-string of <code>hamiltonian</code> to something like: </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"sd\">/-- The Hamiltonian of the tight binding chain with periodic</span>\n<span class=\"sd\">  boundary conditions is given by `E₀ ∑ n, |n⟩⟨n| - t ∑ n, (|n⟩⟨n + 1| + |n + 1⟩⟨n|)`.</span>\n<span class=\"sd\"> The periodic boundary conditions is manifested by the `+` in `n + 1` being</span>\n<span class=\"sd\">  within `Fin T.N` (that is modulo `T.N`).</span>\n<span class=\"sd\">-/</span>\n</code></pre></div>",
        "id": 520913305,
        "sender_full_name": "Joseph Tooby-Smith",
        "timestamp": 1748444072
    },
    {
        "content": "<p>In the tight-binding lean code, The hermiticity semiformal result is currently stated on line 101 as : <br>\n<a href=\"/user_uploads/3121/mn9BMv2YLrY6oG8pleasx8G1/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/mn9BMv2YLrY6oG8pleasx8G1/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"896x369\" src=\"/user_uploads/thumbnail/3121/mn9BMv2YLrY6oG8pleasx8G1/image.png/840x560.webp\"></a></div><div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">semiformal_result</span><span class=\"w\"> </span><span class=\"s2\">\"BUEDT\"</span><span class=\"w\"> </span><span class=\"n\">hamiltonian_hermitian</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ψ</span><span class=\"w\"> </span><span class=\"n\">φ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">T</span><span class=\"bp\">.</span><span class=\"n\">HilbertSpace</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n\n<span class=\"w\">    </span><span class=\"bp\">⟪</span><span class=\"n\">T</span><span class=\"bp\">.</span><span class=\"n\">hamiltonian</span><span class=\"w\"> </span><span class=\"n\">ψ</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">φ</span><span class=\"bp\">⟫_</span><span class=\"n\">ℂ</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">⟪</span><span class=\"n\">ψ</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">T</span><span class=\"bp\">.</span><span class=\"n\">hamiltonian</span><span class=\"w\"> </span><span class=\"n\">φ</span><span class=\"bp\">⟫_</span><span class=\"n\">ℂ</span>\n</code></pre></div>\n<p>If I consider a very simple case of <code>T.hamiltonian = |T.N⟩⟨T.N|</code> so I have to prove:<br>\n<code>⟪|T.N⟩⟨T.N| ψ, φ⟫_ℂ = ⟪ψ, |T.N⟩⟨T.N| φ⟫_ℂ</code></p>\n<p>I can think of two ways to prove this, first, |T.N⟩⟨T.N|  can be shown to be equal to ((|T.N⟩⟨T.N|)^T)* but you won't have written the statement of hermiticity in terms of inner products if this could be done.<br>\nThe other way I can think of is expanding φ and ψ in the eigenbasis localizedState, |n⟩ so that <br>\n⟪|T.N⟩⟨T.N| <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mo>∑</mo><mi>n</mi></msub><msub><mi>α</mi><mrow><mi>n</mi><mo separator=\"true\">,</mo><mi>ψ</mi></mrow></msub><mi mathvariant=\"normal\">∣</mi><mi>n</mi><mo stretchy=\"false\">⟩</mo></mrow><annotation encoding=\"application/x-tex\">\\sum_{n} \\alpha_{n,\\psi} |n⟩ </annotation></semantics></math></span><span aria-hidden=\"true\" class=\"katex-html\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0497em;vertical-align:-0.2997em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:0em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.0017em;\"><span style=\"top:-2.4003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2997em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0037em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span><span class=\"mpunct mtight\">,</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">ψ</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span><span class=\"mord\">∣</span><span class=\"mord mathnormal\">n</span><span class=\"mclose\">⟩</span></span></span></span>, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mo>∑</mo><mi>m</mi></msub><msub><mi>α</mi><mrow><mi>m</mi><mo separator=\"true\">,</mo><mi>ϕ</mi></mrow></msub><mi mathvariant=\"normal\">∣</mi><mi>m</mi><mo stretchy=\"false\">⟩</mo></mrow><annotation encoding=\"application/x-tex\">\\sum_m \\alpha_{m,\\phi} |m⟩ </annotation></semantics></math></span><span aria-hidden=\"true\" class=\"katex-html\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0497em;vertical-align:-0.2997em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:0em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.0017em;\"><span style=\"top:-2.4003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">m</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2997em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0037em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">m</span><span class=\"mpunct mtight\">,</span><span class=\"mord mathnormal mtight\">ϕ</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span><span class=\"mord\">∣</span><span class=\"mord mathnormal\">m</span><span class=\"mclose\">⟩</span></span></span></span>⟫_ℂ = ⟪<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mo>∑</mo><mi>n</mi></msub><msub><mi>α</mi><mrow><mi>n</mi><mo separator=\"true\">,</mo><mi>ψ</mi></mrow></msub><mi mathvariant=\"normal\">∣</mi><mi>n</mi><mo stretchy=\"false\">⟩</mo></mrow><annotation encoding=\"application/x-tex\">\\sum_n \\alpha_{n,\\psi} |n⟩ </annotation></semantics></math></span><span aria-hidden=\"true\" class=\"katex-html\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0497em;vertical-align:-0.2997em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:0em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.0017em;\"><span style=\"top:-2.4003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2997em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0037em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span><span class=\"mpunct mtight\">,</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">ψ</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span><span class=\"mord\">∣</span><span class=\"mord mathnormal\">n</span><span class=\"mclose\">⟩</span></span></span></span>, |T.N⟩⟨T.N| <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mo>∑</mo><mi>m</mi></msub><msub><mi>α</mi><mrow><mi>m</mi><mo separator=\"true\">,</mo><mi>ψ</mi></mrow></msub><mi mathvariant=\"normal\">∣</mi><mi>m</mi><mo stretchy=\"false\">⟩</mo></mrow><annotation encoding=\"application/x-tex\">\\sum_m \\alpha_{m,\\psi} |m⟩ </annotation></semantics></math></span><span aria-hidden=\"true\" class=\"katex-html\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0497em;vertical-align:-0.2997em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:0em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.0017em;\"><span style=\"top:-2.4003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">m</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2997em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0037em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">m</span><span class=\"mpunct mtight\">,</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">ψ</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span><span class=\"mord\">∣</span><span class=\"mord mathnormal\">m</span><span class=\"mclose\">⟩</span></span></span></span> ⟫_ℂ where <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>α</mi><mrow><mi>n</mi><mo separator=\"true\">,</mo><mi>ψ</mi></mrow></msub><mo>=</mo><mo stretchy=\"false\">⟨</mo><mi>n</mi><mi mathvariant=\"normal\">∣</mi><mi>ψ</mi><mo stretchy=\"false\">⟩</mo></mrow><annotation encoding=\"application/x-tex\">\\alpha_{n,\\psi}  =⟨n|\\psi⟩ </annotation></semantics></math></span><span aria-hidden=\"true\" class=\"katex-html\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7167em;vertical-align:-0.2861em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0037em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span><span class=\"mpunct mtight\">,</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">ψ</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">⟨</span><span class=\"mord mathnormal\">n</span><span class=\"mord\">∣</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">ψ</span><span class=\"mclose\">⟩</span></span></span></span><br>\nwhich should, after applying a series of simp only tactics reduce to </p>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mo>∑</mo><mi>n</mi></msub><msub><mo>∑</mo><mi>m</mi></msub><msubsup><mi>α</mi><mrow><mi>n</mi><mo separator=\"true\">,</mo><mi>ψ</mi></mrow><mo>∗</mo></msubsup><msub><mi>α</mi><mrow><mi>m</mi><mo separator=\"true\">,</mo><mi>ϕ</mi></mrow></msub></mrow><annotation encoding=\"application/x-tex\">\\sum_n \\sum_m \\alpha^*_{n,\\psi}\\alpha_{m,\\phi} </annotation></semantics></math></span><span aria-hidden=\"true\" class=\"katex-html\"><span class=\"base\"><span class=\"strut\" style=\"height:1.1692em;vertical-align:-0.4192em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:0em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.0017em;\"><span style=\"top:-2.4003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2997em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:0em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.0017em;\"><span style=\"top:-2.4003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">m</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2997em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6887em;\"><span style=\"top:-2.4169em;margin-left:-0.0037em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span><span class=\"mpunct mtight\">,</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">ψ</span></span></span></span><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mbin mtight\">∗</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4192em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0037em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">m</span><span class=\"mpunct mtight\">,</span><span class=\"mord mathnormal mtight\">ϕ</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span></span></span></span> ⟪|T.N⟩⟨T.N||n⟩, |m⟩ ⟫_ℂ =<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mo>∑</mo><mi>n</mi></msub><msub><mo>∑</mo><mi>m</mi></msub><msubsup><mi>α</mi><mrow><mi>n</mi><mo separator=\"true\">,</mo><mi>ψ</mi></mrow><mo>∗</mo></msubsup><msub><mi>α</mi><mrow><mi>m</mi><mo separator=\"true\">,</mo><mi>ϕ</mi></mrow></msub></mrow><annotation encoding=\"application/x-tex\">\\sum_n \\sum_m\\alpha^*_{n,\\psi}  \\alpha_{m,\\phi}</annotation></semantics></math></span><span aria-hidden=\"true\" class=\"katex-html\"><span class=\"base\"><span class=\"strut\" style=\"height:1.1692em;vertical-align:-0.4192em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:0em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.0017em;\"><span style=\"top:-2.4003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2997em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:0em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.0017em;\"><span style=\"top:-2.4003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">m</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2997em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6887em;\"><span style=\"top:-2.4169em;margin-left:-0.0037em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span><span class=\"mpunct mtight\">,</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">ψ</span></span></span></span><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mbin mtight\">∗</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4192em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0037em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">m</span><span class=\"mpunct mtight\">,</span><span class=\"mord mathnormal mtight\">ϕ</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span></span></span></span>⟪ |n⟩, |T.N⟩⟨T.N|  |m⟩ ⟫_ℂ</p>\n<p>since |T.N⟩⟨T.N|  |m⟩ is defined on line 89 under lemma localizedComp_apply_localizedState, the LHS and RHS might be shown equal after some tactics. Is this a correct and good strategy?</p>",
        "id": 521335241,
        "sender_full_name": "Shlok Vaibhav",
        "timestamp": 1748623759
    },
    {
        "content": "<p>Yes, I think this is a good and correct strategy.  It might be nice to break the prove up a bit and write a general lemma relating <code>⟪ |n⟩, |p⟩⟨k| |m⟩ ⟫_ℂ</code> to <code>⟪|p⟩⟨k| |n⟩,  |m⟩ ⟫_ℂ</code>, and then use the basis of localized states.</p>",
        "id": 521339473,
        "sender_full_name": "Joseph Tooby-Smith",
        "timestamp": 1748625309
    },
    {
        "content": "<p>I suspect if you show that <code>((|T.N⟩⟨T.N|)^T)* = |T.N⟩⟨T.N|</code> (more properly written as <br>\n<code>Matrix.conjTranspose (|T.N⟩⟨T.N|) = |T.N⟩⟨T.N|</code>)  this todo item should also follow from it using the appropriate lemmas e.g. <br>\n<a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=LinearMap.adjoint_inner_left#doc\">docs#LinearMap.adjoint_inner_left</a>, <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Matrix.toEuclideanLin_conjTranspose_eq_adjoint#doc\">docs#Matrix.toEuclideanLin_conjTranspose_eq_adjoint</a> etc.</p>",
        "id": 521340181,
        "sender_full_name": "Joseph Tooby-Smith",
        "timestamp": 1748625595
    },
    {
        "content": "<p>Right, I think it will be useful later to have hopping matrices results in localized eigenbasis. I could prove <code>⟪ |n⟩, |p⟩⟨k| |m⟩ ⟫_ℂ = ⟪|k⟩⟨p| |n⟩, |m⟩ ⟫_ℂ</code> <br>\nand from there, hermiticity of hopping matrix <code>|p⟩⟨k|+|k⟩⟨p|</code> but need to do this with the hopping parameter T.t included<br>\n<a href=\"/user_uploads/3121/0oxo3cLjuYplYbcGjPZB_Ymh/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/0oxo3cLjuYplYbcGjPZB_Ymh/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"895x793\" src=\"/user_uploads/thumbnail/3121/0oxo3cLjuYplYbcGjPZB_Ymh/image.png/840x560.webp\"></a></div><div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"sd\">/-- Shown that |p⟩⟨k| and |k⟩⟨p| are identical matrices (since hopping parameter has been excluded)</span>\n\n<span class=\"sd\">in the localized (euclidean) eigenbasis</span>\n<span class=\"sd\">-/</span>\n\n<span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">Ham_off_diag_eq_local</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"n\">T</span><span class=\"bp\">.</span><span class=\"n\">N</span><span class=\"o\">):</span>\n\n<span class=\"w\">  </span><span class=\"bp\">⟪|</span><span class=\"n\">n</span><span class=\"bp\">⟩</span><span class=\"w\"> </span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"n\">p</span><span class=\"bp\">⟩⟨</span><span class=\"n\">k</span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"n\">m</span><span class=\"bp\">⟩</span><span class=\"w\">  </span><span class=\"bp\">⟫_</span><span class=\"n\">ℂ</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">⟪|</span><span class=\"n\">k</span><span class=\"bp\">⟩⟨</span><span class=\"n\">p</span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"n\">n</span><span class=\"bp\">⟩</span><span class=\"w\"> </span><span class=\"o\">,</span><span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"n\">m</span><span class=\"bp\">⟩</span><span class=\"w\"> </span><span class=\"bp\">⟫_</span><span class=\"n\">ℂ</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n\n<span class=\"w\">  </span><span class=\"k\">by</span>\n\n<span class=\"w\">  </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"n\">only</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">localizedComp_apply_localizedState</span><span class=\"o\">]</span><span class=\"w\">  </span><span class=\"c\">/-</span><span class=\"cm\"> Simplifies both sides to two ite equations-/</span>\n\n<span class=\"w\">  </span><span class=\"n\">split_ifs</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"n\">h1</span><span class=\"w\"> </span><span class=\"n\">h2</span><span class=\"w\"> </span><span class=\"n\">h3</span><span class=\"w\">                         </span><span class=\"c\">/-</span><span class=\"cm\"> resulting in four subgoals-/</span>\n\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"n\">only</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">localizedState_orthonormal_eq_ite</span><span class=\"o\">]</span><span class=\"w\">                  </span><span class=\"c\">/-</span><span class=\"cm\"> k=m and p=n-/</span>\n\n<span class=\"w\">    </span><span class=\"n\">rw</span><span class=\"o\">[</span><span class=\"n\">h1</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">h2</span><span class=\"o\">]</span>\n\n<span class=\"w\">    </span><span class=\"n\">simp</span>\n\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"n\">only</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">localizedState_orthonormal_eq_ite</span><span class=\"o\">,</span><span class=\"n\">inner_zero_left</span><span class=\"o\">]</span><span class=\"w\">  </span><span class=\"c\">/-</span><span class=\"cm\"> k=m and ¬(p=n) -/</span>\n\n<span class=\"w\">    </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">eq_comm</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">h2</span>\n\n<span class=\"w\">    </span><span class=\"n\">simp</span>\n\n<span class=\"w\">    </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">h2</span>\n\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"n\">only</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">localizedState_orthonormal_eq_ite</span><span class=\"o\">,</span><span class=\"n\">inner_zero_right</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"c\">/-</span><span class=\"cm\"> ¬(k=m) and p=n -/</span>\n\n<span class=\"w\">    </span><span class=\"n\">symm</span>\n\n<span class=\"w\">    </span><span class=\"n\">simp</span>\n\n<span class=\"w\">    </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">h1</span>\n\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">simp</span><span class=\"w\">                                                           </span><span class=\"c\">/-</span><span class=\"cm\"> ¬(k=m) and ¬(p=n) -/</span>\n\n<span class=\"sd\">/-- The hermiticity of hopping matrix between arbitrary |p⟩ and |k⟩ is proven</span>\n\n<span class=\"sd\">in the localized (euclidean) eigenbasis</span>\n<span class=\"sd\">-/</span>\n\n<span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">Ham_off_diag_hermit_local</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"n\">T</span><span class=\"bp\">.</span><span class=\"n\">N</span><span class=\"o\">):</span>\n\n<span class=\"w\">  </span><span class=\"bp\">⟪|</span><span class=\"n\">n</span><span class=\"bp\">⟩</span><span class=\"w\"> </span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">|</span><span class=\"n\">p</span><span class=\"bp\">⟩⟨</span><span class=\"n\">k</span><span class=\"bp\">|+|</span><span class=\"n\">k</span><span class=\"bp\">⟩⟨</span><span class=\"n\">p</span><span class=\"bp\">|</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"n\">m</span><span class=\"bp\">⟩</span><span class=\"w\">  </span><span class=\"bp\">⟫_</span><span class=\"n\">ℂ</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">⟪</span><span class=\"o\">(</span><span class=\"bp\">|</span><span class=\"n\">p</span><span class=\"bp\">⟩⟨</span><span class=\"n\">k</span><span class=\"bp\">|+|</span><span class=\"n\">k</span><span class=\"bp\">⟩⟨</span><span class=\"n\">p</span><span class=\"bp\">|</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"n\">n</span><span class=\"bp\">⟩</span><span class=\"w\"> </span><span class=\"o\">,</span><span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"n\">m</span><span class=\"bp\">⟩</span><span class=\"w\"> </span><span class=\"bp\">⟫_</span><span class=\"n\">ℂ</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n\n<span class=\"w\">  </span><span class=\"k\">by</span>\n\n<span class=\"w\">  </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"n\">only</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">smul_add</span><span class=\"o\">,</span><span class=\"n\">LinearMap</span><span class=\"bp\">.</span><span class=\"n\">add_apply</span><span class=\"o\">]</span>\n\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">inner_add_right</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">inner_add_left</span><span class=\"o\">]</span>\n\n<span class=\"w\">  </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"n\">only</span><span class=\"o\">[</span><span class=\"n\">Ham_off_diag_eq_local</span><span class=\"o\">]</span>\n\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"o\">[</span><span class=\"n\">add_comm</span><span class=\"o\">]</span>\n\n<span class=\"sd\">/-- The hermiticity of on-site energy is proven</span>\n\n<span class=\"sd\"> in the localized (euclidean) eigenbasis</span>\n\n<span class=\"sd\"> -/</span>\n\n<span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">Ham_diag_hermit_local</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"n\">T</span><span class=\"bp\">.</span><span class=\"n\">N</span><span class=\"o\">):</span>\n\n<span class=\"w\">  </span><span class=\"bp\">⟪|</span><span class=\"n\">n</span><span class=\"bp\">⟩</span><span class=\"w\"> </span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">|</span><span class=\"n\">k</span><span class=\"bp\">⟩⟨</span><span class=\"n\">k</span><span class=\"bp\">|</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"n\">m</span><span class=\"bp\">⟩</span><span class=\"w\">  </span><span class=\"bp\">⟫_</span><span class=\"n\">ℂ</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">⟪</span><span class=\"o\">(</span><span class=\"bp\">|</span><span class=\"n\">k</span><span class=\"bp\">⟩⟨</span><span class=\"n\">k</span><span class=\"bp\">|</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"n\">n</span><span class=\"bp\">⟩</span><span class=\"w\"> </span><span class=\"o\">,</span><span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"n\">m</span><span class=\"bp\">⟩</span><span class=\"w\"> </span><span class=\"bp\">⟫_</span><span class=\"n\">ℂ</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n\n<span class=\"w\">  </span><span class=\"k\">by</span>\n\n<span class=\"w\">  </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"n\">only</span><span class=\"o\">[</span><span class=\"n\">Ham_off_diag_eq_local</span><span class=\"o\">]</span>\n</code></pre></div>",
        "id": 521410473,
        "sender_full_name": "Shlok Vaibhav",
        "timestamp": 1748668894
    },
    {
        "content": "<p>This looks good to me! I'm not sure I understand your comment about the hopping parameter though? Do you mean, you really want to show that <br>\n<code>T.t (|p⟩⟨k|+|k⟩⟨p|)</code> is hermitian? If so, I think this should be a simple consequence of what you have already. But in any case, this all looks good!</p>\n<p>(Also a quick side comment, the doc-string of your first result is slightly wrong, as you show that <code>|p⟩⟨k|</code> and <code>|k⟩⟨p|</code> are adjoint to one another but not equal :)).</p>",
        "id": 521413552,
        "sender_full_name": "Joseph Tooby-Smith",
        "timestamp": 1748672275
    },
    {
        "content": "<blockquote>\n<p>Do you mean, you really want to show that <code>T.t (|p⟩⟨k|+|k⟩⟨p|)</code> is hermitian?</p>\n</blockquote>\n<p>I meant proving it for a hopping parameter that can take complex values (in case we later want to prove results related to complex hopping values like use of Peierels substitution, we dont have to rederive all lemmas from scratch). Is this a right thought whose time has come? Or something that should be tackled later?</p>",
        "id": 521432381,
        "sender_full_name": "Shlok Vaibhav",
        "timestamp": 1748689134
    },
    {
        "content": "<p>Ohh right! It's Adjoint. Thanks for correcting!</p>",
        "id": 521432502,
        "sender_full_name": "Shlok Vaibhav",
        "timestamp": 1748689223
    },
    {
        "content": "<p>Ah! Thank you for explaining! Yes I think this is good - and maybe we should generalise this whole file to have a complex hopping value, and then where needed (which might not be anywhere) restrict to the real case. I think now is a good time for this</p>",
        "id": 521435114,
        "sender_full_name": "Joseph Tooby-Smith",
        "timestamp": 1748691649
    },
    {
        "content": "<p>Maybe another nice thing to do in this direction would be tight-binding for graphene: </p>\n<p>This <a href=\"https://cpb-us-w2.wpmucdn.com/u.osu.edu/dist/3/67057/files/2018/09/graphene_tight-binding_model-1ny95f1.pdf\">paper</a> seems to give a pretty straightforward description.</p>",
        "id": 521775952,
        "sender_full_name": "Joseph Tooby-Smith",
        "timestamp": 1748878072
    },
    {
        "content": "<p>That's a good idea! To make the unit cell 2-d (or later, N-d) plus the ubiquity of Graphene and derivative structures.</p>",
        "id": 521796994,
        "sender_full_name": "Shlok Vaibhav",
        "timestamp": 1748883180
    },
    {
        "content": "<p>Can't claim it was all my idea :) - came out of conversations I was having with others. But yeah, seems like a good natural extension</p>",
        "id": 521808778,
        "sender_full_name": "Joseph Tooby-Smith",
        "timestamp": 1748886644
    },
    {
        "content": "<p>Had been trying to prove the semiformal result on the orthogonality of the energy eigenstates. <br>\nWas hoping to finish it this weekend but reached the point where I have a single goal I'm stuck at : (k1, k2: Fin T.N)</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">⊢</span><span class=\"w\"> </span><span class=\"n\">Complex</span><span class=\"bp\">.</span><span class=\"n\">exp</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">Complex</span><span class=\"bp\">.</span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"bp\">↑</span><span class=\"n\">Real</span><span class=\"bp\">.</span><span class=\"n\">pi</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">↑↑</span><span class=\"n\">k2</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"bp\">↑↑</span><span class=\"n\">k1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"bp\">↑</span><span class=\"n\">T</span><span class=\"bp\">.</span><span class=\"n\">N</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n</code></pre></div>\n<p>I can prove that -1&lt; (↑↑k2 - ↑↑k1) / ↑T.N &lt;1 and also not zero since pairwise keyword is used. This will show that the argument is not a multiple of 2 pi i. Will try to see some sample code on proving such exponent inequalities on github or deepseek. <br>\nSpent few hours on this but was not able to find correct tactics for it or any strategy to come with a different statement. Deep Seek Prover V2 could do it but not relying on it so as to learn the language so this theorem will likely get pushed to the coming week.<br>\n<a href=\"/user_uploads/3121/bOrMfZVoE3MLkQOjT88JwSvl/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/bOrMfZVoE3MLkQOjT88JwSvl/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"1116x462\" src=\"/user_uploads/thumbnail/3121/bOrMfZVoE3MLkQOjT88JwSvl/image.png/840x560.webp\"></a></div>",
        "id": 522966770,
        "sender_full_name": "Shlok Vaibhav",
        "timestamp": 1749375865
    },
    {
        "content": "<p>You are trying to solve the following, right (where you <code>T.N</code> is just <code>N</code> here)? </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">N</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">k1</span><span class=\"w\"> </span><span class=\"n\">k2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"n\">N</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">k1</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"n\">k2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">       </span><span class=\"n\">Complex</span><span class=\"bp\">.</span><span class=\"n\">exp</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">Complex</span><span class=\"bp\">.</span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"bp\">↑</span><span class=\"n\">Real</span><span class=\"bp\">.</span><span class=\"n\">pi</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">↑↑</span><span class=\"n\">k2</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"bp\">↑↑</span><span class=\"n\">k1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"bp\">↑</span><span class=\"n\">N</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">   </span><span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>I have a solution to this, but am not going to share it unless you ask (since you are trying to learn :)), but the first three lines of my solution are:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"w\">  </span><span class=\"n\">by_contra</span><span class=\"w\"> </span><span class=\"n\">hn</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Complex</span><span class=\"bp\">.</span><span class=\"n\">exp_eq_one_iff</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">hn</span><span class=\"w\">  </span><span class=\"c1\">-- found using rw? at hn</span>\n<span class=\"w\">  </span><span class=\"k\">obtain</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">m</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"bp\">⟩</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">hn</span>\n</code></pre></div>\n<p>The rest is a long but straight forward calculation using things like <code>omega</code> and <code>field_simp</code>.</p>",
        "id": 522971354,
        "sender_full_name": "Joseph Tooby-Smith",
        "timestamp": 1749381218
    },
    {
        "content": "<p>sorry for leaving this hanging,  got bogged down in office work since last few weeks, the theorem i have been working on is to prove the orthogonality of eigenstates of tight binding. </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">exp_k1_neq_k2</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">k1</span><span class=\"w\"> </span><span class=\"n\">k2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"n\">T</span><span class=\"bp\">.</span><span class=\"n\">N</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">k1</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"n\">k2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">  </span><span class=\"n\">Complex</span><span class=\"bp\">.</span><span class=\"n\">exp</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">Complex</span><span class=\"bp\">.</span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"bp\">↑</span><span class=\"n\">Real</span><span class=\"bp\">.</span><span class=\"n\">pi</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">↑↑</span><span class=\"n\">k2</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"bp\">↑↑</span><span class=\"n\">k1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"bp\">↑</span><span class=\"n\">T</span><span class=\"bp\">.</span><span class=\"n\">N</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">by_contra</span><span class=\"w\"> </span><span class=\"n\">hn</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Complex</span><span class=\"bp\">.</span><span class=\"n\">exp_eq_one_iff</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">hn</span><span class=\"w\">  </span><span class=\"c1\">-- found using rw? at hn</span>\n<span class=\"w\">  </span><span class=\"k\">obtain</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">m</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">h1</span><span class=\"bp\">⟩</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">hn</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h3</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">↑</span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"bp\">↑</span><span class=\"n\">Real</span><span class=\"bp\">.</span><span class=\"n\">pi</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">Complex</span><span class=\"bp\">.</span><span class=\"n\">I</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"bp\">↑</span><span class=\"n\">Real</span><span class=\"bp\">.</span><span class=\"n\">pi</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">Complex</span><span class=\"bp\">.</span><span class=\"n\">I</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"bp\">↑</span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">    </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"n\">only</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">mul_assoc</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">mul_comm</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h4</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"bp\">↑</span><span class=\"n\">Real</span><span class=\"bp\">.</span><span class=\"n\">pi</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">Complex</span><span class=\"bp\">.</span><span class=\"n\">I</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"bp\">↑</span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"w\">  </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">Complex</span><span class=\"bp\">.</span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"bp\">↑</span><span class=\"n\">Real</span><span class=\"bp\">.</span><span class=\"n\">pi</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"bp\">↑</span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">    </span><span class=\"n\">ring</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">h3</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">h1</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">h4</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">h1</span>\n<span class=\"w\">  </span><span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">h1</span>\n\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h5</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Complex</span><span class=\"bp\">.</span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"bp\">↑</span><span class=\"n\">Real</span><span class=\"bp\">.</span><span class=\"n\">pi</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">↑↑</span><span class=\"n\">k2</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"bp\">↑↑</span><span class=\"n\">k1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"bp\">↑</span><span class=\"n\">T</span><span class=\"bp\">.</span><span class=\"n\">N</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Complex</span><span class=\"bp\">.</span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"bp\">↑</span><span class=\"n\">Real</span><span class=\"bp\">.</span><span class=\"n\">pi</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"bp\">↑</span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">    </span><span class=\"n\">linear_combination</span><span class=\"w\"> </span><span class=\"n\">h1</span><span class=\"bp\">/</span><span class=\"mi\">2</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h6</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Complex</span><span class=\"bp\">.</span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"bp\">↑</span><span class=\"n\">Real</span><span class=\"bp\">.</span><span class=\"n\">pi</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">↑↑</span><span class=\"n\">k2</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"bp\">↑↑</span><span class=\"n\">k1</span><span class=\"o\">)</span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"bp\">↑</span><span class=\"n\">T</span><span class=\"bp\">.</span><span class=\"n\">N</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"bp\">↑</span><span class=\"n\">T</span><span class=\"bp\">.</span><span class=\"n\">N</span><span class=\"w\">  </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Complex</span><span class=\"bp\">.</span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"bp\">↑</span><span class=\"n\">Real</span><span class=\"bp\">.</span><span class=\"n\">pi</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"bp\">↑</span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"bp\">↑</span><span class=\"n\">T</span><span class=\"bp\">.</span><span class=\"n\">N</span><span class=\"w\">  </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">    </span><span class=\"n\">linear_combination</span><span class=\"w\"> </span><span class=\"n\">h5</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"bp\">↑</span><span class=\"n\">T</span><span class=\"bp\">.</span><span class=\"n\">N</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h7</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Complex</span><span class=\"bp\">.</span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"bp\">↑</span><span class=\"n\">Real</span><span class=\"bp\">.</span><span class=\"n\">pi</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">↑↑</span><span class=\"n\">k2</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"bp\">↑↑</span><span class=\"n\">k1</span><span class=\"o\">)</span><span class=\"w\">  </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Complex</span><span class=\"bp\">.</span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"bp\">↑</span><span class=\"n\">Real</span><span class=\"bp\">.</span><span class=\"n\">pi</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"bp\">↑</span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"bp\">↑</span><span class=\"n\">T</span><span class=\"bp\">.</span><span class=\"n\">N</span><span class=\"w\">  </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">    </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">@</span><span class=\"n\">div_mul_cancel_of_invertible</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">h6</span>\n<span class=\"w\">    </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">h6</span>\n\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h8</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Complex</span><span class=\"bp\">.</span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"n\">Real</span><span class=\"bp\">.</span><span class=\"n\">pi</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">↑↑</span><span class=\"n\">k2</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"bp\">↑↑</span><span class=\"n\">k1</span><span class=\"o\">))</span><span class=\"w\">  </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Complex</span><span class=\"bp\">.</span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"n\">Real</span><span class=\"bp\">.</span><span class=\"n\">pi</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">↑</span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"bp\">↑</span><span class=\"n\">T</span><span class=\"bp\">.</span><span class=\"n\">N</span><span class=\"o\">))</span><span class=\"w\">  </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">    </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"n\">only</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">mul_assoc</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">h7</span>\n<span class=\"w\">    </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">h7</span>\n\n\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h9</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">k2</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">k1</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">T</span><span class=\"bp\">.</span><span class=\"n\">N</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">    </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"n\">only</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">mul_eq_mul_left_iff</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Complex</span><span class=\"bp\">.</span><span class=\"n\">I_ne_zero</span><span class=\"o\">,</span><span class=\"n\">mul_eq_mul_left_iff</span><span class=\"o\">,</span><span class=\"n\">Complex</span><span class=\"bp\">.</span><span class=\"n\">ofReal_eq_zero</span><span class=\"o\">,</span><span class=\"n\">or_false</span><span class=\"o\">,</span><span class=\"n\">Real</span><span class=\"bp\">.</span><span class=\"n\">pi_ne_zero</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">h8</span>\n<span class=\"w\">    </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">h8</span>\n</code></pre></div>\n<p><a href=\"/user_uploads/3121/kcN4-v5wmEp_UlPQtfwuya72/image.png\">image.png</a><br>\nI am stuck at type mismatch since quite some time, I am not able to either get the type of h8 changed to that of h9 or change the h9 lemma to match the type of h8. Once the types are matched, i can show </p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/kcN4-v5wmEp_UlPQtfwuya72/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"286x129\" src=\"/user_uploads/thumbnail/3121/kcN4-v5wmEp_UlPQtfwuya72/image.png/840x560.webp\"></a></div><p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math display=\"block\" xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>−</mo><mn>1</mn><mo>≤</mo><mi>m</mi><mo>≤</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">-1\\le m \\le 1</annotation></semantics></math></span><span aria-hidden=\"true\" class=\"katex-html\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7804em;vertical-align:-0.136em;\"></span><span class=\"mord\">−</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7719em;vertical-align:-0.136em;\"></span><span class=\"mord mathnormal\">m</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">1</span></span></span></span></span></p>\n<p>since k1, k2 are in Fin T.N and m is not 0 as </p>\n<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math display=\"block\" xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>k</mi><mn>1</mn><mo mathvariant=\"normal\">≠</mo><mi>k</mi><mn>2</mn></mrow><annotation encoding=\"application/x-tex\">k1\\neq k2</annotation></semantics></math></span><span aria-hidden=\"true\" class=\"katex-html\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03148em;\">k</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\"><span class=\"mrel\"><span class=\"mord vbox\"><span class=\"thinbox\"><span class=\"rlap\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"inner\"><span class=\"mord\"><span class=\"mrel\"></span></span></span><span class=\"fix\"></span></span></span></span></span><span class=\"mrel\">=</span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03148em;\">k</span><span class=\"mord\">2</span></span></span></span></span></p>\n<p>which proves that m is not an integer and hence the hn statement is false, which completes the proof by contradiction<br>\nBut i now anticipate if i am not having these types matched, i wont be able to use properties of integers to prove these either. Hence decided to post this query here and get my understanding clear</p>",
        "id": 531721516,
        "sender_full_name": "Shlok Vaibhav",
        "timestamp": 1753834834
    },
    {
        "content": "<p>The problem is that in <code>h9</code> everything is an integer, but in <code>h8</code> everything is a complex number, so to prove <code>h9</code> you need to cast from the integers to the complex numbers:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h9</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">k2</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">k1</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">T</span><span class=\"bp\">.</span><span class=\"n\">N</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">    </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"n\">only</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">mul_eq_mul_left_iff</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Complex</span><span class=\"bp\">.</span><span class=\"n\">I_ne_zero</span><span class=\"o\">,</span><span class=\"n\">mul_eq_mul_left_iff</span><span class=\"o\">,</span><span class=\"n\">Complex</span><span class=\"bp\">.</span><span class=\"n\">ofReal_eq_zero</span><span class=\"o\">,</span><span class=\"n\">or_false</span><span class=\"o\">,</span><span class=\"n\">Real</span><span class=\"bp\">.</span><span class=\"n\">pi_ne_zero</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">h8</span>\n<span class=\"w\">    </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">Int</span><span class=\"bp\">.</span><span class=\"n\">cast_inj</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">ℂ</span><span class=\"o\">)]</span><span class=\"w\"> </span><span class=\"c1\">-- rewrites the equation in complex numbers</span>\n<span class=\"w\">    </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"n\">only</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Int</span><span class=\"bp\">.</span><span class=\"n\">cast_sub</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Int</span><span class=\"bp\">.</span><span class=\"n\">cast_natCast</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Int</span><span class=\"bp\">.</span><span class=\"n\">cast_mul</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">h8</span>\n</code></pre></div>",
        "id": 531749698,
        "sender_full_name": "Joseph Tooby-Smith",
        "timestamp": 1753852325
    },
    {
        "content": "<p>Thanks! I couldn't think of this earlier but now I see it's more manageable to upconvert h9 type instead to complex as part of proof</p>",
        "id": 531959060,
        "sender_full_name": "Shlok Vaibhav",
        "timestamp": 1753923972
    }
]