[
    {
        "content": "<p>Does anyone know of a nice way which we could represent visually the content of PhysLean, something that could be used in talks etc. so people can see roughly what it contains without having to go into the repo itself.</p>",
        "id": 535459281,
        "sender_full_name": "Joseph Tooby-Smith",
        "timestamp": 1755766839
    },
    {
        "content": "<p>I don't, but I am wondering the same thing about FLT, where I have a blueprint but the graph is chaotic and doesn't really represent what is happening.</p>",
        "id": 535473047,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1755771658
    },
    {
        "content": "<p>I only recently start learning Lean and I ponder the visualisation would be easier using tree diagram, like family tree. goal + tactic lays another goal and continues... I am not sure I understand your concern, but this is my take.</p>",
        "id": 535476329,
        "sender_full_name": "Taewoo Lee",
        "timestamp": 1755772933
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"950262\">@Taewoo Lee</span>  nice to see you here! I think you are thinking about this in terms of individual theorems and proof steps? Here I'm more interested in the global structure of the project e.g. the different topics being worked on, how much covarage each area of physics has etc. Saying that, let me add, that I think (if I've understood correctly) what you may be thinking about already exists in the form of: <a href=\"https://github.com/Paper-Proof/paperproof\">paperproof </a>.</p>",
        "id": 535478348,
        "sender_full_name": "Joseph Tooby-Smith",
        "timestamp": 1755773671
    },
    {
        "content": "<p>Mathlib has this <a href=\"https://leanprover-community.github.io//mathlib4_docs/mathlib.html\">import graph</a>, which is of a similar flavor to what I am after, but I struggle to see anything in this graph other then: Mathlib is big and lots of files are imported by lots of other files.</p>",
        "id": 535479921,
        "sender_full_name": "Joseph Tooby-Smith",
        "timestamp": 1755774253
    },
    {
        "content": "<p>Thanks, <span class=\"user-mention\" data-user-id=\"653351\">@Joseph Tooby-Smith</span> . haha, sorry I have a approximate to 0 knowledge of Lean, so I <em>did</em> suggest completely wrong idea. \"paperproof\" is identical to the idea I suggested above, and it is no surprise such proof-visulisation programme is already materialised.</p>",
        "id": 535509073,
        "sender_full_name": "Taewoo Lee",
        "timestamp": 1755784250
    },
    {
        "content": "<p>Ha, no worries <span class=\"user-mention\" data-user-id=\"950262\">@Taewoo Lee</span> ! I think my original message probably lacked key words, which made what I was asking for confusing :).</p>",
        "id": 535520847,
        "sender_full_name": "Joseph Tooby-Smith",
        "timestamp": 1755787623
    },
    {
        "content": "<p>Ok, so this github workflow in a branch called <code>Diagram</code>:</p>\n<div class=\"spoiler-block\"><div class=\"spoiler-header\">\n<p>workflow </p>\n</div><div class=\"spoiler-content\" aria-hidden=\"true\">\n<div class=\"codehilite\" data-code-language=\"YAML\"><pre><span></span><code><span class=\"nt\">name</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">Create diagram</span>\n<span class=\"nt\">on</span><span class=\"p\">:</span>\n<span class=\"w\">  </span><span class=\"nt\">workflow_dispatch</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p p-Indicator\">{}</span>\n<span class=\"w\">  </span><span class=\"nt\">push</span><span class=\"p\">:</span>\n<span class=\"w\">    </span><span class=\"nt\">branches</span><span class=\"p\">:</span>\n<span class=\"w\">      </span><span class=\"p p-Indicator\">-</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">Diagram</span>\n<span class=\"nt\">jobs</span><span class=\"p\">:</span>\n<span class=\"w\">  </span><span class=\"nt\">get_data</span><span class=\"p\">:</span>\n<span class=\"w\">    </span><span class=\"nt\">runs-on</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">ubuntu-latest</span>\n<span class=\"w\">    </span><span class=\"nt\">permissions</span><span class=\"p\">:</span>\n<span class=\"w\">      </span><span class=\"nt\">contents</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">write</span>\n<span class=\"w\">    </span><span class=\"nt\">steps</span><span class=\"p\">:</span>\n<span class=\"w\">      </span><span class=\"p p-Indicator\">-</span><span class=\"w\"> </span><span class=\"nt\">name</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">Checkout project</span>\n<span class=\"w\">        </span><span class=\"nt\">uses</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">actions/checkout@v4</span>\n<span class=\"w\">      </span><span class=\"p p-Indicator\">-</span><span class=\"w\"> </span><span class=\"nt\">name</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">Update diagram</span>\n<span class=\"w\">        </span><span class=\"nt\">uses</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">githubocto/repo-visualizer@main</span>\n<span class=\"w\">        </span><span class=\"nt\">with</span><span class=\"p\">:</span>\n<span class=\"w\">          </span><span class=\"nt\">excluded_paths</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s\">\"ignore,.github,./scripts,./docs,.gitignore,</span><span class=\"nv\"> </span><span class=\"s\">lake-manifest.json,</span><span class=\"nv\"> </span><span class=\"s\">lean-toolchain,</span><span class=\"nv\"> </span><span class=\"s\">.gitpod.yml,</span><span class=\"nv\"> </span><span class=\"s\">lakefile.toml,</span><span class=\"nv\"> </span><span class=\"s\">PhysLean.lean,</span><span class=\"nv\"> </span><span class=\"s\">diagram.svg,</span><span class=\"nv\"> </span><span class=\"s\">README.md,</span><span class=\"nv\"> </span><span class=\"s\">.vscode,</span><span class=\"nv\"> </span><span class=\"s\">CONTRIBUTING.md,</span><span class=\"nv\"> </span><span class=\"s\">LICENSE\"</span>\n<span class=\"w\">          </span><span class=\"nt\">file_colors</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s\">'{\"lean\"</span><span class=\"nv\"> </span><span class=\"s\">:</span><span class=\"nv\"> </span><span class=\"s\">\"#dc4ac2ff\"}'</span>\n</code></pre></div>\n</div></div>\n<p>Generates the following diagram: <a href=\"https://github.com/HEPLean/PhysLean/blob/Diagram/diagram.svg\">https://github.com/HEPLean/PhysLean/blob/Diagram/diagram.svg</a>. It's not ideal, but it is along the lines I was thinking.</p>",
        "id": 535630624,
        "sender_full_name": "Joseph Tooby-Smith",
        "timestamp": 1755847954
    },
    {
        "content": "<p>I have an alternate scheme in mind, using python generate a hierarchical tree data structure from file and folder hierarchies in the repo. Then all hierarchical data visualizations can be easily applied as shown below<br>\n<a href=\"/user_uploads/3121/QvgGbQp1zI7-IP-lQ3d2ZWvZ/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/QvgGbQp1zI7-IP-lQ3d2ZWvZ/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"770x717\" src=\"/user_uploads/thumbnail/3121/QvgGbQp1zI7-IP-lQ3d2ZWvZ/image.png/840x560.webp\"></a></div><p>One added benefit is that customizability to any level, all data in files can be read and just like Taewoo suggested, even statistics about theorems can be visualized or even how the size of repo or a folder is growing with time/users. May help with internal planning and analysis as well</p>",
        "id": 535726991,
        "sender_full_name": "Shlok Vaibhav",
        "timestamp": 1755883830
    },
    {
        "content": "<p>If this seems relevant, i can share and implement a quick basic scheme, maybe a treemap and everyone can give feedback on this approach?</p>",
        "id": 535727196,
        "sender_full_name": "Shlok Vaibhav",
        "timestamp": 1755883910
    },
    {
        "content": "<p>Yeah something like this would be great, and seems very relevant! I would especially like to be able to visualize how things change with time!</p>",
        "id": 535732263,
        "sender_full_name": "Joseph Tooby-Smith",
        "timestamp": 1755886092
    },
    {
        "content": "<p>I would be interested to see the code for this as well, I was wondering if there was a way to use the hierarchical structure to algorithmically determine the best places to start learning a repo. Not just for PhysLean but also Mathlib. But I'm not sure how to start pulling that kind of data.</p>",
        "id": 535771145,
        "sender_full_name": "Daniel Morrison",
        "timestamp": 1755909113
    },
    {
        "content": "<p>So two separate aims, i found lots of tools online to visualize the meta-data of a repo, this seems reasonable given ubiquity of need of such tools. The easiest one as mentioned in this blog: <a href=\"https://cupprum.github.io/git-render/\">https://cupprum.github.io/git-render/</a> (Took 5 mins to setup, two py packages - gitpython to generate the data structure and plotly to generate treemap) generates an interactive tree map and a sunburst where you can keep descending. (The commits are shown on log10 scale). I will share list of some more tools that i feel relevant, like found a tool that shows growth of commits/files over time (<a href=\"https://github.com/wdm0006/git-pandas\">https://github.com/wdm0006/git-pandas</a>, though very few stars so needs scrutiny). As to the original problem of generating good visualizations to convey the scope and activity of PhysLean, will need to explore more data visualization tools like plotly as text-visibility is also crucial there<a href=\"/user_uploads/3121/UuJx0fOWzMlRZ9_NUaRGsAuS/image.png\">image.png</a><br>\n<a href=\"/user_uploads/3121/vcc6-i8LYww-oaJHoVIqt9vB/image.png\">image.png</a><br>\nHere's a short video of using the treemap and sunburst:<br>\n<a href=\"/user_uploads/3121/UycxfeC9bviB5lsHvXKtrZ2E/PhysLean_Plotly.mp4\">PhysLean_Plotly.mp4</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/UuJx0fOWzMlRZ9_NUaRGsAuS/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"2478x1189\" src=\"/user_uploads/thumbnail/3121/UuJx0fOWzMlRZ9_NUaRGsAuS/image.png/840x560.webp\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/3121/vcc6-i8LYww-oaJHoVIqt9vB/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"1234x1085\" src=\"/user_uploads/thumbnail/3121/vcc6-i8LYww-oaJHoVIqt9vB/image.png/840x560.webp\"></a></div><div class=\"message_inline_image message_inline_video\"><a href=\"/user_uploads/3121/UycxfeC9bviB5lsHvXKtrZ2E/PhysLean_Plotly.mp4\" title=\"PhysLean_Plotly.mp4\"><video preload=\"metadata\" src=\"/user_uploads/3121/UycxfeC9bviB5lsHvXKtrZ2E/PhysLean_Plotly.mp4\"></video></a></div>",
        "id": 535776978,
        "sender_full_name": "Shlok Vaibhav",
        "timestamp": 1755917140
    },
    {
        "content": "<p>This is the code from that blog: </p>\n<div class=\"codehilite\" data-code-language=\"Python\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"nn\">os</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"nn\">plotly.express</span><span class=\"w\"> </span><span class=\"k\">as</span><span class=\"w\"> </span><span class=\"nn\">px</span>\n\n<span class=\"kn\">from</span><span class=\"w\"> </span><span class=\"nn\">git</span><span class=\"w\"> </span><span class=\"kn\">import</span> <span class=\"n\">Repo</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"nn\">numpy</span><span class=\"w\"> </span><span class=\"k\">as</span><span class=\"w\"> </span><span class=\"nn\">np</span>\n<span class=\"n\">repo</span> <span class=\"o\">=</span> <span class=\"n\">Repo</span><span class=\"p\">(</span><span class=\"s2\">\"./Github/PhysLean\"</span><span class=\"p\">)</span>\n\n<span class=\"n\">blobs</span> <span class=\"o\">=</span> <span class=\"p\">[{</span>\n    <span class=\"s1\">'parent'</span><span class=\"p\">:</span> <span class=\"n\">os</span><span class=\"o\">.</span><span class=\"n\">path</span><span class=\"o\">.</span><span class=\"n\">dirname</span><span class=\"p\">(</span><span class=\"n\">blob</span><span class=\"o\">.</span><span class=\"n\">path</span><span class=\"p\">)</span> <span class=\"ow\">or</span> <span class=\"s2\">\"/\"</span><span class=\"p\">,</span>\n    <span class=\"s1\">'path'</span><span class=\"p\">:</span> <span class=\"n\">blob</span><span class=\"o\">.</span><span class=\"n\">path</span><span class=\"p\">,</span>\n    <span class=\"s1\">'commits'</span><span class=\"p\">:</span> <span class=\"n\">np</span><span class=\"o\">.</span><span class=\"n\">log10</span><span class=\"p\">(</span><span class=\"nb\">len</span><span class=\"p\">(</span><span class=\"n\">commits</span> <span class=\"o\">:=</span> <span class=\"nb\">list</span><span class=\"p\">(</span><span class=\"n\">repo</span><span class=\"o\">.</span><span class=\"n\">iter_commits</span><span class=\"p\">(</span><span class=\"n\">paths</span><span class=\"o\">=</span><span class=\"n\">blob</span><span class=\"o\">.</span><span class=\"n\">path</span><span class=\"p\">)))),</span>\n<span class=\"p\">}</span> <span class=\"k\">for</span> <span class=\"n\">blob</span> <span class=\"ow\">in</span> <span class=\"n\">repo</span><span class=\"o\">.</span><span class=\"n\">tree</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"n\">traverse</span><span class=\"p\">()]</span>\n\n\n\n<span class=\"n\">px</span><span class=\"o\">.</span><span class=\"n\">treemap</span><span class=\"p\">(</span>\n    <span class=\"n\">blobs</span><span class=\"p\">,</span>\n    <span class=\"n\">names</span><span class=\"o\">=</span><span class=\"s1\">'path'</span><span class=\"p\">,</span>\n    <span class=\"n\">parents</span><span class=\"o\">=</span><span class=\"s1\">'parent'</span><span class=\"p\">,</span>\n    <span class=\"n\">color</span><span class=\"o\">=</span><span class=\"s1\">'commits'</span><span class=\"p\">,</span>\n    <span class=\"n\">color_continuous_scale</span><span class=\"o\">=</span><span class=\"s1\">'amp'</span><span class=\"p\">,</span>\n<span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">show</span><span class=\"p\">()</span>\n</code></pre></div>",
        "id": 535777288,
        "sender_full_name": "Shlok Vaibhav",
        "timestamp": 1755917503
    },
    {
        "content": "<p>Nice! This looks awesome! Do you know if this something which can be hosted with a simple python server?</p>",
        "id": 535794621,
        "sender_full_name": "Joseph Tooby-Smith",
        "timestamp": 1755941345
    },
    {
        "content": "<p>I realized what I wanted was actually the import structure and not file structure, and found <a href=\"https://github.com/leanprover-community/import-graph\">import-graph</a> which you get with Mathlib and can generate graph structures of the imports.</p>",
        "id": 535868608,
        "sender_full_name": "Daniel Morrison",
        "timestamp": 1755990993
    },
    {
        "content": "<p>If you're looking for cool visualizations of git repo contents over time (including who is changing which files), there's also <a href=\"https://gource.io/\">gource</a>. It's fun to look at, and you can spot things like large rewrites, or which contributors usually touch which areas. It can be a bit difficult to spot individual files though.</p>",
        "id": 535868835,
        "sender_full_name": "Joscha Mennicken",
        "timestamp": 1755991386
    },
    {
        "content": "<p>I was able to get some code working for determining the transitive imports and transitive dependents based on the import graph I mentioned above. Here's a test plot of the number of transitive dependents versus the number of transitive imports, and a zoom in excluding the outliers. Does this mean anything? Idk lol</p>\n<p><a href=\"/user_uploads/3121/WaGcn2P8pwuP5lBuursIigN3/Figure_1.png\">Figure_1.png</a><br>\n<a href=\"/user_uploads/3121/lmrxLjji4pQGcgRLY2rxYNHh/Figure_2.png\">Figure_2.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/WaGcn2P8pwuP5lBuursIigN3/Figure_1.png\" title=\"Figure_1.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"640x480\" src=\"/user_uploads/thumbnail/3121/WaGcn2P8pwuP5lBuursIigN3/Figure_1.png/840x560.webp\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/3121/lmrxLjji4pQGcgRLY2rxYNHh/Figure_2.png\" title=\"Figure_2.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"640x480\" src=\"/user_uploads/thumbnail/3121/lmrxLjji4pQGcgRLY2rxYNHh/Figure_2.png/840x560.webp\"></a></div>",
        "id": 535884547,
        "sender_full_name": "Daniel Morrison",
        "timestamp": 1756016830
    },
    {
        "content": "<p>Nice <span class=\"user-mention\" data-user-id=\"421885\">@Joscha Mennicken</span>  thanks for sharing! Will have to explore how to get this working for PhysLean!</p>",
        "id": 535885445,
        "sender_full_name": "Joseph Tooby-Smith",
        "timestamp": 1756018290
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"622397\">@Daniel Morrison</span>  ooh thanks! I think the outlier at 350+ (to the right) is the main file PhysLean.lean, right? This does actually have a lot of benefit I think. In particular for speed of building, we want the number of transitive imports to be as small as possible, so focusing on reducing it for those files with high transitive imports would be a good task.</p>",
        "id": 535885542,
        "sender_full_name": "Joseph Tooby-Smith",
        "timestamp": 1756018467
    },
    {
        "content": "<p>Would be interested in the outlier to the top left is?</p>",
        "id": 535885588,
        "sender_full_name": "Joseph Tooby-Smith",
        "timestamp": 1756018546
    },
    {
        "content": "<p>Maybe a more interesting example, I made a histogram of the product of the fraction of files imported times the fraction of files that depend on it as a simple model of measuring the importance of a file. Basically it's useful in that many files use that information, but not so low level that you import everything.</p>\n<p>As expected, most files are basically zero, but there is a separation of some outliers above .015. These are those outliers: </p>\n<ul>\n<li>PhysLean.SpaceAndTime.SpaceTime.Basic</li>\n<li>PhysLean.Relativity.Tensors.RealTensor.Vector.MinkowskiProduct</li>\n<li>PhysLean.Relativity.Tensors.RealTensor.Vector.Basic</li>\n<li>PhysLean.Relativity.Tensors.RealTensor.Metrics.Basic</li>\n<li>PhysLean.Relativity.Tensors.RealTensor.Basic</li>\n<li>PhysLean.QFT.PerturbationTheory.FieldSpecification.Basic</li>\n</ul>\n<p>Interestingly 5 of the 6 are the Basic files in different folders, ones that I would usually go to as a starting point when understanding the project. So maybe there is something to this measure of \"importance\".</p>\n<p><a href=\"/user_uploads/3121/JDVSGvKqtDO6Fu_nADYidQuZ/Figure_3.png\">Figure_3.png</a><br>\n<a href=\"/user_uploads/3121/75Z9E86oPZ7tQ4K_vbgN7wfh/Figure_4.png\">Figure_4.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/JDVSGvKqtDO6Fu_nADYidQuZ/Figure_3.png\" title=\"Figure_3.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"640x480\" src=\"/user_uploads/thumbnail/3121/JDVSGvKqtDO6Fu_nADYidQuZ/Figure_3.png/840x560.webp\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/3121/75Z9E86oPZ7tQ4K_vbgN7wfh/Figure_4.png\" title=\"Figure_4.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"640x480\" src=\"/user_uploads/thumbnail/3121/75Z9E86oPZ7tQ4K_vbgN7wfh/Figure_4.png/840x560.webp\"></a></div>",
        "id": 535885880,
        "sender_full_name": "Daniel Morrison",
        "timestamp": 1756018942
    },
    {
        "content": "<p>You are right that the outlier to the right is PhysLean.lean, because by construction it imports everything. I'll check what the other outliers are, but I would guess that maybe they are the meta files.</p>",
        "id": 535885967,
        "sender_full_name": "Daniel Morrison",
        "timestamp": 1756019109
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"653351\">Joseph Tooby-Smith</span> <a href=\"#narrow/channel/479953-PhysLean/topic/Visual.20representation.20of.20the.20content.20in.20PhysLean.3F/near/535794621\">said</a>:</p>\n<blockquote>\n<p>Nice! This looks awesome! Do you know if this something which can be hosted with a simple python server?</p>\n</blockquote>\n<p>I assume here we want to consider the ways to put something like this interactive on physlean homepage?<br>\nThis implementation works on a local clone of the repo, so I think this is not something that can be put on physlean. So need to look for other ways</p>",
        "id": 535886112,
        "sender_full_name": "Shlok Vaibhav",
        "timestamp": 1756019272
    },
    {
        "content": "<p>I was correct, the outliers are</p>\n<ul>\n<li>PhysLean.Meta.TODO.Basic: 270 files</li>\n<li>PhysLean.Meta.Informal.Basic: 168 files</li>\n</ul>\n<p>While I'm doing this anyway, the files with 80+ imports are all in QFT.PerturbationTheory.WickAlgebra and QFT.PerturbationTheory.WickContraction.</p>",
        "id": 535886170,
        "sender_full_name": "Daniel Morrison",
        "timestamp": 1756019357
    },
    {
        "content": "<p>Nice <span class=\"user-mention\" data-user-id=\"622397\">@Daniel Morrison</span> ! This all makes sense, and this seems very useful information!</p>\n<p>Related to <span class=\"user-mention\" data-user-id=\"917541\">@Shlok Vaibhav</span>  I would be interested in putting this sort of thing on the website, or at least having an automated workflow which could allow us to see this sort of information updated on new commits.</p>",
        "id": 535886351,
        "sender_full_name": "Joseph Tooby-Smith",
        "timestamp": 1756019711
    },
    {
        "content": "<blockquote>\n<p>I assume here we want to consider the ways to put something like this interactive on physlean homepage?<br>\nThis implementation works on a local clone of the repo, so I think this is not something that can be put on physlean. So need to look for other ways</p>\n</blockquote>\n<p>Ok, it may still be possible with a local clone. There is a server for the PhysLean website, basically to run: </p>\n<ul>\n<li><a href=\"https://live.physlean.com\">https://live.physlean.com</a></li>\n<li><a href=\"https://loogle.physlean.com\">https://loogle.physlean.com</a> (which is currently down and needs fixing) <br>\nBut 'static' ways of displaying it are naturally better and easier to maintain.</li>\n</ul>",
        "id": 535886461,
        "sender_full_name": "Joseph Tooby-Smith",
        "timestamp": 1756019888
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"622397\">Daniel Morrison</span> <a href=\"#narrow/channel/479953-PhysLean/topic/Visual.20representation.20of.20the.20content.20in.20PhysLean.3F/near/535886170\">said</a>:</p>\n<blockquote>\n<p>While I'm doing this anyway, the files with 80+ imports are all in QFT.PerturbationTheory.WickAlgebra and QFT.PerturbationTheory.WickContraction.</p>\n</blockquote>\n<p>Ok, I think this somewhat makes sense. Those files are part of the proof of Wick's theorem in QFT and setting up perturbation theory, as such they depend on a lot of the relativity stuff etc.</p>",
        "id": 535886549,
        "sender_full_name": "Joseph Tooby-Smith",
        "timestamp": 1756020039
    },
    {
        "content": "<p><a href=\"/user_uploads/3121/vCXVljVt6TtFIOVISo0NYoU6/image.png\">image.png</a><br>\nCleaned up it little just for presentation ( but no distinguishing information amongst code files of same folder)</p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/vCXVljVt6TtFIOVISo0NYoU6/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"2375x1173\" src=\"/user_uploads/thumbnail/3121/vCXVljVt6TtFIOVISo0NYoU6/image.png/840x560.webp\"></a></div><p>Code:</p>\n<div class=\"codehilite\" data-code-language=\"Python\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"nn\">os</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"nn\">plotly.express</span><span class=\"w\"> </span><span class=\"k\">as</span><span class=\"w\"> </span><span class=\"nn\">px</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"nn\">itertools</span>\n<span class=\"kn\">from</span><span class=\"w\"> </span><span class=\"nn\">git</span><span class=\"w\"> </span><span class=\"kn\">import</span> <span class=\"n\">Repo</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"nn\">numpy</span><span class=\"w\"> </span><span class=\"k\">as</span><span class=\"w\"> </span><span class=\"nn\">np</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"nn\">pandas</span><span class=\"w\"> </span><span class=\"k\">as</span><span class=\"w\"> </span><span class=\"nn\">pd</span>\n\n<span class=\"n\">repo</span> <span class=\"o\">=</span> <span class=\"n\">Repo</span><span class=\"p\">(</span><span class=\"s2\">\"./Github/PhysLean\"</span><span class=\"p\">)</span>\n<span class=\"n\">physlean_path</span> <span class=\"o\">=</span> <span class=\"n\">os</span><span class=\"o\">.</span><span class=\"n\">path</span><span class=\"o\">.</span><span class=\"n\">join</span><span class=\"p\">(</span><span class=\"n\">repo</span><span class=\"o\">.</span><span class=\"n\">working_tree_dir</span><span class=\"p\">,</span> <span class=\"s2\">\"PhysLean\"</span><span class=\"p\">)</span>\n<span class=\"n\">folders</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"n\">name</span> <span class=\"k\">for</span> <span class=\"n\">name</span> <span class=\"ow\">in</span> <span class=\"n\">os</span><span class=\"o\">.</span><span class=\"n\">listdir</span><span class=\"p\">(</span><span class=\"n\">physlean_path</span><span class=\"p\">)</span> <span class=\"k\">if</span> <span class=\"n\">os</span><span class=\"o\">.</span><span class=\"n\">path</span><span class=\"o\">.</span><span class=\"n\">isdir</span><span class=\"p\">(</span><span class=\"n\">os</span><span class=\"o\">.</span><span class=\"n\">path</span><span class=\"o\">.</span><span class=\"n\">join</span><span class=\"p\">(</span><span class=\"n\">physlean_path</span><span class=\"p\">,</span> <span class=\"n\">name</span><span class=\"p\">))]</span>\n<span class=\"n\">folder_map</span> <span class=\"o\">=</span> <span class=\"p\">{</span><span class=\"n\">folder</span><span class=\"p\">:</span> <span class=\"n\">idx</span> <span class=\"o\">+</span> <span class=\"mi\">1</span> <span class=\"k\">for</span> <span class=\"n\">idx</span><span class=\"p\">,</span> <span class=\"n\">folder</span> <span class=\"ow\">in</span> <span class=\"nb\">enumerate</span><span class=\"p\">(</span><span class=\"n\">folders</span><span class=\"p\">)}</span>\n<span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">folder_map</span><span class=\"p\">)</span>\n<span class=\"n\">blobs</span> <span class=\"o\">=</span> <span class=\"p\">[{</span>\n    <span class=\"s1\">'parent'</span><span class=\"p\">:</span> <span class=\"n\">os</span><span class=\"o\">.</span><span class=\"n\">path</span><span class=\"o\">.</span><span class=\"n\">dirname</span><span class=\"p\">(</span><span class=\"n\">blob</span><span class=\"o\">.</span><span class=\"n\">path</span><span class=\"p\">)</span> <span class=\"ow\">or</span> <span class=\"s2\">\"/\"</span><span class=\"p\">,</span>\n    <span class=\"s1\">'idee'</span><span class=\"p\">:</span> <span class=\"n\">blob</span><span class=\"o\">.</span><span class=\"n\">path</span><span class=\"p\">,</span>\n    <span class=\"s1\">'labeling'</span><span class=\"p\">:</span> <span class=\"n\">blob</span><span class=\"o\">.</span><span class=\"n\">path</span><span class=\"o\">.</span><span class=\"n\">rsplit</span><span class=\"p\">(</span><span class=\"s2\">\"/\"</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">)[</span><span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">]</span><span class=\"o\">.</span><span class=\"n\">removesuffix</span><span class=\"p\">(</span><span class=\"s2\">\"lean\"</span><span class=\"p\">),</span>\n\n    <span class=\"c1\">#'commits': len(commits := list(repo.iter_commits(paths=blob.path))),</span>\n    <span class=\"s1\">'value'</span><span class=\"p\">:</span> <span class=\"p\">(</span>\n        <span class=\"n\">folder_map</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"n\">blob</span><span class=\"o\">.</span><span class=\"n\">path</span><span class=\"o\">.</span><span class=\"n\">split</span><span class=\"p\">(</span><span class=\"s2\">\"/\"</span><span class=\"p\">)[</span><span class=\"mi\">1</span><span class=\"p\">],</span> <span class=\"mi\">0</span><span class=\"p\">)</span>\n        <span class=\"k\">if</span> <span class=\"nb\">len</span><span class=\"p\">(</span><span class=\"n\">blob</span><span class=\"o\">.</span><span class=\"n\">path</span><span class=\"o\">.</span><span class=\"n\">split</span><span class=\"p\">(</span><span class=\"s2\">\"/\"</span><span class=\"p\">))</span> <span class=\"o\">&gt;</span> <span class=\"mi\">1</span> <span class=\"ow\">and</span> <span class=\"n\">blob</span><span class=\"o\">.</span><span class=\"n\">path</span><span class=\"o\">.</span><span class=\"n\">startswith</span><span class=\"p\">(</span><span class=\"s2\">\"PhysLean/\"</span><span class=\"p\">)</span>\n        <span class=\"k\">else</span> <span class=\"mi\">0</span>\n    <span class=\"p\">)}</span> <span class=\"k\">for</span> <span class=\"n\">blob</span> <span class=\"ow\">in</span> <span class=\"n\">repo</span><span class=\"o\">.</span><span class=\"n\">tree</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"n\">traverse</span><span class=\"p\">()</span> <span class=\"k\">if</span> <span class=\"s2\">\"PhysLean\"</span> <span class=\"ow\">in</span> <span class=\"n\">blob</span><span class=\"o\">.</span><span class=\"n\">path</span><span class=\"o\">.</span><span class=\"n\">rsplit</span><span class=\"p\">(</span><span class=\"s2\">\"/\"</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">)[</span><span class=\"mi\">0</span><span class=\"p\">]]</span>\n\n<span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">blobs</span><span class=\"p\">[</span><span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">])</span>\n\n\n\n<span class=\"n\">fig</span> <span class=\"o\">=</span> <span class=\"n\">px</span><span class=\"o\">.</span><span class=\"n\">treemap</span><span class=\"p\">(</span>\n<span class=\"n\">blobs</span><span class=\"p\">,</span>\n    <span class=\"n\">names</span><span class=\"o\">=</span><span class=\"s1\">'labeling'</span><span class=\"p\">,</span>\n    <span class=\"n\">ids</span> <span class=\"o\">=</span> <span class=\"s1\">'idee'</span><span class=\"p\">,</span>\n    <span class=\"n\">parents</span><span class=\"o\">=</span><span class=\"s1\">'parent'</span><span class=\"p\">,</span>\n    <span class=\"n\">labels</span> <span class=\"o\">=</span> <span class=\"s1\">'labeling'</span><span class=\"p\">,</span>\n    <span class=\"n\">color</span><span class=\"o\">=</span><span class=\"s1\">'value'</span><span class=\"p\">,</span>\n    <span class=\"c1\">#hover_data=['commits'],</span>\n    <span class=\"c1\">#values='commits',</span>\n    <span class=\"n\">color_continuous_scale</span><span class=\"o\">=</span><span class=\"s1\">'plasma'</span><span class=\"p\">,</span>\n<span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">show</span><span class=\"p\">()</span>\n</code></pre></div>",
        "id": 535899678,
        "sender_full_name": "Shlok Vaibhav",
        "timestamp": 1756038750
    },
    {
        "content": "<p>Tried to ensure that every file name is visible above, colormap choice needs to be better. Tried spectral color scale but the yellow hue needs to be avoided, so need to change the value assignment to folders: <br>\n<a href=\"/user_uploads/3121/4Bgt5Dg0ijhfrhL65UE_j9hW/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/4Bgt5Dg0ijhfrhL65UE_j9hW/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"2379x1158\" src=\"/user_uploads/thumbnail/3121/4Bgt5Dg0ijhfrhL65UE_j9hW/image.png/840x560.webp\"></a></div>",
        "id": 535899720,
        "sender_full_name": "Shlok Vaibhav",
        "timestamp": 1756038799
    },
    {
        "content": "<p>This looks great <span class=\"user-mention\" data-user-id=\"917541\">@Shlok Vaibhav</span> , do the size of the boxes represent the sizes of the files?</p>\n<p>A more general comment: the PhysLean repo has a ./scripts/... directory which may be a good place for this kind of program, if you and <span class=\"user-mention\" data-user-id=\"622397\">@Daniel Morrison</span> would be interested in contributing them there? We could then think about integrating them into the website, but it would be nice to make sure they nevertheless don't get lost.</p>",
        "id": 535906952,
        "sender_full_name": "Joseph Tooby-Smith",
        "timestamp": 1756046967
    },
    {
        "content": "<p>Yeah that's a good idea. I have some ideas for stuff to add and I want to clean up some of the code first but I'll eventually share it</p>",
        "id": 535922181,
        "sender_full_name": "Daniel Morrison",
        "timestamp": 1756064459
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"653351\">@Joseph Tooby-Smith</span> ,have added the file size part now. <br>\nYes, it would be good to have such a treemap on website because i found it informative to look at, didn't know before there was thermodynamics as well. <br>\n<a href=\"/user_uploads/3121/AIhbiT5ISMznLR04bLaqGr5H/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/AIhbiT5ISMznLR04bLaqGr5H/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"2370x1144\" src=\"/user_uploads/thumbnail/3121/AIhbiT5ISMznLR04bLaqGr5H/image.png/840x560.webp\"></a></div>",
        "id": 535940502,
        "sender_full_name": "Shlok Vaibhav",
        "timestamp": 1756085728
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"917541\">@Shlok Vaibhav</span> What is the outputted format of this, e.g. is it svg, or html or just png?</p>",
        "id": 535958775,
        "sender_full_name": "Joseph Tooby-Smith",
        "timestamp": 1756102184
    },
    {
        "content": "<p>Default is an interactive widget which is what I generate, it allows you to zoom into a portion as well as hover over to view some data like commits, file size etc. the output can also be saved as png or html. Probably just having png is good enough as presently all files can be comfortably seen in the image, later on interactive may become important as files grow numerous or some metric is to be seen on hovering</p>",
        "id": 535963866,
        "sender_full_name": "Shlok Vaibhav",
        "timestamp": 1756104754
    },
    {
        "content": "<p>What do you feel needs to be emphasized in such plots to be usable in 1) talks 2) website . For now, i emphasized visibility of all files and file size</p>",
        "id": 535964190,
        "sender_full_name": "Shlok Vaibhav",
        "timestamp": 1756104932
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"917541\">Shlok Vaibhav</span> <a href=\"#narrow/channel/479953-PhysLean/topic/Visual.20representation.20of.20the.20content.20in.20PhysLean.3F/near/535963866\">said</a>:</p>\n<blockquote>\n<p>Default is an interactive widget which is what I generate, it allows you to zoom into a portion as well as hover over to view some data like commits, file size etc. the output can also be saved as png or html. Probably just having png is good enough as presently all files can be comfortably seen in the image, later on interactive may become important as files grow numerous or some metric is to be seen on hovering</p>\n</blockquote>\n<p>Nice, ok, thanks this makes sense.</p>",
        "id": 535964418,
        "sender_full_name": "Joseph Tooby-Smith",
        "timestamp": 1756105050
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"917541\">Shlok Vaibhav</span> <a href=\"#narrow/channel/479953-PhysLean/topic/Visual.20representation.20of.20the.20content.20in.20PhysLean.3F/near/535964190\">said</a>:</p>\n<blockquote>\n<p>What do you feel needs to be emphasized in such plots to be usable in 1) talks 2) website . For now, i emphasized visibility of all files and file size</p>\n</blockquote>\n<p>I actually think this is already emphasizing the right things - it shows what areas have more development then others, and I think in talks it would be pretty easy to point to different areas of the project to demonstrate specific things which has been done. </p>\n<p>For the website, I think the ideal situation would be to have a github workflow which automatically generates this diagram either as html or png. Do you think this would be possible?</p>",
        "id": 535965112,
        "sender_full_name": "Joseph Tooby-Smith",
        "timestamp": 1756105361
    },
    {
        "content": "<p>I too feel it will be necessary to find such automation, I will try to find how to incorporate into GitHub workflow, never dealt with such automations before <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span></p>",
        "id": 535966268,
        "sender_full_name": "Shlok Vaibhav",
        "timestamp": 1756105932
    },
    {
        "content": "<p>I think for such automation the starting point is to write down the command line prompts one would need to e.g. generate the image, since this makes up the bulk of the workflow. There are specific commands to e.g. clone a repo, download python etc. As an example, <a href=\"https://github.com/HEPLean/PhysLean_Website/blob/main/.github/workflows/DocsArtifact.yml\">this</a> workflow on the PhysLean website repo clones the main PhysLean repo and builds it and then performs some basic commands.</p>",
        "id": 535980802,
        "sender_full_name": "Joseph Tooby-Smith",
        "timestamp": 1756111572
    },
    {
        "content": "<p>I've opened a PR with a python script that generates an mp4 video using gource at <a href=\"https://github.com/HEPLean/PhysLean/pull/711\">PhysLean#711</a>. You may want to add more authors and/or tweak some gource and ffmpeg options before merging.</p>",
        "id": 536003756,
        "sender_full_name": "Joscha Mennicken",
        "timestamp": 1756120782
    },
    {
        "content": "<p>If you add authors to the script, their GitHub profile pictures will be used instead of a generic placeholder in the final video.</p>",
        "id": 536003857,
        "sender_full_name": "Joscha Mennicken",
        "timestamp": 1756120813
    },
    {
        "content": "<p>Nice! Thanks <span class=\"user-mention\" data-user-id=\"421885\">@Joscha Mennicken</span> , I think with the author list it is probably easier to either scrape it from GitHub or leave it empty. Maybe the latter is the simpler?</p>",
        "id": 536023124,
        "sender_full_name": "Joseph Tooby-Smith",
        "timestamp": 1756127607
    },
    {
        "content": "<p>I think scraping GitHub would be a bit more complicated. The authors list exists not only for the fancy profile pictures, but also to ensure that commits under different aliases are recognized as by the same person. For example, you have made commits both as <code>jstoobysmith</code> as well as <code>Joseph Tooby-Smith</code>, which would be displayed as two different avatars by default.</p>",
        "id": 536024092,
        "sender_full_name": "Joscha Mennicken",
        "timestamp": 1756127988
    },
    {
        "content": "<p>Ok, thanks for explaining! I think the most democratic thing to do then is for now to leave the author list empty, and if someone gets chance latter they could fill it in with everyone that has contributed, then that's all good. I'm happy to make this change to the PR - just let me know.</p>\n<p>Also, didn't realize we could use the notation <a href=\"https://github.com/HEPLean/PhysLean/pull/711\">PhysLean#711</a> <span aria-label=\"joy\" class=\"emoji emoji-1f602\" role=\"img\" title=\"joy\">:joy:</span> , I wonder when that got added <span aria-label=\"slight smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"slight smile\">:slight_smile:</span> .</p>",
        "id": 536055760,
        "sender_full_name": "Joseph Tooby-Smith",
        "timestamp": 1756137211
    },
    {
        "content": "<p>It was added earlier today: <a href=\"#narrow/channel/236604-Zulip-meta/topic/PhysLean.20linkifier.20broken/near/536029225\">https://leanprover.zulipchat.com/#narrow/channel/236604-Zulip-meta/topic/PhysLean.20linkifier.20broken/near/536029225</a></p>",
        "id": 536060673,
        "sender_full_name": "Joscha Mennicken",
        "timestamp": 1756138682
    },
    {
        "content": "<p>Awesome thanks for getting that sorted <span class=\"user-mention\" data-user-id=\"421885\">@Joscha Mennicken</span> !</p>",
        "id": 536061305,
        "sender_full_name": "Joseph Tooby-Smith",
        "timestamp": 1756138882
    },
    {
        "content": "<p>Note that when you run my script, it shows you the list of names that it doesn't yet know authors for. Completing the authors list is a matter of going through those names and assigning them GitHub account names and aliases.</p>\n<p>Feel free to edit or remove the author list as you wish.</p>",
        "id": 536067186,
        "sender_full_name": "Joscha Mennicken",
        "timestamp": 1756140852
    },
    {
        "content": "<p>Update: Had Silly query about workflow, got resolved on its own, trying to workflow with python on a simple repo, seems doable, thanks for pointing to the action! Using that in conjunction with this guide on using python in workflows: <a href=\"https://github.com/actions/setup-python\">https://github.com/actions/setup-python</a><br>\n<a href=\"/user_uploads/3121/RTnMajF_U1hvMV2gGcsRpwKn/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/RTnMajF_U1hvMV2gGcsRpwKn/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"897x712\" src=\"/user_uploads/thumbnail/3121/RTnMajF_U1hvMV2gGcsRpwKn/image.png/840x560.webp\"></a></div>",
        "id": 536135869,
        "sender_full_name": "Shlok Vaibhav",
        "timestamp": 1756171417
    },
    {
        "content": "<p>Sorry for the delay, I am able to run a workflow that creates and commits a png file. Have raised a PR (724).</p>",
        "id": 536993601,
        "sender_full_name": "Shlok Vaibhav",
        "timestamp": 1756658228
    }
]