[
    {
        "content": "<p>So Physlean all the lemmas and definitions are <code>sorry</code> free, and I don't think we should change this. </p>\n<p>However, I think it would be nice to allow to have a certain types of lemmas and definitions which do allow sorry,  e.g. <code>sorryful_lemma</code> and <code>sorryful_def</code>. </p>\n<p>I think this can be achieved  with some type of linter which </p>\n<ul>\n<li>fails if a <code>lemma</code> or <code>def</code> or <code>theorem</code> contains the sorry axiom, </li>\n<li>fails if a <code>sorryful_lemma</code> or <code>sorryful_def</code> does <em>not</em> contain a sorry axiom.</li>\n</ul>\n<p>Ideally the  <code>sorryful_lemma</code> and <code>sorryful_def</code> should also appear in the TODO list. </p>\n<p>I'm open to different names instead of  <code>sorryful_lemma</code> and <code>sorryful_def</code>, and any thoughts on whether this is a good idea or not. But also, does anyone know the best way this could be implemented?</p>",
        "id": 525871879,
        "sender_full_name": "Joseph Tooby-Smith",
        "timestamp": 1750933402
    },
    {
        "content": "<p>I think this <a class=\"stream-topic\" data-stream-id=\"270676\" href=\"/#narrow/channel/270676-lean4/topic/Silent.20sorry/with/503537964\">#lean4 &gt; Silent sorry</a>  could form part of a solution</p>",
        "id": 525906389,
        "sender_full_name": "Joseph Tooby-Smith",
        "timestamp": 1750944839
    },
    {
        "content": "<p>what's the difference between this and <code>semiformal_result</code>?</p>",
        "id": 525932721,
        "sender_full_name": "ZhiKai Pong",
        "timestamp": 1750952235
    },
    {
        "content": "<p>This can be viewed as a more general version of <code>semiformal_result</code>.</p>\n<p>This is because  <code>semiformal_result</code> does not accept any proof, whilst <code>sorryful_lemma</code> would accept a partial proof which contains <code>sorry</code>. For example, you may know how to do most of a proof but not one or two steps etc.</p>\n<p>Also you should be able to use <code>sorryful_lemma</code> and <code>sorryful_def</code> results to prove and define further <code>sorryful_lemma</code> and <code>sorryful_def</code> results which is not currently possible with <code>semiformal_result</code>.</p>",
        "id": 525933803,
        "sender_full_name": "Joseph Tooby-Smith",
        "timestamp": 1750952600
    },
    {
        "content": "<p>I think this should effectively subsume <code>semiformal_result</code>. It would help with labor division as someone experienced can quickly churnout a good API with sorries and then others can fill in the blanks and also already use it somewhere else.</p>",
        "id": 525962284,
        "sender_full_name": "Tomas Skrivan",
        "timestamp": 1750963091
    },
    {
        "content": "<p>Agreed, after this is implemented <code>semiformal_result</code> should be removed. </p>\n<p>A draft PR is here <a href=\"https://github.com/HEPLean/PhysLean/pull/627\">PR627</a>.<br>\nThe idea is to have <code>sorryful_lemma</code> and <code>sorryful_def</code> as synonymous of <code>lemma</code> and <code>def</code>, and have a linter which picks up  the presence of the <code>sorry</code> axiom in all declarations execpt <code>sorryful_lemma</code> and <code>sorryful_def</code>, where it's inclusion is enforced.</p>\n<p>I currently have the linter (just for <code>sorryful_lemma</code> for now), but can't work out how to turn it on globally, or make it run when using <code>lake exe runlinter</code>.</p>",
        "id": 525966443,
        "sender_full_name": "Joseph Tooby-Smith",
        "timestamp": 1750964927
    },
    {
        "content": "<p>I've now finished <a href=\"https://github.com/HEPLean/PhysLean/pull/627/\">PR627</a>. Ended up going down a different route to <code>sorryful_lemma</code> and <code>sorryful_def</code>, which is to create an attribute <code>@[sorryful]</code> and a linter <code>noSorry</code>. </p>\n<p>The linter <code>noSorry</code> enforces the condition that the declaration depnds on the<code>sorryAx</code> axiom if and only if that it has the <code>sorryful</code> attribute.  With the vscode extension <code>TODO Highlight</code> the <code>sorryful</code> attribute will appear in red. </p>\n<p>An example is: </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kd\">@[</span><span class=\"n\">sorryful</span><span class=\"kd\">]</span>\n<span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">toElectricMagneticField_equivariant</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">d</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">LorentzGroup</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">E</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ElectricField</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">MagneticField</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">SpaceTime</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">toElectricMagneticField</span><span class=\"bp\">.</span><span class=\"n\">symm</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">lorentzAction</span><span class=\"bp\">.</span><span class=\"n\">smul</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">E</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"o\">)))</span><span class=\"bp\">.</span><span class=\"m\">1</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"bp\">=</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">realLorentzTensor</span><span class=\"bp\">.</span><span class=\"n\">F</span><span class=\"bp\">.</span><span class=\"n\">obj</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">ρ</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"n\">toElectricMagneticField</span><span class=\"bp\">.</span><span class=\"n\">symm</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">E</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"o\">))</span><span class=\"bp\">.</span><span class=\"m\">1</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>One downside of this is that Linting now takes a bit longer due to the extra <code>noSorry</code> lint. The <code>@[sorryful]</code> attribute also helps with adding these lemmas to the TODO list of the project.</p>\n<p>If anyone one would like to review that PR that would be great :).</p>",
        "id": 526063216,
        "sender_full_name": "Joseph Tooby-Smith",
        "timestamp": 1751023415
    },
    {
        "content": "<p>I'm planning on modifying this <code>noSorry</code> linter to include another attribute on top of <code>sorryful</code>, called <code>pseudo</code> (happy to hear suggestions for other names). </p>\n<p>The idea is that the linter will enforce the condition that a definition or theorem depends on the axiom <code>Lean.ofReduceBool</code> if and only if it also has the attribute <code>pseudo</code>. This will be part of the same linter so should not take any more time to enforce. </p>\n<p>The axiom <code>Lean.ofReduceBool</code> gets added when using the tactic <code>native_decide</code> which can be much much faster then <code>decide</code>. The catch is,  that with <code>Lean.ofReduceBool</code> it is possible to prove <code>false</code> is <code>true</code>, and therefore prove anything (although from what I understand you have to be <em>trying</em> to get this to happen). Hence why i think having an attribute is a nice way to enforce the labelling of such results. This is described nicely in the docstring of <code>native_decide</code>:</p>\n<blockquote>\n<p>This should be used with care because it adds the entire lean compiler to the trusted part, and the axiom <code>Lean.ofReduceBool</code> will show up in <code>#print axioms</code> for theorems using this method or anything that transitively depends on them. Nevertheless, because it is compiled, this can be significantly more efficient than using <code>decide</code>, and for very large computations this is one way to run external programs and trust the result.</p>\n</blockquote>",
        "id": 528588529,
        "sender_full_name": "Joseph Tooby-Smith",
        "timestamp": 1752472048
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"653351\">@Joseph Tooby-Smith</span> would you mind confirming if the TODO list on the Physlean website (<a href=\"https://physlean.com/TODOList\">https://physlean.com/TODOList</a>) is up to date? Thank you!</p>",
        "id": 529678532,
        "sender_full_name": "Shaopeng",
        "timestamp": 1753007487
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"692118\">@Shaopeng</span>. Yep, the TODO list is up to date. It is actually automatically generated from the Lean code itself rather than made independently - so should always be up-to date in this respect.  This doesn't mean someone isn't already working on those TODO items (but in the vast majority of cases no one is), and looking at the open PR's is a good way of seeing this.</p>",
        "id": 529679101,
        "sender_full_name": "Joseph Tooby-Smith",
        "timestamp": 1753008157
    },
    {
        "content": "<p>In particular the only once I know which are been tackled by someone are the once related to the Harmonic Oscillator in classical mechanics, which are being discussed here: <a class=\"stream-topic\" data-stream-id=\"479953\" href=\"/#narrow/channel/479953-PhysLean/topic/Mini.20projects/with/529675903\">#PhysLean &gt; Mini projects</a>, and the once related to the Space file which are been discussed here: <a class=\"stream-topic\" data-stream-id=\"479953\" href=\"/#narrow/channel/479953-PhysLean/topic/Space.2C.20Time.20and.20SpaceTime.20API/with/529556316\">#PhysLean &gt; Space, Time and SpaceTime API</a> .</p>",
        "id": 529679343,
        "sender_full_name": "Joseph Tooby-Smith",
        "timestamp": 1753008477
    },
    {
        "content": "<p>Thank you for clarifying this and for the tips, <span class=\"user-mention\" data-user-id=\"653351\">@Joseph Tooby-Smith</span> . I truly appreciate it!!</p>",
        "id": 529680127,
        "sender_full_name": "Shaopeng",
        "timestamp": 1753009468
    },
    {
        "content": "<p>Is there a list of all  <code>@[sorryful]</code> tagged lemmas or is the TODO list the best we've got?</p>",
        "id": 572725647,
        "sender_full_name": "ZhiKai Pong",
        "timestamp": 1770630617
    },
    {
        "content": "<p>Ah nevermind I can filter by sorryful result on the TODO list page. Would it be easy to implement a global filter on top of the page rather than per module?</p>",
        "id": 572728464,
        "sender_full_name": "ZhiKai Pong",
        "timestamp": 1770631328
    },
    {
        "content": "<p>I think this should be easy to implement - and I agree it would be useful. The filtering is just done with javascript, so I suspect we could 'vibe-code' this.</p>",
        "id": 572758572,
        "sender_full_name": "Joseph Tooby-Smith",
        "timestamp": 1770639006
    }
]