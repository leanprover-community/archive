[
    {
        "content": "<p>I have just committed to PhysLean a PR containing Maxwell’s equations:</p>\n<p><a href=\"https://github.com/HEPLean/PhysLean/pull/410\">https://github.com/HEPLean/PhysLean/pull/410</a></p>\n<p>Given the importance of Maxwell’s equations to certain areas of physics, I thought it is worth making a thread about it here.</p>\n<p>I also want to make something clear. It is relatively easy to just write down Maxwell’s equations into Lean. However, what you really want is Maxwell’s equations integrated and working nicely with a general API for space-time, special relativity etc.  This is what is contained in the above PR. </p>\n<p>The upshot of this, is it becomes easy to talk about the field strength of an EM field (which is already in PhysLean), the vector potential etc and use standard index notation to talk about and manipulate these constructions. It should allow it to be connected to QED once API around gauge field theories is formulated.</p>",
        "id": 506973545,
        "sender_full_name": "Joseph Tooby-Smith",
        "timestamp": 1742477418
    },
    {
        "content": "<p>Very nice, the equations turned out really nice.</p>\n<p>What is your opinion on bundling all the data together in <code>EMSystem</code>? I understand that right now it makes everything a lot cleaner but is it going to be flexible in applications? In my experience, every time I introduce structure like this I have to rebuild equivalent API as for <code>Prod</code> if I start working with it e.g. <code>EMSystem.ρ</code> is a linear map.</p>",
        "id": 507031668,
        "sender_full_name": "Tomas Skrivan",
        "timestamp": 1742490571
    },
    {
        "content": "<p>Thanks! I'm hoping there is enough API around them and spacetime that they are also useable in practice.</p>\n<p>Good point about bundling things together. I agree that in this case I think I may have gone over-board. <br>\nMaybe an option in-between would be to move <code>ρ</code> and <code>J</code> out of <code>EMSystem</code> (and giving them there own named types <code>ChargeDensity</code> and <code>CurrentDensity</code>) and just make <code>EMSystem</code> about the constants <code>c</code> and <code>ε₀</code>. I think this would also physically make more sense.  But I'm open to other options.</p>",
        "id": 507034523,
        "sender_full_name": "Joseph Tooby-Smith",
        "timestamp": 1742491311
    },
    {
        "content": "<p>Yeah I would personally keep <code>ρ</code> and <code>J</code> as explicit arguments. Imagine you would like to do magneto-hydrodynamics then your unknowns are something like <code>E</code>, <code>B</code>, <code>v</code>(velocity), <code>ρ</code>(density), <code>q</code>(charge density) then  <code>J</code> is a function of <code>v</code>,<code>ρ</code> and <code>q</code>.</p>",
        "id": 507052801,
        "sender_full_name": "Tomas Skrivan",
        "timestamp": 1742496928
    },
    {
        "content": "<p>Can I suggest that <code>EMSystem</code> gets a requirement that the charge and current density are _measurable_ functions? I think this will significantly improve downstream facts ... situations where they <em>aren't</em> measurable is kind of unphysical.</p>",
        "id": 507468319,
        "sender_full_name": "Alex Meiburg",
        "timestamp": 1742662290
    },
    {
        "content": "<p>Actually, if I reflect on it ... I think the charge density as just being a real-valued number isn't appropriate either. I definitely care about point charges! Shouldn't it (and the current) be a signed measure instead?</p>",
        "id": 507468392,
        "sender_full_name": "Alex Meiburg",
        "timestamp": 1742662331
    },
    {
        "content": "<p>(either way very cool and I'm happy to see it <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span> )</p>",
        "id": 507468431,
        "sender_full_name": "Alex Meiburg",
        "timestamp": 1742662368
    },
    {
        "content": "<p>Hi Alex!  Thanks for your comment.</p>\n<p>I was following the approach that we should include properties like measurability as and when they are needed, rather then including them in the type. But I agree with you that to deal with point charges we will need signed measures.</p>\n<p>Ultimately we will want to connect this with four currents and i think it is good if we make these objects as easy to work with as possible. So some thought and experimentation might be needed.</p>\n<p>For now I've split the current density and charge density from EMSystem following <span class=\"user-mention\" data-user-id=\"346070\">@Tomas Skrivan</span>'s suggestion and added TODOS regarding signed measures.</p>\n<p>Anyone should feel welcome to have an attempt at this.</p>",
        "id": 507709875,
        "sender_full_name": "Joseph Tooby-Smith",
        "timestamp": 1742811328
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"653351\">@Joseph Tooby-Smith</span>  do you know if there is pde support to implement the wave equations in EM ?</p>",
        "id": 510292716,
        "sender_full_name": "Nadim Farhat",
        "timestamp": 1743801403
    },
    {
        "content": "<p>What exactly do you mean by \"pde support\"? Something like finite differences to actually run a simulation or do you want to just prove that such pde has a solution?</p>",
        "id": 510294819,
        "sender_full_name": "Tomas Skrivan",
        "timestamp": 1743802408
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"346070\">@Tomas Skrivan</span>  simulation, I have found your GitHub,  I will take a look at it</p>",
        "id": 510301560,
        "sender_full_name": "Nadim Farhat",
        "timestamp": 1743806013
    },
    {
        "content": "<p><a href=\"https://github.com/lecopivo/SciLean/blob/blas/examples/WaveEquation.lean\">Here</a> is simulation of scalar wave equation starting from Hamiltonian discretized in space.</p>",
        "id": 510301725,
        "sender_full_name": "Tomas Skrivan",
        "timestamp": 1743806090
    },
    {
        "content": "<p>Thanks, you read my mind</p>",
        "id": 510301825,
        "sender_full_name": "Nadim Farhat",
        "timestamp": 1743806148
    },
    {
        "content": "<p>And here I talk about it, <a href=\"https://youtu.be/X1oEV5SsFJ8?si=QLmz7G61M6cVvvIC&amp;t=933\">youtube</a></p>\n<div class=\"youtube-video message_inline_image\"><a data-id=\"X1oEV5SsFJ8\" href=\"https://youtu.be/X1oEV5SsFJ8?si=QLmz7G61M6cVvvIC&amp;t=933\"><img src=\"https://uploads.zulipusercontent.net/9437f4f79a9767fa94c92f3fea35970b39bbe2e4/68747470733a2f2f692e7974696d672e636f6d2f76692f58316f4556355373464a382f6d7164656661756c742e6a7067\"></a></div>",
        "id": 510301926,
        "sender_full_name": "Tomas Skrivan",
        "timestamp": 1743806201
    },
    {
        "content": "<p>already on it :)</p>",
        "id": 510302257,
        "sender_full_name": "Nadim Farhat",
        "timestamp": 1743806404
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"346070\">Tomas Skrivan</span> <a href=\"#narrow/channel/479953-PhysLean/topic/Maxwell's.20Equations/near/510294819\">said</a>:</p>\n<blockquote>\n<p>What exactly do you mean by \"pde support\"? Something like finite differences to actually run a simulation or do you want to just prove that such pde has a solution?</p>\n</blockquote>\n<p>Just to answer the other side of this. There is support to prove that such pde's have solutions formally. In PhysLean this exists for odes in the form of the quantum harmonic oscillator. But I'm sure it won't be long for examples using pde's. Not to say this is easy though.</p>",
        "id": 510341189,
        "sender_full_name": "Joseph Tooby-Smith",
        "timestamp": 1743835470
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"890057\">@ZhiKai Pong</span>'s struggles prompted me to write down Maxwell's equations without using <code>SpaceTime</code>. All the machinery for tensors in PhysLean is really cool but still needs lots of work and API to be really usable. In meantime, it might be a good idea to take step back and write down Maxwell's equations in a simpler way using only mathlib <code>EuclideanSpace</code> and develop vector calculus over normal <code>ℝ³</code></p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Analysis</span><span class=\"bp\">.</span><span class=\"n\">Calculus</span><span class=\"bp\">.</span><span class=\"n\">FDeriv</span><span class=\"bp\">.</span><span class=\"n\">Symmetric</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Analysis</span><span class=\"bp\">.</span><span class=\"n\">InnerProductSpace</span><span class=\"bp\">.</span><span class=\"n\">PiL2</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">LinearAlgebra</span><span class=\"bp\">.</span><span class=\"n\">Trace</span>\n\n<span class=\"kn\">noncomputable</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">div</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">X</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">NormedAddCommGroup</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">NormedSpace</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">LinearMap</span><span class=\"bp\">.</span><span class=\"n\">trace</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">fderiv</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span>\n\n<span class=\"kn\">local</span><span class=\"w\"> </span><span class=\"kn\">notation</span><span class=\"w\"> </span><span class=\"s2\">\"ℝ³\"</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">EuclideanSpace</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">)</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">EuclideanSpace</span><span class=\"w\"> </span><span class=\"n\">InnerProductSpace</span><span class=\"w\"> </span><span class=\"k\">in</span>\n<span class=\"kn\">noncomputable</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">curl</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"bp\">³</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"bp\">³</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"bp\">³</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"bp\">³</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"c1\">-- get i-th component of `f`</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">fi</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">⟪</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">single</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"o\">:</span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"bp\">⟫_</span><span class=\"n\">ℝ</span>\n<span class=\"w\">  </span><span class=\"c1\">-- derivative of i-th component in j-th coordinate</span>\n<span class=\"w\">  </span><span class=\"c1\">-- ∂fᵢ/∂xⱼ</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">df</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"n\">j</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">fderiv</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">fi</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">single</span><span class=\"w\"> </span><span class=\"n\">j</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"o\">:</span><span class=\"n\">ℝ</span><span class=\"o\">))</span>\n<span class=\"w\">  </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">    </span><span class=\"k\">match</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"k\">with</span>\n<span class=\"w\">    </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">df</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">df</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"n\">x</span>\n<span class=\"w\">    </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">df</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">df</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"n\">x</span>\n<span class=\"w\">    </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">df</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">df</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"n\">x</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">μ₀</span><span class=\"w\"> </span><span class=\"n\">ε₀</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ρ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"bp\">³</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">J</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"bp\">³</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"bp\">³</span><span class=\"o\">)</span>\n\n<span class=\"sd\">/-- Gauss's law for the Electric field. -/</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">GaussLawElectric</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">E</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"bp\">³</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"bp\">³</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">ε₀</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">div</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">E</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"bp\">·</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">ρ</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"n\">x</span>\n\n<span class=\"sd\">/-- Gauss's law for the Magnetic field. -/</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">GaussLawMagnetic</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"bp\">³</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"bp\">³</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">div</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"bp\">·</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span>\n\n<span class=\"sd\">/-- Faraday's law. -/</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">FaradayLaw</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">E</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"bp\">³</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"bp\">³</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">curl</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"bp\">·</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">μ₀</span><span class=\"w\"> </span><span class=\"bp\">•</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">J</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">ε₀</span><span class=\"w\"> </span><span class=\"bp\">•</span><span class=\"w\"> </span><span class=\"n\">deriv</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">E</span><span class=\"w\"> </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"o\">)</span>\n\n<span class=\"sd\">/-- Ampère's law. -/</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">AmpereLaw</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">E</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"bp\">³</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"bp\">³</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">curl</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">E</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"bp\">·</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">deriv</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">t</span>\n</code></pre></div>",
        "id": 510420641,
        "sender_full_name": "Tomas Skrivan",
        "timestamp": 1743893980
    },
    {
        "content": "<p>Also I think a better way to define <code>curl</code> would be to first have a function that extracts antisymmetric part of a matrix and puts it in a vector (not sure what is the best way to implement this)</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"sd\">/--</span>\n<span class=\"sd\">Take anti-symmetric part of `A` and flatten it to a vector</span>\n<span class=\"sd\">-/</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Matrix</span><span class=\"bp\">.</span><span class=\"n\">antisymmVec</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Matrix</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">  </span><span class=\"n\">EuclideanSpace</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"bp\">/</span><span class=\"mi\">2</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>i.e. for 3x3 matrix it returns <code>(a₁₂ - a₂₁, a₂₀ - a₀₂, a₀₂ - a₂₀)</code><br>\nThen for symmetric matrix we have that this function returns zero</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">Matrix</span><span class=\"bp\">.</span><span class=\"n\">antisymmVec_of_symmetric</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Matrix</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"n\">j</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"n\">j</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">j</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"bp\">.</span><span class=\"n\">antisymmVec</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>Then curl is simply the antisymmetric part of derivative</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">EuclideanSpace</span><span class=\"w\"> </span><span class=\"n\">InnerProductSpace</span><span class=\"w\"> </span><span class=\"k\">in</span>\n<span class=\"kn\">noncomputable</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">curl'</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"bp\">³</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"bp\">³</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"bp\">³</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">EuclideanSpace</span><span class=\"bp\">.</span><span class=\"n\">basisFun</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"bp\">|&gt;.</span><span class=\"n\">toBasis</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">LinearMap</span><span class=\"bp\">.</span><span class=\"n\">toMatrix</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">fderiv</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">))</span><span class=\"bp\">.</span><span class=\"n\">antisymmVec</span>\n</code></pre></div>\n<p>With this definition it should be easy to prove that curl of gradient is zero because you take the second derivative and take the antisymmetric part.</p>",
        "id": 510421011,
        "sender_full_name": "Tomas Skrivan",
        "timestamp": 1743894283
    },
    {
        "content": "<p>And divergence of curl should just boil down to the statement that trace of antisymmetric matrix is zero.</p>",
        "id": 510421059,
        "sender_full_name": "Tomas Skrivan",
        "timestamp": 1743894329
    },
    {
        "content": "<p>I agree that the API around tensors needs improving, especially around derivatives of tensors. If you know what would make it easier in terms of derivatives <span class=\"user-mention\" data-user-id=\"346070\">@Tomas Skrivan</span>, I would be glad to hear.</p>\n<p>The reason <code>SpaceTime</code> is defined the way it is - is so that one can use index notation with it, it carries an action of the Lorentz group etc. </p>\n<p>Splitting space and time in this way is bad for relativity, however it is done already in the form of Maxwell equations we have. Thus, I think we should define a (linear?) equivalence </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">timeSlice</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">...</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">...</span><span class=\"o\">]</span><span class=\"w\">  </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">SpaceTime</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">≃</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Time</span><span class=\"w\">  </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Space</span><span class=\"w\">  </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">...</span>\n</code></pre></div>\n<p>and prove some API around it, for example that it commutes with spatial <code>div</code>, <code>curl</code> and <code>grad</code>, and derivatives in general. Here <code>Space</code> is just <code>EuclideanSpace</code> and <code>Time</code> is just <code>ℝ</code>. </p>\n<p>We can then have a result which shows that the Maxwell's equations in PhysLean are equivalent through <code>timeSlice</code> to <span class=\"user-mention\" data-user-id=\"346070\">@Tomas Skrivan</span> 's version.</p>",
        "id": 510447568,
        "sender_full_name": "Joseph Tooby-Smith",
        "timestamp": 1743917032
    },
    {
        "content": "<p>I'm actually wondering, shouldn't Maxwell equations be formulated with covariant derivative? </p>\n<p>You use tensors for the domain  of electromagnetic fields but shouldn't they be used also for the codomain?</p>",
        "id": 510449420,
        "sender_full_name": "Tomas Skrivan",
        "timestamp": 1743918732
    },
    {
        "content": "<p>You can write them in terms of the field strength as for example the Banchi identity. There is some API around the field strength and its relation to the electric and magnetic field. But not the maxwell equations in terms of it yet.</p>",
        "id": 510449988,
        "sender_full_name": "Joseph Tooby-Smith",
        "timestamp": 1743919216
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"653351\">Joseph Tooby-Smith</span> <a href=\"#narrow/stream/479953-PhysLean/topic/Maxwell's.20Equations/near/510447568\">said</a>:</p>\n<blockquote>\n<p>I agree that the API around tensors needs improving, especially around derivatives of tensors. If you know what would make it easier in terms of derivatives <span class=\"user-mention silent\" data-user-id=\"346070\">Tomas Skrivan</span>, I would be glad to hear.</p>\n</blockquote>\n<p>I think you want to minimize the number of core derivative operators, each one will require a substantial amount of API to be easy to use.</p>\n<p>I would say that having <code>spaceDiv</code> and <code>spaceCurl</code> is not the best choice. <code>spaceDiv</code> should just be an abbreviation for covariant derivative and then contracting the corresponding dimensions and should be defined in arbitrary dimension. Similarly for <code>spaceCurl</code> I would define Levi-Civita tensor and again appropriately contract it with covariant derivative.</p>",
        "id": 510450026,
        "sender_full_name": "Tomas Skrivan",
        "timestamp": 1743919245
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"346070\">@Tomas Skrivan</span> agreed this is very likely what we want to do. I want to implement properly Euclidean tensors at some point which can hopefully feed in to this.</p>",
        "id": 510450375,
        "sender_full_name": "Joseph Tooby-Smith",
        "timestamp": 1743919482
    },
    {
        "content": "<p>We also have to deal with relating derivatives on SpacTime with derivatives on Space and Time but this should be relatively easy</p>",
        "id": 510450448,
        "sender_full_name": "Joseph Tooby-Smith",
        "timestamp": 1743919562
    },
    {
        "content": "<p>Ha I wrote it without looking at your definitions properly, the divergence is more less as I would expect. I would just change the definition of curl in terms of Levi-Civita tensor</p>",
        "id": 510450505,
        "sender_full_name": "Tomas Skrivan",
        "timestamp": 1743919575
    },
    {
        "content": "<p>Yeah there is quite a tension between having the spacetime together and having space and time arguments.</p>\n<p>I guess if you do relativity you really want the two together but for anything non-relativistic or even relativistic but in a concrete coordinate frame you probably want space and time separate.</p>\n<p>I have started playing around with some meta programming that could turn PDE to its finite difference discretization and there it would be much easier to have time and space as separate arguments.</p>",
        "id": 510450805,
        "sender_full_name": "Tomas Skrivan",
        "timestamp": 1743919840
    },
    {
        "content": "<p>Ohh one thing, I think you should not have <code>SpaceTime.deriv</code> but should have a special definition for whatever this is <code>((realLorentzTensor d).tensorBasis _ (fun x =&gt; Fin.cast (by simp) μ))</code> and just use <code>fderiv</code></p>",
        "id": 510450980,
        "sender_full_name": "Tomas Skrivan",
        "timestamp": 1743919994
    },
    {
        "content": "<p>And probably keep <code>SpaceTime.deriv</code> as an abbreviation</p>",
        "id": 510451010,
        "sender_full_name": "Tomas Skrivan",
        "timestamp": 1743920036
    },
    {
        "content": "<p>Ok, this is good to know! I'm hoping something like <code>timeSlice</code> above will allow us to go between these two descriptions. Note that <code>timeSlice</code> explicitly breaks special relativity (isn't equivariant under the Lorentz group etc), which is what we expect.</p>",
        "id": 510451298,
        "sender_full_name": "Joseph Tooby-Smith",
        "timestamp": 1743920260
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"346070\">Tomas Skrivan</span> <a href=\"#narrow/channel/479953-PhysLean/topic/Maxwell's.20Equations/near/510450980\">said</a>:</p>\n<blockquote>\n<p>Ohh one thing, I think you should not have <code>SpaceTime.deriv</code> but should have a special definition for whatever this is <code>((realLorentzTensor d).tensorBasis _ (fun x =&gt; Fin.cast (by simp) μ))</code> and just use <code>fderiv</code></p>\n</blockquote>\n<p>Ha, yeah,   <code>((realLorentzTensor d).tensorBasis _ (fun x =&gt; Fin.cast (by simp) μ))</code> is just the unit vector in <code>SpaceTime</code> pointing in the <code>μ</code> direction. We can surely think of a good name for this :). I think keeping <code>SpaceTime.deriv</code> as an abbreviation is good - if only not to scare people with <code>fderiv</code>.</p>",
        "id": 510451504,
        "sender_full_name": "Joseph Tooby-Smith",
        "timestamp": 1743920370
    },
    {
        "content": "<p>Do I remember correctly that in relativity you use Greek indices for indexing over spacetime and Latin indices to index only over space? Some kind of mechanism to easily switch between spacetime and space only in Lean would be nice.</p>",
        "id": 510451622,
        "sender_full_name": "Tomas Skrivan",
        "timestamp": 1743920449
    },
    {
        "content": "<p>Yes this is true. I think this should be possible to do with the elaborator. </p>\n<p>(I should note I am refactoring the <code>Tensor</code> part of PhysLean to make it a lot simpler, it won't change any of the discussion here regarding <code>SpaceTime</code>, it will just make it more adaptable and easy to use in general).</p>",
        "id": 510451792,
        "sender_full_name": "Joseph Tooby-Smith",
        "timestamp": 1743920574
    },
    {
        "content": "<p>Is <code>fderiv</code> really scary? It is because of the fancy name <strong>Frechet derivative</strong> which is traditionally connected with another scary term <strong>Banach spaces</strong>? It is just a linear approximation of a function at a point and given direction it gives you a derivative in that direction.</p>",
        "id": 510451906,
        "sender_full_name": "Tomas Skrivan",
        "timestamp": 1743920665
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"653351\">Joseph Tooby-Smith</span> <a href=\"#narrow/stream/479953-PhysLean/topic/Maxwell's.20Equations/near/510451792\">said</a>:</p>\n<blockquote>\n<p>Yes this is true. I think this should be possible to do with the elaborator. </p>\n</blockquote>\n<p>I'm not sure if it is a good idea to mimic exactly what is being done on paper. I'm just suggesting to have some kind of mechanism that achieves the same goal. It could be just a simple function with a short  name and a well thought out API</p>",
        "id": 510452066,
        "sender_full_name": "Tomas Skrivan",
        "timestamp": 1743920793
    },
    {
        "content": "<p>I guess \"scary\" is a matter of opinion. I don't find higher category theory scary - but I find measure theory etc. scary :).  I think many people would be the opposite</p>\n<p>To me it is scary in the sense that I have to take an extra thought, which is \"is this derivative the same as the one I am use to\". The answer is - yes, but it is something I have to think about. If an abbreviation helps make it explicit that <code>fderiv</code> is the thing you want, I think this is a good thing.</p>",
        "id": 510452421,
        "sender_full_name": "Joseph Tooby-Smith",
        "timestamp": 1743921045
    },
    {
        "content": "<p>This, I guess, is somewhat related to 'boolean blindness'. For example, I'd much rather have a type <code>Space</code> which people go - \"ok, this is what I should use for space\"  rather then them having to realize that they need to use <code>EuclideanSpace _ _</code>.</p>",
        "id": 510452578,
        "sender_full_name": "Joseph Tooby-Smith",
        "timestamp": 1743921196
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"346070\">Tomas Skrivan</span> <a href=\"#narrow/channel/479953-PhysLean/topic/Maxwell's.20Equations/near/510451622\">ha scritto</a>:</p>\n<blockquote>\n<p>Do I remember correctly that in relativity you use Greek indices for indexing over spacetime and Latin indices to index only over space? Some kind of mechanism to easily switch between spacetime and space only in Lean would be nice.</p>\n</blockquote>\n<p>Perhaps this is not exactly what you meant, but in the context of trying to develop SR within PhysLean  (<a href=\"https://github.com/HEPLean/PhysLean/pull/439\">https://github.com/HEPLean/PhysLean/pull/439</a>), based on a suggestion from <span class=\"user-mention\" data-user-id=\"653351\">@Joseph Tooby-Smith</span> I'm making good use of the below:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"sd\">/-- Extract spatial components from a Lorentz vector,</span>\n<span class=\"sd\">    returning them as a vector in Euclidean space. -/</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">spatialPart</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">d</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Vector</span><span class=\"w\"> </span><span class=\"n\">d</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">EuclideanSpace</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"n\">d</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Sum</span><span class=\"bp\">.</span><span class=\"n\">inr</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">)</span>\n\n<span class=\"sd\">/-- Extract time component from a Lorentz vector -/</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">timeComponent</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">d</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Vector</span><span class=\"w\"> </span><span class=\"n\">d</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Sum</span><span class=\"bp\">.</span><span class=\"n\">inl</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 510452817,
        "sender_full_name": "Matteo Cipollina",
        "timestamp": 1743921386
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"779253\">@Matteo Cipollina</span> Ha, a feature of Zulip, is that it assumes your PR is about Mathlib and links to the corresponding PR thereof. :)</p>",
        "id": 510452985,
        "sender_full_name": "Joseph Tooby-Smith",
        "timestamp": 1743921545
    },
    {
        "content": "<p>Let me summarize what I think the actionable points of this conversation are: </p>\n<ul>\n<li>Define the <code>epsilon tensor</code> in general dimension. </li>\n<li>Define <code>spaceCurl</code> in terms of this epsilon tensor. </li>\n<li>Define a map <code>timeSlice</code> taking <code>SpaceTime → M</code> to <code>Time  → Space  → M</code> with corresponding API. </li>\n<li>Define <code>((realLorentzTensor d).tensorBasis _ (fun x =&gt; Fin.cast (by simp) μ))</code> formally as a unit vector in <code>SpaceTime</code> pointing the the <code>μ</code> direction. </li>\n<li>Change <code>SpaceTime.deriv</code> to an abbreviation of <code>fderiv</code> using the above spacetime derivative. </li>\n<li>Come up with a good way to go from SpaceTime to Space derivatives etc. (e.g. greek derivatives vs latin)</li>\n<li>Use the above to rewrite Maxwell's equations in a better way. </li>\n</ul>\n<p>Sorry if I've missed or mis-represented something here.</p>",
        "id": 510453668,
        "sender_full_name": "Joseph Tooby-Smith",
        "timestamp": 1743922124
    },
    {
        "content": "<p>Not sure if you want to define <code>epsilon</code> in an arbitrary dimension its shape would be <code>(n*(n-1)/2, n, n)</code> which happens to be <code>(3,3,3)</code> for <code>n=3</code>. But I checked that <code>3*(3-1)/2</code> is defeq to <code>3</code> so it should not cause too much trouble.</p>",
        "id": 510454072,
        "sender_full_name": "Tomas Skrivan",
        "timestamp": 1743922448
    },
    {
        "content": "<p>An alternative name for <code>timeSplice</code> could be <code>timeCurry</code> or <code>SpaceTime.curry</code></p>",
        "id": 510454155,
        "sender_full_name": "Tomas Skrivan",
        "timestamp": 1743922527
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"346070\">Tomas Skrivan</span> <a href=\"#narrow/channel/479953-PhysLean/topic/Maxwell's.20Equations/near/510454072\">said</a>:</p>\n<blockquote>\n<p>Not sure if you want to define <code>epsilon</code> in an arbitrary dimension its shape would be <code>(n*(n-1)/2, n, n)</code> which happens to be <code>(3,3,3)</code> for <code>n=3</code>. But I checked that <code>3*(3-1)/2</code> is defeq to <code>3</code> so it should not cause too much trouble.</p>\n</blockquote>\n<p>In 4d wouldn't it be (4, 4, 4, 4), in 5d (5, 5, 5, 5, 5) i.e <a href=\"https://en.wikipedia.org/wiki/Levi-Civita_symbol\">here</a>?</p>",
        "id": 510454261,
        "sender_full_name": "Joseph Tooby-Smith",
        "timestamp": 1743922605
    },
    {
        "content": "<p>Ohh I see, I was thinking about it together with derivative as taking 1-forms to 2-forms.</p>",
        "id": 510454417,
        "sender_full_name": "Tomas Skrivan",
        "timestamp": 1743922716
    },
    {
        "content": "<p>The (4,4,4,4) epsilon comes up in special relativity (and even more so in general relativity) plenty :)</p>",
        "id": 510717946,
        "sender_full_name": "Alex Meiburg",
        "timestamp": 1744043557
    },
    {
        "content": "<p>After a bit of thought I have changed my stance of things. </p>\n<p>I now agree that we should redefine the Electric and Magnetic field to be: </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">abbrev</span><span class=\"w\"> </span><span class=\"n\">ElectricField</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">d</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Time</span><span class=\"w\">  </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Space</span><span class=\"w\"> </span><span class=\"n\">d</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">EuclideanSpace</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"n\">d</span><span class=\"o\">)</span>\n\n<span class=\"kn\">abbrev</span><span class=\"w\"> </span><span class=\"n\">MagneticField</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">d</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\">  </span><span class=\"n\">Time</span><span class=\"w\">  </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Space</span><span class=\"w\"> </span><span class=\"n\">d</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">EuclideanSpace</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"n\">d</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>instead of </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">abbrev</span><span class=\"w\"> </span><span class=\"n\">ElectricField</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">d</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">SpaceTime</span><span class=\"w\"> </span><span class=\"n\">d</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">EuclideanSpace</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"n\">d</span><span class=\"o\">)</span>\n\n<span class=\"kn\">abbrev</span><span class=\"w\"> </span><span class=\"n\">MagneticField</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">d</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\">  </span><span class=\"n\">SpaceTime</span><span class=\"w\"> </span><span class=\"n\">d</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">EuclideanSpace</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"n\">d</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>However we should keep the field strength defined through: </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">SpaceTime</span><span class=\"w\"> </span><span class=\"n\">d</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℝT</span><span class=\"o\">[</span><span class=\"n\">d</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">up</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">up</span><span class=\"o\">]</span>\n</code></pre></div>\n<p>Here is my reasoning: </p>\n<ul>\n<li>In PhysLean <code>SpaceTime d </code> is defined to carry the action of Lorentz group. </li>\n<li>In PhysLean <code>Space d</code> is defined to carry the action of rotations.[its actually not currently defined in this way but this is easy to do].</li>\n<li>For the field strength it is the former which is important (naturally because it is a Lorentz tensor). </li>\n<li>For the electric and magnetic field it is the latter. Notably rotations take the Electric field to the Electric field whilst boosts do not.</li>\n</ul>",
        "id": 510955395,
        "sender_full_name": "Joseph Tooby-Smith",
        "timestamp": 1744123819
    },
    {
        "content": "<p>A more basic thing I'm not sure about is where should we put the API for <code>Space</code> and <code>Time</code>. Naturally <code>SpaceTime</code> sits in the <code>Relativity</code> folder, but I don't think <code>Space</code> and <code>Time</code> should. Maybe <code>ClassicalMechanics</code>?</p>",
        "id": 510957557,
        "sender_full_name": "Joseph Tooby-Smith",
        "timestamp": 1744124353
    },
    {
        "content": "<p>The transformation argument is neat! And I favor typing the fields like this.</p>",
        "id": 510957832,
        "sender_full_name": "Tomas Skrivan",
        "timestamp": 1744124411
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"653351\">Joseph Tooby-Smith</span> <a href=\"#narrow/stream/479953-PhysLean/topic/Maxwell's.20Equations/near/510957557\">said</a>:</p>\n<blockquote>\n<p>A more basic thing I'm not sure about is where should we put the API for <code>Space</code> and <code>Time</code>. Naturally <code>SpaceTime</code> sits in the <code>Relativity</code> folder, but I don't think <code>Space</code> and <code>Time</code> should. Maybe <code>ClassicalMechanics</code>?</p>\n</blockquote>\n<p>I would expect some specialized math folder, but I don't have a strong opinion about this. Classical mechanics folder seems fine.</p>",
        "id": 510959148,
        "sender_full_name": "Tomas Skrivan",
        "timestamp": 1744124691
    },
    {
        "content": "<p>I've added this <a href=\"https://github.com/HEPLean/PhysLean/pull/461\">PR</a> which adds the Space and Time files. We do have a Mathematics folder but this is more for stuff that really should be in Mathlib but are not yet - so I've added this to Classical Mechanics.</p>\n<p>I think it would be nice to have an extensive api around both space and time, and spacetime, to make it as easy to use as possible. I think some of <span class=\"user-mention\" data-user-id=\"346070\">@Tomas Skrivan</span> 's stuff above can be added almost as-is. </p>\n<p>(Tagging <span class=\"user-mention\" data-user-id=\"779253\">@Matteo Cipollina</span>  and <span class=\"user-mention\" data-user-id=\"890057\">@ZhiKai Pong</span>  as I think you both also have an interest in this)</p>",
        "id": 511140379,
        "sender_full_name": "Joseph Tooby-Smith",
        "timestamp": 1744196534
    },
    {
        "content": "<p>is it a good idea to try to show the Maxwell's Equations are linear? what I'm thinking is that I can try to show <code>div</code> and <code>grad</code> are <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=LinearMap#doc\">docs#LinearMap</a>, hopefully it's not too complicated (I don't know what a ring homomorphism is if that matters). Is it sufficient to just work with the <code>Space</code> definitions?</p>",
        "id": 511744151,
        "sender_full_name": "ZhiKai Pong",
        "timestamp": 1744410278
    },
    {
        "content": "<p>I would be surprised if you could show <code>div</code> and <code>grad</code> are Linear maps without some assumption on differentiability of the functions involved. But showing that they are linear with these conditions, as well as the Maxwell equations is a good idea! </p>\n<p>If you just want to use <code>Space</code> you are going to have to change Maxwell's equations and the definition of the Electric and Magnetic field to <code>Time → Space → ...</code>. This is something we want to do anyway, but adapting the <code>FieldStrength</code> code may be a bit tricky (but doable). </p>\n<p>Concerning ring homomorphisms: <code>div</code> and <code>grad</code> are definitely not ring homomorphisms, so we don't need to worry about this.</p>",
        "id": 511780395,
        "sender_full_name": "Joseph Tooby-Smith",
        "timestamp": 1744437291
    },
    {
        "content": "<p>What you want to show is that <code>fderiv 𝕜 f</code> is linear in <code>f</code>. However this is not true for arbitrary <code>f : X → Y</code> and you need to restrict only to differentiable <code>f</code>.  The idiomatic way of doing this is to parametrize <code>f</code> by some arbitrary space <code>W</code> and assume that <code>f w x</code> is linear <code>w</code> and differentiable in <code>x</code>.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Analysis</span><span class=\"bp\">.</span><span class=\"n\">Calculus</span><span class=\"bp\">.</span><span class=\"n\">FDeriv</span><span class=\"bp\">.</span><span class=\"n\">Basic</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Analysis</span><span class=\"bp\">.</span><span class=\"n\">Calculus</span><span class=\"bp\">.</span><span class=\"n\">FDeriv</span><span class=\"bp\">.</span><span class=\"n\">Add</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Analysis</span><span class=\"bp\">.</span><span class=\"n\">RCLike</span><span class=\"bp\">.</span><span class=\"n\">Basic</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">𝕜</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">RCLike</span><span class=\"w\"> </span><span class=\"n\">𝕜</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"o\">{</span><span class=\"n\">W</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">NormedAddCommGroup</span><span class=\"w\"> </span><span class=\"n\">W</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">NormedSpace</span><span class=\"w\"> </span><span class=\"n\">𝕜</span><span class=\"w\"> </span><span class=\"n\">W</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"o\">{</span><span class=\"n\">X</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">NormedAddCommGroup</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">NormedSpace</span><span class=\"w\"> </span><span class=\"n\">𝕜</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"o\">{</span><span class=\"n\">Y</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">NormedAddCommGroup</span><span class=\"w\"> </span><span class=\"n\">Y</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">NormedSpace</span><span class=\"w\"> </span><span class=\"n\">𝕜</span><span class=\"w\"> </span><span class=\"n\">Y</span><span class=\"o\">]</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">fderiv_linear_map</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">W</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Y</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">hf</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">w</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Differentiable</span><span class=\"w\"> </span><span class=\"n\">𝕜</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">w</span><span class=\"o\">))</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">hf'</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IsLinearMap</span><span class=\"w\"> </span><span class=\"n\">𝕜</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">IsLinearMap</span><span class=\"w\"> </span><span class=\"n\">𝕜</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">w</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">fderiv</span><span class=\"w\"> </span><span class=\"n\">𝕜</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">w</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">constructor</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">intros</span><span class=\"w\"> </span><span class=\"n\">w</span><span class=\"w\"> </span><span class=\"n\">w'</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">funext</span><span class=\"w\"> </span><span class=\"n\">x</span>\n<span class=\"w\">    </span><span class=\"n\">rw</span><span class=\"o\">[</span><span class=\"n\">hf'</span><span class=\"bp\">.</span><span class=\"n\">map_add</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"n\">rw</span><span class=\"o\">[</span><span class=\"n\">fderiv_add'</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hf</span><span class=\"w\"> </span><span class=\"n\">w</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hf</span><span class=\"w\"> </span><span class=\"n\">w'</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)]</span>\n<span class=\"w\">    </span><span class=\"n\">rfl</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">intros</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"n\">w</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">funext</span><span class=\"w\"> </span><span class=\"n\">x</span>\n<span class=\"w\">    </span><span class=\"n\">rw</span><span class=\"o\">[</span><span class=\"n\">hf'</span><span class=\"bp\">.</span><span class=\"n\">map_smul</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"n\">rw</span><span class=\"o\">[</span><span class=\"n\">fderiv_const_smul'</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hf</span><span class=\"w\"> </span><span class=\"n\">w</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"n\">rfl</span>\n</code></pre></div>\n<p>Generalizing this to <code>div</code> and <code>grad</code> should be trivial.</p>\n<p>Unfortunately, <code>IsLinearMap</code> is not set up with <code>fun_prop</code> otherwise using this theorem you would be able to easily prove things like this</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IsLinearMap</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">fderiv</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"bp\">•</span><span class=\"n\">x</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">fun_prop</span>\n</code></pre></div>\n<p>(here I have <a href=\"https://github.com/lecopivo/SciLean/blob/master/SciLean/Algebra/IsLinearMap.lean\">a file</a> that sets up <code>IsLinearMap</code> with <code>fun_prop</code>, however it is not in mathlib right now)</p>",
        "id": 511802421,
        "sender_full_name": "Tomas Skrivan",
        "timestamp": 1744456918
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"653351\">Joseph Tooby-Smith</span> <a href=\"#narrow/channel/479953-PhysLean/topic/Maxwell's.20Equations/near/511780395\">said</a>:</p>\n<blockquote>\n<p>Concerning ring homomorphisms: <code>div</code> and <code>grad</code> are definitely not ring homomorphisms, so we don't need to worry about this.</p>\n</blockquote>\n<p>I think <span class=\"user-mention\" data-user-id=\"890057\">@ZhiKai Pong</span> was talking about the ring homomorphism in the definition of <code>LinearMap</code> which is about expressing linear maps between two modules over different rings. However we exclusively work with vector spaces over reals so this ring homomorphism is identity, so nothing to be worried about.</p>",
        "id": 511803264,
        "sender_full_name": "Tomas Skrivan",
        "timestamp": 1744457512
    },
    {
        "content": "<p>In this <a href=\"https://github.com/HEPLean/PhysLean/pull/480\">PR</a> I've added <code>timeSlice</code>, and two semi-formal results (results currently without proofs) related to the derivatives before and after time-slicing.</p>\n<p>I think this is a precursor  to updating the definition of the Electric and Magnetic field to depend on <code>Space</code> and <code>Time</code>, due to <code>FieldStrength</code>.</p>",
        "id": 512054750,
        "sender_full_name": "Joseph Tooby-Smith",
        "timestamp": 1744630326
    },
    {
        "content": "<p>In relation to: </p>\n<ul>\n<li><a href=\"https://physlean.com/TODOList#6V2UZ\">TODO (6V2UZ): file PhysLean.Electromagnetism.MaxwellEquations</a></li>\n</ul>\n<p>Which is related to <span class=\"user-mention\" data-user-id=\"448405\">@Alex Meiburg</span> 's comment about point charges and signed measures.</p>\n<p>IMHO, I think we should have two versions of Maxwell's equations, one for functions and one for distributions, and an API connecting them. The distribution version will require us (I believe) to define derivatives of distributions on Space. </p>\n<p>If anyone wants to attempt this, this <a href=\"https://math.stackexchange.com/a/3774534\">MSE post</a> and related, might serve as some inspiration.</p>",
        "id": 512103573,
        "sender_full_name": "Joseph Tooby-Smith",
        "timestamp": 1744643062
    },
    {
        "content": "<p>In this <a href=\"https://github.com/HEPLean/PhysLean/pull/493\">PR</a> I converted Maxwell's equations to use <code>Space</code> and <code>Time</code> instead of <code>SpaceTime</code>. </p>\n<p>To do this I've commented out some code related to derivatives of the field strength, which needs the following TODO items to be done before it can be reinstated: </p>\n<ul>\n<li><a href=\"https://physlean.com/TODOList#7Z2GA\">semiformal_result (7Z2GA): timeSlice_spatial_deriv</a> </li>\n<li><a href=\"https://physlean.com/TODOList#7Z2LF\">semiformal_result (7Z2LF): timeSlice_time_deriv</a></li>\n</ul>\n<p>This is related to <a class=\"stream-topic\" data-stream-id=\"217875\" href=\"/#narrow/channel/217875-Is-there-code-for-X.3F/topic/fderiv.20and.20curry/with/512823213\">#Is there code for X? &gt; fderiv and curry</a></p>",
        "id": 512846168,
        "sender_full_name": "Joseph Tooby-Smith",
        "timestamp": 1744901480
    },
    {
        "content": "<p>I want to try to look at how to setup actually using Maxwell's equation for some derivation. Does something like this look reasonable?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">PhysLean</span><span class=\"bp\">.</span><span class=\"n\">ClassicalMechanics</span><span class=\"bp\">.</span><span class=\"n\">VectorFields</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">PhysLean</span><span class=\"bp\">.</span><span class=\"n\">Electromagnetism</span><span class=\"bp\">.</span><span class=\"n\">MaxwellEquations</span>\n\n<span class=\"kn\">namespace</span><span class=\"w\"> </span><span class=\"n\">Electromagnetism</span>\n\n<span class=\"kn\">structure</span><span class=\"w\"> </span><span class=\"n\">FreeSpace</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">𝓔</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">EMSystem</span>\n<span class=\"w\">  </span><span class=\"n\">ρ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ChargeDensity</span>\n<span class=\"w\">  </span><span class=\"n\">J</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">CurrentDensity</span>\n<span class=\"w\">  </span><span class=\"n\">ChargeFree</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ρ</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span>\n<span class=\"w\">  </span><span class=\"n\">CurrentFree</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">J</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">FreeSpace</span><span class=\"o\">)</span>\n\n<span class=\"kn\">local</span><span class=\"w\"> </span><span class=\"kn\">notation</span><span class=\"w\"> </span><span class=\"s2\">\"ε₀\"</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"bp\">.</span><span class=\"n\">𝓔</span><span class=\"bp\">.</span><span class=\"n\">ε₀</span>\n<span class=\"kn\">local</span><span class=\"w\"> </span><span class=\"kn\">notation</span><span class=\"w\"> </span><span class=\"s2\">\"μ₀\"</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"bp\">.</span><span class=\"n\">𝓔</span><span class=\"bp\">.</span><span class=\"n\">μ₀</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">GaussLawElectricFreeSpace</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">E</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ElectricField</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">GaussLawElectric</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"bp\">.</span><span class=\"n\">𝓔</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"bp\">.</span><span class=\"n\">ρ</span><span class=\"w\"> </span><span class=\"n\">E</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">ε₀</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">∇</span><span class=\"w\"> </span><span class=\"bp\">⬝</span><span class=\"w\"> </span><span class=\"n\">E</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">unfold</span><span class=\"w\"> </span><span class=\"n\">GaussLawElectric</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">h</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">h</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">M</span><span class=\"bp\">.</span><span class=\"n\">ChargeFree</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">rfl</span>\n</code></pre></div>",
        "id": 514842683,
        "sender_full_name": "ZhiKai Pong",
        "timestamp": 1745853869
    },
    {
        "content": "<p>Currently <code>variable (𝓔 : EMSystem) (ρ : ChargeDensity) (J : CurrentDensity)</code> are just free variables sitting in <code>Electromagnetism.MaxwellEquations</code>, and I'm thinking of is there a better way to group them together like what's shown here.</p>",
        "id": 514843482,
        "sender_full_name": "ZhiKai Pong",
        "timestamp": 1745854060
    },
    {
        "content": "<p>Thinking ahead, I'm concerned about if I have two medium with different <code>𝓔 ρ J</code> how would I go about specifying that. Maybe <code>FreeSpace</code> here should just be <code>Medium</code> and the entire physical setup will be specified within it?</p>",
        "id": 514843762,
        "sender_full_name": "ZhiKai Pong",
        "timestamp": 1745854117
    },
    {
        "content": "<p>At one point I had <code>ChargeDensity</code> and <code>CurrentDensity</code> within <code>EMSystem</code> but then I think it was decided (above maybe?) that they should be removed.</p>\n<p>We could rename  <code>EMSystem</code> as <code>OpticalMedium</code>, and then extend it <br>\nto <code>ChargedMedium</code> with the inclusion of  <code>ChargeDensity</code> and <code>CurrentDensity</code>. Every <code>OpticalMedium</code> then defines a <code>ChargedMedium</code>  with zero charge and current. We could call this the <code>free</code>, <code>ChargedMedium</code>.  Or something like this?</p>",
        "id": 514844839,
        "sender_full_name": "Joseph Tooby-Smith",
        "timestamp": 1745854385
    },
    {
        "content": "<p>Currently you have <code>FreeSpace</code> as a type, whilst really I think it should be the term of a type.</p>\n<p>(My names above are random suggestions - there may be better terminology :))</p>",
        "id": 514845142,
        "sender_full_name": "Joseph Tooby-Smith",
        "timestamp": 1745854458
    },
    {
        "content": "<p>Something like</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"sd\">/-- An electromagnetic system consists of charge density, a current density,</span>\n<span class=\"sd\">  the speed of light and the electric permittivity. -/</span>\n<span class=\"kn\">structure</span><span class=\"w\"> </span><span class=\"n\">OpticalMedium</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"sd\">/-- The speed of light. -/</span>\n<span class=\"w\">  </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span>\n<span class=\"w\">  </span><span class=\"sd\">/-- The permittivity. -/</span>\n<span class=\"w\">  </span><span class=\"n\">ε₀</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span>\n\n<span class=\"sd\">/-- The charge density. -/</span>\n<span class=\"kn\">abbrev</span><span class=\"w\"> </span><span class=\"n\">ChargeDensity</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Time</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Space</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℝ</span>\n\n<span class=\"sd\">/-- Current density. -/</span>\n<span class=\"kn\">abbrev</span><span class=\"w\"> </span><span class=\"n\">CurrentDensity</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Time</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Space</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">EuclideanSpace</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">)</span>\n\n<span class=\"kn\">structure</span><span class=\"w\"> </span><span class=\"n\">ChargedMedium</span><span class=\"w\"> </span><span class=\"kn\">extends</span><span class=\"w\"> </span><span class=\"n\">OpticalMedium</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"sd\">/-- The charge density. -/</span>\n<span class=\"w\">  </span><span class=\"n\">ρ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ChargeDensity</span>\n<span class=\"w\">  </span><span class=\"sd\">/-- The current density. -/</span>\n<span class=\"w\">  </span><span class=\"n\">J</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">CurrentDensity</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">ChargedMedium</span><span class=\"bp\">.</span><span class=\"n\">free</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">O</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">OpticalMedium</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ChargedMedium</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">O</span><span class=\"bp\">.</span><span class=\"n\">c</span>\n<span class=\"w\">  </span><span class=\"n\">ε₀</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">O</span><span class=\"bp\">.</span><span class=\"n\">ε₀</span>\n<span class=\"w\">  </span><span class=\"n\">ρ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"mi\">0</span>\n<span class=\"w\">  </span><span class=\"n\">J</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"mi\">0</span>\n</code></pre></div>",
        "id": 514845500,
        "sender_full_name": "Joseph Tooby-Smith",
        "timestamp": 1745854554
    },
    {
        "content": "<p>(This would involve writing the Maxwell's equations to take <code>ChargedMedium</code> as an input.)</p>",
        "id": 514846118,
        "sender_full_name": "Joseph Tooby-Smith",
        "timestamp": 1745854711
    },
    {
        "content": "<p>In my opinion, I would avoid bundling things into a structure. Unless you have a clear hierarchy of structures or a couple of different applications of such structure in mind I would avoid introducing it. Every time you introduce a structure you will be forced to provide an API similar to <code>Prod</code> which is lots of work. Ideally this would be automated, some version of <code>deriving</code> on steroids, but this does not exist.</p>\n<p>In a way I agree, that bundling constants into a structure like <code>OpticalMedium</code> is desirable but I think that bundling fields into a structure like <code>ChargedMedium</code> will likely result in a refactor later on. There will be cases where the density or currents is <em>the</em> unknown you want to solve for. In such a scenario <code>ChargedMedium</code> will be in the way. We discussed this somewhere before.</p>\n<p>But hey, the options are:</p>\n<ul>\n<li>bundle things into structure -&gt; inflexible/lots of missing API for such structures</li>\n<li>keep it unbundled -&gt; now you have to deal with functions with ten or more arguments</li>\n</ul>\n<p>Neither is ideal and will lead to problems. Potential solutions I see:</p>\n<ul>\n<li>some metaprogramming/<code>deriving</code> that automatically generates all the API for a new structure. I think lots of leg work could be done through <code>proxy_equiv%</code> + some meta tools capable of pulling structures through equivalences</li>\n<li>having <code>autoParam</code> for implicit arguments and write a specialized tactic that fills in arguments from the local context. This way all the physical constants could passed as an implicit argument.</li>\n</ul>",
        "id": 514851504,
        "sender_full_name": "Tomas Skrivan",
        "timestamp": 1745856136
    },
    {
        "content": "<p>Just testing the idea of keeping things unbundled:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">PhysLean</span><span class=\"bp\">.</span><span class=\"n\">ClassicalMechanics</span><span class=\"bp\">.</span><span class=\"n\">VectorFields</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">PhysLean</span><span class=\"bp\">.</span><span class=\"n\">Electromagnetism</span><span class=\"bp\">.</span><span class=\"n\">MaxwellEquations</span>\n\n<span class=\"kn\">namespace</span><span class=\"w\"> </span><span class=\"n\">Electromagnetism</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">ChargeFree</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ρ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ChargeDensity</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">ρ</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">CurrentFree</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">J</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">CurrentDensity</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">J</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">𝓔</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">EMSystem</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ρ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ChargeDensity</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">J</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">CurrentDensity</span><span class=\"o\">)</span>\n\n<span class=\"kn\">local</span><span class=\"w\"> </span><span class=\"kn\">notation</span><span class=\"w\"> </span><span class=\"s2\">\"ε₀\"</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">𝓔</span><span class=\"bp\">.</span><span class=\"n\">ε₀</span>\n<span class=\"kn\">local</span><span class=\"w\"> </span><span class=\"kn\">notation</span><span class=\"w\"> </span><span class=\"s2\">\"μ₀\"</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">𝓔</span><span class=\"bp\">.</span><span class=\"n\">μ₀</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">GaussLawElectricFreeSpace</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">E</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ElectricField</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">GaussLawElectric</span><span class=\"w\"> </span><span class=\"n\">𝓔</span><span class=\"w\"> </span><span class=\"n\">ρ</span><span class=\"w\"> </span><span class=\"n\">E</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ChargeFree</span><span class=\"w\"> </span><span class=\"n\">ρ</span><span class=\"o\">):</span>\n<span class=\"w\">    </span><span class=\"n\">ε₀</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">∇</span><span class=\"w\"> </span><span class=\"bp\">⬝</span><span class=\"w\"> </span><span class=\"n\">E</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">unfold</span><span class=\"w\"> </span><span class=\"n\">GaussLawElectric</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">h</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">h</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">h2</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">rfl</span>\n</code></pre></div>\n<p>Is there a better way to declare and use the <code>def</code>? any non-trivial problems in physics probably has tens of constraints in addition to tens of variables,  and I don't think having like ten or twenty hypothesis each specifying one constraint is a good idea...</p>",
        "id": 514855152,
        "sender_full_name": "ZhiKai Pong",
        "timestamp": 1745857182
    },
    {
        "content": "<p>especially in dealing with specific physical systems that requires those constraints to be used over and over again.</p>",
        "id": 514855367,
        "sender_full_name": "ZhiKai Pong",
        "timestamp": 1745857241
    },
    {
        "content": "<p>Acutally @ZhiKai Pong's example illustrates why I think bundling in this case is physically valid (I understand why <code>computationally</code> it is not desirable). </p>\n<p>Most problems in EM are based on specifying both the charge density and the current density (or in special relativity - the 4-current). If you don't bundle for each of these problems you have to define  both a charge and a current density with two separate definitions, and keep track of all of these. </p>\n<p>I'm open to either solution here. Bundling to me just seems a bit cleaner in this case. If someone can come up with a nice way of doing things without bundling I'd be open to that.</p>",
        "id": 514856433,
        "sender_full_name": "Joseph Tooby-Smith",
        "timestamp": 1745857593
    },
    {
        "content": "<p>For the problem of finding the current and charge density given the electric and magnetic field, I think this can be  adquitleqy defined constraining the projection of <code>ChargedMaterial</code> back to <code>OpticalMaterial</code> etc. </p>\n<p>There may be examples where you are given a current density and not the charge density (say).... those would lead us to problems. But I'm not sure if such examples actually exist.</p>",
        "id": 514856870,
        "sender_full_name": "Joseph Tooby-Smith",
        "timestamp": 1745857744
    },
    {
        "content": "<p>One option for unbundled would be to define e.g. </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">IsFree</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ρ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ChargeDensity</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">J</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">CurrentDensity</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">...</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">IsPointParticleAt</span><span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">ρ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ChargeDensity</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">J</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">CurrentDensity</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Space</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"bp\">...</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">IsHalfPlane</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ρ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ChargeDensity</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">J</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">CurrentDensity</span><span class=\"o\">)</span><span class=\"w\">  </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"bp\">...</span>\n</code></pre></div>\n<p>etc. This is similar to <span class=\"user-mention\" data-user-id=\"890057\">@ZhiKai Pong</span> 's solution. </p>\n<p>(sorry for the multiple messages, I'm thinking aloud - which is probably not the best idea).</p>",
        "id": 514857837,
        "sender_full_name": "Joseph Tooby-Smith",
        "timestamp": 1745858039
    },
    {
        "content": "<p>As an aside: For optics, should  <code>ε₀</code> and <code>c</code> also be made functions of Space? E.g. for boundaries between two materials?</p>",
        "id": 514858836,
        "sender_full_name": "Joseph Tooby-Smith",
        "timestamp": 1745858388
    },
    {
        "content": "<p>My personal feeling is that \"specifying both the charge density and the current density and find solutions to E and B\" is a large enough class of problem, and it is worth bundling variables and constraints to deal with it. If another class of problems require us to view the problem from a different perspective, we probably have to reorganize the variables and constraints in a different way anyway regardless of whether they're bundled or not, and this reorganization to me doesn't sound easier than writing API between different structures.</p>\n<p>I might be complete wrong here but I think I'll give the bundling approach a try since I think it makes more sense to me conceptually to view any problem as a system with given set of initial conditions. Maybe some level of compromise can be made here: Maxwell's equations are fundamental enough to keep things unbundled, and then when I start dealing with homogeneous media I start bundling things together.</p>",
        "id": 514862080,
        "sender_full_name": "ZhiKai Pong",
        "timestamp": 1745859398
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"890057\">ZhiKai Pong</span> <a href=\"#narrow/channel/479953-PhysLean/topic/Maxwell's.20Equations/near/514842683\">said</a>:</p>\n<blockquote>\n<p>I want to try to look at how to setup actually using Maxwell's equation for some derivation. Does something like this look reasonable?</p>\n<p><div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">PhysLean</span><span class=\"bp\">.</span><span class=\"n\">ClassicalMechanics</span><span class=\"bp\">.</span><span class=\"n\">VectorFields</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">PhysLean</span><span class=\"bp\">.</span><span class=\"n\">Electromagnetism</span><span class=\"bp\">.</span><span class=\"n\">MaxwellEquations</span>\n\n<span class=\"kn\">namespace</span><span class=\"w\"> </span><span class=\"n\">Electromagnetism</span>\n\n<span class=\"kn\">structure</span><span class=\"w\"> </span><span class=\"n\">FreeSpace</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">𝓔</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">EMSystem</span>\n<span class=\"w\">  </span><span class=\"n\">ρ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ChargeDensity</span>\n<span class=\"w\">  </span><span class=\"n\">J</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">CurrentDensity</span>\n<span class=\"w\">  </span><span class=\"n\">ChargeFree</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ρ</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span>\n<span class=\"w\">  </span><span class=\"n\">CurrentFree</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">J</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">FreeSpace</span><span class=\"o\">)</span>\n\n<span class=\"kn\">local</span><span class=\"w\"> </span><span class=\"kn\">notation</span><span class=\"w\"> </span><span class=\"s2\">\"ε₀\"</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"bp\">.</span><span class=\"n\">𝓔</span><span class=\"bp\">.</span><span class=\"n\">ε₀</span>\n<span class=\"kn\">local</span><span class=\"w\"> </span><span class=\"kn\">notation</span><span class=\"w\"> </span><span class=\"s2\">\"μ₀\"</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"bp\">.</span><span class=\"n\">𝓔</span><span class=\"bp\">.</span><span class=\"n\">μ₀</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">GaussLawElectricFreeSpace</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">E</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ElectricField</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">GaussLawElectric</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"bp\">.</span><span class=\"n\">𝓔</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"bp\">.</span><span class=\"n\">ρ</span><span class=\"w\"> </span><span class=\"n\">E</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">ε₀</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">∇</span><span class=\"w\"> </span><span class=\"bp\">⬝</span><span class=\"w\"> </span><span class=\"n\">E</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">unfold</span><span class=\"w\"> </span><span class=\"n\">GaussLawElectric</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">h</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">h</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">M</span><span class=\"bp\">.</span><span class=\"n\">ChargeFree</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">rfl</span>\n</code></pre></div><br>\n</p>\n</blockquote>\n<p>So something closer to my original idea here, but perhaps only in a separate file that all the freespace stuff follows rather than at the Maxwell Equations level.</p>",
        "id": 514862563,
        "sender_full_name": "ZhiKai Pong",
        "timestamp": 1745859542
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"653351\">Joseph Tooby-Smith</span> <a href=\"#narrow/channel/479953-PhysLean/topic/Maxwell's.20Equations/near/514858836\">said</a>:</p>\n<blockquote>\n<p>As an aside: For optics, should  <code>ε₀</code> and <code>c</code> also be made functions of Space? E.g. for boundaries between two materials?</p>\n</blockquote>\n<p>This is actually an interesting question which I had thought about, I hope other optics people can correct me if I'm wrong, but the way I actually think about the speed of light is not as a function directly of space but as a function of <code>ε</code>, in the sense that  it is much more common to specify the refractive index first, and then the speed of light arises from solving the wave equation. I think this relates to the discussion above, as I believe there isn't one single foundation for solving all problems and the \"bundling\" of constraints is an indication of the approach to solve the problem.</p>",
        "id": 514863498,
        "sender_full_name": "ZhiKai Pong",
        "timestamp": 1745859801
    },
    {
        "content": "<p>ok maybe this is actually more of  a philosophical thing, to me the statement \"speed of light is constant\" is actually a result of \"<code>ε₀</code> and <code>μ₀</code> are constant and <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>c</mi><mo>=</mo><mfrac><mn>1</mn><msqrt><mrow><msub><mi>μ</mi><mn>0</mn></msub><msub><mi>ε</mi><mn>0</mn></msub></mrow></msqrt></mfrac></mrow><annotation encoding=\"application/x-tex\">c  = \\frac{1}{\\sqrt{μ₀ε₀}}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">c</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.422em;vertical-align:-0.5769em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8451em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord sqrt mtight\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7087em;\"><span class=\"svg-align\" style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord mtight\" style=\"padding-left:0.833em;\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">μ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3173em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">0</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">ε</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3173em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">0</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-2.6687em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"hide-tail mtight\" style=\"min-width:0.853em;height:1.08em;\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"400em\" height=\"1.08em\" viewBox=\"0 0 400000 1080\" preserveAspectRatio=\"xMinYMin slice\"><path d=\"M95,702\nc-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14\nc0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54\nc44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10\ns173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429\nc69,-144,104.5,-217.7,106.5,-221\nl0 -0\nc5.3,-9.3,12,-14,20,-14\nH400000v40H845.2724\ns-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7\nc-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z\nM834 80h400000v40h-400000z\"/></svg></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3313em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.5769em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span>\" which probably sounds ridiculous from a physics standpoint and I should probably define this the other way round <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span></p>",
        "id": 514864910,
        "sender_full_name": "ZhiKai Pong",
        "timestamp": 1745860215
    },
    {
        "content": "<p>I mean, why should eps0 be a scalar? Birefringence (where it's a tensor) and diffraction (where it's a function of frequency) are both quite important too!</p>",
        "id": 514865003,
        "sender_full_name": "Alex Meiburg",
        "timestamp": 1745860258
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"890057\">ZhiKai Pong</span> <a href=\"#narrow/channel/479953-PhysLean/topic/Maxwell's.20Equations/near/514862080\">said</a>:</p>\n<blockquote>\n<p>My personal feeling is that \"specifying both the charge density and the current density and find solutions to E and B\" is a large enough class of problem, and it is worth bundling variables and constraints to deal with it. If another class of problems require us to view the problem from a different perspective, we probably have to reorganize the variables and constraints in a different way anyway regardless of whether they're bundled or not, and this reorganization to me doesn't sound easier than writing API between different structures.</p>\n<p>I might be complete wrong here but I think I'll give the bundling approach a try since I think it makes more sense to me conceptually to view any problem as a system with given set of initial conditions. Maybe some level of compromise can be made here: Maxwell's equations are fundamental enough to keep things unbundled, and then when I start dealing with homogeneous media I start bundling things together.</p>\n</blockquote>\n<p>This sounds like a valid plan to me. I would suggest something along these lines <a class=\"message-link\" href=\"/#narrow/channel/479953-PhysLean/topic/Maxwell.27s.20Equations/near/514845500\">#PhysLean &gt; Maxwell's Equations @ 💬</a>  (click for direct link) first - but this is only a suggestion.</p>",
        "id": 514865342,
        "sender_full_name": "Joseph Tooby-Smith",
        "timestamp": 1745860368
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"890057\">ZhiKai Pong</span> <a href=\"#narrow/channel/479953-PhysLean/topic/Maxwell's.20Equations/near/514864910\">said</a>:</p>\n<blockquote>\n<p>ok maybe this is actually more of  a philosophical thing, to me the statement \"speed of light is constant\" is actually a result of \"<code>ε₀</code> and <code>μ₀</code> are constant and <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>c</mi><mo>=</mo><mfrac><mn>1</mn><msqrt><mrow><msub><mi>μ</mi><mn>0</mn></msub><msub><mi>ε</mi><mn>0</mn></msub></mrow></msqrt></mfrac></mrow><annotation encoding=\"application/x-tex\">c  = \\frac{1}{\\sqrt{μ₀ε₀}}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">c</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.422em;vertical-align:-0.5769em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8451em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord sqrt mtight\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7087em;\"><span class=\"svg-align\" style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord mtight\" style=\"padding-left:0.833em;\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">μ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3173em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">0</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">ε</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3173em;\"><span style=\"top:-2.357em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">0</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-2.6687em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"hide-tail mtight\" style=\"min-width:0.853em;height:1.08em;\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"400em\" height=\"1.08em\" viewBox=\"0 0 400000 1080\" preserveAspectRatio=\"xMinYMin slice\"><path d=\"M95,702\nc-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14\nc0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54\nc44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10\ns173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429\nc69,-144,104.5,-217.7,106.5,-221\nl0 -0\nc5.3,-9.3,12,-14,20,-14\nH400000v40H845.2724\ns-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7\nc-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z\nM834 80h400000v40h-400000z\"/></svg></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3313em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.5769em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span>\" which probably sounds ridiculous from a physics standpoint and I should probably define this the other way round <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span></p>\n</blockquote>\n<p>I agree - especially when one is not working in free-space. Maybe we should redefine <code>EMSystem</code> to be in terms of <code>ε₀</code> and <code>μ₀</code>.</p>",
        "id": 514865493,
        "sender_full_name": "Joseph Tooby-Smith",
        "timestamp": 1745860416
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"448405\">Alex Meiburg</span> <a href=\"#narrow/channel/479953-PhysLean/topic/Maxwell's.20Equations/near/514865003\">said</a>:</p>\n<blockquote>\n<p>I mean, why should eps0 be a scalar? Birefringence (where it's a tensor) and diffraction (where it's a function of frequency) are both quite important too!</p>\n</blockquote>\n<p>I don't have experience working with type coercion, but my hope is that it is possible to redefine eps in terms of those later and then have the relevant API such that in homogeneous media and for monochromatic light everything derived will be left untouched.</p>",
        "id": 514866273,
        "sender_full_name": "ZhiKai Pong",
        "timestamp": 1745860647
    },
    {
        "content": "<p>Maybe we can include a TODO item regarding this. But I agree that this should not hinder progress in the case of a homogeneous medium and monochromatic light etc. IMO having something is better than nothing, and we can refactor appropriately later.</p>",
        "id": 514867062,
        "sender_full_name": "Joseph Tooby-Smith",
        "timestamp": 1745860902
    },
    {
        "content": "<p>I gave it some thought and maybe it is the best to keep both the bundled and unbundled versions (having definitions for both) and just show they are equivalent, this way we have the flexibility of using the unbundled version when we have to and ease of handling variables with the bundled version. I think this setup also allows us to change upstream definitions without affecting downstream ones too much, and we only have to confirm the equivalences still hold. I made a <a href=\"https://github.com/HEPLean/PhysLean/pull/520\">PR</a> please see if this makes sense.</p>",
        "id": 514903661,
        "sender_full_name": "ZhiKai Pong",
        "timestamp": 1745874259
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"448405\">Alex Meiburg</span> <a href=\"#narrow/channel/479953-PhysLean/topic/Maxwell's.20Equations/near/514865003\">said</a>:</p>\n<blockquote>\n<p>I mean, why should eps0 be a scalar? Birefringence (where it's a tensor) and diffraction (where it's a function of frequency) are both quite important too!</p>\n</blockquote>\n<p>I realize my intended message might not have gotten across - I was trying to make the point that there are almost always more ways to make things more general, piece by piece, and worrying about e.g. making them functions of Space is just one of many. And so I was trying to say that I think we <em>shouldn't</em> worry about it. :)</p>",
        "id": 514939703,
        "sender_full_name": "Alex Meiburg",
        "timestamp": 1745894251
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"890057\">ZhiKai Pong</span> <a href=\"#narrow/channel/479953-PhysLean/topic/Maxwell's.20Equations/near/514903661\">said</a>:</p>\n<blockquote>\n<p>I gave it some thought and maybe it is the best to keep both the bundled and unbundled versions (having definitions for both) and just show they are equivalent, this way we have the flexibility of using the unbundled version when we have to and ease of handling variables with the bundled version. I think this setup also allows us to change upstream definitions without affecting downstream ones too much, and we only have to confirm the equivalences still hold. I made a <a href=\"https://github.com/HEPLean/PhysLean/pull/520\">PR</a> please see if this makes sense.</p>\n</blockquote>\n<p>Thanks for making the PR - I've put some comments there :).</p>",
        "id": 514961122,
        "sender_full_name": "Joseph Tooby-Smith",
        "timestamp": 1745904595
    }
]