[
    {
        "content": "<p>I'm working on <a href=\"https://github.com/leanprover/std4/pull/400\">std4#400</a>, which add some lemmas about bitvectors, and I'm wondering where to put them.<br>\nI've previously been told that simple <code>rfl</code>-proven lemmas should just go in the <code>Basic</code> file, but I wonder where the line is for when a separate <code>Lemmas</code> file is warranted.</p>\n<p>For context, these are the lemmas in question:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">theorem</span> <span class=\"n\">getLsb_eq_getLsbD</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"o\">:</span> <span class=\"n\">BitVec</span> <span class=\"n\">w</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">i</span> <span class=\"o\">:</span> <span class=\"n\">Fin</span> <span class=\"n\">w</span><span class=\"o\">)</span> <span class=\"o\">:</span>\n    <span class=\"n\">x.getLsb</span> <span class=\"n\">i</span> <span class=\"bp\">=</span> <span class=\"n\">x.getLsbD</span> <span class=\"n\">i.val</span> <span class=\"o\">:=</span>\n  <span class=\"n\">rfl</span>\n\n<span class=\"kd\">theorem</span> <span class=\"n\">getLsbD_eq_getLsb</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"o\">:</span> <span class=\"n\">BitVec</span> <span class=\"n\">w</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">i</span> <span class=\"o\">:</span> <span class=\"n\">Nat</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">h</span> <span class=\"o\">:</span> <span class=\"n\">i</span> <span class=\"bp\">&lt;</span> <span class=\"n\">w</span><span class=\"o\">)</span> <span class=\"o\">:</span>\n    <span class=\"n\">x.getLsbD</span> <span class=\"n\">i</span> <span class=\"bp\">=</span> <span class=\"n\">x.getLsb</span> <span class=\"o\">⟨</span><span class=\"n\">i</span><span class=\"o\">,</span> <span class=\"n\">h</span><span class=\"o\">⟩</span> <span class=\"o\">:=</span>\n  <span class=\"n\">rfl</span>\n\n<span class=\"kd\">theorem</span> <span class=\"n\">getMsb_eq_getMsbD</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"o\">:</span> <span class=\"n\">BitVec</span> <span class=\"n\">w</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">i</span> <span class=\"o\">:</span> <span class=\"n\">Fin</span> <span class=\"n\">w</span><span class=\"o\">)</span> <span class=\"o\">:</span>\n    <span class=\"n\">x.getMsb</span> <span class=\"n\">i</span> <span class=\"bp\">=</span> <span class=\"n\">x.getMsbD</span> <span class=\"n\">i.val</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span>\n  <span class=\"n\">simp</span> <span class=\"n\">only</span> <span class=\"o\">[</span><span class=\"n\">getMsb</span><span class=\"o\">,</span> <span class=\"n\">Fin.rev</span><span class=\"o\">,</span> <span class=\"n\">getLsb_eq_getLsbD</span><span class=\"o\">,</span> <span class=\"n\">getMsbD</span><span class=\"o\">,</span> <span class=\"n\">i.2</span><span class=\"o\">,</span> <span class=\"n\">decide_True</span><span class=\"o\">,</span> <span class=\"n\">Bool.true_and</span><span class=\"o\">]</span>\n  <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"n\">Nat.add_comm</span><span class=\"o\">,</span> <span class=\"n\">Nat.sub_add_eq</span><span class=\"o\">]</span>\n\n<span class=\"kd\">theorem</span> <span class=\"n\">getMsbD_eq_getMsb</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"o\">:</span> <span class=\"n\">BitVec</span> <span class=\"n\">w</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">i</span> <span class=\"o\">:</span> <span class=\"n\">Nat</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">h</span> <span class=\"o\">:</span> <span class=\"n\">i</span> <span class=\"bp\">&lt;</span> <span class=\"n\">w</span><span class=\"o\">)</span> <span class=\"o\">:</span>\n    <span class=\"n\">x.getMsbD</span> <span class=\"n\">i</span> <span class=\"bp\">=</span> <span class=\"n\">x.getMsb</span> <span class=\"o\">⟨</span><span class=\"n\">i</span><span class=\"o\">,</span> <span class=\"n\">h</span><span class=\"o\">⟩</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span>\n  <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"n\">getMsb_eq_getMsbD</span><span class=\"o\">]</span>\n</code></pre></div>",
        "id": 404435765,
        "sender_full_name": "Alex Keizer",
        "timestamp": 1701098875
    },
    {
        "content": "<p>For location, I'd match array and put these in a standard lemma file.</p>",
        "id": 404469451,
        "sender_full_name": "Joe Hendrix",
        "timestamp": 1701110297
    }
]