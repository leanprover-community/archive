[
    {
        "content": "<p>The title is not exact but needed something so can be changed if needed.</p>\n<p>The goal of this is to share some LLM prompts with others to help them move along in the class. These are not meant to help students solve the problems, etc. but to help keep pace with the class when they get stuck or to possibly gain some insights of using Lean from reading the prompts and replies.</p>\n<p>If the instructor Tyler Josephson asks for this topic to be removed that is OK, no need to explain.</p>\n<p>This is not meant for just me so feel free to chime in, enhance and repost, share examples, etc.</p>",
        "id": 451016271,
        "sender_full_name": "Eric Taucher",
        "timestamp": 1720799716
    },
    {
        "content": "<p><strong>Prompt</strong> (<a href=\"https://claude.ai/\">Claude</a>)</p>\n<p>Given the following word problem, create the Lean 4 prover code as a student exercise to be solved using single chain of expressions. </p>\n<ul>\n<li>Use Lean <code>example</code> instead of <code>theorem</code> or <code>lemma</code>.</li>\n<li>Include variable after keyword <code>example</code> in a format like <code>example { x y : R}</code>. </li>\n<li>Use hypothesis in a format like  <code>(h1 : 10 = (a - b) )</code>.</li>\n<li>Put example and hypothesizes on separate lines.</li>\n<li>Use Lean <code>sorry</code> instead of providing solution.</li>\n<li>Use words for variable name with underscores.</li>\n<li>Convert each statement to one hypothesis if possible.</li>\n</ul>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"w\"> </span><span class=\"n\">word</span><span class=\"w\"> </span><span class=\"n\">problem</span>\n<span class=\"c1\">-- A plane flies 450 miles with the wind in 3 hours</span>\n<span class=\"c1\">-- Flying back against the wind, the plane takes 5 hours to make the trip</span>\n<span class=\"c1\">-- Prove that the plane's speed in still air would be 120 miles/hour</span>\n</code></pre></div>\n<p><strong>Reply</strong></p>\n<p>Here's the Lean 4 prover code set up as a student exercise based on the given word problem:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"w\"> </span><span class=\"n\">plane_speed</span><span class=\"w\"> </span><span class=\"n\">wind_speed</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">}</span>\n<span class=\"o\">(</span><span class=\"n\">h1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">450</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">plane_speed</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">wind_speed</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">h2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">450</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">plane_speed</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">wind_speed</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"o\">)</span>\n<span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">plane_speed</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">120</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>Would you like me to explain or break down the code?</p>",
        "id": 451016719,
        "sender_full_name": "Eric Taucher",
        "timestamp": 1720799878
    },
    {
        "content": "<p>Ask it how to prove it :-) The spacing is poor but I guess we can forgive that. The pro solution to how to prove it is</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"w\"> </span><span class=\"n\">plane_speed</span><span class=\"w\"> </span><span class=\"n\">wind_speed</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">}</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">h1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">450</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">plane_speed</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">wind_speed</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">h2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">450</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">plane_speed</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">wind_speed</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">plane_speed</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">120</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">polyrith</span>\n</code></pre></div>",
        "id": 451021352,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1720801076
    },
    {
        "content": "<p>Great idea! Neat to see this thread. You're asking a question about \"autoformalization\", one task of which is \"how to ask AI to translate natural language proofs into formal proofs,\" specifically, in your case \"how to translate an informal theorem statement into a formal one?\"</p>\n<p>A different task is \"how to get an AI to autocomplete a proof.\" </p>\n<p>You'll probably find the Zulip channel <a href=\"#narrow/stream/219941-Machine-Learning-for-Theorem-Proving\">https://leanprover.zulipchat.com/#narrow/stream/219941-Machine-Learning-for-Theorem-Proving</a> to be interesting</p>",
        "id": 451022113,
        "sender_full_name": "Tyler Josephson ⚛️",
        "timestamp": 1720801221
    },
    {
        "content": "<p>If it can come up with the most efficient tactic -- I'll buy it ;-) <span class=\"user-mention\" data-user-id=\"110038\">@Kevin Buzzard</span>  thanks for <code>polyrith</code> another one to add to my list...</p>",
        "id": 451022279,
        "sender_full_name": "Simon Beaumont",
        "timestamp": 1720801256
    },
    {
        "content": "<p>Warning: <code>polyrith</code> only works if you're connected to the internet ;-) (so I can't use it on the London underground)</p>",
        "id": 451023365,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1720801539
    },
    {
        "content": "<p>Related to your prompt above - be careful about leaking aspects of the solution into the prompt. To me, it's not surprising that it types the speeds as \\R and formats the hypotheses in that way, since you include those in the prompt. It's often interesting to see what style choices it makes on its own. </p>\n<p>Or - if including `example { x y : Nat}' in the prompt, does it figure out that maybe \\R would be a better choice for these properties?</p>",
        "id": 451023443,
        "sender_full_name": "Tyler Josephson ⚛️",
        "timestamp": 1720801558
    },
    {
        "content": "<p>Another use for LLMs is to understand words, phrases, etc. </p>\n<p><span class=\"user-mention silent\" data-user-id=\"424214\">Tyler Josephson ⚛️</span> <a href=\"#narrow/stream/445230-Lean-for-Scientists-and-Engineers-2024/topic/Using.20LLMs.20to.20assist.20when.20needed/near/451022113\">said</a>:</p>\n<blockquote>\n<p>\"autoformalization\"</p>\n</blockquote>\n<p><strong>Prompt</strong> (<a href=\"https://claude.ai/\">Claude</a>)</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">Explain</span><span class=\"w\"> </span><span class=\"ss\">`autoformalization</span><span class=\"bp\">`</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">context</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">proof</span><span class=\"w\"> </span><span class=\"n\">assistant</span><span class=\"bp\">.</span>\n</code></pre></div>\n<p><strong>Reply</strong></p>\n<p>Autoformalization in the context of proof assistants refers to the process of automatically converting informal mathematical statements or proofs into formal, machine-checkable representations that can be verified by a proof assistant.</p>\n<p>Proof assistants are software tools that help mathematicians and computer scientists develop and verify formal proofs of mathematical theorems. They typically use a specific formal language to express mathematical concepts, definitions, and proofs. However, writing mathematics directly in these formal languages can be time-consuming and requires specialized knowledge.</p>\n<p>Autoformalization aims to bridge the gap between the way mathematicians typically write proofs (in natural language with some mathematical notation) and the formal representations required by proof assistants. The key aspects of autoformalization include:</p>\n<ol>\n<li>\n<p>Natural language processing: Analyzing and interpreting informal mathematical text written in natural language.</p>\n</li>\n<li>\n<p>Symbol recognition: Identifying and interpreting mathematical symbols and notation.</p>\n</li>\n<li>\n<p>Semantic parsing: Understanding the logical structure and meaning of mathematical statements.</p>\n</li>\n<li>\n<p>Formal language generation: Translating the interpreted content into the formal language used by the proof assistant.</p>\n</li>\n<li>\n<p>Proof structure conversion: Transforming the logical flow of an informal proof into a sequence of formal proof steps.</p>\n</li>\n</ol>\n<p>The benefits of autoformalization include:</p>\n<ol>\n<li>\n<p>Increased accessibility: Allowing mathematicians to work with proof assistants without extensive training in formal methods.</p>\n</li>\n<li>\n<p>Time-saving: Reducing the manual effort required to formalize mathematical content.</p>\n</li>\n<li>\n<p>Error detection: Identifying ambiguities or gaps in informal proofs during the formalization process.</p>\n</li>\n<li>\n<p>Knowledge transfer: Facilitating the conversion of existing mathematical literature into formal, machine-checkable formats.</p>\n</li>\n</ol>\n<p>While autoformalization is an active area of research, it remains a challenging problem due to the complexity and nuance of mathematical language. Current approaches often combine machine learning techniques with rule-based systems to achieve better results.</p>\n<p>Would you like me to elaborate on any specific aspect of autoformalization or its applications in proof assistants?</p>",
        "id": 451024498,
        "sender_full_name": "Eric Taucher",
        "timestamp": 1720801862
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"424214\">Tyler Josephson ⚛️</span> <a href=\"#narrow/stream/445230-Lean-for-Scientists-and-Engineers-2024/topic/Using.20LLMs.20to.20assist.20when.20needed/near/451023443\">said</a>:</p>\n<blockquote>\n<p>it's not surprising that it types the speeds as \\R and formats the hypotheses in that way, since you include those in the prompt.</p>\n</blockquote>\n<p>Thanks for the gloss note.</p>\n<p>The version of the prompt posted here is based on several revisions that I started with GPT 4o. Because the prompt was re-edited and submitted and the context window had access to the entire conversation, the AI started to give me several hypothesis instead of the desired two, so I took the prompt you see posted here and posted it to Claude to see if the context was messing up the reply. Yes I know I could have started a new conversation on GPT 4o but was also interested in seeing if the prompt worked elsewhere.</p>",
        "id": 451025758,
        "sender_full_name": "Eric Taucher",
        "timestamp": 1720802326
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"424214\">Tyler Josephson ⚛️</span> <a href=\"#narrow/stream/445230-Lean-for-Scientists-and-Engineers-2024/topic/Using.20LLMs.20to.20assist.20when.20needed/near/451023443\">said</a>:</p>\n<blockquote>\n<p>if including `example { x y : Nat}' in the prompt, does it figure out that maybe \\R would be a better choice for these properties?</p>\n</blockquote>\n<p>Prompt</p>\n<p>Given the following word problem, create the Lean 4 prover code as a student exercise to be solved using single chain of expressions. </p>\n<ul>\n<li>Use Lean <code>example</code> instead of <code>theorem</code> or <code>lemma</code>.</li>\n<li>Include variable after keyword <code>example</code> in a format like <code>example { x y : Nat}</code>. </li>\n<li>Use hypothesis in a format like  <code>(h1 : 10 = (a - b) )</code>.</li>\n<li>Put <code>example</code> and hypothesizes on separate lines.</li>\n<li>Use Lean <code>sorry</code> instead of providing solution.</li>\n<li>Use words for variable name with underscores.</li>\n<li>Convert each statement to one hypothesis if possible.</li>\n</ul>\n<div class=\"codehilite\" data-code-language=\"word\"><pre><span></span><code>-- A plane flies 450 miles with the wind in 3 hours\n-- Flying back against the wind, the plane takes 5 hours to make the trip\n-- Prove that the plane's speed in still air would be 120 miles/hour\n</code></pre></div>\n<p>Reply (<a href=\"https://claude.ai/\">Claude</a>) - Does not change Nat to Real.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"w\"> </span><span class=\"n\">plane_speed</span><span class=\"w\"> </span><span class=\"n\">wind_speed</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">450</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">plane_speed</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">wind_speed</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">450</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">plane_speed</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">wind_speed</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">plane_speed</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">120</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>Reply (<a href=\"https://chatgpt.com/\">ChatGPT 4o</a>) - Does not change Nat to Real.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"w\"> </span><span class=\"n\">plane_speed</span><span class=\"w\"> </span><span class=\"n\">wind_speed</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"o\">}</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">h1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">450</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">plane_speed</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">wind_speed</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">h2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">450</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">plane_speed</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">wind_speed</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">  </span><span class=\"n\">plane_speed</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">120</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>Reply (<a href=\"https://chat.mistral.ai/\">Mistral</a> Codetral) - Does not change Nat to Real.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"w\"> </span><span class=\"n\">wind_speed</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">450</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">wind_speed</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">120</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">450</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">wind_speed</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">120</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">120</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">wind_speed</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>Reply (<a href=\"https://chat.mistral.ai/\">Mistral</a> Large) - Does not change Nat to Real.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"w\"> </span><span class=\"n\">plane_speed_with_wind</span><span class=\"w\"> </span><span class=\"n\">plane_speed_against_wind</span><span class=\"w\"> </span><span class=\"n\">plane_speed_in_still_air</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"o\">}</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">h1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">450</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">plane_speed_with_wind</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">h2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">450</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">plane_speed_against_wind</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">h3</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">plane_speed_in_still_air</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">plane_speed_with_wind</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">plane_speed_against_wind</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">plane_speed_in_still_air</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">120</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"gr\">sorry</span>\n</code></pre></div>",
        "id": 451032950,
        "sender_full_name": "Eric Taucher",
        "timestamp": 1720804744
    },
    {
        "content": "<p>Great test! Exactly - you can see the models aren’t reflecting on / understanding the context of the task at hand. They’re matching the pattern without “thinking” about what they’re doing.</p>",
        "id": 451039385,
        "sender_full_name": "Tyler Josephson ⚛️",
        "timestamp": 1720806930
    },
    {
        "content": "<p>Having thought about this a bit, does anyone know if Lean has a type that is not specific that Lean can use like <a href=\"https://leanprover.github.io/theorem_proving_in_lean/propositions_and_proofs.html#examples-of-propositional-validities\">sorry</a> to be filled in by the user later or that Lean can use <a href=\"https://en.wikipedia.org/wiki/Type_inference\">type inferencing</a> to resolve the type if the rest of the proof is sound?</p>\n<p>My prefered programming language is Prolog, specifically <a href=\"https://www.swi-prolog.org/\">SWI-Prolog</a> so working without types when possible is quite intuitive for me. I am also quite familiar with some of the <a href=\"https://en.wikipedia.org/wiki/ML_(programming_language)\">ML</a> family of functional languages so quite use to using type inferencing.</p>",
        "id": 451061422,
        "sender_full_name": "Eric Taucher",
        "timestamp": 1720813967
    },
    {
        "content": "<p><strong>Prompt</strong> (ChatGPT 4o)</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">Does</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"w\"> </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">type</span><span class=\"w\"> </span><span class=\"n\">that</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">specific</span><span class=\"w\"> </span><span class=\"n\">that</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"w\"> </span><span class=\"n\">can</span><span class=\"w\"> </span><span class=\"n\">use</span><span class=\"w\"> </span><span class=\"n\">like</span><span class=\"w\"> </span><span class=\"gr\">sorry</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">be</span><span class=\"w\"> </span><span class=\"n\">filled</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">user</span><span class=\"w\"> </span><span class=\"n\">later</span><span class=\"w\"> </span><span class=\"n\">or</span><span class=\"w\"> </span><span class=\"n\">that</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"w\"> </span><span class=\"n\">can</span><span class=\"w\"> </span><span class=\"n\">use</span><span class=\"w\"> </span><span class=\"n\">type</span><span class=\"w\"> </span><span class=\"n\">inferencing</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">resolve</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">type</span><span class=\"w\"> </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">rest</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">proof</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">sound?</span>\n</code></pre></div>\n<p><strong>Reply</strong> (Be mindful of possible hallucinations)</p>\n<p>Yes, Lean has a mechanism for dealing with unspecified types that can be filled in later or inferred. Here are some tools that Lean provides for such scenarios:</p>\n<ol>\n<li>\n<p><strong><code>_</code> (underscore)</strong>: Lean can use an underscore to denote a placeholder for a type or term that Lean's type inference mechanism will attempt to fill in. This can be used both in types and in terms.</p>\n<p>Example:<br>\n<code>lean\n def example (x : _) := x + 1\n </code><br>\n Here, Lean will infer the type of <code>x</code> based on the context.</p>\n</li>\n<li>\n<p><strong><code>sorry</code></strong>: This keyword is used to temporarily skip a proof obligation. When you use <code>sorry</code>, Lean will accept the proof as correct, but with a warning that it is incomplete. This is useful for incrementally developing a proof.</p>\n<p>Example:<br>\n<code>lean\n theorem my_theorem (x : ℕ) : x + 1 &gt; x :=\n sorry\n </code></p>\n</li>\n<li>\n<p><strong>Implicit arguments</strong>: Lean allows you to define functions with implicit arguments that can be inferred from the context.</p>\n<p>Example:<br>\n<code>lean\n def add {α : Type} [has_add α] (a b : α) : α := a + b\n </code><br>\n Here, <code>α</code> and the instance of <code>has_add α</code> are implicit and will be inferred from the usage context.</p>\n</li>\n<li>\n<p><strong>Type classes</strong>: Lean's type class mechanism can be used to automatically infer types and instances based on the context.</p>\n<p>Example:<br>\n<code>lean\n def add_monoid {α : Type} [add_monoid α] (a b : α) : α := a + b\n </code><br>\n In this example, Lean will infer the type <code>α</code> and the corresponding instance of <code>add_monoid</code> based on how the function is used.</p>\n</li>\n</ol>\n<p>These tools make it easier to write generic and reusable code in Lean by allowing the type inference mechanism to handle unspecified types and terms.</p>\n<hr>\n<p>Since I do not know which may be valid or a <a href=\"https://www.ibm.com/topics/ai-hallucinations\">hallucination</a> will have to verify each part.</p>",
        "id": 451062915,
        "sender_full_name": "Eric Taucher",
        "timestamp": 1720814560
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"424214\">Tyler Josephson ⚛️</span> <a href=\"#narrow/stream/445230-Lean-for-Scientists-and-Engineers-2024/topic/Using.20LLMs.20to.20assist.20when.20needed/near/451023443\">said</a>:</p>\n<blockquote>\n<p>if including `example { x y : Nat}' in the prompt, does it figure out that maybe \\R would be a better choice for these properties?</p>\n</blockquote>\n<p>However changing the type from <code>R</code> to <code>_</code> the LLMs are setting the type to <code>Nat</code> when generating the code for this example.</p>\n<p>Modified part of <strong>prompt</strong></p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">Include</span><span class=\"w\"> </span><span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"n\">after</span><span class=\"w\"> </span><span class=\"n\">keyword</span><span class=\"w\"> </span><span class=\"ss\">`example</span><span class=\"bp\">`</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">format</span><span class=\"w\"> </span><span class=\"n\">like</span><span class=\"w\"> </span><span class=\"ss\">`example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"o\">}</span><span class=\"bp\">`.</span>\n</code></pre></div>\n<p><strong>Reply</strong></p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"w\"> </span><span class=\"n\">wind_speed</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">plane_speed</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"o\">}</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">h1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">450</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">plane_speed</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">wind_speed</span><span class=\"o\">))</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">h2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">450</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">plane_speed</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">wind_speed</span><span class=\"o\">))</span>\n<span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">plane_speed</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">120</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"gr\">sorry</span>\n</code></pre></div>",
        "id": 451071006,
        "sender_full_name": "Eric Taucher",
        "timestamp": 1720816970
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"366057\">Eric Taucher</span> <a href=\"#narrow/stream/445230-Lean-for-Scientists-and-Engineers-2024/topic/Using.20LLMs.20to.20assist.20when.20needed/near/451062915\">said</a>:</p>\n<blockquote>\n<p><strong><code>_</code> (underscore)</strong>: Lean can use an underscore to denote a placeholder for a type or term that Lean's type inference mechanism will attempt to fill in.</p>\n</blockquote>\n<p>See:  <a href=\"https://leanprover.github.io/theorem_proving_in_lean/dependent_type_theory.html#types-as-objects\">2.2. Types as Objects</a></p>\n<blockquote>\n<p>Equivalently, we can write <code>Type _</code> or <code>Type*</code> to avoid giving the arbitrary universe a name:</p>\n<p>constant α : Type _<br>\n#check α</p>\n<p>constant β : Type*<br>\n#check β</p>\n</blockquote>",
        "id": 451071905,
        "sender_full_name": "Eric Taucher",
        "timestamp": 1720817233
    },
    {
        "content": "<p>Also tried modifying the prompt to use <code>Type*</code> but the LLMs would always insert a bound type for the generated code, some use R, some used Nat.  If someone knows how to modify the prompt to insert<code>Type*</code> in the generated examples, please post here.</p>",
        "id": 451074000,
        "sender_full_name": "Eric Taucher",
        "timestamp": 1720817792
    },
    {
        "content": "<p>While yes, Lean has mechanisms for type inference (they’re invoked implicitly in this example to infer the type of “450” - beyond this, though, I’m not an expert in how they work), that’s still a <em>syntactic</em> question, not a <em>semantic</em> question. My only reason for preferring R over Nat is my understanding of the context of the problem - speeds of airplanes and winds are often values in between the Nats (4.5 for example), so R or at least Q would be more appropriate than Nat.</p>\n<p>I could write the theorem statement with Nat or with R or with Q and the ensuing proof would remain valid. But someone else reading this might object “is velocity really a natural number?”</p>",
        "id": 451096707,
        "sender_full_name": "Tyler Josephson ⚛️",
        "timestamp": 1720828358
    },
    {
        "content": "<p>Was reading <a href=\"https://terrytao.wordpress.com/mastodon-posts/\">this</a> by Terence Tao, amazing how even new users to Lean will see it is not just them that encounter similar situations.</p>\n<blockquote>\n<p>Journaling my Lean learning process: <a href=\"https://mathstodon.xyz/@tao/111206761117553482\">Oct 9 2023</a>, <a href=\"https://mathstodon.xyz/@tao/111213740998623666\">Oct 10 2023</a>, <a href=\"https://mathstodon.xyz/@tao/111217227599221279\">Oct 11 2023</a>, <a href=\"https://mathstodon.xyz/@tao/111224173446724762\">Oct 12 2023</a>, <a href=\"https://mathstodon.xyz/@tao/111233986893287137\">Oct 14 2023</a> part 1, <a href=\"https://mathstodon.xyz/@tao/111234828259171775\">Oct 14 2023</a> part 2, <a href=\"https://mathstodon.xyz/@tao/111236886097506940\">Oct 14 2023</a> part 3, <a href=\"https://mathstodon.xyz/@tao/111247716134350297\">Oct 16 2023</a>, <a href=\"https://mathstodon.xyz/@tao/111252123637176099\">Oct 17 2023</a>.</p>\n</blockquote>\n<p>One gem in reading was Lean <a href=\"https://docs.google.com/spreadsheets/d/1Gsn5al4hlpNc_xKoXdU6XGmMyLiX4q-LFesFVsMlANo/edit?gid=0#gid=0\">phrasebook</a><br>\nI don't know if he is updating it but it is something of value that I hope gets expanded or others can share similar data, e.g. <code>Mathematical English</code> and <code>Lean equivalent</code></p>",
        "id": 451164925,
        "sender_full_name": "Eric Taucher",
        "timestamp": 1720872006
    },
    {
        "content": "<p>The other section of interest related to this topic from Terrence's <a href=\"https://terrytao.wordpress.com/mastodon-posts/\">blog</a></p>\n<blockquote>\n<p>AI, proof assistants, and other machine assistants:</p>\n</blockquote>\n<p>You will have to scroll down to find the section, no direct link. Same as with Lean, new users to LLMs will see it is not just them that encounter similar situations.</p>",
        "id": 451165547,
        "sender_full_name": "Eric Taucher",
        "timestamp": 1720872437
    }
]