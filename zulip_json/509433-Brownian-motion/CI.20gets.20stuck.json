[
    {
        "content": "<p>Half of our CI runs get stuck on the <code>Lint project</code> step, where we get those 3 lines printed, and then nothing for a very long time (I don't know how long, I stopped one after 50 minutes):</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">Run</span><span class=\"w\"> </span><span class=\"n\">env</span><span class=\"w\"> </span><span class=\"n\">LEAN_ABORT_ON_PANIC</span><span class=\"bp\">=</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">~/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">bin</span><span class=\"bp\">/</span><span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"n\">exe</span><span class=\"w\"> </span><span class=\"n\">runLinter</span><span class=\"w\"> </span><span class=\"n\">BrownianMotion</span>\n<span class=\"w\">  </span><span class=\"n\">env</span><span class=\"w\"> </span><span class=\"n\">LEAN_ABORT_ON_PANIC</span><span class=\"bp\">=</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">~/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">bin</span><span class=\"bp\">/</span><span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"n\">exe</span><span class=\"w\"> </span><span class=\"n\">runLinter</span><span class=\"w\"> </span><span class=\"n\">BrownianMotion</span>\n<span class=\"w\">  </span><span class=\"n\">shell</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">usr</span><span class=\"bp\">/</span><span class=\"n\">bin</span><span class=\"bp\">/</span><span class=\"n\">bash</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">e</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"mi\">0</span><span class=\"o\">}</span>\n</code></pre></div>\n<p>Example: this run <a href=\"https://github.com/RemyDegenne/brownian-motion/actions/runs/19140278725/job/54703144152?pr=199\">https://github.com/RemyDegenne/brownian-motion/actions/runs/19140278725/job/54703144152?pr=199</a></p>\n<p>When I cancel and then restart the job, I usually get a successful <code>Lint project</code> step which is less than a minute.</p>",
        "id": 554120533,
        "sender_full_name": "Rémy Degenne",
        "timestamp": 1762442916
    },
    {
        "content": "<p>There was no problem with CI yesterday, but today I had to restart many runs.</p>",
        "id": 554120823,
        "sender_full_name": "Rémy Degenne",
        "timestamp": 1762442978
    },
    {
        "content": "<p>Any idea of what could be the cause?</p>",
        "id": 554121008,
        "sender_full_name": "Rémy Degenne",
        "timestamp": 1762443012
    },
    {
        "content": "<p>I took a brief look at the logs / commits and didn't notice anything suspicious. I was hoping there was maybe a command line option you could add to make <a href=\"https://github.com/leanprover-community/batteries/blob/dd3edb3aa6b4de87f96f2c3998881ef95ba24ed7/scripts/runLinter.lean#L130\"><code>runLinter</code></a> spit out more info but I didn't see one. This is maybe worth posting in <a class=\"stream\" data-stream-id=\"113488\" href=\"/#narrow/channel/113488-general\">#general</a> so someone with more knowledge about linters can see it.</p>",
        "id": 554129274,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1762444856
    },
    {
        "content": "<p>(I have a wild theory which is that there's some non-deterministic linter which is sometimes causing the runner to run out of memory and not respond anymore, but I don't know enough about our linters to know if this even makes sense.)</p>",
        "id": 554129909,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1762444993
    },
    {
        "content": "<p>Thanks for looking into it. I posted here: <a class=\"stream-topic\" data-stream-id=\"113488\" href=\"/#narrow/channel/113488-general/topic/CI.20stuck.20at.20Lint.20project.20step/with/554143358\">#general &gt; CI stuck at Lint project step</a></p>",
        "id": 554143467,
        "sender_full_name": "Rémy Degenne",
        "timestamp": 1762448356
    },
    {
        "content": "<p>The CI for <a href=\"https://github.com/RemyDegenne/brownian-motion/pull/301\">https://github.com/RemyDegenne/brownian-motion/pull/301</a> and <a href=\"https://github.com/RemyDegenne/brownian-motion/pull/303\">https://github.com/RemyDegenne/brownian-motion/pull/303</a> get stuck for several times on the Lint project step with the following warning message:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">Run</span><span class=\"w\"> </span><span class=\"n\">env</span><span class=\"w\"> </span><span class=\"n\">LEAN_ABORT_ON_PANIC</span><span class=\"bp\">=</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">~/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">bin</span><span class=\"bp\">/</span><span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"n\">exe</span><span class=\"w\"> </span><span class=\"n\">runLinter</span><span class=\"w\"> </span><span class=\"n\">BrownianMotion</span>\n<span class=\"n\">warning</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">manifest</span><span class=\"w\"> </span><span class=\"n\">out</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">date</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">git</span><span class=\"w\"> </span><span class=\"n\">revision</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">dependency</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">mathlib'</span><span class=\"w\"> </span><span class=\"n\">changed</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">use</span><span class=\"w\"> </span><span class=\"ss\">`lake</span><span class=\"w\"> </span><span class=\"n\">update</span><span class=\"w\"> </span><span class=\"n\">mathlib</span><span class=\"bp\">`</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">update</span><span class=\"w\"> </span><span class=\"n\">it</span>\n<span class=\"n\">warning</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">manifest</span><span class=\"w\"> </span><span class=\"n\">out</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">date</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">git</span><span class=\"w\"> </span><span class=\"n\">revision</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">dependency</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">subverso'</span><span class=\"w\"> </span><span class=\"n\">changed</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">use</span><span class=\"w\"> </span><span class=\"ss\">`lake</span><span class=\"w\"> </span><span class=\"n\">update</span><span class=\"w\"> </span><span class=\"n\">subverso</span><span class=\"bp\">`</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">update</span><span class=\"w\"> </span><span class=\"n\">it</span>\n</code></pre></div>\n<p>I tried <code>lake update subverso</code> in my terminal with the following error message:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">mac</span><span class=\"bp\">/</span><span class=\"n\">Documents</span><span class=\"bp\">/</span><span class=\"n\">GitHub</span><span class=\"bp\">/</span><span class=\"n\">brownian</span><span class=\"bp\">-</span><span class=\"n\">motion</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">subverso</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">revision</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">found</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">master'</span>\n</code></pre></div>\n<p>What can I do to fix this issue?</p>",
        "id": 558789843,
        "sender_full_name": "Yongxi Lin (Aaron)",
        "timestamp": 1763792733
    },
    {
        "content": "<p>I think the warnings are not related to the CI issue. The only solution I have for now is to restart CI (by clicking the restart button, or if you don't have that button by making a new commit). Around half of the times it gets stuck, but half of the time linting succeeds (in &lt; 10 s).</p>",
        "id": 558791196,
        "sender_full_name": "Rémy Degenne",
        "timestamp": 1763794054
    },
    {
        "content": "<p>Both of them passes all the checks after I made several meaningless commits. They are now ready to review.</p>",
        "id": 558794480,
        "sender_full_name": "Yongxi Lin (Aaron)",
        "timestamp": 1763797358
    },
    {
        "content": "<p>I restarted CI for the latest commit to master 10 times, and the latest attempt is still stuck. That CI issue is becoming really annoying. I don't want to remove the linting step, but it is getting too difficult to go around the issue.</p>",
        "id": 560661053,
        "sender_full_name": "Rémy Degenne",
        "timestamp": 1764271598
    },
    {
        "content": "<p>I'll take a look at it later today.</p>",
        "id": 560664489,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1764273472
    }
]